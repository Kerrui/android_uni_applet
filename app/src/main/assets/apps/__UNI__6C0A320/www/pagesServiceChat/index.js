"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var Dn=Object.create;var it=Object.defineProperty,In=Object.defineProperties,xn=Object.getOwnPropertyDescriptor,Ln=Object.getOwnPropertyDescriptors,Pn=Object.getOwnPropertyNames,$t=Object.getOwnPropertySymbols,Mn=Object.getPrototypeOf,Vt=Object.prototype.hasOwnProperty,On=Object.prototype.propertyIsEnumerable;var Ut=(e,t,i)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,nt=(e,t)=>{for(var i in t||(t={}))Vt.call(t,i)&&Ut(e,i,t[i]);if($t)for(var i of $t(t))On.call(t,i)&&Ut(e,i,t[i]);return e},Ht=(e,t)=>In(e,Ln(t));var Nn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Rn=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Pn(t))!Vt.call(e,s)&&s!==i&&it(e,s,{get:()=>t[s],enumerable:!(n=xn(t,s))||n.enumerable});return e};var re=(e,t,i)=>(i=e!=null?Dn(Mn(e)):{},Rn(t||!e||!e.__esModule?it(i,"default",{value:e,enumerable:!0}):i,e));var oe=(e,t,i)=>new Promise((n,s)=>{var a=c=>{try{l(i.next(c))}catch(u){s(u)}},r=c=>{try{l(i.throw(c))}catch(u){s(u)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,r);l((i=i.apply(e,t)).next())});var se=Nn((ko,jt)=>{jt.exports=Vue});var o=re(se());var A=re(se()),W={zT:2,appId:plus.runtime.appid,appV:parseInt(plus.runtime.version.split(".").join("")),isAndroid:plus.os.name=="Android"};var Fn=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Ee=e=>Fn?Symbol(e):e,Bn=(e,t,i)=>Wn({l:e,k:t,s:i}),Wn=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Y=e=>typeof e=="number"&&isFinite(e),$n=e=>ht(e)==="[object Date]",We=e=>ht(e)==="[object RegExp]",He=e=>I(e)&&Object.keys(e).length===0;function Un(e,t){typeof console!="undefined"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}var Z=Object.assign;function Gt(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}var Vn=Object.prototype.hasOwnProperty;function li(e,t){return Vn.call(e,t)}var j=Array.isArray,J=e=>typeof e=="function",b=e=>typeof e=="string",R=e=>typeof e=="boolean",K=e=>e!==null&&typeof e=="object",ci=Object.prototype.toString,ht=e=>ci.call(e),I=e=>ht(e)==="[object Object]",Hn=e=>e==null?"":j(e)||I(e)&&e.toString===ci?JSON.stringify(e,null,2):String(e);var jn=Object.prototype.hasOwnProperty;function Gn(e,t){return jn.call(e,t)}var Re=e=>e!==null&&typeof e=="object",ce=[];ce[0]={w:[0],i:[3,0],"[":[4],o:[7]};ce[1]={w:[1],".":[2],"[":[4],o:[7]};ce[2]={w:[2],i:[3,0],0:[3,0]};ce[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};ce[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};ce[5]={"'":[4,0],o:8,l:[5,0]};ce[6]={'"':[4,0],o:8,l:[6,0]};var zn=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Yn(e){return zn.test(e)}function Jn(e){let t=e.charCodeAt(0),i=e.charCodeAt(e.length-1);return t===i&&(t===34||t===39)?e.slice(1,-1):e}function Kn(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function qn(e){let t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:Yn(t)?Jn(t):"*"+t}function Zn(e){let t=[],i=-1,n=0,s=0,a,r,l,c,u,d,f,_=[];_[0]=()=>{r===void 0?r=l:r+=l},_[1]=()=>{r!==void 0&&(t.push(r),r=void 0)},_[2]=()=>{_[0](),s++},_[3]=()=>{if(s>0)s--,n=4,_[0]();else{if(s=0,r===void 0||(r=qn(r),r===!1))return!1;_[1]()}};function y(){let m=e[i+1];if(n===5&&m==="'"||n===6&&m==='"')return i++,l="\\"+m,_[0](),!0}for(;n!==null;)if(i++,a=e[i],!(a==="\\"&&y())){if(c=Kn(a),f=ce[n],u=f[c]||f.l||8,u===8||(n=u[0],u[1]!==void 0&&(d=_[u[1]],d&&(l=a,d()===!1))))return;if(n===7)return t}}var zt=new Map;function $e(e,t){if(!Re(e))return null;let i=zt.get(t);if(i||(i=Zn(t),i&&zt.set(t,i)),!i)return null;let n=i.length,s=e,a=0;for(;a<n;){let r=s[i[a]];if(r===void 0)return null;s=r,a++}return s}function lt(e){if(!Re(e))return e;for(let t in e)if(Gn(e,t))if(!t.includes("."))Re(e[t])&&lt(e[t]);else{let i=t.split("."),n=i.length-1,s=e;for(let a=0;a<n;a++)i[a]in s||(s[i[a]]={}),s=s[i[a]];s[i[n]]=e[t],delete e[t],Re(s[i[n]])&&lt(s[i[n]])}return e}var Xn=e=>e,Qn=e=>"",es="text",ts=e=>e.length===0?"":e.join(""),is=Hn;function Yt(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function ns(e){let t=Y(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Y(e.named.count)||Y(e.named.n))?Y(e.named.count)?e.named.count:Y(e.named.n)?e.named.n:t:t}function ss(e,t){t.count||(t.count=e),t.n||(t.n=e)}function as(e={}){let t=e.locale,i=ns(e),n=K(e.pluralRules)&&b(t)&&J(e.pluralRules[t])?e.pluralRules[t]:Yt,s=K(e.pluralRules)&&b(t)&&J(e.pluralRules[t])?Yt:void 0,a=S=>S[n(i,S.length,s)],r=e.list||[],l=S=>r[S],c=e.named||{};Y(e.pluralIndex)&&ss(i,c);let u=S=>c[S];function d(S){let C=J(e.messages)?e.messages(S):K(e.messages)?e.messages[S]:!1;return C||(e.parent?e.parent.message(S):Qn)}let f=S=>e.modifiers?e.modifiers[S]:Xn,_=I(e.processor)&&J(e.processor.normalize)?e.processor.normalize:ts,y=I(e.processor)&&J(e.processor.interpolate)?e.processor.interpolate:is,m=I(e.processor)&&b(e.processor.type)?e.processor.type:es,w={list:l,named:u,plural:a,linked:(S,C)=>{let E=d(S)(w);return b(C)?f(C)(E):E},message:d,type:m,interpolate:y,normalize:_};return w}function ui(e,t,i={}){let{domain:n,messages:s,args:a}=i,r=e,l=new SyntaxError(String(r));return l.code=e,t&&(l.location=t),l.domain=n,l}var rs="9.1.9",je=-1,Jt="";function os(){return{upper:e=>b(e)?e.toUpperCase():e,lower:e=>b(e)?e.toLowerCase():e,capitalize:e=>b(e)?`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`:e}}var ls,Kt=0;function cs(e={}){let t=b(e.version)?e.version:rs,i=b(e.locale)?e.locale:"en-US",n=j(e.fallbackLocale)||I(e.fallbackLocale)||b(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:i,s=I(e.messages)?e.messages:{[i]:{}},a=I(e.datetimeFormats)?e.datetimeFormats:{[i]:{}},r=I(e.numberFormats)?e.numberFormats:{[i]:{}},l=Z({},e.modifiers||{},os()),c=e.pluralRules||{},u=J(e.missing)?e.missing:null,d=R(e.missingWarn)||We(e.missingWarn)?e.missingWarn:!0,f=R(e.fallbackWarn)||We(e.fallbackWarn)?e.fallbackWarn:!0,_=!!e.fallbackFormat,y=!!e.unresolving,m=J(e.postTranslation)?e.postTranslation:null,w=I(e.processor)?e.processor:null,S=R(e.warnHtmlMessage)?e.warnHtmlMessage:!0,C=!!e.escapeParameter,E=J(e.messageCompiler)?e.messageCompiler:ls,L=J(e.onWarn)?e.onWarn:Un,g=e,v=K(g.__datetimeFormatters)?g.__datetimeFormatters:new Map,ee=K(g.__numberFormatters)?g.__numberFormatters:new Map,de=K(g.__meta)?g.__meta:{};return Kt++,{version:t,cid:Kt,locale:i,fallbackLocale:n,messages:s,datetimeFormats:a,numberFormats:r,modifiers:l,pluralRules:c,missing:u,missingWarn:d,fallbackWarn:f,fallbackFormat:_,unresolving:y,postTranslation:m,processor:w,warnHtmlMessage:S,escapeParameter:C,messageCompiler:E,onWarn:L,__datetimeFormatters:v,__numberFormatters:ee,__meta:de}}function _t(e,t,i,n,s){let{missing:a,onWarn:r}=e;if(a!==null){let l=a(e,i,t,s);return b(l)?l:t}else return t}function ke(e,t,i){let n=e;n.__localeChainCache||(n.__localeChainCache=new Map);let s=n.__localeChainCache.get(i);if(!s){s=[];let a=[i];for(;j(a);)a=qt(s,a,t);let r=j(t)?t:I(t)?t.default?t.default:null:t;a=b(r)?[r]:r,j(a)&&qt(s,a,!1),n.__localeChainCache.set(i,s)}return s}function qt(e,t,i){let n=!0;for(let s=0;s<t.length&&R(n);s++){let a=t[s];b(a)&&(n=us(e,t[s],i))}return n}function us(e,t,i){let n,s=t.split("-");do{let a=s.join("-");n=ds(e,a,i),s.splice(-1,1)}while(s.length&&n===!0);return n}function ds(e,t,i){let n=!1;if(!e.includes(t)&&(n=!0,t)){n=t[t.length-1]!=="!";let s=t.replace(/!/g,"");e.push(s),(j(i)||I(i))&&i[s]&&(n=i[s])}return n}function Te(e,t,i){let n=e;n.__localeChainCache=new Map,ke(e,i,t)}function _e(e){return ui(e,null,void 0)}var Zt=()=>"",me=e=>J(e);function Xt(e,...t){let{fallbackFormat:i,postTranslation:n,unresolving:s,fallbackLocale:a,messages:r}=e,[l,c]=ct(...t),u=R(c.missingWarn)?c.missingWarn:e.missingWarn,d=R(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn,f=R(c.escapeParameter)?c.escapeParameter:e.escapeParameter,_=!!c.resolvedMessage,y=b(c.default)||R(c.default)?R(c.default)?l:c.default:i?l:"",m=i||y!=="",w=b(c.locale)?c.locale:e.locale;f&&ps(c);let[S,C,E]=_?[l,w,r[w]||{}]:fs(e,l,w,a,d,u),L=l;if(!_&&!(b(S)||me(S))&&m&&(S=y,L=S),!_&&(!(b(S)||me(S))||!b(C)))return s?je:l;let g=!1,v=()=>{g=!0},ee=me(S)?S:di(e,l,C,S,L,v);if(g)return S;let de=hs(e,C,E,c),X=as(de),te=ms(e,ee,X);return n?n(te):te}function ps(e){j(e.list)?e.list=e.list.map(t=>b(t)?Gt(t):t):K(e.named)&&Object.keys(e.named).forEach(t=>{b(e.named[t])&&(e.named[t]=Gt(e.named[t]))})}function fs(e,t,i,n,s,a){let{messages:r,onWarn:l}=e,c=ke(e,n,i),u={},d,f=null,_="translate";for(let y=0;y<c.length&&(d=c[y],u=r[d]||{},(f=$e(u,t))===null&&(f=u[t]),!(b(f)||J(f)));y++){let m=_t(e,t,d,a,_);m!==t&&(f=m)}return[f,d,u]}function di(e,t,i,n,s,a){let{messageCompiler:r,warnHtmlMessage:l}=e;if(me(n)){let u=n;return u.locale=u.locale||i,u.key=u.key||t,u}let c=r(n,gs(e,i,s,n,l,a));return c.locale=i,c.key=t,c.source=n,c}function ms(e,t,i){return t(i)}function ct(...e){let[t,i,n]=e,s={};if(!b(t)&&!Y(t)&&!me(t))throw _e(14);let a=Y(t)?String(t):(me(t),t);return Y(i)?s.plural=i:b(i)?s.default=i:I(i)&&!He(i)?s.named=i:j(i)&&(s.list=i),Y(n)?s.plural=n:b(n)?s.default=n:I(n)&&Z(s,n),[a,s]}function gs(e,t,i,n,s,a){return{warnHtmlMessage:s,onError:r=>{throw a&&a(r),r},onCacheKey:r=>Bn(t,i,r)}}function hs(e,t,i,n){let{modifiers:s,pluralRules:a}=e,l={locale:t,modifiers:s,pluralRules:a,messages:c=>{let u=$e(i,c);if(b(u)){let d=!1,_=di(e,c,t,u,c,()=>{d=!0});return d?Zt:_}else return me(u)?u:Zt}};return e.processor&&(l.processor=e.processor),n.list&&(l.list=n.list),n.named&&(l.named=n.named),Y(n.plural)&&(l.pluralIndex=n.plural),l}function Qt(e,...t){let{datetimeFormats:i,unresolving:n,fallbackLocale:s,onWarn:a}=e,{__datetimeFormatters:r}=e,[l,c,u,d]=ut(...t),f=R(u.missingWarn)?u.missingWarn:e.missingWarn;R(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;let _=!!u.part,y=b(u.locale)?u.locale:e.locale,m=ke(e,s,y);if(!b(l)||l==="")return new Intl.DateTimeFormat(y).format(c);let w={},S,C=null,E="datetime format";for(let v=0;v<m.length&&(S=m[v],w=i[S]||{},C=w[l],!I(C));v++)_t(e,l,S,f,E);if(!I(C)||!b(S))return n?je:l;let L=`${S}__${l}`;He(d)||(L=`${L}__${JSON.stringify(d)}`);let g=r.get(L);return g||(g=new Intl.DateTimeFormat(S,Z({},C,d)),r.set(L,g)),_?g.formatToParts(c):g.format(c)}function ut(...e){let[t,i,n,s]=e,a={},r={},l;if(b(t)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(t))throw _e(16);l=new Date(t);try{l.toISOString()}catch(c){throw _e(16)}}else if($n(t)){if(isNaN(t.getTime()))throw _e(15);l=t}else if(Y(t))l=t;else throw _e(14);return b(i)?a.key=i:I(i)&&(a=i),b(n)?a.locale=n:I(n)&&(r=n),I(s)&&(r=s),[a.key||"",l,a,r]}function ei(e,t,i){let n=e;for(let s in i){let a=`${t}__${s}`;n.__datetimeFormatters.has(a)&&n.__datetimeFormatters.delete(a)}}function ti(e,...t){let{numberFormats:i,unresolving:n,fallbackLocale:s,onWarn:a}=e,{__numberFormatters:r}=e,[l,c,u,d]=dt(...t),f=R(u.missingWarn)?u.missingWarn:e.missingWarn;R(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;let _=!!u.part,y=b(u.locale)?u.locale:e.locale,m=ke(e,s,y);if(!b(l)||l==="")return new Intl.NumberFormat(y).format(c);let w={},S,C=null,E="number format";for(let v=0;v<m.length&&(S=m[v],w=i[S]||{},C=w[l],!I(C));v++)_t(e,l,S,f,E);if(!I(C)||!b(S))return n?je:l;let L=`${S}__${l}`;He(d)||(L=`${L}__${JSON.stringify(d)}`);let g=r.get(L);return g||(g=new Intl.NumberFormat(S,Z({},C,d)),r.set(L,g)),_?g.formatToParts(c):g.format(c)}function dt(...e){let[t,i,n,s]=e,a={},r={};if(!Y(t))throw _e(14);let l=t;return b(i)?a.key=i:I(i)&&(a=i),b(n)?a.locale=n:I(n)&&(r=n),I(s)&&(r=s),[a.key||"",l,a,r]}function ii(e,t,i){let n=e;for(let s in i){let a=`${t}__${s}`;n.__numberFormatters.has(a)&&n.__numberFormatters.delete(a)}}var _s="9.1.9";function fe(e,...t){return ui(e,null,void 0)}var pt=Ee("__transrateVNode"),ft=Ee("__datetimeParts"),mt=Ee("__numberParts"),ys=Ee("__setPluralRules"),pi=Ee("__injectWithOption"),ni=0;function si(e){return(t,i,n,s)=>e(i,n,(0,A.getCurrentInstance)()||void 0,s)}function fi(e,t){let{messages:i,__i18n:n}=t,s=I(i)?i:j(n)?{}:{[e]:{}};if(j(n)&&n.forEach(({locale:a,resource:r})=>{a?(s[a]=s[a]||{},Ue(r,s[a])):Ue(r,s)}),t.flatJson)for(let a in s)li(s,a)&&lt(s[a]);return s}var Oe=e=>!K(e)||j(e);function Ue(e,t){if(Oe(e)||Oe(t))throw fe(20);for(let i in e)li(e,i)&&(Oe(e[i])||Oe(t[i])?t[i]=e[i]:Ue(e[i],t[i]))}function Ss(e={}){let{__root:t}=e,i=t===void 0,n=R(e.inheritLocale)?e.inheritLocale:!0,s=(0,A.ref)(t&&n?t.locale.value:b(e.locale)?e.locale:"en-US"),a=(0,A.ref)(t&&n?t.fallbackLocale.value:b(e.fallbackLocale)||j(e.fallbackLocale)||I(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:s.value),r=(0,A.ref)(fi(s.value,e)),l=(0,A.ref)(I(e.datetimeFormats)?e.datetimeFormats:{[s.value]:{}}),c=(0,A.ref)(I(e.numberFormats)?e.numberFormats:{[s.value]:{}}),u=t?t.missingWarn:R(e.missingWarn)||We(e.missingWarn)?e.missingWarn:!0,d=t?t.fallbackWarn:R(e.fallbackWarn)||We(e.fallbackWarn)?e.fallbackWarn:!0,f=t?t.fallbackRoot:R(e.fallbackRoot)?e.fallbackRoot:!0,_=!!e.fallbackFormat,y=J(e.missing)?e.missing:null,m=J(e.missing)?si(e.missing):null,w=J(e.postTranslation)?e.postTranslation:null,S=R(e.warnHtmlMessage)?e.warnHtmlMessage:!0,C=!!e.escapeParameter,E=t?t.modifiers:I(e.modifiers)?e.modifiers:{},L=e.pluralRules||t&&t.pluralRules,g;function v(){return cs({version:_s,locale:s.value,fallbackLocale:a.value,messages:r.value,messageCompiler:function(h){return ie=>ie.normalize([h])},datetimeFormats:l.value,numberFormats:c.value,modifiers:E,pluralRules:L,missing:m===null?void 0:m,missingWarn:u,fallbackWarn:d,fallbackFormat:_,unresolving:!0,postTranslation:w===null?void 0:w,warnHtmlMessage:S,escapeParameter:C,__datetimeFormatters:I(g)?g.__datetimeFormatters:void 0,__numberFormatters:I(g)?g.__numberFormatters:void 0,__v_emitter:I(g)?g.__v_emitter:void 0,__meta:{framework:"vue"}})}g=v(),Te(g,s.value,a.value);function ee(){return[s.value,a.value,r.value,l.value,c.value]}let de=(0,A.computed)({get:()=>s.value,set:p=>{s.value=p,g.locale=s.value}}),X=(0,A.computed)({get:()=>a.value,set:p=>{a.value=p,g.fallbackLocale=a.value,Te(g,s.value,p)}}),te=(0,A.computed)(()=>r.value),ne=(0,A.computed)(()=>l.value),xe=(0,A.computed)(()=>c.value);function Le(){return J(w)?w:null}function Pe(p){w=p,g.postTranslation=p}function et(){return y}function rn(p){p!==null&&(m=si(p)),y=p,g.missing=m}function he(p,h,ie,z,tt,Me){ee();let Ae;if(Ae=p(g),Y(Ae)&&Ae===je){let[vn,Co]=h();return t&&f?z(t):tt(vn)}else{if(Me(Ae))return Ae;throw fe(14)}}function Bt(...p){return he(h=>Xt(h,...p),()=>ct(...p),"translate",h=>h.t(...p),h=>h,h=>b(h))}function on(...p){let[h,ie,z]=p;if(z&&!K(z))throw fe(15);return Bt(h,ie,Z({resolvedMessage:!0},z||{}))}function ln(...p){return he(h=>Qt(h,...p),()=>ut(...p),"datetime format",h=>h.d(...p),()=>Jt,h=>b(h))}function cn(...p){return he(h=>ti(h,...p),()=>dt(...p),"number format",h=>h.n(...p),()=>Jt,h=>b(h))}function un(p){return p.map(h=>b(h)?(0,A.createVNode)(A.Text,null,h,0):h)}let dn={normalize:un,interpolate:p=>p,type:"vnode"};function pn(...p){return he(h=>{let ie,z=h;try{z.processor=dn,ie=Xt(z,...p)}finally{z.processor=null}return ie},()=>ct(...p),"translate",h=>h[pt](...p),h=>[(0,A.createVNode)(A.Text,null,h,0)],h=>j(h))}function fn(...p){return he(h=>ti(h,...p),()=>dt(...p),"number format",h=>h[mt](...p),()=>[],h=>b(h)||j(h))}function mn(...p){return he(h=>Qt(h,...p),()=>ut(...p),"datetime format",h=>h[ft](...p),()=>[],h=>b(h)||j(h))}function gn(p){L=p,g.pluralRules=L}function hn(p,h){let ie=b(h)?h:s.value,z=Wt(ie);return $e(z,p)!==null}function _n(p){let h=null,ie=ke(g,a.value,s.value);for(let z=0;z<ie.length;z++){let tt=r.value[ie[z]]||{},Me=$e(tt,p);if(Me!=null){h=Me;break}}return h}function yn(p){let h=_n(p);return h!=null?h:t?t.tm(p)||{}:{}}function Wt(p){return r.value[p]||{}}function Sn(p,h){r.value[p]=h,g.messages=r.value}function bn(p,h){r.value[p]=r.value[p]||{},Ue(h,r.value[p]),g.messages=r.value}function wn(p){return l.value[p]||{}}function An(p,h){l.value[p]=h,g.datetimeFormats=l.value,ei(g,p,h)}function Tn(p,h){l.value[p]=Z(l.value[p]||{},h),g.datetimeFormats=l.value,ei(g,p,h)}function Cn(p){return c.value[p]||{}}function En(p,h){c.value[p]=h,g.numberFormats=c.value,ii(g,p,h)}function kn(p,h){c.value[p]=Z(c.value[p]||{},h),g.numberFormats=c.value,ii(g,p,h)}return ni++,t&&((0,A.watch)(t.locale,p=>{n&&(s.value=p,g.locale=p,Te(g,s.value,a.value))}),(0,A.watch)(t.fallbackLocale,p=>{n&&(a.value=p,g.fallbackLocale=p,Te(g,s.value,a.value))})),{id:ni,locale:de,fallbackLocale:X,get inheritLocale(){return n},set inheritLocale(p){n=p,p&&t&&(s.value=t.locale.value,a.value=t.fallbackLocale.value,Te(g,s.value,a.value))},get availableLocales(){return Object.keys(r.value).sort()},messages:te,datetimeFormats:ne,numberFormats:xe,get modifiers(){return E},get pluralRules(){return L||{}},get isGlobal(){return i},get missingWarn(){return u},set missingWarn(p){u=p,g.missingWarn=u},get fallbackWarn(){return d},set fallbackWarn(p){d=p,g.fallbackWarn=d},get fallbackRoot(){return f},set fallbackRoot(p){f=p},get fallbackFormat(){return _},set fallbackFormat(p){_=p,g.fallbackFormat=_},get warnHtmlMessage(){return S},set warnHtmlMessage(p){S=p,g.warnHtmlMessage=p},get escapeParameter(){return C},set escapeParameter(p){C=p,g.escapeParameter=p},t:Bt,rt:on,d:ln,n:cn,te:hn,tm:yn,getLocaleMessage:Wt,setLocaleMessage:Sn,mergeLocaleMessage:bn,getDateTimeFormat:wn,setDateTimeFormat:An,mergeDateTimeFormat:Tn,getNumberFormat:Cn,setNumberFormat:En,mergeNumberFormat:kn,getPostTranslationHandler:Le,setPostTranslationHandler:Pe,getMissingHandler:et,setMissingHandler:rn,[pt]:pn,[mt]:fn,[ft]:mn,[ys]:gn,[pi]:e.__injectWithOption}}var yt={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};Z({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Y(e)||!isNaN(e)}},yt);function bs({slots:e},t){return t.length===1&&t[0]==="default"?e.default?e.default():[]:t.reduce((i,n)=>{let s=e[n];return s&&(i[n]=s()),i},{})}function mi(e,t,i,n){let{slots:s,attrs:a}=t;return()=>{let r={part:!0},l={};e.locale&&(r.locale=e.locale),b(e.format)?r.key=e.format:K(e.format)&&(b(e.format.key)&&(r.key=e.format.key),l=Object.keys(e.format).reduce((f,_)=>i.includes(_)?Z({},f,{[_]:e.format[_]}):f,{}));let c=n(e.value,r,l),u=[r.key];j(c)?u=c.map((f,_)=>{let y=s[f.type];return y?y({[f.type]:f.value,index:_,parts:c}):[f.value]}):b(c)&&(u=[c]);let d=Z({},a);return b(e.tag)?(0,A.h)(e.tag,d,u):K(e.tag)?(0,A.h)(e.tag,d,u):(0,A.h)(A.Fragment,d,u)}}var ws=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"];Z({value:{type:Number,required:!0},format:{type:[String,Object]}},yt);var As=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"];Z({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},yt);function St(e={}){let t=(0,A.getCurrentInstance)();if(t==null)throw fe(16);if(!t.appContext.app.__VUE_I18N_SYMBOL__)throw fe(17);let i=(0,A.inject)(t.appContext.app.__VUE_I18N_SYMBOL__);if(!i)throw fe(22);let n=i.mode==="composition"?i.global:i.global.__composer,s=He(e)?"__i18n"in t.type?"local":"global":e.useScope?e.useScope:"local";if(s==="global"){let l=K(e.messages)?e.messages:{};"__i18nGlobal"in t.type&&(l=fi(n.locale.value,{messages:l,__i18n:t.type.__i18nGlobal}));let c=Object.keys(l);if(c.length&&c.forEach(u=>{n.mergeLocaleMessage(u,l[u])}),K(e.datetimeFormats)){let u=Object.keys(e.datetimeFormats);u.length&&u.forEach(d=>{n.mergeDateTimeFormat(d,e.datetimeFormats[d])})}if(K(e.numberFormats)){let u=Object.keys(e.numberFormats);u.length&&u.forEach(d=>{n.mergeNumberFormat(d,e.numberFormats[d])})}return n}if(s==="parent"){let l=Ts(i,t,e.__useComponent);return l==null&&(l=n),l}if(i.mode==="legacy")throw fe(18);let a=i,r=a.__getInstance(t);if(r==null){let l=t.type,c=Z({},e);l.__i18n&&(c.__i18n=l.__i18n),n&&(c.__root=n),r=Ss(c),Cs(a,t),a.__setInstance(t,r)}return r}function Ts(e,t,i=!1){let n=null,s=t.root,a=t.parent;for(;a!=null;){let r=e;if(e.mode==="composition")n=r.__getInstance(a);else{let l=r.__getInstance(a);l!=null&&(n=l.__composer),i&&n&&!n[pi]&&(n=null)}if(n!=null||s===a)break;a=a.parent}return n}function Cs(e,t,i){(0,A.onMounted)(()=>{},t),(0,A.onUnmounted)(()=>{e.__deleteInstance(t)},t)}function bt(e,t,i=!1,n=null){let s=At(e,i);n?uni.setStorage({key:s,data:t,success:n}):uni.setStorageSync(s,t)}function wt(e,t=!1,i=null){let n=At(e,t);if(i)uni.getStorage({key:n,success:i});else return uni.getStorageSync(n)}function gi(e,t=!1){uni.removeStorage({key:At(e,t)})}function At(e,t){return t?`_azb_${e}`:`mzb_${e}`}function T(e){return typeof e=="undefined"||e==null||e==""}var pe=new Promise(()=>{});function Es(e,t,i=""){if(T(e))return"";let n=[];for(let s in e)n.push(s+"="+e[s]);return i+n.join(t)}function ye(e){return typeof e=="number"?e+"":typeof e=="boolean"?e?"true":"false":T(e)?"null":typeof e=="object"?JSON.stringify(e):e}function Ge(e){return e.replace(new RegExp("'","gm"),"\uFF07")}function Ne(e,t){let i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length==1?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t}function ks(e){return e=parseInt(e),e.toString().length==16?e=Math.round(e/1e3):e<1e10&&(e=e*1e3),e}function hi(e,t=!0,i=!1,n=""){if(T(e))return"";e=ks(e);let s;n==""?s=new Date:s=vs(n);let a=new Date(e),r=s.getFullYear(),l=s.getMonth()+1,c=s.getDate(),u=a.getFullYear(),d=a.getMonth()+1,f=a.getDate(),_="",y=t?" "+Ne(a,"hh:mm"):"";if(r==u){let C=s.getTime()-e;if(l==d&&c==f)C<60*1e3&&!t?_=P("just"):_=`${P("today")} ${Ne(a,"hh:mm")}`;else{let E=new Date;E.setDate(E.getDate()-1);let L=new Date;if(L.setDate(L.getDate()-2),d==E.getMonth()+1&&f==E.getDate())_=`${P("yesterday")} ${y}`;else{var m=C/36e5;if(m<=7*24){let g=new Array(7),v=i?"Short":"";g[0]=P("week.sun"+v),g[1]=P("week.mon"+v),g[2]=P("week.tues"+v),g[3]=P("week.wed"+v),g[4]=P("week.thur"+v),g[5]=P("week.fri"+v),g[6]=P("week.sat"+v);var w=g[a.getDay()];_=w+" "+y}else _=Ne(a,"M/d")+y}}}else _=Ne(a,"M/d")+y;return _}function vs(e){let t=new Date,i=t.getTime(),a=t.getTimezoneOffset()*6e4+i+36e5*e;return new Date(a)}function ve(e,t=!1){if(T(e)||e<0||isNaN(e))return t?"00:00:00":"00:00";var i=0,n=0;e>0&&e<10?e="0"+parseInt(e):e<=0?e="00":e>=60&&(i=parseInt(e/60)<10?"0"+parseInt(e/60):parseInt(e/60),e=parseInt(e%60)<10?"0"+parseInt(e%60):parseInt(e%60),i>60&&(n=parseInt(i/60)<10?"0"+parseInt(i/60):parseInt(i/60),i=parseInt(i%60)<10?"0"+parseInt(i%60):parseInt(i%60)));var s;return n>0?s=n+":"+i+":"+e:i>0?(s=i+":"+e,t&&(s="00:"+s)):(s="00:"+e,t&&(s="00:"+s)),s}function Tt(e,t,i){return Math.abs(e-t)>i*60*1e3}function _i(e){try{let t=JSON.parse(e);if(typeof t=="object")return t}catch(t){}return!1}function yi(){return Math.random().toString(36).substr(2)}var st={};function Ct(e,t=500,i="throttle"){let n=e.name;T(n)&&(n=i),!st[n]&&(st[n]=!0,e(),setTimeout(function(){st[n]=""},t))}function Et(e,t,i=1e4){return e<=0||t<=0?[108,192]:(t>e?(t=t*108/e,t>i&&(t=i),e=108):(t=t*148/e,e=148),[e,t])}function Ds(e){if(T(e))return"";let t=e.split("/");if(T(t))return"";let i=t[t.length-1];if(T(i))return"";let n=i.split(".");if(T(n))return"";let s=n[n.length-1];return T(s)?"":s.toLowerCase()}function Si(e){if(!e)return"";let t=JSON.stringify(e);return(typeof t!="string"||t=="{}")&&(t=e.toString()),t}function Is(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Fe={LEVEL_34:34,LEVEL_33:33,LEVEL_29:29};var xs="onResize";function ge(e){return weex.requireModule(e)}function k(e,t,...i){uni.__log__?uni.__log__(e,t,...i):console[e].apply(console,[...i,t])}function ue(e,t){return typeof e=="string"?t:e}var Ls=e=>(t,i=(0,A.getCurrentInstance)())=>{!A.isInSSRComponentSetup&&(0,A.injectHook)(e,t,i)},bi=Ls(xs);var Ps={INIT:1,OPEN:2,CALLBACK:3,SOCKET:4,LOGIN:5};var Ms={INIT:"init",APP_SHOW:"app_show",TAB_SHOW:"tab_show",MSG_INDEX_REFRESH:"msg_index_refresh",STOP_TAKING_RECOVERY:"stop_taking_recovery",CATCH_MSG_SYNC:"sync_catch",API_CALL_BACK:"api_call_back",RECONNECT_LISTENER:"reconnect_listener",RECONNECT_LOCAL:"reconnect_local"},Os={emailLogin:"/pagesLogin/email-login",forgetPwd:"/pagesLogin/forget-pwd",signUp:"/pagesLogin/sign-up",confirmSignUp:"/pagesLogin/confirm-sign-up",usageInstructionsPopup:"/pagesDialog/usage-instructions-popup",releaseConch:"/pagesPub/conch/release-conch",msgSendMediaLimit:"/pagesDialog/msg-send-media-limit",userHome:"/pagesPub/user-home/user-home",reportUser:"/pagesReport/index",myConch:"/pagesPub/conch/my-conch",blockList:"/pagesPub/block/block-list",accountSettings:"/pagesPub/account-settings/account-settings",bindNewEmail:"/pagesPub/account-settings/bind-new-email",settings:"/pagesPub/settings/settings",feedback:"/pagesPub/settings/feedback",aboutUs:"/pagesPub/settings/about-us",changePassword:"/pagesPub/account-settings/change-password",catchConch:"/pagesPub/conch/catch-conch",buyVip:"/pagesPub/buyVip/vip",coinDetail:"/pagesPub/coin-detail/coin-detail",editProfile:"/pagesPub/edit-profile/edit-profile",buyCoins:"/pagesPub/buyCoins/coins",ageDialog:"/pagesDialog/age-dialog",sendVideoTip:"/pagesDialog/send-video-tip",reportDialog:"/pagesDialog/report-dialog",chooseCountry:"/pagesDialog/choose-country",filterSex:"/pagesPub/filter-sex/filter-sex",buyVipDialog:"/pagesPub/buy-vip-dialog/buy-vip-dialog",authenticationDialog:"/pagesPub/authentication-dialog/authentication-dialog",faceAuthentication:"/pagesPub/authentication-dialog/face-authentication",topUpDialog:"/pagesPub/top-up-dialog/top-up-dialog",callRecords:"/pagesPub/call-records/call-records",friendList:"/pagesPub/user-home/friend-list",notify:"/pagesPub/notify/notify"};function wi(e,t){let i=Os[e];return i||(i=e),i+Es(t,"&","?")}function Ns(e,t=null,i=null,n=!1){let s=wi(e,t),a={url:s,fail:r=>{k("error","at common/route.js:58",`\u6253\u5F00\u9875\u9762\u5931\u8D25${s} ${JSON.stringify(r)}`)}};n&&(a=Object.assign(a,n)),i!=null&&(a.events=i),uni.navigateTo(a)}function Ce(e,t,i,n,s=null){let r={url:wi(e,t),success(l){l.eventChannel.emit(i,n)}};s!=null&&(r.events=s),uni.navigateTo(r)}function kt(e=1,t="",i="",n){let s={delta:e,complete:()=>{typeof n=="function"&&n()}};t&&(s.animationType=t),i&&(s.animationDuration=i),uni.navigateBack(s)}function Rs(){let e=[],t=getCurrentPages();for(let i=0,n=t.length;i<n;i++){let s=t[i].$page;e.push(s.path)}return e}var Ai={PHOTO:1,VIDEO:2,VOICE:3,TXT:4},Fs=["gif","heic"];function Ti(e){function t(r,l,c){for(;0<c--;)r.push(l)}function i(r,l){return r<<l|r>>>32-l}function n(r,l,c){return r^l^c}function s(r,l){var c=(l&65535)+(r&65535),u=(l>>>16)+(r>>>16)+(c>>>16);return(u&65535)<<16|c&65535}var a="0123456789abcdef";return function(r){for(var l=[],c=r.length*4,u,d=0;d<c;d++)u=r[d>>2]>>(3-d%4)*8,l.push(a.charAt(u>>4&15)+a.charAt(u&15));return l.join("")}(function(r,l){var c,u,d,f,_,y=r.length,m=1732584193,w=4023233417,S=2562383102,C=271733878,E=3285377520,L=[];t(L,1518500249,20),t(L,1859775393,20),t(L,2400959708,20),t(L,3395469782,20),r[l>>5]|=128<<24-l%32,r[(l+65>>9<<4)+15]=l;for(var g=0;g<y;g+=16){c=m,u=w,d=S,f=C,_=E;for(var v=0,ee=[];v<80;v++){ee[v]=v<16?r[v+g]:i(ee[v-3]^ee[v-8]^ee[v-14]^ee[v-16],1);var de=function(X,te,ne,xe,Le){var Pe=(Le&65535)+(X&65535)+(te&65535)+(ne&65535)+(xe&65535),et=(Le>>>16)+(X>>>16)+(te>>>16)+(ne>>>16)+(xe>>>16)+(Pe>>>16);return(et&65535)<<16|Pe&65535}(v<20?function(X,te,ne){return X&te^~X&ne}(u,d,f):v<40?n(u,d,f):v<60?function(X,te,ne){return X&te^X&ne^te&ne}(u,d,f):n(u,d,f),_,L[v],ee[v],i(c,5));_=f,f=d,d=i(u,30),u=c,c=de}m=s(m,c),w=s(w,u),S=s(S,d),C=s(C,f),E=s(E,_)}return[m,w,S,C,E]}(function(r){for(var l=[],c=255,u=r.length*8,d=0;d<u;d+=8)l[d>>5]|=(r.charCodeAt(d/8)&c)<<24-d%32;return l}(e).slice(),e.length*8))}function vt(e,t,i=!0){return vi(getApp().globalData.ossPicPath,e,t,i)}function Ci(e,t,i=!0){return vi(getApp().globalData.ossPath,e,t,i)}function Ei(e){return T(e)?"":e.substr(0,5)==="_doc/"||e.substr(0,4)==="http"?e:getApp().globalData.ossPath+e}function ki(e){if(T(e)||e.startsWith("http"))return;let i=`img_${Ti(e)}`,n=wt(i);gi(i),n&&uni.removeSavedFile({filePath:n})}function vi(e,t,i,n=!0){if(T(t))return"";if(t.startsWith("http")||t.startsWith("file://"))return t;if(t.startsWith("/var/mobile/"))return"file://"+t;if(t.startsWith("/storage/"))return t;let a=`img_${Ti(t)}`,r=wt(a);if(r){let c={filePath:r,fail(u){Bs(`\u7F13\u5B58\u68C0\u6D4B\u5931\u8D25${t}`,u),gi(a),typeof i=="function"&&i(e+t)},success(u){}};return typeof i=="function"&&(c.success=function(){i(r)}),uni.getFileInfo(c),r}let l=e+t;return getApp().globalData.picCacheObj[a]||(getApp().globalData.picCacheObj[a]=1,typeof i=="function"&&!n&&i(l),ra(l).then(c=>{bt(a,c),typeof i=="function"&&n&&i(c),delete getApp().globalData.picCacheObj[a]}).catch(()=>{})),l}function Bs(e,t){k("error","at common/cache.js:118",`cache ${e}`,t)}var Ve={M_TEXT:1,M_VOICE:2,M_IMG:3,M_GIFT:5,M_NOTICE:6,M_CALL:8,M_RECOMMEND_USER:11,M_RECOMMEND_CLUB:12,M_VIDEO:4,M_GIFT_ASK:21,M_NOTICE_SYS:22,M_EXPRESSION:23,M_LETTER:24,M_PAID_PHOTO:25,M_PAID_VIDEO:26,M_MATCH_SUCCESS:27,M_AI_ISSUE_GUIDE:28,M_AI_ISSUE_QUESTION:29,M_SERVICE_RATING:30,M_N_DEF:100,M_N_AUDIT:103,M_N_VIP:104,M_N_RECHARGE:105,M_N_CLUB_AUDIT_REJECT:106,M_N_CLUB_AUDIT:107,M_N_GREETING_AUDIT:115,M_N_SYS_NOTICE:116,M_N_CALL:117,M_N_COOPERATE:118,M_N_WITHDRAW:119,M_N_REPORT_AUDIT:120,M_N_IMG:121,M_N_PRIVACY_CALL:122,M_N_WITHDRAW_NOTICE:123,M_N_WITH_MEDIA:124,M_N_REPORT_RESULT:144,M_N_COMPLAINT_NOTICE:145,M_N_MONITOR:202,M_C_RECHARGE:1001,M_C_CALL_TEXT_AUDIO:1002,SYSTEM_ID:1e7};function Se(e,t=!0){return e.startsWith("http")?e:e.startsWith("file://")?t?e:e.replace("file://",""):e.startsWith("/storage/")||e.startsWith("/var/mobile/")?t?`file://${e}`:e:e.startsWith("_doc/uniapp")?t?e:plus.io.convertLocalFileSystemURL(e):e.indexOf("apps/__UNI")!=-1?e:!1}function Dt(e,t,i){return new Promise(n=>{let s=e;s.startsWith("_doc")&&(s=plus.io.convertLocalFileSystemURL(s)),getApp().globalData.pluginImageBrowser.getVideoCover({url:s},a=>{Ws(`getVideoCover ${a}`),n(a)})})}function Di(e,t){let i=e.msg_type==Ve.M_VIDEO||e.msg_type==Ve.M_PAID_VIDEO,n;if(i){let s=t.small_url||t.cover_url||t.cover,a=t.cover_url||t.cover,r=t.url;r.startsWith("_doc")&&(r=plus.io.convertLocalFileSystemURL(r)),n=ai(!0,s,r,a)}else{let s=t.small_url||t.image_url;n=ai(!1,s,t.image_url)}return n}function ai(e,t,i,n="1",s=0,a=0){let r,l=Se(t,!1);if(l)r=l;else{let d;if(W.isAndroid,d=!1,d){let f=vt(t);r=f.startsWith("http")?f:plus.io.convertLocalFileSystemURL(f)}else r=getApp().globalData.ossPicPath+t}let c=Se(i,!1)||`${getApp().globalData.ossPath}${i}`,u=e?Se(n,!1)||`${getApp().globalData.ossPicPath}${n}`:n;return{isVideo:e,thumbnailUrl:r||"",url:c,coverUrl:u,width:s,height:a}}function Ii(e,t,i=1){Ct(function(){let n=JSON.parse(JSON.stringify(e));getApp().globalData.pluginImageBrowser.openBrowser({info:n,index:t,showIndicator:i},s=>{k("info","at comExtend/plugin-image-browser.js:80","Preview.preview "+JSON.stringify(s))})},500,"previewImage")}function Ws(e,t){k("error","at comExtend/plugin-image-browser.js:90",`preview media ${e}`,t)}function xi(e){return new Promise(t=>{getApp().globalData.pluginTool.permissionRequest({permission:e},i=>{t(i)})})}function $s(e){return getApp().globalData.pluginTool.permissionStatusSync({permission:e})}function Us(e){return getApp().globalData.pluginTool.permissionOpenSetting({permission:e})}function Vs(){return getApp().globalData.pluginTool.locationAuthorizationStatusSync()}function Hs(){return new Promise(e=>{getApp().globalData.pluginTool.locationAuthorizationStatus({},t=>{e(t)})})}var x={ALBUM:1,CAMERA:2,VIDEO:3,MICROPHONE:4,NOTIFY:5,LOCATION:6,DRAW_OVERLAYS:7},O={GRANTED:1,DENIED:0,DENIED_ALWAYS:-1};function ze(e,t=!0,i=!0){return new Promise(n=>{let s=function(a){a==O.GRANTED?n(!0):(a==O.DENIED||a==O.DENIED_ALWAYS&&i&&Gs(e),n(!1))};if(W.isAndroid)if(e==x.NOTIFY)Js().then(s);else{let a=Ye(e);xi(a).then(s)}else ia(e)(t).then(s)})}function Li(e){return e==x.NOTIFY?W.isAndroid?Be(e):Pi():e==x.MICROPHONE?W.isAndroid?Be(e):ta():e==x.LOCATION?W.isAndroid?Be(e):Vs():!0}function js(e){W.isAndroid?zs(Ye(e)):Ks()}var at=!1;function Gs(e,t){at||(uni.showModal({title:P("tips"),content:na(e),showCancel:!0,cancelText:P("cancel"),confirmText:P("toTurnOn"),complete(i){at=!1,i.confirm?(js(e),typeof t=="function"&&t(!0)):i.cancel&&typeof t=="function"&&t(!1)}}),at=!0)}function Be(e){let t=Ye(e);return $s(t)}function zs(e){if(T(e)){Ys();return}Us(e)}function Ys(){var e=plus.android.importClass("android.content.Intent"),t=plus.android.importClass("android.provider.Settings"),i=plus.android.importClass("android.net.Uri"),n=plus.android.runtimeMainActivity(),s=new e;s.setAction(t.ACTION_APPLICATION_DETAILS_SETTINGS);var a=i.fromParts("package",n.getPackageName(),null);s.setData(a),n.startActivity(s)}function Ye(e){switch(e){case x.LOCATION:return["android.permission.ACCESS_FINE_LOCATION","android.permission.ACCESS_COARSE_LOCATION"];case x.ALBUM:case x.VIDEO:let t=["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO"];return getApp().globalData.sys.androidAPILevel>=Fe.LEVEL_34&&t.push("android.permission.READ_MEDIA_VISUAL_USER_SELECTED"),t;case x.MICROPHONE:return getApp().globalData.sys.androidAPILevel<Fe.LEVEL_29?["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO","android.permission.RECORD_AUDIO"]:["android.permission.RECORD_AUDIO"];case x.CAMERA:return getApp().globalData.sys.androidAPILevel<Fe.LEVEL_29?["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO","android.permission.CAMERA"]:["android.permission.CAMERA"];case x.NOTIFY:return["android.permission.POST_NOTIFICATIONS"]}}function Js(){return new Promise(e=>{if(getApp().globalData.sys.androidAPILevel>=Fe.LEVEL_33)xi(Ye(x.NOTIFY)).then(t=>{e(t)});else{let t=Be(x.NOTIFY);e(t?O.GRANTED:O.DENIED_ALWAYS)}})}function Ks(){var e=plus.ios.import("UIApplication"),t=e.sharedApplication(),i=plus.ios.import("NSURL"),n=i.URLWithString("app-settings:");t.openURL(n),plus.ios.deleteObject(n),plus.ios.deleteObject(i),plus.ios.deleteObject(t)}function qs(){return new Promise(e=>{Hs().then(t=>{e(t==1?O.GRANTED:O.DENIED_ALWAYS)})})}function Zs(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),n=i.authorizationStatusForMediaType("soun");n==3?(plus.ios.deleteObject(i),t(O.GRANTED)):n==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","soun",function(){if(e){let s=i.authorizationStatusForMediaType("soun");plus.ios.deleteObject(i),t(s==3?O.GRANTED:O.DENIED)}else plus.ios.deleteObject(i),t(O.DENIED)}):(plus.ios.deleteObject(i),t(O.DENIED_ALWAYS))})}function Xs(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),n=i.authorizationStatusForMediaType("vide");n==3?(plus.ios.deleteObject(i),t(O.GRANTED)):n==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","vide",function(){if(e){let s=i.authorizationStatusForMediaType("vide");plus.ios.deleteObject(i),t(s==3?O.GRANTED:O.DENIED)}else plus.ios.deleteObject(i),t(O.DENIED)}):(plus.ios.deleteObject(i),t(O.DENIED_ALWAYS))})}function Qs(e){return new Promise(t=>{let i=plus.ios.import("PHPhotoLibrary"),n=i.authorizationStatus();n==3||n==4?(plus.ios.deleteObject(i),t(O.GRANTED)):n==0?plus.ios.invoke("PHPhotoLibrary","requestAuthorization:",function(){if(e){let s=i.authorizationStatus();plus.ios.deleteObject(i),t(s==3||s==4?O.GRANTED:O.DENIED)}else plus.ios.deleteObject(i),t(O.DENIED)}):(plus.ios.deleteObject(i),t(O.DENIED_ALWAYS))})}function ea(){return new Promise(e=>{let t=plus.ios.invoke("UNUserNotificationCenter","currentNotificationCenter");plus.ios.invoke(t,"requestAuthorizationWithOptions:completionHandler:",7,function(i){plus.ios.deleteObject(t);let n=Pi();e(n?O.GRANTED:O.DENIED_ALWAYS)})})}function ta(){let e=plus.ios.importClass("AVCaptureDevice"),t=e.authorizationStatusForMediaType("soun");return plus.ios.deleteObject(e),t==3}function Pi(){var e=!1,t=plus.ios.import("UIApplication"),i=t.sharedApplication(),n=0;if(i.currentUserNotificationSettings){var s=i.currentUserNotificationSettings();n=s.plusGetAttribute("types"),e=n!=0,plus.ios.deleteObject(s)}else n=i.enabledRemoteNotificationTypes(),e=n!=0;return plus.ios.deleteObject(i),plus.ios.deleteObject(t),e}function ia(e){switch(e){case x.LOCATION:return qs;case x.ALBUM:case x.VIDEO:return Qs;case x.MICROPHONE:return Zs;case x.CAMERA:return Xs;case x.NOTIFY:return ea}}function na(e){let t=getApp().globalData.appInfo;return e==x.LOCATION?P("openLocationPerTip",{appName:t.name}):e==x.ALBUM||e==x.VIDEO?P("openAlbumPerTip",{appName:t.name}):e==x.MICROPHONE?P("openMicrophonePerTip",{appName:t.name}):e==x.NOTIFY?P("msg.openNoticePerTips",{appName:t.name}):e==x.CAMERA?P("openCameraPerTip",{appName:t.name}):""}function sa(e,t){getApp().globalData.s.commit("setPubValue",{name:e,value:t})}function aa(e){let t=uni.getSystemInfoSync().uniRuntimeVersion;if(!e)return t;let i=t.split("."),n=i[i.length-1];n.length<=1&&(i[i.length-1]=n+"0");let s=i.join("");return Number(s)}function ra(e){return new Promise((t,i)=>{uni.downloadFile({url:e}).then(n=>!n||n.statusCode!=200||!n.tempFilePath?(i(),new Promise(()=>{})):uni.saveFile({tempFilePath:n.tempFilePath})).then(n=>{!n||!n.savedFilePath?i():t(n.savedFilePath)}).catch(n=>{k("error","at common/common.js:72","downloadFile error "+JSON.stringify(n))})})}function It(e,t="md5"){return new Promise(i=>{uni.getFileInfo({filePath:e,digestAlgorithm:t,success(n){i(n)},fail(){i(null)}})})}function ri(e,t){t?plus.runtime.openWeb(e):plus.runtime.openURL(e)}function oa(e,t,i,n=P("confirm")){ca(e,t,i,"",n,!1)}function la(e){return["Si, desbloquear","Reenviar Completar"].indexOf(e)!=-1}function ca(e,t,i,n,s=P("confirm"),a=!0,r=P("cancel"),l=!1){let c=!1;if(!W.isAndroid&&(c=la(s),c)){let u=s;s=r,r=u}uni.showModal({title:e,content:t,showCancel:a,cancelText:r,confirmText:s,editable:l,success(u){u.confirm?c?typeof n=="function"&&n():typeof i=="function"&&i(u):u.cancel&&(c?typeof i=="function"&&i(u):typeof n=="function"&&n())}})}function ua(e,t="none",i="center"){uni.showToast({title:e,duration:2e3,icon:t,position:i})}function da(e,t){uni.showToast({title:e,duration:t,icon:"none",position:"center"})}function xt(e){return new Promise(t=>{plus.io.getVideoInfo({filePath:e,success(i){t(i)},fail(i){t(`getVideoInfo ${JSON.stringify(i)}`)}})})}function Mi(e,t){return new Promise((i,n)=>{uni.compressVideo({src:e,quality:t,success(s){k("log","at common/common.js:247","videoCompress res "+JSON.stringify(s)),i(s)},fail(s){k("log","at common/common.js:251","videoCompress error "+JSON.stringify(s)),n(`videoCompress ${JSON.stringify(s)}`)}})})}function Oi(e,t=1,i=!1,n=!1){return new Promise((s,a)=>{if(e==0){k("error","at common/common.js:273","\u300A!!Warn!!\u300B----> [Does not support simultaneous selection of album and camera] ");return}let r=["album","camera"],l;e==1?(r=["album"],l=x.ALBUM):e==2&&(r=["camera"],l=x.CAMERA);let c=["compressed"];i&&c.push("original");let u={};if(n){let d=getApp().globalData.window.width;u={width:d,height:d}}ze(l).then(d=>{if(!d){a(),k("error","at common/common.js:295","choose image permission fail");return}uni.chooseImage({count:t,sourceType:r,sizeType:c,crop:u,success:function(f){let _=[];for(let y=0,m=f.tempFilePaths.length;y<m;y++){let w=f.tempFilePaths[y],S=Ds(w);Fs.indexOf(S)!=-1&&_.push(y)}if(_.length>0&&(f.tempFilePaths=f.tempFilePaths.filter((y,m)=>_.indexOf(m)==-1),f.tempFiles&&(f.tempFiles=f.tempFiles.filter((y,m)=>_.indexOf(m)!=-1))),e!=1)for(let y=0,m=f.tempFilePaths.length;y<m;y++)f.tempFilePaths[y]=plus.io.convertLocalFileSystemURL(f.tempFilePaths[y]);s(f)},fail:function(f){a(),k("error","at common/common.js:333","choose image error --->"+JSON.stringify(f))}})})})}function Ni(e,t,i=!1,n=15){return new Promise((s,a)=>{let r,l=["album","camera"],c;e==1?(l=["album"],c=x.VIDEO):e==2&&(l=["camera"],c=x.CAMERA),ze(c).then(u=>{if(!u){a(),k("error","at common/common.js:355","choose video permission fail");return}return uni.chooseVideo({sourceType:l,compressed:!1,maxDuration:n,camera:i?"front":"back"})}).then(u=>{if(k("error","at common/common.js:365","----> uni.chooseVideo "+JSON.stringify(u)),r=JSON.parse(JSON.stringify(u)),r&&r.duration&&parseInt(r.duration)>n){let d=setTimeout(()=>{clearTimeout(d),da(P("video.durationExceedTip",{number:n}),3e3)},500);return a(null),pe}return r.tempFilePath=r.tempFilePath.replace("file://",""),W.isAndroid&&aa(!0)<3617?xt(r.tempFilePath):new Promise(d=>{d(null)})}).then(u=>{if(u&&(u.orientation=="right"||u.orientation=="left")){k("error","at common/common.js:387","----> uni.chooseVideo videoInfo "+JSON.stringify(u));let d=r.height,f=r.width;r.width=d,r.height=f}return t?Dt(r.tempFilePath,r.width,r.height):new Promise(d=>{d(null)})}).then(u=>(k("error","at common/common.js:401","----> uni.chooseVideo coverUrl "+u),r.coverPath=u,s(r))).catch(u=>{k("error","at common/common.js:405","-----> chooseVideo error "+JSON.stringify(u)),a()})})}var rt=0;function pa(e){return ma(fa(ga(e)))}function fa(e){return _a(ya(ha(e),e.length*8))}function ma(e){try{}catch(a){rt=0}for(var t=rt?"0123456789ABCDEF":"0123456789abcdef",i="",n,s=0;s<e.length;s++)n=e.charCodeAt(s),i+=t.charAt(n>>>4&15)+t.charAt(n&15);return i}function ga(e){for(var t="",i=-1,n,s;++i<e.length;)n=e.charCodeAt(i),s=i+1<e.length?e.charCodeAt(i+1):0,55296<=n&&n<=56319&&56320<=s&&s<=57343&&(n=65536+((n&1023)<<10)+(s&1023),i++),n<=127?t+=String.fromCharCode(n):n<=2047?t+=String.fromCharCode(192|n>>>6&31,128|n&63):n<=65535?t+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|n&63):n<=2097151&&(t+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|n&63));return t}function ha(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<e.length*8;i+=8)t[i>>5]|=(e.charCodeAt(i/8)&255)<<i%32;return t}function _a(e){for(var t="",i=0;i<e.length*32;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function ya(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,n=-271733879,s=-1732584194,a=271733878,r=0;r<e.length;r+=16){var l=i,c=n,u=s,d=a;i=$(i,n,s,a,e[r+0],7,-680876936),a=$(a,i,n,s,e[r+1],12,-389564586),s=$(s,a,i,n,e[r+2],17,606105819),n=$(n,s,a,i,e[r+3],22,-1044525330),i=$(i,n,s,a,e[r+4],7,-176418897),a=$(a,i,n,s,e[r+5],12,1200080426),s=$(s,a,i,n,e[r+6],17,-1473231341),n=$(n,s,a,i,e[r+7],22,-45705983),i=$(i,n,s,a,e[r+8],7,1770035416),a=$(a,i,n,s,e[r+9],12,-1958414417),s=$(s,a,i,n,e[r+10],17,-42063),n=$(n,s,a,i,e[r+11],22,-1990404162),i=$(i,n,s,a,e[r+12],7,1804603682),a=$(a,i,n,s,e[r+13],12,-40341101),s=$(s,a,i,n,e[r+14],17,-1502002290),n=$(n,s,a,i,e[r+15],22,1236535329),i=U(i,n,s,a,e[r+1],5,-165796510),a=U(a,i,n,s,e[r+6],9,-1069501632),s=U(s,a,i,n,e[r+11],14,643717713),n=U(n,s,a,i,e[r+0],20,-373897302),i=U(i,n,s,a,e[r+5],5,-701558691),a=U(a,i,n,s,e[r+10],9,38016083),s=U(s,a,i,n,e[r+15],14,-660478335),n=U(n,s,a,i,e[r+4],20,-405537848),i=U(i,n,s,a,e[r+9],5,568446438),a=U(a,i,n,s,e[r+14],9,-1019803690),s=U(s,a,i,n,e[r+3],14,-187363961),n=U(n,s,a,i,e[r+8],20,1163531501),i=U(i,n,s,a,e[r+13],5,-1444681467),a=U(a,i,n,s,e[r+2],9,-51403784),s=U(s,a,i,n,e[r+7],14,1735328473),n=U(n,s,a,i,e[r+12],20,-1926607734),i=V(i,n,s,a,e[r+5],4,-378558),a=V(a,i,n,s,e[r+8],11,-2022574463),s=V(s,a,i,n,e[r+11],16,1839030562),n=V(n,s,a,i,e[r+14],23,-35309556),i=V(i,n,s,a,e[r+1],4,-1530992060),a=V(a,i,n,s,e[r+4],11,1272893353),s=V(s,a,i,n,e[r+7],16,-155497632),n=V(n,s,a,i,e[r+10],23,-1094730640),i=V(i,n,s,a,e[r+13],4,681279174),a=V(a,i,n,s,e[r+0],11,-358537222),s=V(s,a,i,n,e[r+3],16,-722521979),n=V(n,s,a,i,e[r+6],23,76029189),i=V(i,n,s,a,e[r+9],4,-640364487),a=V(a,i,n,s,e[r+12],11,-421815835),s=V(s,a,i,n,e[r+15],16,530742520),n=V(n,s,a,i,e[r+2],23,-995338651),i=H(i,n,s,a,e[r+0],6,-198630844),a=H(a,i,n,s,e[r+7],10,1126891415),s=H(s,a,i,n,e[r+14],15,-1416354905),n=H(n,s,a,i,e[r+5],21,-57434055),i=H(i,n,s,a,e[r+12],6,1700485571),a=H(a,i,n,s,e[r+3],10,-1894986606),s=H(s,a,i,n,e[r+10],15,-1051523),n=H(n,s,a,i,e[r+1],21,-2054922799),i=H(i,n,s,a,e[r+8],6,1873313359),a=H(a,i,n,s,e[r+15],10,-30611744),s=H(s,a,i,n,e[r+6],15,-1560198380),n=H(n,s,a,i,e[r+13],21,1309151649),i=H(i,n,s,a,e[r+4],6,-145523070),a=H(a,i,n,s,e[r+11],10,-1120210379),s=H(s,a,i,n,e[r+2],15,718787259),n=H(n,s,a,i,e[r+9],21,-343485551),i=le(i,l),n=le(n,c),s=le(s,u),a=le(a,d)}return Array(i,n,s,a)}function Je(e,t,i,n,s,a){return le(Sa(le(le(t,e),le(n,a)),s),i)}function $(e,t,i,n,s,a,r){return Je(t&i|~t&n,e,t,s,a,r)}function U(e,t,i,n,s,a,r){return Je(t&n|i&~n,e,t,s,a,r)}function V(e,t,i,n,s,a,r){return Je(t^i^n,e,t,s,a,r)}function H(e,t,i,n,s,a,r){return Je(i^(t|~n),e,t,s,a,r)}function le(e,t){var i=(e&65535)+(t&65535),n=(e>>16)+(t>>16)+(i>>16);return n<<16|i&65535}function Sa(e,t){return e<<t|e>>>32-t}var gt={md5:function(e){return pa(e)}};function ba(e,t){let i=getApp().globalData.s.state.AES.encrypt(t,e);return`${getApp().globalData.apiUaPrefix}${i}`}function oi(e){return gt.md5(`${getApp().globalData.channel}${e}${getApp().globalData.apiEncValue}`).substring(0,16)}var q={setToken(e){T(e)||sa("pubToken",e)},isLogin(){let e=getApp().globalData.s.state;return!T(e.pubToken)&&e.pubUser.uid},isNoCompletedInfo(){let e=getApp().globalData.s.state;return!T(e.pubToken)&&e.pubUser.uid&&e.userStep==1},requestSign(e,t,i,n,s=!1){let a=getApp().globalData.desCodeStatus?T(getApp().globalData.desCodeVal)?0:1:0;return q.request(e,t,i,n,s,1,a)},request(e,t,i,n,s=!1){return new Promise((a,r)=>{var l,c,u;let d=!1;if(i)if(i=="refresh")d=!0;else{let E={mask:!0};typeof i=="string"&&(E.title=i),uni.showLoading(E)}let f=!1;try{f=getApp().globalData.s.state.pubToken}catch(E){k("error","at common/api.js:44","request token catch "+JSON.stringify(E))}T((l=getApp().globalData)==null?void 0:l.ua)&&(ot(7,(c=getApp().globalData)==null?void 0:c.ua,typeof((u=getApp().globalData)==null?void 0:u.ua),t,e,f),getApp().initUaInfo());let _=getApp().globalData.ua,y,m=va(t),w={"content-type":"application/json"},S=getApp().globalData.apiHost,C;f&&getApp().globalData.uid!==0?(w.Authorization=`Bearer ${f}`,C=oi(getApp().globalData.uid)):C=oi(0),w.ua=ba(_,C),y=getApp().globalData.s.state.AES.encrypt(C,JSON.stringify(m)),uni.request({url:S+e,method:"POST",header:w,data:y,dataType:"json",timeout:1e4,complete(E){if(i&&uni.hideLoading(),k("log","at common/api.js:78",`API - ${e} \xB7\xB7\xB7\xB7\xB7 ${JSON.stringify(t)} statusCode=${E==null?void 0:E.statusCode}`),E.header&&E.header["x-report-log"]&&ot(E.header["x-report-log"],w.ua,_,y,e,f),E.statusCode==200){let L=E.data,g=getApp().globalData.s.state.AES.decrypt(C,L);if(g=_i(g),!g){n&&r(g),ot(1,w.ua,_,y,e,f);return}if(g.data&&typeof g.data.callback=="object"&&(q.handleCallback(g.data.callback),s))return pe;if(g.ok===99)return getApp().loginOut(),pe;if(g.ok==-98)return ka(g.data),n&&r(g),pe;if(T(g.msg)||ua(g.msg),g.ok>0){a(g);return}n&&r(g)}else{if(E.statusCode==401)return getApp().loginOut(),pe;if(d&&uni.stopPullDownRefresh(),n)r(E);else return pe}},fail(E){}})})},handleCallback(e){switch(e.func_name){case"alert":wa(e.func_data);break;case"open":Aa(e.func_data);break;case"vip_alert":Ce("/pages/vip/vip-dialog",null,"vipDialogData",e.func_data);break;case"recharge_alert":let t={actionType:e.func_data.action_type,diffCoin:e.func_data.diff_coin||0};t.order_source=typeof e.func_data.order_source=="undefined"?0:e.func_data.order_source,t.click_type=typeof e.func_data.click_type=="undefined"?0:e.func_data.click_type,Ce("/pages/coin/coin-dialog",t,"coinDialogData",e.func_data);break;case"close":kt();break;case"banned_alert":let i=e.func_data.exp_time;if(parseInt(new Date().getTime()/1e3)>i)return;break;case"reconnect_mqtt":getApp().socketReconnect(Ms.API_CALL_BACK,e.func_data);break;case"reload_route":getApp().handleSecret(e.func_data,Ps.CALLBACK,{});break;case"event":Ta(e.func_data);break;case"api":Ca(e.func_data);break;case"sensitive_alert":Ce("/pagesDialog/sensitive-check",null,"sensitiveData",e.func_data),uni.hideKeyboard();break;case"free_coins":Ce("/pagesDialog/coins-free",{coin:e.func_data.free_coins},"coinsFree",{},{});break}},accessLog(e,t){this.request("/other/access-log",{api_name:e,content:ye(t)})},accessLogExtra(e,t,i){let n=`${ye(t)} ${ye(i)}`;this.request("/other/access-log",{api_name:e,content:n})},accessLogApi(e,t,i,n){let s=`url:${t} p:${JSON.stringify(i)} res ${ye(n)}`;q.accessLog(e,s)}};function wa(e){let t=e.enter_func,i=e.cancel_title,n=e.enter_title,s=e.cancel_func,a=!T(i);uni.hideKeyboard(),uni.showModal({title:e.title,content:e.msg,showCancel:a,cancelText:a?i:P("cancel"),confirmText:n||P("ok"),complete(r){r.confirm?T(t)||q.handleCallback(t):r.cancel&&(T(s)||q.handleCallback(s))}})}function Aa(e){let t=e.page_name,i=e.data;t=="inside_web"?ri(i.route,!0):t=="safari"?ri(i.route,!1):t=="web"?Ns(i.route):t=="native"&&Ea(i.route)}function Ta(e){let t=e.event_key;if(T(t))return;let i=e.data;T(i)?uni.$emit(t):uni.$emit(t,i)}function Ca(e){if(e.type==1){let i={user_info:{is_rest:0}};q.request("/user/update-info",i,!0).then(()=>{getApp().pubUser.is_rest=0,oa(P("tips"),P("anchorTurnedOffRest"),"",P("gotIt"))})}}function Ea(e){return new Function("return "+e)()}function ka(e){Rs().indexOf("/pagesDialog/stop_taking")==-1&&(getApp().globalData.appStopTaking=!0,getApp().socketDisconnect(),Ce("/pagesDialog/stop_taking",{},"stopTakingData",e))}function va(e){try{T(e)&&(e={}),e.times=new Date().getTime();let t=Object.keys(e).sort(),i={};for(let s=0,a=t.length;s<a;s++)i[t[s]]=e[t[s]];let n=Ri(i).substr(1);return i.sign=gt.md5(`${gt.md5(n)}${getApp().globalData.apiSignValue}`),i}catch(t){return e}}function Ri(e,t){if(e==null||typeof e=="number"&&isNaN(e))return"";try{let i="",n=typeof e;if(n=="string"||n=="number")i+="&"+t+"="+Is(e);else if(n=="boolean")i+="&"+t+"="+(e?1:0);else for(let s in e){let a=t==null?s:t+Da(s);i+=Ri(e[s],a)}return i}catch(i){return""}}function Da(e){return`${encodeURIComponent("[")}${e}${encodeURIComponent("]")}`}function ot(e,t,i,n,s,a){let r={type:e,ua:t,origin_ua:i,params:n,api:s,token:a},l=!1;try{l=getApp().globalData.s.state.pubToken}catch(u){k("error","at common/api.js:314","request token catch "+JSON.stringify(u))}let c={"content-type":"application/json",ua:getApp().globalData.ua};l&&(c.Authorization=`Bearer ${l}`),k("error","at common/api.js:322","-----> api sign enc fail ",r),uni.request({url:`${getApp().globalData.apiHost}/log/report`,method:"POST",header:c,data:r,dataType:"json",timeout:1e4})}function P(...e){return getApp().globalData.s.state.pubI18n(...e)}var M=(e,t)=>{let i=e.__vccOpts||e;for(let[n,s]of t)i[n]=s;return i};var be=re(se());var Ia={name:"PageMeta",setup(e,{emit:t}){bi(i=>{t("resize",i)})},props:{backgroundTextStyle:{type:String,default:"dark",validator(e){return["dark","light"].indexOf(e)!==-1}},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created(){let e=getCurrentPages()[0];this.$pageVm=e.$vm||e,this._currentWebview=e.$getAppWebview(),this.enablePullDownRefresh&&this.setPullDownRefresh(this._currentWebview,!0),this.$watch("enablePullDownRefresh",t=>{this.setPullDownRefresh(this._currentWebview,t)}),this.$watch("backgroundTextStyle",()=>{this.setBackgroundTextStyle()}),this.$watch(()=>[this.rootFontSize,this.pageStyle],()=>{this.setPageMeta()}),this.$watch(()=>[this.backgroundColor,this.backgroundColorTop,this.backgroundColorBottom],()=>{this.setBackgroundColor()}),this.$watch(()=>[this.scrollTop,this.scrollDuration],()=>{this.pageScrollTo()})},beforeMount(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle()},mounted(){this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh(e,t){e.setStyle({pullToRefresh:{support:t,style:plus.os.name==="Android"?"circle":"default"}})},setPageMeta(){uni.setPageMeta({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle(){},setBackgroundColor(){},pageScrollTo(){let e=String(this.scrollTop);e.indexOf("rpx")!==-1&&(e=uni.upx2px(e.replace("rpx",""))),e=parseFloat(e),!isNaN(e)&&uni.pageScrollTo({scrollTop:e,duration:this.scrollDuration,success:()=>{}})}}};function xa(e,t,i,n,s,a){return(0,be.openBlock)(),(0,be.createElementBlock)("view",{style:{display:"none"},renderWhole:!0},[(0,be.renderSlot)(e.$slots,"default")])}var Fi=M(Ia,[["render",xa]]);var F=re(se()),B={TXT:1,IMG:3,VIDEO:4,VOICE:2,HUNG_UP:5},Bi={SUCCESS:0,FAIL:1,USER_DEL:4};var La={"l-img":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"place-img":{"":{position:"absolute",top:0,left:0}}},Pa={props:{src:{type:String,default:""},mode:{type:String,default:"aspectFill"},w:{type:String,default:"0"},h:{type:String,default:"0"},placeW:{type:String,default:"0"},radius:{type:String,default:"0"},lazyLoad:{type:Boolean,default:!1},fade:{type:Boolean,default:!0},border:{type:String,default:""},otherStyle:{type:Object,default(){return{}}},click:{type:Boolean,default:!0},useNativePic:{type:Boolean,default:!0}},data(){return{isLoad:!1,placeSrc:"/static/img_load.png",path:""}},watch:{src(){this.isLoad=!1,this.path=this.parse()}},computed:{viewStyle(){let e={width:this.w,height:this.h};return this.setRadius(e)},imgStyle(){let e={width:this.w,height:this.h};return e=Object.assign(e,this.otherStyle),this.setRadius(e)},borderStyle(){return this.border?{border:this.border}:{}},placeViewStyle(){return{width:this.placeW,height:this.placeW,position:"relative"}}},methods:{clickImg(e){this.$emit("click",e)},setRadius(e){let t=this.radius.split(" ");return t.length<=1?e.borderRadius=this.radius:(e.borderTopLeftRadius=t[0],e.borderTopRightRadius=t[1],e.borderBottomRightRadius=t[2],e.borderBottomLeftRadius=t[3]),e},onLoad(){this.path&&(this.isLoad=!0,this.$emit("onLoad"))},parse(){return this.src?this.useNativePic?this.src:this.src.startsWith("file://")?this.src:this.src.startsWith("/var/mobile/")?"file://"+this.src:this.src.startsWith("/storage/")?this.src:this.src.startsWith("https")?this.src:this.useNativePic?this.src:getApp().globalData.ossPicPath+this.src:""}},created(){this.path=this.parse()}};function Ma(e,t,i,n,s,a){return(0,F.openBlock)(),(0,F.createElementBlock)("view",{class:"l-img",onClick:t[1]||(t[1]=(...r)=>a.clickImg&&a.clickImg(...r)),style:(0,F.normalizeStyle)([a.viewStyle,a.borderStyle]),renderWhole:!0},[(0,F.createElementVNode)("view",{class:"l-img",style:(0,F.normalizeStyle)([{position:"relative"},a.viewStyle])},[s.isLoad?(0,F.createCommentVNode)("",!0):((0,F.openBlock)(),(0,F.createElementBlock)("view",{key:0,style:(0,F.normalizeStyle)(a.placeViewStyle)},[(0,F.createElementVNode)("u-image",{src:s.placeSrc,style:(0,F.normalizeStyle)({width:i.placeW,height:i.placeW})},null,12,["src"])],4)),(0,F.createElementVNode)("u-image",{onLoad:t[0]||(t[0]=(...r)=>a.onLoad&&a.onLoad(...r)),src:s.path,mode:i.mode,lazyLoad:i.lazyLoad,fadeShow:i.fade,style:(0,F.normalizeStyle)([a.imgStyle,a.borderStyle]),class:"place-img"},null,44,["src","mode","lazyLoad","fadeShow"])],4)],4)}var ae=M(Pa,[["render",Ma],["styles",[La]]]);function Oa(e,t,i,n,s){return new Promise(a=>{getApp().globalData.pluginUpload.singleUpS3({filePath:e,isBase64:t,coverFilePath:i,coverIsBase64:n,ossInfo:s},r=>{a(r)})})}var Wi="/upload/handle";function Lt(e,t,i,n,s=null,a=null){return new Promise((r,l)=>oe(this,null,function*(){let c=e.replace("file://",""),u={flag:t,type:i};s&&(u.width=s.width,u.height=s.height),a&&(u=Object.assign(u,a));try{if(n){let f=yield It(c),_="";f&&(_=f.digest),T(_)||(u.md5=_)}let d=yield q.request(Wi,u,!1,!0);if(d.ok==1&&d.data.is_upload)k("log","at common/api-upload.js:74","upload media is_upload true"),r({path:d.data.dir,smallPath:d.data.small_url,uploadId:d.data.upload_id||0});else{let f=d.data.upload_id,_=yield Vi(c,"",d.data);f&&Ui([f]),_.uploadId=f||0,r(_)}}catch(d){let f=Si(d);k("error","at common/api-upload.js:89","upload media fail "+f),Hi(t,u,f),l(d)}}))}function $i(e,t,i,n,s,a=!0,r=null,l=!0){return oe(this,null,function*(){let c={};try{t.startsWith("_doc")&&(t=plus.io.convertLocalFileSystemURL(t));let u={},d=W.isAndroid?t:`file://${t}`,f=t,_=i;if(c={flag:e,type:Ai.VIDEO},r&&(c.width=r.width,c.height=r.height),l){let w=yield It(f),S="";w&&(S=w.digest),T(S)||(c.md5=S)}let y=yield q.request(Wi,c,!1,!0);k("log","at common/api-upload.js:119","upload video params response",y);let m;if(y.ok==1&&y.data.is_upload)return{url:y.data.dir,coverUrl:y.data.cover_url,smallUrl:y.data.small_url,uploadId:y.data.upload_id||0};{y.data&&(m=y.data.upload_id);let w=yield xt(d);if(a&&w?w.size>8*1024*1024:!1){let C=yield Mi(d,"medium");f=plus.io.convertLocalFileSystemURL(C.tempFilePath),_=yield Dt(f,n,s)}return f=f.replace("file://",""),_=_.replace("file://",""),u={url:y.data.dir.path,coverUrl:y.data.dir.cover_path,smallUrl:y.data.dir.small_url,uploadId:y.data.upload_id||0},yield Vi(f,_,y.data),m&&Ui([m]),u}}catch(u){throw k("error","at common/api-upload.js:151","upload video error",u),Hi(e,c,u),u}})}function Ui(e){T(e)||q.request("/upload/success",{id:e},!1,!0).then(t=>{k("error","at common/api-upload.js:163","-----> api upload/success response",t)},t=>{k("error","at common/api-upload.js:165","-----> api upload/success response error",t)})}function Vi(e,t,i,n=0,s=0){return new Promise((a,r)=>{Oa(e,n,t,s,i).then(l=>{k("log","at common/api-upload.js:172","upload plugin s3 result",l),(typeof l=="object"?l.success:l)?a({path:i.dir.path,smallPath:i.dir.small_url}):r(`_upModuleS3 ${JSON.stringify(l)}`)})})}function Hi(e,t,i){let n=e=="auth"?"upload_auth":"upload",s=ye(t);q.accessLogExtra(n,`${e} ${s}`,i)}function ji(e){return plus.io.convertLocalFileSystemURL(e)}var Na="splash_data";function Gi(e,t){bt(Na,t),uni.reLaunch({url:`${e}?splash=1`})}var Uo=re(se());function Fa(e){return new Promise((t,i)=>{getApp().globalData.pluginDB.executeSql({sql:e},n=>{n.status==1?t(n.rows):(k("error","at comExtend/plugin-DB.js:66","db \u63D2\u4EF6 execute \u6267\u884C \u9519\u8BEF "+n.message),i(n.message))})})}function zi(e,t){return new Promise((i,n)=>{Fa(e).then(s=>{i(s)},s=>{n()})})}function Pt(e,t){return T(e)?Math.round(t/1e3):(e+"").length==16?Math.round(e/1e3):e}var Ko=re(se());function Yi(e,t,i,n,s=0,a=!0){return new Promise(r=>{let l=Ba(e),c;s==0?a?c=`UPDATE ${l} SET msg_content = '${Ge(n)}' WHERE chat_id = ${e} AND ctime = ${i}`:c=`UPDATE ${l} SET msg_content = '${Ge(n)}' WHERE chat_id = ${e} AND mtime = ${i}`:c=`UPDATE ${l} SET msg_content = '${Ge(n)}' WHERE id = ${s}`,zi(c).then(u=>{r()})})}function Ba(e,t){let i=Wa();if(e==Ve.SYSTEM_ID)return`${i}${e}`;let n=Number(e)%10;return`${i}${n}`}function Wa(){return"tb_msg_"}var Ji={data(){return{playTimer:!1,isPlayingByTouch:!1,mAudioInner:uni.createInnerAudioContext(),mLastPlayCTime:0,playVoiceMsgData:"",playVoiceMsgCurDuration:"",isStatus:!1}},methods:{clickMsgVoice(e,t){var i;if(this.isStatus)return;this.playVoiceMsgData=e,this.playVoiceMsgCurDuration=t;let n=this.$refs[`msg${e.ctime}`][0];if(!n)return;if(!e.isSend&&e.content.voice_unread==0&&(e.content.voice_unread=1,Yi(this.chatId,this.chatType,e.ctime,JSON.stringify(e.content))),typeof this.mAudioInner.paused!="undefined"&&!this.mAudioInner.paused&&(this.mAudioInner.stop(),this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.$refs[`msg${this.mLastPlayCTime}`][0].pauseAnim(),this.mLastPlayCTime==e.ctime)){this.mLastPlayCTime=0;return}this.mAudioInner.src=Ei((i=e==null?void 0:e.content)!=null&&i.voice_url?e.content.voice_url:e.msg_content.voice_url),this.mAudioInner.startTime=t,this.mLastPlayCTime=e.ctime,this.mAudioInner.play(),this.handlePlayTimer(e.ctime),n.changeIcon(!0),this.$refs[`msg${this.mLastPlayCTime}`][0].playAnim()},onMsgVoiceChange(e,t,i){if(!e){this.scrollable=!1,!this.mAudioInner.paused&&i.ctime==this.mLastPlayCTime?(this.isPlayingByTouch=!0,this.mAudioInner.pause(),this.playTimer&&clearInterval(this.playTimer)):this.isPlayingByTouch=!1;return}this.scrollable=!0,this.isPlayingByTouch&&(this.mAudioInner.seek(t),this.mAudioInner.play(),this.handlePlayTimer(i.ctime))},onChangeRecording(e){e||(this.playVoiceMsgData=""),this.playVoiceMsgData&&e&&this.clickMsgVoice(this.playVoiceMsgData,this.playVoiceMsgCurDuration),this.isStatus=e},handlePlayTimer(e){let t=this.$refs[`msg${e}`][0];this.playTimer&&clearInterval(this.playTimer),this.playTimer=setInterval(()=>{if(this.mAudioInner.paused)return;let i=this.mAudioInner.currentTime,n=Math.round(i*100);isNaN(n)||t.changeDuration(Math.round(i),n)},100)},initAudio(){this.mAudioInner.onEnded(()=>{this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.$refs[`msg${this.mLastPlayCTime}`][0].changeDuration(-1,0),this.$refs[`msg${this.mLastPlayCTime}`][0].pauseAnim(),this.mLastPlayCTime=0}),this.mAudioInner.onError(e=>{this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.$refs[`msg${this.mLastPlayCTime}`][0].playAnim(),this.mLastPlayCTime=0})}},onLoad(){this.initAudio()},onUnload(){this.mAudioInner.destroy(),this.playTimer&&clearInterval(this.playTimer)}};var G=re(se());var $a=e=>e!==null&&typeof e=="object",Ua=["{","}"],Nt=class{constructor(){this._caches=Object.create(null)}interpolate(t,i,n=Ua){if(!i)return[t];let s=this._caches[t];return s||(s=ja(t,n),this._caches[t]=s),Ga(s,i)}},Va=/^(?:\d)+/,Ha=/^(?:\w)+/;function ja(e,[t,i]){let n=[],s=0,a="";for(;s<e.length;){let r=e[s++];if(r===t){a&&n.push({type:"text",value:a}),a="";let l="";for(r=e[s++];r!==void 0&&r!==i;)l+=r,r=e[s++];let c=r===i,u=Va.test(l)?"list":c&&Ha.test(l)?"named":"unknown";n.push({value:l,type:u})}else a+=r}return a&&n.push({type:"text",value:a}),n}function Ga(e,t){let i=[],n=0,s=Array.isArray(t)?"list":$a(t)?"named":"unknown";if(s==="unknown")return i;for(;n<e.length;){let a=e[n];switch(a.type){case"text":i.push(a.value);break;case"list":i.push(t[parseInt(a.value,10)]);break;case"named":s==="named"&&i.push(t[a.value]);break}n++}return i}var Mt="zh-Hans",Ki="zh-Hant",we="en",za="fr",Ya="es",Ja=Object.prototype.hasOwnProperty,qi=(e,t)=>Ja.call(e,t),Ka=new Nt;function qa(e,t){return!!t.find(i=>e.indexOf(i)!==-1)}function Za(e,t){return t.find(i=>e.indexOf(i)===0)}function Zi(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if(e=e.toLowerCase(),e==="chinese")return Mt;if(e.indexOf("zh")===0)return e.indexOf("-hans")>-1?Mt:e.indexOf("-hant")>-1||qa(e,["-tw","-hk","-mo","-cht"])?Ki:Mt;let i=[we,za,Ya];t&&Object.keys(t).length>0&&(i=Object.keys(t));let n=Za(e,i);if(n)return n}var Rt=class{constructor({locale:t,fallbackLocale:i,messages:n,watcher:s,formater:a}){this.locale=we,this.fallbackLocale=we,this.message={},this.messages={},this.watchers=[],i&&(this.fallbackLocale=i),this.formater=a||Ka,this.messages=n||{},this.setLocale(t||we),s&&this.watchLocale(s)}setLocale(t){let i=this.locale;this.locale=Zi(t,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],i!==this.locale&&this.watchers.forEach(n=>{n(this.locale,i)})}getLocale(){return this.locale}watchLocale(t){let i=this.watchers.push(t)-1;return()=>{this.watchers.splice(i,1)}}add(t,i,n=!0){let s=this.messages[t];s?n?Object.assign(s,i):Object.keys(i).forEach(a=>{qi(s,a)||(s[a]=i[a])}):this.messages[t]=i}f(t,i,n){return this.formater.interpolate(t,i,n).join("")}t(t,i,n){let s=this.message;return typeof i=="string"?(i=Zi(i,this.messages),i&&(s=this.messages[i])):n=i,qi(s,t)?this.formater.interpolate(s[t],n).join(""):(console.warn(`Cannot translate the value of keypath ${t}. Use the value of keypath as default.`),t)}};function Xa(e,t){e.$watchLocale?e.$watchLocale(i=>{t.setLocale(i)}):e.$watch(()=>e.$locale,i=>{t.setLocale(i)})}function Qa(){return typeof uni!="undefined"&&uni.getLocale?uni.getLocale():typeof global!="undefined"&&global.getLocale?global.getLocale():we}function er(e,t={},i,n){if(typeof e!="string"){let r=[t,e];e=r[0],t=r[1]}typeof e!="string"&&(e=Qa()),typeof i!="string"&&(i=typeof __uniConfig!="undefined"&&__uniConfig.fallbackLocale||we);let s=new Rt({locale:e,fallbackLocale:i,messages:t,watcher:n}),a=(r,l)=>{if(typeof getApp!="function")a=function(c,u){return s.t(c,u)};else{let c=!1;a=function(u,d){let f=getApp().$vm;return f&&(f.$locale,c||(c=!0,Xa(f,s))),s.t(u,d)}}return a(r,l)};return{i18n:s,f(r,l,c){return s.f(r,l,c)},t(r,l){return a(r,l)},add(r,l,c=!0){return s.add(r,l,c)},watch(r){return s.watchLocale(r)},getLocale(){return s.getLocale()},setLocale(r){return s.setLocale(r)}}}var tr={"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},ir={"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"Loading...","uni-load-more.contentnomore":"No more data"},nr={"uni-load-more.contentdown":"\u4E0A\u62C9\u986F\u793A\u66F4\u591A","uni-load-more.contentrefresh":"\u6B63\u5728\u52A0\u8F09...","uni-load-more.contentnomore":"\u6C92\u6709\u66F4\u591A\u6578\u64DA\u4E86"},sr={"uni-load-more.contentdown":"Tire hacia arriba para mostrar m\xE1s","uni-load-more.contentrefresh":"cargando...","uni-load-more.contentnomore":"No m\xE1s datos"},ar={"uni-load-more.contentdown":"\u0627\u0633\u062D\u0628 \u0644\u0623\u0639\u0644\u0649 \u0644\u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u0645\u0632\u064A\u062F","uni-load-more.contentrefresh":"\u062C\u0627\u0631 \u0627\u0644\u062A\u062D\u0645\u064A\u0644...","uni-load-more.contentnomore":"\u0644\u0627 \u0645\u0632\u064A\u062F \u0645\u0646 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"},rr={"uni-load-more.contentdown":"K\xE9o l\xEAn \u0111\u1EC3 hi\u1EC3n th\u1ECB th\xEAm","uni-load-more.contentrefresh":"\u0111ang t\u1EA3i...","uni-load-more.contentnomore":"Kh\xF4ng c\xF2n d\u1EEF li\u1EC7u"},or={en:tr,"zh-Hans":ir,"zh-Hant":nr,es:sr,ar,vi:rr},lr={"uni-load-more":{"":{flexDirection:"row",height:40,alignItems:"center",justifyContent:"center"}},"uni-load-more__text":{"":{fontSize:14,marginLeft:8}},"uni-load-more__img":{"":{width:24,height:24}},"uni-load-more__img--nvue":{"":{color:"#666666"}},"uni-load-more__img--android":{"":{width:24,height:24,transform:"rotate(0deg)"}},"uni-load-more__img--ios":{"":{width:24,height:24,transform:"rotate(0deg)"}}},Xi;setTimeout(()=>{Xi=uni.getSystemInfoSync().platform},16);var{t:Ot}=er(or),cr={name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default(){return{contentdown:"",contentrefresh:"",contentnomore:""}}},showText:{type:Boolean,default:!1}},data(){return{webviewHide:!1,platform:Xi,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="}},computed:{iconSnowWidth(){return(Math.floor(this.iconSize/24)||1)*2},contentdownText(){return this.contentText.contentdown||Ot("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||Ot("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||Ot("uni-load-more.contentnomore")}},mounted(){var e=getCurrentPages(),t=e[e.length-1],i=t.$getAppWebview();i.addEventListener("hide",()=>{this.webviewHide=!0}),i.addEventListener("show",()=>{this.webviewHide=!1})},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}};function ur(e,t,i,n,s,a){return(0,G.openBlock)(),(0,G.createElementBlock)("view",{class:"uni-load-more",onClick:t[0]||(t[0]=(...r)=>a.onClick&&a.onClick(...r)),renderWhole:!0},[!s.webviewHide&&i.status==="loading"&&i.showIcon?((0,G.openBlock)(),(0,G.createElementBlock)("loading-indicator",{key:0,style:(0,G.normalizeStyle)({color:i.color,width:i.iconSize+"px",height:i.iconSize+"px"}),animating:!0,class:"uni-load-more__img uni-load-more__img--nvue"},null,4)):(0,G.createCommentVNode)("",!0),i.showText?((0,G.openBlock)(),(0,G.createElementBlock)("u-text",{key:1,class:"uni-load-more__text",style:(0,G.normalizeStyle)({color:i.color})},(0,G.toDisplayString)(i.status==="more"?a.contentdownText:i.status==="loading"?a.contentrefreshText:a.contentnomoreText),5)):(0,G.createCommentVNode)("",!0)])}var Qi=M(cr,[["render",ur],["styles",[lr]]]);var N=re(se()),dr={"l-img":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"place-img":{"":{position:"absolute",top:0,left:0}},"text-place":{"":{color:"#999999",position:"absolute",bottom:0,textAlign:"center"}}},pr={name:"LImg",emits:["click","onError","onLoad"],props:{src:{type:String,default:""},mode:{type:String,default:"aspectFill"},w:{type:String,default:"0"},h:{type:String,default:"0"},radius:{type:String,default:"0"},lazyLoad:{type:Boolean,default:!1},fade:{type:Boolean,default:!0},placeType:{type:[String,Number],default:0},placeW:{type:String,default:""},placeFontSize:{type:[String,Boolean],default:""},placeBottom:{type:String,default:""},border:{type:String,default:""},otherStyle:{type:Object,default(){return{}}},click:{type:Boolean,default:!0},isGif:{type:Boolean,default:!1},needStyle:{type:[String,Number],default:0},useCache:{type:Boolean,default:!1},fitWH:{type:String,default:""},isStatic:{type:Number,default:0},lImgStyle:{type:Object,default(){return{}}}},data(){return{errorCount:1,path:"",refresh:!0,darkDir:"",isLoad:!1,fitStr:""}},watch:{src(){this.isLoad=!1,this.path=this.parse()}},computed:{placeSrc(){return this.placeType==1||this.placeType==2?"/static/img_load_cupid.png":""},placeViewStyle(){let e={width:this.placeW,height:this.placeW,position:"relative"};return this.placeBottom&&(e.marginBottom=this.placeBottom),e},placeFontSizeVal(){return this.placeFontSize===!1?"":this.placeFontSize?this.placeFontSize:this.placeType==2?"24rpx":"16rpx"},borderStyle(){if(this.border=="")return{};let e={},t=this.border.split(" ");return e.borderWidth=t[0],e.borderStyle=t[1],e.borderColor=t[2],e},viewStyle(){let e={width:this.w,minWidth:this.w,height:this.h,minHeight:this.h};return this.setRadius(e)},imgStyle(){let e={width:this.w,height:this.h};return e=Object.assign(e,this.otherStyle),this.setRadius(e)},ossPathOriginal(){return this.isGif?getApp().globalData.ossPath:getApp().globalData.ossPicPath}},methods:{$str:P,clickImg(e){this.click&&this.$emit("click",e)},setRadius(e){let t=this.radius.split(" ");return t.length<=1?e.borderRadius=this.radius:(e.borderTopLeftRadius=t[0],e.borderTopRightRadius=t[1],e.borderBottomRightRadius=t[2],e.borderBottomLeftRadius=t[3]),e},onLoadError(){if(this.path){if(this.path.startsWith("http")){if(this.errorCount>2){this.isError=!0,this.$emit("onError");return}this.errorCount+=1,this.refresh=!1,setTimeout(()=>{this.refresh=!0},500);return}this.path=this.ossPathOriginal+this.darkDir+this.src,ki(this.darkDir+this.src)}},onLoad(){this.isLoad=!0,this.$emit("onLoad")},parseSrcUrl(){return this.fitStr+this.darkDir+this.src},parse(){var e;if(this.isStatic)return this.src;let t;if(t=0,this.src.startsWith("/static"))return this.src;if((e=this.src)!=null&&e.startsWith("co/")){let i=this.src.slice(3),n=getApp().getFilePath(i);if(!T(n))return Se(n)}return this.useCache||t&&W.isAndroid?this.isGif?Ci(this.parseSrcUrl()):vt(this.parseSrcUrl()):this.src.startsWith("file://")?this.src:this.src.startsWith("/var/mobile/")?"file://"+this.src:this.src.startsWith("/storage/")?this.src:this.ossPathOriginal+this.parseSrcUrl()}},created(){this.darkDir="",this.fitWH&&this.src.indexOf("fit-in")==-1&&(this.fitStr="fit-in/"+this.fitWH+"/"),this.path=this.parse()}};function fr(e,t,i,n,s,a){return(0,N.openBlock)(),(0,N.createElementBlock)("view",{class:"l-img",onClick:t[2]||(t[2]=(...r)=>a.clickImg&&a.clickImg(...r)),style:(0,N.normalizeStyle)([a.viewStyle,a.borderStyle,i.lImgStyle]),renderWhole:!0},[(0,N.createElementVNode)("view",{class:"l-img",style:(0,N.normalizeStyle)([{position:"relative"},a.viewStyle])},[i.placeType&&!s.isLoad?((0,N.openBlock)(),(0,N.createElementBlock)("view",{key:0,style:(0,N.normalizeStyle)(a.placeViewStyle)},[(0,N.createElementVNode)("u-image",{src:a.placeSrc,style:(0,N.normalizeStyle)({width:i.placeW,height:i.placeW})},null,12,["src"])],4)):(0,N.createCommentVNode)("",!0),s.refresh?((0,N.openBlock)(),(0,N.createElementBlock)("u-image",{key:1,onError:t[0]||(t[0]=(...r)=>a.onLoadError&&a.onLoadError(...r)),onLoad:t[1]||(t[1]=(...r)=>a.onLoad&&a.onLoad(...r)),src:s.path,mode:i.mode,lazyLoad:i.lazyLoad,fadeShow:i.fade,style:(0,N.normalizeStyle)([a.imgStyle,a.borderStyle]),class:"place-img"},null,44,["src","mode","lazyLoad","fadeShow"])):(0,N.createCommentVNode)("",!0)],4)],4)}var en=M(pr,[["render",fr],["styles",[dr]]]);var D=re(se());var mr=ge("animation"),Ke=class{constructor(t,i){this.options=t,this.animation=uni.createAnimation(t),this.currentStepAnimates={},this.next=0,this.$=i}_nvuePushAnimates(t,i){let n=this.currentStepAnimates[this.next],s={};if(n?s=n:s={styles:{},config:{}},nn.includes(t)){s.styles.transform||(s.styles.transform="");let a="";t==="rotate"&&(a="deg"),s.styles.transform+=`${t}(${i+a}) `}else s.styles[t]=`${i}`;this.currentStepAnimates[this.next]=s}_animateRun(t={},i={}){let n=this.$.$refs.ani.ref;if(n)return new Promise((s,a)=>{mr.transition(n,nt({styles:t},i),r=>{s()})})}_nvueNextAnimate(t,i=0,n){let s=t[i];if(s){let{styles:a,config:r}=s;this._animateRun(a,r).then(()=>{i+=1,this._nvueNextAnimate(t,i,n)})}else this.currentStepAnimates={},typeof n=="function"&&n(),this.isEnd=!0}step(t={}){return this.currentStepAnimates[this.next].config=Object.assign({},this.options,t),this.currentStepAnimates[this.next].styles.transformOrigin=this.currentStepAnimates[this.next].config.transformOrigin,this.next++,this}run(t){this.isEnd=!1,this.$.$refs.ani&&this.$.$refs.ani.ref&&(this._nvueNextAnimate(this.currentStepAnimates,0,t),this.next=0)}},nn=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"],gr=["opacity","backgroundColor"],hr=["width","height","left","right","top","bottom"];nn.concat(gr,hr).forEach(e=>{Ke.prototype[e]=function(...t){return this._nvuePushAnimates(e,t),this}});function tn(e,t){if(t)return clearTimeout(t.timer),new Ke(e,t)}var _r={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default(){return"fade"}},duration:{type:Number,default:300},styles:{type:Object,default(){return{}}},customClass:{type:String,default:""}},data(){return{isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}},watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e=Ht(nt({},this.styles),{"transition-duration":this.duration/1e3+"s"}),t="";for(let i in e){let n=this.toLine(i);t+=n+":"+e[i]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=tn(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let i in e)try{typeof e[i]=="object"?this.animation[i](...e[i]):this.animation[i](e[i])}catch(n){k("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:139",`\u65B9\u6CD5 ${i} \u4E0D\u5B58\u5728`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);typeof e!="undefined"&&(this.opacity=e),this.transform=t,this.$nextTick(()=>{this.timer=setTimeout(()=>{this.animation=tn(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})},20)})},close(e){this.animation&&this.tranfromInit(!0).step().run(()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:t,transform:i}=this.styleInit(!1);this.opacity=t||1,this.transform=i,this.$emit("change",{detail:this.isShow})})},styleInit(e){let t={transform:""},i=(n,s)=>{s==="fade"?t.opacity=this.animationType(n)[s]:t.transform+=this.animationType(n)[s]+" "};return typeof this.modeClass=="string"?i(e,this.modeClass):this.modeClass.forEach(n=>{i(e,n)}),t},tranfromInit(e){let t=(i,n)=>{let s=null;n==="fade"?s=i?0:1:(s=i?"-100%":"0",n==="zoom-in"&&(s=i?.8:1),n==="zoom-out"&&(s=i?1.2:1),n==="slide-right"&&(s=i?"100%":"0"),n==="slide-bottom"&&(s=i?"100%":"0")),this.animation[this.animationMode()[n]](s)};return typeof this.modeClass=="string"?t(e,this.modeClass):this.modeClass.forEach(i=>{t(e,i)}),this.animation},animationType(e){return{fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}},animationMode(){return{fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}},toLine(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}}};function yr(e,t,i,n,s,a){return s.isShow?((0,D.openBlock)(),(0,D.createElementBlock)("view",{key:0,ref:"ani",animation:s.animationData,class:(0,D.normalizeClass)(i.customClass),style:(0,D.normalizeStyle)(a.transformStyles),onClick:t[0]||(t[0]=(...r)=>a.onClick&&a.onClick(...r)),renderWhole:!0},[(0,D.renderSlot)(e.$slots,"default")],14,["animation"])):(0,D.createCommentVNode)("",!0)}var Sr=M(_r,[["render",yr]]),br={"uni-popup":{"":{position:"fixed"},".top":{top:0},".left":{top:0},".right":{top:0}},"uni-popup__wrapper":{".uni-popup ":{position:"relative"},".uni-popup .left":{paddingTop:0,flex:1},".uni-popup .right":{paddingTop:0,flex:1}},"fixforpc-top":{"":{top:0}}},wr={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},maskClick:{type:Boolean,default:!0},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBgColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{maskClass(){return{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:this.maskBgColor}},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return this.backgroundColor===""||this.backgroundColor==="none"?"transparent":this.backgroundColor}},mounted(){(()=>{let{windowWidth:t,windowHeight:i,windowTop:n,safeAreaInsets:s}=uni.getSystemInfoSync();this.popupWidth=t,this.popupHeight=i+n,this.safeArea?this.safeAreaInsets=s:this.safeAreaInsets=0})()},created(){this.mkclick=this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1},methods:{closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){this.clearPropagation=!0},open(e,t=!0){if(e&&["top","center","bottom","left","right","message","dialog","share"].indexOf(e)!==-1||(e=this.type),this.maskShow=t,!this.config[e]){k("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:218","\u7F3A\u5C11\u7C7B\u578B\uFF1A",e);return}this[this.config[e]](),this.$emit("change",{show:!0,type:e})},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.showPopup=!1},300)},touchstart(){this.clearPropagation=!1},onTap(){if(this.clearPropagation){this.clearPropagation=!1;return}this.$emit("maskClick"),this.mkclick&&this.close()},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0,this.$nextTick(()=>{this.messageChild&&this.type==="message"&&this.messageChild.timerClose()}))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets&&this.safeAreaInsets.bottom||0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},!e&&(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)}}};function Ar(e,t,i,n,s,a){let r=ue((0,D.resolveDynamicComponent)("uni-transition"),Sr);return s.showPopup?((0,D.openBlock)(),(0,D.createElementBlock)("view",{key:0,class:(0,D.normalizeClass)(["uni-popup",[s.popupstyle,a.isDesktop?"fixforpc-z-index":""]]),onTouchmove:t[2]||(t[2]=(0,D.withModifiers)((...l)=>a.clear&&a.clear(...l),["stop","prevent"])),renderWhole:!0},[(0,D.createElementVNode)("view",{onTouchstart:t[1]||(t[1]=(...l)=>a.touchstart&&a.touchstart(...l))},[s.maskShow?((0,D.openBlock)(),(0,D.createBlock)(r,{key:"1",name:"mask","mode-class":"fade",styles:a.maskClass,duration:s.duration,show:s.showTrans,onClick:a.onTap},null,8,["styles","duration","show","onClick"])):(0,D.createCommentVNode)("",!0),(0,D.createVNode)(r,{key:"2","mode-class":s.ani,name:"content",styles:s.transClass,duration:s.duration,show:s.showTrans,onClick:a.onTap},{default:(0,D.withCtx)(()=>[(0,D.createElementVNode)("view",{class:(0,D.normalizeClass)(["uni-popup__wrapper",[s.popupstyle]]),style:(0,D.normalizeStyle)({backgroundColor:a.bg}),onClick:t[0]||(t[0]=(...l)=>a.clear&&a.clear(...l))},[(0,D.renderSlot)(e.$slots,"default")],6)]),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],34)):(0,D.createCommentVNode)("",!0)}var sn=M(wr,[["render",Ar],["styles",[br]]]);var Tr=["titleIcon","titleIconRadius","subtitleText","subtitleSize","subtitleColor","subtitleOverflow","titleAlign","backgroundImage","backgroundRepeat","blurEffect"],Cr={props:{title:{type:String,default:""},titleIcon:{type:String,default:""},titleIconRadius:{type:String,default:""},subtitleText:{type:String,default:""},subtitleSize:{type:String,default:""},subtitleColor:{type:String,default:""},subtitleOverflow:{type:String,default:""},titleAlign:{type:String,default:""},backgroundImage:{type:String,default:""},backgroundRepeat:{type:String,default:""},blurEffect:{type:String,default:""},loading:{type:Boolean,default:!1},frontColor:{type:String,default:"#ffffff"},backgroundColor:{type:String,default:"#000000"},colorAnimationDuration:{type:Number,default:0},colorAnimationTimingFunc:{type:String,default:"linear"}},created(){let e=getCurrentPages(),t=e[e.length-1];this.__$page=t,this.$watch("title",()=>{this.setNavigationBarTitle()}),this.$watch("loading",()=>{this.setNavigationBarLoading()}),this.$watch(()=>[this.frontColor,this.backgroundColor,this.colorAnimationDuration,this.colorAnimationTimingFunc],()=>{this.setNavigationBarColor()}),this.__$webview=t.$getAppWebview(),Tr.forEach(i=>{let n={};(this[i]||this[i].length>0)&&(n[i]=this[i]),this.setTitleNView(n),this.$watch(i,s=>{let a={};a[i]=s,this.setTitleNView(a)})})},beforeMount(){this.title&&this.setNavigationBarTitle(),this.setNavigationBarLoading(),this.setNavigationBarColor()},methods:{setNavigationBarTitle(){uni.setNavigationBarTitle({__page__:this.__$page,title:this.title})},setNavigationBarLoading(){uni[(this.loading?"show":"hide")+"NavigationBarLoading"]({__page__:this.__$page})},setNavigationBarColor(){uni.setNavigationBarColor({__page__:this.__$page,frontColor:this.frontColor,backgroundColor:this.backgroundColor,animation:{duration:this.colorAnimationDuration,timingFunc:this.colorAnimationTimingFunc}})},setTitleNView(e){let t=this.__$webview,i=t.getStyle();i&&i.titleNView&&t.setStyle({titleNView:e})}}};function Er(e,t,i,n,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("view",{style:{display:"none"},renderWhole:!0})}var kr=M(Cr,[["render",Er]]),qe=0,Ze=0,Q={titleTimeCheck:5,parseSendData(e,t,i){let n={for_uid:e,isSend:!0,msg_type:i,mtime:new Date().getTime(),msg_content:{}};switch(i){case B.TXT:n.msg_content={content:t};break;case B.IMG:n.msg_content={image_url:t.path,image_width:t.width,image_height:t.height,small_url:t.path};break;case B.VIDEO:n.msg_content={url:t.path,cover:t.coverPath,width:t.width,height:t.height,duration:t.duration};break;case B.VOICE:n.msg_content={voice_url:t.path,voice_duration:t.duration};break;case B.HUNG_UP:n.msg_content={end_type:t}}return n},parseMsgTime(e){return{msg_type:1e3,ctime:e,showTime:hi(e)}},checkTimeDiff(e,t,i){return Math.abs(e-t)>i*60*1e3},getHistoryTitleTime(e,t=Q.titleTimeCheck){String(e).length==16&&(e=e/1e3);let i=-1;if(qe==0)return qe=e,null;i=qe;let n=null;return Tt(i,e,t)&&(n=Q.parseMsgTime(i)),qe=e,n},getAddTitleTime(e,t=Q.titleTimeCheck){if(String(e).length==16&&(e=e/1e3),Ze==0)return Ze=e,null;let i=null;return Tt(Ze,e,t)&&(i=Q.parseMsgTime(e),Ze=e),i}},vr=ge("dom"),Dr={data(){return{MSG:B,bgColor:"#F8F8F8",sW:getApp().globalData.window.width,viewHeight:getApp().globalData.window.height-getApp().globalData.window.statusBarHeight-44,statusBarHeight:getApp().globalData.window.statusBarHeight,showVideoCall:getApp().globalData.kfShowVideoCall,itemHeightLast:20,itemHeightFirst:20,inputFocused:0,messageNone:1,addList:[],historyList:[],msgHasMore:!1,lastTitleTime:0,previewList:[],previewKeyList:[],scrollable:!0,changeHBottom:0,userId:"",syncMtime:0,lastMtime:0,userInfos:{},sendStatusSrc:!1,barSlotHeight:uni.upx2px(84),isAddTitleClick:!1}},computed:{classRotate(){return this.messageNone?"":"list-rotate"},keyboardHeight(){return this.inputFocused?getApp().globalData.keyboardH:0}},methods:{clickMsgList(e){e&&e.stopPropagation(),this.$refs.msgBar&&this.$refs.msgBar.hide()},clickBarVideo(){uni.navigateTo({url:"/pagesChat/call"})},clickBack(){kt()},clickPicture(e){let t=this.previewKeyList.indexOf(e.pKey);t!=-1&&Ii(this.previewList,t,0)},addPreviewInfo(e,t){if([B.IMG,B.VIDEO].indexOf(Number(e.msg_type))==-1)return null;try{let i=yi(),n=e.msg_content,s=Di(e,n);return t==1?(this.previewList.unshift(s),this.previewKeyList.unshift(i)):(this.previewList.push(s),this.previewKeyList.push(i)),i}catch(i){return null}},parseMsgItem(e,t,i,n){if(t.ctime=Pt(t.ctime,t.mtime),i==1){let a=Q.getHistoryTitleTime(t.mtime);a!=null&&n!=0&&e.push(a)}else{let a=Q.getAddTitleTime(t.mtime);a!=null&&e.push(a)}t.isSend=t.for_uid==getApp().globalData.uid;let s=this.addPreviewInfo(t,i);s&&(t.pKey=s),e.push(t)},onInputFocused(e){this.inputFocused=e,this.$nextTick(()=>{e&&this.scrollBottom()})},onLoadMore(){if(this.messageNone||this.loading)return;this.loading=!0,this.msgHasMore=!0,this.lastMtime=this.historyList[this.historyList.length-1].mtime;let e={uid:this.userId,sync_mtime:this.syncMtime,last_mtime:this.lastMtime};q.request("/service/detail",e).then(t=>{this.msgHasMore=!1,this.loading=!1;let i=t.data.list.length?t.data.list:[];if(T(i))return;let n=[];for(let s in i)this.parseMsgItem(n,i[s],2,s);this.historyList=[...this.historyList,...n]})},onSendAudio(e){!e||!e.path||!e.duration||this.sendVoice(e.path,e.duration)},onInputLineChange(){this.messageNone&&this.scrollBottom()},scrollList(e,t=!0){vr.scrollToElement(e,{animated:t})},scrollBottom(e=!1){let t=this.messageNone?"cellNew":"cellLast";this.scrollList(this.$refs[t],e)},addMsg(e,t){this.addMsgTimeByLast(e.mtime);let i=this.messageNone?1:2,n=this.addPreviewInfo(e,i);n&&(e.pKey=n),this.addList.push(JSON.parse(JSON.stringify(e))),this.$nextTick(()=>{this.scrollBottom(),typeof t=="function"&&t()})},sendVoice(e,t){return oe(this,null,function*(){let i=Q.parseSendData(this.userId,{path:e,duration:t},B.VOICE);this.addMsg(i,()=>{this.$refs[`msg${i.mtime}`][0].loadingShow()});let n=e.startsWith("_doc")?ji(e):e,s=yield Lt(n,"ke_message",3,!1);this.checkSendStatus(i),this.sendMsg(i,s,()=>{this.$refs[`msg${i.mtime}`][0].loadingHide()})})},onChoosePicture(e,t){return oe(this,null,function*(){let i;if(e==0){i=Q.parseSendData(this.userId,t,B.IMG),this.addMsg(i,()=>{this.$refs[`msg${i.mtime}`][0].loadingShow()});let n=i.msg_content,s=yield Lt(n.image_url,"ke_message",1,!0,{width:n.image_width,height:n.image_height});this.checkSendStatus(i),this.sendMsg(i,s,()=>{this.$refs[`msg${i.mtime}`][0].loadingHide()})}if(e==1){i=Q.parseSendData(this.userId,t,B.VIDEO),this.addMsg(i,()=>{this.$refs[`msg${i.mtime}`][0].loadingShow()});let n=i.msg_content,s=yield $i("ke_message",n.url,n.cover,n.width,n.height,!0,{width:n.width,height:n.height});this.checkSendStatus(i),this.sendMsg(i,s,()=>{this.$refs[`msg${i.mtime}`][0].loadingHide()})}})},sendMsg(e,t=null,i){if(e.msg_type!=B.TXT&&(delete e.for_uid,delete e.isSend,delete e.pKey),!T(t)&&e.msg_type==B.IMG){let n=e.msg_content;n.small_url=t.smallPath,n.image_url=t.path,n.upload_id=t.uploadId}if(!T(t)&&e.msg_type==B.VIDEO){let n=e.msg_content;n.url=t.url,n.cover=t.coverUrl,n.upload_id=t.uploadId}if(!T(t)&&e.msg_type==B.VOICE){let n=e.msg_content;n.voice_url=t.path}q.request("/service/send",e).then(n=>{k("error","at pagesServiceChat/chat.mixin.js:223","====> msg send response ",n),typeof i=="function"&&i(),n.data.secret&&Gi("/pages/welcome/welcome",n.data)},n=>{})},onSend(e){let t=Q.parseSendData(this.userId,e,B.TXT);this.addMsgTimeByLast(t.mtime),this.addMsg(t,()=>{this.$refs[`msg${t.mtime}`][0].loadingShow()});let i={msg_type:1,msg_content:{content:e}};this.checkSendStatus(t),this.sendMsg(i,"",()=>{this.$refs[`msg${t.mtime}`][0].loadingHide()})},checkSendStatus(e){setTimeout(()=>{this.$refs[`msg${e.mtime}`][0].getLoadingStatus()&&this.$refs[`msg${e.mtime}`][0].setErrorStatus()},1e4)},addMsgTimeByLast(e,t=5){if(this.lastTitleTime==0){let i=this.addList.length>0?this.addList[this.addList.length-1]:this.historyList[0];!T(i)&&i.ctime&&(this.lastTitleTime=i.ctime)}Q.checkTimeDiff(this.lastTitleTime,e,t)&&(this.addList.push(Q.parseMsgTime(e)),this.lastTitleTime=e)},initMsgList(){return oe(this,null,function*(){let e={sync_mtime:this.syncMtime,last_mtime:this.lastMtime},t=yield q.request("/service/detail",e);this.messageNone=t.data.has_more?0:1;let i=t.data.list.length?t.data.list:[];if(T(i))return;let n=[];if(this.messageNone){for(let s=i.length-1,a=0;s>=a;s--)this.parseMsgItem(n,i[s],1,s);this.addList=n}else{for(let s in i)this.parseMsgItem(n,i[s],2,s);this.historyList=n}this.$nextTick(()=>{this.messageNone&&this.scrollBottom()})})}},onLoad(e){return oe(this,null,function*(){this.initMsgList(),uni.$on("event_socket_message",t=>{t.isSend=!1,this.addList.push(t),this.$nextTick(()=>{this.scrollBottom()})}),uni.$on("event_hung_up_notice",t=>{let i=Q.parseSendData(this.userId,t,B.HUNG_UP);this.addMsg(i,"")})})},onUnload(){uni.$off("event_socket_message"),uni.$off("event_hung_up_notice")}},Ir={center:{"":{alignItems:"center",flexDirection:"row"}},"flex-start":{"":{justifyContent:"flex-start"}},"flex-end":{"":{justifyContent:"flex-end"}},container:{"":{paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10,alignItems:"flex-end",flexDirection:"row"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"view-send":{"":{paddingLeft:"26rpx"}},content:{".view-send ":{borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",borderBottomRightRadius:"16rpx",borderBottomLeftRadius:"16rpx",overflow:"hidden"},".view-receive ":{borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",borderBottomRightRadius:"16rpx",borderBottomLeftRadius:"16rpx",overflow:"hidden"}},"view-receive":{"":{paddingRight:"26rpx"}}},xr={components:{KfImg:ae},props:{data:{type:Object,default(){return{}}}},data(){return{maxWidth:getApp().globalData.window.width-20-6-uni.upx2px(32),showLoading:!1,msgState:0,customerAvatar:getApp().globalData.kfCustomerAvatar,userAvatar:getApp().pubUser.avatar}},computed:{viewBg(){return this.data.isSend?"#B6CBFF":"#FFFFFF"},sendStatusSrc(){return this.msgState==Bi.FAIL?"/static/i-error.png":""}},methods:{loadingShow(){this.showLoading=!0},loadingHide(){this.showLoading=!1},getLoadingStatus(){return this.showLoading},setErrorStatus(){this.showLoading=!1,this.msgState=1}}};function Lr(e,t,i,n,s,a){let r=ue((0,o.resolveDynamicComponent)("uni-load-more"),Qi),l=(0,o.resolveComponent)("kf-img");return(0,o.openBlock)(),(0,o.createElementBlock)("view",{style:{position:"relative"},renderWhole:!0},[i.data.isSend?((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:0,class:"container flex-end"},[(0,o.createElementVNode)("view",{class:"center",style:{"margin-right":"8px","justify-content":"flex-end"}},[(0,o.createElementVNode)("view",{style:(0,o.normalizeStyle)({maxWidth:s.maxWidth+"px"}),class:"center flex-end"},[(0,o.createElementVNode)("view",null,[s.showLoading?((0,o.openBlock)(),(0,o.createBlock)(r,{key:0,style:{height:"30px","margin-right":"10rpx"},status:"loading",iconSize:17})):(0,o.createCommentVNode)("",!0),a.sendStatusSrc?((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:1,style:{padding:"10rpx"}},[(0,o.createVNode)(l,{src:a.sendStatusSrc,w:"32rpx",h:"32rpx"},null,8,["src"])])):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("view",{class:(0,o.normalizeClass)([i.data.isSend?"view-send":"view-receive"]),style:{flex:"1"}},[(0,o.createElementVNode)("view",{class:"content",style:(0,o.normalizeStyle)({background:a.viewBg})},[(0,o.renderSlot)(e.$slots,"default",{style:"flex:1"})],4)],2)],4)]),(0,o.createVNode)(l,{src:s.userAvatar,w:"80rpx",h:"80rpx",radius:"40rpx",useNativePic:!1},null,8,["src"])])):((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:1,class:"container flex-start"},[(0,o.createVNode)(l,{src:s.customerAvatar,w:"80rpx",h:"80rpx",radius:"40rpx",useNativePic:!1},null,8,["src"]),(0,o.createElementVNode)("view",{class:"center",style:{"margin-left":"8px"}},[(0,o.createElementVNode)("view",{style:(0,o.normalizeStyle)({maxWidth:s.maxWidth+"px"}),class:"center flex-start"},[(0,o.createElementVNode)("view",{class:(0,o.normalizeClass)([i.data.isSend?"view-send":"view-receive"])},[(0,o.createElementVNode)("view",{class:"content",style:(0,o.normalizeStyle)({background:a.viewBg})},[(0,o.renderSlot)(e.$slots,"default")],4)],2)],4)])]))])}var Ie=M(xr,[["render",Lr],["styles",[Ir]]]),Xe={methods:{loadingShow(){this.$refs.msgBase.loadingShow()},loadingHide(){this.$refs.msgBase.loadingHide()},getLoadingStatus(){return this.$refs.msgBase.getLoadingStatus()},setErrorStatus(){this.$refs.msgBase.setErrorStatus()},checkStopClick(e){return this.$refs.msgBase.isStopClick==1?(this.$refs.msgBase.isStopClick=0,e.stopPropagation(),!0):!1}}},Pr={components:{MsgBase:Ie},mixins:[Xe],props:{data:{type:Object,default(){return{}}}},data(){return{maxWidthContent:getApp().globalData.window.width-130}},methods:{}};function Mr(e,t,i,n,s,a){let r=(0,o.resolveComponent)("msg-base");return(0,o.openBlock)(),(0,o.createBlock)(r,{ref:"msgBase",data:i.data},{default:(0,o.withCtx)(()=>[i.data.msg_content&&i.data.msg_content.content?((0,o.openBlock)(),(0,o.createElementBlock)("u-text",{key:0,style:(0,o.normalizeStyle)([{"font-size":"32rpx","line-height":"38rpx",padding:"20rpx 24rpx"},{"max-width":s.maxWidthContent+"px"}])},(0,o.toDisplayString)(i.data.msg_content.content),5)):(0,o.createCommentVNode)("",!0)]),_:1},8,["data"])}var Or=M(Pr,[["render",Mr]]),Nr={components:{MsgBase:Ie,KfImg:ae},mixins:[Xe],props:{data:{type:Object,default(){return{}}}},computed:{getWH(){let e=this.data.msg_content;return Et(e.image_width,e.image_height,200)},border(){return"1px solid #EEEEEE"}},data(){return{src:""}},methods:{clickPicture(e){this.checkStopClick(e)||this.$emit("clickPicture",this.data)}},created(){this.src=this.data.msg_content&&this.data.msg_content.image_url}};function Rr(e,t,i,n,s,a){let r=ue((0,o.resolveDynamicComponent)("l-img"),en),l=(0,o.resolveComponent)("msg-base");return(0,o.openBlock)(),(0,o.createBlock)(l,{ref:"msgBase",data:i.data},{default:(0,o.withCtx)(()=>[(0,o.createVNode)(r,{mode:"aspectFill",onClick:a.clickPicture,src:s.src,placeW:`${a.getWH[0]}px`,w:a.getWH[0]+"px",h:a.getWH[1]+"px",radius:"16rpx","use-native-pic":!1},null,8,["onClick","src","placeW","w","h"])]),_:1},8,["data"])}var Fr=M(Nr,[["render",Rr]]),Br={"msg-video":{"":{position:"relative",alignItems:"center",justifyContent:"center"}},"video-duration":{"":{color:"#FFFFFF",position:"absolute",bottom:0,right:0,paddingTop:"10rpx",paddingRight:"10rpx",paddingBottom:"10rpx",paddingLeft:"10rpx",fontSize:"24rpx"}}},Wr={components:{KfImg:ae,MsgBase:Ie},mixins:[Xe],emits:["clickVideo"],props:{data:{type:Object,default(){return{}}}},data(){return{}},computed:{getWH(){let e=this.data.msg_content;return Et(e.width,e.height,200)},getDuration(){return ve(Math.round(this.data.msg_content.duration))}},methods:{clickVideo(e){this.checkStopClick(e)||(e.stopPropagation(),this.$emit("clickVideo",this.data))}}};function $r(e,t,i,n,s,a){let r=(0,o.resolveComponent)("kf-img"),l=(0,o.resolveComponent)("msg-base");return(0,o.openBlock)(),(0,o.createBlock)(l,{ref:"msgBase",data:i.data},{default:(0,o.withCtx)(()=>[i.data.msg_content&&i.data.msg_content.cover?((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...c)=>a.clickVideo&&a.clickVideo(...c)),class:"msg-video",style:(0,o.normalizeStyle)({width:a.getWH[0]+"px",height:a.getWH[1]+"px"})},[(0,o.createVNode)(r,{onClick:a.clickVideo,src:i.data.msg_content.cover,w:a.getWH[0]+"px",h:a.getWH[1]+"px",radius:"16rpx",border:"1px solid #EEEEEE","use-native-pic":!1,placeW:`${a.getWH[0]}px`},null,8,["onClick","src","w","h","placeW"]),(0,o.createVNode)(r,{onClick:a.clickVideo,src:"/static/play_video.png",w:"56rpx",h:"56rpx",style:{position:"absolute"}},null,8,["onClick"]),(0,o.createElementVNode)("u-text",{class:"video-duration"},(0,o.toDisplayString)(a.getDuration),1)],4)):(0,o.createCommentVNode)("",!0)]),_:1},8,["data"])}var Ur=M(Wr,[["render",$r],["styles",[Br]]]),Vr={center:{"":{alignItems:"center",flexDirection:"row"}}},Hr={components:{KfImg:ae},props:{images:{type:Array,default(){return[]}},w:{type:String,default(){return"0rpx"}},h:{type:String,default(){return"0rpx"}},pauseSrc:{type:String,default(){return""}}},data(){return{audioActionImg:"",timer:"",pauseAudioAction:!1,imageList:[]}},methods:{play(){this.timer||(this.timer=setInterval(()=>{let e;this.pauseAudioAction?(e=JSON.parse(JSON.stringify(this.images)),this.pauseAudioAction=!1):e=JSON.parse(JSON.stringify(this.imageList));let t=e[e.length-1];for(let i=e.length-1;i>=0;i--)i!=0?e[i]=e[i-1]:e[i]=t;this.imageList=e},200))},close(){this.timer&&clearInterval(this.timer),this.timer=null,this.pauseAudioAction=!0;let e=[];for(let t=0;t<this.imageList.length;++t)e[t]=this.pauseSrc;this.imageList=e}},created(){this.imageList=JSON.parse(JSON.stringify(this.images))}};function jr(e,t,i,n,s,a){let r=(0,o.resolveComponent)("kf-img");return(0,o.openBlock)(),(0,o.createElementBlock)("view",{class:"center",renderWhole:!0},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.imageList,(l,c)=>((0,o.openBlock)(),(0,o.createBlock)(r,{key:c,style:(0,o.normalizeStyle)({marginLeft:c>0?"10rpx":"0rpx"}),src:s.imageList[c],w:i.w,h:i.h},null,8,["style","src","w","h"]))),128))])}var an=M(Hr,[["render",jr],["styles",[Vr]]]),Gr={"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"view-voice":{"":{alignItems:"center",flexDirection:"row",width:"380rpx",paddingTop:"10rpx",paddingRight:"10rpx",paddingBottom:"10rpx",paddingLeft:"10rpx"}},"text-duration":{"":{paddingTop:0,paddingRight:"24rpx",paddingBottom:0,paddingLeft:"26rpx",textAlign:"center",fontSize:"28rpx",lineHeight:"40rpx"}}},zr={mixins:[Xe],components:{AudioPlayAni:an,KfImg:ae,MsgBase:Ie},emits:["clickMsgVoice","onMsgVoiceChange"],props:{data:{type:Object,default(){return{}}}},data(){return{iconPlay:"/static/audio_msg_pause.png",sliderValue:0,curDuration:this.data.msg_content.voice_duration,sliderH:uni.upx2px(24),images:["/static/audio_msg_ani_1.png","/static/audio_msg_ani_2.png","/static/audio_msg_ani_3.png"]}},computed:{durationStr(){return this.curDuration<=0?"00:00":ve(this.curDuration)}},methods:{clickVoice(e){e&&e.stopPropagation(),Ct(()=>{if(this.checkStopClick(e))return;let t=this.data.msg_content;this.$emit("clickMsgVoice",this.data,this.curDuration==t.voice_duration?0:this.curDuration)},500,"msg-voice-click")},changeDuration(e,t){let i=this.data.msg_content;e==-1&&(e=i.voice_duration),this.curDuration=e,this.sliderValue=parseInt(t/i.voice_duration)},changeIcon(e){this.iconPlay=`/static/audio_msg_${e?"play":"pause"}.png`},pauseAnim(){this.$refs.audioAnim.close()},playAnim(){this.$refs.audioAnim.play()}},mounted(){this.$refs.audioAnim.close()}};function Yr(e,t,i,n,s,a){let r=(0,o.resolveComponent)("kf-img"),l=(0,o.resolveComponent)("audio-play-ani"),c=(0,o.resolveComponent)("msg-base");return(0,o.openBlock)(),(0,o.createBlock)(c,{ref:"msgBase",data:i.data},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("view",{class:"view-voice",onClick:t[1]||(t[1]=(...u)=>a.clickVoice&&a.clickVoice(...u))},[(0,o.createElementVNode)("view",{onClick:t[0]||(t[0]=(...u)=>a.clickVoice&&a.clickVoice(...u)),class:"center-align",style:{width:"60rpx",height:"60rpx"}},[(0,o.createVNode)(r,{onClick:a.clickVoice,w:"60rpx",h:"60rpx",src:s.iconPlay},null,8,["onClick","src"])]),(0,o.createVNode)(l,{ref:"audioAnim",pauseSrc:"/static/audio_msg_ani_pause.png",images:s.images,w:"52rpx",h:"32rpx"},null,8,["images"]),(0,o.createElementVNode)("u-text",{style:{padding:"0 26rpx 0 26rpx","text-align":"center","font-size":"28rpx","line-height":"40rpx"}},(0,o.toDisplayString)(a.durationStr),1)])]),_:1},8,["data"])}var Jr=M(zr,[["render",Yr],["styles",[Gr]]]),Kr={center:{"":{display:"flex",alignItems:"center",flexDirection:"row"}}},qr={components:{KfImg:ae,MsgBase:Ie},props:{data:{type:Object,default(){return{}}}},data(){return{maxWidthContent:getApp().globalData.window.width-130}},computed:{notice(){return(this.data.msg_content&&this.data.msg_content.end_type)==1?"Declined by you":"Canceled"}},methods:{}};function Zr(e,t,i,n,s,a){let r=(0,o.resolveComponent)("kf-img"),l=(0,o.resolveComponent)("msg-base");return(0,o.openBlock)(),(0,o.createBlock)(l,{ref:"msgBase",data:i.data},{default:(0,o.withCtx)(()=>[a.notice?((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:0,class:"center",style:(0,o.normalizeStyle)({height:"60rpx",maxWidth:s.maxWidthContent+"px"})},[(0,o.createElementVNode)("view",{class:"center",style:{width:"60rpx",height:"60rpx","justify-content":"center"}},[(0,o.createVNode)(r,{src:"/static/call_video_fail.png",w:"40rpx",h:"40rpx"})]),(0,o.createElementVNode)("u-text",{style:{"font-size":"28rpx","font-weight":"500"}},"Video chat"),(0,o.createElementVNode)("u-text",{style:{padding:"18rpx 20rpx","line-height":"28rpx","font-size":"24rpx"}},(0,o.toDisplayString)(a.notice),1)],4)):(0,o.createCommentVNode)("",!0)]),_:1},8,["data"])}var Xr=M(qr,[["render",Zr],["styles",[Kr]]]),Qr={center:{"":{alignItems:"center",flexDirection:"row"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"center-between":{"":{alignItems:"center",flexDirection:"row",justifyContent:"space-between"}}},De=uni.getRecorderManager(),eo={components:{KfImg:ae,AudioPlayAni:an},computed:{durationStr(){return this.recordDuration<=0?"00:00":ve(this.recordDuration)},playDurationStr(){return this.audioDurationPlay<=0?"00:00":ve(this.audioDurationPlay)}},props:{maxDuration:{type:Number,default:300}},data(){return{widthContent:getApp().globalData.window.width,recordTimer:!1,recordDuration:0,mAudioInner:uni.createInnerAudioContext(),isCancel:!1,audioPath:"",audioDuration:0,playStatus:"taking",audioPlayerIcon:"/static/audio_taking.png",audioDurationPlay:0,defHeight:Math.round(240*getApp().globalData.window.scaleH),statusBarHeight:uni.upx2px(96),images:["/static/audio_bar_ani_1.png","/static/audio_bar_ani_2.png","/static/audio_bar_ani_3.png","/static/audio_bar_ani_4.png","/static/audio_bar_ani_5.png"]}},methods:{clickAudio(e){e.stopPropagation()},clickDel(){this.$emit("onAudioCancel")},clickSend(){this.$emit("onAudioFinish",{path:this.audioPath,duration:this.audioDuration})},clickPlay(){this.playStatus!="taking"&&(this.mAudioInner.paused?(this.mAudioInner.play(),this.handlePlayerInterval()):(this.mAudioInner.pause(),this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer)))},handlePlayerInterval(){this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer),this.audioPlayerTimer=setInterval(()=>{let e=this.mAudioInner.currentTime,t=parseInt(e*100);isNaN(t)||(this.audioDurationPlay=parseInt(e))},100)},startRecordTimer(){this.recordTimer||(this.recordTimer=setInterval(()=>{if(this.recordDuration>=this.maxDuration){this.stopRecord();return}this.recordDuration+=1},1e3))},stopRecord(){this.recordTimer&&clearInterval(this.recordTimer),this.recordTimer=!1,this.$refs.audioAnim.close(),De.stop()},startRecord(){this.$nextTick(()=>{this.startRecordTimer(),De.start({duration:this.maxDuration*1e3,format:"aac"}),this.$refs.audioAnim.play()})},initAudioPreview(){this.mAudioInner.src=this.audioPath,this.audioDurationPlay=this.audioDuration},audioOnEndedListener(e){this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer),this.audioDurationPlay=this.audioDuration,this.$refs.audioAnim.close(),this.audioPlayerIcon="/static/audio_preview_pause.png"},audioOnPlayListener(){this.$refs.audioAnim.play(),this.audioPlayerIcon="/static/audio_preview_play.png"},audioOnPauseListener(){this.$refs.audioAnim.close(),this.audioPlayerIcon="/static/audio_preview_pause.png"}},created(){this.playStatus="taking",De.onStop(e=>{if(this.isCancel)return;k("info","at pagesServiceChat/coms/msg-bar-audio.vue:151","----> record finish "+JSON.stringify(e));let t=uni.createInnerAudioContext(),i=e.tempFilePath,n=setTimeout(()=>{clearTimeout(n),t.destroy()},2e3);t.src=i,this.playStatus="pause",this.audioPlayerIcon="/static/audio_preview_pause.png",t.onCanplay(()=>{let s=t.duration;clearTimeout(n),k("info","at pagesServiceChat/coms/msg-bar-audio.vue:169","-----> \u5B8C\u6210\u5F55\u5236 \u65F6\u957F = "+s),t.destroy(),this.audioPath=i,this.audioDuration=Math.round(s),this.initAudioPreview()})}),De.onError(e=>{k("error","at pagesServiceChat/coms/msg-bar-audio.vue:178","----> MsgBarAudio mRecordManager onError "+JSON.stringify(e))}),this.mAudioInner.onEnded(this.audioOnEndedListener),this.mAudioInner.onPlay(this.audioOnPlayListener),this.mAudioInner.onPause(this.audioOnPauseListener)},beforeUnmount(){this.mAudioInner.destroy(),this.recordTimer&&(clearInterval(this.recordTimer),this.isCancel=!0,De.stop()),this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer)}};function to(e,t,i,n,s,a){let r=(0,o.resolveComponent)("kf-img"),l=(0,o.resolveComponent)("audio-play-ani");return(0,o.openBlock)(),(0,o.createElementBlock)("view",{onClick:t[3]||(t[3]=(...c)=>a.clickAudio&&a.clickAudio(...c)),style:(0,o.normalizeStyle)([{width:s.widthContent},{height:"100rpx","background-color":"#FFFFFF"}]),renderWhole:!0},[(0,o.createElementVNode)("view",{class:"center-between",style:{padding:"20rpx 24rpx 0rpx 24rpx"}},[(0,o.createElementVNode)("view",{onClick:t[0]||(t[0]=(...c)=>a.clickDel&&a.clickDel(...c)),class:"center-align",style:{width:"60rpx",height:"60rpx"}},[(0,o.createVNode)(r,{w:"60rpx",h:"60rpx",src:"/static/cancel_audio.png"})]),(0,o.createElementVNode)("view",{class:"center-between",style:{flex:"1",margin:"0rpx 32rpx 0rpx 24rpx","background-color":"#356FFF","border-radius":"16rpx",height:"72rpx",padding:"0rpx 8rpx"}},[(0,o.createElementVNode)("view",{onClick:t[1]||(t[1]=(...c)=>a.clickPlay&&a.clickPlay(...c)),class:"center-align",style:{width:"60rpx",height:"60rpx"}},[(0,o.createVNode)(r,{w:"60rpx",h:"60rpx",src:s.audioPlayerIcon},null,8,["src"])]),(0,o.createElementVNode)("view",{style:{"padding-left":"20rpx",flex:"1"}},[(0,o.createVNode)(l,{ref:"audioAnim",pauseSrc:"/static/audio_bar_ani_pause.png",images:s.images,w:"52rpx",h:"32rpx"},null,8,["images"])]),(0,o.createElementVNode)("u-text",{style:{color:"#FFFFFF","font-size":"24rpx","margin-right":"20rpx"}},(0,o.toDisplayString)(s.playStatus=="taking"?a.durationStr:a.playDurationStr),1)]),(0,o.createElementVNode)("view",{onClick:t[2]||(t[2]=(...c)=>a.clickSend&&a.clickSend(...c)),class:"center-align",style:{width:"60rpx",height:"60rpx"}},[(0,o.createVNode)(r,{w:"60rpx",h:"60rpx",src:"/static/send_active.png"})])])],4)}var io=M(eo,[["render",to],["styles",[Qr]]]),no={center:{"":{alignItems:"center",flexDirection:"row"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"flex-wrap":{"":{flexWrap:"wrap",flexDirection:"row"}},"msg-bar-express":{"":{position:"relative",backgroundColor:"#FFFFFF",height:0}},"expression-bar":{"":{alignItems:"center",flexDirection:"row",justifyContent:"space-between",backgroundColor:"#FFFFFF",paddingTop:"14rpx",paddingRight:"36rpx",paddingBottom:"14rpx",paddingLeft:"36rpx"}},line:{".expression-bar ":{height:1,backgroundColor:"#CCCCCC",transform:"scaleY(0.5)",transformOrigin:"50% 100%",opacity:.5}},"emoji-wrap":{"":{paddingTop:"20rpx",paddingRight:10,paddingBottom:0,paddingLeft:10}},"pig-wrap":{"":{paddingTop:0,paddingRight:5,paddingBottom:"10rpx",paddingLeft:5}}},so=ge("animation"),ao={emits:["onOpen","onClickEmoji"],data(){return{defHeight:Math.round(240*getApp().globalData.window.scaleH),originalHeight:0,isAndroid:W.isAndroid,height:0,emojiList:[],screenW:getApp().globalData.window.width,emojiW:0,safeAreaBottom:getApp().globalData.window.safeBottom,swiperCurrent:0,barStyle:{}}},watch:{height(e){this.$emit("onOpen",e>0,e)}},methods:{clickEmoji(e){this.$emit("onClickEmoji",e)},isShow(){return this.height>0},setHeight(e){this.originalHeight=e,this.isShow()&&this.height!=this.defHeight&&this.open(!0)},parseExpressions(){this.emojiList=["\u{1F600}","\u{1F603}","\u{1F604}","\u{1F601}","\u{1F606}","\u{1F605}","\u{1F602}","\u{1F923}","\uFE0F\u{1F60A}","\u{1F607}","\u{1F642}","\u{1F643}","\u{1F609}","\u{1F60C}","\u{1F60D}","\u{1F970}","\u{1F618}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F60B}","\u{1F61B}","\u{1F61D}","\u{1F61C}","\u{1F92A}","\u{1F928}","\u{1F9D0}","\u{1F913}","\u{1F60E}","\u{1F929}","\u{1F973}","\u{1F60F}","\u{1F612}","\u{1F61E}","\u{1F614}","\u{1F61F}","\u{1F615}","\u{1F641}","\uFE0F\u{1F616}","\u{1F62B}","\u{1F629}","\u{1F97A}","\u{1F622}","\u{1F62D}","\u{1F624}","\u{1F620}","\u{1F621}","\u{1F92C}","\u{1F92F}","\u{1F633}","\u{1F975}","\u{1F976}","\u{1F631}","\u{1F628}","\u{1F630}","\u{1F625}","\u{1F613}","\u{1F917}","\u{1F914}","\u{1F92D}","\u{1F92B}","\u{1F925}","\u{1F636}","\u{1F610}"]},open(e,t){this.height=e?this.originalHeight:0,this.isAndroid?this.barStyle={height:`${this.height}px`}:so.transition(this.$refs.refBarAction,{styles:{height:`${e?this.originalHeight:0}px`},duration:t?1:this.isAndroid?100:300,timingFunction:"ease",needLayout:!0,delay:0})}},created(){this.parseExpressions(),this.originalHeight=getApp().globalData.keyboardH,this.originalHeight||(this.originalHeight=this.defHeight),this.emojiW=parseInt((this.screenW-20)/8)}};function ro(e,t,i,n,s,a){return(0,o.openBlock)(),(0,o.createElementBlock)("view",{ref:"refBarAction",class:"msg-bar-express",style:(0,o.normalizeStyle)(s.barStyle),renderWhole:!0},[(0,o.createElementVNode)("scroll-view",{scrollY:"true",class:"emoji-wrap",showScrollbar:!1,style:(0,o.normalizeStyle)({height:s.originalHeight+"px"})},[(0,o.createElementVNode)("view",{class:"flex-wrap"},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(s.emojiList,(r,l)=>((0,o.openBlock)(),(0,o.createElementBlock)("view",{class:"center-align",onClick:c=>a.clickEmoji(r),key:"e"+l,style:(0,o.normalizeStyle)({width:s.emojiW+"px",height:s.emojiW+"px"})},[(0,o.createElementVNode)("u-text",{style:{"font-size":"60rpx"}},(0,o.toDisplayString)(r),1)],12,["onClick"]))),128))])],4),(0,o.createElementVNode)("view",{style:(0,o.normalizeStyle)({height:s.safeAreaBottom+"px",background:"#000000"})},null,4)],4)}var oo=M(ao,[["render",ro],["styles",[no]]]),lo={"level-center":{"":{alignItems:"center",flexDirection:"row"}},"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"column-center":{"":{flexDirection:"column",alignItems:"center"}},"action-wrap":{"":{borderRadius:"26rpx",marginTop:"12rpx",marginRight:"16rpx",marginBottom:0,marginLeft:"16rpx"}},"title-item":{".action-wrap ":{paddingTop:"28rpx",paddingRight:"28rpx",paddingBottom:"28rpx",paddingLeft:"28rpx"}},"action-item":{".action-wrap ":{height:"106rpx",paddingTop:0,paddingRight:"40rpx",paddingBottom:0,paddingLeft:"40rpx"}},title:{".action-wrap .action-item ":{marginLeft:"50rpx"}},"item-text":{".action-wrap .action-item ":{textAlign:"center",lineHeight:"106rpx"}},line:{"":{height:"2rpx",backgroundColor:"rgba(230,230,230,0.5)",transform:"scaleY(0.5)",transformOrigin:"50% 100%"}}},co={components:{kfImg:ae},emits:["onClickActionItem","onChange","onMaskClick"],props:{actions:{type:[Array,Object],default:[]}},data(){return{textSize:"38rpx",itemTextColor:"#333333"}},methods:{clickThis(e){e&&e.stopPropagation()},clickItem(e){this.$refs.popup.close(),this.$nextTick(()=>{let t=e!=-1?this.actions[e]:{key:"cancel"};this.$emit("onClickActionItem",t)})},onMaskClick(){this.$emit("onMaskClick")},onChange(e){this.$emit("onChange",e)},open(){this.$refs.popup.open()}}};function uo(e,t,i,n,s,a){let r=(0,o.resolveComponent)("kf-img"),l=ue((0,o.resolveDynamicComponent)("uni-popup"),sn);return(0,o.openBlock)(),(0,o.createBlock)(l,{onClick:(0,o.withModifiers)(a.clickThis,["stop"]),ref:"popup",type:"bottom",maskBgColor:"rgba(0, 0, 0, 0.4)",onChange:a.onChange,onMaskClick:a.onMaskClick,style:{"z-index":"99999"}},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("view",{class:"action-wrap",style:{"background-color":"#FFFFFF"}},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(i.actions,(c,u,d)=>((0,o.openBlock)(),(0,o.createElementBlock)("view",{index:"a"+u},[c.icon?((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:0,class:"action-item level-center",onClick:f=>a.clickItem(u)},[(0,o.createVNode)(r,{src:c.icon,w:"46rpx",h:"46rpx",style:{"margin-right":"50rpx"},"use-native-pic":!1,useNativePic:!0},null,8,["src"]),(0,o.createElementVNode)("u-text",{style:(0,o.normalizeStyle)({fontSize:s.textSize,color:s.itemTextColor})},(0,o.toDisplayString)(c.title),5)],8,["onClick"])):((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:1,class:"action-item",onClick:f=>a.clickItem(u)},[(0,o.createElementVNode)("u-text",{style:(0,o.normalizeStyle)({fontSize:s.textSize,color:"#333333"}),class:"item-text"},(0,o.toDisplayString)(c.title),5)],8,["onClick"])),(0,o.createElementVNode)("view",{class:"line"})],8,["index"]))),256))]),(0,o.createElementVNode)("view",{class:"action-wrap action-bottom",style:{marginBottom:"10px",backgroundColor:"#FFFFFF"}},[(0,o.createElementVNode)("view",{class:"action-item level-center",onClick:t[0]||(t[0]=c=>a.clickItem(-1)),style:{"justify-content":"center"}},[(0,o.createElementVNode)("u-text",{style:(0,o.normalizeStyle)({color:"#333333",fontSize:s.textSize})},"Cancel",4)])])]),_:1},8,["onClick","onChange","onMaskClick"])}var po=M(co,[["render",uo],["styles",[lo]]]),fo={"msg-bar":{"":{position:"relative"}},center:{"":{alignItems:"center",flexDirection:"row"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"msg-bar-view":{"":{flexDirection:"row",paddingTop:"20rpx",paddingRight:"24rpx",paddingBottom:"0rpx",paddingLeft:"24rpx"}},"msg-bar-middle":{"":{flex:1,position:"relative",borderRadius:"16rpx",paddingTop:"18rpx",paddingRight:"82rpx",paddingBottom:"10rpx",paddingLeft:"26rpx",backgroundColor:"#0a7aff"}},"input-bar":{".msg-bar-middle ":{fontSize:14,flex:1}},voice:{".msg-bar-middle ":{position:"absolute",right:"20rpx",top:"10rpx"}},"audio-tip":{"":{borderRadius:"8rpx",lineHeight:"28rpx",paddingTop:"14rpx",paddingRight:"10rpx",paddingBottom:"14rpx",paddingLeft:"16rpx"}},tip:{".audio-tip ":{color:"#FFFFFF",fontSize:"20rpx",marginRight:"10rpx"}}};ge("dom");var mo={emits:["onSend","onChoosePicture","onInputLineChange","onSendAudio","onInputFocused"],components:{MsgBarAudio:io,KfImg:ae,MsgBarAction:oo,KfActionSheet:po},props:{hideVoice:{type:Boolean,default:!1}},data(){return{isAndroid:W.isAndroid,width:getApp().globalData.window.width,safeBottom:0,cursorSpacing:uni.upx2px(96),text:"",inputColor:"#333333",isKeyboardOpen:!1,inputAdjustPosition:!1,placeholderStyle:"color: rgba(153,153,153,0.5)",msgBarActionHeight:0,showSend:!1,audioShow:!1,audioLockShow:!1,audioLockBottom:uni.upx2px(104)+getApp().globalData.window.safeBottom,isAudioLock:!1,audioTouchTime:0,audioTipSize:{},audioBarShowTimer:!1,expressionAct:!1,audioRecordShow:!1,emojiList:[],cameraActions:[{icon:"/static/i_camera_photo.png",title:"Take photo",key:"take_photo"},{icon:"/static/i_camera_video.png",title:"Take video",key:"take_video"}]}},computed:{viewBarBg(){return"#F9FAFD"},viewBarMiddleStyle(){let e={},t=1,i="#EEEEEE";return e.background="rgba(255, 255, 255, "+t+")",e.border="2rpx solid "+i,e},sendAct(){return!!this.text}},methods:{clickBarCamera(){this.expressionAct&&(this.expressionAct=!1),this.isKeyboardOpen&&uni.hideKeyboard(),this.$refs.popCamera.open()},clickSend(e){e&&e.stopPropagation(),this.handleSend()},clickExpression(){this.expressionAct||(this.isKeyboardOpen&&uni.hideKeyboard(),this.expressionAct=!0,setTimeout(()=>{this.$refs.msgBarAction.open(!0,!0)},200))},clickPic(){this.isKeyboardOpen&&uni.hideKeyboard(),this.expressionAct&&(this.expressionAct=!1),this.chooseImage(1,9)},clickVideo(){this.isKeyboardOpen&&uni.hideKeyboard(),this.expressionAct&&(this.expressionAct=!1),this.chooseVideo(1)},onAudioCancel(){this.audioRecordShow=!1},onAudioFinish(e){this.$emit("onSendAudio",e),this.audioRecordShow=!1},onAudioTouch(){if(this.expressionAct&&(this.expressionAct=!1),this.isKeyboardOpen||this.$refs.msgBarAction.isShow()){uni.hideKeyboard(),this.$refs.msgBarAction.open(!1);return}this.audioTouchTime=new Date().getTime()},onAudioTouchEnd(){new Date().getTime()-this.audioTouchTime<600||this.$nextTick(()=>{this.$refs.msgBarAudio.stopRecord()})},onAudioLongTouch(){if(!Li(x.MICROPHONE)){ze(x.MICROPHONE);return}this.audioRecordShow=!0,this.$nextTick(()=>{this.$refs.msgBarAudio.startRecord()})},onClickActionItem(e){switch(this.expressionAct&&(this.expressionAct=!1),e.key){case"take_photo":this.chooseImage(2,1);break;case"take_video":this.chooseVideo(2);break}},hide(){this.isKeyboardOpen&&uni.hideKeyboard(),this.expressionAct&&(this.expressionAct=!1),this.$refs.msgBarAction.open(!1)},onLineChange(e){e&&e.detail&&e.detail.height&&this.$emit("onInputLineChange",e.detail.height,e.detail.lineCount)},onFocus(){this.expressionAct&&(this.expressionAct=!1),this.$refs.msgBarAction.open(!1),this.$emit("onInputFocused",1)},onBlur(){uni.hideKeyboard(),this.$emit("onInputFocused",0)},onActionOpen(e,t){},onClickEmoji(e){this.text=this.text+e},chooseImage(e,t){Oi(e,t).then(i=>{let n=i.tempFilePaths;for(let s=0,a=n.length;s<a;s++){let r=n[s];uni.getImageInfo({src:r,success:l=>{let c={path:l.path,width:l.width,height:l.height};this.$emit("onChoosePicture",0,c)}})}})},chooseVideo(e){Ni(e,!0).then(t=>{let i={path:t.tempFilePath,coverPath:t.coverPath,cover:t.coverPath,width:t.width,height:t.height,duration:parseInt(t.duration)||0};this.$emit("onChoosePicture",1,i)})},handleSend(){if(this.text==null||this.text=="")return;this.text.trim()==""&&uni.showModal({title:"Tips",content:"Unable to send blank message.",showCancel:!1,cancelText:"",confirmText:"Got it",editable:!1,success(t){t.confirm}}),this.$emit("onSend",this.text),this.text=""},onKeyboardChange(e){e.height>0?(this.isKeyboardOpen=!0,this.$refs.msgBarAction.setHeight(e.height),getApp().globalData.keyboardH=e.height,this.safeBottom=0):(this.isKeyboardOpen=!1,this.$refs.input.blur(),this.safeBottom=getApp().globalData.window.safeBottom)}},created(){this.safeBottom=getApp().globalData.window.safeBottom,uni.onKeyboardHeightChange(this.onKeyboardChange)},unmounted(){uni.offKeyboardHeightChange(this.onKeyboardChange)}};function go(e,t,i,n,s,a){let r=(0,o.resolveComponent)("kf-img"),l=(0,o.resolveComponent)("msg-bar-audio"),c=(0,o.resolveComponent)("msg-bar-action"),u=(0,o.resolveComponent)("kf-action-sheet");return(0,o.openBlock)(),(0,o.createElementBlock)("view",{class:"msg-bar",style:(0,o.normalizeStyle)({width:`${s.width}px`}),renderWhole:!0},[(0,o.renderSlot)(e.$slots,"default"),(0,o.createElementVNode)("view",{class:"msg-bar-view",style:(0,o.normalizeStyle)([{background:a.viewBarBg},{position:"relative"}])},[(0,o.createElementVNode)("view",{class:"msg-bar-middle",style:(0,o.normalizeStyle)(a.viewBarMiddleStyle)},[(0,o.createElementVNode)("u-textarea",{ref:"input",modelValue:s.text,onInput:t[0]||(t[0]=d=>s.text=d.detail.value),adjustPosition:s.inputAdjustPosition,cursorSpacing:s.cursorSpacing,autoHeight:!0,maxlength:-1,showConfirmBar:!1,disableDefaultPadding:!0,onLinechange:t[1]||(t[1]=(...d)=>a.onLineChange&&a.onLineChange(...d)),onFocus:t[2]||(t[2]=(0,o.withModifiers)((...d)=>a.onFocus&&a.onFocus(...d),["stop"])),onBlur:t[3]||(t[3]=(...d)=>a.onBlur&&a.onBlur(...d)),style:(0,o.normalizeStyle)({color:this.inputColor}),placeholderStyle:s.placeholderStyle,class:"input-bar"},null,44,["modelValue","adjustPosition","cursorSpacing","placeholderStyle"]),(0,o.createElementVNode)("view",{class:"voice",onTouchstart:t[4]||(t[4]=(...d)=>a.onAudioTouch&&a.onAudioTouch(...d)),onLongpress:t[5]||(t[5]=(...d)=>a.onAudioLongTouch&&a.onAudioLongTouch(...d)),onTouchend:t[6]||(t[6]=(...d)=>a.onAudioTouchEnd&&a.onAudioTouchEnd(...d))},[(0,o.createVNode)(r,{src:"/static/s_audio_m.png",w:"60rpx",h:"60rpx"})],32)],4),(0,o.createElementVNode)("view",{style:{margin:"12rpx 0rpx 6rpx 32rpx"}},[a.sendAct?((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:0,onClick:t[7]||(t[7]=(...d)=>a.clickSend&&a.clickSend(...d))},[(0,o.createVNode)(r,{onClick:a.clickSend,src:"/static/send_active.png",w:"60rpx",h:"60rpx"},null,8,["onClick"])])):((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:1},[(0,o.createVNode)(r,{src:"/static/send_default.png",w:"60rpx",h:"60rpx"})]))]),s.audioRecordShow?((0,o.openBlock)(),(0,o.createBlock)(l,{key:0,ref:"msgBarAudio",onOnAudioCancel:a.onAudioCancel,onOnAudioFinish:a.onAudioFinish,style:{position:"absolute",bottom:"0",left:"0"}},null,8,["onOnAudioCancel","onOnAudioFinish"])):(0,o.createCommentVNode)("",!0)],4),(0,o.createElementVNode)("view",{style:(0,o.normalizeStyle)([{background:a.viewBarBg},{height:"96rpx",padding:"20rpx 74rpx 16rpx 54rpx"}])},[(0,o.createElementVNode)("view",{class:"center",style:{"justify-content":"space-between"}},[(0,o.createElementVNode)("view",{class:"center-align",style:{width:"60rpx",height:"60rpx"},onClick:t[8]||(t[8]=(...d)=>a.clickExpression&&a.clickExpression(...d))},[s.expressionAct?((0,o.openBlock)(),(0,o.createBlock)(r,{key:1,w:"60rpx",h:"60rpx",src:"/static/choose_expression_active.png"})):((0,o.openBlock)(),(0,o.createBlock)(r,{key:0,w:"60rpx",h:"60rpx",src:"/static/choose_expression.png"}))]),(0,o.createElementVNode)("view",{class:"center-align",style:{width:"60rpx",height:"60rpx"},onClick:t[9]||(t[9]=(...d)=>a.clickPic&&a.clickPic(...d))},[(0,o.createVNode)(r,{w:"60rpx",h:"60rpx",src:"/static/choose_pic.png"})]),(0,o.createElementVNode)("view",{class:"center-align",style:{width:"60rpx",height:"60rpx"},onClick:t[10]||(t[10]=(...d)=>a.clickBarCamera&&a.clickBarCamera(...d))},[(0,o.createVNode)(r,{w:"60rpx",h:"60rpx",src:"/static/take_photo.png"})]),(0,o.createElementVNode)("view",{class:"center-align",style:{width:"60rpx",height:"60rpx"},onClick:t[11]||(t[11]=(...d)=>a.clickVideo&&a.clickVideo(...d))},[(0,o.createVNode)(r,{w:"60rpx",h:"60rpx",src:"/static/choose_video.png"})])])],4),(0,o.createVNode)(c,{ref:"msgBarAction",onOnOpen:a.onActionOpen,onOnClickEmoji:a.onClickEmoji},null,8,["onOnOpen","onOnClickEmoji"]),(0,o.createElementVNode)("view",{style:(0,o.normalizeStyle)({height:s.safeBottom+"px",background:a.viewBarBg})},null,4),(0,o.createVNode)(u,{ref:"popCamera",onOnClickActionItem:a.onClickActionItem,actions:s.cameraActions},null,8,["onOnClickActionItem","actions"])],4)}var ho=M(mo,[["render",go],["styles",[fo]]]),_o="/static/back.png",yo="/static/video_call.png",So={center:{"":{flexDirection:"row",alignItems:"center"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"nav-bar":{"":{position:"fixed",backgroundColor:"#FFFFFF",height:44,paddingTop:0,paddingRight:20,paddingBottom:0,paddingLeft:20,justifyContent:"space-between"}},"status-bar":{"":{position:"fixed",top:0,left:0,right:0,backgroundColor:"#FFFFFF",zIndex:99999}},"call-img-size":{"":{width:20,height:20}},"list-rotate":{"":{transform:"rotate(180deg)"}},"msg-def":{"":{opacity:1,transitionProperty:"opacity",transitionDuration:500,transitionTimingFunction:"ease-out"}},"loading-more":{"":{flex:1,height:40,alignItems:"center",flexDirection:"row",justifyContent:"center"}},"@TRANSITION":{"msg-def":{property:"opacity",duration:500,timingFunction:"ease-out"}}},bo={mixins:[Dr,Ji],components:{MsgText:Or,MsgPicture:Fr,MsgVideo:Ur,MsgVoice:Jr,MsgCall:Xr,MsgBar:ho}};function wo(e,t,i,n,s,a){let r=ue((0,o.resolveDynamicComponent)("navigation-bar"),kr),l=ue((0,o.resolveDynamicComponent)("page-meta"),Fi),c=(0,o.resolveComponent)("msg-text"),u=(0,o.resolveComponent)("msg-picture"),d=(0,o.resolveComponent)("msg-video"),f=(0,o.resolveComponent)("msg-voice"),_=(0,o.resolveComponent)("msg-call"),y=(0,o.resolveComponent)("msg-bar");return(0,o.openBlock)(),(0,o.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,o.createVNode)(l,{"background-color":e.bgColor,"background-color-top":e.bgColor,"background-color-bottom":e.bgColor,"page-style":"background-color:#F8F8F8"},{default:(0,o.withCtx)(()=>[(0,o.createVNode)(r,{"background-color":"#FFFFFF","front-color":"#000000"})]),_:1},8,["background-color","background-color-top","background-color-bottom"]),(0,o.createElementVNode)("view",null,[(0,o.createElementVNode)("view",{class:"status-bar",style:(0,o.normalizeStyle)({height:`${e.statusBarHeight}px`})},null,4),(0,o.createElementVNode)("view",{class:"center nav-bar",style:(0,o.normalizeStyle)({top:`${e.statusBarHeight}px`,left:0,right:0})},[(0,o.createElementVNode)("u-image",{onClick:t[0]||(t[0]=(...m)=>e.clickBack&&e.clickBack(...m)),src:_o,class:"call-img-size"}),(0,o.createElementVNode)("u-text",{style:{"font-size":"20px","font-weight":"500"}},"Customer service"),e.showVideoCall?((0,o.openBlock)(),(0,o.createElementBlock)("u-image",{key:0,onClick:t[1]||(t[1]=(...m)=>e.clickBarVideo&&e.clickBarVideo(...m)),src:yo,class:"call-img-size"})):((0,o.openBlock)(),(0,o.createElementBlock)("view",{key:1,class:"call-img-size",style:{"background-color":"transparent"}}))],4),(0,o.createElementVNode)("view",{style:(0,o.normalizeStyle)({height:`${e.statusBarHeight+44}px`})},null,4),(0,o.createElementVNode)("view",{style:(0,o.normalizeStyle)([{height:`${e.viewHeight}px`,paddingBottom:`${e.keyboardHeight}px`},{"background-color":"#F1F3F6"}])},[(0,o.createElementVNode)("list",{onClick:t[3]||(t[3]=(...m)=>e.clickMsgList&&e.clickMsgList(...m)),ref:"msgList",class:(0,o.normalizeClass)([[e.classRotate],"msg-list"]),showScrollbar:!1,loadmoreoffset:20,offsetAccuracy:10,onLoadmore:t[4]||(t[4]=(...m)=>e.onLoadMore&&e.onLoadMore(...m))},[(0,o.createElementVNode)("cell",{ref:"cellLast",style:(0,o.normalizeStyle)({width:`${e.sW}px`,height:`${e.itemHeightFirst}px`})},null,4),(0,o.createElementVNode)("cell",null,[(0,o.createElementVNode)("list",{showScrollbar:!1,scrollable:!1,class:(0,o.normalizeClass)([e.classRotate])},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.addList,(m,w)=>((0,o.openBlock)(),(0,o.createElementBlock)("cell",{key:`key${w}`,ref_for:!0,ref:`cell${m.mtime}`,class:"msg-def",style:{"padding-bottom":"28rpx"},onClick:t[2]||(t[2]=(...S)=>e.clickMsgList&&e.clickMsgList(...S))},[m.msg_type==1e3?((0,o.openBlock)(),(0,o.createElementBlock)("u-text",{key:0,style:{"font-size":"24rpx","text-align":"center"}},(0,o.toDisplayString)(m.showTime),1)):m.msg_type==e.MSG.TXT?((0,o.openBlock)(),(0,o.createBlock)(c,{key:1,ref_for:!0,ref:"msg"+m.mtime,data:m},null,8,["data"])):m.msg_type==e.MSG.IMG?((0,o.openBlock)(),(0,o.createBlock)(u,{key:2,ref_for:!0,ref:"msg"+m.mtime,data:m,onClickPicture:e.clickPicture},null,8,["data","onClickPicture"])):m.msg_type==e.MSG.VIDEO?((0,o.openBlock)(),(0,o.createBlock)(d,{key:3,ref_for:!0,ref:"msg"+m.mtime,data:m,index:w,onClickVideo:e.clickPicture},null,8,["data","index","onClickVideo"])):m.msg_type==e.MSG.VOICE?((0,o.openBlock)(),(0,o.createBlock)(f,{key:4,ref_for:!0,ref:"msg"+m.ctime,data:m,index:w,onClickMsgVoice:e.clickMsgVoice,onOnMsgVoiceChange:e.onMsgVoiceChange},null,8,["data","index","onClickMsgVoice","onOnMsgVoiceChange"])):m.msg_type==e.MSG.HUNG_UP?((0,o.openBlock)(),(0,o.createBlock)(_,{key:5,ref_for:!0,ref:"msg"+m.mtime,data:m},null,8,["data"])):(0,o.createCommentVNode)("",!0)]))),128))],2)]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.historyList,(m,w)=>((0,o.openBlock)(),(0,o.createElementBlock)("cell",{key:"cell"+m.ctime,ref_for:!0,ref:"cell"+m.mtime,style:{"padding-bottom":"28rpx"},class:(0,o.normalizeClass)(["msg-def",[e.classRotate]])},[m.msg_type==1e3?((0,o.openBlock)(),(0,o.createElementBlock)("u-text",{key:0,style:{"font-size":"24rpx","text-align":"center"}},(0,o.toDisplayString)(m.showTime),1)):m.msg_type==e.MSG.TXT?((0,o.openBlock)(),(0,o.createBlock)(c,{key:1,ref_for:!0,ref:"msg"+m.mtime,data:m},null,8,["data"])):m.msg_type==e.MSG.IMG?((0,o.openBlock)(),(0,o.createBlock)(u,{key:2,ref_for:!0,ref:"msg"+m.mtime,data:m,index:w,onClickPicture:e.clickPicture},null,8,["data","index","onClickPicture"])):m.msg_type==e.MSG.VIDEO?((0,o.openBlock)(),(0,o.createBlock)(d,{key:3,ref_for:!0,ref:"msg"+m.mtime,data:m,index:w,onClickVideo:e.clickPicture},null,8,["data","index","onClickVideo"])):m.msg_type==e.MSG.VOICE?((0,o.openBlock)(),(0,o.createBlock)(f,{key:4,ref_for:!0,ref:"msg"+m.mtime,data:m,index:w,onClickMsgVoice:e.clickMsgVoice,onOnMsgVoiceChange:e.onMsgVoiceChange},null,8,["data","index","onClickMsgVoice","onOnMsgVoiceChange"])):m.msg_type==e.MSG.HUNG_UP?((0,o.openBlock)(),(0,o.createBlock)(_,{key:5,ref_for:!0,ref:"msg"+m.ctime,data:m},null,8,["data"])):(0,o.createCommentVNode)("",!0)],2))),128)),(0,o.createElementVNode)("cell",{ref:"cellNew",style:(0,o.normalizeStyle)({width:`${e.sW}px`,height:`${e.itemHeightLast}px`})},null,4)],34),(0,o.createVNode)(y,{ref:"msgBar",onOnSend:e.onSend,onOnChoosePicture:e.onChoosePicture,onOnSendAudio:e.onSendAudio,onOnInputLineChange:e.onInputLineChange,onOnInputFocused:e.onInputFocused},null,8,["onOnSend","onOnChoosePicture","onOnSendAudio","onOnInputLineChange","onOnInputFocused"])],4)])])}var Qe=M(bo,[["render",wo],["styles",[So]]]);var Ft=plus.webview.currentWebview();if(Ft){let e=parseInt(Ft.id),t="pagesServiceChat/index",i={};try{i=JSON.parse(Ft.__query__)}catch(s){}Qe.mpType="page";let n=Vue.createPageApp(Qe,{$store:getApp({allowDefault:!0}).$store,__pageId:e,__pagePath:t,__pageQuery:i});n.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...Qe.styles||[]])),n.mount("#root")}})();
/*!
  * @intlify/shared v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/message-resolver v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/runtime v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/message-compiler v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/core-base v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * vue-i18n v9.1.9
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
