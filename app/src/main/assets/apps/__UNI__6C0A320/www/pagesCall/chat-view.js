"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var ja=Object.create;var qt=Object.defineProperty,za=Object.defineProperties,Ga=Object.getOwnPropertyDescriptor,Ka=Object.getOwnPropertyDescriptors,Ya=Object.getOwnPropertyNames,$i=Object.getOwnPropertySymbols,qa=Object.getPrototypeOf,zi=Object.prototype.hasOwnProperty,Ja=Object.prototype.propertyIsEnumerable;var ji=(e,t,i)=>t in e?qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ke=(e,t)=>{for(var i in t||(t={}))zi.call(t,i)&&ji(e,i,t[i]);if($i)for(var i of $i(t))Ja.call(t,i)&&ji(e,i,t[i]);return e},He=(e,t)=>za(e,Ka(t));var Xa=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Za=(e,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Ya(t))!zi.call(e,a)&&a!==i&&qt(e,a,{get:()=>t[a],enumerable:!(o=Ga(t,a))||o.enumerable});return e};var ve=(e,t,i)=>(i=e!=null?ja(qa(e)):{},Za(t||!e||!e.__esModule?qt(i,"default",{value:e,enumerable:!0}):i,e));var U=(e,t,i)=>new Promise((o,a)=>{var s=c=>{try{l(i.next(c))}catch(u){a(u)}},r=c=>{try{l(i.throw(c))}catch(u){a(u)}},l=c=>c.done?o(c.value):Promise.resolve(c.value).then(s,r);l((i=i.apply(e,t)).next())});var Te=Xa((gc,Gi)=>{Gi.exports=Vue});var A=ve(Te()),D={zT:2,appId:plus.runtime.appid,appV:parseInt(plus.runtime.version.split(".").join("")),isAndroid:plus.os.name=="Android"};var Qa=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",at=e=>Qa?Symbol(e):e,eo=(e,t,i)=>to({l:e,k:t,s:i}),to=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),ne=e=>typeof e=="number"&&isFinite(e),io=e=>li(e)==="[object Date]",Ct=e=>li(e)==="[object RegExp]",At=e=>O(e)&&Object.keys(e).length===0;function no(e,t){typeof console!="undefined"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}var re=Object.assign;function Ki(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}var ao=Object.prototype.hasOwnProperty;function un(e,t){return ao.call(e,t)}var ee=Array.isArray,ae=e=>typeof e=="function",S=e=>typeof e=="string",K=e=>typeof e=="boolean",oe=e=>e!==null&&typeof e=="object",hn=Object.prototype.toString,li=e=>hn.call(e),O=e=>li(e)==="[object Object]",oo=e=>e==null?"":ee(e)||O(e)&&e.toString===hn?JSON.stringify(e,null,2):String(e);var so=Object.prototype.hasOwnProperty;function ro(e,t){return so.call(e,t)}var wt=e=>e!==null&&typeof e=="object",Ie=[];Ie[0]={w:[0],i:[3,0],"[":[4],o:[7]};Ie[1]={w:[1],".":[2],"[":[4],o:[7]};Ie[2]={w:[2],i:[3,0],0:[3,0]};Ie[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Ie[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Ie[5]={"'":[4,0],o:8,l:[5,0]};Ie[6]={'"':[4,0],o:8,l:[6,0]};var lo=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function co(e){return lo.test(e)}function uo(e){let t=e.charCodeAt(0),i=e.charCodeAt(e.length-1);return t===i&&(t===34||t===39)?e.slice(1,-1):e}function ho(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function po(e){let t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:co(t)?uo(t):"*"+t}function fo(e){let t=[],i=-1,o=0,a=0,s,r,l,c,u,f,d,y=[];y[0]=()=>{r===void 0?r=l:r+=l},y[1]=()=>{r!==void 0&&(t.push(r),r=void 0)},y[2]=()=>{y[0](),a++},y[3]=()=>{if(a>0)a--,o=4,y[0]();else{if(a=0,r===void 0||(r=po(r),r===!1))return!1;y[1]()}};function x(){let R=e[i+1];if(o===5&&R==="'"||o===6&&R==='"')return i++,l="\\"+R,y[0](),!0}for(;o!==null;)if(i++,s=e[i],!(s==="\\"&&x())){if(c=ho(s),d=Ie[o],u=d[c]||d.l||8,u===8||(o=u[0],u[1]!==void 0&&(f=y[u[1]],f&&(l=s,f()===!1))))return;if(o===7)return t}}var Yi=new Map;function Tt(e,t){if(!wt(e))return null;let i=Yi.get(t);if(i||(i=fo(t),i&&Yi.set(t,i)),!i)return null;let o=i.length,a=e,s=0;for(;s<o;){let r=a[i[s]];if(r===void 0)return null;a=r,s++}return a}function ei(e){if(!wt(e))return e;for(let t in e)if(ro(e,t))if(!t.includes("."))wt(e[t])&&ei(e[t]);else{let i=t.split("."),o=i.length-1,a=e;for(let s=0;s<o;s++)i[s]in a||(a[i[s]]={}),a=a[i[s]];a[i[o]]=e[t],delete e[t],wt(a[i[o]])&&ei(a[i[o]])}return e}var mo=e=>e,go=e=>"",_o="text",wo=e=>e.length===0?"":e.join(""),yo=oo;function qi(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function Co(e){let t=ne(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(ne(e.named.count)||ne(e.named.n))?ne(e.named.count)?e.named.count:ne(e.named.n)?e.named.n:t:t}function To(e,t){t.count||(t.count=e),t.n||(t.n=e)}function So(e={}){let t=e.locale,i=Co(e),o=oe(e.pluralRules)&&S(t)&&ae(e.pluralRules[t])?e.pluralRules[t]:qi,a=oe(e.pluralRules)&&S(t)&&ae(e.pluralRules[t])?qi:void 0,s=T=>T[o(i,T.length,a)],r=e.list||[],l=T=>r[T],c=e.named||{};ne(e.pluralIndex)&&To(i,c);let u=T=>c[T];function f(T){let k=ae(e.messages)?e.messages(T):oe(e.messages)?e.messages[T]:!1;return k||(e.parent?e.parent.message(T):go)}let d=T=>e.modifiers?e.modifiers[T]:mo,y=O(e.processor)&&ae(e.processor.normalize)?e.processor.normalize:wo,x=O(e.processor)&&ae(e.processor.interpolate)?e.processor.interpolate:yo,R=O(e.processor)&&S(e.processor.type)?e.processor.type:_o,E={list:l,named:u,plural:s,linked:(T,k)=>{let L=f(T)(E);return S(k)?d(k)(L):L},message:f,type:R,interpolate:x,normalize:y};return E}function dn(e,t,i={}){let{domain:o,messages:a,args:s}=i,r=e,l=new SyntaxError(String(r));return l.code=e,t&&(l.location=t),l.domain=o,l}var bo="9.1.9",vt=-1,Ji="";function Ao(){return{upper:e=>S(e)?e.toUpperCase():e,lower:e=>S(e)?e.toLowerCase():e,capitalize:e=>S(e)?`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`:e}}var vo,Xi=0;function xo(e={}){let t=S(e.version)?e.version:bo,i=S(e.locale)?e.locale:"en-US",o=ee(e.fallbackLocale)||O(e.fallbackLocale)||S(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:i,a=O(e.messages)?e.messages:{[i]:{}},s=O(e.datetimeFormats)?e.datetimeFormats:{[i]:{}},r=O(e.numberFormats)?e.numberFormats:{[i]:{}},l=re({},e.modifiers||{},Ao()),c=e.pluralRules||{},u=ae(e.missing)?e.missing:null,f=K(e.missingWarn)||Ct(e.missingWarn)?e.missingWarn:!0,d=K(e.fallbackWarn)||Ct(e.fallbackWarn)?e.fallbackWarn:!0,y=!!e.fallbackFormat,x=!!e.unresolving,R=ae(e.postTranslation)?e.postTranslation:null,E=O(e.processor)?e.processor:null,T=K(e.warnHtmlMessage)?e.warnHtmlMessage:!0,k=!!e.escapeParameter,L=ae(e.messageCompiler)?e.messageCompiler:vo,N=ae(e.onWarn)?e.onWarn:no,m=e,P=oe(m.__datetimeFormatters)?m.__datetimeFormatters:new Map,se=oe(m.__numberFormatters)?m.__numberFormatters:new Map,B=oe(m.__meta)?m.__meta:{};return Xi++,{version:t,cid:Xi,locale:i,fallbackLocale:o,messages:a,datetimeFormats:s,numberFormats:r,modifiers:l,pluralRules:c,missing:u,missingWarn:f,fallbackWarn:d,fallbackFormat:y,unresolving:x,postTranslation:R,processor:E,warnHtmlMessage:T,escapeParameter:k,messageCompiler:L,onWarn:N,__datetimeFormatters:P,__numberFormatters:se,__meta:B}}function ci(e,t,i,o,a){let{missing:s,onWarn:r}=e;if(s!==null){let l=s(e,i,t,a);return S(l)?l:t}else return t}function ot(e,t,i){let o=e;o.__localeChainCache||(o.__localeChainCache=new Map);let a=o.__localeChainCache.get(i);if(!a){a=[];let s=[i];for(;ee(s);)s=Zi(a,s,t);let r=ee(t)?t:O(t)?t.default?t.default:null:t;s=S(r)?[r]:r,ee(s)&&Zi(a,s,!1),o.__localeChainCache.set(i,a)}return a}function Zi(e,t,i){let o=!0;for(let a=0;a<t.length&&K(o);a++){let s=t[a];S(s)&&(o=ko(e,t[a],i))}return o}function ko(e,t,i){let o,a=t.split("-");do{let s=a.join("-");o=Lo(e,s,i),a.splice(-1,1)}while(a.length&&o===!0);return o}function Lo(e,t,i){let o=!1;if(!e.includes(t)&&(o=!0,t)){o=t[t.length-1]!=="!";let a=t.replace(/!/g,"");e.push(a),(ee(i)||O(i))&&i[a]&&(o=i[a])}return o}function nt(e,t,i){let o=e;o.__localeChainCache=new Map,ot(e,i,t)}function We(e){return dn(e,null,void 0)}var Qi=()=>"",De=e=>ae(e);function en(e,...t){let{fallbackFormat:i,postTranslation:o,unresolving:a,fallbackLocale:s,messages:r}=e,[l,c]=ti(...t),u=K(c.missingWarn)?c.missingWarn:e.missingWarn,f=K(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn,d=K(c.escapeParameter)?c.escapeParameter:e.escapeParameter,y=!!c.resolvedMessage,x=S(c.default)||K(c.default)?K(c.default)?l:c.default:i?l:"",R=i||x!=="",E=S(c.locale)?c.locale:e.locale;d&&Io(c);let[T,k,L]=y?[l,E,r[E]||{}]:Mo(e,l,E,s,f,u),N=l;if(!y&&!(S(T)||De(T))&&R&&(T=x,N=T),!y&&(!(S(T)||De(T))||!S(k)))return a?vt:l;let m=!1,P=()=>{m=!0},se=De(T)?T:pn(e,l,k,T,N,P);if(m)return T;let B=Do(e,k,L,c),ce=So(B),pe=Fo(e,se,ce);return o?o(pe):pe}function Io(e){ee(e.list)?e.list=e.list.map(t=>S(t)?Ki(t):t):oe(e.named)&&Object.keys(e.named).forEach(t=>{S(e.named[t])&&(e.named[t]=Ki(e.named[t]))})}function Mo(e,t,i,o,a,s){let{messages:r,onWarn:l}=e,c=ot(e,o,i),u={},f,d=null,y="translate";for(let x=0;x<c.length&&(f=c[x],u=r[f]||{},(d=Tt(u,t))===null&&(d=u[t]),!(S(d)||ae(d)));x++){let R=ci(e,t,f,s,y);R!==t&&(d=R)}return[d,f,u]}function pn(e,t,i,o,a,s){let{messageCompiler:r,warnHtmlMessage:l}=e;if(De(o)){let u=o;return u.locale=u.locale||i,u.key=u.key||t,u}let c=r(o,Eo(e,i,a,o,l,s));return c.locale=i,c.key=t,c.source=o,c}function Fo(e,t,i){return t(i)}function ti(...e){let[t,i,o]=e,a={};if(!S(t)&&!ne(t)&&!De(t))throw We(14);let s=ne(t)?String(t):(De(t),t);return ne(i)?a.plural=i:S(i)?a.default=i:O(i)&&!At(i)?a.named=i:ee(i)&&(a.list=i),ne(o)?a.plural=o:S(o)?a.default=o:O(o)&&re(a,o),[s,a]}function Eo(e,t,i,o,a,s){return{warnHtmlMessage:a,onError:r=>{throw s&&s(r),r},onCacheKey:r=>eo(t,i,r)}}function Do(e,t,i,o){let{modifiers:a,pluralRules:s}=e,l={locale:t,modifiers:a,pluralRules:s,messages:c=>{let u=Tt(i,c);if(S(u)){let f=!1,y=pn(e,c,t,u,c,()=>{f=!0});return f?Qi:y}else return De(u)?u:Qi}};return e.processor&&(l.processor=e.processor),o.list&&(l.list=o.list),o.named&&(l.named=o.named),ne(o.plural)&&(l.pluralIndex=o.plural),l}function tn(e,...t){let{datetimeFormats:i,unresolving:o,fallbackLocale:a,onWarn:s}=e,{__datetimeFormatters:r}=e,[l,c,u,f]=ii(...t),d=K(u.missingWarn)?u.missingWarn:e.missingWarn;K(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;let y=!!u.part,x=S(u.locale)?u.locale:e.locale,R=ot(e,a,x);if(!S(l)||l==="")return new Intl.DateTimeFormat(x).format(c);let E={},T,k=null,L="datetime format";for(let P=0;P<R.length&&(T=R[P],E=i[T]||{},k=E[l],!O(k));P++)ci(e,l,T,d,L);if(!O(k)||!S(T))return o?vt:l;let N=`${T}__${l}`;At(f)||(N=`${N}__${JSON.stringify(f)}`);let m=r.get(N);return m||(m=new Intl.DateTimeFormat(T,re({},k,f)),r.set(N,m)),y?m.formatToParts(c):m.format(c)}function ii(...e){let[t,i,o,a]=e,s={},r={},l;if(S(t)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(t))throw We(16);l=new Date(t);try{l.toISOString()}catch(c){throw We(16)}}else if(io(t)){if(isNaN(t.getTime()))throw We(15);l=t}else if(ne(t))l=t;else throw We(14);return S(i)?s.key=i:O(i)&&(s=i),S(o)?s.locale=o:O(o)&&(r=o),O(a)&&(r=a),[s.key||"",l,s,r]}function nn(e,t,i){let o=e;for(let a in i){let s=`${t}__${a}`;o.__datetimeFormatters.has(s)&&o.__datetimeFormatters.delete(s)}}function an(e,...t){let{numberFormats:i,unresolving:o,fallbackLocale:a,onWarn:s}=e,{__numberFormatters:r}=e,[l,c,u,f]=ni(...t),d=K(u.missingWarn)?u.missingWarn:e.missingWarn;K(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;let y=!!u.part,x=S(u.locale)?u.locale:e.locale,R=ot(e,a,x);if(!S(l)||l==="")return new Intl.NumberFormat(x).format(c);let E={},T,k=null,L="number format";for(let P=0;P<R.length&&(T=R[P],E=i[T]||{},k=E[l],!O(k));P++)ci(e,l,T,d,L);if(!O(k)||!S(T))return o?vt:l;let N=`${T}__${l}`;At(f)||(N=`${N}__${JSON.stringify(f)}`);let m=r.get(N);return m||(m=new Intl.NumberFormat(T,re({},k,f)),r.set(N,m)),y?m.formatToParts(c):m.format(c)}function ni(...e){let[t,i,o,a]=e,s={},r={};if(!ne(t))throw We(14);let l=t;return S(i)?s.key=i:O(i)&&(s=i),S(o)?s.locale=o:O(o)&&(r=o),O(a)&&(r=a),[s.key||"",l,s,r]}function on(e,t,i){let o=e;for(let a in i){let s=`${t}__${a}`;o.__numberFormatters.has(s)&&o.__numberFormatters.delete(s)}}var Ro="9.1.9";function Ee(e,...t){return dn(e,null,void 0)}var ai=at("__transrateVNode"),oi=at("__datetimeParts"),si=at("__numberParts"),Oo=at("__setPluralRules"),fn=at("__injectWithOption"),sn=0;function rn(e){return(t,i,o,a)=>e(i,o,(0,A.getCurrentInstance)()||void 0,a)}function mn(e,t){let{messages:i,__i18n:o}=t,a=O(i)?i:ee(o)?{}:{[e]:{}};if(ee(o)&&o.forEach(({locale:s,resource:r})=>{s?(a[s]=a[s]||{},St(r,a[s])):St(r,a)}),t.flatJson)for(let s in a)un(a,s)&&ei(a[s]);return a}var _t=e=>!oe(e)||ee(e);function St(e,t){if(_t(e)||_t(t))throw Ee(20);for(let i in e)un(e,i)&&(_t(e[i])||_t(t[i])?t[i]=e[i]:St(e[i],t[i]))}function Po(e={}){let{__root:t}=e,i=t===void 0,o=K(e.inheritLocale)?e.inheritLocale:!0,a=(0,A.ref)(t&&o?t.locale.value:S(e.locale)?e.locale:"en-US"),s=(0,A.ref)(t&&o?t.fallbackLocale.value:S(e.fallbackLocale)||ee(e.fallbackLocale)||O(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:a.value),r=(0,A.ref)(mn(a.value,e)),l=(0,A.ref)(O(e.datetimeFormats)?e.datetimeFormats:{[a.value]:{}}),c=(0,A.ref)(O(e.numberFormats)?e.numberFormats:{[a.value]:{}}),u=t?t.missingWarn:K(e.missingWarn)||Ct(e.missingWarn)?e.missingWarn:!0,f=t?t.fallbackWarn:K(e.fallbackWarn)||Ct(e.fallbackWarn)?e.fallbackWarn:!0,d=t?t.fallbackRoot:K(e.fallbackRoot)?e.fallbackRoot:!0,y=!!e.fallbackFormat,x=ae(e.missing)?e.missing:null,R=ae(e.missing)?rn(e.missing):null,E=ae(e.postTranslation)?e.postTranslation:null,T=K(e.warnHtmlMessage)?e.warnHtmlMessage:!0,k=!!e.escapeParameter,L=t?t.modifiers:O(e.modifiers)?e.modifiers:{},N=e.pluralRules||t&&t.pluralRules,m;function P(){return xo({version:Ro,locale:a.value,fallbackLocale:s.value,messages:r.value,messageCompiler:function(g){return fe=>fe.normalize([g])},datetimeFormats:l.value,numberFormats:c.value,modifiers:L,pluralRules:N,missing:R===null?void 0:R,missingWarn:u,fallbackWarn:f,fallbackFormat:y,unresolving:!0,postTranslation:E===null?void 0:E,warnHtmlMessage:T,escapeParameter:k,__datetimeFormatters:O(m)?m.__datetimeFormatters:void 0,__numberFormatters:O(m)?m.__numberFormatters:void 0,__v_emitter:O(m)?m.__v_emitter:void 0,__meta:{framework:"vue"}})}m=P(),nt(m,a.value,s.value);function se(){return[a.value,s.value,r.value,l.value,c.value]}let B=(0,A.computed)({get:()=>a.value,set:p=>{a.value=p,m.locale=a.value}}),ce=(0,A.computed)({get:()=>s.value,set:p=>{s.value=p,m.fallbackLocale=s.value,nt(m,a.value,p)}}),pe=(0,A.computed)(()=>r.value),Ce=(0,A.computed)(()=>l.value),pt=(0,A.computed)(()=>c.value);function ft(){return ae(E)?E:null}function mt(p){E=p,m.postTranslation=p}function Kt(){return x}function Sa(p){p!==null&&(R=rn(p)),x=p,m.missing=R}function Ve(p,g,fe,ie,Yt,gt){se();let it;if(it=p(m),ne(it)&&it===vt){let[$a,fc]=g();return t&&d?ie(t):Yt($a)}else{if(gt(it))return it;throw Ee(14)}}function Hi(...p){return Ve(g=>en(g,...p),()=>ti(...p),"translate",g=>g.t(...p),g=>g,g=>S(g))}function ba(...p){let[g,fe,ie]=p;if(ie&&!oe(ie))throw Ee(15);return Hi(g,fe,re({resolvedMessage:!0},ie||{}))}function Aa(...p){return Ve(g=>tn(g,...p),()=>ii(...p),"datetime format",g=>g.d(...p),()=>Ji,g=>S(g))}function va(...p){return Ve(g=>an(g,...p),()=>ni(...p),"number format",g=>g.n(...p),()=>Ji,g=>S(g))}function xa(p){return p.map(g=>S(g)?(0,A.createVNode)(A.Text,null,g,0):g)}let ka={normalize:xa,interpolate:p=>p,type:"vnode"};function La(...p){return Ve(g=>{let fe,ie=g;try{ie.processor=ka,fe=en(ie,...p)}finally{ie.processor=null}return fe},()=>ti(...p),"translate",g=>g[ai](...p),g=>[(0,A.createVNode)(A.Text,null,g,0)],g=>ee(g))}function Ia(...p){return Ve(g=>an(g,...p),()=>ni(...p),"number format",g=>g[si](...p),()=>[],g=>S(g)||ee(g))}function Ma(...p){return Ve(g=>tn(g,...p),()=>ii(...p),"datetime format",g=>g[oi](...p),()=>[],g=>S(g)||ee(g))}function Fa(p){N=p,m.pluralRules=N}function Ea(p,g){let fe=S(g)?g:a.value,ie=Wi(fe);return Tt(ie,p)!==null}function Da(p){let g=null,fe=ot(m,s.value,a.value);for(let ie=0;ie<fe.length;ie++){let Yt=r.value[fe[ie]]||{},gt=Tt(Yt,p);if(gt!=null){g=gt;break}}return g}function Ra(p){let g=Da(p);return g!=null?g:t?t.tm(p)||{}:{}}function Wi(p){return r.value[p]||{}}function Oa(p,g){r.value[p]=g,m.messages=r.value}function Pa(p,g){r.value[p]=r.value[p]||{},St(g,r.value[p]),m.messages=r.value}function Na(p){return l.value[p]||{}}function Ba(p,g){l.value[p]=g,m.datetimeFormats=l.value,nn(m,p,g)}function Ua(p,g){l.value[p]=re(l.value[p]||{},g),m.datetimeFormats=l.value,nn(m,p,g)}function Va(p){return c.value[p]||{}}function Ha(p,g){c.value[p]=g,m.numberFormats=c.value,on(m,p,g)}function Wa(p,g){c.value[p]=re(c.value[p]||{},g),m.numberFormats=c.value,on(m,p,g)}return sn++,t&&((0,A.watch)(t.locale,p=>{o&&(a.value=p,m.locale=p,nt(m,a.value,s.value))}),(0,A.watch)(t.fallbackLocale,p=>{o&&(s.value=p,m.fallbackLocale=p,nt(m,a.value,s.value))})),{id:sn,locale:B,fallbackLocale:ce,get inheritLocale(){return o},set inheritLocale(p){o=p,p&&t&&(a.value=t.locale.value,s.value=t.fallbackLocale.value,nt(m,a.value,s.value))},get availableLocales(){return Object.keys(r.value).sort()},messages:pe,datetimeFormats:Ce,numberFormats:pt,get modifiers(){return L},get pluralRules(){return N||{}},get isGlobal(){return i},get missingWarn(){return u},set missingWarn(p){u=p,m.missingWarn=u},get fallbackWarn(){return f},set fallbackWarn(p){f=p,m.fallbackWarn=f},get fallbackRoot(){return d},set fallbackRoot(p){d=p},get fallbackFormat(){return y},set fallbackFormat(p){y=p,m.fallbackFormat=y},get warnHtmlMessage(){return T},set warnHtmlMessage(p){T=p,m.warnHtmlMessage=p},get escapeParameter(){return k},set escapeParameter(p){k=p,m.escapeParameter=p},t:Hi,rt:ba,d:Aa,n:va,te:Ea,tm:Ra,getLocaleMessage:Wi,setLocaleMessage:Oa,mergeLocaleMessage:Pa,getDateTimeFormat:Na,setDateTimeFormat:Ba,mergeDateTimeFormat:Ua,getNumberFormat:Va,setNumberFormat:Ha,mergeNumberFormat:Wa,getPostTranslationHandler:ft,setPostTranslationHandler:mt,getMissingHandler:Kt,setMissingHandler:Sa,[ai]:La,[si]:Ia,[oi]:Ma,[Oo]:Fa,[fn]:e.__injectWithOption}}var ui={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};re({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>ne(e)||!isNaN(e)}},ui);function No({slots:e},t){return t.length===1&&t[0]==="default"?e.default?e.default():[]:t.reduce((i,o)=>{let a=e[o];return a&&(i[o]=a()),i},{})}function gn(e,t,i,o){let{slots:a,attrs:s}=t;return()=>{let r={part:!0},l={};e.locale&&(r.locale=e.locale),S(e.format)?r.key=e.format:oe(e.format)&&(S(e.format.key)&&(r.key=e.format.key),l=Object.keys(e.format).reduce((d,y)=>i.includes(y)?re({},d,{[y]:e.format[y]}):d,{}));let c=o(e.value,r,l),u=[r.key];ee(c)?u=c.map((d,y)=>{let x=a[d.type];return x?x({[d.type]:d.value,index:y,parts:c}):[d.value]}):S(c)&&(u=[c]);let f=re({},s);return S(e.tag)?(0,A.h)(e.tag,f,u):oe(e.tag)?(0,A.h)(e.tag,f,u):(0,A.h)(A.Fragment,f,u)}}var Bo=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"];re({value:{type:Number,required:!0},format:{type:[String,Object]}},ui);var Uo=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"];re({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},ui);function hi(e={}){let t=(0,A.getCurrentInstance)();if(t==null)throw Ee(16);if(!t.appContext.app.__VUE_I18N_SYMBOL__)throw Ee(17);let i=(0,A.inject)(t.appContext.app.__VUE_I18N_SYMBOL__);if(!i)throw Ee(22);let o=i.mode==="composition"?i.global:i.global.__composer,a=At(e)?"__i18n"in t.type?"local":"global":e.useScope?e.useScope:"local";if(a==="global"){let l=oe(e.messages)?e.messages:{};"__i18nGlobal"in t.type&&(l=mn(o.locale.value,{messages:l,__i18n:t.type.__i18nGlobal}));let c=Object.keys(l);if(c.length&&c.forEach(u=>{o.mergeLocaleMessage(u,l[u])}),oe(e.datetimeFormats)){let u=Object.keys(e.datetimeFormats);u.length&&u.forEach(f=>{o.mergeDateTimeFormat(f,e.datetimeFormats[f])})}if(oe(e.numberFormats)){let u=Object.keys(e.numberFormats);u.length&&u.forEach(f=>{o.mergeNumberFormat(f,e.numberFormats[f])})}return o}if(a==="parent"){let l=Vo(i,t,e.__useComponent);return l==null&&(l=o),l}if(i.mode==="legacy")throw Ee(18);let s=i,r=s.__getInstance(t);if(r==null){let l=t.type,c=re({},e);l.__i18n&&(c.__i18n=l.__i18n),o&&(c.__root=o),r=Po(c),Ho(s,t),s.__setInstance(t,r)}return r}function Vo(e,t,i=!1){let o=null,a=t.root,s=t.parent;for(;s!=null;){let r=e;if(e.mode==="composition")o=r.__getInstance(s);else{let l=r.__getInstance(s);l!=null&&(o=l.__composer),i&&o&&!o[fn]&&(o=null)}if(o!=null||a===s)break;s=s.parent}return o}function Ho(e,t,i){(0,A.onMounted)(()=>{},t),(0,A.onUnmounted)(()=>{e.__deleteInstance(t)},t)}function j(e,t,i=!1,o=null){let a=di(e,i);o?uni.setStorage({key:a,data:t,success:o}):uni.setStorageSync(a,t)}function z(e,t=!1,i=null){let o=di(e,t);if(i)uni.getStorage({key:o,success:i});else return uni.getStorageSync(o)}function je(e,t=!1){uni.removeStorage({key:di(e,t)})}function di(e,t){return t?`_azb_${e}`:`mzb_${e}`}function ze(e,t,i){let o=i;typeof i=="undefined"&&(o=getApp().globalData.uid),j(e+"_"+o,t)}function Re(e,t){let i=t;return typeof t=="undefined"&&(i=getApp().globalData.uid),z(e+"_"+i)}function _(e){return typeof e=="undefined"||e==null||e==""}function pi(e){return e===""||e===null}var Se=new Promise(()=>{});function Wo(e,t,i=""){if(_(e))return"";let o=[];for(let a in e)o.push(a+"="+e[a]);return i+o.join(t)}function $e(e){return typeof e=="number"?e+"":typeof e=="boolean"?e?"true":"false":_(e)?"null":typeof e=="object"?JSON.stringify(e):e}function _n(e,t){let i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in i)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length==1?i[o]:("00"+i[o]).substr((""+i[o]).length)));return t}function wn(e,t=18){if(_(e))return"";let i=new Date(Date.parse(e.replace(/-/g,"/"))),o=Math.ceil((new Date().getTime()-i)/31536e6),a=o>1?o-1:o;return a<t?t:a}function xt(e,t=!1){if(_(e)||e<0||isNaN(e))return t?"00:00:00":"00:00";var i=0,o=0;e>0&&e<10?e="0"+parseInt(e):e<=0?e="00":e>=60&&(i=parseInt(e/60)<10?"0"+parseInt(e/60):parseInt(e/60),e=parseInt(e%60)<10?"0"+parseInt(e%60):parseInt(e%60),i>60&&(o=parseInt(i/60)<10?"0"+parseInt(i/60):parseInt(i/60),i=parseInt(i%60)<10?"0"+parseInt(i%60):parseInt(i%60)));var a;return o>0?a=o+":"+i+":"+e:i>0?(a=i+":"+e,t&&(a="00:"+a)):(a="00:"+e,t&&(a="00:"+a)),a}function xe(e){try{let t=JSON.parse(e);if(typeof t=="object")return t}catch(t){}return!1}var Jt={};function yn(e,t=500,i="throttle"){let o=e.name;_(o)&&(o=i),!Jt[o]&&(Jt[o]=!0,e(),setTimeout(function(){Jt[o]=""},t))}function kt(e){if(!e)return"";let t=JSON.stringify(e);return(typeof t!="string"||t=="{}")&&(t=e.toString()),t}function $o(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var yt={LEVEL_34:34,LEVEL_33:33,LEVEL_29:29};var jo={en:{title:"English",language:"en",code:"en-US"}};function ue(e){return weex.requireModule(e)}function C(e,t,...i){uni.__log__?uni.__log__(e,t,...i):console[e].apply(console,[...i,t])}function b(e,t){return typeof e=="string"?t:e}var zo={INIT:1,OPEN:2,CALLBACK:3,SOCKET:4,LOGIN:5};var bt={DEFAULT:1e4,FAIL:0,SUCCESS:1,DISCONNECT:6,RECONNECT:7},Go={INIT:"init",APP_SHOW:"app_show",TAB_SHOW:"tab_show",MSG_INDEX_REFRESH:"msg_index_refresh",STOP_TAKING_RECOVERY:"stop_taking_recovery",CATCH_MSG_SYNC:"sync_catch",API_CALL_BACK:"api_call_back",RECONNECT_LISTENER:"reconnect_listener",RECONNECT_LOCAL:"reconnect_local"},me={emailLogin:"/pagesLogin/email-login",forgetPwd:"/pagesLogin/forget-pwd",signUp:"/pagesLogin/sign-up",confirmSignUp:"/pagesLogin/confirm-sign-up",usageInstructionsPopup:"/pagesDialog/usage-instructions-popup",releaseConch:"/pagesPub/conch/release-conch",msgSendMediaLimit:"/pagesDialog/msg-send-media-limit",userHome:"/pagesPub/user-home/user-home",reportUser:"/pagesReport/index",myConch:"/pagesPub/conch/my-conch",blockList:"/pagesPub/block/block-list",accountSettings:"/pagesPub/account-settings/account-settings",bindNewEmail:"/pagesPub/account-settings/bind-new-email",settings:"/pagesPub/settings/settings",feedback:"/pagesPub/settings/feedback",aboutUs:"/pagesPub/settings/about-us",changePassword:"/pagesPub/account-settings/change-password",catchConch:"/pagesPub/conch/catch-conch",buyVip:"/pagesPub/buyVip/vip",coinDetail:"/pagesPub/coin-detail/coin-detail",editProfile:"/pagesPub/edit-profile/edit-profile",buyCoins:"/pagesPub/buyCoins/coins",ageDialog:"/pagesDialog/age-dialog",sendVideoTip:"/pagesDialog/send-video-tip",reportDialog:"/pagesDialog/report-dialog",chooseCountry:"/pagesDialog/choose-country",filterSex:"/pagesPub/filter-sex/filter-sex",buyVipDialog:"/pagesPub/buy-vip-dialog/buy-vip-dialog",authenticationDialog:"/pagesPub/authentication-dialog/authentication-dialog",faceAuthentication:"/pagesPub/authentication-dialog/face-authentication",topUpDialog:"/pagesPub/top-up-dialog/top-up-dialog",callRecords:"/pagesPub/call-records/call-records",friendList:"/pagesPub/user-home/friend-list",notify:"/pagesPub/notify/notify"};function Cn(e,t){let i=me[e];return i||(i=e),i+Wo(t,"&","?")}function Oe(e,t=null,i=null,o=!1){let a=Cn(e,t),s={url:a,fail:r=>{C("error","at common/route.js:58",`\u6253\u5F00\u9875\u9762\u5931\u8D25${a} ${JSON.stringify(r)}`)}};o&&(s=Object.assign(s,o)),i!=null&&(s.events=i),uni.navigateTo(s)}function Y(e,t,i,o,a=null){let r={url:Cn(e,t),success(l){l.eventChannel.emit(i,o)}};a!=null&&(r.events=a),uni.navigateTo(r)}function Lt(e=1,t="",i="",o){let a={delta:e,complete:()=>{typeof o=="function"&&o()}};t&&(a.animationType=t),i&&(a.animationDuration=i),uni.navigateBack(a)}function fi(){let e=[],t=getCurrentPages();for(let i=0,o=t.length;i<o;i++){let a=t[i].$page;e.push(a.path)}return e}function Tn(){let e=[],t=getCurrentPages();for(let i=0,o=t.length;i<o;i++){let a=t[i].$page;e.push(a)}return e}function mi(e="path"){let t=getCurrentPages(),i=t[t.length-1];if(!i)return"";let o=i.$page;return o?o[e]:""}function Sn(e,t=null,i=null){let a={uid:typeof e=="object"?e.uid:e};i&&(a=Object.assign(a,i)),Y("/pagesMsg/chat/index",a,"priData",{user:e,extra:t})}function gi(e){let t=1,i=getCurrentPages();for(let o=0,a=i.length;o<a;o++)if(i[o].$page.path==e)return i.length-o;return t}var _i={DB:"db",MESSAGE:"message",AVATAR:"avatar",REPORT:"report",FEEDBACK:"feedback",ALBUM:"album",CONCH:"release"},Ge={PHOTO:1,VIDEO:2,VOICE:3,TXT:4};function bn(e){function t(r,l,c){for(;0<c--;)r.push(l)}function i(r,l){return r<<l|r>>>32-l}function o(r,l,c){return r^l^c}function a(r,l){var c=(l&65535)+(r&65535),u=(l>>>16)+(r>>>16)+(c>>>16);return(u&65535)<<16|c&65535}var s="0123456789abcdef";return function(r){for(var l=[],c=r.length*4,u,f=0;f<c;f++)u=r[f>>2]>>(3-f%4)*8,l.push(s.charAt(u>>4&15)+s.charAt(u&15));return l.join("")}(function(r,l){var c,u,f,d,y,x=r.length,R=1732584193,E=4023233417,T=2562383102,k=271733878,L=3285377520,N=[];t(N,1518500249,20),t(N,1859775393,20),t(N,2400959708,20),t(N,3395469782,20),r[l>>5]|=128<<24-l%32,r[(l+65>>9<<4)+15]=l;for(var m=0;m<x;m+=16){c=R,u=E,f=T,d=k,y=L;for(var P=0,se=[];P<80;P++){se[P]=P<16?r[P+m]:i(se[P-3]^se[P-8]^se[P-14]^se[P-16],1);var B=function(ce,pe,Ce,pt,ft){var mt=(ft&65535)+(ce&65535)+(pe&65535)+(Ce&65535)+(pt&65535),Kt=(ft>>>16)+(ce>>>16)+(pe>>>16)+(Ce>>>16)+(pt>>>16)+(mt>>>16);return(Kt&65535)<<16|mt&65535}(P<20?function(ce,pe,Ce){return ce&pe^~ce&Ce}(u,f,d):P<40?o(u,f,d):P<60?function(ce,pe,Ce){return ce&pe^ce&Ce^pe&Ce}(u,f,d):o(u,f,d),y,N[P],se[P],i(c,5));y=d,d=f,f=i(u,30),u=c,c=B}R=a(R,c),E=a(E,u),T=a(T,f),k=a(k,d),L=a(L,y)}return[R,E,T,k,L]}(function(r){for(var l=[],c=255,u=r.length*8,f=0;f<u;f+=8)l[f>>5]|=(r.charCodeAt(f/8)&c)<<24-f%32;return l}(e).slice(),e.length*8))}function Pe(e,t,i=!0){return vn(getApp().globalData.ossPicPath,e,t,i)}function It(e,t,i=!0){return vn(getApp().globalData.ossPath,e,t,i)}function An(e){if(_(e)||e.startsWith("http"))return;let i=`img_${bn(e)}`,o=z(i);je(i),o&&uni.removeSavedFile({filePath:o})}function vn(e,t,i,o=!0){if(_(t))return"";if(t.startsWith("http")||t.startsWith("file://"))return t;if(t.startsWith("/var/mobile/"))return"file://"+t;if(t.startsWith("/storage/"))return t;let s=`img_${bn(t)}`,r=z(s);if(r){let c={filePath:r,fail(u){Ko(`\u7F13\u5B58\u68C0\u6D4B\u5931\u8D25${t}`,u),je(s),typeof i=="function"&&i(e+t)},success(u){}};return typeof i=="function"&&(c.success=function(){i(r)}),uni.getFileInfo(c),r}let l=e+t;return getApp().globalData.picCacheObj[s]||(getApp().globalData.picCacheObj[s]=1,typeof i=="function"&&!o&&i(l),hs(l).then(c=>{j(s,c),typeof i=="function"&&o&&i(c),delete getApp().globalData.picCacheObj[s]}).catch(()=>{})),l}function Ko(e,t){C("error","at common/cache.js:118",`cache ${e}`,t)}var wi={M_TEXT:1,M_VOICE:2,M_IMG:3,M_GIFT:5,M_NOTICE:6,M_CALL:8,M_RECOMMEND_USER:11,M_RECOMMEND_CLUB:12,M_VIDEO:4,M_GIFT_ASK:21,M_NOTICE_SYS:22,M_EXPRESSION:23,M_LETTER:24,M_PAID_PHOTO:25,M_PAID_VIDEO:26,M_MATCH_SUCCESS:27,M_AI_ISSUE_GUIDE:28,M_AI_ISSUE_QUESTION:29,M_SERVICE_RATING:30,M_N_DEF:100,M_N_AUDIT:103,M_N_VIP:104,M_N_RECHARGE:105,M_N_CLUB_AUDIT_REJECT:106,M_N_CLUB_AUDIT:107,M_N_GREETING_AUDIT:115,M_N_SYS_NOTICE:116,M_N_CALL:117,M_N_COOPERATE:118,M_N_WITHDRAW:119,M_N_REPORT_AUDIT:120,M_N_IMG:121,M_N_PRIVACY_CALL:122,M_N_WITHDRAW_NOTICE:123,M_N_WITH_MEDIA:124,M_N_REPORT_RESULT:144,M_N_COMPLAINT_NOTICE:145,M_N_MONITOR:202,M_C_RECHARGE:1001,M_C_CALL_TEXT_AUDIO:1002,SYSTEM_ID:1e7};function yi(e,t=!0){return e.startsWith("http")?e:e.startsWith("file://")?t?e:e.replace("file://",""):e.startsWith("/storage/")||e.startsWith("/var/mobile/")?t?`file://${e}`:e:e.startsWith("_doc/uniapp")?t?e:plus.io.convertLocalFileSystemURL(e):e.indexOf("apps/__UNI")!=-1?e:!1}function Mt(e,t="small_avatar",i=1){if(e[t])return e[t];let o=t=="small_avatar"?"avatar":"small_avatar";return e[o]}function Ci(e){getApp().globalData.pluginTool.screenshotStop({is_stop:e})}function xn(e){getApp().globalData.pluginTool.startScreenShotMonitor({},t=>{_(t)||(t.type==1?e(1):e(2))})}function kn(){getApp().globalData.pluginTool.stopScreenShotMonitor({})}function Ln(){let e=mi();getApp().globalData.pluginTool.addScreenShield({route:e},t=>{})}function In(e){let t=mi();getApp().globalData.pluginTool.removeScreenShield({route:t},i=>{typeof e=="function"&&e(i)})}function Mn(e){return new Promise(t=>{getApp().globalData.pluginTool.permissionRequest({permission:e},i=>{t(i)})})}function Yo(e){return getApp().globalData.pluginTool.permissionStatusSync({permission:e})}function qo(e){return getApp().globalData.pluginTool.permissionOpenSetting({permission:e})}function Jo(){return new Promise(e=>{getApp().globalData.pluginTool.locationAuthorizationStatus({},t=>{e(t)})})}var V={ALBUM:1,CAMERA:2,VIDEO:3,MICROPHONE:4,NOTIFY:5,LOCATION:6,DRAW_OVERLAYS:7},$={GRANTED:1,DENIED:0,DENIED_ALWAYS:-1};function Ti(e,t=!0,i=!0){return new Promise(o=>{let a=function(s){s==$.GRANTED?o(!0):(s==$.DENIED||s==$.DENIED_ALWAYS&&i&&Ft(e),o(!1))};if(D.isAndroid)if(e==V.NOTIFY)ts().then(a);else{let s=Et(e);Mn(s).then(a)}else cs(e)(t).then(a)})}function Xo(e){D.isAndroid?Qo(Et(e)):is()}var Xt=!1;function Ft(e,t){Xt||(uni.showModal({title:h("tips"),content:us(e),showCancel:!0,cancelText:h("cancel"),confirmText:h("toTurnOn"),complete(i){Xt=!1,i.confirm?(Xo(e),typeof t=="function"&&t(!0)):i.cancel&&typeof t=="function"&&t(!1)}}),Xt=!0)}function Zo(e){let t=Et(e);return Yo(t)}function Qo(e){if(_(e)){es();return}qo(e)}function es(){var e=plus.android.importClass("android.content.Intent"),t=plus.android.importClass("android.provider.Settings"),i=plus.android.importClass("android.net.Uri"),o=plus.android.runtimeMainActivity(),a=new e;a.setAction(t.ACTION_APPLICATION_DETAILS_SETTINGS);var s=i.fromParts("package",o.getPackageName(),null);a.setData(s),o.startActivity(a)}function Et(e){switch(e){case V.LOCATION:return["android.permission.ACCESS_FINE_LOCATION","android.permission.ACCESS_COARSE_LOCATION"];case V.ALBUM:case V.VIDEO:let t=["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO"];return getApp().globalData.sys.androidAPILevel>=yt.LEVEL_34&&t.push("android.permission.READ_MEDIA_VISUAL_USER_SELECTED"),t;case V.MICROPHONE:return getApp().globalData.sys.androidAPILevel<yt.LEVEL_29?["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO","android.permission.RECORD_AUDIO"]:["android.permission.RECORD_AUDIO"];case V.CAMERA:return getApp().globalData.sys.androidAPILevel<yt.LEVEL_29?["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO","android.permission.CAMERA"]:["android.permission.CAMERA"];case V.NOTIFY:return["android.permission.POST_NOTIFICATIONS"]}}function ts(){return new Promise(e=>{if(getApp().globalData.sys.androidAPILevel>=yt.LEVEL_33)Mn(Et(V.NOTIFY)).then(t=>{e(t)});else{let t=Zo(V.NOTIFY);e(t?$.GRANTED:$.DENIED_ALWAYS)}})}function is(){var e=plus.ios.import("UIApplication"),t=e.sharedApplication(),i=plus.ios.import("NSURL"),o=i.URLWithString("app-settings:");t.openURL(o),plus.ios.deleteObject(o),plus.ios.deleteObject(i),plus.ios.deleteObject(t)}function ns(){return new Promise(e=>{Jo().then(t=>{e(t==1?$.GRANTED:$.DENIED_ALWAYS)})})}function as(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),o=i.authorizationStatusForMediaType("soun");o==3?(plus.ios.deleteObject(i),t($.GRANTED)):o==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","soun",function(){if(e){let a=i.authorizationStatusForMediaType("soun");plus.ios.deleteObject(i),t(a==3?$.GRANTED:$.DENIED)}else plus.ios.deleteObject(i),t($.DENIED)}):(plus.ios.deleteObject(i),t($.DENIED_ALWAYS))})}function os(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),o=i.authorizationStatusForMediaType("vide");o==3?(plus.ios.deleteObject(i),t($.GRANTED)):o==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","vide",function(){if(e){let a=i.authorizationStatusForMediaType("vide");plus.ios.deleteObject(i),t(a==3?$.GRANTED:$.DENIED)}else plus.ios.deleteObject(i),t($.DENIED)}):(plus.ios.deleteObject(i),t($.DENIED_ALWAYS))})}function ss(e){return new Promise(t=>{let i=plus.ios.import("PHPhotoLibrary"),o=i.authorizationStatus();o==3||o==4?(plus.ios.deleteObject(i),t($.GRANTED)):o==0?plus.ios.invoke("PHPhotoLibrary","requestAuthorization:",function(){if(e){let a=i.authorizationStatus();plus.ios.deleteObject(i),t(a==3||a==4?$.GRANTED:$.DENIED)}else plus.ios.deleteObject(i),t($.DENIED)}):(plus.ios.deleteObject(i),t($.DENIED_ALWAYS))})}function rs(){return new Promise(e=>{let t=plus.ios.invoke("UNUserNotificationCenter","currentNotificationCenter");plus.ios.invoke(t,"requestAuthorizationWithOptions:completionHandler:",7,function(i){plus.ios.deleteObject(t);let o=ls();e(o?$.GRANTED:$.DENIED_ALWAYS)})})}function ls(){var e=!1,t=plus.ios.import("UIApplication"),i=t.sharedApplication(),o=0;if(i.currentUserNotificationSettings){var a=i.currentUserNotificationSettings();o=a.plusGetAttribute("types"),e=o!=0,plus.ios.deleteObject(a)}else o=i.enabledRemoteNotificationTypes(),e=o!=0;return plus.ios.deleteObject(i),plus.ios.deleteObject(t),e}function cs(e){switch(e){case V.LOCATION:return ns;case V.ALBUM:case V.VIDEO:return ss;case V.MICROPHONE:return as;case V.CAMERA:return os;case V.NOTIFY:return rs}}function us(e){let t=getApp().globalData.appInfo;return e==V.LOCATION?h("openLocationPerTip",{appName:t.name}):e==V.ALBUM||e==V.VIDEO?h("openAlbumPerTip",{appName:t.name}):e==V.MICROPHONE?h("openMicrophonePerTip",{appName:t.name}):e==V.NOTIFY?h("msg.openNoticePerTips",{appName:t.name}):e==V.CAMERA?h("openCameraPerTip",{appName:t.name}):""}function Fn(){return getApp().globalData.pluginMqtt.checkStatusSync()?bt.SUCCESS:bt.FAIL}function Ke(e,t){getApp().globalData.s.commit("setPubValue",{name:e,value:t})}function hs(e){return new Promise((t,i)=>{uni.downloadFile({url:e}).then(o=>!o||o.statusCode!=200||!o.tempFilePath?(i(),new Promise(()=>{})):uni.saveFile({tempFilePath:o.tempFilePath})).then(o=>{!o||!o.savedFilePath?i():t(o.savedFilePath)}).catch(o=>{C("error","at common/common.js:72","downloadFile error "+JSON.stringify(o))})})}function Si(e,t,i){return new Promise(o=>{let a=t?e:plus.io.convertLocalFileSystemURL(e);plus.io.resolveLocalFileSystemURL(a,function(s){s.isFile?s.remove():s.isDirectory&&s.removeRecursively(),o()},function(s){C("error","at common/common.js:88","----> delFile fail "+JSON.stringify(s)),i&&o()})})}function En(e,t="md5"){return new Promise(i=>{uni.getFileInfo({filePath:e,digestAlgorithm:t,success(o){i(o)},fail(){i(null)}})})}function ln(e,t){t?plus.runtime.openWeb(e):plus.runtime.openURL(e)}function be(e,t,i,o=h("confirm")){ge(e,t,i,"",o,!1)}function ds(e){return["Si, desbloquear","Reenviar Completar"].indexOf(e)!=-1}function ge(e,t,i,o,a=h("confirm"),s=!0,r=h("cancel"),l=!1){let c=!1;if(!D.isAndroid&&(c=ds(a),c)){let u=a;a=r,r=u}uni.showModal({title:e,content:t,showCancel:s,cancelText:r,confirmText:a,editable:l,success(u){u.confirm?c?typeof o=="function"&&o():typeof i=="function"&&i(u):u.cancel&&(c?typeof i=="function"&&i(u):typeof o=="function"&&o())}})}function he(e,t="none",i="center"){uni.showToast({title:e,duration:2e3,icon:t,position:i})}var Zt=0;function ps(e){return ms(fs(gs(e)))}function fs(e){return ws(ys(_s(e),e.length*8))}function ms(e){try{}catch(s){Zt=0}for(var t=Zt?"0123456789ABCDEF":"0123456789abcdef",i="",o,a=0;a<e.length;a++)o=e.charCodeAt(a),i+=t.charAt(o>>>4&15)+t.charAt(o&15);return i}function gs(e){for(var t="",i=-1,o,a;++i<e.length;)o=e.charCodeAt(i),a=i+1<e.length?e.charCodeAt(i+1):0,55296<=o&&o<=56319&&56320<=a&&a<=57343&&(o=65536+((o&1023)<<10)+(a&1023),i++),o<=127?t+=String.fromCharCode(o):o<=2047?t+=String.fromCharCode(192|o>>>6&31,128|o&63):o<=65535?t+=String.fromCharCode(224|o>>>12&15,128|o>>>6&63,128|o&63):o<=2097151&&(t+=String.fromCharCode(240|o>>>18&7,128|o>>>12&63,128|o>>>6&63,128|o&63));return t}function _s(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<e.length*8;i+=8)t[i>>5]|=(e.charCodeAt(i/8)&255)<<i%32;return t}function ws(e){for(var t="",i=0;i<e.length*32;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function ys(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,o=-271733879,a=-1732584194,s=271733878,r=0;r<e.length;r+=16){var l=i,c=o,u=a,f=s;i=J(i,o,a,s,e[r+0],7,-680876936),s=J(s,i,o,a,e[r+1],12,-389564586),a=J(a,s,i,o,e[r+2],17,606105819),o=J(o,a,s,i,e[r+3],22,-1044525330),i=J(i,o,a,s,e[r+4],7,-176418897),s=J(s,i,o,a,e[r+5],12,1200080426),a=J(a,s,i,o,e[r+6],17,-1473231341),o=J(o,a,s,i,e[r+7],22,-45705983),i=J(i,o,a,s,e[r+8],7,1770035416),s=J(s,i,o,a,e[r+9],12,-1958414417),a=J(a,s,i,o,e[r+10],17,-42063),o=J(o,a,s,i,e[r+11],22,-1990404162),i=J(i,o,a,s,e[r+12],7,1804603682),s=J(s,i,o,a,e[r+13],12,-40341101),a=J(a,s,i,o,e[r+14],17,-1502002290),o=J(o,a,s,i,e[r+15],22,1236535329),i=X(i,o,a,s,e[r+1],5,-165796510),s=X(s,i,o,a,e[r+6],9,-1069501632),a=X(a,s,i,o,e[r+11],14,643717713),o=X(o,a,s,i,e[r+0],20,-373897302),i=X(i,o,a,s,e[r+5],5,-701558691),s=X(s,i,o,a,e[r+10],9,38016083),a=X(a,s,i,o,e[r+15],14,-660478335),o=X(o,a,s,i,e[r+4],20,-405537848),i=X(i,o,a,s,e[r+9],5,568446438),s=X(s,i,o,a,e[r+14],9,-1019803690),a=X(a,s,i,o,e[r+3],14,-187363961),o=X(o,a,s,i,e[r+8],20,1163531501),i=X(i,o,a,s,e[r+13],5,-1444681467),s=X(s,i,o,a,e[r+2],9,-51403784),a=X(a,s,i,o,e[r+7],14,1735328473),o=X(o,a,s,i,e[r+12],20,-1926607734),i=Z(i,o,a,s,e[r+5],4,-378558),s=Z(s,i,o,a,e[r+8],11,-2022574463),a=Z(a,s,i,o,e[r+11],16,1839030562),o=Z(o,a,s,i,e[r+14],23,-35309556),i=Z(i,o,a,s,e[r+1],4,-1530992060),s=Z(s,i,o,a,e[r+4],11,1272893353),a=Z(a,s,i,o,e[r+7],16,-155497632),o=Z(o,a,s,i,e[r+10],23,-1094730640),i=Z(i,o,a,s,e[r+13],4,681279174),s=Z(s,i,o,a,e[r+0],11,-358537222),a=Z(a,s,i,o,e[r+3],16,-722521979),o=Z(o,a,s,i,e[r+6],23,76029189),i=Z(i,o,a,s,e[r+9],4,-640364487),s=Z(s,i,o,a,e[r+12],11,-421815835),a=Z(a,s,i,o,e[r+15],16,530742520),o=Z(o,a,s,i,e[r+2],23,-995338651),i=Q(i,o,a,s,e[r+0],6,-198630844),s=Q(s,i,o,a,e[r+7],10,1126891415),a=Q(a,s,i,o,e[r+14],15,-1416354905),o=Q(o,a,s,i,e[r+5],21,-57434055),i=Q(i,o,a,s,e[r+12],6,1700485571),s=Q(s,i,o,a,e[r+3],10,-1894986606),a=Q(a,s,i,o,e[r+10],15,-1051523),o=Q(o,a,s,i,e[r+1],21,-2054922799),i=Q(i,o,a,s,e[r+8],6,1873313359),s=Q(s,i,o,a,e[r+15],10,-30611744),a=Q(a,s,i,o,e[r+6],15,-1560198380),o=Q(o,a,s,i,e[r+13],21,1309151649),i=Q(i,o,a,s,e[r+4],6,-145523070),s=Q(s,i,o,a,e[r+11],10,-1120210379),a=Q(a,s,i,o,e[r+2],15,718787259),o=Q(o,a,s,i,e[r+9],21,-343485551),i=Le(i,l),o=Le(o,c),a=Le(a,u),s=Le(s,f)}return Array(i,o,a,s)}function Dt(e,t,i,o,a,s){return Le(Cs(Le(Le(t,e),Le(o,s)),a),i)}function J(e,t,i,o,a,s,r){return Dt(t&i|~t&o,e,t,a,s,r)}function X(e,t,i,o,a,s,r){return Dt(t&o|i&~o,e,t,a,s,r)}function Z(e,t,i,o,a,s,r){return Dt(t^i^o,e,t,a,s,r)}function Q(e,t,i,o,a,s,r){return Dt(i^(t|~o),e,t,a,s,r)}function Le(e,t){var i=(e&65535)+(t&65535),o=(e>>16)+(t>>16)+(i>>16);return o<<16|i&65535}function Cs(e,t){return e<<t|e>>>32-t}var ri={md5:function(e){return ps(e)}};function Ts(e,t){let i=getApp().globalData.s.state.AES.encrypt(t,e);return`${getApp().globalData.apiUaPrefix}${i}`}function cn(e){return ri.md5(`${getApp().globalData.channel}${e}${getApp().globalData.apiEncValue}`).substring(0,16)}var M={setToken(e){_(e)||Ke("pubToken",e)},isLogin(){let e=getApp().globalData.s.state;return!_(e.pubToken)&&e.pubUser.uid},isNoCompletedInfo(){let e=getApp().globalData.s.state;return!_(e.pubToken)&&e.pubUser.uid&&e.userStep==1},requestSign(e,t,i,o,a=!1){let s=getApp().globalData.desCodeStatus?_(getApp().globalData.desCodeVal)?0:1:0;return M.request(e,t,i,o,a,1,s)},request(e,t,i,o,a=!1){return new Promise((s,r)=>{var l,c,u;let f=!1;if(i)if(i=="refresh")f=!0;else{let L={mask:!0};typeof i=="string"&&(L.title=i),uni.showLoading(L)}let d=!1;try{d=getApp().globalData.s.state.pubToken}catch(L){C("error","at common/api.js:44","request token catch "+JSON.stringify(L))}_((l=getApp().globalData)==null?void 0:l.ua)&&(Qt(7,(c=getApp().globalData)==null?void 0:c.ua,typeof((u=getApp().globalData)==null?void 0:u.ua),t,e,d),getApp().initUaInfo());let y=getApp().globalData.ua,x,R=Ls(t),E={"content-type":"application/json"},T=getApp().globalData.apiHost,k;d&&getApp().globalData.uid!==0?(E.Authorization=`Bearer ${d}`,k=cn(getApp().globalData.uid)):k=cn(0),E.ua=Ts(y,k),x=getApp().globalData.s.state.AES.encrypt(k,JSON.stringify(R)),uni.request({url:T+e,method:"POST",header:E,data:x,dataType:"json",timeout:1e4,complete(L){if(i&&uni.hideLoading(),C("log","at common/api.js:78",`API - ${e} \xB7\xB7\xB7\xB7\xB7 ${JSON.stringify(t)} statusCode=${L==null?void 0:L.statusCode}`),L.header&&L.header["x-report-log"]&&Qt(L.header["x-report-log"],E.ua,y,x,e,d),L.statusCode==200){let N=L.data,m=getApp().globalData.s.state.AES.decrypt(k,N);if(m=xe(m),!m){o&&r(m),Qt(1,E.ua,y,x,e,d);return}if(m.data&&typeof m.data.callback=="object"&&(M.handleCallback(m.data.callback),a))return Se;if(m.ok===99)return getApp().loginOut(),Se;if(m.ok==-98)return ks(m.data),o&&r(m),Se;if(_(m.msg)||he(m.msg),m.ok>0){s(m);return}o&&r(m)}else{if(L.statusCode==401)return getApp().loginOut(),Se;if(f&&uni.stopPullDownRefresh(),o)r(L);else return Se}},fail(L){}})})},handleCallback(e){switch(e.func_name){case"alert":Ss(e.func_data);break;case"open":bs(e.func_data);break;case"vip_alert":Y("/pages/vip/vip-dialog",null,"vipDialogData",e.func_data);break;case"recharge_alert":let t={actionType:e.func_data.action_type,diffCoin:e.func_data.diff_coin||0};t.order_source=typeof e.func_data.order_source=="undefined"?0:e.func_data.order_source,t.click_type=typeof e.func_data.click_type=="undefined"?0:e.func_data.click_type,Y("/pages/coin/coin-dialog",t,"coinDialogData",e.func_data);break;case"close":Lt();break;case"banned_alert":let i=e.func_data.exp_time;if(parseInt(new Date().getTime()/1e3)>i)return;break;case"reconnect_mqtt":getApp().socketReconnect(Go.API_CALL_BACK,e.func_data);break;case"reload_route":getApp().handleSecret(e.func_data,zo.CALLBACK,{});break;case"event":As(e.func_data);break;case"api":vs(e.func_data);break;case"sensitive_alert":Y("/pagesDialog/sensitive-check",null,"sensitiveData",e.func_data),uni.hideKeyboard();break;case"free_coins":Y("/pagesDialog/coins-free",{coin:e.func_data.free_coins},"coinsFree",{},{});break}},accessLog(e,t){this.request("/other/access-log",{api_name:e,content:$e(t)})},accessLogExtra(e,t,i){let o=`${$e(t)} ${$e(i)}`;this.request("/other/access-log",{api_name:e,content:o})},accessLogApi(e,t,i,o){let a=`url:${t} p:${JSON.stringify(i)} res ${$e(o)}`;M.accessLog(e,a)}};function Ss(e){let t=e.enter_func,i=e.cancel_title,o=e.enter_title,a=e.cancel_func,s=!_(i);uni.hideKeyboard(),uni.showModal({title:e.title,content:e.msg,showCancel:s,cancelText:s?i:h("cancel"),confirmText:o||h("ok"),complete(r){r.confirm?_(t)||M.handleCallback(t):r.cancel&&(_(a)||M.handleCallback(a))}})}function bs(e){let t=e.page_name,i=e.data;t=="inside_web"?ln(i.route,!0):t=="safari"?ln(i.route,!1):t=="web"?Oe(i.route):t=="native"&&xs(i.route)}function As(e){let t=e.event_key;if(_(t))return;let i=e.data;_(i)?uni.$emit(t):uni.$emit(t,i)}function vs(e){if(e.type==1){let i={user_info:{is_rest:0}};M.request("/user/update-info",i,!0).then(()=>{getApp().pubUser.is_rest=0,be(h("tips"),h("anchorTurnedOffRest"),"",h("gotIt"))})}}function xs(e){return new Function("return "+e)()}function ks(e){fi().indexOf("/pagesDialog/stop_taking")==-1&&(getApp().globalData.appStopTaking=!0,getApp().socketDisconnect(),Y("/pagesDialog/stop_taking",{},"stopTakingData",e))}function Ls(e){try{_(e)&&(e={}),e.times=new Date().getTime();let t=Object.keys(e).sort(),i={};for(let a=0,s=t.length;a<s;a++)i[t[a]]=e[t[a]];let o=Dn(i).substr(1);return i.sign=ri.md5(`${ri.md5(o)}${getApp().globalData.apiSignValue}`),i}catch(t){return e}}function Dn(e,t){if(e==null||typeof e=="number"&&isNaN(e))return"";try{let i="",o=typeof e;if(o=="string"||o=="number")i+="&"+t+"="+$o(e);else if(o=="boolean")i+="&"+t+"="+(e?1:0);else for(let a in e){let s=t==null?a:t+Is(a);i+=Dn(e[a],s)}return i}catch(i){return""}}function Is(e){return`${encodeURIComponent("[")}${e}${encodeURIComponent("]")}`}function Qt(e,t,i,o,a,s){let r={type:e,ua:t,origin_ua:i,params:o,api:a,token:s},l=!1;try{l=getApp().globalData.s.state.pubToken}catch(u){C("error","at common/api.js:314","request token catch "+JSON.stringify(u))}let c={"content-type":"application/json",ua:getApp().globalData.ua};l&&(c.Authorization=`Bearer ${l}`),C("error","at common/api.js:322","-----> api sign enc fail ",r),uni.request({url:`${getApp().globalData.apiHost}/log/report`,method:"POST",header:c,data:r,dataType:"json",timeout:1e4})}function Rn(e=!0){let t=z("language_app_key");if(!e||!pi(t))return t;let i=Rt(!1),o=jo[i];return _(o)?"en":i}function Rt(e){let t=uni.getAppBaseInfo().language;return _(t)?e?"en-US":"en":e?t:t.split("-")[0]}function On(){return z("call_automatic_source_language")||Rn()}function Pn(e){j("call_automatic_source_language",e)}function Nn(e){j("call_automatic_open",e)}function bi(e){getApp().globalData.translateAuto!=e&&(e&&!z("translate_auto_open_first")&&(uni.showModal({title:h("tips"),content:h("msg.translateAutoOpenMsgTips"),showCancel:!1,confirmText:h("gotIt")}),j("translate_auto_open_first",1)),j("translate_auto_close",e?0:1),getApp().globalData.translateAuto=e,uni.$emit("event_translate_auto_change",e),M.request("/user/sync-permission",{auto_translate:e?1:0}))}function Bn(e){return getApp().globalData.translateAuto?getApp().globalData.translateKey!=e:!1}function Ye(){uni.showModal({title:h("tips"),content:h("msg.translateAutoCloseTips"),showCancel:!0,cancelText:h("cancel"),confirmText:h("turnOff"),success(e){e.confirm&&bi(!1)}})}function h(...e){return getApp().globalData.s.state.pubI18n(...e)}function Un(){return Rt()||Rn()}var v=(e,t)=>{let i=e.__vccOpts||e;for(let[o,a]of t)i[o]=a;return i};var G=ve(Te()),Ms={"l-img":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"place-img":{"":{position:"absolute",top:0,left:0}},"text-place":{"":{color:"#999999",position:"absolute",bottom:0,textAlign:"center"}}},Fs={name:"LImg",emits:["click","onError","onLoad"],props:{src:{type:String,default:""},mode:{type:String,default:"aspectFill"},w:{type:String,default:"0"},h:{type:String,default:"0"},radius:{type:String,default:"0"},lazyLoad:{type:Boolean,default:!1},fade:{type:Boolean,default:!0},placeType:{type:[String,Number],default:0},placeW:{type:String,default:""},placeFontSize:{type:[String,Boolean],default:""},placeBottom:{type:String,default:""},border:{type:String,default:""},otherStyle:{type:Object,default(){return{}}},click:{type:Boolean,default:!0},isGif:{type:Boolean,default:!1},needStyle:{type:[String,Number],default:0},useCache:{type:Boolean,default:!1},fitWH:{type:String,default:""},isStatic:{type:Number,default:0},lImgStyle:{type:Object,default(){return{}}}},data(){return{errorCount:1,path:"",refresh:!0,darkDir:"",isLoad:!1,fitStr:""}},watch:{src(){this.isLoad=!1,this.path=this.parse()}},computed:{placeSrc(){return this.placeType==1||this.placeType==2?"/static/img_load_cupid.png":""},placeViewStyle(){let e={width:this.placeW,height:this.placeW,position:"relative"};return this.placeBottom&&(e.marginBottom=this.placeBottom),e},placeFontSizeVal(){return this.placeFontSize===!1?"":this.placeFontSize?this.placeFontSize:this.placeType==2?"24rpx":"16rpx"},borderStyle(){if(this.border=="")return{};let e={},t=this.border.split(" ");return e.borderWidth=t[0],e.borderStyle=t[1],e.borderColor=t[2],e},viewStyle(){let e={width:this.w,minWidth:this.w,height:this.h,minHeight:this.h};return this.setRadius(e)},imgStyle(){let e={width:this.w,height:this.h};return e=Object.assign(e,this.otherStyle),this.setRadius(e)},ossPathOriginal(){return this.isGif?getApp().globalData.ossPath:getApp().globalData.ossPicPath}},methods:{$str:h,clickImg(e){this.click&&this.$emit("click",e)},setRadius(e){let t=this.radius.split(" ");return t.length<=1?e.borderRadius=this.radius:(e.borderTopLeftRadius=t[0],e.borderTopRightRadius=t[1],e.borderBottomRightRadius=t[2],e.borderBottomLeftRadius=t[3]),e},onLoadError(){if(this.path){if(this.path.startsWith("http")){if(this.errorCount>2){this.isError=!0,this.$emit("onError");return}this.errorCount+=1,this.refresh=!1,setTimeout(()=>{this.refresh=!0},500);return}this.path=this.ossPathOriginal+this.darkDir+this.src,An(this.darkDir+this.src)}},onLoad(){this.isLoad=!0,this.$emit("onLoad")},parseSrcUrl(){return this.fitStr+this.darkDir+this.src},parse(){var e;if(this.isStatic)return this.src;let t;if(t=0,this.src.startsWith("/static"))return this.src;if((e=this.src)!=null&&e.startsWith("co/")){let i=this.src.slice(3),o=getApp().getFilePath(i);if(!_(o))return yi(o)}return this.useCache||t&&D.isAndroid?this.isGif?It(this.parseSrcUrl()):Pe(this.parseSrcUrl()):this.src.startsWith("file://")?this.src:this.src.startsWith("/var/mobile/")?"file://"+this.src:this.src.startsWith("/storage/")?this.src:this.ossPathOriginal+this.parseSrcUrl()}},created(){this.darkDir="",this.fitWH&&this.src.indexOf("fit-in")==-1&&(this.fitStr="fit-in/"+this.fitWH+"/"),this.path=this.parse()}};function Es(e,t,i,o,a,s){return(0,G.openBlock)(),(0,G.createElementBlock)("view",{class:"l-img",onClick:t[2]||(t[2]=(...r)=>s.clickImg&&s.clickImg(...r)),style:(0,G.normalizeStyle)([s.viewStyle,s.borderStyle,i.lImgStyle]),renderWhole:!0},[(0,G.createElementVNode)("view",{class:"l-img",style:(0,G.normalizeStyle)([{position:"relative"},s.viewStyle])},[i.placeType&&!a.isLoad?((0,G.openBlock)(),(0,G.createElementBlock)("view",{key:0,style:(0,G.normalizeStyle)(s.placeViewStyle)},[(0,G.createElementVNode)("u-image",{src:s.placeSrc,style:(0,G.normalizeStyle)({width:i.placeW,height:i.placeW})},null,12,["src"])],4)):(0,G.createCommentVNode)("",!0),a.refresh?((0,G.openBlock)(),(0,G.createElementBlock)("u-image",{key:1,onError:t[0]||(t[0]=(...r)=>s.onLoadError&&s.onLoadError(...r)),onLoad:t[1]||(t[1]=(...r)=>s.onLoad&&s.onLoad(...r)),src:a.path,mode:i.mode,lazyLoad:i.lazyLoad,fadeShow:i.fade,style:(0,G.normalizeStyle)([s.imgStyle,s.borderStyle]),class:"place-img"},null,44,["src","mode","lazyLoad","fadeShow"])):(0,G.createCommentVNode)("",!0)],4)],4)}var I=v(Fs,[["render",Es],["styles",[Ms]]]);var n=ve(Te());var Me=ve(Te());var Ds={id:"2852637",name:"uniui\u56FE\u6807\u5E93",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]},Rs="/static/uniicons.ttf",Os={"uni-icons":{"":{fontFamily:"uniicons",textDecoration:"none",textAlign:"center"}}},Ps=weex.requireModule("dom");Ps.addRule("fontFace",{fontFamily:"uniicons",src:"url('"+Rs+"')"});var Ns={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data(){return{icons:Ds.glyphs}},computed:{unicode(){let e=this.icons.find(t=>t.font_class===this.type);return e?unescape(`%u${e.unicode}`):""}},methods:{_onClick(e){this.$emit("click",e)}}};function Bs(e,t,i,o,a,s){return(0,Me.openBlock)(),(0,Me.createElementBlock)("u-text",{style:(0,Me.normalizeStyle)({color:i.color,"font-size":i.size}),class:"uni-icons",onClick:t[0]||(t[0]=(...r)=>s._onClick&&s._onClick(...r))},(0,Me.toDisplayString)(s.unicode),5)}var _e=v(Ns,[["render",Bs],["styles",[Os]]]);var F=ve(Te());var Us=ue("animation"),Ot=class{constructor(t,i){this.options=t,this.animation=uni.createAnimation(t),this.currentStepAnimates={},this.next=0,this.$=i}_nvuePushAnimates(t,i){let o=this.currentStepAnimates[this.next],a={};if(o?a=o:a={styles:{},config:{}},Hn.includes(t)){a.styles.transform||(a.styles.transform="");let s="";t==="rotate"&&(s="deg"),a.styles.transform+=`${t}(${i+s}) `}else a.styles[t]=`${i}`;this.currentStepAnimates[this.next]=a}_animateRun(t={},i={}){let o=this.$.$refs.ani.ref;if(o)return new Promise((a,s)=>{Us.transition(o,ke({styles:t},i),r=>{a()})})}_nvueNextAnimate(t,i=0,o){let a=t[i];if(a){let{styles:s,config:r}=a;this._animateRun(s,r).then(()=>{i+=1,this._nvueNextAnimate(t,i,o)})}else this.currentStepAnimates={},typeof o=="function"&&o(),this.isEnd=!0}step(t={}){return this.currentStepAnimates[this.next].config=Object.assign({},this.options,t),this.currentStepAnimates[this.next].styles.transformOrigin=this.currentStepAnimates[this.next].config.transformOrigin,this.next++,this}run(t){this.isEnd=!1,this.$.$refs.ani&&this.$.$refs.ani.ref&&(this._nvueNextAnimate(this.currentStepAnimates,0,t),this.next=0)}},Hn=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"],Vs=["opacity","backgroundColor"],Hs=["width","height","left","right","top","bottom"];Hn.concat(Vs,Hs).forEach(e=>{Ot.prototype[e]=function(...t){return this._nvuePushAnimates(e,t),this}});function Vn(e,t){if(t)return clearTimeout(t.timer),new Ot(e,t)}var Ws={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default(){return"fade"}},duration:{type:Number,default:300},styles:{type:Object,default(){return{}}},customClass:{type:String,default:""}},data(){return{isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}},watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e=He(ke({},this.styles),{"transition-duration":this.duration/1e3+"s"}),t="";for(let i in e){let o=this.toLine(i);t+=o+":"+e[i]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=Vn(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let i in e)try{typeof e[i]=="object"?this.animation[i](...e[i]):this.animation[i](e[i])}catch(o){C("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:139",`\u65B9\u6CD5 ${i} \u4E0D\u5B58\u5728`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);typeof e!="undefined"&&(this.opacity=e),this.transform=t,this.$nextTick(()=>{this.timer=setTimeout(()=>{this.animation=Vn(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})},20)})},close(e){this.animation&&this.tranfromInit(!0).step().run(()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:t,transform:i}=this.styleInit(!1);this.opacity=t||1,this.transform=i,this.$emit("change",{detail:this.isShow})})},styleInit(e){let t={transform:""},i=(o,a)=>{a==="fade"?t.opacity=this.animationType(o)[a]:t.transform+=this.animationType(o)[a]+" "};return typeof this.modeClass=="string"?i(e,this.modeClass):this.modeClass.forEach(o=>{i(e,o)}),t},tranfromInit(e){let t=(i,o)=>{let a=null;o==="fade"?a=i?0:1:(a=i?"-100%":"0",o==="zoom-in"&&(a=i?.8:1),o==="zoom-out"&&(a=i?1.2:1),o==="slide-right"&&(a=i?"100%":"0"),o==="slide-bottom"&&(a=i?"100%":"0")),this.animation[this.animationMode()[o]](a)};return typeof this.modeClass=="string"?t(e,this.modeClass):this.modeClass.forEach(i=>{t(e,i)}),this.animation},animationType(e){return{fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}},animationMode(){return{fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}},toLine(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}}};function $s(e,t,i,o,a,s){return a.isShow?((0,F.openBlock)(),(0,F.createElementBlock)("view",{key:0,ref:"ani",animation:a.animationData,class:(0,F.normalizeClass)(i.customClass),style:(0,F.normalizeStyle)(s.transformStyles),onClick:t[0]||(t[0]=(...r)=>s.onClick&&s.onClick(...r)),renderWhole:!0},[(0,F.renderSlot)(e.$slots,"default")],14,["animation"])):(0,F.createCommentVNode)("",!0)}var st=v(Ws,[["render",$s]]),js={"uni-popup":{"":{position:"fixed"},".top":{top:0},".left":{top:0},".right":{top:0}},"uni-popup__wrapper":{".uni-popup ":{position:"relative"},".uni-popup .left":{paddingTop:0,flex:1},".uni-popup .right":{paddingTop:0,flex:1}},"fixforpc-top":{"":{top:0}}},zs={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},maskClick:{type:Boolean,default:!0},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBgColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{maskClass(){return{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:this.maskBgColor}},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return this.backgroundColor===""||this.backgroundColor==="none"?"transparent":this.backgroundColor}},mounted(){(()=>{let{windowWidth:t,windowHeight:i,windowTop:o,safeAreaInsets:a}=uni.getSystemInfoSync();this.popupWidth=t,this.popupHeight=i+o,this.safeArea?this.safeAreaInsets=a:this.safeAreaInsets=0})()},created(){this.mkclick=this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1},methods:{closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){this.clearPropagation=!0},open(e,t=!0){if(e&&["top","center","bottom","left","right","message","dialog","share"].indexOf(e)!==-1||(e=this.type),this.maskShow=t,!this.config[e]){C("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:218","\u7F3A\u5C11\u7C7B\u578B\uFF1A",e);return}this[this.config[e]](),this.$emit("change",{show:!0,type:e})},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.showPopup=!1},300)},touchstart(){this.clearPropagation=!1},onTap(){if(this.clearPropagation){this.clearPropagation=!1;return}this.$emit("maskClick"),this.mkclick&&this.close()},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0,this.$nextTick(()=>{this.messageChild&&this.type==="message"&&this.messageChild.timerClose()}))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets&&this.safeAreaInsets.bottom||0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},!e&&(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)}}};function Gs(e,t,i,o,a,s){let r=b((0,F.resolveDynamicComponent)("uni-transition"),st);return a.showPopup?((0,F.openBlock)(),(0,F.createElementBlock)("view",{key:0,class:(0,F.normalizeClass)(["uni-popup",[a.popupstyle,s.isDesktop?"fixforpc-z-index":""]]),onTouchmove:t[2]||(t[2]=(0,F.withModifiers)((...l)=>s.clear&&s.clear(...l),["stop","prevent"])),renderWhole:!0},[(0,F.createElementVNode)("view",{onTouchstart:t[1]||(t[1]=(...l)=>s.touchstart&&s.touchstart(...l))},[a.maskShow?((0,F.openBlock)(),(0,F.createBlock)(r,{key:"1",name:"mask","mode-class":"fade",styles:s.maskClass,duration:a.duration,show:a.showTrans,onClick:s.onTap},null,8,["styles","duration","show","onClick"])):(0,F.createCommentVNode)("",!0),(0,F.createVNode)(r,{key:"2","mode-class":a.ani,name:"content",styles:a.transClass,duration:a.duration,show:a.showTrans,onClick:s.onTap},{default:(0,F.withCtx)(()=>[(0,F.createElementVNode)("view",{class:(0,F.normalizeClass)(["uni-popup__wrapper",[a.popupstyle]]),style:(0,F.normalizeStyle)({backgroundColor:s.bg}),onClick:t[0]||(t[0]=(...l)=>s.clear&&s.clear(...l))},[(0,F.renderSlot)(e.$slots,"default")],6)]),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],34)):(0,F.createCommentVNode)("",!0)}var Ne=v(zs,[["render",Gs],["styles",[js]]]);function Ai(e){return e==1?h("his"):h("her")}function Pt(e){return e==1?h("hisLower"):h("herLower")}function Ae(e){return e==1?h("himLower"):h("herLower")}function Nt(e){return e==1?h("he"):h("she")}function rt(e){return e==1?h("heLower"):h("sheLower")}function qe(e){return e==1?h("videoChatLower"):h("audioChatLower")}var lt={MOMENT:1,SIGN:2,CHECK_SIGN:3,MESSAGE:4,CHECK_NICKNAME:5,CALL:6,CLUB_INTRO:7,CHECK_CLUB_NAME:8,CHECK_CLUB_INTRO:9,REPORT:10,FEEDBACK:11,FEE_ALBUM:12,GREET:13,SENSITIVE:14,MSG_PRI:15,MSG_CLUB:16,MSG_SYS:17,MSG_KEFU:18,GAME_MSG:19,CHECK_CLUB_NAME_V1:20,CHECK_CLUB_INTRO_V1:21,CHECK_CLUB_REASON:22,CLUB_NAME:23,CLUB_APPLICATION_REASON:24,BANNED_REASON:25,WARNING_REASON:26,VISIONSHIELD_MOMENT:27,VISIONSHIELD_NICKNAME:28},Je={CHAT:"/pagesCall/chat-view"},Xe={NONE:0,WAITING:1,GAME:2,WEEK_UP:3,JUDGE_ROOM:100},Wn={HEART_INTERVAL:30},q={VIDEO:1,VOICE:2},H={CALL:1,ANSWER:2,MATCH_ACCEPT:3,MATCH_CONNECT:4},Fe={CALL:1,MATCH:2},Ze={DEF:0,NOTIFY:1,CONNECT:2},$n={HOME:0,MSG:1,MATCH:2,RECOMMEND:3,MATCH_NOTIFY:4,QUALITY:5,NO_COINS_DIALOG:6,CALL_LOG:7,GAME_MATCH:8,GAME_MATCH_NOTIFY:9,RANKING_LIST:10,PRIVACY_SET_MSG:11,MOMENT:12,LIVE:13,RECEPTION:13,CALlING:98,FREE_MIN_POP:99,ANSWER_ERROR:100,END_PAGE:101,APP_NOTIFY:102},le={TEXT:1,GIFT:2,GIFT_ASK_ACTION:3,SYS:4,TEXT_AUDIO:5,TEXT_SYS:6,GIFT_ASK:1001,AUTOMATIC:1002,MATCH_TIP:1003,NO_COINS:1004,FOLLOW:1005},Be={CHECK_DIFFERENT:7,OPEN_TRANSLATE:8},Qe={CANCEL:1,REFUSE:2,USER_END:3,GIRL_END:4,BALANCE:5,HEART:6,SYSTEM:7,TIMEOUT:8},we={CALL:1,END:2,REFUSE:3,WARNING:4,RECEIVE_GIFT:5,BALANCE:6,NO_MONEY:7,MESSAGE:8,TRANSLATE:9,MASK:10,FACE_DETECTION:11},ct={ANSWER:2};function vi(e){if(_(e.info))return"";let t=Object.keys(e.info);for(let i=0,o=t.length;i<o;i++){let a=t[i];e.text=e.text.replace("[%"+a+"%]",` ${e.info[a].text} `)}return e.text}function Ks(e,t,i,o,a){return new Promise(s=>{getApp().globalData.pluginUpload.singleUpS3({filePath:e,isBase64:t,coverFilePath:i,coverIsBase64:o,ossInfo:a},r=>{s(r)})})}var Ys="/upload/handle";function xi(e,t,i,o,a=null,s=null){return new Promise((r,l)=>U(this,null,function*(){let c=e.replace("file://",""),u={flag:t,type:i};a&&(u.width=a.width,u.height=a.height),s&&(u=Object.assign(u,s));try{if(o){let d=yield En(c),y="";d&&(y=d.digest),_(y)||(u.md5=y)}let f=yield M.request(Ys,u,!1,!0);if(f.ok==1&&f.data.is_upload)C("log","at common/api-upload.js:74","upload media is_upload true"),r({path:f.data.dir,smallPath:f.data.small_url,uploadId:f.data.upload_id||0});else{let d=f.data.upload_id,y=yield Js(c,"",f.data);d&&qs([d]),y.uploadId=d||0,r(y)}}catch(f){let d=kt(f);C("error","at common/api-upload.js:89","upload media fail "+d),Xs(t,u,d),l(f)}}))}function qs(e){_(e)||M.request("/upload/success",{id:e},!1,!0).then(t=>{C("error","at common/api-upload.js:163","-----> api upload/success response",t)},t=>{C("error","at common/api-upload.js:165","-----> api upload/success response error",t)})}function Js(e,t,i,o=0,a=0){return new Promise((s,r)=>{Ks(e,o,t,a,i).then(l=>{C("log","at common/api-upload.js:172","upload plugin s3 result",l),(typeof l=="object"?l.success:l)?s({path:i.dir.path,smallPath:i.dir.small_url}):r(`_upModuleS3 ${JSON.stringify(l)}`)})})}function Xs(e,t,i){let o=e=="auth"?"upload_auth":"upload",a=$e(t);M.accessLogExtra(o,`${e} ${a}`,i)}function jn(e,t,i){uni.$emit("event_follow",e,!t);let o=getApp().globalData.s.state.pubUser.focus_num;t?o-=1:o+=1,Ke("pubUser.focus_num",o);let a={flag:t?"del":"add",target_uid:e};typeof i=="function"&&i(),M.request("/follow/submit",a,!1,!1).then(r=>{let l=a.flag=="add"?h("followed"):h("unfollowed");uni.$emit("event_follow_num_finish"),r.ok==1&&he(l)});let s=z(`user_home_${e}`);s&&(s.user_info.is_follow=!t),j(`user_home_${e}`,s)}function Bt(e){let t=Number(e);if(isNaN(t)){C("error","at common/user.js:42","\u5237\u65B0\u4F59\u989D\u5931\u8D25");return}Ke("pubUser.balance",t),C("error","at common/user.js:46",`\u5237\u65B0\u4F59\u989D ${t}`)}function zn(e,t=1,i=!0){return e=Number(e),!!(isNaN(e)||getApp().pubUser.balance-e*t>=0)}function Gn(){return getApp().globalData.s.state.pubUser.is_auth}var w=ve(Te());var et=ve(Te());var Zs={line:{"":{height:"2rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%"}}},Qs={props:{marginLeft:{type:String,default:"0rpx"}},computed:{bgColor(){return"rgba(0, 0, 0, 0.1)"}}};function er(e,t,i,o,a,s){return(0,et.openBlock)(),(0,et.createElementBlock)("view",{style:(0,et.normalizeStyle)({background:s.bgColor,marginLeft:i.marginLeft}),class:"line",renderWhole:!0},null,4)}var Kn=v(Qs,[["render",er],["styles",[Zs]]]);function tr(){return getApp().globalData.appCRE||zn(40,1,!1)?!0:(ge(h("tips"),h("call40CoinsTip"),()=>{Oe(me.topUpDialog)},"","Purchase"),!1)}function Yn(e,t,i,o){tr()&&ir(Fe.CALL,e,H.CALL,t,i,null,o,Ze.DEF)}function ir(e,t,i,o,a,s,r,l){if(C("error","at comCall/call.js:44","\u300A!!Error!!\u300B>>>>> [_openCall] ",getApp().globalData.curCallId),_(o))return;if(o.uid==getApp().globalData.uid){if(i!=H.CALL)return;be(h("tips"),h("noCallSelf"),"",h("gotIt"));return}if(getApp().globalData.curCallId!=Xe.NONE)return;getApp().globalData.curCallId=Xe.WEEK_UP;let c=nr(e,t,i,o,a,s,r,l);Y(Je.CHAT,{},"callViewData",c)}function nr(e,t,i,o,a,s,r,l){let c={user:o,roomType:e,callType:t,actionType:i,fromType:r,videoInfo:a,openType:l};return a&&(c.videoInfo=a),s&&(c.roomInfo=s,s.isGame&&(c.isGame=s.isGame)),c}var ar={"tran-flex":{"":{flexDirection:"row",alignItems:"center"}},"view-tran":{"":{flexDirection:"row",justifyContent:"center",alignItems:"center"}},"text-a":{"":{fontSize:"20rpx"}},"text-tran":{"":{fontSize:"26rpx",marginLeft:"8rpx"}},"text-end":{"":{color:"#999999",fontSize:"24rpx",marginLeft:"4rpx"}},"tran-loading":{"":{width:"44rpx",height:"44rpx",position:"relative",alignItems:"center",justifyContent:"center"}},"tran-loading-back":{"":{position:"absolute",left:0,top:0}}},or={components:{LImg:I,MLine:Kn},emits:["onTranslateFinish","onTranslateClick"],props:{text:{type:String,default:""},border:{type:Boolean,default:!1},showTran:{type:Boolean,default:!0},showTranContent:{type:Boolean,default:!0},contentTop:{type:Number,default:20},showTranEnd:{type:Boolean,default:!1},bg:{type:[Boolean,String],default:!1},textColor:{type:String,default(){return"#333333"}},contentColor:{type:String,default(){return"#333333"}},isAuto:{type:Boolean,default:!1},isAutoForce:{type:Boolean,default:!1},translateResult:{type:String,default:""},fromLanguage:{type:String,default:""},apiParams:{type:Object,default(){return{}}},translateSize:{type:String,default:"24rpx"},paddingTop:{type:String,default:"10rpx"},fw:{type:Number,default:0},showTransStatus:{type:Number,default:-1},showOpenAutoTips:{type:Boolean,default:!1}},data(){return{transStatus:0,tranContent:""}},watch:{text(e){e&&(this.transStatus=0,this.tranContent="",this.executeTranAuto())},translateResult(e){this.transStatus=0,this.tranContent="",this.executeTranAuto()}},computed:{borderStyle(){return this.border?{"border-radius":"4px","padding-left":"10rpx","padding-right":"10rpx","padding-top":this.paddingTop}:{}},contentStyle(){let e={marginTop:`${this.contentTop}rpx`,color:this.contentColor,fontSize:this.translateSize};return this.fw>0&&(e["font-weight"]=this.fw),e},tranIconSrc(){return"s/pub/tran_end_1.png"},tranStr(){return this.isAuto?h("autoTranslation"):h("translation")},translateStr(){return h("translate")}},methods:{clickTranEndView(e){(this.isAuto||this.isAutoForce)&&(e&&e.stopPropagation(),Ye())},clickThis(e){e&&e.stopPropagation(),this.reqTranslate()&&((this.isAuto||this.isAutoForce)&&this.$emit("onTranslateClick"),this.showOpenAutoTips&&bi(!0))},handleTranRes(e){this.transStatus=2,this.showTranContent&&(this.tranContent=e),this.$emit("onTranslateFinish",{text:e})},reqTranslate(){if(_(this.text)||this.transStatus!=0)return!1;if(this.translateResult)return this.handleTranRes(this.translateResult),!0;this.transStatus=1;let e=this.apiParams;return e.target=getApp().globalData.translateKey,e.content=this.text,M.request("/translation/submit",e,!1,!0).then(t=>{t.ok==1&&t.data.text&&this.handleTranRes(t.data.text)},t=>{this.transStatus=0}),!0},executeTranAuto(){(this.isAutoForce||this.isAuto&&Bn(this.fromLanguage))&&this.$nextTick(()=>{this.reqTranslate()})}},created(){if(this.showTransStatus!=-1&&(this.transStatus=this.showTransStatus),!(!this.isAuto&&!this.isAutoForce)&&getApp().globalData.translateAuto){if(this.translateResult){this.transStatus=2,this.tranContent=this.translateResult;return}this.executeTranAuto(),It("s-cupid/pub/tran_load_1.gif")}}};function sr(e,t,i,o,a,s){let r=b((0,w.resolveDynamicComponent)("l-img"),I),l=(0,w.resolveComponent)("m-line");return(0,w.openBlock)(),(0,w.createElementBlock)("view",{style:(0,w.normalizeStyle)([s.borderStyle,{background:"transparent"}]),renderWhole:!0},[(0,w.createElementVNode)("view",{class:"tran-flex"},[a.transStatus==1?((0,w.openBlock)(),(0,w.createElementBlock)("view",{key:0,class:"tran-loading"},[(0,w.createElementVNode)("view",{class:"tran-loading-back"},[(0,w.createVNode)(r,{src:"/static/tran-loading-back.png",w:"44rpx",h:"44rpx"})]),(0,w.createVNode)(r,{src:"s/pub/tran_load_1.gif",w:"24rpx",h:"24rpx","is-gif":!0})])):a.transStatus==0?((0,w.openBlock)(),(0,w.createBlock)(r,{key:1,onClick:(0,w.withModifiers)(s.clickThis,["stop"]),src:"/static/trans_s.png",w:"32rpx",h:"32rpx"},null,8,["onClick"])):a.transStatus==2?((0,w.openBlock)(),(0,w.createBlock)(r,{key:2,src:"s-cupid/pub/trans_s.png",w:"32rpx",h:"32rpx"})):(0,w.createCommentVNode)("",!0),i.showTran?((0,w.openBlock)(),(0,w.createElementBlock)("u-text",{key:3,onClick:t[0]||(t[0]=(0,w.withModifiers)((...c)=>s.clickThis&&s.clickThis(...c),["stop"])),class:"text-tran",style:(0,w.normalizeStyle)({color:i.textColor})},(0,w.toDisplayString)(s.translateStr),5)):(0,w.createCommentVNode)("",!0)]),a.tranContent?((0,w.openBlock)(),(0,w.createElementBlock)("view",{key:0},[(0,w.createVNode)(l),(0,w.createElementVNode)("u-text",{style:(0,w.normalizeStyle)(s.contentStyle)},(0,w.toDisplayString)(a.tranContent),5),i.showTranEnd?((0,w.openBlock)(),(0,w.createElementBlock)("view",{key:0,onClick:t[1]||(t[1]=(...c)=>s.clickTranEndView&&s.clickTranEndView(...c)),class:"tran-flex",style:{"margin-top":"8rpx"}},[(0,w.createVNode)(r,{src:s.tranIconSrc,w:"30rpx",h:"30rpx"},null,8,["src"]),(0,w.createElementVNode)("u-text",{class:"text-end"},(0,w.toDisplayString)(s.tranStr),1)])):(0,w.createCommentVNode)("",!0)])):(0,w.createCommentVNode)("",!0)],4)}var tt=v(or,[["render",sr],["styles",[ar]]]),rr={emits:["click","clickAddFriends","clickSendGift"],props:{data:{type:Object,default(){return{text:"",info:[],click:[]}}},fontSize:{type:String,default:"24rpx"},color:{type:String,default(){return"#FFFFFF"}},selectable:{type:Boolean,default:!1}},data(){return{version:0,nodes:[{name:"div",children:[]}]}},watch:{data(){this.parse()}},methods:{click(e){let t=Array.isArray(this.data.click)?this.data.click[0]:this.data.click;t&&(t.disabled||(e.stopPropagation(),t.action==1||(t.action==101?this.$emit("click"):t.action==8?this.$emit("clickAddFriends"):t.action==9?this.$emit("clickCallVideo"):t.action==10?this.$emit("clickSendGift"):t.action==1004&&Oe(me.topUpDialog))))},parseTextV1(e,t,i,o="",a=""){let s={type:"text",text:`${t?"&nbsp;":""}${e}${i?"&nbsp;":""}`},r="";return o!=""&&(r+=`color:${o};`),a!=""&&(r+=`font-size:${a};`),r!=""&&(s.attrs={style:r}),s},parseDataV1(){let e=[];if(this.data.text=="[x]"){let i=this.data.info[0];this.nodes[0].children=[this.parseTextV1(i.text,!1,!1,i.color)];return}let t=this.data.text.split("[x]");for(let i=0,o=t.length;i<o;i++){let a=t[i];a!=""&&e.push(this.parseTextV1(a,!1,!1,this.color));let s=this.data.info[i];if(s){let r,l;try{_(a)||a.endsWith('"')?r=!1:r=!0;let u=t[i+1];_(u)||u.startsWith('"')||u.startsWith(",")||u.startsWith(".")?l=!1:l=!0}catch(u){r=!0,l=!0}let c="";s.user_info?s.user_info.uid==getApp().pubUser.uid?c=s.self:c=s.nickname:c=s.text,e.push(this.parseTextV1(c,r,l,s.color))}}e.length>1&&(this.nodes[0].children=e)},parseText(e,t="",i=""){let o={type:"text",text:`${e}`},a="";return _(t)||(a+=`color:${t};`),_(i)||(a+=`font-size:${i};`),a!=""&&(o.attrs={style:a}),o},parse(){let e=this.data.text.split(/(\[%\w+%\])/).filter(function(i){return i!==""});if(e.length<=1){this.parseDataV1();return}let t=[];for(let i=0,o=e.length;i<o;i++){let a=e[i];if(a.startsWith("[%")){let r=a.replace(/[\s+,\[%,%\]]/g,""),l=this.data.info[r];if(_(l)||_(l.text))continue;t.push(this.parseText(l.text,l.color,l.fontSize))}else a.startsWith(" ")&&(a=`&nbsp;${a}`),a.endsWith(" ")&&(a=`${a}&nbsp;`),t.push(this.parseText(a,this.color))}t.length>1&&(this.nodes[0].children=t)}},created(){_(this.data.text)||this.parse()}};function lr(e,t,i,o,a,s){let r=(0,w.resolveComponent)("rich-text");return(0,w.openBlock)(),(0,w.createBlock)(r,{onClick:s.click,nodes:a.nodes,selectable:i.selectable,style:(0,w.normalizeStyle)({color:i.color,fontSize:i.fontSize})},null,8,["onClick","nodes","selectable","style"])}var ut=v(rr,[["render",lr]]),cr={"fj-slider":{"":{position:"relative"}},"fj-touch-right":{"":{position:"absolute"}},"fj-line":{"":{position:"absolute",left:0,right:0}}},ur=ue("dom"),hr={name:"CustomSlider",emits:["onChanged","onChangeStart","onChange"],props:{fillValue:{type:Number,default:100},maxValue:{type:Number,default:0},step:{type:Number,default:1},activeColor:{type:String,default:"#2F85FC"},inactiveColor:{type:String,default:"#999999"},blockWidth:{type:Number,default:24},lineHeight:{type:Number,default:8},lineRadius:{type:Number,default:4},blockColor:{type:String,default:"#FFFFFF"},disClick:{type:Boolean,default:!1}},data(){return{lineWidth:0,maxLeft:0,lineLeft:0,curValue:0,sMaxValue:0,sFillValue:0,percentage:0,sBlockWidth:uni.upx2px(this.blockWidth),sLineHeight:uni.upx2px(this.lineHeight),sLineTop:(uni.upx2px(this.blockWidth)-uni.upx2px(this.lineHeight))/2,sLineRadius:uni.upx2px(this.lineRadius),getRectInterval:!1}},watch:{maxValue(e,t){this.sMaxValue=e,this.maxLeft=this.sMaxValue/this.percentage,this.checkMaxLeft()},fillValue(e,t){this.sFillValue=this.fillValue}},methods:{clickLine(e){e.stopPropagation(),!this.disClick&&this.touchmove(e,!0)},envir(e){this.getRectInterval=setTimeout(()=>{ur.getComponentRect(e.refName,t=>{if(clearTimeout(this.getRectInterval),this.getRectInterval=!1,t&&t.size&&t.size.height!=0){let i=t.size;e.fn({width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right})}else this.envir(e)})},100)},touchstart(e){this.$emit("onChangeStart",this.curValue)},touchmove(e,t){e.stopPropagation();let i;if(t?i=e.changedTouches[0].screenX-this.lineLeft:i=e.touches[0].screenX-this.lineLeft,i<0||i>this.lineWidth)return;let o=Math.ceil(i);o>this.lineWidth&&(o=this.lineWidth),this.curValue=Math.round(o*this.percentage),this.maxLeft=Math.ceil(i),this.checkMaxLeft(),this.$emit("onChange",this.curValue)},touchend(e){if(this.step===1)this.sMaxValue=this.curValue;else{let t=Math.round(this.maxLeft*this.percentage/this.step);this.sMaxValue=t*this.step,this.sFillValue-this.sMaxValue<this.step&&(this.sMaxValue=this.sFillValue),this.maxLeft=this.sMaxValue/this.percentage}C("info","at components/custom-slider/custom-slider.vue:179","m-slider onChanged "+this.curValue),this.$emit("onChanged",this.curValue)},checkMaxLeft(){this.maxLeft>this.lineWidth-this.sBlockWidth-1?this.maxLeft=this.lineWidth-this.sBlockWidth-1:this.maxLeft<=4&&(this.maxLeft=0)}},mounted(){this.$nextTick(()=>{this.envir({className:".fj-line",refName:this.$refs["fj-line"],fn:e=>{this.lineWidth=e.width,this.lineLeft=e.left,this.sMaxValue=this.maxValue>0?this.maxValue:0,this.sFillValue=this.fillValue>0?this.fillValue:0,this.percentage=this.sFillValue/this.lineWidth,this.maxLeft=this.sMaxValue/this.percentage-this.sBlockWidth-1}})})},unmounted(){this.getRectInterval&&clearTimeout(this.getRectInterval)}};function dr(e,t,i,o,a,s){return(0,w.openBlock)(),(0,w.createElementBlock)("view",{class:"fj-slider",onTouchend:t[3]||(t[3]=(...r)=>s.clickLine&&s.clickLine(...r)),renderWhole:!0},[(0,w.createElementVNode)("view",{class:"fj-line",ref:"fj-line",style:(0,w.normalizeStyle)({background:i.inactiveColor,height:`${a.sLineHeight}px`,top:`${a.sLineTop}px`,borderRadius:`${a.sLineRadius}px`})},null,4),(0,w.createElementVNode)("view",{class:"fj-line",style:(0,w.normalizeStyle)({width:`${Math.abs(a.maxLeft)}px`,background:i.activeColor,height:`${a.sLineHeight}px`,top:`${a.sLineTop}px`,borderTopLeftRadius:`${a.sLineRadius}px`,borderBottomLeftRadius:`${a.sLineRadius}px`})},null,4),(0,w.createElementVNode)("view",{class:"fj-touch-right",onTouchstart:t[0]||(t[0]=(...r)=>s.touchstart&&s.touchstart(...r)),onTouchmove:t[1]||(t[1]=(...r)=>s.touchmove&&s.touchmove(...r)),onTouchend:t[2]||(t[2]=(...r)=>s.touchend&&s.touchend(...r)),style:(0,w.normalizeStyle)({left:`${a.maxLeft}px`,background:i.blockColor,width:`${a.sBlockWidth}px`,height:`${a.sBlockWidth}px`,borderRadius:`${a.sBlockWidth/2}px`})},null,36)],32)}var ki=v(hr,[["render",dr],["styles",[cr]]]),qn={data(){return{allExpressionList:[]}},methods:{parseOtherExpression(e){let t={},i={},o={};for(let s=0,r=e.length;s<r;s++){let l=e[s],c=[];for(let u=0,f=l.count;u<f;u++){let d=u+1,y={w:this.pigW-20,src:`${l.path}${l.picName}_${d}.png`};c.push(y)}t[l.iconKey]=c,i[l.iconKey]=`${l.path}${l.title}.png`}o=Object.keys(i);let a=[];for(let s of o){let r={icon:i[s],list:t[s]};a.push(r)}this.expressionsList=a}}},pr={props:{type:{type:String,default:"bg2"}},computed:{bgColor(){var e,t,i;return(i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.color[this.type]}}};function fr(e,t,i,o,a,s){return(0,w.openBlock)(),(0,w.createElementBlock)("view",{style:(0,w.normalizeStyle)({background:s.bgColor}),renderWhole:!0},[(0,w.renderSlot)(e.$slots,"default")],4)}var Jn=v(pr,[["render",fr]]),mr={components:{UniIcons:_e},props:{type:{type:String,default:"right"},size:{type:String,default:"28rpx"},modeType:{type:String,default:"desc"},color:{type:String,default:""}},computed:{iconColor(){var e,t,i;return _(this.color)?(i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.color[this.modeType]:this.color}}};function gr(e,t,i,o,a,s){let r=b((0,w.resolveDynamicComponent)("uni-icons"),_e);return(0,w.openBlock)(),(0,w.createBlock)(r,{type:i.type,size:i.size,color:s.iconColor},null,8,["type","size","color"])}var Xn=v(mr,[["render",gr]]),Zn={LIGHT:1,DARK:2};function _r(e,t){ge(h("tips"),h("anchor.rest.turnOffTip"),()=>{M.request("/user/work-status",{is_rest:0},!0).then(()=>{typeof e=="function"&&e(),Ke("pubUser.is_rest",0),be(h("tips"),h("anchor.rest.turnOff"),"",h("gotIt"))})},()=>{typeof t=="function"&&t()},h("turnOff"))}function Qn(){return!Gn()||getApp().pubUser.is_rest!=1?!1:(uni.hideKeyboard(),_r(!1,!1),!0)}function ea(e,t){let o=plus.ios.import("NSBundle").mainBundle();return`${plus.ios.invoke(o,"pathForResource:ofType:","CustomService","bundle")}/${e}.${t}`}function ta(e,t){let i=plus.io.convertLocalFileSystemURL("_doc");if(!D.isAndroid)return i+"/";let o=`${e}/`,a=i.indexOf(o),s=t?a+o.length:a;return i.substr(0,s)}function Li(e){return new Promise(t=>{let i=getCurrentPages(),a=i[i.length-1].$getAppWebview(),s=`${e}_${new Date().getTime()}`,r=new plus.nativeObj.Bitmap(s);a.draw(r,()=>{r.save(`_doc/${s}.jpg`,{overwrite:!0},l=>{t(l.target),r.clear()},l=>{r.clear(),t(null)})},l=>{t(null)},{check:!0})})}function Ii(e){let i={path:"",repeat:!0,isOut:!!e};getApp().globalData.pluginAudio.startRing(i,o=>{})}function Mi(e){getApp().globalData.pluginAudio.stopRing({isConnectCall:e?1:0})}function ia(){return typeof getApp().globalData.pluginAudio.getRingPath=="undefined"?ea("voip_call","mp3"):getApp().globalData.pluginAudio.getRingPath()}function wr(){return Fn()}function na(){return wr()==bt.SUCCESS}var W=ve(Te());var yr={"user-info":{"":{flexDirection:"row",alignItems:"center"}},"nickname-nvue":{"":{lines:1,textOverflow:"ellipsis",wordWrap:"anywhere"}},"m-r-4":{"":{marginRight:"8rpx"}}},Cr={components:{LImg:I},props:{info:{type:Object,default(){return{}}},noName:{type:Number,default:0},nameColor:{type:String,default:""},nameSize:{type:String,default:"26rpx"},nameWidth:{type:String,default:"300rpx"},fw:{type:[String,Number],default:"400"},showAge:{type:Boolean,default:!1}},computed:{nicknameColor(){return _(this.nameColor)?"#333333":this.nameColor},age(){if(!this.showAge||_(this.info.birthday)||this.info.hide_profile)return"";let e=wn(this.info.birthday);return _(e)||isNaN(e)?"":`${this.noName?"":", "}${e}`}}};function Tr(e,t,i,o,a,s){let r=b((0,W.resolveDynamicComponent)("l-img"),I);return(0,W.openBlock)(),(0,W.createElementBlock)("view",{renderWhole:!0},[(0,W.createElementVNode)("view",{class:"user-info"},[i.noName?(0,W.createCommentVNode)("",!0):((0,W.openBlock)(),(0,W.createElementBlock)("u-text",{key:0,class:"nickname-nvue m-r-4",style:(0,W.normalizeStyle)({color:s.nicknameColor,fontSize:i.nameSize,maxWidth:i.nameWidth,fontWeight:i.fw})},(0,W.toDisplayString)(i.info.nickname),5)),s.age?((0,W.openBlock)(),(0,W.createElementBlock)("u-text",{key:1,class:"nickname-nvue m-r-4",style:(0,W.normalizeStyle)({color:s.nicknameColor,fontSize:i.nameSize,fontWeight:i.fw})},(0,W.toDisplayString)(s.age),5)):(0,W.createCommentVNode)("",!0),(0,W.createVNode)(r,{src:i.info.country_flag,w:"40rpx",h:"26rpx"},null,8,["src"]),i.info.auth_status==1?((0,W.openBlock)(),(0,W.createBlock)(r,{key:2,src:"/static/pic/authed.png",w:"28rpx",h:"28rpx",style:{"margin-left":"8rpx"}})):(0,W.createCommentVNode)("",!0)])])}var ht=v(Cr,[["render",Tr],["styles",[yr]]]);var te=ve(Te());var Sr={"vip-img":{"":{position:"absolute",width:"70rpx",height:"30rpx",bottom:0,left:0,zIndex:100}}},br={emits:["click","onLoad"],components:{LImg:I},props:{user:{type:Object,default(){return{}}},w:{type:String,default:"0"},h:{type:String,default:"0"},radius:{type:String,default:"0"},avatarKey:{type:String,default:"small_avatar"},border:{type:String,default:""},placeType:{type:Number,default:1},placeW:{type:String,default:""},placeFontSize:{type:[String,Boolean],default:""},placeBottom:{type:String,default:""},click:{type:Boolean,default:!0},fromAdmin:{type:[Boolean,Number],default:!1},fromType:{type:Number,default:1},fade:{type:Boolean,default:!0},bgColor:{type:String,default:"transparent"},isShowVip:{type:Boolean,default:!0},vipW:{type:String,default:"70rpx"},vipH:{type:String,default:"30rpx"}},methods:{clickAvatar(e){this.click&&this.$emit("click",e)},onLoad(){this.$emit("onLoad")}}};function Ar(e,t,i,o,a,s){let r=b((0,te.resolveDynamicComponent)("l-img"),I);return i.user.avatar?((0,te.openBlock)(),(0,te.createElementBlock)("view",{key:0,style:(0,te.normalizeStyle)([{"border-radius":i.radius,background:i.bgColor},{position:"relative",padding:"0 0 10rpx 10rpx"}]),renderWhole:!0},[(0,te.createVNode)(r,{onClick:s.clickAvatar,src:i.user.avatar,w:i.w,h:i.h,radius:i.radius,border:i.border,"place-type":i.placeType,"place-w":i.placeW,"place-font-size":i.placeFontSize,"place-bottom":i.placeBottom,fade:i.fade,onOnLoad:s.onLoad},null,8,["onClick","src","w","h","radius","border","place-type","place-w","place-font-size","place-bottom","fade","onOnLoad"]),i.isShowVip&&Number(i.user.is_vip)?((0,te.openBlock)(),(0,te.createElementBlock)("view",{key:0,class:"vip-img"},[(0,te.createVNode)(r,{src:"/static/avatar-vip.png",w:i.vipW,h:i.vipH},null,8,["w","h"])])):(0,te.createCommentVNode)("",!0)],4)):(0,te.createCommentVNode)("",!0)}var Fi=v(br,[["render",Ar],["styles",[Sr]]]);var aa="g_language_1";function vr(){return new Promise(e=>{let t=z(aa);_(t)||getApp().globalData.languageVersion>parseInt(t.version)?M.request("/config/language-list",{}).then(i=>{let o={version:i.data.version,list:i.data.list};j(aa,o),e(o)}):e(t)})}var oa="196fb6821dce4f0c80e0ad27ae0a2662",sa="eastus",Ei="Microsoft",Di="Speech_Recognition",xr={data(){return{isAudioTranslateExtensionOpen:!1,isAutomaticOpen:!1,isAutomaticTargetOpen:!1,pluginIdentifyStatus:!1,pluginTranslateStatus:!1,automaticTarget:"",myAutomaticSource:[],myAutomaticTargetLanguage:"",languageKeyObj:{},automaticInitData:{audio_transfer:0,is_language_diff:0,automatic_open:0}}},methods:{clickTranslateSwitch(){this.$refs.callAutomaticPop.open()},onAudioTranslationStarted(e,t){return!1},onAudioTranslationStopped(e,t){return!1},onAudioTranslationError(e,t,i,o){return!!this._checkAudioTranslationEvent(e,t)},onAudioTranslationEvent(e,t,i,o){if(!this._checkAudioTranslationEvent(e,t))return!1;switch(i){case"translation_recognized":C("error","at pagesCall/chat-view-audio-translation.js:53","---- \u8BED\u97F3 \u7FFB\u8BD1 \u7ED3\u679C"+o);let a=xe(o);if(a){let r=a.text;if(_(r)||_(a.translation))return;let l=a.translation[this.automaticTarget];if(_(l))return;this._handleAudioTranslationResult(r,l)}break;case"translation_recognized_canceled":let s=xe(o);if(!s)return;s.reason==0||typeof s.error_code!="undefined"&&s.error_code!=0;break;case"speech_recognized":C("error","at pagesCall/chat-view-audio-translation.js:72","---- \u8BED\u97F3 \u8F6C\u5199 \u7ED3\u679C"+o);break}return!0},onAutomaticStatusChange(e){return U(this,null,function*(){if(C("error","at pagesCall/chat-view-audio-translation.js:92","---- test onAutomaticStatusChange ",e),e.key=="automatic")e.value&&(e.isChoose&&this.$refs.msgView?this.$refs.msgView.addMsgAutomatic({type:Be.OPEN_TRANSLATE,language:e.language.name}):setTimeout(()=>{let t=h("automaticMsgHereTip",{he:rt(this.userInfo.sex)});this.$refs.callAutomaticView&&this.$refs.callAutomaticView.setContent(t,h("tips"))},800)),this.requestCallTranslateStat(e.value?1:0,e.language.language),this.isAutomaticOpen=e.value,this.isAutomaticOpen&&this.handlerShowAutomaticMsgTip(),Nn(this.isAutomaticOpen),this.myAutomaticTargetLanguage=e.language.language;else if(e.key=="speakLanguage"){let t=[];for(let i=0,o=e.languageList.length;i<o;i++)if(e.languageList[i].voice_translate){let a=e.languageList[i].voice_translate.split(",");t.push(a[1])}this.myAutomaticSource=t,this.isAutomaticTargetOpen&&(yield this.setTranslateSwitch(!1),this.isAutomaticTargetOpen=!0,this.setAutomaticAction())}})},onEventMsgAutomaticAction(e){e==1&&this.$refs.callAutomaticPop.open()},handlerShowAutomaticMsgTip(){pi(z("call_automatic_msg_tip_1"))&&(this.showAutomaticMsgTip=!0,j("call_automatic_msg_tip_1",1),this.$nextTick(()=>{this.startAnimAutomaticMsgTip()}))},receiveTargetAutomaticAction(e){return U(this,null,function*(){if(C("error","at pagesCall/chat-view-audio-translation.js:144","\u5BF9\u65B9\u9700\u8981\u81EA\u52A8\u7FFB\u8BD1 ",e),e.status){let t=this.languageKeyObj[e.language];if(t&&t.voice_translate){let i=t.voice_translate.split(",");this.automaticTarget=[i[0]],this.isAutomaticTargetOpen?(yield this.setTranslateSwitch(!1),this.isAutomaticTargetOpen=!0,this.setAutomaticAction()):(this.isAutomaticTargetOpen=!0,this.setAutomaticAction())}}else this.isAutomaticTargetOpen=!1,this.setAutomaticAction()})},requestCallTranslateStat(e,t){M.request("/call/translate-stat",{status:e,language:t,room_id:this.roomInfo.room_id})},destroyAutomatic(){return U(this,null,function*(){try{yield this._pluginStopAutomatic(),this.isAudioTranslateExtensionOpen&&(yield this.enableAudiTranslation(!1))}catch(e){}})},setAutomaticAction(){return U(this,null,function*(){this.isAutomaticTargetOpen?yield this.setTranslateSwitch(!0):yield this.setTranslateSwitch(!1)})},setTranslateSwitch(e){return U(this,null,function*(){this.pluginTranslateStatus!=e&&(e?(yield this._pluginOpenTranslate(this.myAutomaticSource,this.automaticTarget),this.pluginTranslateStatus=!0,C("error","at pagesCall/chat-view-audio-translation.js:192","---- \u5F00\u542F \u8BED\u97F3\u7FFB\u8BD1 "+JSON.stringify(this.myAutomaticSource)+" target = "+JSON.stringify(this.automaticTarget))):(yield this._pluginStopTranslate(),this.pluginTranslateStatus=!1,C("error","at pagesCall/chat-view-audio-translation.js:196","---- \u5173\u95ED \u8BED\u97F3\u7FFB\u8BD1")))})},setIdentifySwitch(e){return U(this,null,function*(){this.pluginIdentifyStatus!=e&&(e?(yield this._pluginOpenIdentify(this.myAutomaticSource),this.pluginIdentifyStatus=!0,C("error","at pagesCall/chat-view-audio-translation.js:204","---- \u5F00\u542F \u8BED\u97F3\u8F6C\u5199 "+JSON.stringify(this.myAutomaticSource))):(yield this._pluginStopIdentify(),this.pluginIdentifyStatus=!1,C("error","at pagesCall/chat-view-audio-translation.js:208","---- \u5173\u95ED \u8BED\u97F3\u8F6C\u5199")))})},initAudioTranslate(){C("error","at pagesCall/chat-view-audio-translation.js:212","----> \u89C6\u9891\u901A\u8BDD \u8BED\u97F3\u7FFB\u8BD1 \u521D\u59CB\u5316\u6570\u636E data ",this.automaticInitData),this.isAutomaticOpen=this.automaticInitData.automatic_open;let e,t=getApp().pubUser.speak_language;_(t)?e=[Rt(!1)]:e=t.split(","),this.myAutomaticTargetLanguage=On(),vr().then(i=>{this.isAutomaticTargetOpen=this.userInfo.audio_translate;let o=this.userInfo.audio_language,a={};for(let s=0,r=i.list.length;s<r;s++){let l=i.list[s];if(this.languageKeyObj[l.language]=l,l.language==this.myAutomaticTargetLanguage&&(a=l),l.voice_translate){let c=l.voice_translate.split(",");e.indexOf(l.language)!=-1&&this.myAutomaticSource.push(c[1]),l.language==o&&(this.automaticTarget=[c[0]])}}this.myAutomaticSource.length<=0?this.myAutomaticSource=["en-US"]:this.myAutomaticSource.length>4&&(this.myAutomaticSource=this.myAutomaticSource.slice(0,4)),this.automaticInitData.is_language_diff&&(C("error","at pagesCall/chat-view-audio-translation.js:253","\u53CC\u65B9\u6240\u8BF4\u8BED\u8A00\u76D1\u6D4B\u4E0D\u4E00\u81F4"),setTimeout(()=>{this.$refs.msgView.addMsgAutomatic({type:Be.CHECK_DIFFERENT});let s=h("automaticMsgHereTip",{he:rt(this.userInfo.sex)});this.$refs.callAutomaticView&&this.$refs.callAutomaticView.setContent(s,h("tips")),this.isAutomaticOpen&&this.handlerShowAutomaticMsgTip()},500)),this.$refs.callAutomaticPop.initData(a,this.isAutomaticOpen),this.automaticInitData.audio_transfer&&this.setTranslateSwitch(!0)})},enableAudiTranslation(e){return U(this,null,function*(){this.isAudioTranslateExtensionOpen!=e&&(yield this.engine.enableExtension(Ei,Di,e),this.isAudioTranslateExtensionOpen=e)})},_pluginOpenTranslate(e,t){return U(this,null,function*(){yield this._setProperty("init_translate_recognition",this._parseTranslation(e,t)),yield this._setProperty("start_continuous_translate_async","{}")})},_pluginOpenIdentify(e){return U(this,null,function*(){yield this._setProperty("init_speech_recognition",this._parseIdentify(e)),yield this._setProperty("start_continuous_recognition_async","{}")})},_pluginStopTranslate(){return U(this,null,function*(){yield this._setProperty("stop_continuous_translate_async","{}")})},_pluginStopIdentify(){return U(this,null,function*(){yield this._setProperty("stop_continuous_recognition_async","{}")})},_pluginStopAutomatic(){return U(this,null,function*(){yield this._pluginStopTranslate(),yield this._pluginStopIdentify()})},_setProperty(e,t){return U(this,null,function*(){yield this.engine.setExtensionProperty(Ei,Di,e,t)})},_parseTranslation(e,t){return JSON.stringify({subscription:oa,region:sa,source_languages:e,target_languages:t,enable_auto_detect:!0})},_parseIdentify(e){return JSON.stringify({subscription:oa,region:sa,source_languages:e,enable_auto_detect:!0})},_checkAudioTranslationEvent(e,t){return e==Ei&&t==Di},_handleAudioTranslationResult(e,t){C("error","at pagesCall/chat-view-audio-translation.js:317",`\u81EA\u52A8\u7FFB\u8BD1\u8BC6\u522B\u7ED3\u679C sourceText = ${e} translateText = ${t}`);let i={content:JSON.stringify({source_language:this.myAutomaticSource,source_text:e,translate_text:t,translate_language:this.automaticTarget}),to_uid:this.userInfo.uid,room_id:this.roomInfo.room_id,msg_type:le.TEXT_AUDIO};M.request("/call/send-msg",i)}},onLoad(){uni.$on("event_msg_automatic_action",this.onEventMsgAutomaticAction)},onUnload(){uni.$off("event_msg_automatic_action",this.onEventMsgAutomaticAction)}},Ri=class{constructor(t){t&&(this.width=t.width,this.height=t.height)}},Oi=class{constructor(t){t&&(this.dimensions=t.dimensions,this.frameRate=t.frameRate,this.minFrameRate=t.minFrameRate,this.bitrate=t.bitrate,this.minBitrate=t.minBitrate,this.orientationMode=t.orientationMode,this.degradationPrefer=t.degradationPrefer,this.mirrorMode=t.mirrorMode)}},jt=class{constructor(t){t&&(this.lighteningContrastLevel=t.lighteningContrastLevel,this.lighteningLevel=t.lighteningLevel,this.smoothnessLevel=t.smoothnessLevel,this.rednessLevel=t.rednessLevel,this.sharpnessLevel=t.sharpnessLevel)}},dt=class{constructor(t,i){this.appId=t,i&&(this.areaCode=i.areaCode,this.logConfig=i.logConfig)}},kr=ue("dom"),Lr={data(){return{showFocusLoading:!1,permissionStatus:0,permissionHasSetting:!1,initDataObj:!1,isMatch:!1,isCreateAgoraRoom:0}},computed:{connectLoadingFromType(){return this.showFocusLoading?ct.ANSWER:-1}},methods:{getBeautyOptions(){let e,t=z("beauty_info");return t?e=xe(t):e={whitening:50,smoothing:50,rosy:50},new jt({lighteningLevel:e.whitening/100,smoothnessLevel:e.smoothing/100,rednessLevel:e.rosy/100})},answerConnect(){this.isConnecting=!0,this.addLogAnswer(),this.ringStop(!1),setTimeout(()=>{this.isConnect||(this.showFocusLoading=!0)},5e3)},getCallRingInfo(){Re("call_ring_tip_close")||(this.showRingTip=!0),this.showRingTip&&kr.getComponentRect(this.$refs.CallRing,e=>{e&&e.size&&(this.ringTipTop=e.size.bottom)})},answerChat(){return this.isClickAnswer?Se:(this.isClickAnswer=!0,new Promise(e=>{if(this.openType==Ze.NOTIFY){let t={room_id:this.roomInfo.room_id};M.request("/call/status",t,!1,!0).then(i=>{i&&i.ok==1?(this.answerConnect(),e()):(this.addLog(`\u4ECE\u901A\u77E5\u63A5\u542C call status ok = ${i.ok}`),this.closeCallChat(this.logEndCallStatus,this.closeTypeTargetHangUp,{}))},i=>{this.addLog(`\u4ECE\u901A\u77E5\u63A5\u542C call status fail ${kt(i)}`),this.closeCallChat(this.logEndCallStatus,this.closeTypeTargetHangUp,{})})}else{if(this.userInfo.call_exp_time&&getApp().getCTime()>this.userInfo.call_exp_time){this.addLog(`\u89E6\u53D1\u65F6\u95F4\u8FC7\u671F \u670D\u52A1\u5668\u65F6\u95F4\uFF1A${getApp().getCTime()} \u8FC7\u671F\u65F6\u95F4\uFF1A${this.userInfo.call_exp_time}`),this.closeCallChat(this.logEndAnswerExpTime,this.closeTypeTargetHangUp,{});return}this.answerConnect(),e()}}))},createRoom(){return new Promise(e=>{let t={target_uid:this.userInfo.uid,call_type:this.callType,from_type:this.fromType};M.request("/call/create",t,!1,!0,!0).then(i=>{if(!this.isCloseExecute){if(C("error","at pagesCall/chat-view-init.mixin.js:103","----> call info "+JSON.stringify(i)),i.ok==1)this.addLogCreate(i.data),e(i.data),this.handleNotAnswerTimer();else if(i.ok==3){let o={user:this.userInfo,tips:i.data.tips,time:i.data.interval};Y("/pagesDialog/call-trouble",{},"callTroubleData",o,{onCallTroubleCloseListener:()=>{this.closeCallChat(this.closeFromDef,this.closeTypeDef,{})}})}else i.ok==4?this.initActionCall():i.ok==2?he(h("call.onCall")):this.closeCallChat(this.logEndApiCreateNo,this.closeTypeNetwork,{ok:i.ok});this.getCallRingInfo()}},i=>{if(this.getCallRingInfo(),i.data.code==1){this.closeCallChat(this.closeFromDef,this.closeTypeDef,{});return}C("error","at pagesCall/chat-view-init.mixin.js:133","api /call/create fail "+JSON.stringify(i)),this.closeCallChat(this.logEndApiCreateError,this.closeTypeNetwork,{error:i})})})},initActionAnswer(e){if(_(e.roomInfo)){this.closeCallChat(this.closeFromDef,this.closeTypeDef,{});return}this.initData(e.roomInfo),!this.isRingMute&&(this.ringPlay(),this.$nextTick(()=>{setTimeout(()=>{this.getCallRingInfo()},300)}),C("error","at pagesCall/chat-view-init.mixin.js:151","-----> initActionAnswer finish ... "))},initActionCall(){this.createRoom().then(e=>(this.needCheckFace=e.whether_detect_faces,this.initUser(e.user_info),this.initData(e),this.initEngine())).then(()=>{this.isRingMute||this.ringPlay(),C("error","at pagesCall/chat-view-init.mixin.js:161","-----> initActionCall finish ...")})},initLoadingView(){this.actionType==H.ANSWER&&setTimeout(()=>{this.startAnswerBgAnim(),this.startAnswerIcon()},1e3)},initVideoInfo(e){if(e.width>=e.height){this.videoShowBlur=!0,this.videoObjectFit="contain";let t=e.width/e.height;this.videoW=this.sW,this.videoH=this.sW/t}else this.videoObjectFit="cover",this.videoW=this.sW,this.videoH=this.sH;this.videoInfo=e,this.videoInfo.showUrl=getApp().globalData.ossPath+e.video_url},initData(e){this.roomInfo=e,this.addLogRoomId(this.roomInfo.room_id),e.user_info&&(this.userInfo=e.user_info),e.heart_interval&&(this.heartInt=e.heart_interval),e.hangup_tips&&(this.hangUpTips=e.hangup_tips)},initUser(e){this.userInfo=e,this.userInfo.uid=Number(e.uid),this.automaticInitData={audio_transfer:typeof e.audio_transfer!="undefined"?e.audio_transfer:0,is_language_diff:typeof e.is_language_diff!="undefined"?e.is_language_diff:0,automatic_open:typeof e.automatic_open!="undefined"?e.automatic_open:0}},initAction(e){this.roomType==Fe.CALL&&(this.actionType==H.ANSWER?this.initActionAnswer(e):this.actionType==H.CALL&&this.initActionCall())},initView(e){if(C("error","at pagesCall/chat-view-init.mixin.js:213","----> callViewData "+JSON.stringify(e)),getApp().globalData.curCallId=Xe.WAITING,this.addLogOnLoad(e),this.openType=e.openType,this.roomType=e.roomType,this.callType=e.callType,this.actionType=e.actionType,this.fromType=e.fromType,e.roomInfo&&(this.needCheckFace=e.roomInfo.whether_detect_faces,this.isCreateAgoraRoom=e.roomInfo.create_agora_room||0),this.initUser(e.user),e.videoInfo&&this.initVideoInfo(e.videoInfo),this.isLoading=!0,(this.actionType==H.CALL||this.actionType==H.ANSWER)&&(this.isRingMute=Re("call_ring_mute")==1),this.$nextTick(()=>{this.initLoadingView()}),_(this.userInfo)||_(this.callType)){this.closeCallChat(this.closeFromDef,this.closeTypeDef,{});return}this.initDataObj=e,this.checkPermission("init").then(()=>{this.permissionStatus=1,this.permissionHasSetting=!1,this.initAction(e)})}},onShow(){this.permissionHasSetting&&this.permissionStatus==2&&(this.permissionHasSetting=!1,this.checkPermission("show").then(()=>{this.permissionStatus=1,this.initAction(this.initDataObj)}))}},ra=ue("Agora-RTC-ChannelModule"),Ut="io.agora.rtc.",Vt=ue("globalEvent"),Ue=new Map,Pi=class e{constructor(t){this._listeners=new Map,this.channelId=t}_callMethod(t,i){return new Promise((o,a)=>{ra.callMethod({method:t,args:ke({channelId:this.channelId},i)},s=>{s&&s.code?a(s):o(s)})})}static create(t){return U(this,null,function*(){return Ue.get(t)||(yield new Promise((i,o)=>{ra.callMethod({method:"create",args:{channelId:t}},a=>{a&&a.code?o(a):i(a)})}),Ue.set(t,new e(t))),Ue.get(t)})}static destroyAll(){Ue.forEach(t=>U(this,null,function*(){t.removeAllListeners(),yield t._callMethod("destroy")})),Ue.clear()}destroy(){return this.removeAllListeners(),Ue.delete(this.channelId),this._callMethod("destroy")}addListener(t,i){let o=s=>{let{channelId:r,data:l}=s;r===this.channelId&&i(...l)},a=this._listeners.get(t);return a===void 0&&(a=new Map,this._listeners.set(t,a)),Vt.addEventListener(Ut+t,o),a.set(i,o),{remove:()=>{this.removeListener(t,i)}}}removeListener(t,i){let o=this._listeners.get(t);o!==void 0&&(Vt.removeEventListener(Ut+t,o.get(i)),o.delete(i))}removeAllListeners(t){if(t===void 0){this._listeners.forEach((i,o)=>{Vt.removeAllEventListeners(Ut+o)}),this._listeners.clear();return}Vt.removeAllEventListeners(Ut+t),this._listeners.delete(t)}setClientRole(t,i){return this._callMethod("setClientRole",{role:t,options:i})}joinChannel(t,i,o,a){return this._callMethod("joinChannel",{token:t,optionalInfo:i,optionalUid:o,options:a})}joinChannelWithUserAccount(t,i,o){return this._callMethod("joinChannelWithUserAccount",{token:t,userAccount:i,options:o})}leaveChannel(){return this._callMethod("leaveChannel")}renewToken(t){return this._callMethod("renewToken",{token:t})}getConnectionState(){return this._callMethod("getConnectionState")}publish(){return this._callMethod("publish")}unpublish(){return this._callMethod("unpublish")}getCallId(){return this._callMethod("getCallId")}adjustUserPlaybackSignalVolume(t,i){return this._callMethod("adjustUserPlaybackSignalVolume",{uid:t,volume:i})}muteRemoteAudioStream(t,i){return this._callMethod("muteRemoteAudioStream",{uid:t,muted:i})}muteAllRemoteAudioStreams(t){return this._callMethod("muteAllRemoteAudioStreams",{muted:t})}setDefaultMuteAllRemoteAudioStreams(t){return this._callMethod("setDefaultMuteAllRemoteAudioStreams",{muted:t})}muteAllRemoteVideoStreams(t){return this._callMethod("muteAllRemoteVideoStreams",{muted:t})}muteRemoteVideoStream(t,i){return this._callMethod("muteRemoteVideoStream",{uid:t,muted:i})}setDefaultMuteAllRemoteVideoStreams(t){return this._callMethod("setDefaultMuteAllRemoteVideoStreams",{muted:t})}enableRemoteSuperResolution(t,i){return this._callMethod("enableRemoteSuperResolution",{uid:t,enabled:i})}setRemoteVoicePosition(t,i,o){return this._callMethod("setRemoteVoicePosition",{uid:t,pan:i,gain:o})}addPublishStreamUrl(t,i){return this._callMethod("addPublishStreamUrl",{url:t,transcodingEnabled:i})}removePublishStreamUrl(t){return this._callMethod("removePublishStreamUrl",{url:t})}setLiveTranscoding(t){return this._callMethod("setLiveTranscoding",{transcoding:t})}startChannelMediaRelay(t){return this._callMethod("startChannelMediaRelay",{channelMediaRelayConfiguration:t})}stopChannelMediaRelay(){return this._callMethod("stopChannelMediaRelay")}updateChannelMediaRelay(t){return this._callMethod("updateChannelMediaRelay",{channelMediaRelayConfiguration:t})}setRemoteDefaultVideoStreamType(t){return this._callMethod("setRemoteDefaultVideoStreamType",{streamType:t})}setRemoteVideoStreamType(t,i){return this._callMethod("setRemoteVideoStreamType",{uid:t,streamType:i})}setRemoteUserPriority(t,i){return this._callMethod("setRemoteUserPriority",{uid:t,userPriority:i})}registerMediaMetadataObserver(){return this._callMethod("registerMediaMetadataObserver")}sendMetadata(t){return this._callMethod("sendMetadata",{metadata:t})}setMaxMetadataSize(t){return this._callMethod("setMaxMetadataSize",{size:t})}unregisterMediaMetadataObserver(){return this._callMethod("unregisterMediaMetadataObserver")}enableEncryption(t,i){return this._callMethod("enableEncryption",{enabled:t,config:i})}setEncryptionMode(t){return this._callMethod("setEncryptionMode",{encryptionMode:t})}setEncryptionSecret(t){return this._callMethod("setEncryptionSecret",{secret:t})}addInjectStreamUrl(t,i){return this._callMethod("addInjectStreamUrl",{url:t,config:i})}removeInjectStreamUrl(t){return this._callMethod("removeInjectStreamUrl",{url:t})}createDataStream(t,i){return this._callMethod("createDataStream",{reliable:t,ordered:i})}createDataStreamWithConfig(t){return this._callMethod("createDataStream",{config:t})}sendStreamMessage(t,i){return this._callMethod("sendStreamMessage",{streamId:t,message:i})}muteLocalAudioStream(t){return this._callMethod("muteLocalAudioStream",{muted:t})}muteLocalVideoStream(t){return this._callMethod("muteLocalVideoStream",{muted:t})}pauseAllChannelMediaRelay(){return this._callMethod("pauseAllChannelMediaRelay")}resumeAllChannelMediaRelay(){return this._callMethod("resumeAllChannelMediaRelay")}setAVSyncSource(t,i){return this._callMethod("setAVSyncSource",{channelId:t,uid:i})}startRtmpStreamWithTranscoding(t,i){return this._callMethod("startRtmpStreamWithTranscoding",{url:t,transcoding:i})}startRtmpStreamWithoutTranscoding(t){return this._callMethod("startRtmpStreamWithoutTranscoding",{url:t})}stopRtmpStream(t){return this._callMethod("stopRtmpStream",{url:t})}updateRtmpTranscoding(t){return this._callMethod("updateRtmpTranscoding",{transcoding:t})}},Ir=ue("Agora-RTC-EngineModule"),Ht="io.agora.rtc.",Wt=ue("globalEvent"),ye,Ni=class e{constructor(){this._listeners=new Map}static _callMethod(t,i){return new Promise((o,a)=>{Ir.callMethod({method:t,args:i},s=>{s&&s.code?a(s):o(s)})})}static instance(){if(ye)return ye;throw new Error("please create RtcEngine first")}static getSdkVersion(){return U(this,null,function*(){return e._callMethod("getSdkVersion")})}static getErrorDescription(t){return U(this,null,function*(){return e._callMethod("getErrorDescription",{error:t})})}static create(t){return U(this,null,function*(){return e.createWithContext(new dt(t))})}static createWithAreaCode(t,i){return U(this,null,function*(){return e.createWithContext(new dt(t,{areaCode:[i]}))})}static createByExtension(t,i){return U(this,null,function*(){return e.createWithExtension(new dt(t),i)})}static createWithConfig(t){return U(this,null,function*(){return this.createWithContext(t)})}static createWithContext(t){return U(this,null,function*(){if(ye)return ye;let i;if(t.areaCode){let o=0;t.areaCode.forEach(a=>{o|=a}),i=o}return yield e._callMethod("create",{config:He(ke({},t),{areaCode:i}),appType:14}),ye=new e,ye})}static createWithExtension(t,i){return U(this,null,function*(){if(ye)return ye;let o;if(t.areaCode){let a=0;t.areaCode.forEach(s=>{a|=s}),o=a}return yield e._callMethod("create",{config:He(ke({},t),{areaCode:o,extension:i||[]}),appType:14}),ye=new e,ye})}destroy(){return Pi.destroyAll(),this.removeAllListeners(),ye=void 0,e._callMethod("destroy")}addListener(t,i){let o=s=>{let{channelId:r,data:l}=s;r===void 0&&i(...l)},a=this._listeners.get(t);return a===void 0&&(a=new Map,this._listeners.set(t,a)),Wt.addEventListener(Ht+t,o),a.set(i,o),{remove:()=>{this.removeListener(t,i)}}}removeListener(t,i){let o=this._listeners.get(t);o!==void 0&&(Wt.removeEventListener(Ht+t,o.get(i)),o.delete(i))}removeAllListeners(t){if(t===void 0){this._listeners.forEach((i,o)=>{Wt.removeAllEventListeners(Ht+o)}),this._listeners.clear();return}Wt.removeAllEventListeners(Ht+t),this._listeners.delete(t)}setChannelProfile(t){return e._callMethod("setChannelProfile",{profile:t})}setClientRole(t,i){return e._callMethod("setClientRole",{role:t,options:i})}joinChannel(t,i,o,a,s){return e._callMethod("joinChannel",{token:t,channelName:i,optionalInfo:o,optionalUid:a,options:s})}switchChannel(t,i,o){return e._callMethod("switchChannel",{token:t,channelName:i,options:o})}leaveChannel(){return e._callMethod("leaveChannel")}renewToken(t){return e._callMethod("renewToken",{token:t})}enableWebSdkInteroperability(t){return e._callMethod("enableWebSdkInteroperability",{enabled:t})}getConnectionState(){return e._callMethod("getConnectionState")}getCallId(){return e._callMethod("getCallId")}rate(t,i,o){return e._callMethod("rate",{callId:t,rating:i,description:o})}complain(t,i){return e._callMethod("complain",{callId:t,description:i})}setLogFile(t){return e._callMethod("setLogFile",{filePath:t})}setLogFilter(t){return e._callMethod("setLogFilter",{filter:t})}setLogFileSize(t){return e._callMethod("setLogFileSize",{fileSizeInKBytes:t})}setParameters(t){return e._callMethod("setParameters",{parameters:t})}getUserInfoByUid(t){return e._callMethod("getUserInfoByUid",{uid:t})}getUserInfoByUserAccount(t){return e._callMethod("getUserInfoByUserAccount",{userAccount:t})}joinChannelWithUserAccount(t,i,o,a){return e._callMethod("joinChannelWithUserAccount",{token:t,channelName:i,userAccount:o,options:a})}registerLocalUserAccount(t,i){return e._callMethod("registerLocalUserAccount",{appId:t,userAccount:i})}adjustPlaybackSignalVolume(t){return e._callMethod("adjustPlaybackSignalVolume",{volume:t})}adjustRecordingSignalVolume(t){return e._callMethod("adjustRecordingSignalVolume",{volume:t})}adjustUserPlaybackSignalVolume(t,i){return e._callMethod("adjustUserPlaybackSignalVolume",{uid:t,volume:i})}disableAudio(){return e._callMethod("disableAudio")}enableAudio(){return e._callMethod("enableAudio")}enableAudioVolumeIndication(t,i,o){return e._callMethod("enableAudioVolumeIndication",{interval:t,smooth:i,report_vad:o})}enableLocalAudio(t){return e._callMethod("enableLocalAudio",{enabled:t})}muteAllRemoteAudioStreams(t){return e._callMethod("muteAllRemoteAudioStreams",{muted:t})}muteLocalAudioStream(t){return e._callMethod("muteLocalAudioStream",{muted:t})}muteRemoteAudioStream(t,i){return e._callMethod("muteRemoteAudioStream",{uid:t,muted:i})}setAudioProfile(t,i){return e._callMethod("setAudioProfile",{profile:t,scenario:i})}setDefaultMuteAllRemoteAudioStreams(t){return e._callMethod("setDefaultMuteAllRemoteAudioStreams",{muted:t})}disableVideo(){return e._callMethod("disableVideo")}enableLocalVideo(t){return e._callMethod("enableLocalVideo",{enabled:t})}enableVideo(){return e._callMethod("enableVideo")}muteAllRemoteVideoStreams(t){return e._callMethod("muteAllRemoteVideoStreams",{muted:t})}muteLocalVideoStream(t){return e._callMethod("muteLocalVideoStream",{muted:t})}muteRemoteVideoStream(t,i){return e._callMethod("muteRemoteVideoStream",{uid:t,muted:i})}setBeautyEffectOptions(t,i){return e._callMethod("setBeautyEffectOptions",{enabled:t,options:i})}enableRemoteSuperResolution(t,i){return e._callMethod("enableRemoteSuperResolution",{uid:t,enabled:i})}setDefaultMuteAllRemoteVideoStreams(t){return e._callMethod("setDefaultMuteAllRemoteVideoStreams",{muted:t})}setVideoEncoderConfiguration(t){return e._callMethod("setVideoEncoderConfiguration",{config:t})}startPreview(){return e._callMethod("startPreview")}stopPreview(){return e._callMethod("stopPreview")}adjustAudioMixingPlayoutVolume(t){return e._callMethod("adjustAudioMixingPlayoutVolume",{volume:t})}adjustAudioMixingPublishVolume(t){return e._callMethod("adjustAudioMixingPublishVolume",{volume:t})}adjustAudioMixingVolume(t){return e._callMethod("adjustAudioMixingVolume",{volume:t})}getAudioMixingCurrentPosition(){return e._callMethod("getAudioMixingCurrentPosition")}getAudioMixingDuration(t){return e._callMethod("getAudioMixingDuration",{filePath:t})}getAudioMixingPlayoutVolume(){return e._callMethod("getAudioMixingPlayoutVolume")}getAudioMixingPublishVolume(){return e._callMethod("getAudioMixingPublishVolume")}pauseAudioMixing(){return e._callMethod("pauseAudioMixing")}resumeAudioMixing(){return e._callMethod("resumeAudioMixing")}setAudioMixingPitch(t){return e._callMethod("setAudioMixingPitch",{pitch:t})}setAudioMixingPosition(t){return e._callMethod("setAudioMixingPosition",{pos:t})}startAudioMixing(t,i,o,a,s){return e._callMethod("startAudioMixing",{filePath:t,loopback:i,replace:o,cycle:a,startPos:s})}stopAudioMixing(){return e._callMethod("stopAudioMixing")}getEffectsVolume(){return e._callMethod("getEffectsVolume")}pauseAllEffects(){return e._callMethod("pauseAllEffects")}pauseEffect(t){return e._callMethod("pauseEffect",{soundId:t})}playEffect(t,i,o,a,s,r,l,c){return e._callMethod("playEffect",{soundId:t,filePath:i,loopCount:o,pitch:a,pan:s,gain:r,publish:l,startPos:c})}setEffectPosition(t,i){return e._callMethod("setEffectPosition",{soundId:t,pos:i})}getEffectDuration(t){return e._callMethod("getEffectDuration",{filePath:t})}getEffectCurrentPosition(t){return e._callMethod("getEffectCurrentPosition",{soundId:t})}preloadEffect(t,i){return e._callMethod("preloadEffect",{soundId:t,filePath:i})}resumeAllEffects(){return e._callMethod("resumeAllEffects")}resumeEffect(t){return e._callMethod("resumeEffect",{soundId:t})}setEffectsVolume(t){return e._callMethod("setEffectsVolume",{volume:t})}setVolumeOfEffect(t,i){return e._callMethod("setVolumeOfEffect",{soundId:t,volume:i})}stopAllEffects(){return e._callMethod("stopAllEffects")}stopEffect(t){return e._callMethod("stopEffect",{soundId:t})}unloadEffect(t){return e._callMethod("unloadEffect",{soundId:t})}setLocalVoiceChanger(t){return e._callMethod("setLocalVoiceChanger",{voiceChanger:t})}setLocalVoiceEqualization(t,i){return e._callMethod("setLocalVoiceEqualization",{bandFrequency:t,bandGain:i})}setLocalVoicePitch(t){return e._callMethod("setLocalVoicePitch",{pitch:t})}setLocalVoiceReverb(t,i){return e._callMethod("setLocalVoiceReverb",{reverbKey:t,value:i})}setLocalVoiceReverbPreset(t){return e._callMethod("setLocalVoiceReverbPreset",{preset:t})}enableSoundPositionIndication(t){return e._callMethod("enableSoundPositionIndication",{enabled:t})}setRemoteVoicePosition(t,i,o){return e._callMethod("setRemoteVoicePosition",{uid:t,pan:i,gain:o})}addPublishStreamUrl(t,i){return e._callMethod("addPublishStreamUrl",{url:t,transcodingEnabled:i})}removePublishStreamUrl(t){return e._callMethod("removePublishStreamUrl",{url:t})}setLiveTranscoding(t){return e._callMethod("setLiveTranscoding",{transcoding:t})}startChannelMediaRelay(t){return e._callMethod("startChannelMediaRelay",{channelMediaRelayConfiguration:t})}stopChannelMediaRelay(){return e._callMethod("stopChannelMediaRelay")}updateChannelMediaRelay(t){return e._callMethod("updateChannelMediaRelay",{channelMediaRelayConfiguration:t})}isSpeakerphoneEnabled(){return e._callMethod("isSpeakerphoneEnabled")}setDefaultAudioRoutetoSpeakerphone(t){return e._callMethod("setDefaultAudioRoutetoSpeakerphone",{defaultToSpeaker:t})}setEnableSpeakerphone(t){return e._callMethod("setEnableSpeakerphone",{enabled:t})}enableInEarMonitoring(t){return e._callMethod("enableInEarMonitoring",{enabled:t})}setInEarMonitoringVolume(t){return e._callMethod("setInEarMonitoringVolume",{volume:t})}enableDualStreamMode(t){return e._callMethod("enableDualStreamMode",{enabled:t})}setRemoteDefaultVideoStreamType(t){return e._callMethod("setRemoteDefaultVideoStreamType",{streamType:t})}setRemoteVideoStreamType(t,i){return e._callMethod("setRemoteVideoStreamType",{uid:t,streamType:i})}setLocalPublishFallbackOption(t){return e._callMethod("setLocalPublishFallbackOption",{option:t})}setRemoteSubscribeFallbackOption(t){return e._callMethod("setRemoteSubscribeFallbackOption",{option:t})}setRemoteUserPriority(t,i){return e._callMethod("setRemoteUserPriority",{uid:t,userPriority:i})}disableLastmileTest(){return e._callMethod("disableLastmileTest")}enableLastmileTest(){return e._callMethod("enableLastmileTest")}startEchoTest(t,i){return console.assert(t===void 0||i===void 0,"Only need one of the params"),e._callMethod("startEchoTest",{intervalInSeconds:t,config:i})}startLastmileProbeTest(t){return e._callMethod("startLastmileProbeTest",{config:t})}stopEchoTest(){return e._callMethod("stopEchoTest")}stopLastmileProbeTest(){return e._callMethod("stopLastmileProbeTest")}registerMediaMetadataObserver(){return e._callMethod("registerMediaMetadataObserver")}sendMetadata(t){return e._callMethod("sendMetadata",{metadata:t})}setMaxMetadataSize(t){return e._callMethod("setMaxMetadataSize",{size:t})}unregisterMediaMetadataObserver(){return e._callMethod("unregisterMediaMetadataObserver")}addVideoWatermark(t,i){return e._callMethod("addVideoWatermark",{watermarkUrl:t,options:i})}clearVideoWatermarks(){return e._callMethod("clearVideoWatermarks")}enableEncryption(t,i){return e._callMethod("enableEncryption",{enabled:t,config:i})}setEncryptionMode(t){return e._callMethod("setEncryptionMode",{encryptionMode:t})}setEncryptionSecret(t){return e._callMethod("setEncryptionSecret",{secret:t})}startAudioRecording(t,i,o){return e._callMethod("startAudioRecording",{filePath:t,sampleRate:i,quality:o})}startAudioRecordingWithConfig(t){return e._callMethod("startAudioRecording",{config:t})}startRhythmPlayer(t,i,o){return e._callMethod("startRhythmPlayer",{sound1:t,sound2:i,config:o})}stopRhythmPlayer(){return e._callMethod("stopRhythmPlayer")}configRhythmPlayer(t){return e._callMethod("configRhythmPlayer",t)}stopAudioRecording(){return e._callMethod("stopAudioRecording")}addInjectStreamUrl(t,i){return e._callMethod("addInjectStreamUrl",{url:t,config:i})}removeInjectStreamUrl(t){return e._callMethod("removeInjectStreamUrl",{url:t})}enableFaceDetection(t){return e._callMethod("enableFaceDetection",{enabled:t})}enableFaceDetectionIos(t){return e._callMethod("enableFaceDetection",{enable:t})}getCameraMaxZoomFactor(){return e._callMethod("getCameraMaxZoomFactor")}isCameraAutoFocusFaceModeSupported(){return e._callMethod("isCameraAutoFocusFaceModeSupported")}isCameraExposurePositionSupported(){return e._callMethod("isCameraExposurePositionSupported")}isCameraFocusSupported(){return e._callMethod("isCameraFocusSupported")}isCameraTorchSupported(){return e._callMethod("isCameraTorchSupported")}isCameraZoomSupported(){return e._callMethod("isCameraZoomSupported")}setCameraAutoFocusFaceModeEnabled(t){return e._callMethod("setCameraAutoFocusFaceModeEnabled",{enabled:t})}setCameraCapturerConfiguration(t){return e._callMethod("setCameraCapturerConfiguration",{config:t})}setCameraExposurePosition(t,i){return e._callMethod("setCameraExposurePosition",{positionXinView:t,positionYinView:i})}setCameraFocusPositionInPreview(t,i){return e._callMethod("setCameraFocusPositionInPreview",{positionX:t,positionY:i})}setCameraTorchOn(t){return e._callMethod("setCameraTorchOn",{isOn:t})}setCameraZoomFactor(t){return e._callMethod("setCameraZoomFactor",{factor:t})}switchCamera(){return e._callMethod("switchCamera")}createDataStream(t,i){return e._callMethod("createDataStream",{reliable:t,ordered:i})}createDataStreamWithConfig(t){return e._callMethod("createDataStream",{config:t})}sendStreamMessage(t,i){return e._callMethod("sendStreamMessage",{streamId:t,message:i})}sendCustomReportMessage(t,i,o,a,s){return e._callMethod("sendCustomReportMessage",{id:t,category:i,event:o,label:a,value:s})}setAudioSessionOperationRestriction(t){return e._callMethod("setAudioSessionOperationRestriction",{restriction:t})}getNativeHandle(){return e._callMethod("getNativeHandle")}enableDeepLearningDenoise(t){return e._callMethod("enableDeepLearningDenoise",{enabled:t})}setCloudProxy(t){return e._callMethod("setCloudProxy",{proxyType:t})}uploadLogFile(){return e._callMethod("uploadLogFile")}setLocalAccessPoint(t){return e._callMethod("setLocalAccessPoint",{config:t})}setAudioEffectParameters(t,i,o){return e._callMethod("setAudioEffectParameters",{preset:t,param1:i,param2:o})}setVoiceBeautifierParameters(t,i,o){return e._callMethod("setVoiceBeautifierParameters",{preset:t,param1:i,param2:o})}setAudioEffectPreset(t){return e._callMethod("setAudioEffectPreset",{preset:t})}setVoiceBeautifierPreset(t){return e._callMethod("setVoiceBeautifierPreset",{preset:t})}setVoiceConversionPreset(t){return e._callMethod("setVoiceConversionPreset",{preset:t})}pauseAllChannelMediaRelay(){return e._callMethod("pauseAllChannelMediaRelay")}resumeAllChannelMediaRelay(){return e._callMethod("resumeAllChannelMediaRelay")}enableVirtualBackground(t,i){return e._callMethod("enableVirtualBackground",{enabled:t,backgroundSource:i})}getAudioFileInfo(t){return e._callMethod("getAudioFileInfo",{filePath:t})}getAudioTrackCount(){return e._callMethod("getAudioTrackCount")}selectAudioTrack(t){return e._callMethod("selectAudioTrack",{index:t})}setAudioMixingDualMonoMode(t){return e._callMethod("setAudioMixingDualMonoMode",{mode:t})}setAudioMixingPlaybackSpeed(t){return e._callMethod("setAudioMixingPlaybackSpeed",{speed:t})}takeSnapshot(t,i,o){return e._callMethod("takeSnapshot",{channel:t,uid:i,filePath:o})}enableContentInspect(t,i){return e._callMethod("enableContentInspect",{enabled:t,config:i})}enableWirelessAccelerate(t){return e._callMethod("enableWirelessAccelerate",{enabled:t})}setAgoraLibPath(t){return e._callMethod("setAgoraLibPath",{path:t})}setColorEnhanceOptions(t,i){return e._callMethod("setColorEnhanceOptions",{enabled:t,options:i})}setLowLightEnhanceOptions(t,i){return e._callMethod("setLowLightEnhanceOptions",{enabled:t,options:i})}setVideoDenoiserOptions(t,i){return e._callMethod("setVideoDenoiserOptions",{enabled:t,options:i})}startRecording(t){return e._callMethod("startRecording",{config:t})}startRtmpStreamWithTranscoding(t,i){return e._callMethod("startRtmpStreamWithTranscoding",{url:t,transcoding:i})}startRtmpStreamWithoutTranscoding(t){return e._callMethod("startRtmpStreamWithoutTranscoding",{url:t})}stopRecording(){return e._callMethod("stopRecording")}stopRtmpStream(t){return e._callMethod("stopRtmpStream",{url:t})}updateRtmpTranscoding(t){return e._callMethod("updateRtmpTranscoding",{transcoding:t})}setAVSyncSource(t,i){return e._callMethod("setAVSyncSource",{channelId:t,uid:i})}enableExtension(t,i,o){return e._callMethod("enableExtension",{provider:t,extension:i,enable:o})}enableLocalVoicePitchCallback(t){return e._callMethod("enableLocalVoicePitchCallback",{interval:t})}enableSpatialAudio(t){return e._callMethod("enableSpatialAudio",{enabled:t})}setRemoteUserSpatialAudioParams(t,i){return e._callMethod("setRemoteUserSpatialAudioParams",{uid:t,params:i})}startScreenCapture(t){return e._callMethod("startScreenCapture",{parameters:t})}stopScreenCapture(){return e._callMethod("stopScreenCapture")}updateScreenCaptureParameters(t){return e._callMethod("updateScreenCaptureParameters",{parameters:t})}setExtensionProperty(t,i,o,a){return e._callMethod("setExtensionProperty",{provider:t,extension:i,key:o,property:a})}},ua=(e=>(e[e.Default=0]="Default",e[e.SpeechStandard=1]="SpeechStandard",e[e.MusicStandard=2]="MusicStandard",e[e.MusicStandardStereo=3]="MusicStandardStereo",e[e.MusicHighQuality=4]="MusicHighQuality",e[e.MusicHighQualityStereo=5]="MusicHighQualityStereo",e))(ua||{}),ha=(e=>(e[e.Stopped=0]="Stopped",e[e.Starting=1]="Starting",e[e.Decoding=2]="Decoding",e[e.Frozen=3]="Frozen",e[e.Failed=4]="Failed",e))(ha||{}),da=(e=>(e[e.Default=0]="Default",e[e.ChatRoomEntertainment=1]="ChatRoomEntertainment",e[e.Education=2]="Education",e[e.GameStreaming=3]="GameStreaming",e[e.ShowRoom=4]="ShowRoom",e[e.ChatRoomGaming=5]="ChatRoomGaming",e[e.IOT=6]="IOT",e[e.MEETING=8]="MEETING",e))(da||{}),pa=(e=>(e[e.Communication=0]="Communication",e[e.LiveBroadcasting=1]="LiveBroadcasting",e[e.Game=2]="Game",e))(pa||{}),fa=(e=>(e[e.Min=-1]="Min",e[e.Fps1=1]="Fps1",e[e.Fps7=7]="Fps7",e[e.Fps10=10]="Fps10",e[e.Fps15=15]="Fps15",e[e.Fps24=24]="Fps24",e[e.Fps30=30]="Fps30",e[e.Fps60=60]="Fps60",e))(fa||{}),ma=(e=>(e[e.Standard=0]="Standard",e[e.Compatible=-1]="Compatible",e))(ma||{}),ga=(e=>(e[e.Auto=0]="Auto",e[e.Enabled=1]="Enabled",e[e.Disabled=2]="Disabled",e))(ga||{}),_a=(e=>(e[e.Stopped=0]="Stopped",e[e.Starting=1]="Starting",e[e.Decoding=2]="Decoding",e[e.Frozen=3]="Frozen",e[e.Failed=4]="Failed",e))(_a||{}),wa=(e=>(e[e.Hidden=1]="Hidden",e[e.Fit=2]="Fit",e[e.Adaptive=3]="Adaptive",e[e.FILL=4]="FILL",e))(wa||{}),Bi=(e=>(e[e.High=0]="High",e[e.Low=1]="Low",e))(Bi||{});function ya(e){D.isAndroid?Ci(1):(Ln(),typeof e=="function"&&xn(e))}function Ca(e,t){D.isAndroid?Ci(0):(In(t),e&&kn())}function Mr(e){let t=`${ta("apps",!1)}agora_log/`;return e==-1?t:`${t}${getApp().globalData.uid}_${e}.log`}function la(e){return e==3||e==4||e==5||e==6?0:1}var Fr={mixins:[Lr,xr],data(){return{userInfo:{},videoInfo:!1,callType:0,actionType:0,openType:0,fromType:0,roomType:0,isConnect:!1,isNavigateBack:!1,remoteUid:0,localUid:10,roomInfo:{},engine:void 0,isClose:!1,hangUpTips:"",endTopUpData:!1,hasAddEngineListener:!1,hasHandleOpenEndMsg:!1,isClickHangUp:!1,connectLostTimeOut:!1,createLog:!1,upLog:!1,networkStatus:1,networkStatusLocal:1,networkStatusRemote:1,networkStatusRemoteBadShow:!1,networkStatusRemoteBadTiming:!1,isRefuseAnswer:!1,closeCallAgain:!1,isCloseExecute:!1,closeFrom:0,closeType:0,closeCurConnectStatus:!1,closeCurUser:!1,closeCurDuration:0,isHandleFirstFrame:!1,snapshotImagePath:"",girlCheckNoFaceCount:0,callFromLive:!1,CALL_OPEN_TYPE:Ze,ringTipTop:0,ringTipLeft:uni.upx2px(132),showRingTip:!1}},methods:{$str:h,clickVoiceRemote(e){this.engine.muteRemoteAudioStream(this.userInfo.uid,!e)},clickCameraSwitch(){this.engine.switchCamera()},clickHangup(e,t,i){if(e&&e.stopPropagation(),_(this.roomInfo)||_(this.roomInfo.room_id)){this.isClickHangUp=!0,this.addLogHangUpSelf(),this.closeCallChat(this.closeFromDef,this.closeTypeDef,{},i);return}if(t==0&&this.hangUpTips!="")ge(h("tips"),this.hangUpTips,()=>{this.isClickHangUp=!0,this.isRefuseAnswer=this.actionType==H.ANSWER,this.addLogHangUpSelf(),this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{})},"",h("hangUp"));else{if(t==1){let o=h("call.hangUpTip",{chatType:qe(this.callType)});ge(h("tips"),o,()=>{this.isClickHangUp=!0,this.addLogHangUpSelf(),this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{})},"",h("hangUp"));return}this.isClickHangUp=!0,this.addLogHangUpSelf(),t==0&&(this.isRefuseAnswer=this.actionType==H.ANSWER),this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{}),C("error","at pagesCall/chat-view.mixin.js:126","\u70B9\u51FB\u6302\u65AD ... "+t)}},clickAnswer(e){e&&e.stopPropagation(),this.answerChat().then(()=>this.initEngine()).then(()=>{if(this.isCreateAgoraRoom){let t={room_id:this.roomInfo.room_id};M.request("/call/notice-join-room",t,!1,!1)}C("error","at pagesCall/chat-view.mixin.js:138","-----> clickAnswer finish ...")})},onSnapshotInterface(){let i=`${plus.io.convertLocalFileSystemURL("_doc").replace(`/apps/${plus.runtime.appid}/doc/`,"")}/files/call_${new Date().getTime()}.jpg`;this.engine.takeSnapshot("",this.userInfo.uid,i).then(o=>{setTimeout(()=>{uni.getFileInfo({filePath:i,success:()=>{this.snapshotImagePath=i,this.$refs.actionTimer.handleAndroidReport(i,()=>{this.snapshotImagePath="",Si(i,!0)})},fail:a=>{this.$refs.actionTimer.handleAndroidReport(null)}})},600)},o=>{this.$refs.actionTimer.handleAndroidReport(null)})},onTimerListener(e){this.callDuration=e.duration,this.callTotalDuration=e.total,e.total%this.heartInt==0&&this.reqHeart(),this.callTotalDuration==110&&this.handleFaceCheck(),D.isAndroid&&this.handleReceptionScreenshotAndroid()},reqHeart(){M.request("/call/heart",{room_id:this.roomInfo.room_id},!1,!0).then(e=>{},e=>{e&&e.ok==0&&this.closeCallChat(this.logEndApiHeartError,this.closeTypeHeart,{ok:0})})},ringPlay(){if(!this.isConnect&&!this.isClose){if(D.isAndroid){Ii();return}if(this.actionType==H.CALL){let e=ia();this.engine&&this.engine.playEffect(1009,e,-1,1,0,100,!1);return}Ii(this.actionType==H.CALL)}},ringStop(e){if(C("error","at pagesCall/chat-view.mixin.js:198","------> ring stop"),D.isAndroid){Mi();return}if(this.actionType==H.CALL){this.engine&&this.engine.stopAllEffects();return}let t=typeof e=="undefined"?this.isConnect:e;Mi(t)},handleFirstFrame(e){var t,i;if(this.isHandleFirstFrame)return;this.isHandleFirstFrame=!0,getApp().globalData.curCallId=this.roomInfo.room_id,he(h("connecting")),this.addLogEngine(`\u6536\u5230\u8FDC\u7A0B\u7B2C\u4E00\u5E27\uFF0C\u7528\u65F6 ${e}ms`),this.roomType==Fe.CALL&&this.ringStop(!0),this.addLog(`\u8BF7\u6C42 call/success ${this.roomInfo.room_id} \u5F00\u59CB`);let o={room_id:this.roomInfo.room_id};(t=this.roomInfo)!=null&&t.coach_basic&&(o.coach_basic=(i=this.roomInfo)==null?void 0:i.coach_basic),M.request("/call/success",o,!1,!1).then(a=>{if(this.addLog(`\u8BF7\u6C42 call/success ${this.roomInfo.room_id} ok = ${a.ok}`),a.ok==2){this.closeCallChat(this.logEndApiCallSuccessError,this.closeTypeHeart,{ok:2});return}a.ok==1&&Bt(a.data.balance)}),this.localUid=0,this.isConnect=!0,this.isLoading=!1,this.$nextTick(()=>{this.reqHeart(),this.$refs.actionTimer.startTimer(),this.$refs.msgView&&this.$refs.msgView.show(),this.showViewTop(),this.showViewBottomAction()}),setTimeout(()=>{uni.setKeepScreenOn({keepScreenOn:!0})},3e3),this.callType==q.VIDEO&&this.engine.setBeautyEffectOptions(!0,this.getBeautyOptions()),this.initAudioTranslate(),ya(a=>{C("error","at pagesCall/chat-view.mixin.js:260",`----> \u76D1\u6D4B\u5230 ${a==1?"\u622A\u5C4F":"\u5F55\u5C4F"} ...`),a==1?ge(h("tips"),h("pleaseDonTake"),"","",h("gotIt"),!1):(j("screen_record_warming",1),this.closeCallChat(this.closeFromScreenRecord,this.closeTypeDef,{}))})},setVideoStreamType(e){this.engine.setRemoteVideoStreamType(Number(this.userInfo.uid),e?Bi.Low:Bi.High)},enableFaceDetection(e){return U(this,null,function*(){if(this.callType==q.VIDEO&&this.needCheckFace){if(!D.isAndroid){this.engine.enableFaceDetectionIos(e);return}e&&(yield this.engine.enableLocalVideo(!1),yield this.engine.enableLocalVideo(!0)),yield this.engine.enableFaceDetection(e)}})},addListeners(){this.hasAddEngineListener||(this.engine.addListener("RemoteVideoStateChanged",(e,t,i,o)=>{t==_a.Starting&&this.callType==q.VIDEO&&(C("error","at pagesCall/chat-view.mixin.js:327","\u6536\u5230\u8FDC\u7A0B \u89C6\u9891 \u7B2C\u4E00\u9488 joinChannel \u5230\u6B64\u4E8B\u4EF6\u7684\u7528\u65F6 papapap "+o),this.handleFirstFrame(o),this.setVideoStreamType(!1))}),this.engine.addListener("RemoteAudioStateChanged",(e,t,i,o)=>{t==ha.Starting&&this.callType==q.VOICE&&(C("error","at pagesCall/chat-view.mixin.js:334","\u6536\u5230\u8FDC\u7A0B \u97F3\u9891 \u7B2C\u4E00\u9488 joinChannel \u5230\u6B64\u4E8B\u4EF6\u7684\u7528\u65F6 "+o),this.handleFirstFrame(o))}),this.engine.addListener("JoinChannelSuccess",(e,t,i)=>{C("error","at pagesCall/chat-view.mixin.js:339",`JoinChannelSuccess channel = ${e} uid = ${t}`),this.addLogEngine(`\u52A0\u5165\u9891\u9053\u6210\u529F ${i}ms`)}),this.engine.addListener("UserJoined",(e,t)=>{C("error","at pagesCall/chat-view.mixin.js:343","UserJoined uid = "+e+"   "+t),this.remoteUid=e,this.upLog=!0,clearInterval(this.timerUp),Re("call_show_report_tips")||(this.showReportTips=!0),Re("call_show_surface_local_tips")||(this.showSurfaceLocalTips=!0),this.addLogEngine(`\u7528\u6237\u8FDB\u5165\u623F\u95F4${e} ${t}ms`)}),this.engine.addListener("UserOffline",(e,t)=>{C("error","at pagesCall/chat-view.mixin.js:352","UserOffline uid = "+e+"    "+t),e==this.userInfo.uid&&(this.addLogHangUpEngine("\u5BF9\u65B9\u79BB\u7EBF"),this.closeCallChat(this.logEndUserOff,this.closeTypeTargetHangUp,{uid:e}))}),this.engine.addListener("Error",e=>{C("log","at pagesCall/chat-view.mixin.js:359","----> \u58F0\u7F51 SDK \u62A5\u9519 "+e);try{e!=18&&this.addLogHangUpEngine(`SDK \u62A5\u9519 ${JSON.stringify(e)}`)}catch(t){}}),this.engine.addListener("ConnectionLost",()=>{C("log","at pagesCall/chat-view.mixin.js:368","-----> ConnectionLost "),this.connectLostTimeOut=setTimeout(()=>{this.addLogHangUpEngine("SDK \u8FDE\u63A5\u4E22\u5931 lost"),this.closeCallChat(this.logEndConnectLost,this.closeTypeNetwork,{})},15e3)}),this.engine.addListener("ConnectionStateChanged",e=>{C("log","at pagesCall/chat-view.mixin.js:375","-----> ConnectionStateChanged "+e),e==3?this.connectLostTimeOut&&clearTimeout(this.connectLostTimeOut):e==5&&(this.addLogHangUpEngine("SDK \u8FDE\u63A5\u4E22\u5931 5"),this.closeCallChat(this.logEndConnectLost,this.closeTypeNetwork,{}))}),this.engine.addListener("NetworkQuality",(e,t,i)=>{if(e==0||e==getApp().globalData.uid){let o=la(i);o!=this.networkStatusLocal&&this.setVideoStreamType(o!=1),this.networkStatusLocal=o}else this.networkStatusRemote=la(i);this.networkStatusLocal&&this.networkStatusRemote?this.networkStatus=1:this.networkStatus=0,e!=0&&e!=getApp().globalData.uid&&this.onNetworkChangeRemote()}),this.engine.addListener("FacePositionChanged",(e,t,i)=>{C("error","at pagesCall/chat-view.mixin.js:401","-----> \u4EBA\u8138\u68C0\u6D4B\u89E6\u53D1\u56DE\u8C03 ---> "+e+" "+t,i),this.enableFaceDetection(!1),!_(i)?this.fiveFaceCheck?this.showBigRRemind||this.handleFirstMinRemindPop():this.handleFirstMinRemindPop():(this.showRemindPop(2),this.girlCheckNoFaceCount<=0&&M.request("/call/face-detection",{room_id:this.roomInfo.room_id}),this.girlCheckNoFaceCount+=1),this.fiveFaceCheck&&(this.fiveFaceCheck=!1)}),this.engine.addListener("ExtensionStarted",(e,t)=>{this.onAudioTranslationStarted(e,t)}),this.engine.addListener("ExtensionStopped",(e,t)=>{this.onAudioTranslationStopped(e,t)}),this.engine.addListener("ExtensionError",(e,t,i,o)=>{this.onAudioTranslationError(e,t,i,o)}),this.engine.addListener("ExtensionEvent",(e,t,i,o)=>{this.onAudioTranslationEvent(e,t,i,o)}),this.hasAddEngineListener=!0)},initEngine(){return U(this,null,function*(){if(this.isCloseExecute)return;if(this.engine=yield Ni.createByExtension(this.roomInfo.app_id,["AgoraMicrosoftExtension"]),this.engine.setChannelProfile(pa.Communication),this.engine.setAudioProfile(ua.SpeechStandard,da.ChatRoomGaming),this.createLog=!this.roomInfo.none_log,this.createLog){let t=Mr(this.roomInfo.room_id);this.engine.setLogFile(t)}let e=new Oi({bitrate:ma.Standard,dimensions:new Ri({width:640,height:480}),frameRate:fa.Fps15});if(this.engine.setVideoEncoderConfiguration(e),this.addListeners(),this.callType==q.VIDEO?(this.engine.enableDualStreamMode(!0),this.setVideoStreamType(!0),this.engine.enableVideo()):this.engine.setDefaultAudioRoutetoSpeakerphone(!0),D.isAndroid&&(yield this.engine.leaveChannel()),yield this.enableAudiTranslation(!0),!this.isConnect&&!this.isClickHangUp){D.isAndroid||(this.engine.setParameters('{"che.audio.keep.audiosession":true}'),this.engine.setParameters('{"che.audio.mix_with_others":false}'));try{let t=yield this.engine.joinChannel(this.roomInfo.token,this.roomInfo.room_id+"",null,Number(getApp().globalData.uid));this.addLogEngine(`\u521D\u59CB\u5316\u6210\u529F joinCode = ${t}`),C("error","at pagesCall/chat-view.mixin.js:479","----> \u901A\u8BDD\u52A0\u5165\u623F\u95F4 one "+t)}catch(t){`${this.roomInfo.room_id}${this.userInfo.uid}${this.callType}`,yield this.engine.leaveChannel(),yield this.engine.joinChannel(this.roomInfo.token,this.roomInfo.room_id+"",null,Number(getApp().globalData.uid))}}})},destroyEngine(){return U(this,null,function*(){yield this.destroyAutomatic(),this.engine&&(yield this.engine.leaveChannel(),yield this.engine.destroy(),this.engine=!1)})},closeCallChat(e,t,i,o){if(C("error","at pagesCall/chat-view.mixin.js:495",`\u6267\u884C \u5173\u95ED\u901A\u8BDD ..... ${e} ${t}`),this.isCloseExecute)return;Ca(!0),this.isCloseExecute=!0,setTimeout(()=>{this.isCloseExecute=!1},5e3),this.addLog(`closeChatView fromType = ${e} closeType = ${t}`);let a=this.$refs.actionTimer;if(a&&(this.closeCurDuration=a.totalDuration||0),e!=this.closeFromDef){let s={room_id:this.roomInfo.room_id,duration:this.closeCurDuration};if(e==this.closeFromSelf)s.end_type=Qe.GIRL_END;else if(e==this.closeFromConnectTimeout)s.end_type=Qe.GIRL_END,s.from_type=e;else{let r=e==this.logEndUserOff?this.userInfo:getApp().pubUser;s.end_type=r.is_auth?4:3,s.from_type=e,s.extra=JSON.stringify(i),s.target_uid=this.userInfo.uid}this.addLogClose(e,i),M.request("/call/end",s,!1)}this.isClose=!0,this.ringStop(void 0),this.timer&&clearInterval(this.timer),this.destroyEngine().then(()=>{if(this.addLog("destroyEngine finish"),typeof o=="function"){o();return}if(this.closeFrom=e,this.closeType=t,this.closeCurConnectStatus=this.isConnect,this.closeCurUser=this.userInfo,!this.isNavigateBack){this.isNavigateBack=!0;let s=gi(Je.CHAT);this.addLog(`execute close ${s}`),Lt(s,"slide-out-bottom",300),setTimeout(()=>{this.isNavigateBack=!1},500)}})},unloadCallChat(){if(this.closeFrom==this.closeFromScreenRecord){getApp().loginOut(),be(h("warning"),h("screenshot.warningTip",{whom:Ae(this.userInfo.sex)}),"",h("gotIt"));return}if(this.isConnect&&uni.$emit("event_call_close_after_success"),this.isConnectRefused){JSON.stringify(this.userInfo),this.callType;return}if(this.closeCallAgain&&this.showFocusLoading&&!this.isConnect){Yn(this.callType,this.userInfo,this.videoInfo,$n.ANSWER_ERROR);return}this.isRefuseAnswer&&uni.$emit("event_call_refuse_answer"),this.closeFrom!=this.closeFromSelf&&(this.closeCurConnectStatus&&!this.hasHandleOpenEndMsg?(this.hasHandleOpenEndMsg=!0,Y(me.callFinish,{room_id:this.roomInfo.room_id},"videoVoiceData",{callType:this.callType,duration:this.closeCurDuration,user:this.closeCurUser,endType:this.closeFrom,videoInfo:this.videoInfo,roomType:this.roomType}),this.hasHandleOpenEndMsg=!1):this.showCallEndToast(this.closeType,this.closeCurUser))},checkIsDialogPath(e){let t=["/pagesDialog/call-dropped"],i=e.indexOf("/pagesDialog")!=-1,o=t.indexOf(e)!=-1;return i&&!o},parseShowEvaluatePath(){let e=Tn(),t=[];for(let i=0,o=e.length;i<o;i++){let a=e[i];this.checkIsDialogPath(a.path)||t.push(a.fullPath)}return t[t.length-1]},showCallEvaluate(){if(this.roomType&&this.roomType==Fe.MATCH){if(this.callTotalDuration<10)return}else if(this.callTotalDuration<30)return;let e=this.parseShowEvaluatePath();uni.$emit(`event_${e}_show_call_evaluate`,this.userInfo,this.roomInfo.room_id)}},onShow(){},onHide(){},onLoad(e){e.room_type&&e.room_type==Fe.MATCH&&(this.isConnecting=!0),this.getOpenerEventChannel().on("callViewData",this.initView),uni.$on("event_chat_view_action",this.onChatViewActionListener),uni.$on("event_follow",this.onFollow),uni.$on("event_dialog_banned_close",this.onNoConnectCloseListener),uni.$on("event_no_connect_close_listener",this.onNoConnectCloseListener),uni.$on("event_banned_close_chat",this.onEventBannedCloseChat),uni.onKeyboardHeightChange(this.onKeyboardChange),uni.hideKeyboard(),uni.setKeepScreenOn({keepScreenOn:!0})},onUnload(){this.addLogUpload(),this.engine&&this.destroyEngine(),getApp().globalData.curCallId=Xe.NONE,uni.$off("event_chat_view_action",this.onChatViewActionListener),uni.$off("event_follow",this.onFollow),uni.$off("event_dialog_banned_close",this.onNoConnectCloseListener),uni.$off("event_no_connect_close_listener",this.onNoConnectCloseListener),uni.$off("event_banned_close_chat",this.onEventBannedCloseChat),uni.offKeyboardHeightChange(this.onKeyboardChange),this.clearRemindTimer(),this.unloadCallChat(),this.showCallEvaluate(),this.createLog&&this.upLog&&uni.$emit("event_agora_log",{room_id:this.roomInfo.room_id})},onBackPress(e){if(e.from=="backbutton")return!0}},Er={1:"\u5BF9\u65B9\u7528\u6237\u79BB\u5F00",2:"sdk \u62A5\u9519",3:"\u8FDE\u63A5\u4E22\u5931",7:"API \u521B\u5EFA\u5931\u8D25",8:"API \u521B\u5EFA\u62A5\u9519",9:"API \u63A5\u542C\u62A5\u9519",11:"\u5339\u914D\u7B49\u5F85\u8FDE\u63A5\u8D85\u65F6",20:"API match/success \u5931\u8D25",21:"API \u5FC3\u8DF3\u5931\u8D25",22:"\u6E38\u620F\u5339\u914D\u4E3B\u52A8",23:"\u81EA\u52A8\u6253\u62DB\u547C\u6CA1\u6709\u91D1\u5E01",24:"\u63A5\u542C\u65F6\u95F4\u8D85\u8FC7 call_exp_time",25:"api call success ok=2",26:"\u521B\u5EFA\u623F\u95F4\u4E3B\u64AD\u4F11\u606F",27:"\u7528\u6237\u65B9\u68C0\u6D4B\u4E3B\u64AD\u65B9\u65E0\u4EBA\u8138\u5F39\u6846",28:"\u4E3E\u62A5\u5F39\u6846",29:"\u5C01\u7981\u5F39\u6846",30:"call status \u9A8C\u8BC1\u5931\u8D25"},Dr={data(){return{logNeedUpload:!1,logList:[],logEndUserOff:1,logEndSDKError:2,logEndConnectLost:3,logEndApiCreateNo:7,logEndApiCreateError:8,logEndApiAnswer:9,logEndMatchConnectTimeout:11,logEndAnswerConnectTimeout:12,logEndApiMatchSuccessError:20,logEndApiHeartError:21,logEndByGameMatch:22,logEndAutoHasCoins:23,logEndAnswerExpTime:24,logEndApiCallSuccessError:25,logEndAnchorNoCancelRest:26,logEndNoFaceRemindPop:27,logEndReportPop:28,logEndBanned:29,logEndCallStatus:30,isShowCallEndToast:!1,closeFromDef:0,closeFromScreenRecord:100,closeFromConnectTimeout:101,closeFromSelf:1e4,closeTypeDef:0,closeTypeHeart:101,closeTypeTargetHangUp:102,closeTypeNetwork:103}},methods:{showCallEndToast(e,t){if(this.isClickHangUp){setTimeout(()=>{this.isClickHangUp=!1},3e3);return}if(this.isShowCallEndToast)return;let i,o=!1;switch(parseInt(e)){case 101:i=h("call.endTipDef"),o=!0;break;case 102:i=h("call.endTipBy",{whom:t.nickname});break;case 103:i=h("call.endTipNetwork"),o=!0;break;case 1:i=h("call.endTipBy",{whom:t.nickname});break;case 3:case 4:i=h("call.endTipBy",{whom:t.nickname});break;case 6:i=h("call.endTipNetwork"),o=!0;break;case 7:be(h("tips"),h("call.endTipSystem",{chatType:qe(this.callType)}),"",h("gotIt"));return;case 8:this.actionType==H.ANSWER&&(i=h("call.endTipBy",{whom:t.nickname}));break;default:typeof e=="string"&&(i=e)}C("error","at pagesCall/chat-view-log.mixin.js:114","\u6536\u5230\u663E\u793A \u7ED3\u675F toast \u7684\u6307\u4EE4 \u3002\u3002\u3002tipStr = "+i),!_(i)&&(this.isShowCallEndToast=!0,o?be(h("tips"),i,"",h("gotIt")):uni.showToast({title:i,duration:5e3,icon:"none",position:"center"}),setTimeout(()=>{this.isShowCallEndToast=!1},3e3))},getLogTimeStr(){let e=new Date;return`${getApp().getCTime()}(${_n(e,"M/d hh:mm:ss")})`},addLogOnLoad(e){this.logNeedUpload=e.user&&e.user.upload_call_log==1;let t=e.openType==Ze.DEF?"app\u5185":"\u901A\u77E5",i="\u666E\u901A",o=e.actionType==H.CALL?"\u62E8\u6253":"\u63A5\u542C",a=e.callType==q.VIDEO?"\u89C6\u9891":"\u8BED\u97F3",s=`onLoad \u4ECE${t}\u663E\u793A ${i}\u901A\u8BDD\uFF0C\u65B9\u5F0F\u662F${o}\uFF0C\u7C7B\u578B\u4E3A${a}`;e.user.call_free_min&&(s+="\uFF0C\u6709\u4E00\u5206\u949F\u514D\u8D39"),this.addLog(s)},addLogCreate(e){this.addLog("API \u521B\u5EFA\u6210\u529F")},addLogAnswer(){this.addLog("\u70B9\u51FB\u63A5\u542C")},addLogHangUpSelf(){this.addLog("\u4E3B\u52A8\u6302\u65AD")},addLogHangUpReport(){this.addLog("\u65E0\u4EBA\u8138\u4E3E\u62A5\u5F39\u6846\u6302\u65AD")},addLogHangUpMq(e){let t=null;e.a_type==2?t="\u901A\u8BDD\u7ED3\u675F":e.a_type==3?t="\u901A\u8BDD\u88AB\u62D2\u7EDD":e.end_type==2?t="\u5339\u914D\u4E0B\u4E00\u4E2A":e.end_type==5&&(t="\u5339\u914D\u8FDE\u63A5\u8D85\u65F6"),t&&this.addLog(`mq\u6302\u65AD ${t}`)},addLogHangUpEngine(e){this.addLog(e)},addLogEngine(e){this.addLog(e)},addLogClose(e){e==1e4?this.addLog("req /call/end"):this.addLog(`\u56E0\u4E3A ${Er[e]} \u5173\u95ED`)},addLogRoomId(e){this.logList.unshift(`${getApp().globalData.uid}-\u4E3B\u64AD\u7AEF`),this.logList.unshift(parseInt(e))},addLog(e){this.logNeedUpload&&(this.logList.push(`${this.getLogTimeStr()}mq-${na()?"1":"0"}: ${e}`),j("call_log",this.logList))},addLogUpload(){if(!this.logNeedUpload||!this.roomInfo.room_id||this.logList.length<=0)return;let e={room_id:this.roomInfo.room_id,extra:this.logList.join(" -> ")};M.request("/call/log",e,!1).then(t=>{je("call_log")})}}},de=getApp().globalData.window,Rr={mixins:[Dr],data(){return{isAndroid:D.isAndroid,sW:de.width,sH:de.height,safeB:de.safeBottom,statusBarH:de.statusBarHeight,isLoading:!1,videoW:0,videoH:0,videoObjectFit:"",videoIsPlay:!1,videoShowBlur:!1,videoShowCover:!0,showWaitingVideo:!1,avatarSmallUrl:"",avatarBigUrl:"",avatarBigIsShow:!1,giftSheetAsk:!1,heartInt:Wn.HEART_INTERVAL,isMuteVoice:!1,isMuteVideo:!1,cameraStatus:1,freeMinDuration:0,micStatus:1,keyboardShow:!1,isClickAnswer:!1,notAnswerTipTime:30,notAnswerHangUpTime:3,timerUp:null,isConnectRefused:!1,isConnecting:!1,giftList:[],showSurfaceMoveTip:!1,showAutomaticTip:!z("call_automatic_tip_close_1"),showAutomaticMsgTip:!1,showActionMoreTip:!z("call_action_more_tip_1"),viewTopCellTop:de.statusBarHeight+5,viewTopIsShow:!0,viewTopHideTimeout:!1,viewBottomActionIsShow:!0,viewBottomActionHideTimeout:!1,viewBaseActionIsShow:!0,viewMsgIsShow:!0,viewAutomaticIsShow:!1,isShowActionPop:!1,isShowBeautyPop:!1,callDuration:0,callTotalDuration:0,animAutomaticMsgTipCount:1,inputFocus:!1,isRingMute:!1,remindTimer:!1,fiveFaceCheck:!1,needCheckFace:!1,showReportTips:!1,showSurfaceLocalTips:!1,reportArrowLeft:0,timerIDList:[],showBigRRemind:!1,liveConnectingTop:de.height*.485,showInput:!1,isShowUserLabel:!1,newUserStyle:{},showLiveLeave:!1}},computed:{hangUpStr(){return this.actionType==H.CALL?h("cancel"):h("call.decline")},getTimerStr(){return xt(this.timerInt)},surfaceLocalTop(){return D.isAndroid?uni.upx2px(400)+de.statusBarHeight+de.navBarHeight+uni.upx2px(100):uni.upx2px(400)+de.statusBarHeight+de.navBarHeight+uni.upx2px(70)},callingStr(){let e=qe(this.callType);return this.actionType==H.CALL?h("call.callingTipCall",{him:Ae(this.userInfo.sex),chat:e}):this.actionType==H.ANSWER?h("call.callingTipAnswer",{chat:e}):""},chargeStr(){return this.userInfo.show_price!=1?"":this.userInfo.call_price},getNotAnswerTip(){return h("call.notAnswerTip",{he:Nt(this.userInfo.sex),call:qe(this.callType)})},networkTip(){if(this.networkStatus==1)return"";if(this.networkStatusLocal==0&&this.networkStatusRemoteBadShow)h("your");else if(this.networkStatusLocal==0)h("your");else if(this.networkStatusRemoteBadShow)Ai(this.userInfo.sex);else return"";return h("network.whoNotGood")},reportTipTop(){return de.statusBarHeight+de.navBarHeight+8},viewTopHeight(){let e=84;return e+=78},viewTopStyle(){let e={width:`${this.sW}px`,height:`${this.viewTopHeight}px`};return this.viewTopIsShow?e.backgroundImage="linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0))":e.backgroundImage="linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,0))",e},viewGiftHeight(){return(12+62*2)*2},viewGiftTop(){let e=30;return e-=8,this.viewTopHeight+uni.upx2px(e)},viewMsgHeight(){return uni.upx2px(800)},viewMsgBottom(){return this.viewBottomHeight},viewNoCoinsBottom(){return this.viewBottomHeight+uni.upx2px(8)},viewAutomaticHeight(){return uni.upx2px(74*2)},viewAutomaticLeft(){return this.isShowActionPop?-this.sW:0},viewAutomaticBottom(){return this.viewBottomActionBottom+this.viewBottomActionHeight},viewAutomaticMsgTipIconBottom(){return this.viewBottomHeight-uni.upx2px(48)},viewBottomActionHeight(){return uni.upx2px(140)},viewBottomActionBottom(){return de.safeBottom+2},viewBottomHeight(){return this.viewBottomActionBottom+this.viewBottomActionHeight},viewActionBottomHeight(){return this.viewBottomActionBottom+uni.upx2px(300)},automaticActionSrc(){return this.isAutomaticOpen?"s/call/auto_translate_open.png":"s/call/auto_translate_close.png"},automaticActionBottom(){return this.viewAutomaticBottom+uni.upx2px(10)},automaticOpenTip(){return h("notKnowHeSaid",{him:Ae(this.userInfo.sex)})},automaticOpenTipBottom(){return this.automaticActionBottom+uni.upx2px(70)},showAutomaticTipView(){return!this.isAutomaticOpen&&this.showAutomaticTip&&this.viewBottomActionIsShow&&!this.isShowActionPop&&!this.isShowBeautyPop},showAutomaticView(){return this.viewBottomActionIsShow&&!this.isShowActionPop&&!this.isShowBeautyPop},showBottomActionView(){return this.viewBottomActionIsShow&&!this.isShowActionPop&&!this.isShowBeautyPop},showBottomBgView(){return this.viewBottomActionIsShow||this.isAutomaticOpen&&this.viewAutomaticIsShow||this.isShowActionPop},viewCallRingRight(){return((this.sW-uni.upx2px(144))/2-uni.upx2px(60))/2+uni.upx2px(12)},viewCallAnswerRingRight(){return uni.upx2px(40)},actionIntervalWidth(){return this.sW/5+uni.upx2px(6)},callRingSrc(){return this.isRingMute?"/static/call-ring-off.png":"/static/call-ring-on2.png"},showActionMoreIconView(){return this.isShowActionPop||this.viewBottomActionIsShow&&!this.keyboardShow&&!this.isShowBeautyPop},viewActionMoreIconBottom(){return this.viewBottomActionBottom+uni.upx2px(10)},actionMoreIconViewRight(){return 20},viewActionClassStr(){return this.isShowActionPop?"view-action-more-rotate-open":"view-action-more-rotate-close"}},watch:{"userInfo.small_avatar":{handler(e,t){_(e)||(_(this.avatarSmallUrl)?this.avatarSmallUrl=Mt(this.userInfo):_(this.avatarBigUrl)&&(this.avatarBigUrl=Mt(this.userInfo)))},deep:!0,immediate:!0}},methods:{clickCallRing(e){e&&e.stopPropagation(),this.isRingMute?this.ringPlay():this.ringStop(),this.isRingMute=!this.isRingMute,ze("call_ring_mute",this.isRingMute?1:0)},clickViewTop(e){e&&e.stopPropagation(),this.clickChatContent()},clickViewBottomAction(){this.clickChatContent()},clickReport(){Y(me.reportDialog,{targetUid:this.userInfo.uid,fromType:2},"","",{onReportDialog:()=>{setTimeout(()=>{this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{})},500)}})},clickRingTip(){this.showRingTip=!1,ze("call_ring_tip_close",!0)},clickActionMore(e){this.showInput||(e&&e.stopPropagation(),this.$refs.popAction.open())},clickActionMoreTipClose(e){e&&e.stopPropagation(),this.showActionMoreTip&&(this.showActionMoreTip=!1,j("call_action_more_tip_1",1))},clickAutomaticTipClose(e){e&&e.stopPropagation(),this.showAutomaticTip=!1,j("call_automatic_tip_close_1",1)},clickChatContent(){if(this.keyboardShow){uni.hideKeyboard();return}this.showHideViewBaseAction()},clickBeauty(){this.keyboardShow&&uni.hideKeyboard(),this.$nextTick(()=>{this.$refs.callBeautyPop.open()})},clickFollow(){this.keyboardShow&&uni.hideKeyboard()},clickMuteCamera(e){this.cameraStatus=this.cameraStatus==1?0:1,this.setMuteAvatar(!0,this.cameraStatus==0),M.request("/call/mask-status",{room_id:this.roomInfo.room_id,status:this.cameraStatus}),he(this.cameraStatus==0?h("cameraDisabled"):h("cameraEnabled")),e&&e.stopPropagation()},clickMuteMic(e){this.micStatus?(this.micStatus=this.micStatus==1?0:1,this.onChangeMoreToolStatus({key:"microphone",value:this.micStatus}),he(h("microphoneDisabled"))):(this.micStatus=this.micStatus==1?0:1,this.onChangeMoreToolStatus({key:"microphone",value:this.micStatus}),he(h("microphoneEnabled"))),e&&e.stopPropagation()},clickSurfaceMoveTipClose(){this.showSurfaceMoveTip=!1,j("video_chat_surface_move_tip",1)},clickNewUserTopsClose(){this.isShowUserLabel=!1,j("reception_show_user_label",1)},clickCloseReportTips(){this.showReportTips=!1,ze("call_show_report_tips",!0)},clickCloseSurfaceLocalTips(){this.showSurfaceLocalTips=!1,ze("call_show_surface_local_tips",!0)},onChangeMoreToolStatus(e){C("error","at pagesCall/chat-view-action.mixin.js:361","-----> onChangeMoreToolStatus "+JSON.stringify(e)),e.key=="camera"?this.engine.muteLocalVideoStream(e.value==0):(this.engine.muteLocalAudioStream(e.value==0),this.isMuteVoice=e.value==0)},onShowInput(e){this.showInput=e},onClickShutDown(){let e=this.$refs.callLeaveLive;e&&e.hide(()=>{this.showLiveLeave=!1})},onClickRemindGotIt(e){if(e==1){if(this.callType!=q.VIDEO||(this.showBigRRemind=!1,this.callTotalDuration>=50)||this.callTotalDuration+15>=50)return;this.enableFaceDetection(!0)}else e==2&&this.handleFirstMinRemindPop()},onClickRemindReportHangUp(){this.addLogHangUpReport(),this.closeCallChat(this.logEndReportPop,this.closeTypeDef,{})},onClickRemindHangUp(){let e=h("call.hangUpTip",{chatType:qe(this.callType)});ge(h("tips"),e,()=>{this.addLogHangUpReport(),this.closeCallChat(this.logEndNoFaceRemindPop,this.closeTypeDef,{})},"",h("hangUp"))},onClickRemindReport(){let e=this.$refs.callReportUser;e&&e.open()},onInputFocus(e){this.inputFocus=e},onClickCallMsgView(){this.clickChatContent()},onMsgViewShowListener(e){this.viewMsgIsShow=e,this.viewBottomActionIsShow=e},onAutomaticViewShowListener(e){this.viewAutomaticIsShow=e},onActionPopChangeListener(e){this.isShowActionPop=e.show,e.show&&this.clickActionMoreTipClose()},onSurfaceMoveTipListener(e){e?this.showSurfaceMoveTip=!0:(this.clickCloseSurfaceLocalTips(),this.clickSurfaceMoveTipClose())},onSurfaceChangeListener(){this.$refs.refSurfaceRemote.setSurfaceChange()},onBeautyChange(e){this.engine.setBeautyEffectOptions(!0,new jt({lighteningLevel:e.whitening/100,smoothnessLevel:e.smoothing/100,rednessLevel:e.rosy/100}))},onBeautyPopChange(e){this.isShowBeautyPop=e.show},onNoConnectCloseListener(e){if(this.isConnect||this.isGameShow)return;let t=fi();t.indexOf(Je.CHAT)==t.length-1&&(e&&(e.action=="chat_pri"||e.action=="level")?this.clickHangup(null,0,()=>{Lt(gi(Je.CHAT),"slide-out-bottom",300,()=>{e.action=="chat_pri"?Sn(e.user):e.action=="level"&&Oe("/pagesPub/my/level")})}):this.clickHangup(null,0))},onLoadAvatarBigListener(){this.avatarBigIsShow=!0},onLoadWaitVideoCoverListener(){this.showWaitingVideo=!0},onVideoPlay(){},onVideoTimeUpdate(e){this.videoIsPlay||e.detail.currentTime<.8||(this.videoIsPlay=!0,this.videoShowCover=!1,this.videoShowBlur=this.videoInfo.width>=this.videoInfo.height,C("error","at pagesCall/chat-view-action.mixin.js:477","======== onVideoTimeUpdate "+e.detail.currentTime))},onFollow(e,t){e==this.userInfo.uid&&(this.userInfo.is_follow=t)},onSendAskGift(e){this.$refs.msgView.addMsgGiftAsk(this.userInfo.sex,e),M.request("/call/ask-gift",{room_id:this.roomInfo.room_id,gift_id:e.gift_id})},onSendTextListener(e){if(_(e))return;this.$refs.msgView.addMsgText(e);let t={content:e,to_uid:this.userInfo.uid,room_id:this.roomInfo.room_id,msg_type:le.TEXT};M.request("/call/send-msg",t)},onClickAction(e,t){e==1?this.clickMuteCamera():e==2?this.clickMuteMic():this.clickVoiceRemote(t)},onKeyboardChange(e){this.keyboardShow=e.height>0},onNewUserShow(e){this.isShowUserLabel=!z("reception_show_user_label"),this.newUserStyle=e||{},setTimeout(()=>{this.isShowUserLabel=!1},5e3)},startAnimAutomaticMsgTip(){if(this.animAutomaticMsgTipCount>3){this.showAutomaticMsgTip=!1;return}setTimeout(()=>{let e=this.$refs.animAutomaticMsgTip;e.step({translateX:-16,translateY:-16},{duration:400}),e.step({translateX:0,translateY:0},{duration:400}),e.run(()=>{this.animAutomaticMsgTipCount+=1,this.startAnimAutomaticMsgTip()})},500)},clearViewTopHideTimeout(){this.viewTopHideTimeout&&clearTimeout(this.viewTopHideTimeout),this.viewTopHideTimeout=!1},hideViewTop(){this.clearViewTopHideTimeout(),this.viewTopIsShow=!1},showViewTop(){this.viewTopIsShow=!0,this.clearViewTopHideTimeout(),this.viewTopHideTimeout=setTimeout(()=>{this.viewTopIsShow=!1,this.clickCloseReportTips()},5e3)},clearViewBottomActionTimeout(){this.viewBottomActionHideTimeout&&clearTimeout(this.viewBottomActionHideTimeout),this.viewBottomActionHideTimeout=!1},hideViewBottomAction(){this.clearViewBottomActionTimeout(),this.viewBottomActionIsShow=!1},showViewBottomAction(){this.viewBottomActionIsShow=!0,this.clearViewBottomActionTimeout(),this.viewBottomActionHideTimeout=setTimeout(()=>{this.viewBottomActionIsShow=!1},5e3)},showHideViewBaseAction(){let e=this.viewMsgIsShow;if(this.$refs.msgView&&this.$refs.msgView.list.length<=0&&(e=!1),e||this.viewTopIsShow||this.viewBottomActionIsShow){this.$refs.msgView&&this.$refs.msgView.hide(),this.hideViewTop(),this.hideViewBottomAction();let i=this.$refs.callAutomaticView;i&&i.hide()}else!this.viewMsgIsShow&&this.$refs.msgView&&this.$refs.msgView.show(),this.viewTopIsShow||this.showViewTop(),this.viewBottomActionIsShow||this.showViewBottomAction();this.showInput&&this.$refs.callActionView&&(this.$refs.callActionView.showInput=!1)},onChatViewActionListener(e){if(C("error","at pagesCall/chat-view-action.mixin.js:585","----> chatViewAction "+e.a_type+" "+JSON.stringify(e)),!e.room_id||e.room_id!=this.roomInfo.room_id)return;let t=getApp().globalData.uid;switch(e.a_type){case we.END:if(C("error","at pagesCall/chat-view-action.mixin.js:590","-----> \u6267\u884C mq \u6302\u65AD "+JSON.stringify(e)),this.addLogHangUpMq(e),e.end_type==Qe.REFUSE){if(this.actionType==H.CALL&&(this.isConnectRefused=!0),e.hang_up_uid!=t){let i=setTimeout(()=>{he(h("call.rejected")),clearTimeout(i)},300)}}else if(e.end_type==Qe.BALANCE)e.user_info&&(this.endTopUpData=e),e.hang_up_uid==getApp().pubUser.uid&&uni.$emit("event_call_end_no_balance");else if(e.end_type==Qe.TIMEOUT&&e.hang_up_uid!=t){let i=setTimeout(()=>{he(h("call.notConnect")),clearTimeout(i)},300)}this.closeCallChat(this.closeFromDef,e.msg||e.end_type,{});break;case we.REFUSE:this.addLogHangUpMq(e),this.isConnectRefused=!0,this.closeCallChat(this.closeFromDef,this.closeTypeDef,{});break;case we.WARNING:M.handleCallback(e.callback);break;case we.BALANCE:C("error","at pagesCall/chat-view-action.mixin.js:622","-----> \u6536\u76CA \u3002"+JSON.stringify(e)),uni.$emit("event_call_income_listener",e),Bt(e.balance);break;case we.NO_MONEY:Bt(e.balance),this.$refs.msgView.addMsgTextSys(e,we.NO_MONEY);break;case we.MESSAGE:if(e.msg_type==le.TEXT_AUDIO){let i=xe(e.content);this.$refs.callAutomaticView.setContent(i.translate_text)}else this.$refs.msgView.addReceiveMsg(e);break;case we.TRANSLATE:this.receiveTargetAutomaticAction(e);break;case we.MASK:this.setMuteAvatar(!1,e.status==0);break;case we.FACE_DETECTION:e.room_id==this.roomInfo.room_id&&e.target_uid==this.userInfo.uid&&this.showRemindPop(3);break}},onConnectLoadingListener(e,t){if(C("error","at pagesCall/chat-view-action.mixin.js:654","test test onConnectLoadingListener type = "+e+"  fromType = "+t),t==ct.ANSWER){this.upLog=!0,e==4?(this.addLog("\u63A5\u542C\u8FDE\u63A5\u5931\u8D25\uFF0C\u91CD\u65B0\u62E8\u6253"),this.closeCallAgain=!0,this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{})):e==5&&(this.addLog("\u63A5\u542C\u8FDE\u63A5\u5931\u8D25\uFF0C\u6302\u65AD"),this.closeCallChat(this.closeFromConnectTimeout,this.closeTypeDef,{}));return}if(e==100){this.upLog=!0,this.addLog("\u663E\u793A\u8FDE\u63A5\u8D85\u65F6");return}e==3?this.closeCallChat(this.logEndMatchConnectTimeout,this.closeTypeNetwork,{}):(e==1||e==2)&&this.closeCallChat(this.closeFromDef,this.closeTypeDef,{})},onNetworkChangeRemote(){if(this.networkStatusRemote==1){this.networkStatusRemoteBadShow=!1,this.networkStatusRemoteBadTiming&&clearTimeout(this.networkStatusRemoteBadTiming),this.networkStatusRemoteBadTiming=!1;return}this.networkStatusRemote==0&&!this.networkStatusRemoteBadShow&&(this.networkStatusRemoteBadShow=!0)},onEventBannedCloseChat(){this.closeCallChat(this.logEndBanned,this.closeTypeDef,{})},setMuteAvatar(e,t){e&&(this.isMuteVideo=t),this.$refs.refSurfaceRemote&&this.$refs.refSurfaceRemote.setMuteVideoAvatar(e,t),this.$refs.refSurfaceLocal&&this.$refs.refSurfaceLocal.setMuteVideoAvatar(e,t)},checkPermission(e){return new Promise(t=>{Ti(V.MICROPHONE,!0,!1).then(i=>i?this.callType==q.VIDEO?Ti(V.CAMERA,!0,!1):(t(),Se):(this.permissionStatus=2,Ft(V.MICROPHONE,o=>{o?this.permissionHasSetting=!0:this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{})}),Se)).then(i=>{if(!i)return this.permissionStatus=2,Ft(V.CAMERA,o=>{o?this.permissionHasSetting=!0:this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{})}),Se;t()})})},handleNotAnswerTimer(){let e=setInterval(()=>{this.notAnswerTipTime-=1,this.notAnswerTipTime<=0&&(this.remoteUid||this.handleNotAnswerHandUpTimer(),clearInterval(e))},1e3)},handleNotAnswerHandUpTimer(){this.timerUp=setInterval(()=>{this.notAnswerHangUpTime-=1,this.notAnswerHangUpTime<=0&&(this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{}),clearInterval(this.timerUp))},1e3)},startAnswerBgAnim(){let e=this.$refs.animAnswerBg;typeof e=="undefined"||typeof e.step=="undefined"||(e.step({scale:1.3,opacity:0},{duration:1e3}),e.step({scale:1,opacity:1},{duration:1}),e.run(()=>{this.startAnswerBgAnim()}))},startAnswerIcon(){let e=this.$refs.animAnswerImg;typeof e=="undefined"||typeof e.step=="undefined"||(e.step({rotate:-10},{duration:500}),e.step({rotate:10},{duration:500}),e.run(()=>{this.startAnswerIcon()}))},checkShowBigRRemind(){let e=z("call_big_recharge_"+getApp().globalData.uid+"_"+this.userInfo.uid);return _(e)},showRemindPop(e){let t=this.$refs.callRemindPop;t&&(t.isShow||t.open(e,this.userInfo))},handleRemindPop(){if(this.checkShowBigRRemind()){let i=setTimeout(()=>{clearTimeout(i),this.showBigRRemind=!0,this.showRemindPop(1),this.handleSpliceTimer(i)},3e3);this.timerIDList.push(i)}if(!this.needCheckFace||this.callType!=q.VIDEO)return;let t=setTimeout(()=>{clearTimeout(t),this.fiveFaceCheck=!0,this.enableFaceDetection(!0),this.handleSpliceTimer(t)},5e3);this.timerIDList.push(t)},handleFaceCheck(){if(this.callType!=q.VIDEO||!this.needCheckFace)return;let e=this.$refs.callRemindPop;e&&(e.isShow||this.enableFaceDetection(!0))},handleFirstMinRemindPop(){if(this.callType!=q.VIDEO||!this.needCheckFace||this.callTotalDuration>60||this.callTotalDuration+15>=50)return;let t=setTimeout(()=>{clearTimeout(t),this.enableFaceDetection(!0),this.handleSpliceTimer(t)},15e3);this.timerIDList.push(t)},handleSpliceTimer(e){let t=this.timerIDList.indexOf(e);t!=-1&&this.timerIDList.splice(t,1)},clearRemindTimer(){if(!(this.timerIDList.length<=0))for(let e=0,t=this.timerIDList.length;e<t;e++)clearTimeout(this.timerIDList[e])}}},Or={methods:{checkNeedUploadMatchSnapshot(){if(this.roomType!=Fe.MATCH||this.callType!=q.VIDEO)return!1;let e=[5,10,20,35],t=e.indexOf(Number(this.callTotalDuration));return t==-1?!1:e[t]},handleReceptionScreenshotAndroid(){let e=this.checkNeedUploadMatchSnapshot();if(!e)return;let t=null,i=null;this.handleTakeSnapShot().then(o=>(t=o,this.handleImageInfo(o))).then(o=>(i=o,this.handleUpload(t))).then(o=>{this.handleRequest(i,o,e)})},handleRequest(e,t,i){let o={list:[{media_type:Ge.PHOTO,url:t.path,width:e.width,height:e.height}],room_id:this.roomInfo.room_id,offset:i};M.request("/call/snapshot",o,!1,!0)},handleImageInfo(e){return new Promise(t=>{uni.getImageInfo({src:e,success:i=>{t(i)}})})},handleUpload(e){return new Promise(t=>{xi(e,_i.SNAPSHOT,Ge.PHOTO,!1,null,null,this.roomInfo.room_id).then(i=>{Si(e,!0),t(i)})})},handleTakeSnapShot(){return new Promise((e,t)=>{let a=`${plus.io.convertLocalFileSystemURL("_doc").replace(`/apps/${plus.runtime.appid}/doc/`,"")}/files/call_${new Date().getTime()}.jpg`;this.engine.takeSnapshot("",0,a).then(()=>{setTimeout(()=>{e(a)},600)},()=>{t()})})}}},Pr={"call-msg-text":{"":{alignItems:"center",flexDirection:"row",justifyContent:"flex-start",marginLeft:"20rpx",marginBottom:"20rpx"}}},Nr={props:{},data(){return{}}};function Br(e,t,i,o,a,s){return(0,n.openBlock)(),(0,n.createElementBlock)("view",{class:"call-msg-text",renderWhole:!0},[(0,n.renderSlot)(e.$slots,"default",{style:"flex:1"})])}var zt=v(Nr,[["render",Br],["styles",[Pr]]]),Ur={"view-base":{"":{width:"490rpx",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"}},"view-base-content":{"":{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",borderRadius:"16rpx",backgroundColor:"rgba(0,0,0,0.2)",boxSizing:"border-box",width:"460rpx"}},"view-text-line":{"":{opacity:.3,borderWidth:1,borderStyle:"solid",borderColor:"#FFFFFF",height:"4rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%",marginTop:"4rpx",marginBottom:"4rpx"}},"text-translate-content":{"":{fontSize:"24rpx",color:"#FFD60A"}},"text-translate":{"":{fontSize:"16rpx",color:"rgba(255,255,255,0.8)",marginLeft:"6rpx"}},"view-tran-end":{"":{marginTop:"6rpx",flexDirection:"row",alignItems:"center"}}},Vr={emits:["onTranslateFinish"],components:{CallMsgText:zt},props:{isSend:{type:Boolean,default:!1},content:{type:Object,default(){return{}}},mtime:{type:[Number,String],default:0},user:{type:Object,default(){return{}}},sendUid:{type:[Number,String],default:0}},data(){return{TRANSLATE_FROM:lt,richObj:{},tranContent:""}},computed:{transText(){return _(this.content.content)?this.content.text?vi(this.content):"":this.content.content}},methods:{$str:h,onTranslateFinish(e,t){this.tranContent=e.text,this.$nextTick(()=>{this.$emit("onTranslateFinish")})},onTranslateOpen(e){this.isSend||this.mtime<=0||this.mtime<=e||this.$refs.translateIcon.reqTranslate()},onTranslateClick(){uni.$emit("event_translate_auto_open",this.mtime)},clickTranslateStr(e){e&&e.stopPropagation(),Ye()},parseNodes(){let e,t;this.content.text?(e=`[%nickname%] ${this.content.text}`,t=this.content.info):this.content.content&&(e=`[%nickname%] ${this.content.content}`,t={}),t.nickname={text:h(" "),color:"#FFBC00"},this.richObj={text:e,info:t}}},created(){this.parseNodes(),uni.$on("event_translate_auto_open",this.onTranslateOpen)},beforeUnmount(){uni.$off("event_translate_auto_open",this.onTranslateOpen)}};function Hr(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("rich-content"),ut),l=b((0,n.resolveDynamicComponent)("translate-icon"),tt),c=(0,n.resolveComponent)("call-msg-text");return(0,n.openBlock)(),(0,n.createBlock)(c,null,{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("view",{class:"view-base"},[(0,n.createElementVNode)("view",{class:"view-base-content"},[(0,n.createVNode)(r,{data:a.richObj,color:"#FFD60A","font-size":"24rpx",style:{"max-width":"440rpx",background:"transparent"}},null,8,["data"]),a.tranContent?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0},[(0,n.createElementVNode)("view",{class:"view-text-line"}),(0,n.createElementVNode)("u-text",{class:"text-translate-content",style:{"max-width":"440rpx"}},(0,n.toDisplayString)(a.tranContent),1)])):(0,n.createCommentVNode)("",!0)]),(0,n.createVNode)(l,{ref:"translateIcon",onOnTranslateFinish:s.onTranslateFinish,onOnTranslateClick:s.onTranslateClick,isAuto:!i.isSend,"from-language":i.user.language,border:!0,showTran:!1,"api-params":{from_type:a.TRANSLATE_FROM.CALL,from_uid:i.sendUid,key:i.mtime},bg:"#C6CDD6",text:s.transText,showTranContent:!1,paddingTop:"0",style:{"margin-left":"-20rpx"}},null,8,["onOnTranslateFinish","onOnTranslateClick","isAuto","from-language","api-params","text"])])]),_:1})}var Wr=v(Vr,[["render",Hr],["styles",[Ur]]]),$r={"view-base":{"":{width:"490rpx",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"}},"view-base-content":{"":{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",borderRadius:"16rpx",backgroundColor:"rgba(0,0,0,0.2)",boxSizing:"border-box",width:"460rpx"}},"view-text-line":{"":{opacity:.3,borderWidth:1,borderStyle:"solid",borderColor:"#FFFFFF",height:"4rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%",marginTop:"4rpx",marginBottom:"4rpx"}},"text-translate-content":{"":{fontSize:"24rpx",color:"#FFFFFF"}},"text-translate":{"":{fontSize:"16rpx",color:"rgba(255,255,255,0.8)",marginLeft:"6rpx"}},"view-tran-end":{"":{marginTop:"6rpx",flexDirection:"row",alignItems:"center"}}},jr={emits:["onTranslateFinish"],components:{CallMsgText:zt,TranslateIcon:tt},props:{isSend:{type:Boolean,default:!1},content:{type:String,default:""},mtime:{type:[Number,String],default:0},user:{type:Object,default(){return{}}},sendUid:{type:[Number,String],default:0}},data(){return{TRANSLATE_FROM:lt,tranContent:""}},computed:{contentStyle(){return{background:this.isSend?"rgba(225, 255, 195, 0.8)":"rgba(255, 255, 255, 0.8)"}},richObj(){let e=`[%name%]: ${this.content}`,t={name:{text:this.isSend?h("me"):this.user.nickname,color:"rgba(255, 255, 255, 0.7)"}};return{text:e,info:t}}},methods:{$str:h,onTranslateFinish(e,t){this.tranContent=e.text,this.$nextTick(()=>{this.$emit("onTranslateFinish")})},onTranslateOpen(e){this.isSend||this.mtime<=0||this.mtime<=e||this.$refs.translateIcon.reqTranslate()},onTranslateClick(){uni.$emit("event_translate_auto_open",this.mtime)},clickTranslateStr(e){e&&e.stopPropagation(),Ye()}},created(){uni.$on("event_translate_auto_open",this.onTranslateOpen)},beforeUnmount(){uni.$off("event_translate_auto_open",this.onTranslateOpen)}};function zr(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("rich-content"),ut),l=b((0,n.resolveDynamicComponent)("translate-icon"),tt),c=(0,n.resolveComponent)("call-msg-text");return(0,n.openBlock)(),(0,n.createBlock)(c,null,{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("view",{class:"view-base"},[(0,n.createElementVNode)("view",{class:"view-base-content"},[(0,n.createVNode)(r,{data:s.richObj,color:"#fff","font-size":"24rpx",style:{"max-width":"440rpx",background:"transparent"}},null,8,["data"]),a.tranContent?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0},[(0,n.createElementVNode)("view",{class:"view-text-line"}),(0,n.createElementVNode)("u-text",{class:"text-translate-content",style:{"max-width":"440rpx"}},(0,n.toDisplayString)(a.tranContent),1),(0,n.createElementVNode)("view",{onClick:t[0]||(t[0]=(...u)=>s.clickTranslateStr&&s.clickTranslateStr(...u)),class:"view-tran-end"})])):(0,n.createCommentVNode)("",!0)]),(0,n.createVNode)(l,{ref:"translateIcon",onOnTranslateFinish:s.onTranslateFinish,onOnTranslateClick:s.onTranslateClick,isAuto:!i.isSend,"from-language":i.user.language,border:!0,showTran:!1,"api-params":{from_type:a.TRANSLATE_FROM.CALL,from_uid:i.sendUid,key:i.mtime},bg:"#C6CDD6",text:i.content,showTranContent:!1,paddingTop:"0",style:{"margin-left":"-20rpx"}},null,8,["onOnTranslateFinish","onOnTranslateClick","isAuto","from-language","api-params","text"])])]),_:1})}var Gr=v(jr,[["render",zr],["styles",[$r]]]),Kr={"view-base":{"":{width:"490rpx",flexDirection:"row"}},"view-center":{"":{flexDirection:"row",alignItems:"center"}},"text-action":{"":{lineHeight:"34rpx",color:"#67D4FF",fontSize:"20rpx",textDecoration:"underline"}},"view-text-line":{"":{opacity:.3,borderWidth:1,borderStyle:"solid",borderColor:"#FFFFFF",height:"4rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%",marginTop:"4rpx",marginBottom:"4rpx"}},"text-translate-content":{"":{fontSize:"24rpx",color:"#FFFFFF"}},"text-translate":{"":{fontSize:"16rpx",color:"rgba(255,255,255,0.8)",marginLeft:"6rpx"}},"view-tran-end":{"":{marginTop:"6rpx",flexDirection:"row",alignItems:"center"}}},Yr={emits:["onTranslateFinish"],components:{CallMsgText:zt},props:{content:{type:String,default:""},user:{type:Object,default(){return{}}}},data(){return{TRANSLATE_FROM:lt,obj:{},richObj:{},fromLanguage:Un(),tranContent:""}},computed:{transText(){switch(this.obj.type){case Be.CHECK_DIFFERENT:return h("notKnowHeSaid",{him:Ae(this.user.sex)});case Be.OPEN_TRANSLATE:return h("automaticTranslateWordTip",{his:Pt(this.user.sex),language:this.obj.language})}return""},apiTranslateKey(){return this.obj.type==Be.OPEN_TRANSLATE?`${this.obj.language}_2`:this.obj.type+200},actionStr(){switch(this.obj.type){case Be.CHECK_DIFFERENT:return h("tryTranslationOptions")}return""}},methods:{$str:h,onTranslateFinish(e,t){this.tranContent=e.text,this.$nextTick(()=>{this.$emit("onTranslateFinish")})},onTranslateOpen(e){this.isSend||this.mtime<=0||this.mtime<=e||this.$refs.translateIcon.reqTranslate()},onTranslateClick(){uni.$emit("event_translate_auto_open",this.mtime)},clickTranslateStr(e){e&&e.stopPropagation(),Ye()},clickAction(e){e&&e.stopPropagation(),uni.$emit("event_msg_automatic_action",1)},parseNodes(){let e=`[%nickname%]: ${this.transText}`,t={nickname:{text:h("customerService"),color:"#67D4FF"}};this.richObj={text:e,info:t}}},created(){this.obj=xe(this.content)||{},this.parseNodes(),uni.$on("event_translate_auto_open",this.onTranslateOpen)},beforeUnmount(){uni.$off("event_translate_auto_open",this.onTranslateOpen)}};function qr(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("rich-content"),ut),l=b((0,n.resolveDynamicComponent)("uni-icons"),_e),c=b((0,n.resolveDynamicComponent)("l-img"),I),u=b((0,n.resolveDynamicComponent)("translate-icon"),tt),f=(0,n.resolveComponent)("call-msg-text");return(0,n.openBlock)(),(0,n.createBlock)(f,null,{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("view",{class:"view-base"},[(0,n.createElementVNode)("view",{style:{"padding-bottom":"30rpx"}},[(0,n.createVNode)(r,{data:a.richObj,color:"rgba(255,255,255,0.8)","font-size":"24rpx",style:{"max-width":"435rpx",background:"transparent"}},null,8,["data"]),s.actionStr?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...d)=>s.clickAction&&s.clickAction(...d)),class:"view-center",style:{"margin-top":"16rpx"}},[(0,n.createElementVNode)("u-text",{class:"text-action"},(0,n.toDisplayString)(s.actionStr),1),(0,n.createVNode)(l,{type:"right",size:"20rpx",color:"#67D4FF",style:{"margin-left":"4rpx"}})])):(0,n.createCommentVNode)("",!0),a.tranContent?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:1},[(0,n.createElementVNode)("view",{class:"view-text-line"}),(0,n.createElementVNode)("u-text",{class:"text-translate-content",style:{"max-width":"435rpx"}},(0,n.toDisplayString)(a.tranContent),1),(0,n.createElementVNode)("view",{onClick:t[1]||(t[1]=(...d)=>s.clickTranslateStr&&s.clickTranslateStr(...d)),class:"view-tran-end"},[(0,n.createVNode)(c,{src:"s/pub/tran_end_grey.png",w:"24rpx",h:"24rpx"}),(0,n.createElementVNode)("u-text",{class:"text-translate"},(0,n.toDisplayString)(s.$str("autoTranslation")),1)])])):(0,n.createCommentVNode)("",!0)]),(0,n.createVNode)(u,{ref:"translateIcon",onOnTranslateFinish:s.onTranslateFinish,onOnTranslateClick:s.onTranslateClick,isAuto:!0,"from-language":a.fromLanguage,border:!0,showTran:!1,"api-params":{from_type:a.TRANSLATE_FROM.CALL,key:s.apiTranslateKey},bg:"#C6CDD6",text:s.transText,showTranContent:!1,paddingTop:"0"},null,8,["onOnTranslateFinish","onOnTranslateClick","from-language","api-params","text"])])]),_:1})}var Jr=v(Yr,[["render",qr],["styles",[Kr]]]),Xr={"list-msg":{"":{width:"510rpx",flex:1}},center:{"":{alignItems:"center",flexDirection:"row"}},"level-end":{"":{alignItems:"center",flexDirection:"row",justifyContent:"flex-end"}},"text-sys":{"":{fontSize:"24rpx",color:"#FFD60A",lineHeight:"32rpx",width:"490rpx"}},"def-btn-text":{"":{fontWeight:"400",fontSize:"20rpx",color:"#009AFF",textAlign:"left",marginTop:"8rpx"}},"def-nickname":{"":{fontWeight:"400",fontSize:"20rpx",color:"#FFBC00",textAlign:"left",marginBottom:"8rpx"}},"view-base":{"":{width:"490rpx",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"}},"view-base-content":{"":{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",borderRadius:"16rpx",backgroundColor:"rgba(0,0,0,0.2)",boxSizing:"border-box",width:"450rpx"}},"view-text-line":{"":{opacity:.3,borderWidth:1,borderStyle:"solid",borderColor:"#FFFFFF",height:"4rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%",marginTop:"4rpx",marginBottom:"4rpx"}},"text-translate-content":{"":{fontSize:"24rpx",color:"#FFD60A"}},"text-translate":{"":{fontSize:"16rpx",color:"rgba(255,255,255,0.8)",marginLeft:"6rpx"}},"view-tran-end":{"":{marginTop:"6rpx",flexDirection:"row",alignItems:"center"}}},Zr=ue("dom"),$t=getApp().globalData.window,Qr={emits:["onShowChange","onClickCallMsgView"],components:{CallMsgTip:Wr,CallMsgText:zt,CallMsgContent:Gr,CallMsgAutomatic:Jr,LImg:I},props:{uid:{type:[String,Number],default:0},height:{type:String,default:""},roomId:{type:[String,Number],default:0},user:{type:Object,default(){return{}}},bottomActionShow:{type:Boolean,default:!1},inputFocus:{type:Boolean,default:!1}},data(){return{CALL_MSG:le,sW:$t.width,sH:$t.height,maxWidth:$t.width/2+40,list:[],askGiftIdx:-1,askGift:{},giftW:$t.width*.55,showThis:!1,hideTimeout:!1,isKeyboardShow:!1,tranContent:""}},computed:{TRANSLATE_FROM(){return lt},showStyle(){return{left:this.showThis?"0":`-${this.sW}px`}}},watch:{showThis:{handler(e,t){this.$emit("onShowChange",e)},immediate:!0},bottomActionShow:{handler(e,t){this.inputFocus||(this.showThis=e)},immediate:!0},inputFocus:{handler(e,t){e?(this.clearHideTimeout(),this.showThis=e):this.handleHideTimeout()},immediate:!0}},methods:{$str:h,onTranslateFinish(){this.$nextTick(()=>{this.scrollBottom()})},onTranslateFinish2(e,t){this.tranContent=e.text,this.$nextTick(()=>{this.onTranslateFinish()})},clickMsgList(e){e&&e.stopPropagation(),uni.$emit("event_hide_call_msg_input"),!this.isKeyboardShow&&(this.showThis?this.showThis=!1:this.show(),this.$emit("onClickCallMsgView"))},clickBuyCoins(){Oe(me.topUpDialog)},onKeyboardChange(e){this.isKeyboardShow=e.height>0,this.scrollBottom()},show(){this.showThis=!0,this.handleHideTimeout()},hide(){this.clearHideTimeout(),this.showThis=!1},clearHideTimeout(){this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=!1},handleHideTimeout(){this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.showThis=!1},5e3)},scrollBottom(){let e=setTimeout(()=>{if(this.list.length<=0)return;let t=this.list[this.list.length-1].mtime;typeof t!="undefined"&&typeof this.$refs[`cell${t}`]!="undefined"&&(Zr.scrollToElement(this.$refs[`cell${t}`][0],{animated:!0}),clearTimeout(e))},300)},parseData(e,t,i){let o=i==getApp().globalData.uid;return{type:e,mtime:t,send_uid:i,isSend:o}},pushItem(e){this.list.push(e),this.$nextTick(()=>{this.scrollBottom()}),this.show()},addReceiveMsg(e){e.msg_type==le.TEXT?this.addMsgTextReceive(e):e.msg_type==le.SYS?this.addMsgSys(e):e.msg_type==le.TEXT_SYS&&this.addMsgTextSys(e)},addMsgTextReceive(e){let t=this.parseData(le.TEXT,e.mtime,this.uid);t.text=e.content,this.pushItem(t)},addMsgSys(e){let t=this.parseData(le.SYS,e.mtime,D.SYSTEM_ID);t.text=e.text,t.info=e.info,t.content=e.content,this.pushItem(t)},addMsgTextSys(e,t){t==7&&(e.mtime=getApp().getCTime(),e.content=h("call.balanceLow"));let i=this.parseData(le.TEXT_SYS,e.mtime,wi.SYSTEM_ID);i=Object.assign(i,e),this.pushItem(i)},addMsgText(e){let t=this.parseData(le.TEXT,new Date().getTime()*1e3,getApp().globalData.uid);t.text=e,this.pushItem(t)},addMsgGiftAsk(e,t){let i=this.parseData(le.GIFT_ASK,new Date().getTime()*1e3,getApp().globalData.uid);i.text=h("msg.giftAskedOtherFor",{whom:Ae(e)}),i.gift=t,this.pushItem(i)},addMsgAutomatic(e){let t=this.parseData(le.AUTOMATIC,new Date().getTime()*1e3,getApp().globalData.uid);t.text=JSON.stringify(e),this.pushItem(t)},onTranslateClick(){uni.$emit("event_translate_auto_open",this.mtime)},transText(e){return _(e.content)?e.content.text?vi(e.content):"":e.content}},created(){uni.onKeyboardHeightChange(this.onKeyboardChange)},beforeUnmount(){uni.offKeyboardHeightChange(this.onKeyboardChange)}};function el(e,t,i,o,a,s){let r=(0,n.resolveComponent)("call-msg-content"),l=(0,n.resolveComponent)("call-msg-tip"),c=(0,n.resolveComponent)("call-msg-automatic"),u=b((0,n.resolveDynamicComponent)("translate-icon"),tt),f=(0,n.resolveComponent)("call-msg-text");return(0,n.openBlock)(),(0,n.createElementBlock)("view",{onClick:t[2]||(t[2]=(...d)=>s.clickMsgList&&s.clickMsgList(...d)),style:(0,n.normalizeStyle)({maxHeight:i.height,height:i.height}),renderWhole:!0},[(0,n.createElementVNode)("list",{onClick:t[1]||(t[1]=(...d)=>s.clickMsgList&&s.clickMsgList(...d)),ref:"msgList",showScrollbar:!1,class:"list-msg",style:(0,n.normalizeStyle)([s.showStyle])},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.list,(d,y)=>((0,n.openBlock)(),(0,n.createElementBlock)("cell",{key:`k${d.mtime}`,ref_for:!0,ref:`cell${d.mtime}`},[d.type==a.CALL_MSG.TEXT?((0,n.openBlock)(),(0,n.createBlock)(r,{key:0,"is-send":d.isSend,content:d.text,mtime:d.mtime,user:i.user,"send-uid":d.send_uid,onOnTranslateFinish:s.onTranslateFinish},null,8,["is-send","content","mtime","user","send-uid","onOnTranslateFinish"])):d.type==a.CALL_MSG.SYS?((0,n.openBlock)(),(0,n.createBlock)(l,{key:1,content:d,user:i.user,"is-send":d.isSend,"send-uid":d.send_uid,mtime:d.mtime,onOnTranslateFinish:s.onTranslateFinish},null,8,["content","user","is-send","send-uid","mtime","onOnTranslateFinish"])):d.type==a.CALL_MSG.AUTOMATIC?((0,n.openBlock)(),(0,n.createBlock)(c,{key:2,content:d.text,user:i.user,onOnTranslateFinish:s.onTranslateFinish,style:{"margin-bottom":"20rpx"}},null,8,["content","user","onOnTranslateFinish"])):d.type==a.CALL_MSG.TEXT_SYS?((0,n.openBlock)(),(0,n.createBlock)(f,{key:3},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("view",{onClick:t[0]||(t[0]=(...x)=>s.clickBuyCoins&&s.clickBuyCoins(...x)),class:"view-base"},[(0,n.createElementVNode)("view",{class:"view-base-content"},[(0,n.createElementVNode)("u-text",{style:{"font-weight":"500","font-size":"24rpx",color:"#FFD60A"}},(0,n.toDisplayString)(d.content),1),a.tranContent?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0},[(0,n.createElementVNode)("view",{class:"view-text-line"}),(0,n.createElementVNode)("u-text",{class:"text-translate-content",style:{"max-width":"420rpx"}},(0,n.toDisplayString)(a.tranContent),1)])):(0,n.createCommentVNode)("",!0)]),(0,n.createVNode)(u,{ref_for:!0,ref:"translateIcon",onOnTranslateFinish:s.onTranslateFinish2,onOnTranslateClick:s.onTranslateClick,isAuto:d.isSend,"from-language":i.user.language,border:!0,showTran:!1,"api-params":{from_type:s.TRANSLATE_FROM.CALL,from_uid:d.send_uid,key:d.mtime},bg:"#C6CDD6",text:s.transText(d),showTranContent:!1,paddingTop:"0",style:{"margin-left":"-20rpx"}},null,8,["onOnTranslateFinish","onOnTranslateClick","isAuto","from-language","api-params","text"])])]),_:2},1024)):(0,n.createCommentVNode)("",!0)]))),128))],4)],4)}var tl=v(Qr,[["render",el],["styles",[Xr]]]),il={emits:["click","onLoadAvatar"],components:{LImg:I},props:{user:{type:Object,default(){return{}}},w:{type:String,default:"0"},h:{type:String,default:"0"},radius:{type:String,default:"0"},setKey:{type:String,default:"small_avatar"},border:{type:String,default:""},placeType:{type:Number,default:1},placeW:{type:String,default:""},placeFontSize:{type:[String,Boolean],default:""},placeBottom:{type:String,default:""},click:{type:Boolean,default:!0},fromType:{type:Number,default:1},fade:{type:Boolean,default:!0}},computed:{avatarUrl(){return Mt(this.user,this.setKey,this.fromType)}},methods:{clickAvatar(e){this.click&&this.$emit("click",e)},onLoad(){this.$emit("onLoadAvatar")}}};function nl(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("l-img"),I);return(0,n.openBlock)(),(0,n.createBlock)(r,{onClick:s.clickAvatar,src:s.avatarUrl,w:i.w,h:i.h,radius:i.radius,border:i.border,"place-type":i.placeType,"place-w":i.placeW,"place-bottom":i.placeBottom,fade:i.fade,onOnLoad:s.onLoad},null,8,["onClick","src","w","h","radius","border","place-type","place-w","place-bottom","fade","onOnLoad"])}var Ui=v(il,[["render",nl]]),al={"view-logo":{"":{position:"absolute",flexDirection:"row",justifyContent:"center"}},center:{"":{alignItems:"center",justifyContent:"center"}},text:{"":{fontSize:"32rpx",color:"#FFFFFF",fontWeight:"600"}},"view-btn":{"":{position:"absolute"}},"text-btn":{".view-btn ":{width:"600rpx",height:"96rpx",lineHeight:"96rpx",color:"#FFFFFF",textAlign:"center",borderRadius:"16rpx"}},"text-btn-act":{".view-btn ":{backgroundImage:"linear-gradient(to right, #EB51F6, #9C28EA)",marginBottom:"8rpx"}}},ol={components:{LImg:I,AvatarImg:Ui},emits:["onConnectLoadingListener"],props:{user:{type:Object,default(){return{}}},fromType:{type:Number,default:-1}},data(){return{appNameSrc:"",statusBarH:getApp().globalData.window.statusBarHeight,imgT:176*getApp().globalData.window.scaleH,wW:getApp().globalData.window.width,wH:getApp().globalData.window.height,myUser:getApp().pubUser,textT:80*getApp().globalData.window.scaleH,btnBottom:(90+getApp().globalData.window.safeBottom)*getApp().globalData.window.scaleH,isNetworkUnstable:!1,connectTimer:!1,connectInt:0,hideMatch:!0}},computed:{tipStr(){return this.fromType==ct.ANSWER?h("network.unstableOtherParty"):this.isNetworkUnstable?h("network.unstableHe",{whose:Pt(this.user.sex)}):h("connecting")},callAgainStr(){return h("call.himAgain",{whom:Ae(this.user.sex)})},cancelStr(){return h("cancel")}},methods:{$str:h,clickCall(){this.$emit("onConnectLoadingListener",4,this.fromType)},clickHangUp(){this.$emit("onConnectLoadingListener",5,this.fromType)},clickMatchCancel(){this.$emit("onConnectLoadingListener",2,this.fromType)},startAnim(){let e=this.$refs.like;typeof e=="undefined"||typeof e.step=="undefined"||(e.step({opacity:0,scale:1.25},{duration:2e3}),e.step({opacity:1,scale:1},{duration:1}),e.run(()=>{this.startAnim()}))},clearTimer(){this.connectTimer&&(this.connectTimer=!1,clearInterval(this.connectTimer))},initTimer(){this.clearTimer(),this.connectTimer=setInterval(()=>{this.connectTimer&&(this.connectInt++,this.connectInt>10&&!this.isNetworkUnstable?(this.isNetworkUnstable=!0,this.$emit("onConnectLoadingListener",100,this.fromType)):this.connectInt>40&&(this.clearTimer(),this.$emit("onConnectLoadingListener",3,this.fromType)))},1e3)}},created(){setTimeout(()=>{this.startAnim()},500),this.fromType!=ct.ANSWER&&this.initTimer()},beforeUnmount(){this.clearTimer()}};function sl(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("l-img"),I),l=b((0,n.resolveDynamicComponent)("avatar-img"),Ui),c=b((0,n.resolveDynamicComponent)("uni-transition"),st);return(0,n.openBlock)(),(0,n.createElementBlock)("view",{class:"center",style:(0,n.normalizeStyle)([{width:`${a.wW}px`,height:`${a.wH}px`},{"flex-direction":"column"}]),renderWhole:!0},[(0,n.createVNode)(r,{src:"s/match/bg_connect.png",w:`${a.wW}px`,h:`${a.wW*.4}px`,style:{position:"absolute",left:"0",top:"0"}},null,8,["w","h"]),(0,n.createElementVNode)("view",{class:"view-logo",style:(0,n.normalizeStyle)({width:`${a.wW}px`,top:`${a.statusBarH+12}px`})},null,4),i.fromType==0?((0,n.openBlock)(),(0,n.createBlock)(r,{key:0,src:"s/match/a_match.png",w:"540rpx",h:"80rpx",style:(0,n.normalizeStyle)([{top:`${a.imgT}px`},{position:"absolute"}])},null,8,["style"])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("view",{class:"center",style:{width:"750rpx","flex-direction":"row"}},[(0,n.createVNode)(l,{user:i.user,w:"200rpx",h:"200rpx",radius:"100rpx",border:"1px solid #FFFFFF","place-w":"168rpx",style:{left:"185rpx"}},null,8,["user"]),(0,n.createVNode)(l,{user:a.myUser,w:"200rpx",h:"200rpx",radius:"100rpx",border:"1px solid #FFFFFF","place-w":"168rpx",style:{right:"185rpx"}},null,8,["user"]),(0,n.createVNode)(r,{src:"s/match/heart_love.gif",w:"240rpx",h:"240rpx",style:{position:"absolute",bottom:"0"}}),(0,n.createVNode)(c,{ref:"like",show:!0,style:{position:"absolute",left:"0",top:"0"}},{default:(0,n.withCtx)(()=>[(0,n.createVNode)(r,{src:"s/match/like_bg2.png",w:"750rpx",h:"202rpx"})]),_:1},512)]),(0,n.createElementVNode)("u-text",{style:(0,n.normalizeStyle)({marginTop:`${a.textT}px`}),class:"text"},(0,n.toDisplayString)(s.tipStr),5),a.isNetworkUnstable?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:1,style:(0,n.normalizeStyle)({bottom:`${a.btnBottom}px`}),class:"view-btn"},[(0,n.createElementVNode)("u-text",{onClick:t[0]||(t[0]=(...u)=>s.clickMatchCancel&&s.clickMatchCancel(...u)),class:"text-btn"},(0,n.toDisplayString)(s.cancelStr),1)],4)):i.fromType==2?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:2,style:(0,n.normalizeStyle)({bottom:`${a.btnBottom}px`}),class:"view-btn"},[(0,n.createElementVNode)("u-text",{onClick:t[1]||(t[1]=(...u)=>s.clickCall&&s.clickCall(...u)),class:"text-btn text-btn-act"},(0,n.toDisplayString)(s.callAgainStr),1),(0,n.createElementVNode)("u-text",{onClick:t[2]||(t[2]=(...u)=>s.clickHangUp&&s.clickHangUp(...u)),class:"text-btn"},(0,n.toDisplayString)(s.$str("hangUp")),1)],4)):(0,n.createCommentVNode)("",!0)],4)}var rl=v(ol,[["render",sl],["styles",[al]]]),ll={center:{"":{alignItems:"center",flexDirection:"row"}},"center-between":{"":{alignItems:"center",flexDirection:"row",justifyContent:"space-between"}},"beauty-pop":{"":{paddingTop:20,paddingRight:23,paddingBottom:20,paddingLeft:23,backgroundColor:"rgba(0,0,0,0.2)",borderTopLeftRadius:"28rpx",borderTopRightRadius:"28rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0}},title:{".beauty-pop ":{color:"#FFFFFF",fontSize:"24rpx",lineHeight:"34rpx",marginRight:"12rpx"}},level:{".beauty-pop ":{marginTop:"40rpx"}},item:{".beauty-pop .level ":{width:"80rpx",height:"80rpx",color:"#FFFFFF",fontSize:"26rpx",textAlign:"center",borderRadius:50,lineHeight:"80rpx",backgroundColor:"rgba(247,247,247,0.297)"}},active:{".beauty-pop .level ":{backgroundColor:"#9C28EA"}},default:{".beauty-pop .level ":{textAlign:"center",lineHeight:"80rpx",fontSize:"24rpx",color:"#FFFFFF"}}},cl={components:{CustomSlider:ki,LImg:I,UniPopup:Ne},emits:["onBeautyChange","onChange"],props:{fromType:{type:[Number,String],default:1}},data(){return{beautyInfo:{whitening:0,smoothing:0,rosy:0,level:0},currentSlider:"",levelArr:[0,1,2,3,4],safeBottomH:getApp().globalData.window.safeBottom}},computed:{getSliderW(){return(getApp().globalData.window.width-46-32)/2}},methods:{$str:h,onChange(e){this.$emit("onChange",e)},clickLevel(e){e!=this.beautyInfo.level&&(this.setBeautyLevel(e),this.$emit("onBeautyChange",this.beautyInfo),this.setStorageBeauty())},clickDefault(){this.fromType==1?je("beauty_info"):je("live_beauty_info"),this.initBeautyInfo(),this.$emit("onBeautyChange",this.beautyInfo)},onSliderChangeStart(e){this.currentSlider=e},onSliderChanged(e){_(this.currentSlider)||(this.beautyInfo[this.currentSlider]=e,this.$emit("onBeautyChange",this.beautyInfo),this.setStorageBeauty())},setBeautyLevel(e){let t=e*25;this.beautyInfo.whitening=t,this.beautyInfo.smoothing=t,this.beautyInfo.rosy=t,this.beautyInfo.level=e},setStorageBeauty(){this.fromType==1?j("beauty_info",JSON.stringify(this.beautyInfo)):j("live_beauty_info",JSON.stringify(this.beautyInfo))},getStorageBeauty(){return this.fromType==1?z("beauty_info"):z("live_beauty_info")},initBeautyInfo(){let e=this.getStorageBeauty();e?this.beautyInfo=xe(e):(this.setBeautyLevel(2),this.setStorageBeauty())},open(){this.$refs.beautyPop.open()}},created(){this.initBeautyInfo()}};function ul(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("l-img"),I),l=b((0,n.resolveDynamicComponent)("custom-slider"),ki),c=b((0,n.resolveDynamicComponent)("uni-popup"),Ne);return(0,n.openBlock)(),(0,n.createElementBlock)("view",{renderWhole:!0},[(0,n.createVNode)(c,{"safe-area":!1,onChange:s.onChange,"mask-bg-color":"rgba(0, 0, 0, 0)",ref:"beautyPop",type:"bottom"},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("view",{class:"beauty-pop",style:(0,n.normalizeStyle)({paddingBottom:a.safeBottomH+10+"px"})},[(0,n.createElementVNode)("view",{class:"center-between"},[(0,n.createElementVNode)("view",null,[(0,n.createElementVNode)("view",{class:"center"},[(0,n.createElementVNode)("u-text",{class:"title"},(0,n.toDisplayString)(s.$str("whitening")),1),(0,n.createVNode)(r,{src:"s/call/beauty-whitening.png",w:"32rpx",h:"32rpx"})]),(0,n.createVNode)(l,{key:"slider-1","fill-value":100,"max-value":a.beautyInfo.whitening,style:(0,n.normalizeStyle)([{"margin-top":"12rpx",height:"20rpx"},{width:s.getSliderW+"px"}]),"block-width":20,"line-height":4,onOnChange:s.onSliderChanged,onOnChangeStart:t[0]||(t[0]=u=>s.onSliderChangeStart("whitening")),onOnChanged:s.onSliderChanged,"active-color":"#FFFFFF","block-color":"#FFFFFF",inactiveColor:"rgba(255, 255, 255, 0.1)"},null,8,["max-value","style","onOnChange","onOnChanged"])]),(0,n.createElementVNode)("view",null,[(0,n.createElementVNode)("view",{class:"center"},[(0,n.createElementVNode)("u-text",{class:"title"},(0,n.toDisplayString)(s.$str("rosy")),1),(0,n.createVNode)(r,{src:"s/call/beauty-rosy.png",w:"32rpx",h:"32rpx"})]),(0,n.createVNode)(l,{key:"slider-2","fill-value":100,"max-value":a.beautyInfo.rosy,style:(0,n.normalizeStyle)([{"margin-top":"12rpx",height:"20rpx"},{width:s.getSliderW+"px"}]),"block-width":20,"line-height":4,onOnChange:s.onSliderChanged,onOnChangeStart:t[1]||(t[1]=u=>s.onSliderChangeStart("rosy")),onOnChanged:s.onSliderChanged,"active-color":"#FFFFFF","block-color":"#FFFFFF",inactiveColor:"rgba(255, 255, 255, 0.1)"},null,8,["max-value","style","onOnChange","onOnChanged"])])]),(0,n.createElementVNode)("view",{class:"center-between",style:{"margin-top":"62rpx"}},[(0,n.createElementVNode)("view",null,[(0,n.createElementVNode)("view",{class:"center"},[(0,n.createElementVNode)("u-text",{class:"title"},(0,n.toDisplayString)(s.$str("smoothing")),1),(0,n.createVNode)(r,{src:"s/call/beauty-smoothing.png",w:"32rpx",h:"32rpx"})]),(0,n.createVNode)(l,{key:"slider-3","fill-value":100,"max-value":a.beautyInfo.smoothing,style:(0,n.normalizeStyle)([{"margin-top":"12rpx",height:"20rpx"},{width:s.getSliderW+"px"}]),"block-width":20,"line-height":4,onOnChange:s.onSliderChanged,onOnChangeStart:t[2]||(t[2]=u=>s.onSliderChangeStart("smoothing")),onOnChanged:s.onSliderChanged,"active-color":"#FFFFFF","block-color":"#FFFFFF",inactiveColor:"rgba(255, 255, 255, 0.1)"},null,8,["max-value","style","onOnChange","onOnChanged"])]),(0,n.createElementVNode)("view")]),(0,n.createElementVNode)("view",{class:"level center-between"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.levelArr,(u,f)=>((0,n.openBlock)(),(0,n.createElementBlock)("u-text",{onClick:d=>s.clickLevel(u),key:"l"+f,class:(0,n.normalizeClass)(["item",[a.beautyInfo.level==u?"active":""]])},(0,n.toDisplayString)(u),11,["onClick"]))),128)),(0,n.createElementVNode)("u-text",{onClick:t[3]||(t[3]=(...u)=>s.clickDefault&&s.clickDefault(...u)),class:"default"},(0,n.toDisplayString)(s.$str("default")),1)])],4)]),_:1},8,["onChange"])])}var hl=v(cl,[["render",ul],["styles",[ll]]]),dl={"view-base":{"":{width:"320rpx"}},"view-user":{"":{flexDirection:"row",alignItems:"center"}}},pl={components:{AvatarImgVip:Fi,LImg:I,UBaseInfo:ht},props:{user:{type:Object,default(){return{}}},timerStr:{type:String,default:""}},methods:{$str:h,clickThis(e){e.stopPropagation()}}};function fl(e,t,i,o,a,s){let r=(0,n.resolveComponent)("avatar-img-vip"),l=b((0,n.resolveDynamicComponent)("u-base-info"),ht);return(0,n.openBlock)(),(0,n.createElementBlock)("view",{class:"view-base",renderWhole:!0},[(0,n.createElementVNode)("view",{class:"view-user"},[(0,n.createVNode)(r,{user:i.user,w:"60rpx",h:"60rpx",border:"1px solid #FFFFFF","place-type":0},null,8,["user"]),(0,n.createVNode)(l,{info:i.user,"name-width":"200rpx","show-country":!0,"name-color":"#FFFFFF","name-size":"34rpx","show-age":!0,fw:600,style:{"margin-left":"12rpx"}},null,8,["info"])]),(0,n.createElementVNode)("u-text",{style:{"font-size":"20rpx",color:"#FFFFFF","font-weight":"400","margin-top":"16rpx"}},(0,n.toDisplayString)(i.timerStr?"\u23F1 "+i.timerStr:`${s.$str("calling")}...`),1)])}var ml=v(pl,[["render",fl],["styles",[dl]]]),gl={"center-start":{"":{flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}},"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"view-timer":{"":{flexDirection:"row",alignItems:"center"}},text:{".view-timer ":{textAlign:"right",fontSize:"28rpx",color:"#FFFFFF",marginRight:"20rpx"}},"line-ver":{".view-timer ":{width:"2rpx",height:"24rpx",backgroundColor:"rgba(255,255,255,0.5)",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",marginRight:"4rpx"}},"text-def":{".view-timer ":{fontSize:"28rpx",color:"#FFFFFF"}}},_l={components:{CallUserInfo2:ml},emits:["clickHangUp","onTimerListener","onSnapshot"],props:{roomType:{type:Number,default:1},userInfo:{type:Object,default(){return{}}},roomId:{type:[Number,String],default:0}},data(){return{timer:!1,timerInt:0,totalDuration:0}},computed:{getTimerStr(){return xt(this.timerInt)}},methods:{$str:h,clickReport(e){if(e.stopPropagation(),D.isAndroid){uni.showLoading({mask:!0}),this.$emit("onSnapshot");return}Ca(!1,t=>{let i=setTimeout(()=>{clearTimeout(i),Li("video_chat").then(o=>{uni.hideLoading(),ya(),Y(me.reportDialog,{targetUid:this.userInfo.uid,roomId:this.roomId,path:o,fromType:3})})},100)})},clickHangUp(e){e.stopPropagation(),this.$emit("clickHangUp",e,1)},handleAndroidReport(e,t){if(!e){uni.hideLoading(),Y(me.reportDialog,{targetUid:this.userInfo.uid,roomId:this.roomId,fromType:3});return}setTimeout(()=>{Li("video_chat").then(i=>{Y(me.reportDialog,{targetUid:this.userInfo.uid,roomId:this.roomId,path:i,fromType:3}),uni.hideLoading(),typeof t=="function"&&t()})},1e3)},startTimer(){this.timer||(this.timer=setInterval(()=>{this.totalDuration+=1,this.timerInt+=1,this.$emit("onTimerListener",{total:this.totalDuration,duration:this.timerInt})},1e3))}},beforeUnmount(){this.timer&&clearInterval(this.timer)}};function wl(e,t,i,o,a,s){let r=(0,n.resolveComponent)("call-user-info2"),l=b((0,n.resolveDynamicComponent)("l-img"),I);return(0,n.openBlock)(),(0,n.createElementBlock)("view",{class:"center-between",renderWhole:!0},[(0,n.createVNode)(r,{user:i.userInfo,timerStr:s.getTimerStr,style:{"margin-left":"30rpx"}},null,8,["user","timerStr"]),(0,n.createElementVNode)("view",{class:"view-timer"},[(0,n.createVNode)(l,{onClick:(0,n.withModifiers)(s.clickReport,["stop"]),src:"/static/call-report.png",w:"64rpx",h:"74rpx",style:{"margin-right":"20rpx"}},null,8,["onClick"]),(0,n.createElementVNode)("view",{style:{"margin-right":"8rpx","justify-content":"center","align-items":"center"}},[(0,n.createVNode)(l,{onClick:s.clickHangUp,src:"s/call/hang_up_w.png",w:"50rpx",h:"56rpx"},null,8,["onClick"]),(0,n.createElementVNode)("u-text",{style:{"font-size":"20rpx",color:"rgba(255,255,255,0.7)","line-height":"11px"}},(0,n.toDisplayString)(s.$str("hangUp")),1)])])])}var yl=v(_l,[["render",wl],["styles",[gl]]]),Cl={name:"RtcSurfaceView",props:{zOrderMediaOverlay:{type:Boolean,default:!1},zOrderOnTop:{type:Boolean,default:!1},renderMode:{type:Number,default:wa.Hidden},uid:Number,channelId:String,mirrorMode:{type:Number,default:ga.Auto}}};function Tl(e,t,i,o,a,s){let r=(0,n.resolveComponent)("Agora-RTC-SurfaceView");return(0,n.openBlock)(),(0,n.createBlock)(r,{zOrderMediaOverlay:i.zOrderMediaOverlay,zOrderOnTop:i.zOrderOnTop,renderMode:i.renderMode,data:{uid:i.uid,channelId:i.channelId},mirrorMode:i.mirrorMode},null,8,["zOrderMediaOverlay","zOrderOnTop","renderMode","data","mirrorMode"])}var Ta=v(Cl,[["render",Tl]]),Sl={abs:{"":{position:"absolute"}},pos:{"":{position:"absolute",top:0,left:0}},"bg-avatar":{"":{backgroundColor:"rgba(0,0,0,0.5)"}}},bl={components:{LImg:I,RtcSurfaceView:Ta},props:{callType:{type:Number,default:1},fRemoteUid:{type:[String,Number],default:0},fLocalUid:{type:[String,Number],default:10},userInfo:{type:Object,default(){return{}}}},data(){return{sW:getApp().globalData.window.width,sH:getApp().globalData.window.height,remoteW:0,remoteH:0,remoteUid:0,localUid:10,muteRemoteVideoAvatar:"",muteLocalVideoAvatar:"",isLocal:!1}},watch:{fRemoteUid:{handler(e,t){this.remoteUid=e},immediate:!0},fLocalUid:{handler(e,t){this.localUid=e},immediate:!0}},computed:{remoteWHStyle(){return{width:`${this.remoteW}px`,height:`${this.remoteH}px`}},blurBgSrc(){return this.isLocal?Pe(getApp().pubUser.avatar):Pe(this.userInfo.avatar)},blurViewType(){return D.isAndroid,1}},methods:{setSurfaceChange(){if(this.callType==1)if(this.localUid==0){this.localUid=this.remoteUid,this.remoteUid=0;let e=this.muteLocalVideoAvatar,t=this.muteRemoteVideoAvatar;this.muteLocalVideoAvatar=t,this.muteRemoteVideoAvatar=e}else{this.remoteUid=this.localUid,this.localUid=0;let e=this.muteRemoteVideoAvatar,t=this.muteLocalVideoAvatar;this.muteLocalVideoAvatar=e,this.muteRemoteVideoAvatar=t}},setMuteVideoAvatar(e,t){this.isLocal=e,e?this.localUid==0?this.muteLocalVideoAvatar=t?this.blurBgSrc:"":this.muteRemoteVideoAvatar=t?this.blurBgSrc:"":this.localUid==0?this.muteRemoteVideoAvatar=t?this.blurBgSrc:"":this.muteLocalVideoAvatar=t?this.blurBgSrc:""},setWH(){this.remoteW=this.sW,this.remoteH=this.sH}},created(){this.setWH()}};function Al(e,t,i,o,a,s){let r=(0,n.resolveComponent)("rtc-surface-view"),l=b((0,n.resolveDynamicComponent)("l-img"),I);return(0,n.openBlock)(),(0,n.createElementBlock)("view",{class:"abs",style:(0,n.normalizeStyle)([s.remoteWHStyle,{top:"0"}]),renderWhole:!0},[i.callType==1?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0,class:"pos",style:(0,n.normalizeStyle)([s.remoteWHStyle])},[(0,n.createVNode)(r,{class:"pos",style:(0,n.normalizeStyle)([s.remoteWHStyle]),uid:a.remoteUid},null,8,["style","uid"]),a.muteRemoteVideoAvatar&&s.blurViewType==1?((0,n.openBlock)(),(0,n.createElementBlock)("u-image",{key:0,src:a.muteRemoteVideoAvatar,mode:"aspectFill",style:(0,n.normalizeStyle)([s.remoteWHStyle,{position:"absolute",left:"0",right:"0"}])},null,12,["src"])):a.muteRemoteVideoAvatar&&s.blurViewType==2?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:1,class:"pos",style:(0,n.normalizeStyle)(s.remoteWHStyle),blurEffect:"light"},null,4)):(0,n.createCommentVNode)("",!0)],4)):((0,n.openBlock)(),(0,n.createBlock)(l,{key:1,src:"/static/e-chat/call-view-bg.png",w:`${a.remoteW}px`,h:`${a.remoteH}px`,"place-type":0,style:{position:"absolute",left:"0",top:"0"}},null,8,["w","h"]))],4)}var vl=v(bl,[["render",Al],["styles",[Sl]]]),xl={abs:{"":{position:"absolute"}},pos:{"":{position:"absolute",top:0,left:0}},"view-bottom":{"":{backgroundImage:"linear-gradient(to bottom, rgba(255, 255, 255, 0), black)",position:"absolute",bottom:0,height:"144rpx"}}},kl={components:{LImg:I,AvatarImg:Ui,RtcSurfaceView:Ta},emits:["clickCameraSwitch","onSurfaceChange","onSurfaceMoveTipListener"],props:{callType:{type:Number,default:q.VIDEO},fRemoteUid:{type:[String,Number],default:0},fLocalUid:{type:[String,Number],default:10},userInfo:{type:Object,default(){return{}}},actionType:{type:Number,default:H.CALL}},data(){return{sW:getApp().globalData.window.width,sH:getApp().globalData.window.height,localW:uni.upx2px(190),localH:uni.upx2px(400),localX:0,localY:0,remoteUid:0,localUid:10,muteRemoteVideoAvatar:"",muteLocalVideoAvatar:"",zOrderTop:!D.isAndroid,showSurface:!1,viewMoving:!1,viewMovingTimer:!1,viewMoveDisabled:!0,showMoveTip:!1,isLocal:!1}},watch:{fRemoteUid:{handler(e,t){this.remoteUid=e},immediate:!0},fLocalUid:{handler(e,t){this.localUid=e},immediate:!0}},computed:{localWHStyle(){return{width:`${this.localW}px`,height:`${this.localH}px`}},blurBgSrc(){return this.isLocal?Pe(getApp().pubUser.avatar):Pe(this.userInfo.avatar)},blurViewType(){return D.isAndroid,1}},methods:{onChange(e){this.showMoveTip&&(this.showMoveTip=!1,this.$emit("onSurfaceMoveTipListener",this.showMoveTip)),D.isAndroid&&(this.viewMoving||(this.viewMoving=!0))},onTouchStart(e){e&&e.stopPropagation(),this.viewMoveDisabled=!0},onTouchMove(e){e&&e.stopPropagation(),this.viewMoveDisabled=!1},onTouchEnd(e){e&&e.stopPropagation(),this.viewMoveDisabled=!0,D.isAndroid&&(this.viewMovingTimer&&clearTimeout(this.viewMovingTimer),this.viewMovingTimer=setTimeout(()=>{this.viewMoving=!1},800))},clickCamera(e){e&&e.stopPropagation(),this.$emit("clickCameraSwitch")},clickChangeSurface(e){if(this.callType==1&&!(D.isAndroid&&this.viewMoving)){if(e&&e.stopPropagation(),this.refreshZOrderTop(),this.localUid==0){this.localUid=this.remoteUid,this.remoteUid=0;let t=this.muteLocalVideoAvatar,i=this.muteRemoteVideoAvatar;this.muteLocalVideoAvatar=i,this.muteRemoteVideoAvatar=t}else{this.remoteUid=this.localUid,this.localUid=0;let t=this.muteRemoteVideoAvatar,i=this.muteLocalVideoAvatar;this.muteLocalVideoAvatar=t,this.muteRemoteVideoAvatar=i}this.$emit("onSurfaceChange")}},setMuteVideoAvatar(e,t){this.refreshZOrderTop(),this.isLocal=e,e?this.localUid==0?this.muteLocalVideoAvatar=t?this.blurBgSrc:"":this.muteRemoteVideoAvatar=t?this.blurBgSrc:"":this.localUid==0?this.muteRemoteVideoAvatar=t?this.blurBgSrc:"":this.muteLocalVideoAvatar=t?this.blurBgSrc:""},refreshZOrderTop(){D.isAndroid&&(this.zOrderTop=!0,setTimeout(()=>{this.zOrderTop=!1},300))},initMovableXY(){this.localX=this.sW-this.localW-uni.upx2px(20),this.localY=uni.upx2px(240)}},mounted(){if(this.callType!=q.VIDEO)return;let e=D.isAndroid&&this.actionType==H.ANSWER;e||this.initMovableXY();let t=D.isAndroid?e?1e3:500:300;setTimeout(()=>{this.showSurface=!0,e&&this.$nextTick(()=>{this.initMovableXY()}),this.showMoveTip=!z("video_chat_surface_move_tip"),this.showMoveTip&&this.$emit("onSurfaceMoveTipListener",this.showMoveTip)},t)},created(){}};function Ll(e,t,i,o,a,s){let r=(0,n.resolveComponent)("rtc-surface-view"),l=b((0,n.resolveDynamicComponent)("l-img"),I),c=(0,n.resolveComponent)("movable-view");return i.callType==1?((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,onClick:s.clickChangeSurface,onTouchend:s.onTouchEnd,onChange:s.onChange,onTouchstart:s.onTouchStart,onTouchmove:s.onTouchMove,disabled:a.viewMoveDisabled,animation:!1,direction:"all",x:a.localX,y:a.localY,"out-of-bounds":!1,style:(0,n.normalizeStyle)([[s.localWHStyle],{"align-items":"center"}]),"render-whole":!0},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("view",{style:(0,n.normalizeStyle)(s.localWHStyle),class:"pos"},null,4),i.callType==1&&a.showSurface?((0,n.openBlock)(),(0,n.createBlock)(r,{key:0,class:"pos",style:(0,n.normalizeStyle)([s.localWHStyle]),uid:a.localUid,"z-order-media-overlay":a.zOrderTop,"z-order-on-top":a.zOrderTop},null,8,["style","uid","z-order-media-overlay","z-order-on-top"])):(0,n.createCommentVNode)("",!0),a.muteLocalVideoAvatar&&s.blurViewType==1?((0,n.openBlock)(),(0,n.createElementBlock)("u-image",{key:1,src:a.muteLocalVideoAvatar,mode:"aspectFill",style:(0,n.normalizeStyle)([s.localWHStyle,{position:"absolute",left:"0",right:"0"}])},null,12,["src"])):a.muteLocalVideoAvatar&&s.blurViewType==2?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:2,class:"pos",style:(0,n.normalizeStyle)(s.localWHStyle),blurEffect:"light"},null,4)):(0,n.createCommentVNode)("",!0),i.callType==1&&a.showSurface?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:3,style:(0,n.normalizeStyle)({width:`${a.localW}px`}),class:"view-bottom"},[(0,n.createVNode)(l,{onClick:s.clickCamera,src:"s/call/camera_switch_2.png",w:"48rpx",h:"48rpx",style:{position:"absolute",bottom:"20rpx",right:"20rpx"}},null,8,["onClick"])],4)):(0,n.createCommentVNode)("",!0)]),_:1},8,["onClick","onTouchend","onChange","onTouchstart","onTouchmove","disabled","x","y","style"])):(0,n.createCommentVNode)("",!0)}var Il=v(kl,[["render",Ll],["styles",[xl]]]),Ml={"view-answer":{"":{alignItems:"center",justifyContent:"center"}},"view-answer-img":{"":{alignItems:"center",justifyContent:"center",backgroundColor:"#17BB07"}}},Fl={emits:["click"],props:{callType:{type:Number,default:1},animW:{type:Number,default:144},bgW:{type:Number,default:110},iconW:{type:Number,default:68},iconVW:{type:Number,default:48}},data(){return{}},computed:{bgStyle(){return{width:`${this.bgW}rpx`,height:`${this.bgW}rpx`,borderRadius:`${this.bgW/2}rpx`}},answerIcon(){return this.callType==q.VIDEO?"s/call/answer_white.png":"s/call/answer_voice_white.png"},answerIconH(){return this.callType==q.VIDEO?`${this.iconVW}rpx`:`${this.iconW}rpx`}},methods:{clickAnswer(e){e&&e.stopPropagation(),this.$emit("click")},startAnswerBgAnim(){let e=this.$refs.animAnswerBg;e==null||typeof e=="undefined"||typeof e.step=="undefined"||(e.step({scale:1.3,opacity:0},{duration:1e3}),e.step({scale:1,opacity:1},{duration:1}),e.run(()=>{this.startAnswerBgAnim()}))},startAnswerIcon(){let e=this.$refs.animAnswerImg;e==null||typeof e=="undefined"||typeof e.step=="undefined"||(e.step({rotate:-10},{duration:500}),e.step({rotate:10},{duration:500}),e.run(()=>{this.startAnswerIcon()}))}},created(){setTimeout(()=>{this.startAnswerBgAnim(),this.startAnswerIcon()},1e3)}};function El(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("uni-transition"),st),l=b((0,n.resolveDynamicComponent)("l-img"),I);return(0,n.openBlock)(),(0,n.createElementBlock)("view",{onClick:t[1]||(t[1]=(...c)=>s.clickAnswer&&s.clickAnswer(...c)),class:"view-answer",style:(0,n.normalizeStyle)({width:`${i.animW}rpx`,height:`${i.animW}rpx`}),renderWhole:!0},[(0,n.createVNode)(r,{ref:"animAnswerBg",show:!0,style:(0,n.normalizeStyle)([s.bgStyle,{position:"absolute",background:"#17BB07"}])},null,8,["style"]),(0,n.createElementVNode)("view",{onClick:t[0]||(t[0]=(...c)=>s.clickAnswer&&s.clickAnswer(...c)),style:(0,n.normalizeStyle)(s.bgStyle),class:"view-answer-img"},[(0,n.createVNode)(r,{ref:"animAnswerImg",show:!0},{default:(0,n.withCtx)(()=>[(0,n.createVNode)(l,{onClick:s.clickAnswer,src:s.answerIcon,w:`${i.iconW}rpx`,h:s.answerIconH},null,8,["onClick","src","w","h"])]),_:1},512)],4)],4)}var Dl=v(Fl,[["render",El],["styles",[Ml]]]),Rl={center:{"":{alignItems:"center",flexDirection:"row"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"flex-wrap":{"":{flexWrap:"wrap",flexDirection:"row"}},"msg-bar-express":{"":{position:"relative",backgroundColor:"#FFFFFF",height:0}},"expression-bar":{"":{alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingTop:"14rpx",paddingRight:"20rpx",paddingBottom:"14rpx",paddingLeft:"20rpx"}},"choose-item":{".expression-bar ":{width:"72rpx",height:"72rpx",position:"relative",marginRight:"28rpx"}},"delete-icon":{".expression-bar ":{width:"60rpx",height:"60rpx"}},line:{".expression-bar ":{height:1,backgroundColor:"#CCCCCC",transform:"scaleY(0.5)",transformOrigin:"50% 100%",opacity:.5}},"emoji-wrap":{"":{paddingTop:"20rpx",paddingRight:10,paddingBottom:0,paddingLeft:10}},"pig-wrap":{"":{paddingTop:0,paddingRight:5,paddingBottom:"10rpx",paddingLeft:5}},"new-tag":{"":{backgroundColor:"#34C759",lineHeight:"24rpx",paddingTop:0,paddingRight:"6rpx",paddingBottom:0,paddingLeft:"6rpx",borderRadius:"12rpx",color:"#FFFFFF",fontSize:"16rpx",position:"absolute",left:"40rpx"}},"expression-from":{"":{height:"20rpx",paddingTop:0,paddingRight:"8rpx",paddingBottom:0,paddingLeft:"8rpx",borderBottomLeftRadius:"4rpx",position:"absolute",right:0,top:0,zIndex:111}},text:{".expression-from ":{fontSize:"16rpx",fontWeight:"600",lineHeight:"20rpx",marginLeft:"4rpx"}}},Ol=ue("animation"),Pl={mixins:[qn],name:"MsgBarAction",components:{LImg:I,MIcon:Xn,MView:Jn},emits:["onOpen","onChooseExpressImg"],props:{isReception:{type:Boolean,default:!1}},data(){return{defHeight:Math.round(240*getApp().globalData.window.scaleH),originalHeight:0,isAndroid:D.isAndroid,height:0,emojiList:[],screenW:getApp().globalData.window.width,emojiW:0,pigW:0,safeAreaBottom:getApp().globalData.window.safeBottom,swiperCurrent:0,delOpacity:.4,barStyle:{},chooseBgStyle:{borderRadius:"8rpx",background:"rgba(255, 255, 255, 0.1)"},showNewTag:!1,expressionFrom:"Flaticon",expressionBarActW:getApp().globalData.window.width-(uni.upx2px(160)+uni.upx2px(92)),scrollLeft:0,curScrollLeft:0,iconColorW:this.isReception?"_w":"",expressionsList:[]}},watch:{height(e){this.$emit("onOpen",e>0,e)}},computed:{expressionFromStyle(){var e,t,i;let o,a;return((i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.style)==Zn.LIGHT?(o="#FFFFFF",a="#CCCCCC"):(o="#999999",a="#333333"),{color:o,bgColor:a}},barBgColor(){return"#fff"},actionBgColor(){var e,t,i;return this.isReception?"transparent":(i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.color.bg1}},methods:{$str:h,clickClose(){this.open(!1)},clickBarImg(e,t){e&&e.stopPropagation(),t==2&&this.showNewTag&&(this.showNewTag=!1,j("show_new_expression_tag_"+getApp().globalData.uid,"1")),this.handleTabEmoji(t)},clickDelete(){uni.$emit("event_call_delete_text")},clickPig(e,t){if(e&&e.stopPropagation(),Qn())return;let i={path:t,width:100,height:100};this.$emit("onChooseExpressImg",i)},clickEmoji(e){this.delOpacity<1&&(this.delOpacity=1),uni.$emit("event_call_add_emoji_text",e)},onSwiperChange(e){let t=e.detail.current;this.handleTabEmoji(t)},onScrollView(e){this.curScrollLeft=e.detail.scrollLeft},isShow(){return this.height>0},setHeight(e){this.originalHeight=e,this.isShow()&&this.height!=this.defHeight&&this.open(!0)},handleTabEmoji(e){if(this.swiperCurrent==e)return;this.swiperCurrent=e;let t=0,i=uni.upx2px(100)*(this.expressionsList.length+1),o;o=uni.upx2px(100)*e,t=uni.upx2px(100)*e+uni.upx2px(40);let a=uni.upx2px(72),s=this.expressionBarActW/2;o<=s?(this.scrollLeft=this.curScrollLeft,this.$nextTick(()=>{this.scrollLeft=0})):i-t<=s?(this.scrollLeft=this.curScrollLeft,this.$nextTick(()=>{let r=D.isAndroid?10:2;this.scrollLeft=i-this.expressionBarActW+r})):this.scrollLeft=t-(s-a/2)},parseExpressions(){this.emojiList=["\u{1F600}","\u{1F603}","\u{1F604}","\u{1F601}","\u{1F606}","\u{1F605}","\u{1F602}","\u{1F923}","\uFE0F\u{1F60A}","\u{1F607}","\u{1F642}","\u{1F643}","\u{1F609}","\u{1F60C}","\u{1F60D}","\u{1F970}","\u{1F618}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F60B}","\u{1F61B}","\u{1F61D}","\u{1F61C}","\u{1F92A}","\u{1F928}","\u{1F9D0}","\u{1F913}","\u{1F60E}","\u{1F929}","\u{1F973}","\u{1F60F}","\u{1F612}","\u{1F61E}","\u{1F614}","\u{1F61F}","\u{1F615}","\u{1F641}","\uFE0F\u{1F616}","\u{1F62B}","\u{1F629}","\u{1F97A}","\u{1F622}","\u{1F62D}","\u{1F624}","\u{1F620}","\u{1F621}","\u{1F92C}","\u{1F92F}","\u{1F633}","\u{1F975}","\u{1F976}","\u{1F631}","\u{1F628}","\u{1F630}","\u{1F625}","\u{1F613}","\u{1F917}","\u{1F914}","\u{1F92D}","\u{1F92B}","\u{1F925}","\u{1F636}","\u{1F610}"],this.pigW=parseInt((this.screenW-10)/5)},open(e,t){this.height=e?this.originalHeight:0,this.isAndroid?this.barStyle={height:`${this.height}px`}:Ol.transition(this.$refs.refBarAction,{styles:{height:`${e?this.originalHeight:0}px`},duration:t?1:this.isAndroid?100:300,timingFunction:"ease",needLayout:!0,delay:0})}},created(){this.parseExpressions(),uni.$on("event_bar_action_can_del",e=>{e&&this.delOpacity>=1||(this.delOpacity=e?1:.4)}),this.originalHeight=getApp().globalData.keyboardH,this.originalHeight==0&&(this.originalHeight=this.defHeight),this.emojiW=parseInt((this.screenW-20)/8),this.pigW=parseInt((this.screenW-10)/5),this.showNewTag=!z("show_new_expression_tag_"+getApp().globalData.uid)},unmounted(){uni.$off("event_bar_action_can_del")}};function Nl(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("l-img"),I),l=(0,n.resolveComponent)("m-icon"),c=(0,n.resolveComponent)("m-view"),u=(0,n.resolveComponent)("swiper-item"),f=(0,n.resolveComponent)("swiper");return(0,n.openBlock)(),(0,n.createElementBlock)("view",{ref:"refBarAction",class:"msg-bar-express",style:(0,n.normalizeStyle)([a.barStyle,{background:"#fff"}]),renderWhole:!0},[(0,n.createVNode)(c,{onClick:t[5]||(t[5]=(0,n.withModifiers)(()=>{},["stop"])),type:"bg2",style:(0,n.normalizeStyle)([{"flex-direction":"row","align-items":"center","justify-content":"space-between",padding:"16rpx 38rpx"},{width:`${a.screenW}px`,background:`${s.barBgColor}`}]),class:"expression-bar"},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("view",{class:"center"},[(0,n.createElementVNode)("scroll-view",{scrollX:!0,showScrollbar:!1,scrollLeft:a.scrollLeft,onScroll:t[2]||(t[2]=(...d)=>s.onScrollView&&s.onScrollView(...d)),class:"center",style:(0,n.normalizeStyle)([{width:`${a.expressionBarActW}px`},{height:"72rpx"}])},[(0,n.createElementVNode)("view",{onClick:t[1]||(t[1]=d=>s.clickBarImg(d,0)),class:"choose-item center-align",style:(0,n.normalizeStyle)(a.swiperCurrent==0?a.chooseBgStyle:{background:"#F1F3F6"})},[(0,n.createVNode)(r,{onClick:t[0]||(t[0]=d=>s.clickBarImg(d,0)),src:"/static/call-emigo.png",needStyle:1,w:"60rpx",h:"60rpx"})],4),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.expressionsList,(d,y)=>((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:y,onClick:x=>s.clickBarImg(x,y+1),class:"choose-item center-align",style:(0,n.normalizeStyle)(a.swiperCurrent==y+1?a.chooseBgStyle:{background:"transparent"})},[(0,n.createVNode)(r,{onClick:x=>s.clickBarImg(x,y+1),src:d.icon,needStyle:1,w:"60rpx",h:"60rpx"},null,8,["onClick","src"])],12,["onClick"]))),128))],44,["scrollLeft"])]),(0,n.createElementVNode)("view",{class:"center"},[(0,n.createElementVNode)("view",{onClick:t[3]||(t[3]=(...d)=>s.clickDelete&&s.clickDelete(...d)),class:"center-align delete-icon"},[(0,n.createVNode)(r,{src:"/static/call-delete-emg.png",w:"48rpx",h:"48rpx"})]),a.isAndroid?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0,onClick:t[4]||(t[4]=(...d)=>s.clickClose&&s.clickClose(...d)),class:"center-align delete-icon",style:{"margin-left":"16rpx"}},[(0,n.createVNode)(l,{type:"bottom",size:"36rpx",color:i.isReception?"#FFFFFF":"#999999"},null,8,["color"])])):(0,n.createCommentVNode)("",!0)])]),_:1},8,["style"]),(0,n.createVNode)(f,{current:a.swiperCurrent,onChange:s.onSwiperChange,style:(0,n.normalizeStyle)({height:a.originalHeight-50+"px"})},{default:(0,n.withCtx)(()=>[(0,n.createVNode)(u,{class:"swiper-item"},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("view",{style:{background:"#F1F3F6"}},[(0,n.createElementVNode)("scroll-view",{scrollY:"true",class:"emoji-wrap",showScrollbar:!1,style:(0,n.normalizeStyle)({height:a.originalHeight-50+"px"})},[(0,n.createElementVNode)("view",{onClick:t[6]||(t[6]=(0,n.withModifiers)(()=>{},["stop"])),class:"flex-wrap",style:(0,n.normalizeStyle)({paddingBottom:a.safeAreaBottom+"px"})},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.emojiList,(d,y)=>((0,n.openBlock)(),(0,n.createElementBlock)("view",{class:"center-align",onClick:(0,n.withModifiers)(x=>s.clickEmoji(d),["stop"]),key:"e"+y,style:(0,n.normalizeStyle)({width:a.emojiW+"px",height:a.emojiW+"px"})},[(0,n.createElementVNode)("u-text",{style:{"font-size":"60rpx"}},(0,n.toDisplayString)(d),1)],12,["onClick"]))),128))],4)],4)])]),_:1})]),_:1},8,["current","onChange","style"])],4)}var Bl=v(Pl,[["render",Nl],["styles",[Rl]]]),Ul={"view-base":{"":{position:"absolute",zIndex:1111}},"view-action":{"":{height:"100rpx",flexDirection:"row",alignItems:"center"}},"view-text-chat":{"":{flex:1,height:"80rpx",marginLeft:"20rpx",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderRadius:"40rpx",borderWidth:1,borderStyle:"solid",borderColor:"rgba(255,255,255,0.2)",backgroundColor:"rgba(0,0,0,0.2)"}},"text-message":{".view-text-chat ":{flex:1,lineHeight:"80rpx",color:"rgba(255,255,255,0.5)",marginLeft:"20rpx",fontSize:"24rpx"}},"view-input":{"":{backgroundColor:"#ffffff",paddingTop:"12rpx",paddingRight:"24rpx",paddingBottom:"12rpx",paddingLeft:"24rpx"}},"view-send-tex":{".view-input ":{flexDirection:"row",alignItems:"flex-end"}},"textarea-class":{".view-input ":{flex:1,position:"relative",paddingTop:"20rpx",paddingRight:"82rpx",paddingBottom:"20rpx",paddingLeft:"26rpx",borderRadius:"40rpx",backgroundColor:"#F1F3F6"}},"input-bar":{".view-input ":{lineHeight:40,fontSize:14,flex:1}},expression:{".view-input ":{position:"absolute",right:"20rpx",bottom:"20rpx"}},input:{".view-input ":{flex:1,marginLeft:"30rpx",backgroundColor:"rgba(255,255,255,0.2)",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(255,255,255,0.2)",paddingLeft:"20rpx",paddingRight:"20rpx",color:"#FFFFFF",height:"68rpx",borderRadius:"12rpx"}},"view-send":{".view-input ":{paddingTop:"8rpx",paddingRight:"8rpx",paddingBottom:"8rpx",paddingLeft:"8rpx",borderRadius:"12rpx",marginLeft:"10rpx"}},"def-btn-action":{"":{width:"66rpx",height:"66rpx",paddingTop:"6rpx",paddingRight:"6rpx",paddingBottom:"6rpx",paddingLeft:"6rpx",backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"12rpx",marginLeft:"20rpx"}}};getApp().globalData.window;var Vl={components:{CallMsgBarAction:Bl,LImg:I},emits:["onInputFocus","clickAction","onSendText","clickThis","onShowInput"],props:{user:{type:Object,default(){return{}}},callType:{type:Number,default:1},roomId:{type:[String,Number],default:0},isShow:{type:[Boolean,Number],default:!0},micStatus:{type:[Number,String],default:0},cameraStatus:{type:[Number,String],default:0}},data(){return{sW:getApp().globalData.window.width,deSw:uni.upx2px(130),bottom:getApp().globalData.window.safeBottom,showInput:!1,text:"",cursorSpacing:uni.upx2px(12),voiceRemoteStatus:!0,showExpression:!1,isKeyboardOpen:!1,needOpenAction:!1,height:0,emojiIndexList:[],placeHeight:0,hideText:""}},computed:{CALL_TYPE(){return q},viewShowStyle(){return{marginLeft:`${this.isShow?0:`-${this.sW}`}px`}},likeSrc(){return this.user.is_follow?"s/call/like_s_1.png":"s/call/like_n_1.png"},sendOpacity(){return _(this.text)?.4:1}},watch:{showInput(e){this.$emit("onShowInput",e),e==!1&&(uni.hideKeyboard(),this.hideText=this.text,this.text="")}},methods:{$str:h,clickAction(e){e==3?this.voiceRemoteStatus?ge(h("tips"),h("muteChatRemoteAudioTip",{his:Pt(this.user.sex)}),()=>{this.voiceRemoteStatus=!this.voiceRemoteStatus,this.$emit("clickAction",e,this.voiceRemoteStatus)},"",h("sure")):(this.voiceRemoteStatus=!this.voiceRemoteStatus,this.$emit("clickAction",e,this.voiceRemoteStatus)):this.$emit("clickAction",e)},onKeyboardChange(e){e.height<=0?(this.isKeyboardOpen=!1,this.$emit("onInputFocus",!1),this.needOpenAction&&(this.needOpenAction=!1,this.$refs.msgBarAction.open(!0,!0)),this.placeHeight=0):(this.placeHeight=10,this.isKeyboardOpen=!0,this.$refs.msgBarAction.setHeight(e.height)),this.height=e.height},onInputFocus(){this.showExpression=!0,this.$emit("onInputFocus")},onKeyboardHeightChanged(e){e.detail.height>0||this.$refs.msgBarAction.isShow()||(this.showExpression=!0)},onChooseExpressImg(e){},onInputBlur(){},onActionOpen(e,t){this.msgBarActionHeight=t,e||(this.showExpression=!0)},hideInput(e){e&&e.stopPropagation(),this.showInput=!1,this.$nextTick(()=>{this.$refs.input.blur(),this.$emit("onInputFocus",!1)})},clickThis(e){e&&e.stopPropagation(),this.$emit("clickThis")},clickMsg(e){e&&e.stopPropagation(),this.showInput=!0,this.$nextTick(()=>{this.$refs.input.focus(),this.$emit("onInputFocus",!0),this.text=this.hideText})},clickLike(e){e&&e.stopPropagation(),jn(this.user.uid,this.user.is_follow,this.roomId),this.$emit("clickFollow",{isFollow:this.user.is_follow})},clickExpression(){if(this.$refs.msgBarAction.isShow())this.isKeyboardOpen?(uni.hideKeyboard(),this.$refs.input.blur(),this.showExpression=!1):(this.$refs.input.focus(),this.showExpression=!0);else{if(this.showExpression=!1,this.isKeyboardOpen){this.needOpenAction=!0,uni.hideKeyboard(),this.$refs.input.blur();return}this.$refs.msgBarAction.open(!0)}},clickKeyboard(){this.$nextTick(()=>{this.$refs.input.focus()})},clickSend(e){if(e&&e.stopPropagation(),this.sendOpacity==.4)return;if(this.text.trim()==""){be(h("tips"),h("msg.msgNullTip"),"",h("gotIt"));return}this.showInput=!1,this.$emit("onSendText",this.text),this.text="",this.hideText=""}},created(){var e=this;uni.onKeyboardHeightChange(this.onKeyboardChange),uni.$on("event_call_add_emoji_text",function(t){e.text=e.text+t,e.emojiIndexList.push(e.text.length)}),uni.$on("event_call_delete_text",function(){let t=e.text.length;if(t<=0)return;let i=e.emojiIndexList.indexOf(t);i!=-1?(e.emojiIndexList.splice(i,1),e.text=e.text.substring(0,t-2)):e.text=e.text.substring(0,t-1)}),uni.$on("event_hide_call_msg_input",this.hideInput)},beforeUnmount(){uni.offKeyboardHeightChange(this.onKeyboardChange),uni.$off("event_call_add_emoji_text"),uni.$off("event_call_delete_text"),uni.$off("event_hide_call_msg_input",this.hideInput)}};function Hl(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("l-img"),I),l=(0,n.resolveComponent)("call-msg-bar-action");return(0,n.openBlock)(),(0,n.createElementBlock)("view",{onClick:t[6]||(t[6]=(...c)=>s.clickThis&&s.clickThis(...c)),class:"view-base",style:(0,n.normalizeStyle)({width:`${a.sW}px`,bottom:`${a.showInput?0:a.bottom}px`}),renderWhole:!0},[a.showInput?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0,class:"view-action",style:(0,n.normalizeStyle)([{width:`${a.sW-a.deSw}px`},s.viewShowStyle])},[(0,n.createElementVNode)("view",{class:"center-start",style:{flex:"1"}},[(0,n.createElementVNode)("view",{onClick:t[0]||(t[0]=(...c)=>s.clickMsg&&s.clickMsg(...c)),class:"view-text-chat"},[(0,n.createElementVNode)("u-text",{class:"text-message"},(0,n.toDisplayString)(s.$str("textChat")),1)])])],4)),a.showInput?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:1,class:"view-input",style:(0,n.normalizeStyle)({width:`${a.sW}px`})},[(0,n.createElementVNode)("view",{class:"view-send-tex"},[(0,n.createElementVNode)("view",{class:"textarea-class"},[(0,n.createElementVNode)("u-textarea",{ref:"input",modelValue:a.text,onInput:t[1]||(t[1]=c=>a.text=c.detail.value),adjustPosition:!0,cursorSpacing:a.cursorSpacing,autoHeight:!0,maxlength:-1,showConfirmBar:!1,disableDefaultPadding:!0,onFocus:t[2]||(t[2]=(...c)=>s.onInputFocus&&s.onInputFocus(...c)),onBlur:t[3]||(t[3]=(...c)=>s.onInputBlur&&s.onInputBlur(...c)),onKeyboardheightchange:t[4]||(t[4]=(...c)=>s.onKeyboardHeightChanged&&s.onKeyboardHeightChanged(...c)),style:(0,n.normalizeStyle)([{color:"#333"},{"max-height":"130px"}]),placeholderStyle:"color:#333",placeholder:s.$str("message")+"...",class:"input-bar"},null,40,["modelValue","cursorSpacing","placeholder"]),(0,n.createElementVNode)("view",{class:"expression"},[a.showExpression?((0,n.openBlock)(),(0,n.createBlock)(r,{key:0,onClick:(0,n.withModifiers)(s.clickExpression,["stop"]),needStyle:1,src:"/static/call-emigo.png",w:"52rpx",h:"52rpx"},null,8,["onClick","src"])):((0,n.openBlock)(),(0,n.createBlock)(r,{key:1,onClick:(0,n.withModifiers)(s.clickKeyboard,["stop"]),needStyle:1,src:"/static/add-keyword.png",w:"52rpx",h:"52rpx"},null,8,["onClick","src"]))])]),(0,n.createElementVNode)("view",{onClick:t[5]||(t[5]=(...c)=>s.clickSend&&s.clickSend(...c)),class:"view-send",style:(0,n.normalizeStyle)({opacity:s.sendOpacity})},[(0,n.createVNode)(r,{mode:"scaleToFill",src:"/static/send-audio.png",w:"66rpx",h:"66rpx"})],4)])],4)):(0,n.createCommentVNode)("",!0),a.showInput?((0,n.openBlock)(),(0,n.createBlock)(l,{key:2,ref:"msgBarAction",onOnChooseExpressImg:s.onChooseExpressImg,onOnOpen:s.onActionOpen},null,8,["onOnChooseExpressImg","onOnOpen"])):(0,n.createCommentVNode)("",!0),a.showInput?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:3,style:(0,n.normalizeStyle)({height:`${a.placeHeight}px`,width:"10rpx"})},null,4)):(0,n.createCommentVNode)("",!0),a.showInput?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:4,style:(0,n.normalizeStyle)([{height:a.bottom+"px",width:a.sW+"px"},{background:"#FFFFFF"}])},null,4)):(0,n.createCommentVNode)("",!0)],4)}var Wl=v(Vl,[["render",Hl],["styles",[Ul]]]),$l={"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},center:{"":{flexDirection:"row",alignItems:"center"}},"pop-content":{"":{backgroundColor:"#FFFFFF",borderTopLeftRadius:"40rpx",borderTopRightRadius:"40rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx"}},"text-title":{"":{marginTop:"40rpx",color:"#333333",fontSize:"34rpx",fontWeight:"500",marginBottom:"40rpx"}},"view-item":{"":{backgroundColor:"#F1F3F6",borderRadius:"8rpx",marginBottom:"24rpx"}},"view-item-switch":{"":{paddingTop:0,paddingRight:"16rpx",paddingBottom:0,paddingLeft:"16rpx",height:"88rpx"}},"text-content":{"":{color:"#333333",fontSize:"24rpx"}},"text-tip":{"":{color:"#666666",fontSize:"20rpx"}},"view-switch":{"":{width:"100rpx",height:"88rpx",position:"absolute",left:"16rpx"}}},jl={components:{UniIcons:_e},emits:["onStatusChange"],props:{},data(){return{languageChoose:!1,safeBottomH:getApp().globalData.window.safeBottom,isAutomaticOpen:!1,languageSpeak:""}},computed:{richText(){let e="";return this.languageChoose&&(e=this.languageChoose.name),{text:h("translateTextForMe"),info:{language:{text:e,color:getApp().globalData.themeObj.color.action}},click:[{action:101}]}},isLanguageArabic(){return getApp().globalData.languageKey=="ar"},iconPos(){return this.isLanguageArabic?{left:"0"}:{right:"0"}}},methods:{$str:h,clickClose(){this.close()},clickSpeakLanguage(){Y("/pagesDialog/language-choose",{fromType:1},"languageData",{},{onChooseListener:e=>{this.languageSpeak!=getApp().globalData.speakLanguageStr&&(this.languageSpeak=getApp().globalData.speakLanguageStr,this.$emit("onStatusChange",{key:"speakLanguage",languageList:e}))}})},clickChooseLanguage(e){e&&e.stopPropagation(),Y("/pagesDialog/language-choose",{fromType:2},"languageData",{code:this.languageChoose.language},{onChooseListener:t=>{if(!t)return;let i=t[0];if(!i)return;let o=this.languageChoose.language!=i.language;this.languageChoose=i,Pn(i.language),o&&this.$emit("onStatusChange",{key:"automatic",value:this.isAutomaticOpen,language:this.languageChoose,isChoose:!0})}})},onSwitchChangeAutomatic(e){this.isAutomaticOpen=e.detail.value,this.$emit("onStatusChange",{key:"automatic",value:this.isAutomaticOpen,language:this.languageChoose})},close(){this.$refs.popView.close()},open(){this.languageChoose&&this.$refs.popView.open()},initData(e,t,i){this.isAutomaticOpen=t,this.languageChoose=e,this.languageSpeak=getApp().globalData.speakLanguageStr}},created(){}};function zl(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("uni-icons"),_e),l=(0,n.resolveComponent)("switch"),c=b((0,n.resolveDynamicComponent)("rich-content"),ut),u=b((0,n.resolveDynamicComponent)("uni-popup"),Ne);return(0,n.openBlock)(),(0,n.createBlock)(u,{ref:"popView","safe-area":!1,type:"bottom"},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("view",{class:"pop-content"},[(0,n.createElementVNode)("u-text",{class:"text-title"},(0,n.toDisplayString)(s.$str("automatic.audioToText")),1),(0,n.createElementVNode)("view",{onClick:t[0]||(t[0]=(...f)=>s.clickSpeakLanguage&&s.clickSpeakLanguage(...f)),class:"view-item",style:{padding:"20rpx 16rpx 20rpx 24rpx"}},[(0,n.createElementVNode)("view",{class:"center-between"},[(0,n.createElementVNode)("u-text",{class:"text-content"},(0,n.toDisplayString)(s.$str("iSpeak")),1),(0,n.createElementVNode)("view",{class:"center"},[(0,n.createElementVNode)("u-text",{class:"text-content"},(0,n.toDisplayString)(a.languageSpeak),1),(0,n.createVNode)(r,{type:"right",color:"#666666",size:"28rpx"})])]),(0,n.createElementVNode)("u-text",{class:"text-tip",style:{"margin-top":"10rpx"}},(0,n.toDisplayString)(s.$str("upLanguageSelect",{num:"3"})),1)]),(0,n.createElementVNode)("view",{class:"center view-item view-item-switch"},[(0,n.createVNode)(l,{onChange:s.onSwitchChangeAutomatic,type:"switch",color:"#65C368",checked:a.isAutomaticOpen,style:{transform:"scale(0.7)","margin-right":"-4px"}},null,8,["onChange","checked"]),(0,n.createVNode)(c,{onClick:s.clickChooseLanguage,data:s.richText,fontSize:"24rpx",color:"#333333",style:{"background-color":"transparent","line-height":"34rpx",flex:"1","margin-left":"16rpx"}},null,8,["onClick","data"]),(0,n.createVNode)(r,{onClick:s.clickChooseLanguage,type:"right",color:"#666666",size:"28rpx"},null,8,["onClick"])]),(0,n.createElementVNode)("view",{style:(0,n.normalizeStyle)({width:"10px",height:`${a.safeBottomH+15}px`})},null,4),(0,n.createVNode)(r,{onClick:s.clickClose,type:"closeempty",size:"32rpx",color:"#333333",style:(0,n.normalizeStyle)([{position:"absolute",top:"0",padding:"24rpx"},s.iconPos])},null,8,["onClick","style"])])]),_:1},512)}var Gl=v(jl,[["render",zl],["styles",[$l]]]),Kl={"view-base":{"":{alignItems:"center"}},"text-label":{"":{position:"absolute",top:0,left:0,fontSize:"14rpx",color:"#FFFFFF",width:"120rpx",lines:1,textAlign:"center"}},"list-msg":{"":{width:"534rpx",marginTop:"8rpx"}},"view-tip":{"":{position:"absolute",top:0,alignItems:"center"}},"view-content":{".view-tip ":{height:"48rpx",backgroundColor:"rgba(0,0,0,0.41)",borderRadius:"8rpx",flexDirection:"row",alignItems:"center",paddingLeft:"16rpx"}},"text-content":{".view-tip ":{fontSize:"20rpx",color:"#FFFFFF"}}},ca=ue("dom"),Yl={components:{LImg:I},emits:["onShowChange"],props:{height:{type:String,default:""},user:{type:Object,default(){return{}}}},data(){return{sW:getApp().globalData.window.width,list:[],showThis:!0,showTimeout:!1,showHereTip:!1,showHereTipStorage:!z("automatic_msg_here_tip"),showListBottom:!1,showFromNewMsg:!1,showFromClick:!1,scrollListBottom:!1}},watch:{showThis:{handler(e,t){e?this.showFromNewMsg?(this.showListBottom=!1,this.showFromNewMsg=!1):this.showFromClick&&(this.showListBottom=!0,this.showFromClick=!1,this.scrollBottom()):(this.showListBottom=!0,this.scrollBottom()),this.$emit("onShowChange",e)},immediate:!0}},computed:{showStyle(){return{left:this.showThis?"0":`-${this.sW}px`}},msgHereTipStr(){return h("automatic.msgHereTip",{he:rt(this.user.sex)})}},methods:{$str:h,scrollBottom(){this.$nextTick(()=>{let e=this.$refs.listBottom;e&&(this.scrollListBottom=!0,ca.scrollToElement(e,{animated:!1}))})},clickThis(e){e&&e.stopPropagation(),this.showThis?(this.showThis=!1,this.hide()):(this.showThis=!0,this.showFromNewMsg=!1,this.showFromClick=!0,this.setShowTimeout())},onListScroll(e){yn(()=>{if(!e.isDragging&&this.scrollListBottom){this.scrollListBottom=!this.scrollListBottom;return}this.showThis=!0,this.setShowTimeout()},3e3,"automaticShowTimeout")},clickAutomaticMsgHereTipClose(e){e&&e.stopPropagation(),this.showHereTip=!1,j("automatic_msg_here_tip",1)},setShowTimeout(){this.showTimeout&&clearTimeout(this.showTimeout),this.showTimeout=setTimeout(()=>{this.showThis=!1},3500)},setContent(e,t){this.showTimeout&&clearTimeout(this.showTimeout),this.showThis=!0,this.showFromNewMsg=!0,this.showListBottom=!1,this.list.push({ctime:new Date().getTime(),nodes:this.parseContent(e,t)}),!t&&this.showHereTipStorage&&this.list.length==2&&(this.showHereTip=!0),this.list.length>3&&(this.list=this.list.slice(this.list.length-3)),this.$nextTick(()=>{setTimeout(()=>{if(this.list.length<=0)return;let i=this.list[this.list.length-1].ctime;typeof i!="undefined"&&typeof this.$refs[`aCell${i}`]!="undefined"&&ca.scrollToElement(this.$refs[`aCell${i}`][0],{animated:!0})},300)}),this.setShowTimeout()},parseContent(e,t){return[{name:"div",children:[{type:"text",text:t||Nt(this.user.sex),attrs:{style:"color: #67D4FF;"}},{type:"text",text:`&nbsp;${t?"":h("saidLower")}: ${e}`}]}]},hide(){this.showTimeout&&clearTimeout(this.showTimeout),this.showThis=!1}},created(){}};function ql(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("l-img"),I),l=(0,n.resolveComponent)("rich-text"),c=b((0,n.resolveDynamicComponent)("uni-icons"),_e);return(0,n.openBlock)(),(0,n.createElementBlock)("view",{onClick:t[2]||(t[2]=(...u)=>s.clickThis&&s.clickThis(...u)),class:"view-base",style:(0,n.normalizeStyle)([{width:`${a.sW}px`,height:i.height}]),renderWhole:!0},[(0,n.createElementVNode)("view",{style:(0,n.normalizeStyle)([{width:"120rpx",height:"24rpx","margin-top":"24rpx"},s.showStyle])},[a.list.length>0?((0,n.openBlock)(),(0,n.createBlock)(r,{key:0,src:"s/call/speech_label_bg.png",w:"120rpx",h:"24rpx"})):(0,n.createCommentVNode)("",!0),a.list.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("u-text",{key:1,class:"text-label"},(0,n.toDisplayString)(s.$str("automatic.speechText")),1)):(0,n.createCommentVNode)("",!0)],4),(0,n.createElementVNode)("list",{onClick:t[0]||(t[0]=(...u)=>s.clickThis&&s.clickThis(...u)),class:"list-msg",showScrollbar:!1,onScroll:t[1]||(t[1]=(...u)=>s.onListScroll&&s.onListScroll(...u)),style:(0,n.normalizeStyle)(s.showStyle)},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(a.list,(u,f)=>((0,n.openBlock)(),(0,n.createElementBlock)("cell",{key:`k${u.ctime}`,ref_for:!0,ref:`aCell${u.ctime}`},[(0,n.createElementVNode)("view",{style:{"min-height":"72rpx","justify-content":"center"}},[(0,n.createVNode)(l,{nodes:u.nodes,style:(0,n.normalizeStyle)([{marginBottom:f==0?"0":"16rpx"},{"font-size":"24rpx",color:"#FFFFFF",background:"transparent","text-align":"center"}])},null,8,["nodes","style"])])]))),128)),a.showListBottom&&a.list.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("cell",{key:0,ref:"listBottom"},[(0,n.createElementVNode)("view",{style:{width:"10px",height:"100rpx"}})],512)):(0,n.createCommentVNode)("",!0)],36),a.showHereTip&&a.showThis&&a.list.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0,class:"view-tip"},[(0,n.createElementVNode)("view",{class:"view-content"},[(0,n.createElementVNode)("u-text",{class:"text-content"},(0,n.toDisplayString)(s.msgHereTipStr),1),(0,n.createVNode)(c,{onClick:s.clickAutomaticMsgHereTipClose,type:"clear",size:"32rpx",color:"#FFFFFF",style:{padding:"8rpx"}},null,8,["onClick"])]),(0,n.createVNode)(r,{src:"s/call/jiao_black_1.png",w:"24rpx",h:"10rpx",style:{transform:"rotate(180deg)"}})])):(0,n.createCommentVNode)("",!0)],4)}var Jl=v(Yl,[["render",ql],["styles",[Kl]]]),Xl={"view-content":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-around",marginTop:"6rpx"}},item:{".view-content ":{alignItems:"center",justifyContent:"center",width:"160rpx",height:"120rpx",borderRadius:"16rpx"}},text:{".view-content ":{fontSize:"24rpx",color:"#FFFFFF"}}},Zl={components:{LImg:I},emits:["clickBeauty","clickVideoMute","clickVoiceMute","clickVoiceRemote","onChange"],props:{height:{type:String,default:""},user:{type:Object,default(){return{}}},isAuth:{type:[Number,Boolean],default:!0},callType:{type:Number,default:1},cameraStatus:{type:[Number,Boolean],default:1},micStatus:{type:[Number,Boolean],default:1},moreBottom:{type:String,default:""},moreRight:{type:Number,default:20}},data(){return{sW:getApp().globalData.window.width,voiceRemoteStatus:!0}},computed:{videoStatusSrc(){return this.cameraStatus?"/static/video_stream_s_1.png":"/static/video_stream_n_1.png"},voiceStatusSrc(){return this.micStatus?"/static/voice_stream_s_1.png":"/static/voice_stream_n_1.png"},voiceRemoteStatusSrc(){return this.voiceRemoteStatus?"/static/voice_remote_s.png":"/static/voice_remote_n.png"}},methods:{$str:h,onChange(e){this.$emit("onChange",e)},clickMore(e){e&&e.stopPropagation(),this.close()},clickBeauty(e){e&&e.stopPropagation(),this.close(),this.$emit("clickBeauty")},clickVideo(e){e&&e.stopPropagation(),this.$emit("clickVideoMute")},clickVoice(e){e&&e.stopPropagation(),this.$emit("clickVoiceMute")},clickVoiceRemote(e){e&&e.stopPropagation(),this.voiceRemoteStatus?(this.voiceRemoteStatus=!this.voiceRemoteStatus,this.$emit("clickVoiceRemote",this.voiceRemoteStatus),he(h("speakerDisabled"))):(this.voiceRemoteStatus=!this.voiceRemoteStatus,this.$emit("clickVoiceRemote",this.voiceRemoteStatus),he(h("speakerEnabled")))},close(){this.$refs.popThis.close()},open(){this.$refs.popThis.open()}}};function Ql(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("l-img"),I),l=b((0,n.resolveDynamicComponent)("uni-popup"),Ne);return(0,n.openBlock)(),(0,n.createBlock)(l,{ref:"popThis",type:"bottom","safe-area":!1,"mask-bg-color":"rgba(0,0,0,0)",onChange:s.onChange},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("view",{style:(0,n.normalizeStyle)([{height:i.height,width:`${a.sW}px`},{background:"#fff","border-radius":"12px 12px 0px 0px","padding-top":"48rpx"}])},[(0,n.createElementVNode)("view",{class:"view-content"},[i.callType==1?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...c)=>s.clickBeauty&&s.clickBeauty(...c)),class:"item",style:{background:"#F1F3F6"}},[(0,n.createVNode)(r,{onClick:s.clickBeauty,src:"/static/beauty_action_1.png",w:"80rpx",h:"80rpx"},null,8,["onClick"])])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("view",{onClick:t[1]||(t[1]=(...c)=>s.clickVoiceRemote&&s.clickVoiceRemote(...c)),class:"item",style:(0,n.normalizeStyle)({background:this.voiceRemoteStatus?"#F1F3F6":"rgba(255, 59, 48, 0.1)"})},[(0,n.createVNode)(r,{onClick:s.clickVoiceRemote,src:s.voiceRemoteStatusSrc,w:"80rpx",h:"80rpx"},null,8,["onClick","src"])],4),i.callType==1?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:1,onClick:t[2]||(t[2]=(...c)=>s.clickVideo&&s.clickVideo(...c)),class:"item",style:(0,n.normalizeStyle)({background:this.cameraStatus?"#F1F3F6":"rgba(255, 59, 48, 0.1)"})},[(0,n.createVNode)(r,{onClick:s.clickVideo,src:s.videoStatusSrc,w:"80rpx",h:"80rpx"},null,8,["onClick","src"])],4)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("view",{onClick:t[3]||(t[3]=(...c)=>s.clickVoice&&s.clickVoice(...c)),class:"item",style:(0,n.normalizeStyle)({background:this.micStatus?"#F1F3F6":"rgba(255, 59, 48, 0.1)"})},[(0,n.createVNode)(r,{onClick:s.clickVoice,src:s.voiceStatusSrc,w:"80rpx",h:"80rpx"},null,8,["onClick","src"])],4)]),(0,n.createElementVNode)("view",{onClick:t[4]||(t[4]=(...c)=>s.clickMore&&s.clickMore(...c)),style:(0,n.normalizeStyle)([{width:"60rpx",height:"60rpx",position:"absolute"},{bottom:i.moreBottom,right:i.moreRight+"rpx"}])},null,4)],4)]),_:1},8,["onChange"])}var ec=v(Zl,[["render",Ql],["styles",[Xl]]]),tc={"call-remind-pop":{"":{backgroundColor:"#FFFFFF",borderTopLeftRadius:"24rpx",borderTopRightRadius:"24rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,paddingTop:"24rpx",paddingRight:"20rpx",paddingLeft:"20rpx",position:"relative"}},title:{".call-remind-pop ":{fontWeight:"600",fontSize:"34rpx",textAlign:"center"}},"sub-title":{".call-remind-pop ":{marginTop:"28rpx",lineHeight:"42rpx",color:"#FF3B30",fontSize:"28rpx"}},"tips-normal":{".call-remind-pop ":{marginTop:"28rpx",lineHeight:"36rpx",color:"#666666",fontSize:"24rpx"}},"got-btn":{".call-remind-pop ":{marginTop:"40rpx",height:"88rpx",borderRadius:"12rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#333333"}},"btn-text":{".call-remind-pop ":{fontSize:"28rpx"}},"close-icon":{".call-remind-pop ":{position:"absolute",width:"64rpx",height:"64rpx",right:"10rpx",top:"10rpx"}}},ic={emits:["onClickRemindGotIt","onClickRemindHangUp","onClickRemindReport"],components:{UniIcons:_e,UniPopup:Ne},data(){return{fromType:"",subTitle:"",tips:"",btnOpacity:.4,btnText:"",closeTime:5,titleColor:"",timer:!1,user:{},isShow:!1,paddingBottom:getApp().globalData.window.safeBottom+8,closeTimer:!1}},methods:{$str:h,clickClose(){this.$refs.callRemindPop.close()},clickGotIt(){this.btnOpacity!=.4&&(this.clickClose(),this.$emit("onClickRemindGotIt",this.fromType))},clickHangUp(){this.$emit("onClickRemindHangUp")},clickReport(){this.clickClose(),this.closeTimer=setTimeout(()=>{clearTimeout(this.closeTimer),this.$emit("onClickRemindReport")},300)},onChange(e){e.show||(this.isShow=!1,this.btnOpacity=.4,this.clearTimer())},clearTimer(){this.timer&&clearTimeout(this.timer),this.closeTimer&&clearTimeout(this.closeTimer)},startTimer(){this.btnText=h("gotIt")+" "+this.closeTime+"s",this.timer=setInterval(()=>{if(this.closeTime<=1){clearInterval(this.timer),this.btnOpacity=1,this.btnText=h("gotIt");return}this.closeTime-=1,this.btnText=h("gotIt")+" "+this.closeTime+"s"},1e3)},parseData(){if(this.fromType==1){let e=Ae(this.user.sex);this.subTitle=h("call.bossRechargeTips",{him:e}),this.tips=h("call.punishedTips"),this.titleColor="#FF3B30",this.closeTime=5,this.btnOpacity=.4}else if(this.fromType==2)this.subTitle=h("call.noFaceGirlTips"),this.tips=h("call.noFacePunishedTips"),this.titleColor="#FF3B30",this.closeTime=5,this.btnOpacity=.4;else{let e=rt(this.user.sex),t=Ae(this.user.sex);this.subTitle=h("call.noFaceUserTips"),this.tips=h("call.noFaceUserReportTips",{she:e,her:t}),this.titleColor="#333333"}},open(e,t){this.clearTimer(),this.fromType=e,this.user=t,this.parseData(),this.$nextTick(()=>{this.isShow=!0,this.$refs.callRemindPop.open(),(this.fromType==1||this.fromType==2)&&this.startTimer(),this.fromType==1&&j("call_big_recharge_"+getApp().globalData.uid+"_"+this.user.uid,"1")})}},unmounted(){this.isShow=!1,this.clearTimer()}};function nc(e,t,i,o,a,s){let r=b((0,n.resolveDynamicComponent)("uni-icons"),_e),l=b((0,n.resolveDynamicComponent)("uni-popup"),Ne);return(0,n.openBlock)(),(0,n.createBlock)(l,{ref:"callRemindPop",type:"bottom","safe-area":!1,"mask-click":!1,onChange:s.onChange},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("view",{class:"call-remind-pop",style:(0,n.normalizeStyle)({paddingBottom:`${a.paddingBottom}px`})},[(0,n.createElementVNode)("u-text",{class:"title"},(0,n.toDisplayString)(s.$str("tips")),1),a.subTitle?((0,n.openBlock)(),(0,n.createElementBlock)("u-text",{key:0,class:"sub-title",style:(0,n.normalizeStyle)({color:a.titleColor})},(0,n.toDisplayString)(a.subTitle),5)):(0,n.createCommentVNode)("",!0),a.tips?((0,n.openBlock)(),(0,n.createElementBlock)("u-text",{key:1,class:"tips-normal"},(0,n.toDisplayString)(a.tips),1)):(0,n.createCommentVNode)("",!0),a.fromType==3?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:2,class:"center"},[(0,n.createElementVNode)("view",{onClick:t[0]||(t[0]=(...c)=>s.clickHangUp&&s.clickHangUp(...c)),class:"got-btn center-align",style:{flex:"1"}},[(0,n.createElementVNode)("u-text",{class:"btn-text"},(0,n.toDisplayString)(s.$str("hangUp")),1)]),(0,n.createElementVNode)("view",{onClick:t[1]||(t[1]=(...c)=>s.clickReport&&s.clickReport(...c)),class:"got-btn center-align",style:{flex:"1","margin-left":"20rpx"}},[(0,n.createElementVNode)("u-text",{class:"btn-text"},(0,n.toDisplayString)(s.$str("report")),1)])])):((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:3,onClick:t[2]||(t[2]=(...c)=>s.clickGotIt&&s.clickGotIt(...c)),class:"m-t-20 got-btn center-align",style:(0,n.normalizeStyle)({opacity:a.btnOpacity})},[(0,n.createElementVNode)("u-text",{class:"btn-text"},(0,n.toDisplayString)(a.btnText),1)],4)),a.fromType==3?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:4,onClick:t[3]||(t[3]=(...c)=>s.clickClose&&s.clickClose(...c)),class:"close-icon center-align"},[(0,n.createVNode)(r,{type:"closeempty",size:"36rpx"})])):(0,n.createCommentVNode)("",!0)],4)]),_:1},8,["onChange"])}var ac=v(ic,[["render",nc],["styles",[tc]]]),oc={"view-base":{"":{alignItems:"center",justifyContent:"center"}},"f-14":{"":{fontSize:"28rpx"}},"c-f":{"":{color:"#FFFFFF"}}},sc={components:{AvatarImgVip:Fi,LImg:I,UBaseInfo:ht},props:{user:{type:Object,default(){return{}}},actionType:{type:Number,default:2}},data(){return{CALL_ACTION:H}},computed:{userName(){var e;let t="";return this.actionType==H.CALL?t=h("you"):this.actionType==H.ANSWER&&(t=Nt((e=this.user)==null?void 0:e.sex)),t},userName2(){var e;let t="";return this.actionType==H.CALL?t=Ai((e=this.user)==null?void 0:e.sex):this.actionType==H.ANSWER&&(t=h("you")),t}},methods:{$str:h,clickThis(e){e.stopPropagation()}}};function rc(e,t,i,o,a,s){let r=(0,n.resolveComponent)("avatar-img-vip"),l=b((0,n.resolveDynamicComponent)("u-base-info"),ht);return(0,n.openBlock)(),(0,n.createElementBlock)("view",{class:"view-base",renderWhole:!0},[(0,n.createVNode)(r,{user:i.user,w:"200rpx",h:"200rpx","place-type":0},null,8,["user"]),(0,n.createVNode)(l,{info:i.user,"name-width":"200rpx",nameSize:"40rpx",fw:600,"show-country":!0,"show-country-code":!1,"show-age":!0,"name-color":"#FFFFFF",style:{margin:"30rpx 0"}},null,8,["info"]),(0,n.createElementVNode)("u-text",{class:"f-14 c-f"},(0,n.toDisplayString)(s.$str("call.apply",{userName:s.userName,userName2:s.userName2})),1)])}var lc=v(sc,[["render",rc],["styles",[oc]]]),cc={center:{"":{flexDirection:"row",alignItems:"center"}},"center-start":{"":{flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}},"center-end":{"":{flexDirection:"row",alignItems:"center",justifyContent:"flex-end"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"center-content":{"":{alignItems:"center",justifyContent:"center"}},"chat-view":{"":{backgroundColor:"#000000"}},pos:{"":{position:"absolute",top:0,left:0}},"view-chat":{"":{flex:1}},"view-income":{".view-chat ":{position:"absolute",left:0}},"view-msg":{".view-chat ":{position:"absolute",left:0}},"view-automatic":{".view-chat ":{position:"absolute"}},"view-leave-live":{".view-chat ":{position:"absolute",right:0}},"chat-view-loading":{"":{flex:1}},"view-video-content":{".chat-view-loading ":{flex:1,alignItems:"center",justifyContent:"center"}},"video-view":{".chat-view-loading .view-video-content ":{backgroundColor:"rgba(0,0,0,0)"}},"view-avatar-content":{".chat-view-loading ":{flex:1,alignItems:"center",justifyContent:"center"}},bg:{".chat-view-loading .view-avatar-content ":{backgroundColor:"#000000",opacity:.5}},"view-call-top":{".chat-view-loading ":{position:"absolute",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx"}},"view-call-user":{".chat-view-loading ":{position:"absolute",transform:"translateY(-50%)",alignItems:"center",justifyContent:"center"}},"text-tip":{".chat-view-loading ":{marginLeft:16,backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8rpx",paddingTop:"12rpx",paddingRight:"12rpx",paddingBottom:"12rpx",paddingLeft:"12rpx",textAlign:"left",fontSize:"24rpx",color:"#FFFFFF"},".view-automatic-tip ":{fontSize:"20rpx",color:"#FFFFFF",paddingLeft:"20rpx"},".new-user-tip ":{fontSize:"20rpx",color:"#FFFFFF",paddingLeft:"20rpx"}},"not-answer-tip":{".chat-view-loading ":{backgroundColor:"#FFFFFF",borderRadius:"16rpx",paddingTop:"16rpx",paddingRight:"16rpx",paddingBottom:"16rpx",paddingLeft:"16rpx",color:"#FF3B30",fontSize:"20rpx",lineHeight:"30rpx",textAlign:"left",marginBottom:"56rpx",marginLeft:35}},"view-action":{".chat-view-loading ":{flexDirection:"row",justifyContent:"center",alignItems:"flex-end",marginBottom:"40rpx"}},"text-connecting":{".chat-view-loading .view-action ":{fontSize:"28rpx",fontWeight:"600",color:"#FFFFFF",lineHeight:"144rpx",textAlign:"center"}},item:{".chat-view-loading .view-action ":{alignItems:"center"}},text:{".chat-view-loading .view-action ":{fontSize:"24rpx",marginTop:"8rpx",color:"#FFFFFF"}},"view-call-ring":{".chat-view-loading .view-action ":{position:"absolute",alignItems:"center",top:"40rpx"}},"ring-bg":{".chat-view-loading .view-action .view-call-ring ":{flexDirection:"row",alignItems:"center",justifyContent:"center",width:"60rpx",height:"60rpx",borderRadius:"30rpx",backgroundColor:"rgba(0,0,0,0.2)"}},"text-network":{"":{backgroundColor:"rgba(0,0,0,0.3)",borderRadius:4,paddingTop:"20rpx",paddingRight:"30rpx",paddingBottom:"20rpx",paddingLeft:"30rpx",color:"rgba(255,255,255,0.9)",fontSize:"20rpx"}},"free-count":{"":{flexDirection:"column",alignItems:"center",paddingBottom:"4rpx",marginTop:"20rpx"}},"text-content":{".free-count ":{backgroundColor:"#17BB07",borderRadius:"8rpx",paddingTop:"4rpx",paddingRight:"16rpx",paddingBottom:"4rpx",paddingLeft:"16rpx",fontSize:"24rpx",color:"#FFFFFF"}},angle:{".free-count ":{width:"24rpx",height:"24rpx",borderRadius:"6rpx",backgroundColor:"#FFDC0D",transform:"rotate(45deg)"}},"view-report-tip":{"":{position:"absolute",right:"114rpx",justifyContent:"flex-end",alignItems:"flex-end"}},"surface-move-tip":{".view-report-tip ":{borderRadius:"8rpx",backgroundColor:"rgba(0,0,0,0.4)",paddingTop:"12rpx",paddingRight:"12rpx",paddingBottom:"12rpx",paddingLeft:"12rpx"},".view-surface-local-tip ":{borderRadius:"8rpx",backgroundColor:"rgba(0,0,0,0.4)",paddingTop:"12rpx",paddingRight:"12rpx",paddingBottom:"12rpx",paddingLeft:"12rpx"}},"view-surface-local-tip":{"":{position:"absolute",right:"40rpx",justifyContent:"flex-end",alignItems:"flex-end"}},"view-left-bg":{"":{position:"absolute",left:0,width:"510rpx",backgroundImage:"linear-gradient(to right, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0))"}},"view-top":{"":{position:"absolute",left:0}},"view-bottom-bg":{"":{position:"absolute",left:0,bottom:0,backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0))"}},"view-automatic-tip":{"":{position:"absolute",right:"20rpx",justifyContent:"flex-end",alignItems:"flex-end"}},"view-tip":{".view-automatic-tip ":{height:"48rpx",backgroundColor:"rgba(0,0,0,0.41)",flexDirection:"row",alignItems:"center",borderRadius:"8rpx"},".new-user-tip ":{height:"48rpx",backgroundColor:"rgba(0,0,0,0.41)",flexDirection:"row",alignItems:"center",borderRadius:"8rpx"}},"view-action-more-rotate-open":{"":{transitionDuration:500,transform:"rotate(45deg)"}},"view-action-more-rotate-close":{"":{transitionDuration:500,transform:"rotate(0deg)"}},"live-connecting-text":{"":{position:"absolute",fontSize:16,color:"#FFFFFF",textAlign:"center",left:16}},"def-top-desc":{"":{paddingTop:"10rpx",paddingRight:"16rpx",paddingBottom:"10rpx",paddingLeft:"16rpx",width:"710rpx",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"8rpx"}},"def-desc-text":{"":{fontSize:"20rpx",color:"#FFFFFF",lineHeight:"30rpx",wordBreak:"break-all"}},"def-rule-part":{"":{height:"224rpx",position:"relative",marginLeft:"10rpx",marginBottom:"56rpx"}},"def-rule-text":{"":{marginLeft:"36rpx",marginTop:"46rpx",paddingTop:"14rpx",paddingRight:"36rpx",paddingBottom:"14rpx",paddingLeft:"36rpx",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8rpx"}},"rule-text":{"":{fontSize:"24rpx",color:"#FFFFFF",lineHeight:"40rpx",textAlign:"left"}},"ring-tip":{"":{position:"absolute",paddingTop:"10rpx"}},"ring-tip-content":{"":{paddingTop:"12rpx",paddingRight:"14rpx",paddingBottom:"12rpx",paddingLeft:"14rpx",backgroundColor:"#222610",borderRadius:"8rpx",flexDirection:"row",alignItems:"center"}},"ring-tip-arrow":{"":{position:"absolute",top:"5rpx",right:"30rpx",width:"14rpx",height:"14rpx",backgroundColor:"#222610",transform:"rotate(45deg)"}},"f-12":{"":{fontSize:"24rpx"}},"f-10":{"":{fontSize:"20rpx"}},"c-f":{"":{color:"#ffffff"}},"m-t-2":{"":{marginTop:"2rpx"}},"m-r-6":{"":{marginRight:"12rpx"}},"charge-price-box":{"":{marginTop:"32rpx",marginBottom:"20rpx",height:"50rpx",flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.2)"}},"action-more-icon":{"":{width:"80rpx",height:"80rpx",backgroundColor:"rgba(0,0,0,0.2)",alignItems:"center",justifyContent:"center",borderRadius:"40rpx"}},"@TRANSITION":{"view-action-more-rotate-open":{duration:500},"view-action-more-rotate-close":{duration:500}}},uc={methods:{$str:h},components:{CallUserInfo:lc,CallRemindPop:ac,CallMsg:tl,CallConnectLoading:rl,CallActionView:Wl,CallSurfaceRemote:vl,CallSurfaceLocal:Il,CallBeautyPop:hl,CallActionTimer:yl,CallBtnAnswer:Dl,CallAutomaticPop:Gl,CallAutomaticView:Jl,CallActionPop:ec},mixins:[Fr,Rr,Or]};function hc(e,t,i,o,a,s){let r=(0,n.resolveComponent)("call-surface-remote"),l=(0,n.resolveComponent)("call-action-timer"),c=b((0,n.resolveDynamicComponent)("l-img"),I),u=b((0,n.resolveDynamicComponent)("uni-icons"),_e),f=(0,n.resolveComponent)("call-msg"),d=(0,n.resolveComponent)("call-automatic-view"),y=b((0,n.resolveDynamicComponent)("uni-transition"),st),x=(0,n.resolveComponent)("call-action-view"),R=(0,n.resolveComponent)("call-surface-local"),E=(0,n.resolveComponent)("call-action-pop"),T=(0,n.resolveComponent)("movable-area"),k=(0,n.resolveComponent)("call-user-info"),L=(0,n.resolveComponent)("call-btn-answer"),N=(0,n.resolveComponent)("call-connect-loading"),m=(0,n.resolveComponent)("call-beauty-pop"),P=(0,n.resolveComponent)("call-automatic-pop"),se=(0,n.resolveComponent)("call-remind-pop");return(0,n.openBlock)(),(0,n.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,n.createElementVNode)("view",{class:"chat-view",style:(0,n.normalizeStyle)({width:`${e.sW}px`,height:`${e.sH}px`})},[e.isConnect?((0,n.openBlock)(),(0,n.createBlock)(r,{key:0,ref:"refSurfaceRemote",callType:e.callType,fRemoteUid:e.remoteUid,fLocalUid:e.localUid,userInfo:e.userInfo,class:"pos"},null,8,["callType","fRemoteUid","fLocalUid","userInfo"])):(0,n.createCommentVNode)("",!0),e.snapshotImagePath?((0,n.openBlock)(),(0,n.createElementBlock)("u-image",{key:1,src:e.snapshotImagePath,mode:"aspectFill",style:(0,n.normalizeStyle)({width:`${e.sW}px`,height:`${e.sH}px`}),class:"pos"},null,12,["src"])):(0,n.createCommentVNode)("",!0),e.isConnect?((0,n.openBlock)(),(0,n.createBlock)(T,{key:2,onClick:e.clickChatContent,class:"view-chat",style:(0,n.normalizeStyle)([{flex:"1"},{width:`${e.sW}px`,height:`${e.sH}px`}])},{default:(0,n.withCtx)(()=>[e.viewMsgIsShow?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0,class:"view-left-bg",style:(0,n.normalizeStyle)({height:`${e.sH}px`})},null,4)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("view",{onClick:t[0]||(t[0]=(...B)=>e.clickViewTop&&e.clickViewTop(...B)),class:"view-top",style:(0,n.normalizeStyle)(e.viewTopStyle)},[(0,n.createVNode)(l,{ref:"actionTimer",roomType:e.roomType,onClickHangUp:e.clickHangup,userInfo:e.userInfo,onOnTimerListener:e.onTimerListener,onOnSnapshot:e.onSnapshotInterface,roomId:e.roomInfo.room_id,style:(0,n.normalizeStyle)([{top:`${e.viewTopCellTop}px`,right:`${e.viewTopIsShow?0:e.sW}px`,width:`${e.sW}px`},{position:"absolute"}])},null,8,["roomType","onClickHangUp","userInfo","onOnTimerListener","onOnSnapshot","roomId","style"])],4),e.isShowUserLabel?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:1,class:"new-user-tip",style:(0,n.normalizeStyle)(He(ke({},e.newUserStyle),{opacity:e.viewTopIsShow?1:0}))},[(0,n.createVNode)(c,{src:"s/call/jiao_black_1.png",w:"24rpx",h:"10rpx",style:{"margin-left":"20rpx"}}),(0,n.createElementVNode)("view",{class:"view-tip"},[(0,n.createElementVNode)("u-text",{class:"text-tip"},(0,n.toDisplayString)(s.$str("heIsNewUser")),1),(0,n.createVNode)(u,{onClick:e.clickNewUserTopsClose,type:"clear",size:"32rpx",color:"#FFFFFF",style:{padding:"8rpx"}},null,8,["onClick"])])],4)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(f,{ref:"msgView",height:`${e.viewMsgHeight}px`,"bottom-action-show":e.showBottomActionView,user:e.userInfo,uid:e.userInfo.uid,"room-id":e.roomInfo.room_id,"input-focus":e.inputFocus,style:(0,n.normalizeStyle)({bottom:`${e.viewMsgBottom}px`}),onOnShowChange:e.onMsgViewShowListener,class:"view-msg",onOnClickCallMsgView:e.onClickCallMsgView},null,8,["height","bottom-action-show","user","uid","room-id","input-focus","style","onOnShowChange","onOnClickCallMsgView"]),e.showBottomBgView?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:2,class:"view-bottom-bg",style:(0,n.normalizeStyle)({height:`${e.viewBottomHeight}px`,width:`${e.sW}px`})},null,4)):(0,n.createCommentVNode)("",!0),e.isAutomaticOpen?((0,n.openBlock)(),(0,n.createBlock)(d,{key:3,ref:"callAutomaticView",height:`${e.viewAutomaticHeight}px`,user:e.userInfo,style:(0,n.normalizeStyle)({bottom:`${e.viewAutomaticBottom}px`,left:`${e.viewAutomaticLeft}px`}),onOnShowChange:e.onAutomaticViewShowListener,class:"view-automatic"},null,8,["height","user","style","onOnShowChange"])):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(y,{ref:"animAutomaticMsgTip",show:e.showAutomaticMsgTip,style:(0,n.normalizeStyle)([{bottom:`${e.viewAutomaticMsgTipIconBottom}px`},{position:"absolute",left:"212rpx"}])},{default:(0,n.withCtx)(()=>[(0,n.createVNode)(c,{src:"s/call/automatic_msg_tip.png",w:"72rpx",h:"72rpx"})]),_:1},8,["show","style"]),e.showActionMoreIconView&&!e.showInput?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:4,onClick:t[1]||(t[1]=(...B)=>e.clickActionMore&&e.clickActionMore(...B)),class:"action-more-icon",style:(0,n.normalizeStyle)([{bottom:`${e.viewActionMoreIconBottom}px`,right:`${e.actionMoreIconViewRight}rpx`},{position:"fixed","z-index":"12"}])},[(0,n.createVNode)(u,{type:"bars",color:"#fff",size:"48rpx"})],4)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(x,{isShow:e.showBottomActionView,user:e.userInfo,callType:e.callType,roomId:e.roomInfo.room_id,onClickAction:e.onClickAction,onOnSendText:e.onSendTextListener,micStatus:e.micStatus,cameraStatus:e.cameraStatus,onClickThis:e.clickViewBottomAction,onOnInputFocus:e.onInputFocus,onOnShowInput:e.onShowInput,ref:"callActionView"},null,8,["isShow","user","callType","roomId","onClickAction","onOnSendText","micStatus","cameraStatus","onClickThis","onOnInputFocus","onOnShowInput"]),e.isConnect?((0,n.openBlock)(),(0,n.createBlock)(R,{key:5,ref:"refSurfaceLocal",callType:e.callType,fRemoteUid:e.remoteUid,fLocalUid:e.localUid,"action-type":e.actionType,userInfo:e.userInfo,onClickCameraSwitch:e.clickCameraSwitch,onOnSurfaceChange:e.onSurfaceChangeListener,onOnSurfaceMoveTipListener:e.onSurfaceMoveTipListener},null,8,["callType","fRemoteUid","fLocalUid","action-type","userInfo","onClickCameraSwitch","onOnSurfaceChange","onOnSurfaceMoveTipListener"])):(0,n.createCommentVNode)("",!0),e.showReportTips&&e.showBottomActionView?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:6,onClick:t[2]||(t[2]=(...B)=>e.clickCloseReportTips&&e.clickCloseReportTips(...B)),class:"view-report-tip",style:(0,n.normalizeStyle)({top:`${e.reportTipTop}px`})},[(0,n.createVNode)(c,{src:"s/call/jiao_black_1.png",w:"24rpx",h:"10rpx",style:{"margin-right":"16rpx"}}),(0,n.createElementVNode)("view",{class:"center surface-move-tip"},[(0,n.createElementVNode)("u-text",{style:{"font-size":"20rpx",color:"#FFFFFF","margin-right":"10rpx"}},(0,n.toDisplayString)(s.$str("clickHereToReport")),1),(0,n.createVNode)(c,{src:"/static/call-close-tip.png",w:"26rpx",h:"26rpx"})])],4)):(0,n.createCommentVNode)("",!0),e.showSurfaceLocalTips?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:7,onClick:t[3]||(t[3]=(...B)=>e.clickCloseSurfaceLocalTips&&e.clickCloseSurfaceLocalTips(...B)),class:"view-surface-local-tip",style:(0,n.normalizeStyle)({top:`${e.surfaceLocalTop}px`})},[(0,n.createVNode)(c,{src:"s/call/jiao_black_1.png",w:"24rpx",h:"10rpx",style:{"margin-right":"80rpx"}}),(0,n.createElementVNode)("view",{class:"center surface-move-tip"},[(0,n.createElementVNode)("u-text",{style:{"font-size":"20rpx",color:"#FFFFFF","margin-right":"10rpx"}},(0,n.toDisplayString)(s.$str("holdCanMoveThis")),1),(0,n.createVNode)(c,{src:"/static/call-close-tip.png",w:"26rpx",h:"26rpx"})])],4)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(E,{ref:"popAction",moreRight:e.actionMoreIconViewRight,height:`${e.viewActionBottomHeight}px`,callType:e.callType,user:e.userInfo,cameraStatus:e.cameraStatus,micStatus:e.micStatus,moreBottom:`${e.viewActionMoreIconBottom}px`,onClickBeauty:e.clickBeauty,onClickVideoMute:e.clickMuteCamera,onClickVoiceMute:e.clickMuteMic,onClickVoiceRemote:e.clickVoiceRemote,onOnChange:e.onActionPopChangeListener},null,8,["moreRight","height","callType","user","cameraStatus","micStatus","moreBottom","onClickBeauty","onClickVideoMute","onClickVoiceMute","onClickVoiceRemote","onOnChange"])]),_:1},8,["onClick","style"])):e.isLoading&&(e.roomType==1||e.roomType==2)&&e.openType!=2&&!e.showFocusLoading?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:3,class:"chat-view-loading"},[e.videoInfo?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0,class:"view-video-content"},[!e.isAndroid&&e.videoShowBlur?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:0,class:"pos"},[(0,n.createVNode)(c,{src:e.videoInfo.cover_url,w:`${e.sW}px`,h:`${e.sH}px`,placeType:1,placeFontSize:!1},null,8,["src","w","h"]),(0,n.createElementVNode)("view",{blurEffect:"light",style:(0,n.normalizeStyle)({width:`${e.sW}px`,height:`${e.sH}px`}),class:"pos"},null,4)])):(0,n.createCommentVNode)("",!0),e.showWaitingVideo?((0,n.openBlock)(),(0,n.createElementBlock)("u-video",{key:1,class:"video-view",style:(0,n.normalizeStyle)({width:`${e.videoW}px`,height:`${e.videoH}px`}),src:e.videoInfo.showUrl,autoplay:!0,loop:!0,controls:!1,showLoading:!1,muted:!0,objectFit:e.videoObjectFit,enableProgressGesture:!1,onPlay:t[4]||(t[4]=(...B)=>e.onVideoPlay&&e.onVideoPlay(...B)),onTimeupdate:t[5]||(t[5]=(...B)=>e.onVideoTimeUpdate&&e.onVideoTimeUpdate(...B))},null,44,["src","objectFit"])):(0,n.createCommentVNode)("",!0),e.videoShowCover?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:2,class:"pos center-content",style:(0,n.normalizeStyle)({width:`${e.sW}px`,height:`${e.sH}px`})},[(0,n.createVNode)(c,{src:e.userInfo.avatar,w:`${e.videoW}px`,h:`${e.videoH}px`,onOnLoad:e.onLoadWaitVideoCoverListener},null,8,["src","w","h","onOnLoad"])],4)):(0,n.createCommentVNode)("",!0)])):((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:1,class:"view-avatar-content"},[e.avatarBigUrl?((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,src:e.avatarBigUrl,w:`${e.sW}px`,h:`${e.sH}px`,placeFontSize:!1,onOnLoad:e.onLoadAvatarBigListener},null,8,["src","w","h","onOnLoad"])):(0,n.createCommentVNode)("",!0),e.avatarBigIsShow?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(c,{key:1,src:e.avatarSmallUrl,w:`${e.sW}px`,h:`${e.sH}px`,placeFontSize:!1,class:"pos"},null,8,["src","w","h"])),(0,n.createElementVNode)("view",{class:"bg pos",style:(0,n.normalizeStyle)({width:`${e.sW}px`,height:`${e.sH}px`})},null,4)])),(0,n.createElementVNode)("view",{class:"view-call-top",style:(0,n.normalizeStyle)({top:`${e.statusBarH+5}px`,width:`${e.sW}px`})},[(0,n.createElementVNode)("view",null,[(0,n.createElementVNode)("view",{class:"center-end"},[(0,n.createElementVNode)("view",{ref:"CallRing",onClick:t[6]||(t[6]=(0,n.withModifiers)((...B)=>e.clickCallRing&&e.clickCallRing(...B),["stop"]))},[(0,n.createVNode)(c,{onClick:e.clickCallRing,src:e.callRingSrc,w:"48rpx",h:"48rpx",style:{"margin-right":"40rpx"}},null,8,["onClick","src"]),(0,n.createElementVNode)("u-text",{class:"f-10 m-t-2",style:{color:"rgba(255,255,255,0.7)"}},(0,n.toDisplayString)(s.$str("ring")),1)],512),(0,n.createElementVNode)("view",{onClick:t[7]||(t[7]=(0,n.withModifiers)((...B)=>e.clickReport&&e.clickReport(...B),["stop"]))},[(0,n.createVNode)(c,{src:"/static/call-report.png",w:"64rpx",h:"74rpx",style:{"margin-right":"20rpx"}})])]),(0,n.createElementVNode)("view",{class:"def-top-desc",style:{"margin-top":"20rpx"}},[(0,n.createElementVNode)("u-text",{class:"def-desc-text"},(0,n.toDisplayString)(s.$str("call.ApplyTitleTip")),1)])])],4),(0,n.createElementVNode)("view",{class:"view-call-user",style:(0,n.normalizeStyle)({top:`${e.sH/2}px`,width:`${e.sW}px`})},[(0,n.createVNode)(k,{user:e.userInfo,actionType:e.actionType},null,8,["user","actionType"])],4),e.showRingTip?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:2,onClick:t[8]||(t[8]=(...B)=>e.clickRingTip&&e.clickRingTip(...B)),class:"ring-tip",style:(0,n.normalizeStyle)({top:`${e.ringTipTop}px`,right:`${e.ringTipLeft}px`})},[(0,n.createElementVNode)("view",{class:"ring-tip-content"},[(0,n.createElementVNode)("u-text",{class:"f-12 c-f m-r-6"},(0,n.toDisplayString)(s.$str("call.ringTip")),1),(0,n.createVNode)(c,{src:"/static/call-close-tip.png",w:"26rpx",h:"26rpx"})]),(0,n.createElementVNode)("view",{class:"ring-tip-arrow"})],4)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("view",{style:(0,n.normalizeStyle)([{position:"absolute"},{bottom:`${e.safeB}px`}])},[e.notAnswerTipTime<=0?((0,n.openBlock)(),(0,n.createElementBlock)("u-text",{key:0,class:"not-answer-tip",style:(0,n.normalizeStyle)({width:`${e.sW-70}px`})},(0,n.toDisplayString)(e.getNotAnswerTip),5)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("view",{class:"view-action",style:(0,n.normalizeStyle)({width:`${e.sW}px`})},[e.isConnecting?((0,n.openBlock)(),(0,n.createElementBlock)("u-text",{key:0,class:"text-connecting",style:(0,n.normalizeStyle)({width:`${e.sW}px`})},(0,n.toDisplayString)(s.$str("connecting")),5)):(0,n.createCommentVNode)("",!0),e.isConnecting?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:1,onClick:t[10]||(t[10]=B=>e.clickHangup(B,0)),class:"item"},[(0,n.createVNode)(c,{onClick:t[9]||(t[9]=B=>e.clickHangup(B,0)),src:"s/call/hang_up_1.png",w:"144rpx",h:"144rpx"})])),!e.isConnecting&&e.actionType==2?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:2,class:"item",style:(0,n.normalizeStyle)({marginLeft:`${e.actionIntervalWidth}px`})},[(0,n.createVNode)(L,{callType:e.callType,onClick:e.clickAnswer},null,8,["callType","onClick"])],4)):(0,n.createCommentVNode)("",!0)],4),e.chargeStr?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:1,class:"charge-price-box"},[(0,n.createElementVNode)("u-text",{class:"f-10 c-f"},(0,n.toDisplayString)(e.chargeStr),1),(0,n.createVNode)(c,{src:"/static/coins-b.png",w:"20rpx",h:"20rpx"}),(0,n.createElementVNode)("u-text",{class:"f-10 c-f"},(0,n.toDisplayString)(s.$str("call.chargePriceTip")),1)])):(0,n.createCommentVNode)("",!0)],4)])):e.isLoading&&e.showFocusLoading?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:4,class:"chat-view-loading"},[(0,n.createVNode)(N,{user:e.userInfo,"from-type":e.connectLoadingFromType,onOnConnectLoadingListener:e.onConnectLoadingListener},null,8,["user","from-type","onOnConnectLoadingListener"])])):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(m,{ref:"callBeautyPop",onOnBeautyChange:e.onBeautyChange,onOnChange:e.onBeautyPopChange},null,8,["onOnBeautyChange","onOnChange"]),(0,n.createVNode)(P,{ref:"callAutomaticPop",onOnStatusChange:e.onAutomaticStatusChange},null,8,["onOnStatusChange"]),e.isConnect&&e.networkTip?((0,n.openBlock)(),(0,n.createElementBlock)("view",{key:5,style:(0,n.normalizeStyle)([{"align-items":"center",position:"absolute"},{width:`${e.sW}px`,bottom:`${e.safeB+130}px`}])},[(0,n.createElementVNode)("u-text",{class:"text-network"},(0,n.toDisplayString)(e.networkTip),1)],4)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(se,{ref:"callRemindPop",onOnClickRemindGotIt:e.onClickRemindGotIt,onOnClickRemindHangUp:e.onClickRemindHangUp,onOnClickRemindReport:e.onClickRemindReport},null,8,["onOnClickRemindGotIt","onOnClickRemindHangUp","onOnClickRemindReport"])],4)])}var Gt=v(uc,[["render",hc],["styles",[cc]]]);var Vi=plus.webview.currentWebview();if(Vi){let e=parseInt(Vi.id),t="pagesCall/chat-view",i={};try{i=JSON.parse(Vi.__query__)}catch(a){}Gt.mpType="page";let o=Vue.createPageApp(Gt,{$store:getApp({allowDefault:!0}).$store,__pageId:e,__pagePath:t,__pageQuery:i});o.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...Gt.styles||[]])),o.mount("#root")}})();
/*!
  * @intlify/shared v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/message-resolver v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/runtime v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/message-compiler v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/core-base v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * vue-i18n v9.1.9
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
