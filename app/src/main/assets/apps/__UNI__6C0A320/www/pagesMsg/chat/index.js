"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var Va=Object.create;var pi=Object.defineProperty,ja=Object.defineProperties,Ga=Object.getOwnPropertyDescriptor,za=Object.getOwnPropertyDescriptors,$a=Object.getOwnPropertyNames,gn=Object.getOwnPropertySymbols,Ya=Object.getPrototypeOf,yn=Object.prototype.hasOwnProperty,Ja=Object.prototype.propertyIsEnumerable;var _n=(e,t,i)=>t in e?pi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,xt=(e,t)=>{for(var i in t||(t={}))yn.call(t,i)&&_n(e,i,t[i]);if(gn)for(var i of gn(t))Ja.call(t,i)&&_n(e,i,t[i]);return e},bn=(e,t)=>ja(e,za(t));var Ka=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qa=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of $a(t))!yn.call(e,n)&&n!==i&&pi(e,n,{get:()=>t[n],enumerable:!(s=Ga(t,n))||s.enumerable});return e};var re=(e,t,i)=>(i=e!=null?Va(Ya(e)):{},qa(t||!e||!e.__esModule?pi(i,"default",{value:e,enumerable:!0}):i,e));var ee=(e,t,i)=>new Promise((s,n)=>{var a=c=>{try{l(i.next(c))}catch(u){n(u)}},o=c=>{try{l(i.throw(c))}catch(u){n(u)}},l=c=>c.done?s(c.value):Promise.resolve(c.value).then(a,o);l((i=i.apply(e,t)).next())});var te=Ka((Dd,xn)=>{xn.exports=Vue});var O=re(te()),Y={zT:2,appId:plus.runtime.appid,appV:parseInt(plus.runtime.version.split(".").join("")),isAndroid:plus.os.name=="Android"};var Xa=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",St=e=>Xa?Symbol(e):e,Za=(e,t,i)=>Qa({l:e,k:t,s:i}),Qa=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),_e=e=>typeof e=="number"&&isFinite(e),er=e=>Ti(e)==="[object Date]",Ot=e=>Ti(e)==="[object RegExp]",Bt=e=>V(e)&&Object.keys(e).length===0;function tr(e,t){typeof console!="undefined"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}var Se=Object.assign;function wn(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}var ir=Object.prototype.hasOwnProperty;function Bn(e,t){return ir.call(e,t)}var pe=Array.isArray,ye=e=>typeof e=="function",M=e=>typeof e=="string",ie=e=>typeof e=="boolean",be=e=>e!==null&&typeof e=="object",Un=Object.prototype.toString,Ti=e=>Un.call(e),V=e=>Ti(e)==="[object Object]",nr=e=>e==null?"":pe(e)||V(e)&&e.toString===Un?JSON.stringify(e,null,2):String(e);var sr=Object.prototype.hasOwnProperty;function ar(e,t){return sr.call(e,t)}var Dt=e=>e!==null&&typeof e=="object",ze=[];ze[0]={w:[0],i:[3,0],"[":[4],o:[7]};ze[1]={w:[1],".":[2],"[":[4],o:[7]};ze[2]={w:[2],i:[3,0],0:[3,0]};ze[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};ze[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};ze[5]={"'":[4,0],o:8,l:[5,0]};ze[6]={'"':[4,0],o:8,l:[6,0]};var rr=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function or(e){return rr.test(e)}function lr(e){let t=e.charCodeAt(0),i=e.charCodeAt(e.length-1);return t===i&&(t===34||t===39)?e.slice(1,-1):e}function cr(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function ur(e){let t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:or(t)?lr(t):"*"+t}function dr(e){let t=[],i=-1,s=0,n=0,a,o,l,c,u,d,h,f=[];f[0]=()=>{o===void 0?o=l:o+=l},f[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},f[2]=()=>{f[0](),n++},f[3]=()=>{if(n>0)n--,s=4,f[0]();else{if(n=0,o===void 0||(o=ur(o),o===!1))return!1;f[1]()}};function g(){let I=e[i+1];if(s===5&&I==="'"||s===6&&I==='"')return i++,l="\\"+I,f[0](),!0}for(;s!==null;)if(i++,a=e[i],!(a==="\\"&&g())){if(c=cr(a),h=ze[s],u=h[c]||h.l||8,u===8||(s=u[0],u[1]!==void 0&&(d=f[u[1]],d&&(l=a,d()===!1))))return;if(s===7)return t}}var Sn=new Map;function Rt(e,t){if(!Dt(e))return null;let i=Sn.get(t);if(i||(i=dr(t),i&&Sn.set(t,i)),!i)return null;let s=i.length,n=e,a=0;for(;a<s;){let o=n[i[a]];if(o===void 0)return null;n=o,a++}return n}function _i(e){if(!Dt(e))return e;for(let t in e)if(ar(e,t))if(!t.includes("."))Dt(e[t])&&_i(e[t]);else{let i=t.split("."),s=i.length-1,n=e;for(let a=0;a<s;a++)i[a]in n||(n[i[a]]={}),n=n[i[a]];n[i[s]]=e[t],delete e[t],Dt(n[i[s]])&&_i(n[i[s]])}return e}var pr=e=>e,hr=e=>"",fr="text",mr=e=>e.length===0?"":e.join(""),gr=nr;function Cn(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function _r(e){let t=_e(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(_e(e.named.count)||_e(e.named.n))?_e(e.named.count)?e.named.count:_e(e.named.n)?e.named.n:t:t}function yr(e,t){t.count||(t.count=e),t.n||(t.n=e)}function br(e={}){let t=e.locale,i=_r(e),s=be(e.pluralRules)&&M(t)&&ye(e.pluralRules[t])?e.pluralRules[t]:Cn,n=be(e.pluralRules)&&M(t)&&ye(e.pluralRules[t])?Cn:void 0,a=T=>T[s(i,T.length,n)],o=e.list||[],l=T=>o[T],c=e.named||{};_e(e.pluralIndex)&&yr(i,c);let u=T=>c[T];function d(T){let D=ye(e.messages)?e.messages(T):be(e.messages)?e.messages[T]:!1;return D||(e.parent?e.parent.message(T):hr)}let h=T=>e.modifiers?e.modifiers[T]:pr,f=V(e.processor)&&ye(e.processor.normalize)?e.processor.normalize:mr,g=V(e.processor)&&ye(e.processor.interpolate)?e.processor.interpolate:gr,I=V(e.processor)&&M(e.processor.type)?e.processor.type:fr,S={list:l,named:u,plural:a,linked:(T,D)=>{let L=d(T)(S);return M(D)?h(D)(L):L},message:d,type:I,interpolate:g,normalize:f};return S}function Wn(e,t,i={}){let{domain:s,messages:n,args:a}=i,o=e,l=new SyntaxError(String(o));return l.code=e,t&&(l.location=t),l.domain=s,l}var xr="9.1.9",Ut=-1,An="";function wr(){return{upper:e=>M(e)?e.toUpperCase():e,lower:e=>M(e)?e.toLowerCase():e,capitalize:e=>M(e)?`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`:e}}var Sr,Tn=0;function Cr(e={}){let t=M(e.version)?e.version:xr,i=M(e.locale)?e.locale:"en-US",s=pe(e.fallbackLocale)||V(e.fallbackLocale)||M(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:i,n=V(e.messages)?e.messages:{[i]:{}},a=V(e.datetimeFormats)?e.datetimeFormats:{[i]:{}},o=V(e.numberFormats)?e.numberFormats:{[i]:{}},l=Se({},e.modifiers||{},wr()),c=e.pluralRules||{},u=ye(e.missing)?e.missing:null,d=ie(e.missingWarn)||Ot(e.missingWarn)?e.missingWarn:!0,h=ie(e.fallbackWarn)||Ot(e.fallbackWarn)?e.fallbackWarn:!0,f=!!e.fallbackFormat,g=!!e.unresolving,I=ye(e.postTranslation)?e.postTranslation:null,S=V(e.processor)?e.processor:null,T=ie(e.warnHtmlMessage)?e.warnHtmlMessage:!0,D=!!e.escapeParameter,L=ye(e.messageCompiler)?e.messageCompiler:Sr,H=ye(e.onWarn)?e.onWarn:tr,y=e,N=be(y.__datetimeFormatters)?y.__datetimeFormatters:new Map,xe=be(y.__numberFormatters)?y.__numberFormatters:new Map,Be=be(y.__meta)?y.__meta:{};return Tn++,{version:t,cid:Tn,locale:i,fallbackLocale:s,messages:n,datetimeFormats:a,numberFormats:o,modifiers:l,pluralRules:c,missing:u,missingWarn:d,fallbackWarn:h,fallbackFormat:f,unresolving:g,postTranslation:I,processor:S,warnHtmlMessage:T,escapeParameter:D,messageCompiler:L,onWarn:H,__datetimeFormatters:N,__numberFormatters:xe,__meta:Be}}function ki(e,t,i,s,n){let{missing:a,onWarn:o}=e;if(a!==null){let l=a(e,i,t,n);return M(l)?l:t}else return t}function Ct(e,t,i){let s=e;s.__localeChainCache||(s.__localeChainCache=new Map);let n=s.__localeChainCache.get(i);if(!n){n=[];let a=[i];for(;pe(a);)a=kn(n,a,t);let o=pe(t)?t:V(t)?t.default?t.default:null:t;a=M(o)?[o]:o,pe(a)&&kn(n,a,!1),s.__localeChainCache.set(i,n)}return n}function kn(e,t,i){let s=!0;for(let n=0;n<t.length&&ie(s);n++){let a=t[n];M(a)&&(s=Ar(e,t[n],i))}return s}function Ar(e,t,i){let s,n=t.split("-");do{let a=n.join("-");s=Tr(e,a,i),n.splice(-1,1)}while(n.length&&s===!0);return s}function Tr(e,t,i){let s=!1;if(!e.includes(t)&&(s=!0,t)){s=t[t.length-1]!=="!";let n=t.replace(/!/g,"");e.push(n),(pe(i)||V(i))&&i[n]&&(s=i[n])}return s}function wt(e,t,i){let s=e;s.__localeChainCache=new Map,Ct(e,i,t)}function st(e){return Wn(e,null,void 0)}var vn=()=>"",Xe=e=>ye(e);function In(e,...t){let{fallbackFormat:i,postTranslation:s,unresolving:n,fallbackLocale:a,messages:o}=e,[l,c]=yi(...t),u=ie(c.missingWarn)?c.missingWarn:e.missingWarn,d=ie(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn,h=ie(c.escapeParameter)?c.escapeParameter:e.escapeParameter,f=!!c.resolvedMessage,g=M(c.default)||ie(c.default)?ie(c.default)?l:c.default:i?l:"",I=i||g!=="",S=M(c.locale)?c.locale:e.locale;h&&kr(c);let[T,D,L]=f?[l,S,o[S]||{}]:vr(e,l,S,a,d,u),H=l;if(!f&&!(M(T)||Xe(T))&&I&&(T=g,H=T),!f&&(!(M(T)||Xe(T))||!M(D)))return n?Ut:l;let y=!1,N=()=>{y=!0},xe=Xe(T)?T:Hn(e,l,D,T,H,N);if(y)return T;let Be=Mr(e,D,L,c),me=br(Be),we=Ir(e,xe,me);return s?s(we):we}function kr(e){pe(e.list)?e.list=e.list.map(t=>M(t)?wn(t):t):be(e.named)&&Object.keys(e.named).forEach(t=>{M(e.named[t])&&(e.named[t]=wn(e.named[t]))})}function vr(e,t,i,s,n,a){let{messages:o,onWarn:l}=e,c=Ct(e,s,i),u={},d,h=null,f="translate";for(let g=0;g<c.length&&(d=c[g],u=o[d]||{},(h=Rt(u,t))===null&&(h=u[t]),!(M(h)||ye(h)));g++){let I=ki(e,t,d,a,f);I!==t&&(h=I)}return[h,d,u]}function Hn(e,t,i,s,n,a){let{messageCompiler:o,warnHtmlMessage:l}=e;if(Xe(s)){let u=s;return u.locale=u.locale||i,u.key=u.key||t,u}let c=o(s,Er(e,i,n,s,l,a));return c.locale=i,c.key=t,c.source=s,c}function Ir(e,t,i){return t(i)}function yi(...e){let[t,i,s]=e,n={};if(!M(t)&&!_e(t)&&!Xe(t))throw st(14);let a=_e(t)?String(t):(Xe(t),t);return _e(i)?n.plural=i:M(i)?n.default=i:V(i)&&!Bt(i)?n.named=i:pe(i)&&(n.list=i),_e(s)?n.plural=s:M(s)?n.default=s:V(s)&&Se(n,s),[a,n]}function Er(e,t,i,s,n,a){return{warnHtmlMessage:n,onError:o=>{throw a&&a(o),o},onCacheKey:o=>Za(t,i,o)}}function Mr(e,t,i,s){let{modifiers:n,pluralRules:a}=e,l={locale:t,modifiers:n,pluralRules:a,messages:c=>{let u=Rt(i,c);if(M(u)){let d=!1,f=Hn(e,c,t,u,c,()=>{d=!0});return d?vn:f}else return Xe(u)?u:vn}};return e.processor&&(l.processor=e.processor),s.list&&(l.list=s.list),s.named&&(l.named=s.named),_e(s.plural)&&(l.pluralIndex=s.plural),l}function En(e,...t){let{datetimeFormats:i,unresolving:s,fallbackLocale:n,onWarn:a}=e,{__datetimeFormatters:o}=e,[l,c,u,d]=bi(...t),h=ie(u.missingWarn)?u.missingWarn:e.missingWarn;ie(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;let f=!!u.part,g=M(u.locale)?u.locale:e.locale,I=Ct(e,n,g);if(!M(l)||l==="")return new Intl.DateTimeFormat(g).format(c);let S={},T,D=null,L="datetime format";for(let N=0;N<I.length&&(T=I[N],S=i[T]||{},D=S[l],!V(D));N++)ki(e,l,T,h,L);if(!V(D)||!M(T))return s?Ut:l;let H=`${T}__${l}`;Bt(d)||(H=`${H}__${JSON.stringify(d)}`);let y=o.get(H);return y||(y=new Intl.DateTimeFormat(T,Se({},D,d)),o.set(H,y)),f?y.formatToParts(c):y.format(c)}function bi(...e){let[t,i,s,n]=e,a={},o={},l;if(M(t)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(t))throw st(16);l=new Date(t);try{l.toISOString()}catch(c){throw st(16)}}else if(er(t)){if(isNaN(t.getTime()))throw st(15);l=t}else if(_e(t))l=t;else throw st(14);return M(i)?a.key=i:V(i)&&(a=i),M(s)?a.locale=s:V(s)&&(o=s),V(n)&&(o=n),[a.key||"",l,a,o]}function Mn(e,t,i){let s=e;for(let n in i){let a=`${t}__${n}`;s.__datetimeFormatters.has(a)&&s.__datetimeFormatters.delete(a)}}function Dn(e,...t){let{numberFormats:i,unresolving:s,fallbackLocale:n,onWarn:a}=e,{__numberFormatters:o}=e,[l,c,u,d]=xi(...t),h=ie(u.missingWarn)?u.missingWarn:e.missingWarn;ie(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;let f=!!u.part,g=M(u.locale)?u.locale:e.locale,I=Ct(e,n,g);if(!M(l)||l==="")return new Intl.NumberFormat(g).format(c);let S={},T,D=null,L="number format";for(let N=0;N<I.length&&(T=I[N],S=i[T]||{},D=S[l],!V(D));N++)ki(e,l,T,h,L);if(!V(D)||!M(T))return s?Ut:l;let H=`${T}__${l}`;Bt(d)||(H=`${H}__${JSON.stringify(d)}`);let y=o.get(H);return y||(y=new Intl.NumberFormat(T,Se({},D,d)),o.set(H,y)),f?y.formatToParts(c):y.format(c)}function xi(...e){let[t,i,s,n]=e,a={},o={};if(!_e(t))throw st(14);let l=t;return M(i)?a.key=i:V(i)&&(a=i),M(s)?a.locale=s:V(s)&&(o=s),V(n)&&(o=n),[a.key||"",l,a,o]}function Ln(e,t,i){let s=e;for(let n in i){let a=`${t}__${n}`;s.__numberFormatters.has(a)&&s.__numberFormatters.delete(a)}}var Dr="9.1.9";function qe(e,...t){return Wn(e,null,void 0)}var wi=St("__transrateVNode"),Si=St("__datetimeParts"),Ci=St("__numberParts"),Lr=St("__setPluralRules"),Vn=St("__injectWithOption"),Fn=0;function On(e){return(t,i,s,n)=>e(i,s,(0,O.getCurrentInstance)()||void 0,n)}function jn(e,t){let{messages:i,__i18n:s}=t,n=V(i)?i:pe(s)?{}:{[e]:{}};if(pe(s)&&s.forEach(({locale:a,resource:o})=>{a?(n[a]=n[a]||{},Nt(o,n[a])):Nt(o,n)}),t.flatJson)for(let a in n)Bn(n,a)&&_i(n[a]);return n}var Et=e=>!be(e)||pe(e);function Nt(e,t){if(Et(e)||Et(t))throw qe(20);for(let i in e)Bn(e,i)&&(Et(e[i])||Et(t[i])?t[i]=e[i]:Nt(e[i],t[i]))}function Fr(e={}){let{__root:t}=e,i=t===void 0,s=ie(e.inheritLocale)?e.inheritLocale:!0,n=(0,O.ref)(t&&s?t.locale.value:M(e.locale)?e.locale:"en-US"),a=(0,O.ref)(t&&s?t.fallbackLocale.value:M(e.fallbackLocale)||pe(e.fallbackLocale)||V(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:n.value),o=(0,O.ref)(jn(n.value,e)),l=(0,O.ref)(V(e.datetimeFormats)?e.datetimeFormats:{[n.value]:{}}),c=(0,O.ref)(V(e.numberFormats)?e.numberFormats:{[n.value]:{}}),u=t?t.missingWarn:ie(e.missingWarn)||Ot(e.missingWarn)?e.missingWarn:!0,d=t?t.fallbackWarn:ie(e.fallbackWarn)||Ot(e.fallbackWarn)?e.fallbackWarn:!0,h=t?t.fallbackRoot:ie(e.fallbackRoot)?e.fallbackRoot:!0,f=!!e.fallbackFormat,g=ye(e.missing)?e.missing:null,I=ye(e.missing)?On(e.missing):null,S=ye(e.postTranslation)?e.postTranslation:null,T=ie(e.warnHtmlMessage)?e.warnHtmlMessage:!0,D=!!e.escapeParameter,L=t?t.modifiers:V(e.modifiers)?e.modifiers:{},H=e.pluralRules||t&&t.pluralRules,y;function N(){return Cr({version:Dr,locale:n.value,fallbackLocale:a.value,messages:o.value,messageCompiler:function(x){return Me=>Me.normalize([x])},datetimeFormats:l.value,numberFormats:c.value,modifiers:L,pluralRules:H,missing:I===null?void 0:I,missingWarn:u,fallbackWarn:d,fallbackFormat:f,unresolving:!0,postTranslation:S===null?void 0:S,warnHtmlMessage:T,escapeParameter:D,__datetimeFormatters:V(y)?y.__datetimeFormatters:void 0,__numberFormatters:V(y)?y.__numberFormatters:void 0,__v_emitter:V(y)?y.__v_emitter:void 0,__meta:{framework:"vue"}})}y=N(),wt(y,n.value,a.value);function xe(){return[n.value,a.value,o.value,l.value,c.value]}let Be=(0,O.computed)({get:()=>n.value,set:m=>{n.value=m,y.locale=n.value}}),me=(0,O.computed)({get:()=>a.value,set:m=>{a.value=m,y.fallbackLocale=a.value,wt(y,n.value,m)}}),we=(0,O.computed)(()=>o.value),Ee=(0,O.computed)(()=>l.value),F=(0,O.computed)(()=>c.value);function oe(){return ye(S)?S:null}function yt(m){S=m,y.postTranslation=m}function ui(){return g}function xa(m){m!==null&&(I=On(m)),g=m,y.missing=I}function nt(m,x,Me,ge,di,It){xe();let bt;if(bt=m(y),_e(bt)&&bt===Ut){let[Ha,Ed]=x();return t&&h?ge(t):di(Ha)}else{if(It(bt))return bt;throw qe(14)}}function fn(...m){return nt(x=>In(x,...m),()=>yi(...m),"translate",x=>x.t(...m),x=>x,x=>M(x))}function wa(...m){let[x,Me,ge]=m;if(ge&&!be(ge))throw qe(15);return fn(x,Me,Se({resolvedMessage:!0},ge||{}))}function Sa(...m){return nt(x=>En(x,...m),()=>bi(...m),"datetime format",x=>x.d(...m),()=>An,x=>M(x))}function Ca(...m){return nt(x=>Dn(x,...m),()=>xi(...m),"number format",x=>x.n(...m),()=>An,x=>M(x))}function Aa(m){return m.map(x=>M(x)?(0,O.createVNode)(O.Text,null,x,0):x)}let Ta={normalize:Aa,interpolate:m=>m,type:"vnode"};function ka(...m){return nt(x=>{let Me,ge=x;try{ge.processor=Ta,Me=In(ge,...m)}finally{ge.processor=null}return Me},()=>yi(...m),"translate",x=>x[wi](...m),x=>[(0,O.createVNode)(O.Text,null,x,0)],x=>pe(x))}function va(...m){return nt(x=>Dn(x,...m),()=>xi(...m),"number format",x=>x[Ci](...m),()=>[],x=>M(x)||pe(x))}function Ia(...m){return nt(x=>En(x,...m),()=>bi(...m),"datetime format",x=>x[Si](...m),()=>[],x=>M(x)||pe(x))}function Ea(m){H=m,y.pluralRules=H}function Ma(m,x){let Me=M(x)?x:n.value,ge=mn(Me);return Rt(ge,m)!==null}function Da(m){let x=null,Me=Ct(y,a.value,n.value);for(let ge=0;ge<Me.length;ge++){let di=o.value[Me[ge]]||{},It=Rt(di,m);if(It!=null){x=It;break}}return x}function La(m){let x=Da(m);return x!=null?x:t?t.tm(m)||{}:{}}function mn(m){return o.value[m]||{}}function Fa(m,x){o.value[m]=x,y.messages=o.value}function Oa(m,x){o.value[m]=o.value[m]||{},Nt(x,o.value[m]),y.messages=o.value}function Ra(m){return l.value[m]||{}}function Na(m,x){l.value[m]=x,y.datetimeFormats=l.value,Mn(y,m,x)}function Pa(m,x){l.value[m]=Se(l.value[m]||{},x),y.datetimeFormats=l.value,Mn(y,m,x)}function Ba(m){return c.value[m]||{}}function Ua(m,x){c.value[m]=x,y.numberFormats=c.value,Ln(y,m,x)}function Wa(m,x){c.value[m]=Se(c.value[m]||{},x),y.numberFormats=c.value,Ln(y,m,x)}return Fn++,t&&((0,O.watch)(t.locale,m=>{s&&(n.value=m,y.locale=m,wt(y,n.value,a.value))}),(0,O.watch)(t.fallbackLocale,m=>{s&&(a.value=m,y.fallbackLocale=m,wt(y,n.value,a.value))})),{id:Fn,locale:Be,fallbackLocale:me,get inheritLocale(){return s},set inheritLocale(m){s=m,m&&t&&(n.value=t.locale.value,a.value=t.fallbackLocale.value,wt(y,n.value,a.value))},get availableLocales(){return Object.keys(o.value).sort()},messages:we,datetimeFormats:Ee,numberFormats:F,get modifiers(){return L},get pluralRules(){return H||{}},get isGlobal(){return i},get missingWarn(){return u},set missingWarn(m){u=m,y.missingWarn=u},get fallbackWarn(){return d},set fallbackWarn(m){d=m,y.fallbackWarn=d},get fallbackRoot(){return h},set fallbackRoot(m){h=m},get fallbackFormat(){return f},set fallbackFormat(m){f=m,y.fallbackFormat=f},get warnHtmlMessage(){return T},set warnHtmlMessage(m){T=m,y.warnHtmlMessage=m},get escapeParameter(){return D},set escapeParameter(m){D=m,y.escapeParameter=m},t:fn,rt:wa,d:Sa,n:Ca,te:Ma,tm:La,getLocaleMessage:mn,setLocaleMessage:Fa,mergeLocaleMessage:Oa,getDateTimeFormat:Ra,setDateTimeFormat:Na,mergeDateTimeFormat:Pa,getNumberFormat:Ba,setNumberFormat:Ua,mergeNumberFormat:Wa,getPostTranslationHandler:oe,setPostTranslationHandler:yt,getMissingHandler:ui,setMissingHandler:xa,[wi]:ka,[Ci]:va,[Si]:Ia,[Lr]:Ea,[Vn]:e.__injectWithOption}}var vi={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};Se({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>_e(e)||!isNaN(e)}},vi);function Or({slots:e},t){return t.length===1&&t[0]==="default"?e.default?e.default():[]:t.reduce((i,s)=>{let n=e[s];return n&&(i[s]=n()),i},{})}function Gn(e,t,i,s){let{slots:n,attrs:a}=t;return()=>{let o={part:!0},l={};e.locale&&(o.locale=e.locale),M(e.format)?o.key=e.format:be(e.format)&&(M(e.format.key)&&(o.key=e.format.key),l=Object.keys(e.format).reduce((h,f)=>i.includes(f)?Se({},h,{[f]:e.format[f]}):h,{}));let c=s(e.value,o,l),u=[o.key];pe(c)?u=c.map((h,f)=>{let g=n[h.type];return g?g({[h.type]:h.value,index:f,parts:c}):[h.value]}):M(c)&&(u=[c]);let d=Se({},a);return M(e.tag)?(0,O.h)(e.tag,d,u):be(e.tag)?(0,O.h)(e.tag,d,u):(0,O.h)(O.Fragment,d,u)}}var Rr=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"];Se({value:{type:Number,required:!0},format:{type:[String,Object]}},vi);var Nr=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"];Se({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},vi);function Ii(e={}){let t=(0,O.getCurrentInstance)();if(t==null)throw qe(16);if(!t.appContext.app.__VUE_I18N_SYMBOL__)throw qe(17);let i=(0,O.inject)(t.appContext.app.__VUE_I18N_SYMBOL__);if(!i)throw qe(22);let s=i.mode==="composition"?i.global:i.global.__composer,n=Bt(e)?"__i18n"in t.type?"local":"global":e.useScope?e.useScope:"local";if(n==="global"){let l=be(e.messages)?e.messages:{};"__i18nGlobal"in t.type&&(l=jn(s.locale.value,{messages:l,__i18n:t.type.__i18nGlobal}));let c=Object.keys(l);if(c.length&&c.forEach(u=>{s.mergeLocaleMessage(u,l[u])}),be(e.datetimeFormats)){let u=Object.keys(e.datetimeFormats);u.length&&u.forEach(d=>{s.mergeDateTimeFormat(d,e.datetimeFormats[d])})}if(be(e.numberFormats)){let u=Object.keys(e.numberFormats);u.length&&u.forEach(d=>{s.mergeNumberFormat(d,e.numberFormats[d])})}return s}if(n==="parent"){let l=Pr(i,t,e.__useComponent);return l==null&&(l=s),l}if(i.mode==="legacy")throw qe(18);let a=i,o=a.__getInstance(t);if(o==null){let l=t.type,c=Se({},e);l.__i18n&&(c.__i18n=l.__i18n),s&&(c.__root=s),o=Fr(c),Br(a,t),a.__setInstance(t,o)}return o}function Pr(e,t,i=!1){let s=null,n=t.root,a=t.parent;for(;a!=null;){let o=e;if(e.mode==="composition")s=o.__getInstance(a);else{let l=o.__getInstance(a);l!=null&&(s=l.__composer),i&&s&&!s[Vn]&&(s=null)}if(s!=null||n===a)break;a=a.parent}return s}function Br(e,t,i){(0,O.onMounted)(()=>{},t),(0,O.onUnmounted)(()=>{e.__deleteInstance(t)},t)}function ke(e,t,i=!1,s=null){let n=Ei(e,i);s?uni.setStorage({key:n,data:t,success:s}):uni.setStorageSync(n,t)}function Le(e,t=!1,i=null){let s=Ei(e,t);if(i)uni.getStorage({key:s,success:i});else return uni.getStorageSync(s)}function zn(e,t=!1){uni.removeStorage({key:Ei(e,t)})}function Ei(e,t){return t?`_azb_${e}`:`mzb_${e}`}function Ze(e,t,i){let s=i;typeof i=="undefined"&&(s=getApp().globalData.uid),ke(e+"_"+s,t)}function ve(e,t){let i=t;return typeof t=="undefined"&&(i=getApp().globalData.uid),Le(e+"_"+i)}function _(e){return typeof e=="undefined"||e==null||e==""}var De=new Promise(()=>{});function Ur(e,t,i=""){if(_(e))return"";let s=[];for(let n in e)s.push(n+"="+e[n]);return i+s.join(t)}function at(e){return typeof e=="number"?e+"":typeof e=="boolean"?e?"true":"false":_(e)?"null":typeof e=="object"?JSON.stringify(e):e}function se(e){return e.replace(new RegExp("'","gm"),"\uFF07")}function Qe(e){return e.replace(new RegExp("\uFF07","gm"),"'")}function Mt(e,t){let i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in i)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length==1?i[s]:("00"+i[s]).substr((""+i[s]).length)));return t}function Wt(e,t=18){if(_(e))return"";let i=new Date(Date.parse(e.replace(/-/g,"/"))),s=Math.ceil((new Date().getTime()-i)/31536e6),n=s>1?s-1:s;return n<t?t:n}function Wr(e){return e=parseInt(e),e.toString().length==16?e=Math.round(e/1e3):e<1e10&&(e=e*1e3),e}function Mi(e,t=!0,i=!1,s=""){if(_(e))return"";e=Wr(e);let n;s==""?n=new Date:n=Hr(s);let a=new Date(e),o=n.getFullYear(),l=n.getMonth()+1,c=n.getDate(),u=a.getFullYear(),d=a.getMonth()+1,h=a.getDate(),f="",g=t?" "+Mt(a,"hh:mm"):"";if(o==u){let D=n.getTime()-e;if(l==d&&c==h)D<60*1e3&&!t?f=p("just"):f=`${p("today")} ${Mt(a,"hh:mm")}`;else{let L=new Date;L.setDate(L.getDate()-1);let H=new Date;if(H.setDate(H.getDate()-2),d==L.getMonth()+1&&h==L.getDate())f=`${p("yesterday")} ${g}`;else{var I=D/36e5;if(I<=7*24){let y=new Array(7),N=i?"Short":"";y[0]=p("week.sun"+N),y[1]=p("week.mon"+N),y[2]=p("week.tues"+N),y[3]=p("week.wed"+N),y[4]=p("week.thur"+N),y[5]=p("week.fri"+N),y[6]=p("week.sat"+N);var S=y[a.getDay()];f=S+" "+g}else f=Mt(a,"M/d")+g}}}else f=Mt(a,"M/d")+g;return f}function Hr(e){let t=new Date,i=t.getTime(),a=t.getTimezoneOffset()*6e4+i+36e5*e;return new Date(a)}function $e(e,t=!1){if(_(e)||e<0||isNaN(e))return t?"00:00:00":"00:00";var i=0,s=0;e>0&&e<10?e="0"+parseInt(e):e<=0?e="00":e>=60&&(i=parseInt(e/60)<10?"0"+parseInt(e/60):parseInt(e/60),e=parseInt(e%60)<10?"0"+parseInt(e%60):parseInt(e%60),i>60&&(s=parseInt(i/60)<10?"0"+parseInt(i/60):parseInt(i/60),i=parseInt(i%60)<10?"0"+parseInt(i%60):parseInt(i%60)));var n;return s>0?n=s+":"+i+":"+e:i>0?(n=i+":"+e,t&&(n="00:"+n)):(n="00:"+e,t&&(n="00:"+n)),n}function Ht(e,t,i){return Math.abs(e-t)>i*60*1e3}function q(e){try{let t=JSON.parse(e);if(typeof t=="object")return t}catch(t){}return!1}function $n(e){let t=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return e.match(t)}function Yn(e,t){for(let i in e)if(t[i]!=null&&e[i]!=t[i])return!0;return!1}function Jn(){return Math.random().toString(36).substr(2)}function Vt(e){return!!(e.startsWith("file://")||e.startsWith("/var/mobile/")||e.indexOf("apps/__UNI")!=-1||e.startsWith("/storage/")||e.startsWith("_doc/uniapp_temp"))}var hi={};function Di(e,t=500,i="throttle"){let s=e.name;_(s)&&(s=i),!hi[s]&&(hi[s]=!0,e(),setTimeout(function(){hi[s]=""},t))}function Li(e,t,i=1e4){return e<=0||t<=0?[108,192]:(t>e?(t=t*108/e,t>i&&(t=i),e=108):(t=t*148/e,e=148),[e,t])}function Vr(e){if(_(e))return"";let t=e.split("/");if(_(t))return"";let i=t[t.length-1];if(_(i))return"";let s=i.split(".");if(_(s))return"";let n=s[s.length-1];return _(n)?"":n.toLowerCase()}function Kn(e){if(!e)return"";let t=JSON.stringify(e);return(typeof t!="string"||t=="{}")&&(t=e.toString()),t}function jr(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Lt={LEVEL_34:34,LEVEL_33:33,LEVEL_29:29};var Gr="onResize";function Ie(e){return weex.requireModule(e)}function E(e,t,...i){uni.__log__?uni.__log__(e,t,...i):console[e].apply(console,[...i,t])}function A(e,t){return typeof e=="string"?t:e}var zr=e=>(t,i=(0,O.getCurrentInstance)())=>{!O.isInSSRComponentSetup&&(0,O.injectHook)(e,t,i)},qn=zr(Gr);var $r={INIT:1,OPEN:2,CALLBACK:3,SOCKET:4,LOGIN:5};var Pt={DEFAULT:1e4,FAIL:0,SUCCESS:1,DISCONNECT:6,RECONNECT:7},Yr={INIT:"init",APP_SHOW:"app_show",TAB_SHOW:"tab_show",MSG_INDEX_REFRESH:"msg_index_refresh",STOP_TAKING_RECOVERY:"stop_taking_recovery",CATCH_MSG_SYNC:"sync_catch",API_CALL_BACK:"api_call_back",RECONNECT_LISTENER:"reconnect_listener",RECONNECT_LOCAL:"reconnect_local"},X={emailLogin:"/pagesLogin/email-login",forgetPwd:"/pagesLogin/forget-pwd",signUp:"/pagesLogin/sign-up",confirmSignUp:"/pagesLogin/confirm-sign-up",usageInstructionsPopup:"/pagesDialog/usage-instructions-popup",releaseConch:"/pagesPub/conch/release-conch",msgSendMediaLimit:"/pagesDialog/msg-send-media-limit",userHome:"/pagesPub/user-home/user-home",reportUser:"/pagesReport/index",myConch:"/pagesPub/conch/my-conch",blockList:"/pagesPub/block/block-list",accountSettings:"/pagesPub/account-settings/account-settings",bindNewEmail:"/pagesPub/account-settings/bind-new-email",settings:"/pagesPub/settings/settings",feedback:"/pagesPub/settings/feedback",aboutUs:"/pagesPub/settings/about-us",changePassword:"/pagesPub/account-settings/change-password",catchConch:"/pagesPub/conch/catch-conch",buyVip:"/pagesPub/buyVip/vip",coinDetail:"/pagesPub/coin-detail/coin-detail",editProfile:"/pagesPub/edit-profile/edit-profile",buyCoins:"/pagesPub/buyCoins/coins",ageDialog:"/pagesDialog/age-dialog",sendVideoTip:"/pagesDialog/send-video-tip",reportDialog:"/pagesDialog/report-dialog",chooseCountry:"/pagesDialog/choose-country",filterSex:"/pagesPub/filter-sex/filter-sex",buyVipDialog:"/pagesPub/buy-vip-dialog/buy-vip-dialog",authenticationDialog:"/pagesPub/authentication-dialog/authentication-dialog",faceAuthentication:"/pagesPub/authentication-dialog/face-authentication",topUpDialog:"/pagesPub/top-up-dialog/top-up-dialog",callRecords:"/pagesPub/call-records/call-records",friendList:"/pagesPub/user-home/friend-list",notify:"/pagesPub/notify/notify"},Jr={USER_DATA:"user_data",msgSendMediaLimit:"/pagesDialog/msg-send-media-limit"};function Xn(e,t){let i=X[e];return i||(i=e),i+Ur(t,"&","?")}function ne(e,t=null,i=null,s=!1){let n=Xn(e,t),a={url:n,fail:o=>{E("error","at common/route.js:58",`\u6253\u5F00\u9875\u9762\u5931\u8D25${n} ${JSON.stringify(o)}`)}};s&&(a=Object.assign(a,s)),i!=null&&(a.events=i),uni.navigateTo(a)}function Te(e,t,i,s,n=null){let o={url:Xn(e,t),success(l){l.eventChannel.emit(i,s)}};n!=null&&(o.events=n),uni.navigateTo(o)}function Fi(e=1,t="",i="",s){let n={delta:e,complete:()=>{typeof s=="function"&&s()}};t&&(n.animationType=t),i&&(n.animationDuration=i),uni.navigateBack(n)}function Kr(){let e=[],t=getCurrentPages();for(let i=0,s=t.length;i<s;i++){let n=t[i].$page;e.push(n.path)}return e}function Zn(e="path"){let t=getCurrentPages(),i=t[t.length-1];if(!i)return"";let s=i.$page;return s?s[e]:""}function qr(e){getApp().globalData.routeOpenInfo[Jr.USER_DATA]=e}function Oi(e,t,i,s=0){let n=(e==null?void 0:e.uid)==getApp().globalData.uid;qr(e),n?t&&ne(X.userHome,{targetUid:e==null?void 0:e.uid}):typeof i=="function"?uni.navigateTo({url:X.userHome+`?targetUid=${e==null?void 0:e.uid}&sid=`+s,complete:()=>{i()}}):ne(X.userHome,{targetUid:e==null?void 0:e.uid})}var jt={DB:"db",MESSAGE:"message",AVATAR:"avatar",REPORT:"report",FEEDBACK:"feedback",ALBUM:"album",CONCH:"release"},Fe={PHOTO:1,VIDEO:2,VOICE:3,TXT:4},Xr=["gif","heic"];function Ri(e){function t(o,l,c){for(;0<c--;)o.push(l)}function i(o,l){return o<<l|o>>>32-l}function s(o,l,c){return o^l^c}function n(o,l){var c=(l&65535)+(o&65535),u=(l>>>16)+(o>>>16)+(c>>>16);return(u&65535)<<16|c&65535}var a="0123456789abcdef";return function(o){for(var l=[],c=o.length*4,u,d=0;d<c;d++)u=o[d>>2]>>(3-d%4)*8,l.push(a.charAt(u>>4&15)+a.charAt(u&15));return l.join("")}(function(o,l){var c,u,d,h,f,g=o.length,I=1732584193,S=4023233417,T=2562383102,D=271733878,L=3285377520,H=[];t(H,1518500249,20),t(H,1859775393,20),t(H,2400959708,20),t(H,3395469782,20),o[l>>5]|=128<<24-l%32,o[(l+65>>9<<4)+15]=l;for(var y=0;y<g;y+=16){c=I,u=S,d=T,h=D,f=L;for(var N=0,xe=[];N<80;N++){xe[N]=N<16?o[N+y]:i(xe[N-3]^xe[N-8]^xe[N-14]^xe[N-16],1);var Be=function(me,we,Ee,F,oe){var yt=(oe&65535)+(me&65535)+(we&65535)+(Ee&65535)+(F&65535),ui=(oe>>>16)+(me>>>16)+(we>>>16)+(Ee>>>16)+(F>>>16)+(yt>>>16);return(ui&65535)<<16|yt&65535}(N<20?function(me,we,Ee){return me&we^~me&Ee}(u,d,h):N<40?s(u,d,h):N<60?function(me,we,Ee){return me&we^me&Ee^we&Ee}(u,d,h):s(u,d,h),f,H[N],xe[N],i(c,5));f=h,h=d,d=i(u,30),u=c,c=Be}I=n(I,c),S=n(S,u),T=n(T,d),D=n(D,h),L=n(L,f)}return[I,S,T,D,L]}(function(o){for(var l=[],c=255,u=o.length*8,d=0;d<u;d+=8)l[d>>5]|=(o.charCodeAt(d/8)&c)<<24-d%32;return l}(e).slice(),e.length*8))}function Ni(e,t,i=!0){return ts(getApp().globalData.ossPicPath,e,t,i)}function rt(e,t,i=!0){return ts(getApp().globalData.ossPath,e,t,i)}function ot(e,t){uni.saveFile({tempFilePath:t}).then(i=>{if(!i||!i.savedFilePath)return;let s=Ri(e);ke(`img_${s}`,i.savedFilePath),is("tempFile success")})}function Qn(e){return _(e)?"":e.substr(0,5)==="_doc/"||e.substr(0,4)==="http"?e:getApp().globalData.ossPath+e}function es(e){if(_(e)||e.startsWith("http"))return;let i=`img_${Ri(e)}`,s=Le(i);zn(i),s&&uni.removeSavedFile({filePath:s})}function ts(e,t,i,s=!0){if(_(t))return"";if(t.startsWith("http")||t.startsWith("file://"))return t;if(t.startsWith("/var/mobile/"))return"file://"+t;if(t.startsWith("/storage/"))return t;let a=`img_${Ri(t)}`,o=Le(a);if(o){let c={filePath:o,fail(u){is(`\u7F13\u5B58\u68C0\u6D4B\u5931\u8D25${t}`,u),zn(a),typeof i=="function"&&i(e+t)},success(u){}};return typeof i=="function"&&(c.success=function(){i(o)}),uni.getFileInfo(c),o}let l=e+t;return getApp().globalData.picCacheObj[a]||(getApp().globalData.picCacheObj[a]=1,typeof i=="function"&&!s&&i(l),bo(l).then(c=>{ke(a,c),typeof i=="function"&&s&&i(c),delete getApp().globalData.picCacheObj[a]}).catch(()=>{})),l}function is(e,t){E("error","at common/cache.js:118",`cache ${e}`,t)}var w={M_TEXT:1,M_VOICE:2,M_IMG:3,M_GIFT:5,M_NOTICE:6,M_CALL:8,M_RECOMMEND_USER:11,M_RECOMMEND_CLUB:12,M_VIDEO:4,M_GIFT_ASK:21,M_NOTICE_SYS:22,M_EXPRESSION:23,M_LETTER:24,M_PAID_PHOTO:25,M_PAID_VIDEO:26,M_MATCH_SUCCESS:27,M_AI_ISSUE_GUIDE:28,M_AI_ISSUE_QUESTION:29,M_SERVICE_RATING:30,M_N_DEF:100,M_N_AUDIT:103,M_N_VIP:104,M_N_RECHARGE:105,M_N_CLUB_AUDIT_REJECT:106,M_N_CLUB_AUDIT:107,M_N_GREETING_AUDIT:115,M_N_SYS_NOTICE:116,M_N_CALL:117,M_N_COOPERATE:118,M_N_WITHDRAW:119,M_N_REPORT_AUDIT:120,M_N_IMG:121,M_N_PRIVACY_CALL:122,M_N_WITHDRAW_NOTICE:123,M_N_WITH_MEDIA:124,M_N_REPORT_RESULT:144,M_N_COMPLAINT_NOTICE:145,M_N_MONITOR:202,M_C_RECHARGE:1001,M_C_CALL_TEXT_AUDIO:1002,SYSTEM_ID:1e7},U={M_CHAT_PRI:1,M_CHAT_CLUB:2,M_CHAT_ASS:3,M_CHAT_NOTICE:4,M_CHAT_NOTIFY:5,M_CHAT_CLUB_NOTICE:6},At={SUCCESS:0,FAIL:1,SEND_HIDE:2,KEFU_DEL:3,USER_DEL:4};function Ge(e,t=!0){return e.startsWith("http")?e:e.startsWith("file://")?t?e:e.replace("file://",""):e.startsWith("/storage/")||e.startsWith("/var/mobile/")?t?`file://${e}`:e:e.startsWith("_doc/uniapp")?t?e:plus.io.convertLocalFileSystemURL(e):e.indexOf("apps/__UNI")!=-1?e:!1}function ns(e){e&&e.height>0&&(getApp().globalData.keyboardH=e.height)}function Pi(e,t,i){return new Promise(s=>{let n=e;n.startsWith("_doc")&&(n=plus.io.convertLocalFileSystemURL(n)),getApp().globalData.pluginImageBrowser.getVideoCover({url:n},a=>{Zr(`getVideoCover ${a}`),s(a)})})}function ss(e,t){let i=e.msg_type==w.M_VIDEO||e.msg_type==w.M_PAID_VIDEO,s;if(i){let n=t.small_url||t.cover_url||t.cover,a=t.cover_url||t.cover,o=t.url;o.startsWith("_doc")&&(o=plus.io.convertLocalFileSystemURL(o)),s=Rn(!0,n,o,a)}else{let n=t.small_url||t.image_url;s=Rn(!1,n,t.image_url)}return s}function Rn(e,t,i,s="1",n=0,a=0){let o,l=Ge(t,!1);if(l)o=l;else{let d;if(Y.isAndroid,d=!1,d){let h=Ni(t);o=h.startsWith("http")?h:plus.io.convertLocalFileSystemURL(h)}else o=getApp().globalData.ossPicPath+t}let c=Ge(i,!1)||`${getApp().globalData.ossPath}${i}`,u=e?Ge(s,!1)||`${getApp().globalData.ossPicPath}${s}`:s;return{isVideo:e,thumbnailUrl:o||"",url:c,coverUrl:u,width:n,height:a}}function as(e,t,i=1){Di(function(){let s=JSON.parse(JSON.stringify(e));getApp().globalData.pluginImageBrowser.openBrowser({info:s,index:t,showIndicator:i},n=>{E("info","at comExtend/plugin-image-browser.js:80","Preview.preview "+JSON.stringify(n))})},500,"previewImage")}function Zr(e,t){E("error","at comExtend/plugin-image-browser.js:90",`preview media ${e}`,t)}function rs(e){return new Promise(t=>{getApp().globalData.pluginTool.permissionRequest({permission:e},i=>{t(i)})})}function Qr(e){return getApp().globalData.pluginTool.permissionStatusSync({permission:e})}function eo(e){return getApp().globalData.pluginTool.permissionOpenSetting({permission:e})}function to(){return getApp().globalData.pluginTool.locationAuthorizationStatusSync()}function io(){return new Promise(e=>{getApp().globalData.pluginTool.locationAuthorizationStatus({},t=>{e(t)})})}var j={ALBUM:1,CAMERA:2,VIDEO:3,MICROPHONE:4,NOTIFY:5,LOCATION:6,DRAW_OVERLAYS:7},J={GRANTED:1,DENIED:0,DENIED_ALWAYS:-1};function Gt(e,t=!0,i=!0){return new Promise(s=>{let n=function(a){a==J.GRANTED?s(!0):(a==J.DENIED||a==J.DENIED_ALWAYS&&i&&so(e),s(!1))};if(Y.isAndroid)if(e==j.NOTIFY)oo().then(n);else{let a=zt(e);rs(a).then(n)}else go(e)(t).then(n)})}function Bi(e){return e==j.NOTIFY?Y.isAndroid?Ft(e):os():e==j.MICROPHONE?Y.isAndroid?Ft(e):mo():e==j.LOCATION?Y.isAndroid?Ft(e):to():!0}function no(e){Y.isAndroid?ao(zt(e)):lo()}var fi=!1;function so(e,t){fi||(uni.showModal({title:p("tips"),content:_o(e),showCancel:!0,cancelText:p("cancel"),confirmText:p("toTurnOn"),complete(i){fi=!1,i.confirm?(no(e),typeof t=="function"&&t(!0)):i.cancel&&typeof t=="function"&&t(!1)}}),fi=!0)}function Ft(e){let t=zt(e);return Qr(t)}function ao(e){if(_(e)){ro();return}eo(e)}function ro(){var e=plus.android.importClass("android.content.Intent"),t=plus.android.importClass("android.provider.Settings"),i=plus.android.importClass("android.net.Uri"),s=plus.android.runtimeMainActivity(),n=new e;n.setAction(t.ACTION_APPLICATION_DETAILS_SETTINGS);var a=i.fromParts("package",s.getPackageName(),null);n.setData(a),s.startActivity(n)}function zt(e){switch(e){case j.LOCATION:return["android.permission.ACCESS_FINE_LOCATION","android.permission.ACCESS_COARSE_LOCATION"];case j.ALBUM:case j.VIDEO:let t=["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO"];return getApp().globalData.sys.androidAPILevel>=Lt.LEVEL_34&&t.push("android.permission.READ_MEDIA_VISUAL_USER_SELECTED"),t;case j.MICROPHONE:return getApp().globalData.sys.androidAPILevel<Lt.LEVEL_29?["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO","android.permission.RECORD_AUDIO"]:["android.permission.RECORD_AUDIO"];case j.CAMERA:return getApp().globalData.sys.androidAPILevel<Lt.LEVEL_29?["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO","android.permission.CAMERA"]:["android.permission.CAMERA"];case j.NOTIFY:return["android.permission.POST_NOTIFICATIONS"]}}function oo(){return new Promise(e=>{if(getApp().globalData.sys.androidAPILevel>=Lt.LEVEL_33)rs(zt(j.NOTIFY)).then(t=>{e(t)});else{let t=Ft(j.NOTIFY);e(t?J.GRANTED:J.DENIED_ALWAYS)}})}function lo(){var e=plus.ios.import("UIApplication"),t=e.sharedApplication(),i=plus.ios.import("NSURL"),s=i.URLWithString("app-settings:");t.openURL(s),plus.ios.deleteObject(s),plus.ios.deleteObject(i),plus.ios.deleteObject(t)}function co(){return new Promise(e=>{io().then(t=>{e(t==1?J.GRANTED:J.DENIED_ALWAYS)})})}function uo(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),s=i.authorizationStatusForMediaType("soun");s==3?(plus.ios.deleteObject(i),t(J.GRANTED)):s==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","soun",function(){if(e){let n=i.authorizationStatusForMediaType("soun");plus.ios.deleteObject(i),t(n==3?J.GRANTED:J.DENIED)}else plus.ios.deleteObject(i),t(J.DENIED)}):(plus.ios.deleteObject(i),t(J.DENIED_ALWAYS))})}function po(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),s=i.authorizationStatusForMediaType("vide");s==3?(plus.ios.deleteObject(i),t(J.GRANTED)):s==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","vide",function(){if(e){let n=i.authorizationStatusForMediaType("vide");plus.ios.deleteObject(i),t(n==3?J.GRANTED:J.DENIED)}else plus.ios.deleteObject(i),t(J.DENIED)}):(plus.ios.deleteObject(i),t(J.DENIED_ALWAYS))})}function ho(e){return new Promise(t=>{let i=plus.ios.import("PHPhotoLibrary"),s=i.authorizationStatus();s==3||s==4?(plus.ios.deleteObject(i),t(J.GRANTED)):s==0?plus.ios.invoke("PHPhotoLibrary","requestAuthorization:",function(){if(e){let n=i.authorizationStatus();plus.ios.deleteObject(i),t(n==3||n==4?J.GRANTED:J.DENIED)}else plus.ios.deleteObject(i),t(J.DENIED)}):(plus.ios.deleteObject(i),t(J.DENIED_ALWAYS))})}function fo(){return new Promise(e=>{let t=plus.ios.invoke("UNUserNotificationCenter","currentNotificationCenter");plus.ios.invoke(t,"requestAuthorizationWithOptions:completionHandler:",7,function(i){plus.ios.deleteObject(t);let s=os();e(s?J.GRANTED:J.DENIED_ALWAYS)})})}function mo(){let e=plus.ios.importClass("AVCaptureDevice"),t=e.authorizationStatusForMediaType("soun");return plus.ios.deleteObject(e),t==3}function os(){var e=!1,t=plus.ios.import("UIApplication"),i=t.sharedApplication(),s=0;if(i.currentUserNotificationSettings){var n=i.currentUserNotificationSettings();s=n.plusGetAttribute("types"),e=s!=0,plus.ios.deleteObject(n)}else s=i.enabledRemoteNotificationTypes(),e=s!=0;return plus.ios.deleteObject(i),plus.ios.deleteObject(t),e}function go(e){switch(e){case j.LOCATION:return co;case j.ALBUM:case j.VIDEO:return ho;case j.MICROPHONE:return uo;case j.CAMERA:return po;case j.NOTIFY:return fo}}function _o(e){let t=getApp().globalData.appInfo;return e==j.LOCATION?p("openLocationPerTip",{appName:t.name}):e==j.ALBUM||e==j.VIDEO?p("openAlbumPerTip",{appName:t.name}):e==j.MICROPHONE?p("openMicrophonePerTip",{appName:t.name}):e==j.NOTIFY?p("msg.openNoticePerTips",{appName:t.name}):e==j.CAMERA?p("openCameraPerTip",{appName:t.name}):""}function ls(){return getApp().globalData.pluginMqtt.checkStatusSync()?Pt.SUCCESS:Pt.FAIL}function Tt(e,t){getApp().globalData.s.commit("setPubValue",{name:e,value:t})}function Ui(e,t){getApp().globalData.s.commit(e,t)}function yo(e){let t=uni.getSystemInfoSync().uniRuntimeVersion;if(!e)return t;let i=t.split("."),s=i[i.length-1];s.length<=1&&(i[i.length-1]=s+"0");let n=i.join("");return Number(n)}function bo(e){return new Promise((t,i)=>{uni.downloadFile({url:e}).then(s=>!s||s.statusCode!=200||!s.tempFilePath?(i(),new Promise(()=>{})):uni.saveFile({tempFilePath:s.tempFilePath})).then(s=>{!s||!s.savedFilePath?i():t(s.savedFilePath)}).catch(s=>{E("error","at common/common.js:72","downloadFile error "+JSON.stringify(s))})})}function Wi(e,t="md5"){return new Promise(i=>{uni.getFileInfo({filePath:e,digestAlgorithm:t,success(s){i(s)},fail(){i(null)}})})}function Nn(e,t){t?plus.runtime.openWeb(e):plus.runtime.openURL(e)}function cs(e){e!=""&&uni.setClipboardData({data:e+"",success(){We(p("copied"))}})}function Ue(e,t,i,s=p("confirm")){Ce(e,t,i,"",s,!1)}function xo(e){return["Si, desbloquear","Reenviar Completar"].indexOf(e)!=-1}function Ce(e,t,i,s,n=p("confirm"),a=!0,o=p("cancel"),l=!1){let c=!1;if(!Y.isAndroid&&(c=xo(n),c)){let u=n;n=o,o=u}uni.showModal({title:e,content:t,showCancel:a,cancelText:o,confirmText:n,editable:l,success(u){u.confirm?c?typeof s=="function"&&s():typeof i=="function"&&i(u):u.cancel&&(c?typeof i=="function"&&i(u):typeof s=="function"&&s())}})}function We(e,t="none",i="center"){uni.showToast({title:e,duration:2e3,icon:t,position:i})}function wo(e,t){uni.showToast({title:e,duration:t,icon:"none",position:"center"})}function Hi(e){return new Promise(t=>{plus.io.getVideoInfo({filePath:e,success(i){t(i)},fail(i){t(`getVideoInfo ${JSON.stringify(i)}`)}})})}function us(e,t){return new Promise((i,s)=>{uni.compressVideo({src:e,quality:t,success(n){E("log","at common/common.js:247","videoCompress res "+JSON.stringify(n)),i(n)},fail(n){E("log","at common/common.js:251","videoCompress error "+JSON.stringify(n)),s(`videoCompress ${JSON.stringify(n)}`)}})})}function ds(e,t=1,i=!1,s=!1){return new Promise((n,a)=>{if(e==0){E("error","at common/common.js:273","\u300A!!Warn!!\u300B----> [Does not support simultaneous selection of album and camera] ");return}let o=["album","camera"],l;e==1?(o=["album"],l=j.ALBUM):e==2&&(o=["camera"],l=j.CAMERA);let c=["compressed"];i&&c.push("original");let u={};if(s){let d=getApp().globalData.window.width;u={width:d,height:d}}Gt(l).then(d=>{if(!d){a(),E("error","at common/common.js:295","choose image permission fail");return}uni.chooseImage({count:t,sourceType:o,sizeType:c,crop:u,success:function(h){let f=[];for(let g=0,I=h.tempFilePaths.length;g<I;g++){let S=h.tempFilePaths[g],T=Vr(S);Xr.indexOf(T)!=-1&&f.push(g)}if(f.length>0&&(h.tempFilePaths=h.tempFilePaths.filter((g,I)=>f.indexOf(I)==-1),h.tempFiles&&(h.tempFiles=h.tempFiles.filter((g,I)=>f.indexOf(I)!=-1))),e!=1)for(let g=0,I=h.tempFilePaths.length;g<I;g++)h.tempFilePaths[g]=plus.io.convertLocalFileSystemURL(h.tempFilePaths[g]);n(h)},fail:function(h){a(),E("error","at common/common.js:333","choose image error --->"+JSON.stringify(h))}})})})}function ps(e,t,i=!1,s=15){return new Promise((n,a)=>{let o,l=["album","camera"],c;e==1?(l=["album"],c=j.VIDEO):e==2&&(l=["camera"],c=j.CAMERA),Gt(c).then(u=>{if(!u){a(),E("error","at common/common.js:355","choose video permission fail");return}return uni.chooseVideo({sourceType:l,compressed:!1,maxDuration:s,camera:i?"front":"back"})}).then(u=>{if(E("error","at common/common.js:365","----> uni.chooseVideo "+JSON.stringify(u)),o=JSON.parse(JSON.stringify(u)),o&&o.duration&&parseInt(o.duration)>s){let d=setTimeout(()=>{clearTimeout(d),wo(p("video.durationExceedTip",{number:s}),3e3)},500);return a(null),De}return o.tempFilePath=o.tempFilePath.replace("file://",""),Y.isAndroid&&yo(!0)<3617?Hi(o.tempFilePath):new Promise(d=>{d(null)})}).then(u=>{if(u&&(u.orientation=="right"||u.orientation=="left")){E("error","at common/common.js:387","----> uni.chooseVideo videoInfo "+JSON.stringify(u));let d=o.height,h=o.width;o.width=d,o.height=h}return t?Pi(o.tempFilePath,o.width,o.height):new Promise(d=>{d(null)})}).then(u=>(E("error","at common/common.js:401","----> uni.chooseVideo coverUrl "+u),o.coverPath=u,n(o))).catch(u=>{E("error","at common/common.js:405","-----> chooseVideo error "+JSON.stringify(u)),a()})})}var mi=0;function So(e){return Ao(Co(To(e)))}function Co(e){return vo(Io(ko(e),e.length*8))}function Ao(e){try{}catch(a){mi=0}for(var t=mi?"0123456789ABCDEF":"0123456789abcdef",i="",s,n=0;n<e.length;n++)s=e.charCodeAt(n),i+=t.charAt(s>>>4&15)+t.charAt(s&15);return i}function To(e){for(var t="",i=-1,s,n;++i<e.length;)s=e.charCodeAt(i),n=i+1<e.length?e.charCodeAt(i+1):0,55296<=s&&s<=56319&&56320<=n&&n<=57343&&(s=65536+((s&1023)<<10)+(n&1023),i++),s<=127?t+=String.fromCharCode(s):s<=2047?t+=String.fromCharCode(192|s>>>6&31,128|s&63):s<=65535?t+=String.fromCharCode(224|s>>>12&15,128|s>>>6&63,128|s&63):s<=2097151&&(t+=String.fromCharCode(240|s>>>18&7,128|s>>>12&63,128|s>>>6&63,128|s&63));return t}function ko(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<e.length*8;i+=8)t[i>>5]|=(e.charCodeAt(i/8)&255)<<i%32;return t}function vo(e){for(var t="",i=0;i<e.length*32;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function Io(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,s=-271733879,n=-1732584194,a=271733878,o=0;o<e.length;o+=16){var l=i,c=s,u=n,d=a;i=le(i,s,n,a,e[o+0],7,-680876936),a=le(a,i,s,n,e[o+1],12,-389564586),n=le(n,a,i,s,e[o+2],17,606105819),s=le(s,n,a,i,e[o+3],22,-1044525330),i=le(i,s,n,a,e[o+4],7,-176418897),a=le(a,i,s,n,e[o+5],12,1200080426),n=le(n,a,i,s,e[o+6],17,-1473231341),s=le(s,n,a,i,e[o+7],22,-45705983),i=le(i,s,n,a,e[o+8],7,1770035416),a=le(a,i,s,n,e[o+9],12,-1958414417),n=le(n,a,i,s,e[o+10],17,-42063),s=le(s,n,a,i,e[o+11],22,-1990404162),i=le(i,s,n,a,e[o+12],7,1804603682),a=le(a,i,s,n,e[o+13],12,-40341101),n=le(n,a,i,s,e[o+14],17,-1502002290),s=le(s,n,a,i,e[o+15],22,1236535329),i=ce(i,s,n,a,e[o+1],5,-165796510),a=ce(a,i,s,n,e[o+6],9,-1069501632),n=ce(n,a,i,s,e[o+11],14,643717713),s=ce(s,n,a,i,e[o+0],20,-373897302),i=ce(i,s,n,a,e[o+5],5,-701558691),a=ce(a,i,s,n,e[o+10],9,38016083),n=ce(n,a,i,s,e[o+15],14,-660478335),s=ce(s,n,a,i,e[o+4],20,-405537848),i=ce(i,s,n,a,e[o+9],5,568446438),a=ce(a,i,s,n,e[o+14],9,-1019803690),n=ce(n,a,i,s,e[o+3],14,-187363961),s=ce(s,n,a,i,e[o+8],20,1163531501),i=ce(i,s,n,a,e[o+13],5,-1444681467),a=ce(a,i,s,n,e[o+2],9,-51403784),n=ce(n,a,i,s,e[o+7],14,1735328473),s=ce(s,n,a,i,e[o+12],20,-1926607734),i=ue(i,s,n,a,e[o+5],4,-378558),a=ue(a,i,s,n,e[o+8],11,-2022574463),n=ue(n,a,i,s,e[o+11],16,1839030562),s=ue(s,n,a,i,e[o+14],23,-35309556),i=ue(i,s,n,a,e[o+1],4,-1530992060),a=ue(a,i,s,n,e[o+4],11,1272893353),n=ue(n,a,i,s,e[o+7],16,-155497632),s=ue(s,n,a,i,e[o+10],23,-1094730640),i=ue(i,s,n,a,e[o+13],4,681279174),a=ue(a,i,s,n,e[o+0],11,-358537222),n=ue(n,a,i,s,e[o+3],16,-722521979),s=ue(s,n,a,i,e[o+6],23,76029189),i=ue(i,s,n,a,e[o+9],4,-640364487),a=ue(a,i,s,n,e[o+12],11,-421815835),n=ue(n,a,i,s,e[o+15],16,530742520),s=ue(s,n,a,i,e[o+2],23,-995338651),i=de(i,s,n,a,e[o+0],6,-198630844),a=de(a,i,s,n,e[o+7],10,1126891415),n=de(n,a,i,s,e[o+14],15,-1416354905),s=de(s,n,a,i,e[o+5],21,-57434055),i=de(i,s,n,a,e[o+12],6,1700485571),a=de(a,i,s,n,e[o+3],10,-1894986606),n=de(n,a,i,s,e[o+10],15,-1051523),s=de(s,n,a,i,e[o+1],21,-2054922799),i=de(i,s,n,a,e[o+8],6,1873313359),a=de(a,i,s,n,e[o+15],10,-30611744),n=de(n,a,i,s,e[o+6],15,-1560198380),s=de(s,n,a,i,e[o+13],21,1309151649),i=de(i,s,n,a,e[o+4],6,-145523070),a=de(a,i,s,n,e[o+11],10,-1120210379),n=de(n,a,i,s,e[o+2],15,718787259),s=de(s,n,a,i,e[o+9],21,-343485551),i=je(i,l),s=je(s,c),n=je(n,u),a=je(a,d)}return Array(i,s,n,a)}function $t(e,t,i,s,n,a){return je(Eo(je(je(t,e),je(s,a)),n),i)}function le(e,t,i,s,n,a,o){return $t(t&i|~t&s,e,t,n,a,o)}function ce(e,t,i,s,n,a,o){return $t(t&s|i&~s,e,t,n,a,o)}function ue(e,t,i,s,n,a,o){return $t(t^i^s,e,t,n,a,o)}function de(e,t,i,s,n,a,o){return $t(i^(t|~s),e,t,n,a,o)}function je(e,t){var i=(e&65535)+(t&65535),s=(e>>16)+(t>>16)+(i>>16);return s<<16|i&65535}function Eo(e,t){return e<<t|e>>>32-t}var Ai={md5:function(e){return So(e)}};function Mo(e,t){let i=getApp().globalData.s.state.AES.encrypt(t,e);return`${getApp().globalData.apiUaPrefix}${i}`}function Pn(e){return Ai.md5(`${getApp().globalData.channel}${e}${getApp().globalData.apiEncValue}`).substring(0,16)}var P={setToken(e){_(e)||Tt("pubToken",e)},isLogin(){let e=getApp().globalData.s.state;return!_(e.pubToken)&&e.pubUser.uid},isNoCompletedInfo(){let e=getApp().globalData.s.state;return!_(e.pubToken)&&e.pubUser.uid&&e.userStep==1},requestSign(e,t,i,s,n=!1){let a=getApp().globalData.desCodeStatus?_(getApp().globalData.desCodeVal)?0:1:0;return P.request(e,t,i,s,n,1,a)},request(e,t,i,s,n=!1){return new Promise((a,o)=>{var l,c,u;let d=!1;if(i)if(i=="refresh")d=!0;else{let L={mask:!0};typeof i=="string"&&(L.title=i),uni.showLoading(L)}let h=!1;try{h=getApp().globalData.s.state.pubToken}catch(L){E("error","at common/api.js:44","request token catch "+JSON.stringify(L))}_((l=getApp().globalData)==null?void 0:l.ua)&&(gi(7,(c=getApp().globalData)==null?void 0:c.ua,typeof((u=getApp().globalData)==null?void 0:u.ua),t,e,h),getApp().initUaInfo());let f=getApp().globalData.ua,g,I=Po(t),S={"content-type":"application/json"},T=getApp().globalData.apiHost,D;h&&getApp().globalData.uid!==0?(S.Authorization=`Bearer ${h}`,D=Pn(getApp().globalData.uid)):D=Pn(0),S.ua=Mo(f,D),g=getApp().globalData.s.state.AES.encrypt(D,JSON.stringify(I)),uni.request({url:T+e,method:"POST",header:S,data:g,dataType:"json",timeout:1e4,complete(L){if(i&&uni.hideLoading(),E("log","at common/api.js:78",`API - ${e} \xB7\xB7\xB7\xB7\xB7 ${JSON.stringify(t)} statusCode=${L==null?void 0:L.statusCode}`),L.header&&L.header["x-report-log"]&&gi(L.header["x-report-log"],S.ua,f,g,e,h),L.statusCode==200){let H=L.data,y=getApp().globalData.s.state.AES.decrypt(D,H);if(y=q(y),!y){s&&o(y),gi(1,S.ua,f,g,e,h);return}if(y.data&&typeof y.data.callback=="object"&&(P.handleCallback(y.data.callback),n))return De;if(y.ok===99)return getApp().loginOut(),De;if(y.ok==-98)return No(y.data),s&&o(y),De;if(_(y.msg)||We(y.msg),y.ok>0){a(y);return}s&&o(y)}else{if(L.statusCode==401)return getApp().loginOut(),De;if(d&&uni.stopPullDownRefresh(),s)o(L);else return De}},fail(L){}})})},handleCallback(e){switch(e.func_name){case"alert":Do(e.func_data);break;case"open":Lo(e.func_data);break;case"vip_alert":Te("/pages/vip/vip-dialog",null,"vipDialogData",e.func_data);break;case"recharge_alert":let t={actionType:e.func_data.action_type,diffCoin:e.func_data.diff_coin||0};t.order_source=typeof e.func_data.order_source=="undefined"?0:e.func_data.order_source,t.click_type=typeof e.func_data.click_type=="undefined"?0:e.func_data.click_type,Te("/pages/coin/coin-dialog",t,"coinDialogData",e.func_data);break;case"close":Fi();break;case"banned_alert":let i=e.func_data.exp_time;if(parseInt(new Date().getTime()/1e3)>i)return;break;case"reconnect_mqtt":getApp().socketReconnect(Yr.API_CALL_BACK,e.func_data);break;case"reload_route":getApp().handleSecret(e.func_data,$r.CALLBACK,{});break;case"event":Fo(e.func_data);break;case"api":Oo(e.func_data);break;case"sensitive_alert":Te("/pagesDialog/sensitive-check",null,"sensitiveData",e.func_data),uni.hideKeyboard();break;case"free_coins":Te("/pagesDialog/coins-free",{coin:e.func_data.free_coins},"coinsFree",{},{});break}},accessLog(e,t){this.request("/other/access-log",{api_name:e,content:at(t)})},accessLogExtra(e,t,i){let s=`${at(t)} ${at(i)}`;this.request("/other/access-log",{api_name:e,content:s})},accessLogApi(e,t,i,s){let n=`url:${t} p:${JSON.stringify(i)} res ${at(s)}`;P.accessLog(e,n)}};function Do(e){let t=e.enter_func,i=e.cancel_title,s=e.enter_title,n=e.cancel_func,a=!_(i);uni.hideKeyboard(),uni.showModal({title:e.title,content:e.msg,showCancel:a,cancelText:a?i:p("cancel"),confirmText:s||p("ok"),complete(o){o.confirm?_(t)||P.handleCallback(t):o.cancel&&(_(n)||P.handleCallback(n))}})}function Lo(e){let t=e.page_name,i=e.data;t=="inside_web"?Nn(i.route,!0):t=="safari"?Nn(i.route,!1):t=="web"?ne(i.route):t=="native"&&Ro(i.route)}function Fo(e){let t=e.event_key;if(_(t))return;let i=e.data;_(i)?uni.$emit(t):uni.$emit(t,i)}function Oo(e){if(e.type==1){let i={user_info:{is_rest:0}};P.request("/user/update-info",i,!0).then(()=>{getApp().pubUser.is_rest=0,Ue(p("tips"),p("anchorTurnedOffRest"),"",p("gotIt"))})}}function Ro(e){return new Function("return "+e)()}function No(e){Kr().indexOf("/pagesDialog/stop_taking")==-1&&(getApp().globalData.appStopTaking=!0,getApp().socketDisconnect(),Te("/pagesDialog/stop_taking",{},"stopTakingData",e))}function Po(e){try{_(e)&&(e={}),e.times=new Date().getTime();let t=Object.keys(e).sort(),i={};for(let n=0,a=t.length;n<a;n++)i[t[n]]=e[t[n]];let s=hs(i).substr(1);return i.sign=Ai.md5(`${Ai.md5(s)}${getApp().globalData.apiSignValue}`),i}catch(t){return e}}function hs(e,t){if(e==null||typeof e=="number"&&isNaN(e))return"";try{let i="",s=typeof e;if(s=="string"||s=="number")i+="&"+t+"="+jr(e);else if(s=="boolean")i+="&"+t+"="+(e?1:0);else for(let n in e){let a=t==null?n:t+Bo(n);i+=hs(e[n],a)}return i}catch(i){return""}}function Bo(e){return`${encodeURIComponent("[")}${e}${encodeURIComponent("]")}`}function gi(e,t,i,s,n,a){let o={type:e,ua:t,origin_ua:i,params:s,api:n,token:a},l=!1;try{l=getApp().globalData.s.state.pubToken}catch(u){E("error","at common/api.js:314","request token catch "+JSON.stringify(u))}let c={"content-type":"application/json",ua:getApp().globalData.ua};l&&(c.Authorization=`Bearer ${l}`),E("error","at common/api.js:322","-----> api sign enc fail ",o),uni.request({url:`${getApp().globalData.apiHost}/log/report`,method:"POST",header:c,data:o,dataType:"json",timeout:1e4})}function Vi(e){getApp().globalData.translateAuto!=e&&(e&&!Le("translate_auto_open_first")&&(uni.showModal({title:p("tips"),content:p("msg.translateAutoOpenMsgTips"),showCancel:!1,confirmText:p("gotIt")}),ke("translate_auto_open_first",1)),ke("translate_auto_close",e?0:1),getApp().globalData.translateAuto=e,uni.$emit("event_translate_auto_change",e),P.request("/user/sync-permission",{auto_translate:e?1:0}))}function fs(e){return getApp().globalData.translateAuto?getApp().globalData.translateKey!=e:!1}function Yt(){uni.showModal({title:p("tips"),content:p("msg.translateAutoCloseTips"),showCancel:!0,cancelText:p("cancel"),confirmText:p("turnOff"),success(e){e.confirm&&Vi(!1)}})}function p(...e){return getApp().globalData.s.state.pubI18n(...e)}var v=(e,t)=>{let i=e.__vccOpts||e;for(let[s,n]of t)i[s]=n;return i};var Z=re(te()),Uo={"l-img":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"place-img":{"":{position:"absolute",top:0,left:0}},"text-place":{"":{color:"#999999",position:"absolute",bottom:0,textAlign:"center"}}},Wo={name:"LImg",emits:["click","onError","onLoad"],props:{src:{type:String,default:""},mode:{type:String,default:"aspectFill"},w:{type:String,default:"0"},h:{type:String,default:"0"},radius:{type:String,default:"0"},lazyLoad:{type:Boolean,default:!1},fade:{type:Boolean,default:!0},placeType:{type:[String,Number],default:0},placeW:{type:String,default:""},placeFontSize:{type:[String,Boolean],default:""},placeBottom:{type:String,default:""},border:{type:String,default:""},otherStyle:{type:Object,default(){return{}}},click:{type:Boolean,default:!0},isGif:{type:Boolean,default:!1},needStyle:{type:[String,Number],default:0},useCache:{type:Boolean,default:!1},fitWH:{type:String,default:""},isStatic:{type:Number,default:0},lImgStyle:{type:Object,default(){return{}}}},data(){return{errorCount:1,path:"",refresh:!0,darkDir:"",isLoad:!1,fitStr:""}},watch:{src(){this.isLoad=!1,this.path=this.parse()}},computed:{placeSrc(){return this.placeType==1||this.placeType==2?"/static/img_load_cupid.png":""},placeViewStyle(){let e={width:this.placeW,height:this.placeW,position:"relative"};return this.placeBottom&&(e.marginBottom=this.placeBottom),e},placeFontSizeVal(){return this.placeFontSize===!1?"":this.placeFontSize?this.placeFontSize:this.placeType==2?"24rpx":"16rpx"},borderStyle(){if(this.border=="")return{};let e={},t=this.border.split(" ");return e.borderWidth=t[0],e.borderStyle=t[1],e.borderColor=t[2],e},viewStyle(){let e={width:this.w,minWidth:this.w,height:this.h,minHeight:this.h};return this.setRadius(e)},imgStyle(){let e={width:this.w,height:this.h};return e=Object.assign(e,this.otherStyle),this.setRadius(e)},ossPathOriginal(){return this.isGif?getApp().globalData.ossPath:getApp().globalData.ossPicPath}},methods:{$str:p,clickImg(e){this.click&&this.$emit("click",e)},setRadius(e){let t=this.radius.split(" ");return t.length<=1?e.borderRadius=this.radius:(e.borderTopLeftRadius=t[0],e.borderTopRightRadius=t[1],e.borderBottomRightRadius=t[2],e.borderBottomLeftRadius=t[3]),e},onLoadError(){if(this.path){if(this.path.startsWith("http")){if(this.errorCount>2){this.isError=!0,this.$emit("onError");return}this.errorCount+=1,this.refresh=!1,setTimeout(()=>{this.refresh=!0},500);return}this.path=this.ossPathOriginal+this.darkDir+this.src,es(this.darkDir+this.src)}},onLoad(){this.isLoad=!0,this.$emit("onLoad")},parseSrcUrl(){return this.fitStr+this.darkDir+this.src},parse(){var e;if(this.isStatic)return this.src;let t;if(t=0,this.src.startsWith("/static"))return this.src;if((e=this.src)!=null&&e.startsWith("co/")){let i=this.src.slice(3),s=getApp().getFilePath(i);if(!_(s))return Ge(s)}return this.useCache||t&&Y.isAndroid?this.isGif?rt(this.parseSrcUrl()):Ni(this.parseSrcUrl()):this.src.startsWith("file://")?this.src:this.src.startsWith("/var/mobile/")?"file://"+this.src:this.src.startsWith("/storage/")?this.src:this.ossPathOriginal+this.parseSrcUrl()}},created(){this.darkDir="",this.fitWH&&this.src.indexOf("fit-in")==-1&&(this.fitStr="fit-in/"+this.fitWH+"/"),this.path=this.parse()}};function Ho(e,t,i,s,n,a){return(0,Z.openBlock)(),(0,Z.createElementBlock)("view",{class:"l-img",onClick:t[2]||(t[2]=(...o)=>a.clickImg&&a.clickImg(...o)),style:(0,Z.normalizeStyle)([a.viewStyle,a.borderStyle,i.lImgStyle]),renderWhole:!0},[(0,Z.createElementVNode)("view",{class:"l-img",style:(0,Z.normalizeStyle)([{position:"relative"},a.viewStyle])},[i.placeType&&!n.isLoad?((0,Z.openBlock)(),(0,Z.createElementBlock)("view",{key:0,style:(0,Z.normalizeStyle)(a.placeViewStyle)},[(0,Z.createElementVNode)("u-image",{src:a.placeSrc,style:(0,Z.normalizeStyle)({width:i.placeW,height:i.placeW})},null,12,["src"])],4)):(0,Z.createCommentVNode)("",!0),n.refresh?((0,Z.openBlock)(),(0,Z.createElementBlock)("u-image",{key:1,onError:t[0]||(t[0]=(...o)=>a.onLoadError&&a.onLoadError(...o)),onLoad:t[1]||(t[1]=(...o)=>a.onLoad&&a.onLoad(...o)),src:n.path,mode:i.mode,lazyLoad:i.lazyLoad,fadeShow:i.fade,style:(0,Z.normalizeStyle)([a.imgStyle,a.borderStyle]),class:"place-img"},null,44,["src","mode","lazyLoad","fadeShow"])):(0,Z.createCommentVNode)("",!0)],4)],4)}var R=v(Wo,[["render",Ho],["styles",[Uo]]]);var r=re(te());var he=re(te());var Vo=e=>e!==null&&typeof e=="object",jo=["{","}"],zi=class{constructor(){this._caches=Object.create(null)}interpolate(t,i,s=jo){if(!i)return[t];let n=this._caches[t];return n||(n=$o(t,s),this._caches[t]=n),Yo(n,i)}},Go=/^(?:\d)+/,zo=/^(?:\w)+/;function $o(e,[t,i]){let s=[],n=0,a="";for(;n<e.length;){let o=e[n++];if(o===t){a&&s.push({type:"text",value:a}),a="";let l="";for(o=e[n++];o!==void 0&&o!==i;)l+=o,o=e[n++];let c=o===i,u=Go.test(l)?"list":c&&zo.test(l)?"named":"unknown";s.push({value:l,type:u})}else a+=o}return a&&s.push({type:"text",value:a}),s}function Yo(e,t){let i=[],s=0,n=Array.isArray(t)?"list":Vo(t)?"named":"unknown";if(n==="unknown")return i;for(;s<e.length;){let a=e[s];switch(a.type){case"text":i.push(a.value);break;case"list":i.push(t[parseInt(a.value,10)]);break;case"named":n==="named"&&i.push(t[a.value]);break}s++}return i}var ji="zh-Hans",ms="zh-Hant",lt="en",Jo="fr",Ko="es",qo=Object.prototype.hasOwnProperty,gs=(e,t)=>qo.call(e,t),Xo=new zi;function Zo(e,t){return!!t.find(i=>e.indexOf(i)!==-1)}function Qo(e,t){return t.find(i=>e.indexOf(i)===0)}function _s(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if(e=e.toLowerCase(),e==="chinese")return ji;if(e.indexOf("zh")===0)return e.indexOf("-hans")>-1?ji:e.indexOf("-hant")>-1||Zo(e,["-tw","-hk","-mo","-cht"])?ms:ji;let i=[lt,Jo,Ko];t&&Object.keys(t).length>0&&(i=Object.keys(t));let s=Qo(e,i);if(s)return s}var $i=class{constructor({locale:t,fallbackLocale:i,messages:s,watcher:n,formater:a}){this.locale=lt,this.fallbackLocale=lt,this.message={},this.messages={},this.watchers=[],i&&(this.fallbackLocale=i),this.formater=a||Xo,this.messages=s||{},this.setLocale(t||lt),n&&this.watchLocale(n)}setLocale(t){let i=this.locale;this.locale=_s(t,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],i!==this.locale&&this.watchers.forEach(s=>{s(this.locale,i)})}getLocale(){return this.locale}watchLocale(t){let i=this.watchers.push(t)-1;return()=>{this.watchers.splice(i,1)}}add(t,i,s=!0){let n=this.messages[t];n?s?Object.assign(n,i):Object.keys(i).forEach(a=>{gs(n,a)||(n[a]=i[a])}):this.messages[t]=i}f(t,i,s){return this.formater.interpolate(t,i,s).join("")}t(t,i,s){let n=this.message;return typeof i=="string"?(i=_s(i,this.messages),i&&(n=this.messages[i])):s=i,gs(n,t)?this.formater.interpolate(n[t],s).join(""):(console.warn(`Cannot translate the value of keypath ${t}. Use the value of keypath as default.`),t)}};function el(e,t){e.$watchLocale?e.$watchLocale(i=>{t.setLocale(i)}):e.$watch(()=>e.$locale,i=>{t.setLocale(i)})}function tl(){return typeof uni!="undefined"&&uni.getLocale?uni.getLocale():typeof global!="undefined"&&global.getLocale?global.getLocale():lt}function il(e,t={},i,s){if(typeof e!="string"){let o=[t,e];e=o[0],t=o[1]}typeof e!="string"&&(e=tl()),typeof i!="string"&&(i=typeof __uniConfig!="undefined"&&__uniConfig.fallbackLocale||lt);let n=new $i({locale:e,fallbackLocale:i,messages:t,watcher:s}),a=(o,l)=>{if(typeof getApp!="function")a=function(c,u){return n.t(c,u)};else{let c=!1;a=function(u,d){let h=getApp().$vm;return h&&(h.$locale,c||(c=!0,el(h,n))),n.t(u,d)}}return a(o,l)};return{i18n:n,f(o,l,c){return n.f(o,l,c)},t(o,l){return a(o,l)},add(o,l,c=!0){return n.add(o,l,c)},watch(o){return n.watchLocale(o)},getLocale(){return n.getLocale()},setLocale(o){return n.setLocale(o)}}}var nl={"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},sl={"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"Loading...","uni-load-more.contentnomore":"No more data"},al={"uni-load-more.contentdown":"\u4E0A\u62C9\u986F\u793A\u66F4\u591A","uni-load-more.contentrefresh":"\u6B63\u5728\u52A0\u8F09...","uni-load-more.contentnomore":"\u6C92\u6709\u66F4\u591A\u6578\u64DA\u4E86"},rl={"uni-load-more.contentdown":"Tire hacia arriba para mostrar m\xE1s","uni-load-more.contentrefresh":"cargando...","uni-load-more.contentnomore":"No m\xE1s datos"},ol={"uni-load-more.contentdown":"\u0627\u0633\u062D\u0628 \u0644\u0623\u0639\u0644\u0649 \u0644\u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u0645\u0632\u064A\u062F","uni-load-more.contentrefresh":"\u062C\u0627\u0631 \u0627\u0644\u062A\u062D\u0645\u064A\u0644...","uni-load-more.contentnomore":"\u0644\u0627 \u0645\u0632\u064A\u062F \u0645\u0646 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"},ll={"uni-load-more.contentdown":"K\xE9o l\xEAn \u0111\u1EC3 hi\u1EC3n th\u1ECB th\xEAm","uni-load-more.contentrefresh":"\u0111ang t\u1EA3i...","uni-load-more.contentnomore":"Kh\xF4ng c\xF2n d\u1EEF li\u1EC7u"},cl={en:nl,"zh-Hans":sl,"zh-Hant":al,es:rl,ar:ol,vi:ll},ul={"uni-load-more":{"":{flexDirection:"row",height:40,alignItems:"center",justifyContent:"center"}},"uni-load-more__text":{"":{fontSize:14,marginLeft:8}},"uni-load-more__img":{"":{width:24,height:24}},"uni-load-more__img--nvue":{"":{color:"#666666"}},"uni-load-more__img--android":{"":{width:24,height:24,transform:"rotate(0deg)"}},"uni-load-more__img--ios":{"":{width:24,height:24,transform:"rotate(0deg)"}}},ys;setTimeout(()=>{ys=uni.getSystemInfoSync().platform},16);var{t:Gi}=il(cl),dl={name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default(){return{contentdown:"",contentrefresh:"",contentnomore:""}}},showText:{type:Boolean,default:!1}},data(){return{webviewHide:!1,platform:ys,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="}},computed:{iconSnowWidth(){return(Math.floor(this.iconSize/24)||1)*2},contentdownText(){return this.contentText.contentdown||Gi("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||Gi("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||Gi("uni-load-more.contentnomore")}},mounted(){var e=getCurrentPages(),t=e[e.length-1],i=t.$getAppWebview();i.addEventListener("hide",()=>{this.webviewHide=!0}),i.addEventListener("show",()=>{this.webviewHide=!1})},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}};function pl(e,t,i,s,n,a){return(0,he.openBlock)(),(0,he.createElementBlock)("view",{class:"uni-load-more",onClick:t[0]||(t[0]=(...o)=>a.onClick&&a.onClick(...o)),renderWhole:!0},[!n.webviewHide&&i.status==="loading"&&i.showIcon?((0,he.openBlock)(),(0,he.createElementBlock)("loading-indicator",{key:0,style:(0,he.normalizeStyle)({color:i.color,width:i.iconSize+"px",height:i.iconSize+"px"}),animating:!0,class:"uni-load-more__img uni-load-more__img--nvue"},null,4)):(0,he.createCommentVNode)("",!0),i.showText?((0,he.openBlock)(),(0,he.createElementBlock)("u-text",{key:1,class:"uni-load-more__text",style:(0,he.normalizeStyle)({color:i.color})},(0,he.toDisplayString)(i.status==="more"?a.contentdownText:i.status==="loading"?a.contentrefreshText:a.contentnomoreText),5)):(0,he.createCommentVNode)("",!0)])}var Yi=v(dl,[["render",pl],["styles",[ul]]]);var b=re(te());var B=re(te());var hl=Ie("animation"),Jt=class{constructor(t,i){this.options=t,this.animation=uni.createAnimation(t),this.currentStepAnimates={},this.next=0,this.$=i}_nvuePushAnimates(t,i){let s=this.currentStepAnimates[this.next],n={};if(s?n=s:n={styles:{},config:{}},xs.includes(t)){n.styles.transform||(n.styles.transform="");let a="";t==="rotate"&&(a="deg"),n.styles.transform+=`${t}(${i+a}) `}else n.styles[t]=`${i}`;this.currentStepAnimates[this.next]=n}_animateRun(t={},i={}){let s=this.$.$refs.ani.ref;if(s)return new Promise((n,a)=>{hl.transition(s,xt({styles:t},i),o=>{n()})})}_nvueNextAnimate(t,i=0,s){let n=t[i];if(n){let{styles:a,config:o}=n;this._animateRun(a,o).then(()=>{i+=1,this._nvueNextAnimate(t,i,s)})}else this.currentStepAnimates={},typeof s=="function"&&s(),this.isEnd=!0}step(t={}){return this.currentStepAnimates[this.next].config=Object.assign({},this.options,t),this.currentStepAnimates[this.next].styles.transformOrigin=this.currentStepAnimates[this.next].config.transformOrigin,this.next++,this}run(t){this.isEnd=!1,this.$.$refs.ani&&this.$.$refs.ani.ref&&(this._nvueNextAnimate(this.currentStepAnimates,0,t),this.next=0)}},xs=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"],fl=["opacity","backgroundColor"],ml=["width","height","left","right","top","bottom"];xs.concat(fl,ml).forEach(e=>{Jt.prototype[e]=function(...t){return this._nvuePushAnimates(e,t),this}});function bs(e,t){if(t)return clearTimeout(t.timer),new Jt(e,t)}var gl={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default(){return"fade"}},duration:{type:Number,default:300},styles:{type:Object,default(){return{}}},customClass:{type:String,default:""}},data(){return{isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}},watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e=bn(xt({},this.styles),{"transition-duration":this.duration/1e3+"s"}),t="";for(let i in e){let s=this.toLine(i);t+=s+":"+e[i]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=bs(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let i in e)try{typeof e[i]=="object"?this.animation[i](...e[i]):this.animation[i](e[i])}catch(s){E("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:139",`\u65B9\u6CD5 ${i} \u4E0D\u5B58\u5728`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);typeof e!="undefined"&&(this.opacity=e),this.transform=t,this.$nextTick(()=>{this.timer=setTimeout(()=>{this.animation=bs(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})},20)})},close(e){this.animation&&this.tranfromInit(!0).step().run(()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:t,transform:i}=this.styleInit(!1);this.opacity=t||1,this.transform=i,this.$emit("change",{detail:this.isShow})})},styleInit(e){let t={transform:""},i=(s,n)=>{n==="fade"?t.opacity=this.animationType(s)[n]:t.transform+=this.animationType(s)[n]+" "};return typeof this.modeClass=="string"?i(e,this.modeClass):this.modeClass.forEach(s=>{i(e,s)}),t},tranfromInit(e){let t=(i,s)=>{let n=null;s==="fade"?n=i?0:1:(n=i?"-100%":"0",s==="zoom-in"&&(n=i?.8:1),s==="zoom-out"&&(n=i?1.2:1),s==="slide-right"&&(n=i?"100%":"0"),s==="slide-bottom"&&(n=i?"100%":"0")),this.animation[this.animationMode()[s]](n)};return typeof this.modeClass=="string"?t(e,this.modeClass):this.modeClass.forEach(i=>{t(e,i)}),this.animation},animationType(e){return{fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}},animationMode(){return{fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}},toLine(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}}};function _l(e,t,i,s,n,a){return n.isShow?((0,B.openBlock)(),(0,B.createElementBlock)("view",{key:0,ref:"ani",animation:n.animationData,class:(0,B.normalizeClass)(i.customClass),style:(0,B.normalizeStyle)(a.transformStyles),onClick:t[0]||(t[0]=(...o)=>a.onClick&&a.onClick(...o)),renderWhole:!0},[(0,B.renderSlot)(e.$slots,"default")],14,["animation"])):(0,B.createCommentVNode)("",!0)}var Ji=v(gl,[["render",_l]]),yl={"uni-popup":{"":{position:"fixed"},".top":{top:0},".left":{top:0},".right":{top:0}},"uni-popup__wrapper":{".uni-popup ":{position:"relative"},".uni-popup .left":{paddingTop:0,flex:1},".uni-popup .right":{paddingTop:0,flex:1}},"fixforpc-top":{"":{top:0}}},bl={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},maskClick:{type:Boolean,default:!0},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBgColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{maskClass(){return{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:this.maskBgColor}},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return this.backgroundColor===""||this.backgroundColor==="none"?"transparent":this.backgroundColor}},mounted(){(()=>{let{windowWidth:t,windowHeight:i,windowTop:s,safeAreaInsets:n}=uni.getSystemInfoSync();this.popupWidth=t,this.popupHeight=i+s,this.safeArea?this.safeAreaInsets=n:this.safeAreaInsets=0})()},created(){this.mkclick=this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1},methods:{closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){this.clearPropagation=!0},open(e,t=!0){if(e&&["top","center","bottom","left","right","message","dialog","share"].indexOf(e)!==-1||(e=this.type),this.maskShow=t,!this.config[e]){E("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:218","\u7F3A\u5C11\u7C7B\u578B\uFF1A",e);return}this[this.config[e]](),this.$emit("change",{show:!0,type:e})},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.showPopup=!1},300)},touchstart(){this.clearPropagation=!1},onTap(){if(this.clearPropagation){this.clearPropagation=!1;return}this.$emit("maskClick"),this.mkclick&&this.close()},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0,this.$nextTick(()=>{this.messageChild&&this.type==="message"&&this.messageChild.timerClose()}))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets&&this.safeAreaInsets.bottom||0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},!e&&(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)}}};function xl(e,t,i,s,n,a){let o=A((0,B.resolveDynamicComponent)("uni-transition"),Ji);return n.showPopup?((0,B.openBlock)(),(0,B.createElementBlock)("view",{key:0,class:(0,B.normalizeClass)(["uni-popup",[n.popupstyle,a.isDesktop?"fixforpc-z-index":""]]),onTouchmove:t[2]||(t[2]=(0,B.withModifiers)((...l)=>a.clear&&a.clear(...l),["stop","prevent"])),renderWhole:!0},[(0,B.createElementVNode)("view",{onTouchstart:t[1]||(t[1]=(...l)=>a.touchstart&&a.touchstart(...l))},[n.maskShow?((0,B.openBlock)(),(0,B.createBlock)(o,{key:"1",name:"mask","mode-class":"fade",styles:a.maskClass,duration:n.duration,show:n.showTrans,onClick:a.onTap},null,8,["styles","duration","show","onClick"])):(0,B.createCommentVNode)("",!0),(0,B.createVNode)(o,{key:"2","mode-class":n.ani,name:"content",styles:n.transClass,duration:n.duration,show:n.showTrans,onClick:a.onTap},{default:(0,B.withCtx)(()=>[(0,B.createElementVNode)("view",{class:(0,B.normalizeClass)(["uni-popup__wrapper",[n.popupstyle]]),style:(0,B.normalizeStyle)({backgroundColor:a.bg}),onClick:t[0]||(t[0]=(...l)=>a.clear&&a.clear(...l))},[(0,B.renderSlot)(e.$slots,"default")],6)]),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],34)):(0,B.createCommentVNode)("",!0)}var Kt=v(bl,[["render",xl],["styles",[yl]]]);var Ye=re(te());var wl={id:"2852637",name:"uniui\u56FE\u6807\u5E93",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]},Sl="/static/uniicons.ttf",Cl={"uni-icons":{"":{fontFamily:"uniicons",textDecoration:"none",textAlign:"center"}}},Al=weex.requireModule("dom");Al.addRule("fontFace",{fontFamily:"uniicons",src:"url('"+Sl+"')"});var Tl={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data(){return{icons:wl.glyphs}},computed:{unicode(){let e=this.icons.find(t=>t.font_class===this.type);return e?unescape(`%u${e.unicode}`):""}},methods:{_onClick(e){this.$emit("click",e)}}};function kl(e,t,i,s,n,a){return(0,Ye.openBlock)(),(0,Ye.createElementBlock)("u-text",{style:(0,Ye.normalizeStyle)({color:i.color,"font-size":i.size}),class:"uni-icons",onClick:t[0]||(t[0]=(...o)=>a._onClick&&a._onClick(...o))},(0,Ye.toDisplayString)(a.unicode),5)}var ae=v(Tl,[["render",kl],["styles",[Cl]]]);var ct=re(te());var vl={line:{"":{height:"2rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%"}}},Il={props:{marginLeft:{type:String,default:"0rpx"}},computed:{bgColor(){return"rgba(0, 0, 0, 0.1)"}}};function El(e,t,i,s,n,a){return(0,ct.openBlock)(),(0,ct.createElementBlock)("view",{style:(0,ct.normalizeStyle)({background:a.bgColor,marginLeft:i.marginLeft}),class:"line",renderWhole:!0},null,4)}var He=v(Il,[["render",El],["styles",[vl]]]);function Ml(e,t,i,s,n){return new Promise(a=>{getApp().globalData.pluginUpload.singleUpS3({filePath:e,isBase64:t,coverFilePath:i,coverIsBase64:s,ossInfo:n},o=>{a(o)})})}var ws="/upload/handle";function qt(e,t,i,s,n=null,a=null){return new Promise((o,l)=>ee(this,null,function*(){let c=e.replace("file://",""),u={flag:t,type:i};n&&(u.width=n.width,u.height=n.height),a&&(u=Object.assign(u,a));try{if(s){let h=yield Wi(c),f="";h&&(f=h.digest),_(f)||(u.md5=f)}let d=yield P.request(ws,u,!1,!0);if(d.ok==1&&d.data.is_upload)E("log","at common/api-upload.js:74","upload media is_upload true"),o({path:d.data.dir,smallPath:d.data.small_url,uploadId:d.data.upload_id||0});else{let h=d.data.upload_id,f=yield As(c,"",d.data);h&&Cs([h]),f.uploadId=h||0,o(f)}}catch(d){let h=Kn(d);E("error","at common/api-upload.js:89","upload media fail "+h),Ts(t,u,h),l(d)}}))}function Ss(e,t,i,s,n,a=!0,o=null,l=!0){return ee(this,null,function*(){let c={};try{t.startsWith("_doc")&&(t=plus.io.convertLocalFileSystemURL(t));let u={},d=Y.isAndroid?t:`file://${t}`,h=t,f=i;if(c={flag:e,type:Fe.VIDEO},o&&(c.width=o.width,c.height=o.height),l){let S=yield Wi(h),T="";S&&(T=S.digest),_(T)||(c.md5=T)}let g=yield P.request(ws,c,!1,!0);E("log","at common/api-upload.js:119","upload video params response",g);let I;if(g.ok==1&&g.data.is_upload)return{url:g.data.dir,coverUrl:g.data.cover_url,smallUrl:g.data.small_url,uploadId:g.data.upload_id||0};{g.data&&(I=g.data.upload_id);let S=yield Hi(d);if(a&&S?S.size>8*1024*1024:!1){let D=yield us(d,"medium");h=plus.io.convertLocalFileSystemURL(D.tempFilePath),f=yield Pi(h,s,n)}return h=h.replace("file://",""),f=f.replace("file://",""),u={url:g.data.dir.path,coverUrl:g.data.dir.cover_path,smallUrl:g.data.dir.small_url,uploadId:g.data.upload_id||0},yield As(h,f,g.data),I&&Cs([I]),u}}catch(u){throw E("error","at common/api-upload.js:151","upload video error",u),Ts(e,c,u),u}})}function Cs(e){_(e)||P.request("/upload/success",{id:e},!1,!0).then(t=>{E("error","at common/api-upload.js:163","-----> api upload/success response",t)},t=>{E("error","at common/api-upload.js:165","-----> api upload/success response error",t)})}function As(e,t,i,s=0,n=0){return new Promise((a,o)=>{Ml(e,s,t,n,i).then(l=>{E("log","at common/api-upload.js:172","upload plugin s3 result",l),(typeof l=="object"?l.success:l)?a({path:i.dir.path,smallPath:i.dir.small_url}):o(`_upModuleS3 ${JSON.stringify(l)}`)})})}function Ts(e,t,i){let s=e=="auth"?"upload_auth":"upload",n=at(t);P.accessLogExtra(s,`${e} ${n}`,i)}var ks={INDEX:1e3,GIFT_CHAT_PRI:24,GIFT_CALLING:25,CALLING:26,VIDEO_CALL:28,AUDIO_CALL:29,VIDEO_CALL_ANSWER:31,AUDIO_CALL_ANSWER:32,CALLING_NO_COIN_MSG:33,CALLING_NO_COIN_POPUP:34,CALL_END_NO_COIN_POPUP:35};function ut(e){let t=Number(e);if(isNaN(t)){E("error","at common/user.js:42","\u5237\u65B0\u4F59\u989D\u5931\u8D25");return}Tt("pubUser.balance",t),E("error","at common/user.js:46",`\u5237\u65B0\u4F59\u989D ${t}`)}function vs(e,t=1,i=!0){return e=Number(e),!!(isNaN(e)||getApp().pubUser.balance-e*t>=0)}function Is(e,t=1,i=!0,s=!1,n=null,a){if(e=Number(e),isNaN(e))return 1;let o=getApp().pubUser.balance-e*t;if(o>=0)return 1;if(i){let c={from_type:a==U.M_CHAT_PRI?ks.GIFT_CHAT_PRI:ks.GIFT_CHAT_CLUB,from_id:n};Dl(Math.abs(o),0,0,0,c)}return 0}function Dl(e,t=0,i,s,n=null){let a={};a.order_source=typeof i=="undefined"?0:i,a.click_type=typeof s=="undefined"?0:s,a.fromType=t,a.diffCoin=e,Te(X.topUpDialog,a,"coinDialogData","")}function Ki(e,t,i){let s=t?p("unBlockUserTip"):p("blockUserTip"),n=p("sure");Ce(p("tips"),s,()=>{typeof i=="function"&&i(),Ll(t,e);let a=Le(`user_home_${e}`);a.user_info.is_black=!t,ke(`user_home_${e}`,a)},"",n,!0,p("cancel"))}function Ll(e,t,i){let s=e?"del":"add",n={target_uid:t},a="";s=="add"?a="/black/submit":a="/black/cancel",P.request(a,n).then(()=>{typeof i=="function"&&i()})}function et(){return getApp().globalData.s.state.pubUser.is_auth}function Es(e,t){let i=getApp().globalData.bannedInfos[e];if(_(i))return!1;if(t){if(Ui("appDialog/addDialogBan",i),Zn()=="/pagesDialog/banned")return;Ui("appDialog/executeBanWarningDialog")}return!0}function qi(e){if(et()){if(e.send_limit_level&&e.send_limit_level>0){let t={level:e.send_limit_level,sex:e.sex,from_type:4};return open("/pagesDialog/level-limit-def",t),!0}return e.send_alert_tips?(Ue(p("tips"),e.send_alert_tips,"",p("gotIt")),!0):!1}}function Ms(){let e=new Date,t=e.getFullYear(),i=e.getMonth()+1,s=e.getDate(),n=`${t}-${i}-${s}`;return ve("daily_auth_key")==n}var Fl={"level-center":{"":{alignItems:"center",flexDirection:"row"}},"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"column-center":{"":{flexDirection:"column",alignItems:"center"}},"action-wrap":{"":{borderRadius:"26rpx",marginTop:"12rpx",marginRight:"16rpx",marginBottom:0,marginLeft:"16rpx"}},"title-item":{".action-wrap ":{paddingTop:"28rpx",paddingRight:"28rpx",paddingBottom:"28rpx",paddingLeft:"28rpx",textAlign:"center"}},"action-item":{".action-wrap ":{height:"106rpx",paddingTop:0,paddingRight:"40rpx",paddingBottom:0,paddingLeft:"40rpx"}},title:{".action-wrap .action-item ":{marginLeft:"50rpx"}},"item-text":{".action-wrap .action-item ":{textAlign:"center",lineHeight:"106rpx"}},"paid-media-class":{"":{borderRadius:"8rpx",paddingTop:"10rpx",paddingRight:"16rpx",paddingBottom:"10rpx",paddingLeft:"16rpx",marginLeft:"20rpx",backgroundImage:"linear-gradient(to bottom right, #f2ae00, #ff008b)"}},"label-text":{".paid-media-class ":{color:"#ffffff",fontSize:"24rpx"}},"warn-photo":{"":{paddingTop:"32rpx",paddingRight:15,paddingBottom:"32rpx",paddingLeft:15}},"photo-item":{".warn-photo ":{position:"relative"}},"photo-desc":{".warn-photo .photo-item ":{marginTop:"8rpx",height:"28rpx",lineHeight:"28rpx",textAlign:"center",fontSize:"20rpx",color:"#ffffff"}},line:{"":{height:"2rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%",backgroundColor:"rgba(217,217,217,0.3)"}}},Ol={components:{MLine:He,UniIcons:ae,LImg:R},emits:["onClickActionItem","onChange","onMaskClick"],props:{title:{type:String,default:""},titleColor:{type:String,default:""},titleSize:{type:String,default:"28rpx"},actions:{type:[Array,Object],default:[]},iconSize:{type:String,default:"46rpx"},textSize:{type:String,default:"38rpx"},textColor:{type:String,default:""},cancelText:{type:String,default(){return p("cancel")}},cancelColor:{type:String,default:""},cancelSize:{type:String,default:"38rpx"},bgColor:{type:String,default:""},cancelBgColor:{type:String,default:""},textIconDis:{type:String,default:"50rpx"},titleLineH:{type:String,default:"24rpx"},maskBgColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},titleFw:{type:[String,Number],default:400},showWarnMedia:{type:Boolean,default:!1}},data(){return{warnList:[],isArray:Array.isArray(this.actions),warnPhotoW:0}},computed:{getLen(){return Array.isArray(this.actions)?this.actions.length:Object.keys(this.actions).length},getBottomDis(){return 10},viewBg(){return _(this.bgColor)?"#fff":this.bgColor},viewCancelBg(){return _(this.cancelBgColor)?"#fff":this.cancelBgColor},itemTextColor(){return _(this.textColor)?"#0A84FF":this.textColor},itemCancelColor(){return _(this.textColor)?"#0A84FF":this.cancelColor},getTitle(){return this.title},getTitleColor(){return this.showWarnMedia?"#E02020":this.titleColor},getTitleLineH(){return this.showWarnMedia?"34rpx":this.titleLineH},getTitleSize(){return this.showWarnMedia?"24rpx":this.titleSize},getTitleFw(){return this.showWarnMedia?et()?600:400:this.titleFw}},methods:{clickThis(e){e&&e.stopPropagation()},clickItem(e){this.$refs.popup.close(),this.$nextTick(()=>{let t=e!=-1?this.actions[e]:{key:"cancel"};this.$emit("onClickActionItem",t)})},onMaskClick(){this.$emit("onMaskClick")},onChange(e){this.$emit("onChange",e)},initWarnMedia(){this.warnPhotoW=(getApp().globalData.window.width-70-uni.upx2px(32))/5,this.warnList=[{url:"/static/pic/warn_1.png"},{url:"/static/pic/warn_2.png"},{url:"/static/pic/warn_3.png"},{url:"/static/pic/warn_4.png"},{url:"/static/pic/warn_5.png"}]},open(){this.$refs.popup.open()}},created(){this.showWarnMedia&&this.initWarnMedia()}};function Rl(e,t,i,s,n,a){let o=(0,b.resolveComponent)("m-line"),l=A((0,b.resolveDynamicComponent)("l-img"),R),c=A((0,b.resolveDynamicComponent)("uni-popup"),Kt);return(0,b.openBlock)(),(0,b.createBlock)(c,{onClick:(0,b.withModifiers)(a.clickThis,["stop"]),ref:"popup",type:"bottom",maskBgColor:i.maskBgColor,onChange:a.onChange,onMaskClick:a.onMaskClick,style:{"z-index":"99999"}},{default:(0,b.withCtx)(()=>[(0,b.createElementVNode)("view",{class:"action-wrap",style:(0,b.normalizeStyle)({backgroundColor:a.viewBg})},[a.getTitle?((0,b.openBlock)(),(0,b.createElementBlock)("view",{key:0},[(0,b.createElementVNode)("u-text",{class:"title-item",style:(0,b.normalizeStyle)({color:a.getTitleColor,fontSize:a.getTitleSize,lineHeight:a.getTitleLineH,fontWeight:a.getTitleFw})},(0,b.toDisplayString)(a.getTitle),5),(0,b.createVNode)(o)])):(0,b.createCommentVNode)("",!0),n.warnList.length>0?((0,b.openBlock)(),(0,b.createElementBlock)("view",{key:1},[(0,b.createElementVNode)("view",{class:"center-between warn-photo"},[((0,b.openBlock)(!0),(0,b.createElementBlock)(b.Fragment,null,(0,b.renderList)(n.warnList,(u,d)=>((0,b.openBlock)(),(0,b.createElementBlock)("view",{key:d,class:"photo-item column-center",style:{width:"120rpx",height:"120rpx"}},[(0,b.createVNode)(l,{src:u.url,w:"120rpx",h:"120rpx"},null,8,["src"]),(0,b.createElementVNode)("u-text",{class:"photo-desc"},(0,b.toDisplayString)(u.text),1)]))),128))]),(0,b.createVNode)(o)])):(0,b.createCommentVNode)("",!0),((0,b.openBlock)(!0),(0,b.createElementBlock)(b.Fragment,null,(0,b.renderList)(i.actions,(u,d,h)=>((0,b.openBlock)(),(0,b.createElementBlock)("view",{index:"a"+d},[u.icon?((0,b.openBlock)(),(0,b.createElementBlock)("view",{key:0,class:"action-item level-center",onClick:f=>a.clickItem(d)},[(0,b.createVNode)(l,{h:i.iconSize,src:u.icon,style:(0,b.normalizeStyle)({marginRight:i.textIconDis}),w:i.iconSize},null,8,["h","src","style","w"]),(0,b.createElementVNode)("u-text",{style:(0,b.normalizeStyle)({fontSize:i.textSize,color:u.titleColor||a.itemTextColor})},(0,b.toDisplayString)(u.title),5),u.label_class?((0,b.openBlock)(),(0,b.createElementBlock)("view",{key:0,class:(0,b.normalizeClass)([u.label_class])},[(0,b.createElementVNode)("u-text",{class:"label-text"},(0,b.toDisplayString)(u.label_text?u.label_text:""),1)],2)):(0,b.createCommentVNode)("",!0)],8,["onClick"])):((0,b.openBlock)(),(0,b.createElementBlock)("view",{key:1,class:"action-item",onClick:f=>a.clickItem(d)},[(0,b.createElementVNode)("u-text",{style:(0,b.normalizeStyle)({fontSize:i.textSize,color:u.titleColor||a.itemTextColor}),class:"item-text"},(0,b.toDisplayString)(u.title),5)],8,["onClick"])),n.isArray?((0,b.openBlock)(),(0,b.createElementBlock)("view",{key:2},[d<a.getLen-1?((0,b.openBlock)(),(0,b.createElementBlock)("view",{key:0,class:"line"})):(0,b.createCommentVNode)("",!0)])):((0,b.openBlock)(),(0,b.createElementBlock)("view",{key:3},[h<a.getLen-1?((0,b.openBlock)(),(0,b.createElementBlock)("view",{key:0,class:"line"})):(0,b.createCommentVNode)("",!0)]))],8,["index"]))),256))],4),(0,b.createElementVNode)("view",{class:"action-wrap action-bottom",style:(0,b.normalizeStyle)({marginBottom:`${a.getBottomDis}px`,backgroundColor:a.viewCancelBg})},[(0,b.createElementVNode)("view",{class:"action-item level-center",onClick:t[0]||(t[0]=u=>a.clickItem(-1)),style:{"justify-content":"center"}},[(0,b.createElementVNode)("u-text",{style:(0,b.normalizeStyle)({color:a.itemCancelColor,fontSize:i.cancelSize})},(0,b.toDisplayString)(i.cancelText),5)])],4)]),_:1},8,["onClick","maskBgColor","onChange","onMaskClick"])}var Xt=v(Ol,[["render",Rl],["styles",[Fl]]]);var dt=re(te());var Nl={name:"PageMeta",setup(e,{emit:t}){qn(i=>{t("resize",i)})},props:{backgroundTextStyle:{type:String,default:"dark",validator(e){return["dark","light"].indexOf(e)!==-1}},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created(){let e=getCurrentPages()[0];this.$pageVm=e.$vm||e,this._currentWebview=e.$getAppWebview(),this.enablePullDownRefresh&&this.setPullDownRefresh(this._currentWebview,!0),this.$watch("enablePullDownRefresh",t=>{this.setPullDownRefresh(this._currentWebview,t)}),this.$watch("backgroundTextStyle",()=>{this.setBackgroundTextStyle()}),this.$watch(()=>[this.rootFontSize,this.pageStyle],()=>{this.setPageMeta()}),this.$watch(()=>[this.backgroundColor,this.backgroundColorTop,this.backgroundColorBottom],()=>{this.setBackgroundColor()}),this.$watch(()=>[this.scrollTop,this.scrollDuration],()=>{this.pageScrollTo()})},beforeMount(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle()},mounted(){this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh(e,t){e.setStyle({pullToRefresh:{support:t,style:plus.os.name==="Android"?"circle":"default"}})},setPageMeta(){uni.setPageMeta({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle(){},setBackgroundColor(){},pageScrollTo(){let e=String(this.scrollTop);e.indexOf("rpx")!==-1&&(e=uni.upx2px(e.replace("rpx",""))),e=parseFloat(e),!isNaN(e)&&uni.pageScrollTo({scrollTop:e,duration:this.scrollDuration,success:()=>{}})}}};function Pl(e,t,i,s,n,a){return(0,dt.openBlock)(),(0,dt.createElementBlock)("view",{style:{display:"none"},renderWhole:!0},[(0,dt.renderSlot)(e.$slots,"default")])}var Ds=v(Nl,[["render",Pl]]);var k=re(te());var Ls={data(){return{pubUser:getApp().pubUser,pubAccount:getApp().pubAccount}},methods:{eventVuexWatch(e){E("error","at store/watch.mixin.js:10","event_vuex_watch change "+e),this[e]=getApp()[e],typeof this.onEventVuexWatch=="function"&&this.onEventVuexWatch(e)}},onLoad(){uni.$on("event_vuex_watch",this.eventVuexWatch)},onUnload(){uni.$off("event_vuex_watch",this.eventVuexWatch)}};function Bl(){return new Promise(e=>{let t=Le("g_gift");_(t)||getApp().globalData.giftVersion>parseInt(t.version)?P.request("/gift/config",{},!1,!0).then(i=>{let s={version:i.data.version,list:i.data.list};ke("g_gift",s),e(s.list)}).catch(()=>{e([])}):e(t.list)})}var Oe={MSG:1,CALL:2,HOME:3,GAME:4,CLUB:5,GRAB:6,MOMENT:8,LIVE:9},Ul={container:{"":{backgroundColor:"#FFFFFF",borderTopLeftRadius:"24rpx",borderTopRightRadius:"24rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"750rpx",paddingTop:"30rpx",paddingRight:0,paddingBottom:30,paddingLeft:0}},"header-wrap":{".container ":{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",height:"80rpx",paddingTop:0,paddingRight:"24rpx",paddingBottom:0,paddingLeft:"24rpx"}},"coin-wrap":{".container .header-wrap ":{display:"flex",flexDirection:"row",alignItems:"center"}},coin:{".container .header-wrap .coin-wrap ":{fontWeight:"500",fontSize:"24rpx",color:"#333333"}},"gift-list":{".container ":{display:"flex",alignItems:"center",flexDirection:"row",flexWrap:"wrap",paddingTop:0,paddingRight:"24rpx",paddingBottom:0,paddingLeft:"24rpx"}},"gift-item":{".container .gift-list ":{position:"relative",width:"158rpx",height:"200rpx",borderRadius:"16rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(0,0,0,0)",marginBottom:"20rpx",display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"},".container .gift-list .active":{borderColor:"#0091FF",backgroundColor:"rgba(0,145,255,0.05)"}},"gift-name":{".container .gift-list .gift-item ":{fontSize:"20rpx",color:"#333333",marginBottom:"12rpx"}},"gift-price":{".container .gift-list .gift-item ":{display:"flex",flexDirection:"row",alignItems:"center"}},price:{".container .gift-list .gift-item .gift-price ":{fontSize:"20rpx",marginRight:"2rpx",color:"rgba(51,51,51,0.7)"}},"send-wrap":{".container .gift-list .gift-item ":{width:"158rpx",height:"48rpx",backgroundColor:"#0091FF",display:"flex",alignItems:"center",justifyContent:"center",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:"16rpx",borderBottomLeftRadius:"16rpx"}},send:{".container .gift-list .gift-item .send-wrap ":{fontSize:"24rpx",color:"#FFFFFF"}}},Wl={emits:["onSendGift"],props:{maskBgColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},fromType:{type:[String,Number],default:1}},mixins:[Ls],data(){return{show:!1,scrollHeight:Math.round(300*getApp().globalData.window.scaleH),giftList:[],activeIndex:null,actionId:0}},methods:{clickTopUp(){ne(X.topUpDialog)},$str:p,clickSend(e){if(E("log","at components/gift-popup/gift-popup.vue:80","clickSend:",e),!e)return;if([Oe.MSG,Oe.CALL,Oe.GAME,Oe.CLUB].indexOf(parseInt(this.fromType))!=-1){e.count=1,this.$refs.popup.close(),this.$emit("onSendGift",e);return}let t={gift_id:e.gift_id,to_uid:this.actionId,from_type:this.fromType,number:1};P.request("/gift/send",t,!0,!0).then(i=>{this.$emit("onSendGift",e),ut(i.data.balance)},i=>{var s,n;if(((n=(s=i==null?void 0:i.data)==null?void 0:s.callback)==null?void 0:n.func_name)=="recharge_alert"){ne(X.topUpDialog);return}})},onChange(e){this.show=e.show},clickThis(e){e&&e.stopPropagation()},open(e){this.actionId=e,Bl().then(t=>{this.giftList=t}),this.$refs.popup.open()},clickCancel(){this.$refs.popup.close()},clickActive(e){this.activeIndex=e}},onLoad(){}};function Hl(e,t,i,s,n,a){let o=A((0,k.resolveDynamicComponent)("page-meta"),Ds),l=A((0,k.resolveDynamicComponent)("l-img"),R),c=A((0,k.resolveDynamicComponent)("uni-icons"),ae),u=A((0,k.resolveDynamicComponent)("uni-popup"),Kt);return(0,k.openBlock)(),(0,k.createElementBlock)(k.Fragment,null,[(0,k.createVNode)(o,{"page-style":"overflow:"+(n.show?"hidden":"visible")},null,8,["page-style"]),(0,k.createVNode)(u,{onClick:(0,k.withModifiers)(a.clickThis,["stop"]),ref:"popup",type:"bottom","mask-click":!0,maskBgColor:i.maskBgColor,onChange:a.onChange,style:{"z-index":"99999"}},{default:(0,k.withCtx)(()=>{var d;return[(0,k.createElementVNode)("view",{class:"container"},[(0,k.createElementVNode)("view",{class:"header-wrap"},[(0,k.createElementVNode)("u-text",{class:"header-title"},(0,k.toDisplayString)(a.$str("gift")),1),(0,k.createElementVNode)("view",{onClick:t[0]||(t[0]=(...h)=>a.clickTopUp&&a.clickTopUp(...h)),class:"coin-wrap"},[(0,k.createElementVNode)("u-text",{class:"coin"},(0,k.toDisplayString)(((d=e.pubUser)==null?void 0:d.balance)||0),1),(0,k.createVNode)(l,{src:"/static/pic/user-coin.png",w:"24rpx",h:"24rpx"}),(0,k.createVNode)(c,{type:"right",size:"30rpx",color:"#999999",style:{"margin-left":"8rpx"}})])]),(0,k.createElementVNode)("scroll-view",{scrollY:!0,showScrollbar:!1,style:(0,k.normalizeStyle)({height:`${n.scrollHeight}px`})},[(0,k.createElementVNode)("view",{class:"gift-list"},[((0,k.openBlock)(!0),(0,k.createElementBlock)(k.Fragment,null,(0,k.renderList)(n.giftList,(h,f)=>((0,k.openBlock)(),(0,k.createElementBlock)("view",{key:f,class:(0,k.normalizeClass)(["gift-item",{active:f==n.activeIndex}]),onClick:g=>a.clickActive(f),style:(0,k.normalizeStyle)({marginRight:f+1%4==0?"0":"16rpx"})},[(0,k.createVNode)(l,{src:h.icon,w:"100rpx",h:"100rpx",style:{"margin-bottom":"12rpx"}},null,8,["src"]),f!=n.activeIndex?((0,k.openBlock)(),(0,k.createElementBlock)("u-text",{key:0,class:"gift-name"},(0,k.toDisplayString)(h.title),1)):(0,k.createCommentVNode)("",!0),(0,k.createElementVNode)("view",{class:"gift-price"},[(0,k.createElementVNode)("u-text",{class:"price"},(0,k.toDisplayString)(h.price),1),(0,k.createVNode)(l,{src:"/static/pic/user-coin.png",w:"20rpx",h:"20rpx"})]),f==n.activeIndex?((0,k.openBlock)(),(0,k.createElementBlock)("view",{key:1,style:{flex:"1","justify-content":"flex-end"}},[(0,k.createElementVNode)("view",{onClick:(0,k.withModifiers)(g=>a.clickSend(h),["stop"]),class:"send-wrap"},[(0,k.createElementVNode)("u-text",{class:"send"},(0,k.toDisplayString)(a.$str("send")),1)],8,["onClick"])])):(0,k.createCommentVNode)("",!0)],14,["onClick"]))),128))])],4)])]}),_:1},8,["onClick","maskBgColor","onChange"])],64)}var Fs=v(Wl,[["render",Hl],["styles",[Ul]]]);var gp=re(te());function Vl(e){return new Promise((t,i)=>{getApp().globalData.pluginDB.selectSql({sql:e},s=>{s.status==1?t(s.rows):(E("error","at comExtend/plugin-DB.js:53","db \u63D2\u4EF6 select \u6267\u884C \u9519\u8BEF "+s.message),i(s.message))})})}function jl(e){return new Promise((t,i)=>{getApp().globalData.pluginDB.executeSql({sql:e},s=>{s.status==1?t(s.rows):(E("error","at comExtend/plugin-DB.js:66","db \u63D2\u4EF6 execute \u6267\u884C \u9519\u8BEF "+s.message),i(s.message))})})}function Q(e,t){return new Promise((i,s)=>{jl(e).then(n=>{i(n)},n=>{s()})})}function Re(e,t){return new Promise((i,s)=>{Vl(e).then(n=>{i(n)},n=>{s()})})}function Os(e){return new Promise(t=>{let i=`SELECT name FROM sqlite_master WHERE type = 'table' AND name = '${e}'`;Re(i).then(s=>{t(s.length>0)},s=>{t(!1)})})}function K(e){return _(e)?0:parseInt(e)}function Ve(e){return _(e)?"":e}function Xi(e,t){return _(e)?Math.round(t/1e3):(e+"").length==16?Math.round(e/1e3):e}function Gl(e,t){let i=e.length,s,n,a,o;if(i>t)n=!0,s=t,a=e[i-2].ctime,o=e[i-2].mtime;else{n=!1,s=i;let l=e[i-1];_(l)?(a=0,o=0):(a=l.ctime,o=l.mtime)}return{rows:e,hasMore:n,forLen:s,ctime:a,mtime:o}}function Rs(e,t){let i=Gl(e,t);for(let s=0,n=i.forLen;s<n;s++){let a=i.rows[s];a&&(a.msg_content=Qe(a.msg_content))}return i}var xp=re(te());function Zt(e,t){return new Promise(i=>{let s=`SELECT * FROM tb_msg_index WHERE chat_id = ${e} AND chat_type = ${t} LIMIT 1`;Re(s).then(n=>{let a=n[0];a&&(a.msg_content=Qe(a.msg_content)),i(a)},()=>{i(null)})})}function Ps(e,t,i=0){return new Promise(s=>{Qt(e).then(()=>Zt(e,t)).then(n=>{if(n&&n.unread!=i){let a=`UPDATE tb_msg_index SET unread = ${K(i)} WHERE chat_id = ${e} AND chat_type = ${t}`;Q(a),s(n.unread)}else s(0)})})}function Bs(e,t){return new Promise(i=>{let s=`DELETE FROM tb_msg_index WHERE chat_id = ${e} AND chat_type = ${t}`;Q(s).then(()=>{Qi(e,t),i()},()=>{i()})})}function Us(e,t,i){return new Promise(s=>{let n=`UPDATE tb_msg_index SET msg_content = '${se(i)}' WHERE chat_id = ${e} AND chat_type = ${t}`;Q(n).then(a=>{s()},()=>{s()})})}function Ws(e,t,i={}){return new Promise(s=>{if(Object.keys(i).length<=0)return;let n=[];for(let l in i){let c=i[l],u=l+" = "+c;n.push(u)}let o=`UPDATE tb_msg_index SET ${n.join(", ")} WHERE chat_id = ${e} AND chat_type = ${t}`;Q(o).then(()=>{s(1)},()=>{s(0)})})}var Ns=20;function Qt(e,t){return new Promise(i=>{let s=Pe(e);try{let n=`CREATE TABLE IF NOT EXISTS ${s} (id INTEGER PRIMARY KEY AUTOINCREMENT, chat_id INTEGER, chat_type INTEGER, send_uid INTEGER, mtime INTEGER, ctime INTEGER, msg_type INTEGER, msg_content varchar(500), msg_status INTEGER, m_type INTEGER, remark varchar(500))`;Q(n).then(()=>{Q(`CREATE index IF NOT EXISTS idx_ctime on ${s} (chat_id, ctime, chat_type)`),Q(`CREATE index IF NOT EXISTS idx_mtime on ${s} (chat_id, mtime)`),i()})}catch(n){i()}})}function pt(e,t){let i=1;return new Promise(s=>{Qt(e.chat_id,e.chat_type).then(()=>Je(e)).then(n=>n!=1?(s({isSave:0,isNotice:i}),De):Zt(e.chat_id,e.chat_type)).then(n=>{let a=q(e.msg_content),o=typeof e.msg_status=="undefined"?0:Number(e.msg_status);isNaN(o)&&(o=0);let l,c=$l(e,a),u=0,d,h="";_(e.remark)?n&&(h=n.remark||""):h=e.remark,n?(d=n.unread<=0,c?i=0:i=n.msg_notice,n.ctime<e.ctime&&(t&&e.send_uid!=getApp().globalData.uid&&getApp().globalData.curChatId!=e.chat_id?(u=c?0:1,l=`UPDATE tb_msg_index SET unread = ${n.unread+u}, send_uid = ${e.send_uid}, msg_type = ${e.msg_type}, msg_content = '${se(e.msg_content)}', mtime = ${e.mtime}, ctime = ${e.ctime}, msg_status = ${o}, remark = '${se(h)}' WHERE chat_id = ${e.chat_id} AND chat_type = ${e.chat_type}`):l=`UPDATE tb_msg_index SET send_uid = ${e.send_uid}, msg_type = ${e.msg_type}, msg_content = '${se(e.msg_content)}', mtime = ${e.mtime}, ctime = ${e.ctime}, msg_status = ${o}, remark = '${se(h)}' WHERE chat_id = ${e.chat_id} AND chat_type = ${e.chat_type}`)):(d=!0,i=c?0:1,u=t&&e.send_uid!=getApp().globalData.uid&&!c?1:0,l=`INSERT INTO tb_msg_index (chat_id, chat_type, send_uid, msg_type, msg_content, mtime, ctime, unread, is_top, msg_notice, has_at, msg_status, remark) values (${e.chat_id}, ${e.chat_type}, ${e.send_uid}, ${e.msg_type}, '${se(e.msg_content)}', ${e.mtime}, ${e.ctime}, ${u}, ${K(e.is_top)}, ${Yl(e.msg_notice)}, 0, ${o}, '${se(h)}')`),_(l)?s({isSave:1,isNotice:0,unread:u,addTabUnread:d}):Q(l).then(f=>{s({isSave:1,isNotice:i,unread:u,addTabUnread:d})})})})}function Je(e){return new Promise(t=>{let i=Pe(e.chat_id,e.chat_type);Re(`SELECT * FROM ${i} WHERE chat_id = ${e.chat_id} AND mtime = ${e.mtime} LIMIT 1`).then(s=>{if(s[0]){t(2);return}e.ctime=Xi(e.ctime,e.mtime);let a=`INSERT INTO ${i} (chat_id, chat_type, send_uid, mtime, ctime, msg_type, msg_content, msg_status, m_type, remark) VALUES (${e.chat_id}, ${e.chat_type}, ${e.send_uid}, ${e.mtime}, ${e.ctime}, ${e.msg_type}, '${se(e.msg_content)}', ${K(e.msg_status)}, 0, '')`;Q(a).then(()=>{t(1)},()=>{t(0)})},s=>{t(0)})})}function Zi(e,t,i){return new Promise(s=>{let n=Pe(e),a,o=Ns+1;i==0?e!=w.SYSTEM_ID?a=`SELECT * FROM ${n} WHERE chat_id = ${e} ORDER BY ctime DESC LIMIT 0, ${o}`:a=`SELECT * FROM ${n} WHERE chat_type = ${t} ORDER BY ctime DESC LIMIT 0, ${o}`:e!=w.SYSTEM_ID?a=`SELECT * FROM ${n} WHERE chat_id = ${e} AND ctime < ${i} ORDER BY ctime DESC LIMIT 0, ${o}`:a=`SELECT * FROM ${n} WHERE ctime < ${i} AND chat_type = ${t} ORDER BY ctime DESC LIMIT 0, ${o}`,Re(a).then(l=>{s(Rs(l,Ns))})})}function Hs(e,t,i,s,n=!1){return new Promise(a=>{let o=`SELECT * FROM ${Pe(e)} WHERE chat_id = ${e} AND ctime > ${i} AND chat_type = ${t} ORDER BY ctime ${n?"DESC":""} LIMIT ${s}`;Re(o).then(l=>{a(l)})})}function zl(e,t,i){return new Promise(s=>{let n=Pe(e);Re(`SELECT * FROM ${n} WHERE chat_id = ${i.chat_id} AND mtime = ${i.mtime} LIMIT 1`).then(a=>{if(a[0])s();else{i.ctime=Xi(i.ctime,i.mtime);let o=`INSERT INTO ${n} (chat_id,chat_type,send_uid,mtime,ctime,msg_type,msg_content,msg_status,m_type,remark) VALUES (${e},${t},${i.send_uid},${i.mtime},${i.ctime},${i.msg_type},'${se(i.msg_content)}',${K(i.msg_status)},0,'')`;Q(o).then(l=>{s()},function(l){s()})}},()=>{s()})})}function Vs(e,t,i){return new Promise(s=>{let n=i.length,a=0;for(let o=0,l=i.length;o<l;o++)zl(e,t,i[o]).then(()=>{a+=1,a==n&&s()})})}function tt(e,t,i,s,n=0,a=!0){return new Promise(o=>{let l=Pe(e),c;n==0?a?c=`UPDATE ${l} SET msg_content = '${se(s)}' WHERE chat_id = ${e} AND ctime = ${i}`:c=`UPDATE ${l} SET msg_content = '${se(s)}' WHERE chat_id = ${e} AND mtime = ${i}`:c=`UPDATE ${l} SET msg_content = '${se(s)}' WHERE id = ${n}`,Q(c).then(u=>{o()})})}function Qi(e,t){return ee(this,null,function*(){try{let i=Pe(e,t);if(!(yield Os(i)))return!1;yield Q(`DELETE FROM ${i} WHERE chat_id = ${e}`)}catch(i){return!1}})}function js(e,t,i,s=0){return new Promise(n=>{let a=Pe(e),o;s==0?o=`DELETE FROM ${a} WHERE chat_id = ${e} AND mtime = ${i}`:o=`DELETE FROM ${a} WHERE chat_id = ${e} AND ctime = ${s}`,Q(o).then(l=>{n()})})}function Gs(e,t){return new Promise(i=>{let s=Pe(e);Q(`DELETE FROM ${s} WHERE chat_id = ${e}`).then(()=>{let a=`UPDATE tb_msg_index SET msg_content = '${JSON.stringify({content:""})}', msg_type = ${w.M_TEXT}, unread = 0, msg_status = 0 WHERE chat_id = ${e} AND chat_type = ${t}`;Q(a).then(()=>{i()},()=>{i()})})})}function zs(e,t,i,s={}){return new Promise(n=>{if(Object.keys(s).length<=0)return;let a=Pe(e),o=[];for(let u in s){let d=s[u],h=u+" = "+d;o.push(h)}let l=o.join(", "),c=`UPDATE ${a} SET ${l} WHERE mtime = ${i}`;Q(c).then(()=>{n(1)},()=>{n(0)})})}function $l(e,t){return e.msg_type==w.M_MATCH_SUCCESS||e.msg_type==w.M_AI_ISSUE_GUIDE||e.msg_type==w.M_AI_ISSUE_QUESTION||e.msg_type==w.M_SERVICE_RATING?!0:e.msg_type!=w.M_CALL||e.send_uid==getApp().globalData.uid?!1:t.call_status==2||t.call_status==1}function Yl(e){return e==null?1:parseInt(e)}function Pe(e,t){let i=Jl();if(e==w.SYSTEM_ID)return`${i}${e}`;let s=Number(e)%10;return`${i}${s}`}function Jl(){return"tb_msg_"}var ft=re(te());function $s(e){return e==1?p("himLower"):p("herLower")}function Ys(e){return e==1?p("heLower"):p("sheLower")}var ht={DELETED:"avatar/default/avatar_deleted.png",BLACKED:"avatar/default/avatar_blacked.png",DELETED_DEF_DIR:"avatar/default/avatar_deleted",BLACKED_DEF_DIR:"avatar/default/avatar_blacked"};var Ks={CHAT:"/pagesCall/chat-view"},en={NONE:0,WAITING:1,GAME:2,WEEK_UP:3,JUDGE_ROOM:100};var tn={VIDEO:1,VOICE:2},nn={CALL:1,ANSWER:2,MATCH_ACCEPT:3,MATCH_CONNECT:4},qs={CALL:1,MATCH:2},Xs={DEF:0,NOTIFY:1,CONNECT:2},Zs={HOME:0,MSG:1,MATCH:2,RECOMMEND:3,MATCH_NOTIFY:4,QUALITY:5,NO_COINS_DIALOG:6,CALL_LOG:7,GAME_MATCH:8,GAME_MATCH_NOTIFY:9,RANKING_LIST:10,PRIVACY_SET_MSG:11,MOMENT:12,LIVE:13,RECEPTION:13,CALlING:98,FREE_MIN_POP:99,ANSWER_ERROR:100,END_PAGE:101,APP_NOTIFY:102};function Js(e){return{2:`[${p("voice")}]`,3:`[${p("picture")}]`,5:`[${p("gift")}]`,4:`[${p("video")}]`,6:`[${p("notice")}]`,100:`[${p("msg.systemNotice")}]`}[e]||"["+p("unknownMessage")+"]"}function Qs(e){if(_(e))return"";let t=ve("app_user_list");if(_(t))return"";t=q(t);let i=t.filter(s=>s.appid==e);return _(i)||i[0].app_show==0?t[0]:i[0]}function ea(e,t){let i={uid:e.uid};if(e.status==-1?i.is_cancel=1:(i.is_blacked=e.is_blacked,i.avatar=e.small_avatar),uni.$emit("event_msg_index_update_user",i),t==2){let s=ve("chat_pri_data",e.uid);if(!s||!s.user_info)return;s.user_info.avatar=e.small_avatar,s.user_info.small_avatar=e.small_avatar,e.cancellation==1&&(s.user_info.nickname=p("deleted")),Ze("chat_pri_data",s,e.uid)}}function sn(e){let t=q(e.msg_content),i="",s="";switch(e.msg_type){case w.M_TEXT:if(t.text){let n=t.text;for(let a=0,o=t.info.length;a<o;a++){let l=t.info[a];n=n.replace("[x]",l.text)}return n}else return t.content;case w.M_IMG:return Js(e.msg_type);case w.M_VIDEO:return i=Js(e.msg_type),s=$e(Math.round(t.duration)),i+" "+s;case w.M_VOICE:return i="["+p("audio")+"]",s=$e(Math.round(t.voice_duration)),i+" "+s;default:return""}}function an(e){let t=q(e.msg_content);switch(e.msg_type){case w.M_IMG:return{img_url:t.image_url,small_url:t.small_url,media_type:Fe.PHOTO};case w.M_VIDEO:return{cover_url:t.cover,small_url:t.small_url,video_url:t.url,media_type:Fe.VIDEO};default:return""}}function ta(e,t,i){let{call_status:s,duration:n}=e,a=getApp().globalData.uid==i;return s==0?p("canceled"):s==1?a?p("declined",{nickname:$s(t.sex)}):p("canceled"):n?`${p("duration")} ${n}`:p("canceled")}function ei(e,t){let i=rn();return new Promise(s=>{let n=0;Re(`SELECT * FROM ${i} WHERE uid = ${e.uid} LIMIT 1`).then(a=>{if(a.length>0)if(t&&Yn(a[0],e)){n=1;let o=`UPDATE ${i} SET nickname = '${se(e.nickname)}', avatar = '${e.avatar}', sex = ${K(e.sex)}, birthday = '${Ve(e.birthday)}', is_vip = ${K(e.is_vip)}, is_auth = ${K(e.is_auth)}, level = ${K(e.level)}, country_code = '${Ve(e.country_code)}', country_flag = '${Ve(e.country_flag)}', language = '${Ve(e.language)}', hide_vip = ${K(e.hide_vip)}, hide_level = ${K(e.hide_level)}, hide_profile = ${K(e.hide_profile)}, auth_status = ${K(e.auth_status)} WHERE uid = ${e.uid}`;Q(o).then(()=>{s(n)},()=>{s(n)})}else s(n);else{n=2;let o=`INSERT INTO ${i} (uid, nickname, avatar, sex, birthday, is_vip, is_auth, level, country_code, country_flag, language, hide_vip, hide_level, hide_profile, auth_status) VALUES (${e.uid}, '${se(e.nickname)}', '${e.avatar}', ${K(e.sex)}, '${Ve(e.birthday)}', ${K(e.is_vip)}, ${K(e.is_auth)}, ${K(e.level)}, '${Ve(e.country_code)}', '${Ve(e.country_flag)}', '${Ve(e.language)}', ${K(e.hide_vip)}, ${K(e.hide_level)}, ${K(e.hide_profile)}, ${K(e.auth_status)})`;Q(o).then(()=>{s(n)},()=>{s(n)})}},()=>{s(n)})})}function ia(e){return new Promise(t=>{let i=Array.isArray(e),s=0,n=i?e.length:Object.keys(e).length;for(let a in e){let o=e[a];ei(o,!0).then(()=>{s+=1,s>=n&&t()})}})}function na(e,t=!0){let i=rn();return new Promise(s=>{if(e==0){s(null);return}if(e==w.SYSTEM_ID){let n=getApp().globalData.appInfo;s({uid:w.SYSTEM_ID,nickname:n.name,avatar:n.logo,sex:1});return}Re(`SELECT * FROM ${i} WHERE uid = ${e} LIMIT 1`).then(n=>{let a=n[0];if(_(a)&&e==w.SYSTEM_ID){s({uid:w.SYSTEM_ID,avatar:getApp().globalData.appInfo.logo,nickname:getApp().globalData.appInfo.name});return}if(a&&(a.nickname=Qe(a.nickname)),_(a)&&e!=w.SYSTEM_ID){if(!t){s(null);return}P.request("/user/info",{target_uid:e,extra:"extra"},!1,!0).then(o=>{o.data&&o.data.user_info?(a=o.data.user_info,a.small_avatar&&(a.avatar=a.small_avatar),s(a),ei(a,!0)):s(null)},()=>{s(null)})}else s(a)},()=>{s(null)})})}function sa(e,t=!0){let i=rn();return new Promise(s=>{if(t&&(e=e.filter(o=>!_(o))),e.length<=0){s({});return}let n={},a=`SELECT * FROM ${i} WHERE uid IN (${e.join(",")}) LIMIT ${e.length}`;Re(a).then(o=>{for(let l=0,c=o.length;l<c;l++){let u=o[l];u&&(u.nickname=Qe(u.nickname),n[u.uid]=u)}s(n)})})}function rn(){return"tb_user"}var Kl={props:{w:{type:String,default:"0"},h:{type:String,default:"0"},border:{type:String,default:""},radius:{type:String,default:"0"}},computed:{deletedAvatar(){return ht.DELETED}}};function ql(e,t,i,s,n,a){let o=A((0,ft.resolveDynamicComponent)("l-img"),R);return(0,ft.openBlock)(),(0,ft.createBlock)(o,{src:a.deletedAvatar,w:i.w,h:i.h,radius:i.radius},null,8,["src","w","h","radius"])}var ti=v(Kl,[["render",ql]]);function Xl(){return ls()}function aa(){return Xl()==Pt.SUCCESS}var ra={data(){return{playTimer:!1,isPlayingByTouch:!1,mAudioInner:uni.createInnerAudioContext(),mLastPlayCTime:0,playVoiceMsgData:"",playVoiceMsgCurDuration:"",isStatus:!1}},methods:{clickMsgVoice(e,t){var i;if(this.isStatus)return;this.playVoiceMsgData=e,this.playVoiceMsgCurDuration=t;let s=this.$refs[`msg${e.ctime}`][0];if(!s)return;if(!e.isSend&&e.content.voice_unread==0&&(e.content.voice_unread=1,tt(this.chatId,this.chatType,e.ctime,JSON.stringify(e.content))),typeof this.mAudioInner.paused!="undefined"&&!this.mAudioInner.paused&&(this.mAudioInner.stop(),this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.$refs[`msg${this.mLastPlayCTime}`][0].pauseAnim(),this.mLastPlayCTime==e.ctime)){this.mLastPlayCTime=0;return}this.mAudioInner.src=Qn((i=e==null?void 0:e.content)!=null&&i.voice_url?e.content.voice_url:e.msg_content.voice_url),this.mAudioInner.startTime=t,this.mLastPlayCTime=e.ctime,this.mAudioInner.play(),this.handlePlayTimer(e.ctime),s.changeIcon(!0),this.$refs[`msg${this.mLastPlayCTime}`][0].playAnim()},onMsgVoiceChange(e,t,i){if(!e){this.scrollable=!1,!this.mAudioInner.paused&&i.ctime==this.mLastPlayCTime?(this.isPlayingByTouch=!0,this.mAudioInner.pause(),this.playTimer&&clearInterval(this.playTimer)):this.isPlayingByTouch=!1;return}this.scrollable=!0,this.isPlayingByTouch&&(this.mAudioInner.seek(t),this.mAudioInner.play(),this.handlePlayTimer(i.ctime))},onChangeRecording(e){e||(this.playVoiceMsgData=""),this.playVoiceMsgData&&e&&this.clickMsgVoice(this.playVoiceMsgData,this.playVoiceMsgCurDuration),this.isStatus=e},handlePlayTimer(e){let t=this.$refs[`msg${e}`][0];this.playTimer&&clearInterval(this.playTimer),this.playTimer=setInterval(()=>{if(this.mAudioInner.paused)return;let i=this.mAudioInner.currentTime,s=Math.round(i*100);isNaN(s)||t.changeDuration(Math.round(i),s)},100)},initAudio(){this.mAudioInner.onEnded(()=>{this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.$refs[`msg${this.mLastPlayCTime}`][0].changeDuration(-1,0),this.$refs[`msg${this.mLastPlayCTime}`][0].pauseAnim(),this.mLastPlayCTime=0}),this.mAudioInner.onError(e=>{this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.$refs[`msg${this.mLastPlayCTime}`][0].playAnim(),this.mLastPlayCTime=0})}},onLoad(){this.initAudio()},onUnload(){this.mAudioInner.destroy(),this.playTimer&&clearInterval(this.playTimer)}};function oa(e,t,i=null){return new Promise(s=>{let n=onlineStatusPointColor(e),a;if(i)a=i.getTitleNView();else{let o=getCurrentPages();a=o[o.length-1].$getAppWebview().getTitleNView()}a.draw([{tag:"rect",id:"rect",position:{left:`${t}px`,top:"18px",width:"8px",height:"8px"},rectStyles:{color:n,radius:"4px"}}]),s()})}var C=re(te());function Zl(){return getApp().globalData.appCRE||vs(40,1,!1)?!0:(Ce(p("tips"),p("call40CoinsTip"),()=>{ne(X.topUpDialog)},"","Purchase"),!1)}function la(e,t,i,s){Zl()&&Ql(qs.CALL,e,nn.CALL,t,i,null,s,Xs.DEF)}function Ql(e,t,i,s,n,a,o,l){if(E("error","at comCall/call.js:44","\u300A!!Error!!\u300B>>>>> [_openCall] ",getApp().globalData.curCallId),_(s))return;if(s.uid==getApp().globalData.uid){if(i!=nn.CALL)return;Ue(p("tips"),p("noCallSelf"),"",p("gotIt"));return}if(getApp().globalData.curCallId!=en.NONE)return;getApp().globalData.curCallId=en.WEEK_UP;let c=ec(e,t,i,s,n,a,o,l);Te(Ks.CHAT,{},"callViewData",c)}function ec(e,t,i,s,n,a,o,l){let c={user:s,roomType:e,callType:t,actionType:i,fromType:o,videoInfo:n,openType:l};return n&&(c.videoInfo=n),a&&(c.roomInfo=a,a.isGame&&(c.isGame=a.isGame)),c}var tc={"tran-flex":{"":{flexDirection:"row",alignItems:"center"}},"view-tran":{"":{flexDirection:"row",justifyContent:"center",alignItems:"center"}},"text-a":{"":{fontSize:"20rpx"}},"text-tran":{"":{fontSize:"26rpx",marginLeft:"8rpx"}},"text-end":{"":{color:"#999999",fontSize:"24rpx",marginLeft:"4rpx"}},"tran-loading":{"":{width:"44rpx",height:"44rpx",position:"relative",alignItems:"center",justifyContent:"center"}},"tran-loading-back":{"":{position:"absolute",left:0,top:0}}},ic={components:{LImg:R,MLine:He},emits:["onTranslateFinish","onTranslateClick"],props:{text:{type:String,default:""},border:{type:Boolean,default:!1},showTran:{type:Boolean,default:!0},showTranContent:{type:Boolean,default:!0},contentTop:{type:Number,default:20},showTranEnd:{type:Boolean,default:!1},bg:{type:[Boolean,String],default:!1},textColor:{type:String,default(){return"#333333"}},contentColor:{type:String,default(){return"#333333"}},isAuto:{type:Boolean,default:!1},isAutoForce:{type:Boolean,default:!1},translateResult:{type:String,default:""},fromLanguage:{type:String,default:""},apiParams:{type:Object,default(){return{}}},translateSize:{type:String,default:"24rpx"},paddingTop:{type:String,default:"10rpx"},fw:{type:Number,default:0},showTransStatus:{type:Number,default:-1},showOpenAutoTips:{type:Boolean,default:!1}},data(){return{transStatus:0,tranContent:""}},watch:{text(e){e&&(this.transStatus=0,this.tranContent="",this.executeTranAuto())},translateResult(e){this.transStatus=0,this.tranContent="",this.executeTranAuto()}},computed:{borderStyle(){return this.border?{"border-radius":"4px","padding-left":"10rpx","padding-right":"10rpx","padding-top":this.paddingTop}:{}},contentStyle(){let e={marginTop:`${this.contentTop}rpx`,color:this.contentColor,fontSize:this.translateSize};return this.fw>0&&(e["font-weight"]=this.fw),e},tranIconSrc(){return"s/pub/tran_end_1.png"},tranStr(){return this.isAuto?p("autoTranslation"):p("translation")},translateStr(){return p("translate")}},methods:{clickTranEndView(e){(this.isAuto||this.isAutoForce)&&(e&&e.stopPropagation(),Yt())},clickThis(e){e&&e.stopPropagation(),this.reqTranslate()&&((this.isAuto||this.isAutoForce)&&this.$emit("onTranslateClick"),this.showOpenAutoTips&&Vi(!0))},handleTranRes(e){this.transStatus=2,this.showTranContent&&(this.tranContent=e),this.$emit("onTranslateFinish",{text:e})},reqTranslate(){if(_(this.text)||this.transStatus!=0)return!1;if(this.translateResult)return this.handleTranRes(this.translateResult),!0;this.transStatus=1;let e=this.apiParams;return e.target=getApp().globalData.translateKey,e.content=this.text,P.request("/translation/submit",e,!1,!0).then(t=>{t.ok==1&&t.data.text&&this.handleTranRes(t.data.text)},t=>{this.transStatus=0}),!0},executeTranAuto(){(this.isAutoForce||this.isAuto&&fs(this.fromLanguage))&&this.$nextTick(()=>{this.reqTranslate()})}},created(){if(this.showTransStatus!=-1&&(this.transStatus=this.showTransStatus),!(!this.isAuto&&!this.isAutoForce)&&getApp().globalData.translateAuto){if(this.translateResult){this.transStatus=2,this.tranContent=this.translateResult;return}this.executeTranAuto(),rt("s-cupid/pub/tran_load_1.gif")}}};function nc(e,t,i,s,n,a){let o=A((0,C.resolveDynamicComponent)("l-img"),R),l=(0,C.resolveComponent)("m-line");return(0,C.openBlock)(),(0,C.createElementBlock)("view",{style:(0,C.normalizeStyle)([a.borderStyle,{background:"transparent"}]),renderWhole:!0},[(0,C.createElementVNode)("view",{class:"tran-flex"},[n.transStatus==1?((0,C.openBlock)(),(0,C.createElementBlock)("view",{key:0,class:"tran-loading"},[(0,C.createElementVNode)("view",{class:"tran-loading-back"},[(0,C.createVNode)(o,{src:"/static/tran-loading-back.png",w:"44rpx",h:"44rpx"})]),(0,C.createVNode)(o,{src:"s/pub/tran_load_1.gif",w:"24rpx",h:"24rpx","is-gif":!0})])):n.transStatus==0?((0,C.openBlock)(),(0,C.createBlock)(o,{key:1,onClick:(0,C.withModifiers)(a.clickThis,["stop"]),src:"/static/trans_s.png",w:"32rpx",h:"32rpx"},null,8,["onClick"])):n.transStatus==2?((0,C.openBlock)(),(0,C.createBlock)(o,{key:2,src:"s-cupid/pub/trans_s.png",w:"32rpx",h:"32rpx"})):(0,C.createCommentVNode)("",!0),i.showTran?((0,C.openBlock)(),(0,C.createElementBlock)("u-text",{key:3,onClick:t[0]||(t[0]=(0,C.withModifiers)((...c)=>a.clickThis&&a.clickThis(...c),["stop"])),class:"text-tran",style:(0,C.normalizeStyle)({color:i.textColor})},(0,C.toDisplayString)(a.translateStr),5)):(0,C.createCommentVNode)("",!0)]),n.tranContent?((0,C.openBlock)(),(0,C.createElementBlock)("view",{key:0},[(0,C.createVNode)(l),(0,C.createElementVNode)("u-text",{style:(0,C.normalizeStyle)(a.contentStyle)},(0,C.toDisplayString)(n.tranContent),5),i.showTranEnd?((0,C.openBlock)(),(0,C.createElementBlock)("view",{key:0,onClick:t[1]||(t[1]=(...c)=>a.clickTranEndView&&a.clickTranEndView(...c)),class:"tran-flex",style:{"margin-top":"8rpx"}},[(0,C.createVNode)(o,{src:a.tranIconSrc,w:"30rpx",h:"30rpx"},null,8,["src"]),(0,C.createElementVNode)("u-text",{class:"text-end"},(0,C.toDisplayString)(a.tranStr),1)])):(0,C.createCommentVNode)("",!0)])):(0,C.createCommentVNode)("",!0)],4)}var on=v(ic,[["render",nc],["styles",[tc]]]),sc={emits:["click","clickAddFriends","clickSendGift"],props:{data:{type:Object,default(){return{text:"",info:[],click:[]}}},fontSize:{type:String,default:"24rpx"},color:{type:String,default(){return"#FFFFFF"}},selectable:{type:Boolean,default:!1}},data(){return{version:0,nodes:[{name:"div",children:[]}]}},watch:{data(){this.parse()}},methods:{click(e){let t=Array.isArray(this.data.click)?this.data.click[0]:this.data.click;t&&(t.disabled||(e.stopPropagation(),t.action==1||(t.action==101?this.$emit("click"):t.action==8?this.$emit("clickAddFriends"):t.action==9?this.$emit("clickCallVideo"):t.action==10?this.$emit("clickSendGift"):t.action==1004&&ne(X.topUpDialog))))},parseTextV1(e,t,i,s="",n=""){let a={type:"text",text:`${t?"&nbsp;":""}${e}${i?"&nbsp;":""}`},o="";return s!=""&&(o+=`color:${s};`),n!=""&&(o+=`font-size:${n};`),o!=""&&(a.attrs={style:o}),a},parseDataV1(){let e=[];if(this.data.text=="[x]"){let i=this.data.info[0];this.nodes[0].children=[this.parseTextV1(i.text,!1,!1,i.color)];return}let t=this.data.text.split("[x]");for(let i=0,s=t.length;i<s;i++){let n=t[i];n!=""&&e.push(this.parseTextV1(n,!1,!1,this.color));let a=this.data.info[i];if(a){let o,l;try{_(n)||n.endsWith('"')?o=!1:o=!0;let u=t[i+1];_(u)||u.startsWith('"')||u.startsWith(",")||u.startsWith(".")?l=!1:l=!0}catch(u){o=!0,l=!0}let c="";a.user_info?a.user_info.uid==getApp().pubUser.uid?c=a.self:c=a.nickname:c=a.text,e.push(this.parseTextV1(c,o,l,a.color))}}e.length>1&&(this.nodes[0].children=e)},parseText(e,t="",i=""){let s={type:"text",text:`${e}`},n="";return _(t)||(n+=`color:${t};`),_(i)||(n+=`font-size:${i};`),n!=""&&(s.attrs={style:n}),s},parse(){let e=this.data.text.split(/(\[%\w+%\])/).filter(function(i){return i!==""});if(e.length<=1){this.parseDataV1();return}let t=[];for(let i=0,s=e.length;i<s;i++){let n=e[i];if(n.startsWith("[%")){let o=n.replace(/[\s+,\[%,%\]]/g,""),l=this.data.info[o];if(_(l)||_(l.text))continue;t.push(this.parseText(l.text,l.color,l.fontSize))}else n.startsWith(" ")&&(n=`&nbsp;${n}`),n.endsWith(" ")&&(n=`${n}&nbsp;`),t.push(this.parseText(n,this.color))}t.length>1&&(this.nodes[0].children=t)}},created(){_(this.data.text)||this.parse()}};function ac(e,t,i,s,n,a){let o=(0,C.resolveComponent)("rich-text");return(0,C.openBlock)(),(0,C.createBlock)(o,{onClick:a.click,nodes:n.nodes,selectable:i.selectable,style:(0,C.normalizeStyle)({color:i.color,fontSize:i.fontSize})},null,8,["onClick","nodes","selectable","style"])}var mt=v(sc,[["render",ac]]),rc={"fj-slider":{"":{position:"relative"}},"fj-touch-right":{"":{position:"absolute"}},"fj-line":{"":{position:"absolute",left:0,right:0}}},oc=Ie("dom"),lc={name:"CustomSlider",emits:["onChanged","onChangeStart","onChange"],props:{fillValue:{type:Number,default:100},maxValue:{type:Number,default:0},step:{type:Number,default:1},activeColor:{type:String,default:"#2F85FC"},inactiveColor:{type:String,default:"#999999"},blockWidth:{type:Number,default:24},lineHeight:{type:Number,default:8},lineRadius:{type:Number,default:4},blockColor:{type:String,default:"#FFFFFF"},disClick:{type:Boolean,default:!1}},data(){return{lineWidth:0,maxLeft:0,lineLeft:0,curValue:0,sMaxValue:0,sFillValue:0,percentage:0,sBlockWidth:uni.upx2px(this.blockWidth),sLineHeight:uni.upx2px(this.lineHeight),sLineTop:(uni.upx2px(this.blockWidth)-uni.upx2px(this.lineHeight))/2,sLineRadius:uni.upx2px(this.lineRadius),getRectInterval:!1}},watch:{maxValue(e,t){this.sMaxValue=e,this.maxLeft=this.sMaxValue/this.percentage,this.checkMaxLeft()},fillValue(e,t){this.sFillValue=this.fillValue}},methods:{clickLine(e){e.stopPropagation(),!this.disClick&&this.touchmove(e,!0)},envir(e){this.getRectInterval=setTimeout(()=>{oc.getComponentRect(e.refName,t=>{if(clearTimeout(this.getRectInterval),this.getRectInterval=!1,t&&t.size&&t.size.height!=0){let i=t.size;e.fn({width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right})}else this.envir(e)})},100)},touchstart(e){this.$emit("onChangeStart",this.curValue)},touchmove(e,t){e.stopPropagation();let i;if(t?i=e.changedTouches[0].screenX-this.lineLeft:i=e.touches[0].screenX-this.lineLeft,i<0||i>this.lineWidth)return;let s=Math.ceil(i);s>this.lineWidth&&(s=this.lineWidth),this.curValue=Math.round(s*this.percentage),this.maxLeft=Math.ceil(i),this.checkMaxLeft(),this.$emit("onChange",this.curValue)},touchend(e){if(this.step===1)this.sMaxValue=this.curValue;else{let t=Math.round(this.maxLeft*this.percentage/this.step);this.sMaxValue=t*this.step,this.sFillValue-this.sMaxValue<this.step&&(this.sMaxValue=this.sFillValue),this.maxLeft=this.sMaxValue/this.percentage}E("info","at components/custom-slider/custom-slider.vue:179","m-slider onChanged "+this.curValue),this.$emit("onChanged",this.curValue)},checkMaxLeft(){this.maxLeft>this.lineWidth-this.sBlockWidth-1?this.maxLeft=this.lineWidth-this.sBlockWidth-1:this.maxLeft<=4&&(this.maxLeft=0)}},mounted(){this.$nextTick(()=>{this.envir({className:".fj-line",refName:this.$refs["fj-line"],fn:e=>{this.lineWidth=e.width,this.lineLeft=e.left,this.sMaxValue=this.maxValue>0?this.maxValue:0,this.sFillValue=this.fillValue>0?this.fillValue:0,this.percentage=this.sFillValue/this.lineWidth,this.maxLeft=this.sMaxValue/this.percentage-this.sBlockWidth-1}})})},unmounted(){this.getRectInterval&&clearTimeout(this.getRectInterval)}};function cc(e,t,i,s,n,a){return(0,C.openBlock)(),(0,C.createElementBlock)("view",{class:"fj-slider",onTouchend:t[3]||(t[3]=(...o)=>a.clickLine&&a.clickLine(...o)),renderWhole:!0},[(0,C.createElementVNode)("view",{class:"fj-line",ref:"fj-line",style:(0,C.normalizeStyle)({background:i.inactiveColor,height:`${n.sLineHeight}px`,top:`${n.sLineTop}px`,borderRadius:`${n.sLineRadius}px`})},null,4),(0,C.createElementVNode)("view",{class:"fj-line",style:(0,C.normalizeStyle)({width:`${Math.abs(n.maxLeft)}px`,background:i.activeColor,height:`${n.sLineHeight}px`,top:`${n.sLineTop}px`,borderTopLeftRadius:`${n.sLineRadius}px`,borderBottomLeftRadius:`${n.sLineRadius}px`})},null,4),(0,C.createElementVNode)("view",{class:"fj-touch-right",onTouchstart:t[0]||(t[0]=(...o)=>a.touchstart&&a.touchstart(...o)),onTouchmove:t[1]||(t[1]=(...o)=>a.touchmove&&a.touchmove(...o)),onTouchend:t[2]||(t[2]=(...o)=>a.touchend&&a.touchend(...o)),style:(0,C.normalizeStyle)({left:`${n.maxLeft}px`,background:i.blockColor,width:`${n.sBlockWidth}px`,height:`${n.sBlockWidth}px`,borderRadius:`${n.sBlockWidth/2}px`})},null,36)],32)}var ca=v(lc,[["render",cc],["styles",[rc]]]),ua={data(){return{allExpressionList:[]}},methods:{parseOtherExpression(e){let t={},i={},s={};for(let a=0,o=e.length;a<o;a++){let l=e[a],c=[];for(let u=0,d=l.count;u<d;u++){let h=u+1,f={w:this.pigW-20,src:`${l.path}${l.picName}_${h}.png`};c.push(f)}t[l.iconKey]=c,i[l.iconKey]=`${l.path}${l.title}.png`}s=Object.keys(i);let n=[];for(let a of s){let o={icon:i[a],list:t[a]};n.push(o)}this.expressionsList=n}}},uc={props:{type:{type:String,default:"bg2"}},computed:{bgColor(){var e,t,i;return(i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.color[this.type]}}};function dc(e,t,i,s,n,a){return(0,C.openBlock)(),(0,C.createElementBlock)("view",{style:(0,C.normalizeStyle)({background:a.bgColor}),renderWhole:!0},[(0,C.renderSlot)(e.$slots,"default")],4)}var ii=v(uc,[["render",dc]]),pc={components:{UniIcons:ae},props:{type:{type:String,default:"right"},size:{type:String,default:"28rpx"},modeType:{type:String,default:"desc"},color:{type:String,default:""}},computed:{iconColor(){var e,t,i;return _(this.color)?(i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.color[this.modeType]:this.color}}};function hc(e,t,i,s,n,a){let o=A((0,C.resolveDynamicComponent)("uni-icons"),ae);return(0,C.openBlock)(),(0,C.createBlock)(o,{type:i.type,size:i.size,color:a.iconColor},null,8,["type","size","color"])}var ni=v(pc,[["render",hc]]),Ae={LIGHT:1,DARK:2};function fc(e,t){Ce(p("tips"),p("anchor.rest.turnOffTip"),()=>{P.request("/user/work-status",{is_rest:0},!0).then(()=>{typeof e=="function"&&e(),Tt("pubUser.is_rest",0),Ue(p("tips"),p("anchor.rest.turnOff"),"",p("gotIt"))})},()=>{typeof t=="function"&&t()},p("turnOff"))}function si(){return!et()||getApp().pubUser.is_rest!=1?!1:(uni.hideKeyboard(),fc(!1,!1),!0)}var z=re(te());var mc={"user-info":{"":{flexDirection:"row",alignItems:"center"}},"nickname-nvue":{"":{lines:1,textOverflow:"ellipsis",wordWrap:"anywhere"}},"m-r-4":{"":{marginRight:"8rpx"}}},gc={components:{LImg:R},props:{info:{type:Object,default(){return{}}},noName:{type:Number,default:0},nameColor:{type:String,default:""},nameSize:{type:String,default:"26rpx"},nameWidth:{type:String,default:"300rpx"},fw:{type:[String,Number],default:"400"},showAge:{type:Boolean,default:!1}},computed:{nicknameColor(){return _(this.nameColor)?"#333333":this.nameColor},age(){if(!this.showAge||_(this.info.birthday)||this.info.hide_profile)return"";let e=Wt(this.info.birthday);return _(e)||isNaN(e)?"":`${this.noName?"":", "}${e}`}}};function _c(e,t,i,s,n,a){let o=A((0,z.resolveDynamicComponent)("l-img"),R);return(0,z.openBlock)(),(0,z.createElementBlock)("view",{renderWhole:!0},[(0,z.createElementVNode)("view",{class:"user-info"},[i.noName?(0,z.createCommentVNode)("",!0):((0,z.openBlock)(),(0,z.createElementBlock)("u-text",{key:0,class:"nickname-nvue m-r-4",style:(0,z.normalizeStyle)({color:a.nicknameColor,fontSize:i.nameSize,maxWidth:i.nameWidth,fontWeight:i.fw})},(0,z.toDisplayString)(i.info.nickname),5)),a.age?((0,z.openBlock)(),(0,z.createElementBlock)("u-text",{key:1,class:"nickname-nvue m-r-4",style:(0,z.normalizeStyle)({color:a.nicknameColor,fontSize:i.nameSize,fontWeight:i.fw})},(0,z.toDisplayString)(a.age),5)):(0,z.createCommentVNode)("",!0),(0,z.createVNode)(o,{src:i.info.country_flag,w:"40rpx",h:"26rpx"},null,8,["src"]),i.info.auth_status==1?((0,z.openBlock)(),(0,z.createBlock)(o,{key:2,src:"/static/pic/authed.png",w:"28rpx",h:"28rpx",style:{"margin-left":"8rpx"}})):(0,z.createCommentVNode)("",!0)])])}var ai=v(gc,[["render",_c],["styles",[mc]]]);var fe=re(te());var yc={"vip-img":{"":{position:"absolute",width:"70rpx",height:"30rpx",bottom:0,left:0,zIndex:100}}},bc={emits:["click","onLoad"],components:{LImg:R},props:{user:{type:Object,default(){return{}}},w:{type:String,default:"0"},h:{type:String,default:"0"},radius:{type:String,default:"0"},avatarKey:{type:String,default:"small_avatar"},border:{type:String,default:""},placeType:{type:Number,default:1},placeW:{type:String,default:""},placeFontSize:{type:[String,Boolean],default:""},placeBottom:{type:String,default:""},click:{type:Boolean,default:!0},fromAdmin:{type:[Boolean,Number],default:!1},fromType:{type:Number,default:1},fade:{type:Boolean,default:!0},bgColor:{type:String,default:"transparent"},isShowVip:{type:Boolean,default:!0},vipW:{type:String,default:"70rpx"},vipH:{type:String,default:"30rpx"}},methods:{clickAvatar(e){this.click&&this.$emit("click",e)},onLoad(){this.$emit("onLoad")}}};function xc(e,t,i,s,n,a){let o=A((0,fe.resolveDynamicComponent)("l-img"),R);return i.user.avatar?((0,fe.openBlock)(),(0,fe.createElementBlock)("view",{key:0,style:(0,fe.normalizeStyle)([{"border-radius":i.radius,background:i.bgColor},{position:"relative",padding:"0 0 10rpx 10rpx"}]),renderWhole:!0},[(0,fe.createVNode)(o,{onClick:a.clickAvatar,src:i.user.avatar,w:i.w,h:i.h,radius:i.radius,border:i.border,"place-type":i.placeType,"place-w":i.placeW,"place-font-size":i.placeFontSize,"place-bottom":i.placeBottom,fade:i.fade,onOnLoad:a.onLoad},null,8,["onClick","src","w","h","radius","border","place-type","place-w","place-font-size","place-bottom","fade","onOnLoad"]),i.isShowVip&&Number(i.user.is_vip)?((0,fe.openBlock)(),(0,fe.createElementBlock)("view",{key:0,class:"vip-img"},[(0,fe.createVNode)(o,{src:"/static/avatar-vip.png",w:i.vipW,h:i.vipH},null,8,["w","h"])])):(0,fe.createCommentVNode)("",!0)],4)):(0,fe.createCommentVNode)("",!0)}var ln=v(bc,[["render",xc],["styles",[yc]]]);var $=re(te());var wc={"center-between":{"":{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"quick-btn":{"":{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",fontSize:"28rpx",boxSizing:"border-box"}},"btn-content":{".quick-btn ":{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",left:"10rpx",right:"10rpx",top:0,bottom:0}},"btn-text-wrap":{"":{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"}},"def-btn-text":{".btn-text-wrap ":{color:"#333333",fontSize:"28rpx"}}},Sc={props:{bgType:{type:String,default:"bg1"},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},btnText:{type:String,default:""},btnBg:{type:String,default:""},btnStyle:{type:Object,default:()=>({width:"648rpx",height:"96rpx"})},bgIconStyle:{type:Object,default:()=>({width:"60rpx",height:"80rpx"})},fz:{type:[Number,String],default:"32"},fw:{type:[Number,String],default:"500"}},data(){return{}}};function Cc(e,t,i,s,n,a){let o=A((0,$.resolveDynamicComponent)("l-img"),R);return(0,$.openBlock)(),(0,$.createElementBlock)("view",{renderWhole:!0},[(0,$.createElementVNode)("view",{class:"quick-btn center-between",style:(0,$.normalizeStyle)(i.btnStyle)},[(0,$.createVNode)(o,{mode:"scaleToFill",src:i.btnBg,w:i.btnStyle.width,h:i.btnStyle.height},null,8,["src","w","h"]),(0,$.createElementVNode)("view",{class:"btn-content center"},[i.prefixIcon?((0,$.openBlock)(),(0,$.createBlock)(o,{key:0,src:i.prefixIcon,w:i.bgIconStyle.width,h:i.bgIconStyle.height},null,8,["src","w","h"])):(0,$.createCommentVNode)("",!0),(0,$.createElementVNode)("view",{style:{flex:"1"}}),i.suffixIcon?((0,$.openBlock)(),(0,$.createBlock)(o,{key:1,src:i.suffixIcon,w:i.bgIconStyle.width,h:i.bgIconStyle.height},null,8,["src","w","h"])):(0,$.createCommentVNode)("",!0)]),(0,$.createElementVNode)("view",{class:"btn-text-wrap"},[(0,$.createElementVNode)("u-text",{class:"def-btn-text",style:(0,$.normalizeStyle)({fontWeight:i.fw,fontSize:i.fz+"rpx"})},(0,$.toDisplayString)(i.btnText),5)])],4)])}var da=v(Sc,[["render",Cc],["styles",[wc]]]);var ri=0,gt=0,W={titleTimeCheck:5,parseMessageHasMore(e,t){let i=0,s,n,a,o;for(let l=0,c=e.forLen;l<c;l++){let u=e.rows[l],d=q(u.msg_content);if(d&&d.has_more){o=u.mtime;let h=e.rows[l+1];h?a=h.mtime:a=0,n=u.id,delete d.has_more,s=d;break}else i+=1}return e.forLen==0&&(a=0,o=t),{msgMtime:a,msgLastMTime:o,countNoHasMore:i,detailIdHasMore:n,contentDelHasMore:s}},parseSendData(e,t,i,s,n=""){let a=getApp().getCTime();return{chat_id:e,chat_type:t,send_uid:getApp().globalData.uid,msg_type:i,msg_content:s,ctime:a,mtime:n||a}},parseItem(e,t,i,s){let n=e.send_uid==getApp().globalData.uid,a,o,l;return e.chat_type==U.M_CHAT_ASS&&(s!=null&&s.is_new_ass)?(a=e.contentObj||q(e.msg_content),o=t[e.send_uid],l=t):(a=q(e.msg_content),s?(o=n?s:t,l=n?t:s):(o=n?getApp().globalData.s.state.pubUser:t,l=n?t:getApp().globalData.s.state.pubUser)),{mId:e.id,chat_id:e.chat_id,chat_type:e.chat_type,send_uid:e.send_uid,mtime:e.mtime,ctime:e.ctime,msg_type:e.msg_type,msg_content:e.msg_content,msg_status:e.msg_status||0,m_type:0,isSend:n,user:o,target_user:l,content:a,showTime:Mi(e.ctime),remark:q(e.remark),club:i}},parseMsgTime(e){return{msg_type:1e3,ctime:e,showTime:Mi(e)}},getHistoryTitleTime(e,t=W.titleTimeCheck){let i=-1;if(ri==0)return ri=e,null;i=ri;let s=null;return Ht(i,e,t)&&(s=W.parseMsgTime(i)),ri=e,s},getAddTitleTime(e,t=!1,i=W.titleTimeCheck){if(gt==0)return gt=e,null;let s=null;return Ht(gt,e,i)&&(s=W.parseMsgTime(t?e:gt),gt=e),s},parseDataText(e){let t=$n(e);if(_(t))return{content:e};let i={action:5,url:t[0]},s=[];for(let n=0,a=t.length;n<a;n++){let o=t[n];e=e.replace(o,"[x]"),s.push({text:o,color:"#0000FF"})}return{text:e,info:s,click:i}},parseDataVoice(e,t){return{voice_url:e,voice_duration:t}},parseDataPicture(e,t,i,s){return{image_url:e,image_width:t,image_height:i,small_url:s}},parseDataPicturePaid(e,t,i,s,n){return{media_type:Fe.PHOTO,image_url:e,image_width:t,image_height:i,small_url:s,content:n,price:getApp().globalData.feePhotoPrice,check_status:1}},parseDataExpression(e,t,i){return{path:e,image_width:t,image_height:i}},parseDataRecommendClub(e){return{club_id:e.club_id,club_logo:e.club_logo,club_name:e.club_name,intro:e.intro}},parseDataRecommendUser(e){return{uid:e.uid,nickname:e.nickname,avatar:e.small_avatar,sex:e.sex,birthday:e.birthday,level:e.level,is_auth:e.is_auth,is_vip:e.is_vip,is_assistant:e.is_assistant||0}},parseDataVideo(e,t,i,s,n,a){return{url:e,cover:t,small_url:i,width:s,height:n,duration:a}},parseDataVideoPaid(e,t,i,s,n,a,o){return{media_type:Fe.VIDEO,url:e,cover_url:i,small_url:t,width:s,height:n,duration:a,content:o,price:getApp().globalData.feeVideoPrice,check_status:1}},uploadVoice(e,t,i,s,n){let a=t.startsWith("_doc")?plus.io.convertLocalFileSystemURL(t):t;qt(a,this._getUploadFlag(e),Fe.VOICE,!1).then(o=>{let l=JSON.stringify(this.parseDataVoice(o.path,i));e.msg_content=l,s(l)},()=>{n(e)})},uploadPicture(e,t,i,s,n,a){qt(t,this._getUploadFlag(e),Fe.PHOTO,!0,{width:i,height:s}).then(o=>{let l=t.replace("file://","");ot(o.path,l),ot(o.smallPath,l);let c=this.parseDataPicture(o.path,i,s,o.smallPath);o.uploadId&&(c.upload_id=o.uploadId);let u=JSON.stringify(c);e.msg_content=u,n(u,o)},()=>{a(e)})},uploadVideo(e,t,i,s,n,a,o,l){Ss(this._getUploadFlag(e),t,i,s,n,!0,{width:s,height:n}).then(c=>{let u=i.replace("file://","");ot(c.smallUrl,u),ot(c.coverUrl,u);let d=this.parseDataVideo(c.url,c.coverUrl,c.smallUrl,s,n,a);c.uploadId&&(d.upload_id=c.uploadId);let h=JSON.stringify(d);e.msg_content=h,o(h,c)},()=>{l(e)})},_getUploadFlag(e){return e.chat_type==U.M_CHAT_CLUB?jt.CLUB_MSG:jt.MESSAGE},resetAddTitleTime(){gt=0}},pa=U.M_CHAT_PRI,G={init(e){pa=e},getList(e,t,i,s){return ee(this,null,function*(){let n=yield Zi(e,t,i);if(n.forLen==0)return n;let a=W.parseMessageHasMore(n,s);if(n.forLen!=0&&a.countNoHasMore==n.forLen)return n;let o={mtime:a.msgMtime,last_mtime:a.msgLastMTime,chat_id:e,chat_type:t},l;try{l=yield P.request("/msg/sync-detail ",o,!1,!0)}catch(c){l={data:{list:[]}}}return l.data&&l.data.list.length>0&&(yield Vs(e,t,l.data.list),t==U.M_CHAT_CLUB&&l.data.user_infos&&(yield ia(l.data.user_infos))),a.detailIdHasMore&&a.contentDelHasMore&&(yield tt(e,t,0,JSON.stringify(a.contentDelHasMore),a.detailIdHasMore)),Zi(e,t,i)})},setMsgRichContent(e,t,i,s,n=""){let a=this.getSendData(e,t,i,n);this.sendMsg(a,!1),pt(a,!1).then(()=>{a.user_info=s})},getSendData(e,t,i,s=""){return W.parseSendData(e,pa,t,i,s)},_send(e,t,i=!1,s=!1){let n={chat_id:t.chat_id,chat_type:t.chat_type,data:{msg_content:e,msg_type:t.msg_type}};s&&(n.data=Object.assign(n.data,s)),t.mtime=(Number(t.mtime)*1e3).toString(),pt(t,!1).then(()=>{typeof this.sendMsgBefore=="function"&&this.sendMsgBefore(t,i);let a=kc(t,e),o=a.url;a.params&&(n=a.params),P.request(o,n,!1,!0).then(l=>{ut(l.data.balance),this._sendAfterSuccess(t,l,i)},l=>{var c,u;if(((u=(c=l==null?void 0:l.data)==null?void 0:c.callback)==null?void 0:u.func_name)=="recharge_alert"){this._sendAfterFail(t,{ok:0},i),ne(X.topUpDialog);return}this._sendAfterFail(t,l,i),l.data.code==3&&this.isEnterMediaLimitPage&&(ne(X.msgSendMediaLimit),this.isEnterMediaLimitPage=!1)})})},_sendAfterSuccess(e,t,i){var s;if(t&&t.ok==1){let n=e.mtime;e.msg_status=0,e.mtime=((s=t==null?void 0:t.data)==null?void 0:s.mtime)||new Date().getTime(),t.data&&t.data.msg_index_content&&(e.msg_content=JSON.stringify(t.data.msg_index_content)),ma(e,n),Tc(e.mtime),this.sendMsgFinish(!0,e,i,t)}else this._sendAfterFail(e,t,i)},_sendAfterFail(e,t,i){let s=e.mtime;if(e.msg_status=1,e.mtime=getApp().getCTime()*1e3,ma(e,s),this.sendMsgFinish(!1,e,i,t),t&&t.ok==0){if(uni.hideKeyboard(),e.chat_type==U.M_CHAT_CLUB){if(typeof t.data.is_mute!="undefined"){let n={key:9,is_mute:t.data.is_mute,uid_arr:[e.club_info.club_uid]},a=this.getSendData(e.chat_id,w.M_NOTICE,JSON.stringify(n));a.send_uid=w.SYSTEM_ID,this.sendMsg(a,!1),Je(a)}else if(typeof t.data.is_member!="undefined"&&t.data.is_member==0){let n={key:5,uid:getApp().globalData.uid,founder:e.club_info.club_uid,uid_arr:[getApp().globalData.uid,e.club_info.club_uid]},a=this.getSendData(e.chat_id,w.M_NOTICE,JSON.stringify(n));a.send_uid=w.SYSTEM_ID,this.sendMsg(a,!1),Je(a)}else if(typeof t.data.is_disband!="undefined"&&t.data.is_disband==1){let n={key:7,uid:e.club_info.club_uid,uid_arr:[e.club_info.club_uid]},a=this.getSendData(e.chat_id,w.M_NOTICE,JSON.stringify(n));a.send_uid=w.SYSTEM_ID,this.sendMsg(a,!1),Je(a)}}}else if(t&&t.ok==-1){let n="";t.data&&t.data.tips&&(n=t.data.tips);let a=this.getSendData(e.chat_id,w.M_C_RECHARGE,JSON.stringify({type:2,tips:n}));a.send_uid=w.SYSTEM_ID,this.sendMsg(a,!1),Je(a)}else if(t&&t.ok==-2){let n=this.getSendData(e.chat_id,w.M_NOTICE,JSON.stringify({content:t.data.tips}));n.send_uid=w.SYSTEM_ID,this.sendMsg(n,!1),Je(n)}if(t&&t.data&&t.data.callback&&t.data.callback.func_name=="recharge_alert"){let n=this.getSendData(e.chat_id,w.M_C_RECHARGE,JSON.stringify({type:1,coins:t.data.msg_price||1}));n.send_uid=w.SYSTEM_ID,this.sendMsg(n,!1),Je(n)}},sendText(e,t,i="",s=null){if(_(t))return;let n,a=!1,o=W.parseDataText(t);G.replyMsgData&&(o.reply=G.replyMsgData),n=JSON.stringify(o);let l=this.getSendData(e,w.M_TEXT,n);this.sendMsg(l);let c={content:t};G.replyMsgData&&(c.reply=G.replyMsgData,G.replyMsgData=""),i&&(c.gift_record=i),s&&(c=Object.assign(c,s)),this._send(JSON.stringify(c),l,!1,a)},sendVoice(e,t,i){let s=JSON.stringify(W.parseDataVoice(t,i)),n=this.getSendData(e,w.M_VOICE,s);this.sendMsg(n),W.uploadVoice(n,t,i,a=>{this._send(a,n)},a=>{this._sendAfterFail(a,null)})},sendRecommendClub(e,t){let i=JSON.stringify(W.parseDataRecommendClub(t)),s=this.getSendData(e,w.RECOMMEND_CLUB,i);this.sendMsg(s),this._send(i,s)},sendRecommendUser(e,t){let i=JSON.stringify(W.parseDataRecommendUser(t)),s=this.getSendData(e,w.RECOMMEND_USER,i);this.sendMsg(s),this._send(i,s)},sendPicture(e,t,i,s){let n=JSON.stringify(W.parseDataPicture(t,i,s,t)),a=this.getSendData(e,w.M_IMG,n);this.sendMsg(a),W.uploadPicture(a,t,i,s,o=>{this._send(o,a)},o=>{this._sendAfterFail(o,null)})},sendVideo(e,t,i,s,n,a){let o=`file://${i}`,l=JSON.stringify(W.parseDataVideo(t,o,o,s,n,a)),c=this.getSendData(e,w.M_VIDEO,l);this.sendMsg(c),W.uploadVideo(c,t,i,s,n,a,u=>{this._send(u,c)},u=>{this._sendAfterFail(u,null)})},sendGift(e,t){if(Object.keys(t).length<=0)return;let i={gift_id:t.gift_id,icon:t.icon,price:t.price,title:t.title,number:t.count,svga_url:t.svga_url},s=1;if(t.gift_source)i.gift_source=1,showGiftAnim(t,!0);else if(s=Is(t.price),s==0)return;let n,a=JSON.stringify(i);n=this.getSendData(e,w.M_GIFT,a),this.sendMsg(n),this.reqSendGift(n,ha(e,t),!1)},sendClubGift(e,t){if(Object.keys(t).length<=0)return;let i={gift_id:t.gift_id,icon:t.icon,price:t.price,title:t.title,number:t.count,svga_url:t.svga_url,to_uid:t.to_uid};showGiftAnim(t,!0),i.from_type=t.from_type?t.from_type:Oe.CLUB,t.gift_source&&(i.gift_source=1);let s=[],n={};if(t.user_list)for(let o=0,l=t.user_list.length;o<l;o++){let c=t.user_list[o];i.to_user_info=c,n=this.getSendData(e,w.M_GIFT,JSON.stringify(i)),this.sendMsg(n),s.push(n)}else n=this.getSendData(e,w.M_GIFT,JSON.stringify(i)),this.sendMsg(n),s=[n];let a=fa(e,t,t.count);this.reqSendClubGift(s,a)},sendAskGift(e,t){if(Object.keys(t).length<=0)return;let i={gift_id:t.gift_id,icon:t.icon,price:t.price,title:t.title},s=this.getSendData(e,w.M_GIFT_ASK,JSON.stringify(i));this.sendMsg(s),this.reqSendGiftAsk(s,{gift_id:t.gift_id,to_uid:e})},sendExpressionImg(e,t,i,s){let n=JSON.stringify(W.parseDataExpression(t,i,s,t)),a=this.getSendData(e,w.M_EXPRESSION,n);this.sendMsg(a),this._send(n,a)},reqSendClubGift(e,t,i=!1){Ac(e).then(()=>{P.request("/chat/gift/send",t,!1,!0,!1).then(s=>{ut(s.data.balance);for(let n=0,a=e.length;n<a;n++)this._sendAfterSuccess(e[n],s,i);s.data.from_bag&&updateGiftBagRes()},()=>{for(let s=0,n=e.length;s<n;s++)this._sendAfterFail(e[s],!1,i)})})},reqSendGift(e,t,i=!1){e.mtime=(Number(e.mtime)*1e3).toString(),pt(e,!1).then(()=>{P.request("/gift/send",t,!1,!0,!1).then(s=>{ut(s.data.balance),this._sendAfterSuccess(e,s,i)},s=>{var n,a;if(((a=(n=s==null?void 0:s.data)==null?void 0:n.callback)==null?void 0:a.func_name)=="recharge_alert"){this._sendAfterFail(e,!1,i),ne(X.topUpDialog);return}this._sendAfterFail(e,!1,i)})})},reqSendGiftAsk(e,t,i=!1){e.mtime=(Number(e.mtime)*1e3).toString(),pt(e,!1).then(()=>{P.request("/gift/ask",t,!1,!0).then(s=>{this._sendAfterSuccess(e,s,i)},()=>{this._sendAfterFail(e,!1,i)})})},resend(e){if(e.ctime=getApp().getCTime(),e.mtime=e.ctime*1e3,e.msg_status=0,this.sendMsg(e),e.msg_type==w.M_VOICE){let t=q(e.msg_content);Vt(t.voice_url)?W.uploadVoice(e,t.voice_url,t.voice_duration,i=>{this._send(i,e,!0)},i=>{this._sendAfterFail(i,null,!0)}):this._send(e.msg_content,e,!0)}else if(e.msg_type==w.M_IMG){let t=q(e.msg_content);Vt(t.image_url)?W.uploadPicture(e,t.image_url,t.image_width,t.image_height,i=>{this._send(i,e,!0)},i=>{this._sendAfterFail(i,null,!0)}):this._send(e.msg_content,e,!0)}else if(e.msg_type==w.M_VIDEO){let t=q(e.msg_content);Vt(t.url)?W.uploadVideo(e,t.url,t.cover,t.width,t.height,t.duration,i=>{this._send(i,e,!0)},i=>{this._sendAfterFail(i,null,!0)}):this._send(e.msg_content,e,!0)}else if(e.msg_type==w.M_GIFT){let t=q(e.msg_content);if(!t)return;let i={};e.chat_type==U.M_CHAT_CLUB?i=fa(e.chat_id,t,t.number):(t.count=t.number,i=ha(e.chat_id,t)),this.reqSendGift(e,i,!0)}else if(e.msg_type==w.M_GIFT_ASK){let t=q(e.msg_content);this.reqSendGiftAsk(e,{gift_id:t.gift_id,to_uid:e.chat_id},!0)}else this._send(e.msg_content,e,!0)},replyMsgData:""};function ha(e,t){let i={from_type:Oe.MSG,gift_id:t.gift_id,to_uid:e,action:1,number:t.count};return typeof t.gift_source!="undefined"&&(i.gift_source=t.gift_source),typeof t.from_ask!="undefined"&&(i.from_ask=t.from_ask),i}function fa(e,t,i){let s={from_type:Oe.CLUB,gift_id:t.gift_id,to_uid:t.to_uid,action:1,number:i,club_id:e};return t.gift_source&&(s.gift_source=1),s}function Ac(e){return new Promise(t=>{let i=e.length,s=0;for(let n=0;n<i;n++){let a=e[n];a.mtime=(Number(a.mtime)*1e3).toString(),pt(a,!1).then(()=>{s+=1,s==i&&t()})}})}function ma(e,t){let i={mtime:e.mtime,msg_status:e.msg_status,msg_content:`'${se(e.msg_content)}'`};zs(e.chat_id,e.chat_type,t,i).then(()=>Zt(e.chat_id,e.chat_type)).then(s=>s?s.mtime!=t?De:Ws(e.chat_id,e.chat_type,i):De).then(s=>{typeof s!="undefined"&&s==1&&uni.$emit("event_msg_index_send",e)})}function Tc(e){let t=Le(`msg_index_sync_time_${getApp().globalData.uid}`);e>=t&&aa()&&(getApp().globalData.adminKefuDBSyncDoing||ke(`msg_index_sync_time_${getApp().globalData.uid}`,e))}function kc(e,t){let i,s;e.chat_type==U.M_CHAT_ASS?getApp().globalData.useServiceGroup==1?(i="/msg/send-to-customer",s={data:{msg_content:t,msg_type:e.msg_type}}):i="/msg/send-to-service":getApp().globalData.useServiceGroup==1?(i="/msg/send-group",s={chat_id:e.chat_id,data:{msg_content:t,msg_type:e.msg_type}}):i="/msg/send";let n={url:i};return s&&(n.params=s),n}var vc={ACCOUNT:0,LOGIN:1,MESSAGE:2,RECHARGE:6,MSG_SYSTEM:7,DEVICE:8,IP:9,CALL:10,WITHDRAW:11,JOIN_CLUB:14,CREATE_CLUB:15,COACH_LIST:16,SAY_HELLO_MSG:17,GIFT:18,MATCH:19,MOMENT:20,TASK:21,GAME:22,INVITE:23,CERTIFICATION:24,CONSUME:25,NOTIFICATION:26,RANKING_LIST:27},kt=getApp().globalData.window,cn=Ie("dom"),Ic=Ie("animation"),oi=0,Ec={data(){return{indexCTime:0,indexMTime:0,messageNone:1,navBarTitle:"",showMask:!0,sw:kt.width,viewHeight:kt.height-kt.statusBarHeight-44,msgBarHeight:kt.safeBottom+uni.upx2px(104),backgroundWidth:getApp().globalData.window.width,backgroundHeight:getApp().globalData.window.height-kt.statusBarHeight-44,scrollable:!0,previewList:[],previewKeyList:[],isAddTitleClick:!1,failObj:{},inputHeight:uni.upx2px(35),itemHeightLast:10,itemHeightFirst:10,changeHTop:0,changeHBottom:0,barActionHeight:0,barSlotShow:!0,barSlotH:0,barSlotHeight:uni.upx2px(0),replyMsgData:"",replyMsgMtime:"",isLoading:!1}},computed:{mutedTips(){return this.muteMaskType==1?p("msg.mutedYouTip"):p("msg.mutedAllTip")},pageBg(){return{background:"transparent"}}},methods:{clickBarGift(){this.checkClubMuted()||this.$refs.giftSheet.open(this.chatId)},clickBarUser(){this.checkClubMuted()||Te("/pagesPub/user/user-list",{from_type:3},"data",{},{onRecommendListener:this.onRecommendListener})},clickBarClub(){this.checkClubMuted()||Te("/pagesClub/search",xt({type:2},this.fromClub?{fromClub:this.fromClub}:{}),"data",{},{onRecommendListener:this.onRecommendListener})},clickMsgList(e){e&&e.stopPropagation(),this.$refs.msgBar&&this.$refs.msgBar.hide()},clickPicture(e){let t=this.previewKeyList.indexOf(e.pKey);t!=-1&&as(this.previewList,t,0)},clickFail(e,t,i){!e||e.chat_id!=this.chatId||e.chat_type!=this.chatType||this.chatType==U.M_CHAT_ASS&&Es(vc.MSG_SYSTEM,!1)||Ce(p("tips"),p("msg.resendTips"),()=>{let s=this.failObj[e.ctime];_(s)&&(s=e);let n=this.list[t+1];if(this.onMsgAction(1,i,t,e),n){let a=!1;n.msg_type==w.M_C_RECHARGE?a=!0:n.msg_type==w.M_NOTICE&&(a=[5,7,9].indexOf(n.content.key)!=-1),a&&this.$nextTick(()=>{let o=this.$refs[`msg${n.ctime}`][0].index;typeof o!="undefined"&&this.onMsgAction(1,i,o,n)})}this.scrollToBottom(),this.resend(s)},"",p("resend"))},checkClubMuted(){return this.chatType==U.M_CHAT_CLUB&&this.muteMaskType>0?(Ue(p("tips"),this.mutedTips,"",p("gotIt")),!0):!1},resetAddTitleTime(){W.resetAddTitleTime()},sendMsgFinish(e,t,i,s){try{if(this.$refs[`msg${t.ctime}`][0].hideLoading(t.mtime),s&&s.data&&s.data.income&&this.$refs[`msg${t.ctime}`][0].showIncome(s.data.income),t.user_info=this.user,e){delete this.failObj[t.ctime],typeof this.sendMsgFinishAfter=="function"&&this.sendMsgFinishAfter(t,s);return}this.handleFail(t)}catch(n){E("error","at pagesMsg/chat.mixin.js:139","sendMsgFinish catch error ---> ",n)}},sendMsgBefore(e,t){try{e.user_info=this.user,uni.$emit("event_msg_index_send",e,t)}catch(i){E("error","at pagesMsg/chat.mixin.js:147","sendMsgBefore catch error ---> ",i)}},clearIndexUnread(){Ps(this.chatId,this.chatType).then(e=>{e<=0||(P.request("/msg/read",{chat_id:this.chatId}),this.chatType==U.M_CHAT_PRI&&getApp().globalData.s.commit("setUnread",-1),uni.$emit("event_msg_index_unread",{chatId:this.chatId,chatType:this.chatType,unread:e}))})},clearReplyMsgData(){_(this.replyMsgData)||(this.replyMsgData="",this.barSlotHeight-=uni.upx2px(88))},animDef(e,t,i,s=!1,n){Ic.transition(e,{styles:t,duration:i,timingFunction:"ease",needLayout:s,delay:0},()=>{typeof n=="function"&&n()})},addPreviewInfo(e,t){if([w.M_IMG,w.M_VIDEO].indexOf(Number(e.msg_type))==-1)return null;try{let i=Jn(),s=e.content,n=ss(e,s);return t==1?(this.previewList.unshift(n),this.previewKeyList.unshift(i)):(this.previewList.push(n),this.previewKeyList.push(i)),i}catch(i){return null}},addMsgTimeByFirst(){let e=this.list[this.list.length-1];e==null||e.msg_type==1e3||this.list.push(W.parseMsgTime(e.ctime))},addMsgTimeByLast(e,t=W.titleTimeCheck){if(oi==0){let i=this.list[this.list.length-1];!_(i)&&i.ctime&&(oi=i.ctime)}Ht(oi,e,t)&&(this.list.push(W.parseMsgTime(e)),oi=e)},addMsgTranslateTip(e,t=!1){if(e&&t){if(Le("translate_auto_msg"))return;ke("translate_auto_msg",1)}let i=e?p("msg.translateAutoOpenMsgTips"):p("msg.translateAutoCloseMsgTips"),s=W.parseSendData(this.chatId,U.M_CHAT_PRI,w.M_NOTICE,JSON.stringify({content:i})),n=getApp().getCTime();s.ctime=n,s.mtime=n*1e3,s.send_uid=1;let a=W.parseItem(s,getApp().pubUser);this.list.unshift(a)},addMsg(e,t,i,s){let n;e.chat_type==U.M_CHAT_CLUB?(this.userInfos=Object.assign(this.userInfos,e.user_infos),n=W.parseItem(e,this.userInfos,this.club)):n=W.parseItem(e,t,{},s),this.addMsgTimeByLast(n.ctime);let a=this.addPreviewInfo(n,2);a&&(n.pKey=a),this.list.push(n),this.$nextTick(()=>{this.scrollToBottom(),typeof i=="function"&&i()})},setCurChat(e){e?(getApp().globalData.curChatId==this.chatId&&(getApp().globalData.curChatId=0),getApp().globalData.curChatType==this.chatType&&(getApp().globalData.curChatType=0)):(getApp().globalData.curChatId=this.chatId,(this.chatId!=w.SYSTEM_ID||this.chatType==U.M_CHAT_ASS)&&(getApp().globalData.curChatType=this.chatType))},changeBarSlot(e){if(!(this.barSlotH<=0)&&this.barSlotShow!=e&&!(e&&this.barActionHeight>0))if(this.barSlotShow=e,this.messageNone){let t={transform:`translateY(${e?0:this.barSlotH}px)`};this.animDef(this.$refs.refBarSlot,t,Y.isAndroid?10:200,!0)}else if(Y.isAndroid)this.barSlotHeight=e?this.barSlotH:0;else{let t={height:`${e?this.barSlotH:0}px`};this.animDef(this.$refs.refBarSlot,t,200,!0)}},parseMsgItem(e,t,i,s,n,a=!1){let o=W.getAddTitleTime(t.ctime,a);o!=null&&e.push(o);let l;t.chat_type==U.M_CHAT_CLUB?l=W.parseItem(t,this.userInfos,this.club):l=W.parseItem(t,this.user,{},n);let c=this.addPreviewInfo(l,i);c&&(l.pKey=c),e.push(l)},handleFail(e){this.failObj[e.ctime]=e,this.$refs[`msg${e.ctime}`][0].showFail()},handleGetUsers(e){return new Promise(t=>ee(this,null,function*(){let i=[];for(let s=0,n=e.length;s<n;s++){let a=e[s],o=q(a.msg_content);if(a.contentObj=o,o.uid_arr)for(let l=0,c=o.uid_arr.length;l<c;l++)!this.userInfos[o.uid_arr[l]]&&i.indexOf(o.uid_arr[l])==-1&&i.push(o.uid_arr[l]);o.tran_text&&(this.tranTextLen+=1),this.userInfos&&!this.userInfos[a.send_uid]&&i.indexOf(a.send_uid)==-1&&i.push(a.send_uid)}if(i.length>0){let s=yield sa(i,!1);this.userInfos=Object.assign(this.userInfos,s),t()}else t()}))},handleSyncFinish(){return ee(this,null,function*(){E("error","at pagesMsg/chat.mixin.js:310","--------> \u6267\u884C\u6D88\u606F\u540C\u6B65\u7ED3\u675F \u5237\u65B0\u6D88\u606F\u3002\u3002\u3002");let e;this.list.length>0?e=this.list[this.list.length-1]:e=null;let t=e?e.ctime:0,i;Hs(this.chatId,this.chatType,t,40).then(s=>!s.length||s.length<=0?De:(i=s,this.handleGetUsers(s))).then(()=>{this.clearIndexUnread();let s=!1,n=-1;for(let u=0,d=i.length;u<d;u++){let h=i[u],f=q(h.msg_content);if(s=f?f.has_more:!1,s){n=u;break}}let a=i;s&&(a=i.slice(n+1,i.length),this.previewList=[],this.previewKeyList=[]);let o=this.list.length,l=[];for(let u=0,d=a.length;u<d;u++)this.parseMsgItem(l,a[u],2,u,"",!0);for(let u=0,d=l.length;u<d;u++)this.list.push(l[u]);if(this.$nextTick(()=>{this.scrollToBottom()}),!s)return;this.list.splice(0,o);let c=a[0];this.indexCTime=c.ctime,this.indexMTime=c.mtime})})},scrollToBottom(){cn.scrollToElement(this.$refs.cellLast,{animated:!1})},scrollBottom(e=!1){let t=this.messageNone?"cellNew":"cellLast";this.scrollList(this.$refs[t],e)},scrollList(e,t=!0){cn.scrollToElement(e,{animated:t})},getReplyMsgNickname(e){return e.chat_type==U.M_CHAT_ASS?e.chat_id==w.SYSTEM_ID&&e.send_uid!=getApp().globalData.uid?p("customerService"):e.chat_id!=w.SYSTEM_ID&&e.send_uid!=e.chat_id?p("customerService"):e.user.nickname:e.user.nickname},getSaveReplyMsg(e){let t=sn(e),i=an(e);return{nickname:this.getReplyMsgNickname(e),ctime:e.ctime,mtime:e.mtime,msg_type:e.msg_type,content:t,img:i}},onClickTextReplyContent(e){let t=this.$refs["cell"+e.mtime];if(!t)return;cn.scrollToElement(t[0],{animated:!0,offset:0});let i=setTimeout(()=>{this.replyMsgMtime=e.mtime;let s=setTimeout(()=>{this.replyMsgMtime="",clearTimeout(s)},500);clearTimeout(i)},300)},onClickMsgBarReplyClose(){this.clearReplyMsgData(),G.replyMsgData&&(G.replyMsgData="")},onTranslateAutoChange(e){this.addMsgTranslateTip(e,!1)},onRecordFinish(e){E("error","at pagesMsg/chat.mixin.js:421","-----> msg onRecordFinish "+JSON.stringify(e)),this.onRecordFinishNext(e)},onKeyboardChange(e){let t=e.height>0;t&&this.scrollToBottom(),this.changeBarSlot(!t),this.onKeyboardChangeNext(t,e.height),ns(e)},onRecommendListener(e,t){e==2?G.sendRecommendClub(this.chatId,t):e==1&&G.sendRecommendUser(this.chatId,t)},onMsgItemPopListener(e){e.data.isAdmin||!e.data||e.data.chat_id!=this.chatId||e.data.chat_type!=this.chatType||this.$refs.msgItemPop.open(e)},onMsgItemPopDel(e){this.onMsgAction(1,e.listType,e.index,e.msgData)},onMsgItemPopReply(e){this.onMsgAction(2,e.listType,e.index,e.msgData)},onGiftSheetChange(e){if(e.show){if(this.barActionHeight>0)return;let t=e.height-this.msgBarHeight;this.messageNone?(this.changeHBottom=t,this.$nextTick(()=>{this.scrollToBottom()})):this.changeHTop=t}else this.changeHTop=0,this.changeHBottom=0},onMsgAction(e,t,i,s){if(!(s.chat_id!=this.chatId||s.chat_type!=this.chatType))if(e==1){if(i<0)return;this.list.splice(i,1),js(s.chat_id,s.chat_type,0,s.ctime);let n=this.previewKeyList.indexOf(s.pKey);if(n==-1)return;this.previewList.splice(n,1),this.previewKeyList.splice(n,1)}else e==2&&(_(this.replyMsgData)&&(this.barSlotHeight=this.barSlotHeight+uni.upx2px(88)),this.replyMsgData=s,G.replyMsgData=this.getSaveReplyMsg(s),this.$refs.msgBar.focus())},onActionOpen(e,t){this.barActionHeight=t,typeof this.onActionOpenAfter=="function"&&this.onActionOpenAfter(e,t),this.$nextTick(()=>{if(e)this.messageNone&&this.scrollToBottom();else{let i=setTimeout(()=>{this.messageNone&&this.scrollToBottom(),clearTimeout(i)},100)}this.changeBarSlot(!e),this.onActionOpenNext(e,t)})},onInputLineChange(){this.messageNone&&this.scrollToBottom()},initTitle(){this.isAddTitleClick||(this.currentWebview.getTitleNView().addEventListener("click",this.clickTitle,!1),this.isAddTitleClick=!0)}},onShow(){this.setCurChat(!1)},onHide(){this.setCurChat(!0),uni.hideKeyboard()},onLoad(){uni.$on("event_translate_auto_change",this.onTranslateAutoChange)},onUnload(){uni.$off("event_translate_auto_change",this.onTranslateAutoChange),uni.$emit("event_finish_chat"),this.setCurChat(!0)}},Mc={data(){return{__isPopGestureBack:!1}},methods:{__getWebview(){return plus.webview.currentWebview()},__webviewPopGestureListener(e){let t=e.progress>=50;getApp().globalData.isGestureBacking=t,this.__isPopGestureBack=t}},onReady(){Y.isAndroid||this.__getWebview().addEventListener("popGesture",this.__webviewPopGestureListener)},onUnload(){if(Y.isAndroid)return;getApp().globalData.isGestureBacking=!1,this.__isPopGestureBack=!1;let e=this.__getWebview();typeof e!="undefined"&&e.removeEventListener("popGesture",this.__webviewPopGestureListener)}};function Dc(e){if(Y.isAndroid){setTimeout(()=>{uni.setNavigationBarTitle({title:e})},300);return}uni.setNavigationBarTitle({title:e})}var Lc=Ie("dom"),ga=getApp().globalData.window,Ne={NOT_APPLY:0,APPLYING:3,APPLY_SUCCESS:1,APPLY_FAIL:2,FRIENDS_DELETE:-1,FRIENDS_EXPIRE:-2},Fc={mixins:[ra],data(){return{chatId:0,chatType:1,inputFocus:!1,actionIsOpen:!1,actionHeight:0,showActionHeight:0,user:{},userCover:{},msgHasMore:!0,moreActions:[],userAlbum:[],isAuth:et(),barComWords:"",showCall:!0,showGift:!1,giftIsAsk:!1,translateAuto:!1,useBg1_1:!1,giftFromType:Oe.MSG,refreshUser:!1,hideOnline:!0,initFinish:void 0,hasNoReply:void 0,isSaveCheatMsg:!1,titleMaxWidth:getApp().globalData.window.width-100,webview:null,appid:1,realUser:null,otherIsAgent:void 0,myUser:JSON.parse(JSON.stringify(getApp().pubUser)),realMyUser:null,defaultMsgBarText:"",list:[],loadMore:"loading",loadContent:{contentrefresh:" ",contentnomore:" "},chatUserInfo:{},isEnterMediaLimitPage:!0,formType:0,isFirstChat:!1,chatIsReply:!0,addFriendsType:1,ADD_FRIENDS_TYPE:Ne,friendApplyStatus:""}},computed:{showBarScrollView(){return!_(getApp().pubUpper)&&this.chatId==getApp().pubUpper.uid?(this.barSlotHeight=0,!1):this.otherIsAgent?(this.barSlotHeight=0,!1):(this.barSlotHeight=this.user.is_black?0:uni.upx2px(84),!this.user.is_black)}},methods:{$str:p,clickCall(e){var t;if(!(((t=getApp().pubUser)==null?void 0:t.auth_status)==1)&&!Ms()){ne(X.authenticationDialog);return}if(this.addFriendsType==this.ADD_FRIENDS_TYPE.APPLYING){We(p("applyingWaitingForAgree"));return}if(!ve("chat_pri_video_tip_dialog")){Te(X.sendVideoTip,"","","",{onChatPriVideoTipDialog:()=>{this.clickCall(e)}});return}P.request("/call/check",{target_uid:this.realUser.uid},!1,!0).then(s=>{let n=this.user.video?this.user.video:"";la(e,this.user,n,Zs.MSG)},s=>{this.addFriendsType=this.addFriendsType==Ne.APPLY_SUCCESS?Ne.NOT_APPLY:this.addFriendsType})},clickAddFriends(){if(this.friendApplyStatus.to_apply_status==this.ADD_FRIENDS_TYPE.APPLYING){Ce(p("tips"),p("addFriendsToApplying"),()=>{P.request("/friend/agree",{to_uid:this.realUser.uid},!1,!0).then(e=>{this.addFriendsType=this.ADD_FRIENDS_TYPE.APPLY_SUCCESS,this.friendApplyStatus.to_apply_status=this.ADD_FRIENDS_TYPE.APPLY_SUCCESS;let t={content:p("iAgreedYourFriendRequest"),is_friend_agree:1},i=JSON.stringify(t);G.setMsgRichContent(this.chatId,w.M_TEXT,i,this.chatUserInfo,e.data.mtime)},e=>{})},"",p("agree"));return}this.addFriendsType==this.ADD_FRIENDS_TYPE.APPLYING?We(p("applyingWaitingForAgree")):P.request("/friend/apply",{from_type:2,to_uid:this.realUser.uid},!1,!0).then(e=>{this.addFriendsType=this.ADD_FRIENDS_TYPE.APPLYING},e=>{e.data.friend_apply_status.to_apply_status==Ne.APPLYING&&Ce(p("tips"),p("addFriendsToApplying"),()=>{P.request("/friend/agree",{to_uid:this.realUser.uid},!1,!0).then(t=>{this.addFriendsType=this.ADD_FRIENDS_TYPE.APPLY_SUCCESS,this.friendApplyStatus.to_apply_status=this.ADD_FRIENDS_TYPE.APPLY_SUCCESS;let i={content:p("iAgreedYourFriendRequest"),is_friend_agree:1},s=JSON.stringify(i);G.setMsgRichContent(this.chatId,w.M_TEXT,s,this.chatUserInfo,t.data.mtime)},t=>{})},"",p("agree")),e.data.friend_apply_status.my_apply_status==1&&(this.addFriendsType=e.data.friend_apply_status.my_apply_status,this.friendApplyStatus=e.data.friend_apply_status)})},changeMyUserApp(){let e=Qs(Number(this.user.appid));_(e)||(this.realMyUser&&delete this.realMyUser.avatar,this.$nextTick(()=>{this.realMyUser=this.myUser,this.realMyUser.avatar=e.avatar,this.realMyUser.small_avatar=e.small_avatar}))},changeBlack(e,t){if(t!=this.chatId)return;this.user.is_black=e;let i=ve("chat_pri_data",this.chatId);i&&(i=JSON.parse(JSON.stringify(i)),i.user_info.is_black=e,Ze("chat_pri_data",i,this.chatId)),uni.$emit("event_clear_text")},changeMsgBarScroll(){this.$nextTick(()=>{this.scrollBottom()})},getAge(e){return _(e.birthday)?"":" "+Wt(e.birthday)},resend(e){G.resend(e)},msgContentFriendsStatus(e){switch((e.msg_content?JSON.parse(e.msg_content):{}).sub_type){case 2:this.addFriendsType=this.ADD_FRIENDS_TYPE.APPLY_SUCCESS,this.friendApplyStatus={my_apply_status:this.ADD_FRIENDS_TYPE.APPLY_SUCCESS,to_apply_status:this.ADD_FRIENDS_TYPE.APPLY_SUCCESS};break;case 3:this.addFriendsType=this.ADD_FRIENDS_TYPE.APPLY_FAIL,this.friendApplyStatus={my_apply_status:this.ADD_FRIENDS_TYPE.APPLY_FAIL,to_apply_status:this.ADD_FRIENDS_TYPE.APPLY_FAIL};break;case 4:this.addFriendsType=this.ADD_FRIENDS_TYPE.FRIENDS_EXPIRE,this.friendApplyStatus={my_apply_status:this.ADD_FRIENDS_TYPE.FRIENDS_EXPIRE,to_apply_status:this.ADD_FRIENDS_TYPE.FRIENDS_EXPIRE};break}},receiveMsg(e){e.chat_id!=this.chatId||e.chat_type!=this.chatType||(e.msg_type==w.M_NOTICE&&this.msgContentFriendsStatus(e),this.addMsg(e,this.user,"",this.myUser),e.msg_type!=w.M_NOTICE&&!this.chatIsReply&&(this.chatIsReply=!0))},sendMsg(e,t=!0){this.addMsg(e,this.user,()=>{t&&this.$refs[`msg${e.ctime}`][0].showLoading()},this.myUser)},sendMsgFinishAfter(e,t){},setMyAvatarByAppId(){if(_(this.user.appid))return;let e=ve("app_user_list");if(_(e))return;e=q(e);let i=e.map(n=>Number(n.appid)).indexOf(Number(this.user.appid));if(i==-1)return;let s=e[i];s.app_show!=0&&(this.myUser.avatar=s.avatar,this.myUser.small_avatar=s.small_avatar)},addMsgFirst(){let e=W.parseSendData(this.chatId,U.M_CHAT_PRI,1e4,""),t=getApp().getCTime();e.ctime=t,e.mtime=t*1e3,e.send_uid=1;let i=W.parseItem(e,this.user);this.messageNone?this.list.length>0?this.list.unshift(i):this.list.push(i):this.list.unshift(i)},upDateFirstChatStatus(){this.isFirstChat=!1,G.isFirstChat=!1},onSend(e){this.clearReplyMsgData(),G.sendText(this.chatId,e)},onSendGift(e){G.sendGift(this.chatId,e)},onSendAskGift(e){G.sendAskGift(this.chatId,e)},onRecordFinishNext(e){!e||!e.path||!e.duration||G.sendVoice(this.chatId,e.path,e.duration)},onChoosePicture(e,t){e==0?G.sendPicture(this.chatId,t.path,t.width,t.height):e==1&&G.sendVideo(this.chatId,t.path,t.coverPath,t.width,t.height,t.duration)},onChooseExpressImg(e){G.sendExpressionImg(this.chatId,e.path,e.width,e.height)},onClickSendAsk(e){e.content.count=1,this.onSendGift(e.content)},onClickActionItem(e){return ee(this,null,function*(){e.key=="block"?Ki(this.user.uid,this.user.is_black,()=>{this.changeBlack(!this.user.is_black,this.chatId)}):e.key=="report"?ne(X.reportUser,{user:JSON.stringify(this.user),type:1,target_id:this.user.uid}):e.key=="clearChat"?Ce(p("tips"),p("clearChatMsgHistory"),()=>ee(this,null,function*(){yield Gs(this.chatId,this.chatType),yield Us(this.chatId,this.chatType,""),this.list=[],this.addMsgFirst(),uni.$emit("event_msg_index_refresh"),P.request("/msg/clear-msg",{chat_id:this.chatId}).then(t=>{})}),"",p("clear")):e.key=="deleteSession"?Ce(p("tips"),p("deleteChatMsgHistory"),()=>ee(this,null,function*(){yield Bs(this.chatId,this.chatType),yield Qi(this.chatId,this.chatType),uni.$emit("event_msg_index_refresh"),P.request("/msg/delete",{chat_id:this.chatId,mtime:0}),Fi()}),"",p("delete")):e.key=="removeFriends"&&Ce(p("tips"),p("removeFriendsTipContent"),()=>ee(this,null,function*(){P.request("/friend/delete",{friend_uid:this.realUser.uid}).then(t=>{this.addFriendsType=Ne.FRIENDS_DELETE},t=>{})}),"",p("sure"))})},onKeyboardChangeNext(e){},onActionOpenNext(e,t){},onInputFocus(){this.inputFocus=!0,this.actionIsOpen&&(this.showActionHeight=0);let e=setTimeout(()=>{this.scrollToBottom(),clearTimeout(e)},20)},onInputBlur(){this.inputFocus=!1,this.actionIsOpen&&(this.showActionHeight=this.actionHeight)},onPausedVoice(e){this.onChangeRecording(e)},onActionOpenAfter(e,t){this.inputFocus&&(this.inputFocus=!1),this.actionIsOpen=e,this.actionHeight=t-ga.safeBottom,this.showActionHeight=t-ga.safeBottom;let i=setTimeout(()=>{this.scrollToBottom(),clearTimeout(i)},20)},onSetDefaultMsg(e){if(_(e))return;let t=this.$refs.msgBar;t&&t.setText(e)},onSendMediaLimitOne(){this.isEnterMediaLimitPage=!0,G.isEnterMediaLimitPage=this.isEnterMediaLimitPage},onSendMediaGift(){this.clickBarGift()},onListScroll(e){return ee(this,null,function*(){if(this.loadMore!="nomore"&&this.initFinish&&!this.isLoading)if(e.contentOffset.y<=0&&e.contentOffset.y>=-40){this.isLoading=!0,this.loadMore="loading";let t=setTimeout(()=>ee(this,null,function*(){clearTimeout(t),yield this.loadMessage(),this.msgHasMore=this.loadMore=="loadmore",this.isLoading=!1,this.$nextTick(()=>{this.$refs.msgList.resetLoadmore(),this.msgHasMore||this.addMsgFirst()})}),300)}else this.isLoading=!1})},onUpdateAddFriendsStatus(e){switch(e.sub_type){case 1:this.friendApplyStatus.to_apply_status=Ne.APPLYING;break;case 2:this.addFriendsType=Ne.APPLY_SUCCESS,this.friendApplyStatus.to_apply_status=Ne.APPLY_SUCCESS;break;case 3:this.addFriendsType=Ne.APPLY_FAIL;break;case 4:this.addFriendsType=Ne.FRIENDS_EXPIRE;break}},onClickMore(){this.moreActions=[{title:p("report"),key:"report"},{title:p("block"),key:"block"},{title:p("clearChat"),key:"clearChat"},{title:p("deleteSession"),key:"deleteSession"}],this.addFriendsType==Ne.APPLY_SUCCESS&&this.moreActions.unshift({title:p("removeFriends"),key:"removeFriends"}),this.$refs.moreAction.open()},refreshMessage(){return ee(this,null,function*(){this.indexCTime=0,this.indexMTime=0,this.list=[],this.messageNone=1,yield this.loadMessage()})},loadMessage(){return ee(this,null,function*(){let e=yield G.getList(this.chatId,this.chatType,this.indexCTime,this.indexMTime);this.indexCTime==0&&!e.hasMore?this.messageNone=1:this.messageNone=0,this.indexCTime=e.ctime,this.indexMTime=e.mtime,this.loadMore=e.hasMore?"loadmore":"nomore",this.messageNone==1&&(this.msgHasMore=this.loadMore!="nomore");let t=[];for(let i=0,s=e.forLen;i<s;i++)this.parseMsgItem(t,e.rows[i],2,i,this.myUser);if(this.messageNone==1&&e.rows.length>0){let i=e.rows[e.rows.length-1];t.push(W.parseMsgTime(i?i.ctime:new Date().getTime()))}for(let i=0,s=t.length;i<s;i++){let n=t[i];this.list.unshift(n)}return this.messageNone==1&&this.addMsgFirst(),e.rows.length==0&&this.indexCTime==0&&this.formType==1,this.translateAuto&&e.rows.length>0&&this.addMsgTranslateTip(!0,!0),e.rows})},setOnlineStatusPoint(e){this.$nextTick(()=>{setTimeout(()=>{Lc.getComponentRect(this.$refs.titleText,t=>{if(t&&t.size){let i=getApp().globalData.window.width,s=parseInt(t.size.width);s>this.titleMaxWidth&&(s=this.titleMaxWidth);let n=s/2+i/2+4;Y.isAndroid||(n-=44),oa(e,n,this.webview)}})},100)})},setWebview(){let e=getCurrentPages(),t=e[e.length-1];this.webview=t.$getAppWebview()},parseData(e){try{let t=e.user_info;this.hideOnline=t.hide_online==1,e.send_alert_tips&&(t.send_alert_tips=e.send_alert_tips),e.send_limit_level&&(t.send_limit_level=e.send_limit_level),this.chatIsReply=t.is_reply==1,_(e.album)||(this.userAlbum=e.album),this.initData(t)}catch(t){E("error","at pagesMsg/chat/chat-pri.mixin.js:552",`parse chat pri ${this.chatId} data error`)}},initData(e){e.small_avatar&&(e.avatar=e.small_avatar),this.user=e,this.navBarTitle=e.nickname;let t=this.getAge(e);t&&(this.navBarTitle=this.navBarTitle+","+t)},initView(e){return new Promise(t=>{P.request("/msg/detail",{chat_id:this.chatId,last_sync_mtime:0,last_mtime:0},!1,!0).then(i=>{var s,n,a;let o=i.data.chat_info;i.data.chat_info=i.data.user_info,i.data.user_info=o,this.addFriendsType=(n=(s=i.data)==null?void 0:s.friend_apply_status)==null?void 0:n.my_apply_status,this.friendApplyStatus=(a=i.data)==null?void 0:a.friend_apply_status,i.data.user_info.status==-1&&(i.data.user_info.nickname=p("deleted"),i.data.user_info.nickname=p("deleted"),i.data.user_info.avatar=ht.DELETED,i.data.user_info.small_avatar=ht.DELETED,i.data.user_info.is_vip=0),this.realUser=i.data.user_info,this.chatUserInfo=i.data.chat_info;let l=JSON.parse(JSON.stringify(i.data.user_info));this.parseData(i.data),Ze("chat_pri_data",i.data,this.chatId),t(),ei(l,!0).then(()=>{if(this.refreshUser=="true"){let c={user:l,chat_id:this.chatId,chat_type:U.M_CHAT_PRI};uni.$emit("event_refresh_index_item_info",c)}ea(l,1)}),this.initFinish=!0,this.hideOnline||this.setOnlineStatusPoint(l.online_status),this.setMyAvatarByAppId(),typeof e=="function"&&e(i.data)},i=>{})})},initUser(e){return new Promise(t=>{let i=ve("chat_pri_data",this.chatId);i?(this.navBarTitle=i.user_info.nickname+this.getAge(i.user_info),t()):(typeof e=="object"&&(this.navBarTitle=e.nickname+this.getAge(e)),na(this.chatId,!1).then(s=>{s&&this.initData(s),t()}))})}},onNavigationBarButtonTap(e){if(uni.hideKeyboard(),e.index==0){if(this.user.status==-1)return;this.onClickMore()}else{if(this.user.status==-1)return;ne(X.reportUser,{user:JSON.stringify(this.user),type:1,target_id:this.user.uid})}},onShow(){this.clearIndexUnread()},onReady(){},onUnload(){uni.offKeyboardHeightChange(this.onKeyboardChange),uni.$off("event_msg_popover",this.onMsgItemPopListener),uni.$off("event_msg_fail_click",this.clickFail),uni.$off("event_chat_pri",this.receiveMsg),uni.$off("event_sync_finish_index",this.handleSyncFinish),uni.$off("event_change_black",this.changeBlack),uni.$off("event_change_my_user_app",this.changeMyUserApp),uni.$emit("event_message_pri_close"),uni.$off("event_chat_pri_clear",this.refreshMessage),uni.$off("event_chat_default_msg",this.onSetDefaultMsg),uni.$off("event_send_media_limit_one",this.onSendMediaLimitOne),uni.$on("event_send_media_limit_one_send_gift",this.onSendMediaGift),uni.$off("event_call_end_no_balance"),uni.$off("event_update_add_friends_status",this.onUpdateAddFriendsStatus)},onLoad(e){this.chatId=e.uid,e.refreshUser&&(this.refreshUser=e.refreshUser),e.formType&&(this.formType=e.formType),e.defaultMsgBarText&&(this.defaultMsgBarText=e.defaultMsgBarText);let t=ve("chat_pri_data",this.chatId);t&&(this.chatIsReply=t.user_info.is_reply==1),this.getOpenerEventChannel().on("priData",i=>{let s=i.user;Dc(s.nickname),this.initUser(s).then(()=>ee(this,null,function*(){return t?this.parseData(t):this.userCover=s,this.initView(),Qt(this.chatId,this.chatType)})).then(()=>(this.setMyAvatarByAppId(),this.loadMessage())).then(()=>{this.changeMsgBarScroll(),this.$nextTick(()=>{let n=setTimeout(()=>{clearTimeout(n),this.scrollToBottom(),this.showMask=!1},20)})})}),this.setWebview(),G.sendMsg=this.sendMsg,G.sendMsgFinish=this.sendMsgFinish,G.sendMsgBefore=this.sendMsgBefore,G.isEnterMediaLimitPage=this.isEnterMediaLimitPage,G.upDateFirstChatStatus=this.upDateFirstChatStatus,G.isFirstChat=this.isFirstChat,uni.onKeyboardHeightChange(this.onKeyboardChange),uni.$on("event_msg_popover",this.onMsgItemPopListener),uni.$on("event_msg_fail_click",this.clickFail),uni.$on("event_chat_pri",this.receiveMsg),uni.$on("event_sync_finish_index",this.handleSyncFinish),uni.$on("event_change_black",this.changeBlack),uni.$on("event_change_my_user_app",this.changeMyUserApp),uni.$on("event_chat_pri_clear",this.refreshMessage),uni.$on("event_chat_default_msg",this.onSetDefaultMsg),uni.$on("event_send_media_limit_one",this.onSendMediaLimitOne),uni.$on("event_send_media_limit_one_send_gift",this.onSendMediaGift),uni.$on("event_call_end_no_balance",()=>{Ce(p("tips"),p("insufficientBalance"),()=>{},"",p("gotIt"),!1)}),uni.$on("event_update_add_friends_status",this.onUpdateAddFriendsStatus)}},_t={methods:{showLoading(){this.$refs.msgUser.loadingShow()},hideLoading(e){this.$refs.msgUser.loadingHide(e)},showFail(){this.$refs.msgUser.failShow()},hideFail(){this.$refs.msgUser.failHide()},showIncome(e){this.$refs.msgUser.setIncomeVal(e)},checkStopClick(e){return this.$refs.msgUser.isStopClick==1?(this.$refs.msgUser.isStopClick=0,e.stopPropagation(),!0):!1}}},Oc={props:{w:{type:String,default:"0"},h:{type:String,default:"0"},border:{type:String,default:""},radius:{type:String,default:"0"}},computed:{blackedAvatar(){return ht.BLACKED}}};function Rc(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R);return(0,r.openBlock)(),(0,r.createBlock)(o,{src:a.blackedAvatar,w:i.w,h:i.h,radius:i.radius},null,8,["src","w","h","radius"])}var ba=v(Oc,[["render",Rc]]),Nc={center:{"":{alignItems:"center",flexDirection:"row"}},"flex-start":{"":{justifyContent:"flex-start"}},"flex-end":{"":{justifyContent:"flex-end"}},container:{"":{paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10,alignItems:"flex-start",flexDirection:"row"}},nickname:{".container ":{fontSize:"24rpx",lineHeight:"28rpx"}},"view-income":{"":{marginRight:"6rpx",marginTop:"4rpx"}},"text-income":{".view-income ":{fontSize:"24rpx",color:"#FF953F",marginLeft:"8rpx",marginRight:"2rpx",lineHeight:"34rpx"}},"admin-del-str":{"":{color:"#FF0000",fontSize:"24rpx"}},"avatar-wrap":{"":{width:"76rpx",height:"76rpx",position:"relative"}},"app-label":{".avatar-wrap ":{position:"absolute",bottom:0,right:0,width:"32rpx",height:"32rpx",backgroundColor:"#6F98FF",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#F1F3F6",fontSize:"16rpx",color:"#FFFFFF",textAlign:"center",lineHeight:"28rpx",borderRadius:"16rpx"}}},_a=Ie("dom"),Pc={components:{AvatarImgVip:ln,AvatarDeletedImg:ti,AvatarBlackedImg:ba},props:{data:{type:Object,default(){return{}}},user:{type:Object,default(){return{avatar:""}}},isSend:{type:Boolean,default:!1},chatType:{type:[Number,String],default:0},index:{type:Number,default:-1},listType:{type:Number,default:1},avatarMarginTop:{type:String,default:"0rpx"},readTime:{type:[Number,String],default:0},appid:{type:[String,Number],default:0},realUser:{type:Object,default(){return null}},myUser:{type:Object,default(){return null}}},data(){return{maxWidth:getApp().globalData.window.width-20-6-uni.upx2px(32),showLoading:!1,isStopClick:0,incomeVal:0,appText:""}},computed:{showUser(){return!_(this.realUser)&&!this.isSend?this.realUser:this.user},showMyUser(){return!_(this.myUser)&&this.isSend?this.myUser:this.user},readHookColor(){if(this.readTime<=0)return"";let e=this.data.mtime.toString();return e.length<16&&(e=Number(e)*1e3),this.readTime>=e?"#1485FB":"#BFC6D0"},sendStatusSrc(){return this.data.msg_status==At.FAIL?"s/pub/i-error.png":this.data.isAdmin&&this.data.msg_status==At.SEND_HIDE?"s/msg/msg_hide.png":""},receiveStatusSrc(){return this.data.isAdmin?this.data.msg_status==At.FAIL?"s/pub/i-error.png":this.data.msg_status==At.SEND_HIDE?"s/msg/msg_hide.png":"":""},checkIncomeVal(){if(this.data.isAdmin)return!1;let e=q(this.data.msg_content);return e&&e.income&&e.income_uid==getApp().globalData.uid&&!e.income_hide?(this.incomeVal=e.income,!0):!1}},methods:{clickAvatar(e,t){if(e.stopPropagation(),uni.hideKeyboard(),!(this.isSend&&this.data.chat_type==U.M_CHAT_ASS&&this.data.chat_id==w.SYSTEM_ID))if(this.data.chat_type==U.M_CHAT_PRI)Oi(this.user,t);else{let i=`avatar-${this.data.chat_id}-${this.data.ctime}`;_a.getComponentRect(this.$refs[i],s=>{s&&s.size&&uni.$emit("event_avatar_popover",{size:s.size,data:this.data})})}},clickFail(e){e&&e.stopPropagation(),!(this.data.msg_type==w.M_TEXT&&this.data.content.sensitive_type)&&uni.$emit("event_msg_fail_click",this.data,this.index,this.listType)},onLongPress(e){if(e&&e.stopPropagation(),this.data.msg_id)return;this.isStopClick=1;let t=`msg-${this.data.chat_id}-${this.data.ctime}`;_a.getComponentRect(this.$refs[t],i=>{i&&i.size&&uni.$emit("event_msg_popover",{size:i.size,data:this.data,listType:this.listType,index:this.index})})},loadingShow(){this.showLoading=!0},loadingHide(e){this.data.mtime=e,this.showLoading=!1},failShow(){this.data.msg_status=1},failHide(){this.data.msg_status=0},setStopClick(e){this.isStopClick=e},setIncomeVal(e){this.incomeVal=e},isMsgStatusHide(){return this.data.isAdmin&&this.data.msg_status==2}}};function Bc(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("u-base-info"),ai),l=A((0,r.resolveDynamicComponent)("uni-icons"),ae),c=A((0,r.resolveDynamicComponent)("uni-load-more"),Yi),u=A((0,r.resolveDynamicComponent)("l-img"),R),d=(0,r.resolveComponent)("avatar-img-vip"),h=A((0,r.resolveDynamicComponent)("avatar-deleted-img"),ti),f=A((0,r.resolveDynamicComponent)("avatar-blacked-img"),ba);return(0,r.openBlock)(),(0,r.createElementBlock)("view",{style:{position:"relative"},renderWhole:!0},[i.isSend?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"container flex-end"},[(0,r.createElementVNode)("view",{style:{"margin-right":"6px"}},[i.chatType==2?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,style:{height:"50rpx","margin-top":"-6rpx","flex-direction":"row-reverse","align-items":"center"}},[(0,r.createVNode)(o,{info:a.showMyUser,showCountry:!0,desc:!0,nameColor:"#999999",nameSize:"24rpx"},null,8,["info"])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("view",{class:"center",style:{"justify-content":"flex-end"}},[i.readTime>0?((0,r.openBlock)(),(0,r.createBlock)(l,{key:0,type:"checkmarkempty",size:"40rpx",color:a.readHookColor,style:{"margin-right":"8rpx"}},null,8,["color"])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("view",null,[(0,r.createElementVNode)("view",{onLongpress:t[1]||(t[1]=(...g)=>a.onLongPress&&a.onLongPress(...g)),ref:"msg-"+i.data.chat_id+"-"+i.data.ctime,style:(0,r.normalizeStyle)({maxWidth:n.maxWidth+"px"}),class:"center flex-end"},[(0,r.createElementVNode)("view",null,[n.showLoading?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,style:{height:"30px","margin-right":"10rpx"},status:"loading",iconSize:17})):(0,r.createCommentVNode)("",!0),a.sendStatusSrc?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,onClick:t[0]||(t[0]=(...g)=>a.clickFail&&a.clickFail(...g)),style:{padding:"10rpx"}},[(0,r.createVNode)(u,{src:a.sendStatusSrc,w:"32rpx",h:"32rpx"},null,8,["src"])])):(0,r.createCommentVNode)("",!0)]),(0,r.renderSlot)(e.$slots,"default",{style:"flex:1"})],36),n.incomeVal||a.checkIncomeVal?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"center flex-end view-income"},[(0,r.createVNode)(u,{src:"f/discover/diamond.png",w:"22rpx",h:"22rpx"}),(0,r.createElementVNode)("u-text",{class:"text-income"},"+ "+(0,r.toDisplayString)(n.incomeVal),1),(0,r.createVNode)(u,{src:"s/pub/income_up_1.png",w:"14rpx",h:"34rpx"})])):(0,r.createCommentVNode)("",!0)])])]),(0,r.createElementVNode)("view",{class:"avatar-wrap"},[(0,r.createVNode)(d,{ref:"avatar-"+i.data.chat_id+"-"+i.data.ctime,user:a.showUser,onClick:t[2]||(t[2]=g=>a.clickAvatar(g,!0)),"is-show-vip":!0,w:"64rpx",h:"64rpx","place-w":"50rpx",radius:"32rpx",style:(0,r.normalizeStyle)({marginTop:i.avatarMarginTop})},null,8,["user","style"])])])):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"container flex-start"},[i.realUser&&i.realUser.status==-1?((0,r.openBlock)(),(0,r.createBlock)(h,{key:0,w:"76rpx",h:"76rpx",radius:"38rpx"})):i.realUser&&i.realUser.is_blacked==1?((0,r.openBlock)(),(0,r.createBlock)(f,{key:1,w:"76rpx",h:"76rpx",radius:"38rpx"})):((0,r.openBlock)(),(0,r.createBlock)(d,{key:2,ref:"avatar-"+i.data.chat_id+"-"+i.data.ctime,user:a.showUser,onClick:t[3]||(t[3]=g=>a.clickAvatar(g,!1)),"is-show-vip":!0,w:"76rpx",h:"76rpx","place-w":"66rpx",radius:"38rpx",style:(0,r.normalizeStyle)({marginTop:i.avatarMarginTop})},null,8,["user","style"])),(0,r.createElementVNode)("view",{style:{"margin-left":"6px"}},[i.chatType==2?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,style:{height:"50rpx","margin-top":"-6rpx"},class:"center"},[(0,r.createVNode)(o,{info:a.showUser,showCountry:!0,nameColor:"#999999",nameSize:"24rpx",style:{"margin-top":"-8rpx"}},null,8,["info"])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("view",{class:"center"},[(0,r.createElementVNode)("view",{onLongpress:t[4]||(t[4]=(...g)=>a.onLongPress&&a.onLongPress(...g)),ref:"msg-"+i.data.chat_id+"-"+i.data.ctime,style:(0,r.normalizeStyle)({maxWidth:n.maxWidth+"px"}),class:"center flex-start"},[(0,r.renderSlot)(e.$slots,"default")],36),(0,r.createElementVNode)("view",{class:"center"},[a.receiveStatusSrc?((0,r.openBlock)(),(0,r.createBlock)(u,{key:0,src:a.receiveStatusSrc,w:"32rpx",h:"32rpx",style:{"margin-left":"12rpx"}},null,8,["src"])):(0,r.createCommentVNode)("",!0)])])])]))])}var Ke=v(Pc,[["render",Bc],["styles",[Nc]]]),Uc={props:{text:{type:[String,Number],default:""},type:{type:String,default:"title"},useText:{type:[Number,Boolean],default:!1},colorVal:{type:String,default:""}},computed:{color(){var e,t,i;return this.colorVal?this.colorVal:(i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.color[this.type]}}};function Wc(e,t,i,s,n,a){return(0,r.openBlock)(),(0,r.createElementBlock)("u-text",{style:(0,r.normalizeStyle)({color:a.color})},(0,r.toDisplayString)(i.text),5)}var it=v(Uc,[["render",Wc]]),Hc={center:{"":{flexDirection:"row",alignItems:"center"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},text:{"":{fontSize:"32rpx",lineHeight:"42rpx"}},"text-p":{"":{paddingTop:"18rpx",paddingRight:"20rpx",paddingBottom:"18rpx",paddingLeft:"20rpx"}},"text-p-tran":{"":{paddingTop:"18rpx",paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx"}},"view-send":{"":{paddingLeft:"26rpx"}},content:{".view-send ":{borderRadius:"16rpx",boxShadow:"0 1 0 0 rgba(0, 0, 0, 0.04)"},".view-receive ":{borderTopLeftRadius:0,borderTopRightRadius:"16rpx",borderBottomRightRadius:"16rpx",borderBottomLeftRadius:"16rpx"}},"view-receive":{"":{paddingRight:"26rpx"}},"view-tran-end":{".view-receive ":{justifyContent:"flex-end",marginBottom:"12rpx",marginTop:"8rpx"},"":{paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"18rpx",flexDirection:"row",alignItems:"center",marginBottom:"12rpx",marginTop:"8rpx"}},"text-tran":{"":{fontSize:"18rpx",marginLeft:"4rpx"}},"reply-send":{"":{borderTopLeftRadius:"8rpx",borderTopRightRadius:0,borderBottomRightRadius:"8rpx",borderBottomLeftRadius:"8rpx"}},"reply-line":{".reply-send ":{borderTopLeftRadius:100,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:100},".reply-receive ":{borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:100},".reply-view ":{width:2,height:44}},"reply-receive":{"":{borderTopLeftRadius:0,borderTopRightRadius:"8rpx",borderBottomRightRadius:"8rpx",borderBottomLeftRadius:"8rpx"}},"reply-view":{"":{height:44,marginTop:4,marginRight:4,marginBottom:0,marginLeft:4}},"reply-content":{".reply-view ":{paddingTop:0,paddingRight:8,paddingBottom:0,paddingLeft:8}},"view-img":{".reply-view ":{position:"relative",width:36,height:36}},"flex-row":{"":{flexDirection:"row"}},"flex-warp":{"":{flexWrap:"wrap"}}},Vc={emits:["onClickTextReplyContent"],components:{MLine:He,TranslateIcon:on,MText:it,MsgUser:Ke},mixins:[_t],props:{data:{type:Object,default(){return{}}},index:{type:Number,default:-1},listType:{type:Number,default:1},readTime:{type:[String,Number],default:0},appid:{type:[String,Number],default:0},realUser:{type:Object,default(){return null}},myUser:{type:Object,default(){return null}},isReception:{type:Boolean,default:!1}},data(){return{maxWidth:getApp().globalData.window.width-130,tranContent:"",rich:!1,tranOriText:"",translateAuto:!1,translateAutoForce:!1,translateResult:""}},computed:{transStyle(){return this.data.isSend?{left:0}:{right:0}},tranColor(){var e,t,i;return this.isReception?"rgba(255, 255, 255, 0.4)":((i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.style)==Ae.LIGHT?this.data.isSend?"rgba(0, 0, 0, 0.3)":"#999999":"rgba(255, 255, 255, 0.4)"},tranAColor(){var e,t,i,s;return this.isReception?"#333333":(s=(i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.color)==null?void 0:s.bg1_1},tranApiParams(){return{from_uid:this.data.chat_type==2?this.data.chat_id:this.data.send_uid,chat_type:this.data.chat_type,key:this.data.mtime,from_type:1}},richStyle(){let e={"max-width":this.maxWidth+"px"};return this.data.isSend?e["border-top-left-radius"]="16rpx":e["border-top-right-radius"]="16rpx",e},viewBg(){return this.data.isSend?"#CAFBFF":"#FFFFFF"},replyLineStyle(){var e,t,i,s,n,a,o,l,c,u,d;let h,f;return((i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.style)==Ae.LIGHT?(h="#0091FF",f=this.data.isSend?"#C3D5FF":(o=(a=(n=(s=getApp())==null?void 0:s.globalData)==null?void 0:n.themeObj)==null?void 0:a.color)==null?void 0:o.bg3,this.isReception&&(f="green",h="#ce1a1a")):(h="#D7F2C9",f=this.data.isSend?"#1B4941":(d=(u=(c=(l=getApp())==null?void 0:l.globalData)==null?void 0:c.themeObj)==null?void 0:u.color)==null?void 0:d.bg2,this.isReception&&(f="#434343",h="#0FADFF")),{lineBg:h,contentBg:f}},replyTextW(){let e=26;return this.data.content.reply.img&&(e+=46),this.maxWidth-e},textColor(){return"#333333"},replyContentColor(){return"#333333"}},methods:{$str:p,clickReplyContent(){this.$emit("onClickTextReplyContent",this.data.content.reply)},onTranslateFinish(e){if(!e.text)return;this.tranContent=e.text;let t=this.data.content;t.tran_text=e.text;let i=JSON.stringify(t);this.data.mId?tt(this.data.chat_id,this.data.chat_type,0,i,this.data.mId,!1):this.data.mtime.toString().length==16?tt(this.data.chat_id,this.data.chat_type,this.data.mtime,i,0,!1):tt(this.data.chat_id,this.data.chat_type,this.data.ctime,i,0,!0)},onTranslateClick(){uni.$emit("event_translate_auto_open",this.data.chat_id,this.data.ctime)},onTranslateOpen(e,t){!this.data.isAdmin&&this.data.isSend||this.data.chat_id==e&&(this.data.ctime<=t||this.$refs.translateIcon&&this.$refs.translateIcon.reqTranslate())},clickTranslateStr(e){e&&e.stopPropagation(),Yt()}},created(){if(this.data.content.text){let e=this.data.content.text;for(let t=0,i=this.data.content.info.length;t<i;t++)this.data.content.info[t].color="#0091FF",e=e.replace("[x]",this.data.content.info[t].text);this.tranOriText=e,this.rich={text:this.data.content.text,info:this.data.content.info,click:[this.data.content.click]}}else this.tranOriText=this.data.content.content;if(this.data.content.tran_text&&(this.translateResult=this.data.content.tran_text,getApp().globalData.translateAuto)){this.tranContent=this.data.content.tran_text;return}this.data.isAdmin?(this.translateAuto=this.data.chat_type==U.M_CHAT_ASS&&!this.data.isSend,this.translateAutoForce=this.data.chat_type==U.M_CHAT_ASS&&!this.data.isSend):(this.translateAuto=!this.data.isSend,this.translateAutoForce=!1),uni.$on("event_translate_auto_open",this.onTranslateOpen)},beforeUnmount(){uni.$off("event_translate_auto_open",this.onTranslateOpen)}};function jc(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=(0,r.resolveComponent)("m-text"),c=A((0,r.resolveDynamicComponent)("rich-content"),mt),u=(0,r.resolveComponent)("m-line"),d=A((0,r.resolveDynamicComponent)("translate-icon"),on),h=(0,r.resolveComponent)("msg-user");return(0,r.openBlock)(),(0,r.createBlock)(h,{ref:"msgUser",data:i.data,"chat-type":i.data.chat_type,user:i.data.user,"is-send":i.data.isSend,index:i.index,appid:i.appid,"list-type":i.listType,"read-time":i.readTime,"real-user":i.realUser,"my-user":i.myUser},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)([i.data.isSend?"view-send":"view-receive"])},[(0,r.createElementVNode)("view",{class:"content",style:(0,r.normalizeStyle)({background:a.viewBg})},[i.data.content.reply?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...f)=>a.clickReplyContent&&a.clickReplyContent(...f)),onLongpress:t[1]||(t[1]=()=>{}),class:(0,r.normalizeClass)(["reply-view center",[i.data.isSend?"reply-send":"reply-receive"]]),style:(0,r.normalizeStyle)({background:a.replyLineStyle.contentBg,maxWidth:`${n.maxWidth}px`})},[(0,r.createElementVNode)("view",{class:"reply-line",style:(0,r.normalizeStyle)({background:a.replyLineStyle.lineBg})},null,4),(0,r.createElementVNode)("view",{class:"reply-content center"},[i.data.content.reply.img?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"center-align view-img",style:{"margin-right":"8px"}},[(0,r.createVNode)(o,{src:i.data.content.reply.img.small_url,w:"36px",h:"36px",radius:"4px"},null,8,["src"]),i.data.content.reply.img.media_type==2?((0,r.openBlock)(),(0,r.createBlock)(o,{key:0,src:"s/pub/play_video.png",w:"24rpx",h:"24rpx",style:{position:"absolute"}})):(0,r.createCommentVNode)("",!0)])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("view",null,[(0,r.createVNode)(l,{text:i.data.content.reply.nickname,style:(0,r.normalizeStyle)([{maxWidth:`${a.replyTextW}px`,color:a.textColor},{"font-size":"24rpx","font-weight":"600","line-height":"28rpx",lines:"1",overflow:"hidden","text-overflow":"ellipsis"}])},null,8,["text","style"]),(0,r.createVNode)(l,{text:i.data.content.reply.content,type:"tip",style:(0,r.normalizeStyle)([{maxWidth:`${a.replyTextW}px`,color:a.replyContentColor},{"font-size":"20rpx","line-height":"24rpx",lines:"1",overflow:"hidden","text-overflow":"ellipsis","margin-top":"12rpx"}])},null,8,["text","style"])])])],38)):(0,r.createCommentVNode)("",!0),i.data.content.content?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"flex-row flex-warp",style:{padding:"18rpx 0"}},[i.data.content.is_friend_agree==1?((0,r.openBlock)(),(0,r.createBlock)(o,{key:0,src:"/static/agreed-your-friend.png",w:"40rpx",h:"40rpx",mode:"scaleToFill",style:{"margin-left":"20rpx"}})):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(l,{text:i.data.content.content,style:(0,r.normalizeStyle)([{"font-size":"32rpx","line-height":"42rpx",padding:"0 20rpx"},{"max-width":n.maxWidth+"px",color:a.textColor}])},null,8,["text","style"])])):n.rich?((0,r.openBlock)(),(0,r.createBlock)(c,{key:2,data:n.rich,"font-size":"30rpx",color:a.textColor,style:(0,r.normalizeStyle)([{"text-align":"left","background-color":"transparent","line-height":"42rpx",padding:"0 20rpx","margin-top":"24rpx","margin-bottom":"24rpx"},a.richStyle])},null,8,["data","color","style"])):(0,r.createCommentVNode)("",!0),n.tranContent?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:3},[(0,r.createVNode)(u,{style:(0,r.normalizeStyle)([{background:i.isReception?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},{margin:"0 20rpx"}])},null,8,["style"]),(0,r.createVNode)(l,{text:n.tranContent,style:(0,r.normalizeStyle)([{"max-width":n.maxWidth+"px",color:a.textColor},{"font-size":"32rpx","line-height":"42rpx",padding:"18rpx 20rpx"}])},null,8,["text","style"])])):(0,r.createCommentVNode)("",!0)],4),n.tranContent?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createBlock)(d,{key:0,ref:"translateIcon",onOnTranslateFinish:a.onTranslateFinish,onOnTranslateClick:a.onTranslateClick,isAuto:!0,border:!0,showTran:!1,showTranContent:!1,text:n.tranOriText,"is-auto":n.translateAuto,"is-auto-force":n.translateAutoForce,"translate-result":n.translateResult,"from-language":i.data.user&&i.data.user.language,"api-params":a.tranApiParams,style:(0,r.normalizeStyle)([[a.transStyle],{position:"absolute",bottom:"0"}]),aColor:a.tranAColor},null,8,["onOnTranslateFinish","onOnTranslateClick","text","is-auto","is-auto-force","translate-result","from-language","api-params","style","aColor"]))],2)]),_:1},8,["data","chat-type","user","is-send","index","appid","list-type","read-time","real-user","my-user"])}var Gc=v(Vc,[["render",jc],["styles",[Hc]]]),zc={"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"send-voice":{"":{borderRadius:"16rpx",display:"flex",justifyContent:"flex-end"}},"receive-voice":{"":{borderRadius:"16rpx",justifyContent:"flex-start"}},"unread-point":{"":{width:"16rpx",height:"16rpx",borderRadius:"8rpx",backgroundColor:"#FF4545",marginLeft:"8rpx"}},"view-voice":{"":{alignItems:"center",flexDirection:"row"}},"view-content":{"":{alignItems:"center",flexDirection:"row",width:"400rpx",height:"76rpx"}},"text-duration":{"":{paddingTop:0,paddingRight:"24rpx",paddingBottom:0,paddingLeft:"26rpx",textAlign:"center",fontSize:"28rpx",lineHeight:"40rpx"}},"pause-btn":{"":{width:"30rpx",height:"30rpx",borderRadius:"15rpx",alignItems:"center",justifyContent:"center",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#333333"}}},$c={components:{MsgUser:Ke,CustomSlider:ca},mixins:[_t],emits:["clickMsgVoice","onMsgVoiceChange"],props:{data:{type:Object,default(){return{}}},index:{type:Number,default:-1},listType:{type:Number,default:1}},data(){return{iconPlay:"s/msg/audio_msg_play.png",sliderValue:0,curDuration:this.data.content.voice_duration,voiceDuration:JSON.parse(JSON.stringify(this.data.content)),sliderH:uni.upx2px(24),isPlay:!1}},computed:{durationStr(){return this.curDuration<=0?"00:00":$e(this.curDuration)},sliderActColor(){return"#FFFFFF"},sliderBgColor(){return"rgba(255, 255, 255, 0.1)"},viewBg(){return this.data.isSend?"#CAFBFF":"#FFFFFF"},voiceWidth(){let e=80,t=this.voiceDuration.voice_duration;if(t>60)e=getApp().globalData.window.width-uni.upx2px(200);else if(t>10&&t<=60){let i=getApp().globalData.window.width-uni.upx2px(240),s=i/50;e=s*t>i?i:s*t<e?e+10:s*t}return e}},methods:{clickVoice(e){e&&e.stopPropagation(),Di(()=>{this.checkStopClick(e)||(E("log","at pagesMsg/coms/msg-voice/msg-voice.vue:104","\u70B9\u51FB\u64AD\u653E\u8BED\u97F3 clickVoice \u6267\u884C ----> "),this.$emit("clickMsgVoice",this.data,this.curDuration==this.data.content.voice_duration?0:this.curDuration))},500,"msg-voice-click")},changeDuration(e,t){e==-1&&(e=this.data.content.voice_duration),this.curDuration=e,this.sliderValue=parseInt(t/this.data.content.voice_duration)},changeIcon(e){this.isPlay=e,this.iconPlay=`s/msg/audio_msg_${e?"pause":"play"}.png`},onSliderChangeStart(){this.$emit("onMsgVoiceChange",!1,this.curDuration,this.data)},onSliderChanged(e){let t=e/100;this.curDuration=Math.round(this.data.content.voice_duration*t),this.$emit("onMsgVoiceChange",!0,this.curDuration,this.data)},pauseAnim(){},playAnim(){}}};function Yc(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=(0,r.resolveComponent)("msg-user");return(0,r.openBlock)(),(0,r.createBlock)(l,{ref:"msgUser",data:i.data,"chat-type":i.data.chat_type,user:i.data.user,"is-send":i.data.isSend,index:i.index,"list-type":i.listType},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"view-voice",onClick:t[0]||(t[0]=(...c)=>a.clickVoice&&a.clickVoice(...c))},[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)(["view-content",[i.data.isSend?"send-voice":"receive-voice"]]),style:(0,r.normalizeStyle)({background:a.viewBg,width:`${a.voiceWidth}px`})},[i.data.isSend?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[n.isPlay?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"pause-btn",style:{"margin-left":"10rpx"}},[(0,r.createElementVNode)("u-text",{style:{"font-size":"14rpx","font-weight":"600"}},"||")])):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,style:{width:"40rpx",height:"40rpx","margin-left":"10rpx"}},[(0,r.createVNode)(o,{src:"/static/no_send_voice.png",w:"40rpx",h:"40rpx"})]))],64)),n.isPlay?((0,r.openBlock)(),(0,r.createElementBlock)("u-text",{key:1,style:{padding:"0 5rpx 0 5rpx","text-align":"center","font-size":"28rpx","line-height":"40rpx"}},(0,r.toDisplayString)(a.durationStr),1)):((0,r.openBlock)(),(0,r.createElementBlock)("u-text",{key:2,style:{padding:"0 5rpx 0 5rpx","text-align":"center","font-size":"28rpx","line-height":"40rpx"}},(0,r.toDisplayString)(n.voiceDuration.voice_duration)+"\u2018\u2019 ",1)),i.data.isSend?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:3},[n.isPlay?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"pause-btn",style:{"margin-right":"10rpx"}},[(0,r.createElementVNode)("u-text",{style:{"font-size":"14rpx","font-weight":"600"}},"||")])):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,style:{"margin-right":"10rpx"}},[(0,r.createVNode)(o,{src:"/static/send_voice.png",w:"40rpx",h:"40rpx"})]))],64)):(0,r.createCommentVNode)("",!0)],6),!i.data.isSend&&i.data.content.voice_unread==0?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"unread-point"})):(0,r.createCommentVNode)("",!0)])]),_:1},8,["data","chat-type","user","is-send","index","list-type"])}var Jc=v($c,[["render",Yc],["styles",[zc]]]),Kc={components:{MsgUser:Ke},mixins:[_t],emits:["clickPicture"],props:{data:{type:Object,default(){return{}}},index:{type:Number,default:-1},listType:{type:Number,default:1},readTime:{type:[String,Number],default:0}},computed:{getWH(){let e=this.data.content;return Li(e.image_width,e.image_height,200)},border(){var e,t,i;return((i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.style)==Ae.LIGHT?"1px solid #EEEEEE":"1px solid #333333"}},methods:{clickPicture(e){this.checkStopClick(e)||this.$emit("clickPicture",this.data)}}};function qc(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=(0,r.resolveComponent)("msg-user");return(0,r.openBlock)(),(0,r.createBlock)(l,{ref:"msgUser",data:i.data,"chat-type":i.data.chat_type,user:i.data.user,"is-send":i.data.isSend,index:i.index,"list-type":i.listType,"read-time":i.readTime},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(o,{onClick:a.clickPicture,src:i.data.content.small_url,w:a.getWH[0]+"px",h:a.getWH[1]+"px",radius:"16rpx",border:a.border,"place-w":a.getWH[0]-10+"px","place-type":2},null,8,["onClick","src","w","h","border","place-w"])]),_:1},8,["data","chat-type","user","is-send","index","list-type","read-time"])}var Xc=v(Kc,[["render",qc]]),Zc={text:{"":{textAlign:"center",fontSize:"24rpx",marginTop:0,marginRight:"36rpx",marginBottom:0,marginLeft:"36rpx",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"24rpx",paddingTop:"12rpx",paddingRight:"20rpx",paddingBottom:"12rpx",paddingLeft:"20rpx",maxWidth:"680rpx"}},center:{"":{flexDirection:"row",alignItems:"center"}},"level-center":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"view-invite":{"":{alignItems:"center",marginTop:15}},tip:{".view-invite ":{flexDirection:"row",alignItems:"center"}},invite:{".view-invite ":{height:"80rpx",borderRadius:"16rpx",borderWidth:1,borderStyle:"solid",borderColor:"rgba(255,255,255,0.2)",paddingTop:0,paddingRight:"64rpx",paddingBottom:0,paddingLeft:"64rpx"}},"text-view-detail":{"":{textAlign:"center",color:"#FF4477",fontSize:"24rpx",marginRight:"4rpx"}},"center-align":{"":{alignItems:"center",justifyContent:"center",flexDirection:"row"}}},Qc={emits:["clickAddFriends","clickSendGift","clickCallVideo"],name:"MsgNotice",components:{MIcon:ni,MLine:He,UniIcons:ae,RichContent:mt},props:{data:{type:Object,default(){return{}}},index:{type:Number,default:-1},listType:{type:Number,default:-1},clubDisband:{type:[String,Number],default:0},clubTag:{type:[String,Number],default:0},isClubAdmin:{type:[Boolean,Number],default:!1}},data(){return{sWC:getApp().globalData.window.width-uni.upx2px(72),rich:{text:"",info:[],click:[]},textContent:"",hasInvite:!1,hasViewDetail:!1}},watch:{clubDisband(e,t){this.handleDisbandOpenClub(e)},isClubAdmin(){this.data.chat_type!=U.M_CHAT_CLUB||this.data.content.key!=1||(this.hasInvite=this.checkShowInvite())}},computed:{textColor(){return"rgba(255,255,255,0.8)"},viewRichBg(){return"rgba(255,255,255,0.1)"},viewBg(){return"rgba(255,255,255,0.1)"},isLanguageArabic(){return getApp().globalData.languageKey=="ar"},textAlign(){return this.rich.isLong?this.isLanguageArabic?"right":"left":"center"}},methods:{$str:p,clickAddFriends(){this.$emit("clickAddFriends")},clickSendGift(){this.$emit("clickSendGift")},clickCallVideo(){this.$emit("clickCallVideo")},clickInvite(){let e={from_type:2,club_id:this.data.club.club_id,tag:this.clubTag};ne("/pagesPub/user/user-list",e)},clickViewDetail(){},checkShowInvite(){return this.data.club.club_uid==getApp().globalData.uid},handleDisbandOpenClub(e){if(!([MSG_CLUB_NOTICE.JOIN,MSG_CLUB_NOTICE.INVITE_JOIN,MSG_CLUB_NOTICE.CREATE].indexOf(this.data.content.key)!=-1))return;this.rich.click[0]&&this.rich.click[0].action==2&&e&&(this.rich.click[0].disabled=1)},parseContent(){let e=this.data.content;if(e.text){this.rich=e;return}if(e.content){this.textContent=e.content;return}let t="";if(this.data.chat_type==U.M_CHAT_PRI||this.data.chat_type==U.M_CHAT_ASS,this.textContent=t,this.data.chat_type==U.M_CHAT_CLUB)try{e.key==1?this.hasInvite=this.checkShowInvite():e.key==MSG_CLUB_NOTICE.SET_MANAGER&&(this.hasViewDetail=this.data.content.status==1&&this.data.content.uid==getApp().globalData.uid)}catch(i){}}},created(){this.parseContent(),this.data.chat_type==U.M_CHAT_CLUB&&this.data.club}};function eu(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("rich-content"),mt),l=(0,r.resolveComponent)("m-line"),c=(0,r.resolveComponent)("m-icon"),u=A((0,r.resolveDynamicComponent)("uni-icons"),ae);return(0,r.openBlock)(),(0,r.createElementBlock)("view",{renderWhole:!0},[n.textContent?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"center-align"},[(0,r.createElementVNode)("u-text",{class:"text",style:(0,r.normalizeStyle)({color:a.textColor})},(0,r.toDisplayString)(n.textContent),5)])):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1},[(0,r.createVNode)(o,{data:n.rich,"font-size":"24rpx",color:a.textColor,style:(0,r.normalizeStyle)([{margin:"0 36rpx","line-height":"36rpx","border-radius":"24rpx","padding-left":"8rpx","padding-right":"8rpx"},{"text-align":a.textAlign,background:a.viewRichBg}]),class:"center-align",onClickAddFriends:a.clickAddFriends,onClickSendGift:a.clickSendGift,onClickCallVideo:a.clickCallVideo},null,8,["data","color","style","onClickAddFriends","onClickSendGift","onClickCallVideo"])])),n.hasInvite&&i.clubDisband!=1?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:2,class:"view-invite"},[(0,r.createElementVNode)("view",{class:"tip",style:(0,r.normalizeStyle)({width:`${n.sWC}px`})},[(0,r.createVNode)(l,{style:{flex:"1"}}),(0,r.createElementVNode)("u-text",{text:a.$str("msg.clubInviteMember"),style:{margin:"0 16rpx","font-size":"28rpx"}},(0,r.toDisplayString)(a.$str("msg.clubInviteMember")),9,["text"]),(0,r.createVNode)(l,{style:{flex:"1"}})],4),(0,r.createElementVNode)("view",{style:{"margin-top":"30rpx"}},[(0,r.createElementVNode)("view",{onClick:t[0]||(t[0]=(...d)=>a.clickInvite&&a.clickInvite(...d)),class:"center invite"},[(0,r.createVNode)(c,{type:"plusempty",size:"24rpx",modeType:"title"}),(0,r.createElementVNode)("u-text",{text:a.$str("invite"),style:{"font-size":"28rpx","margin-left":"8rpx"}},(0,r.toDisplayString)(a.$str("invite")),9,["text"])])])])):n.hasViewDetail?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:3,onClick:t[1]||(t[1]=(...d)=>a.clickViewDetail&&a.clickViewDetail(...d)),class:"level-center",style:{padding:"4rpx"}},[(0,r.createElementVNode)("u-text",{class:"text-view-detail"},(0,r.toDisplayString)(a.$str("viewDetails")),1),(0,r.createVNode)(u,{type:"right",size:"24rpx",color:"#FF4477"})])):(0,r.createCommentVNode)("",!0)])}var tu=v(Qc,[["render",eu],["styles",[Zc]]]),iu={"msg-video":{"":{position:"relative",alignItems:"center",justifyContent:"center"}},"video-duration":{"":{color:"#FFFFFF",position:"absolute",bottom:0,right:0,paddingTop:"10rpx",paddingRight:"10rpx",paddingBottom:"10rpx",paddingLeft:"10rpx",fontSize:"24rpx"}}},nu={components:{MsgUser:Ke},mixins:[_t],emits:["clickVideo"],props:{data:{type:Object,default(){return{}}},index:{type:Number,default:-1},listType:{type:Number,default:1},readTime:{type:[String,Number],default:0}},computed:{getWH(){let e=this.data.content;return Li(e.width,e.height,200)},getDuration(){return $e(Math.round(this.data.content.duration))},border(){var e,t,i;return((i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.style)==Ae.LIGHT?"1px solid #EEEEEE":"1px solid #333333"}},methods:{clickVideo(e){this.checkStopClick(e)||(e.stopPropagation(),this.$emit("clickVideo",this.data))}}};function su(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=(0,r.resolveComponent)("msg-user");return(0,r.openBlock)(),(0,r.createBlock)(l,{ref:"msgUser",data:i.data,"chat-type":i.data.chat_type,user:i.data.user,"is-send":i.data.isSend,index:i.index,"list-type":i.listType,"read-time":i.readTime},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{onClick:t[0]||(t[0]=(...c)=>a.clickVideo&&a.clickVideo(...c)),class:"msg-video",style:(0,r.normalizeStyle)({width:a.getWH[0]+"px",height:a.getWH[1]+"px"})},[(0,r.createVNode)(o,{onClick:a.clickVideo,src:i.data.content.small_url,w:a.getWH[0]+"px",h:a.getWH[1]+"px","place-w":a.getWH[0]-10+"px","place-type":2,radius:"16rpx",border:a.border},null,8,["onClick","src","w","h","place-w","border"]),(0,r.createVNode)(o,{onClick:a.clickVideo,src:"s/pub/play_video.png",w:"56rpx",h:"56rpx",style:{position:"absolute"}},null,8,["onClick"]),(0,r.createElementVNode)("u-text",{class:"video-duration"},(0,r.toDisplayString)(a.getDuration),1)],4)]),_:1},8,["data","chat-type","user","is-send","index","list-type","read-time"])}var au=v(nu,[["render",su],["styles",[iu]]]),ru={"msg-notice-sys":{"":{borderRadius:"8rpx",marginTop:0,marginRight:"20rpx",marginBottom:0,marginLeft:"20rpx",paddingTop:"16rpx",paddingRight:"16rpx",paddingBottom:"16rpx",paddingLeft:"16rpx"}}},ou={name:"MsgNoticeSys",components:{MText:it,RichContent:mt},props:{data:{type:Object,default(){return{}}},index:{type:Number,default:-1}},data(){return{rich:{text:"",info:[],click:[]},textContent:""}},computed:{viewBg(){var e,t,i;return((i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.style)==Ae.LIGHT?"#FFFFFF":"#313131"}},methods:{parseContent(){let e=this.data.content;if(e.text){this.rich=e;return}if(e.content){this.textContent=e.content;return}this.textContent=p("unknownMessage")}},created(){this.parseContent()}};function lu(e,t,i,s,n,a){let o=(0,r.resolveComponent)("m-text"),l=A((0,r.resolveDynamicComponent)("rich-content"),mt);return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"msg-notice-sys",style:(0,r.normalizeStyle)({background:a.viewBg}),renderWhole:!0},[i.data.content.title?((0,r.openBlock)(),(0,r.createBlock)(o,{key:0,text:i.data.content.title,style:{"font-size":"28rpx","font-weight":"500","margin-bottom":"12rpx"}},null,8,["text"])):(0,r.createCommentVNode)("",!0),n.textContent?((0,r.openBlock)(),(0,r.createBlock)(o,{key:1,type:"desc",text:n.textContent,style:{"font-size":"20rpx"}},null,8,["text"])):((0,r.openBlock)(),(0,r.createBlock)(l,{key:2,data:n.rich,"font-size":"24rpx",style:{"background-color":"transparent"}},null,8,["data"]))],4)}var cu=v(ou,[["render",lu],["styles",[ru]]]),uu={components:{MText:it,MsgUser:Ke},props:{data:{type:Object,default(){return{}}},index:{type:Number,default:-1},listType:{type:Number,default:1},readTime:{type:[String,Number],default:0}},computed:{viewStyle(){let e=this.data.isSend?"#CAFBFF":"#FFFFFF",t={maxWidth:getApp().globalData.window.width-138+"px",background:e,padding:"24rpx",fontSize:"32rpx"};return t["border-radius"]=this.data.isSend?"16rpx 0 16rpx 16rpx":"16rpx 16rpx 16rpx",t}},data(){return{contentWidth:getApp().globalData.window.width-138}},methods:{$str:p}};function du(e,t,i,s,n,a){let o=(0,r.resolveComponent)("m-text"),l=(0,r.resolveComponent)("msg-user");return(0,r.openBlock)(),(0,r.createBlock)(l,{ref:"msgUser",data:i.data,"chat-type":i.data.chat_type,user:i.data.user,"is-send":i.data.isSend,index:i.index,"list-type":i.listType,"read-time":i.readTime},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(o,{text:a.$str("msg.notSupport"),style:(0,r.normalizeStyle)(a.viewStyle)},null,8,["text","style"])]),_:1},8,["data","chat-type","user","is-send","index","list-type","read-time"])}var pu=v(uu,[["render",du]]);function hu(e,t="small_avatar",i=!1,s=1){if(!i&&e.hide_profile)return fu(s);{if(e[t])return e[t];let n=t=="small_avatar"?"avatar":"small_avatar";return e[n]}}function fu(e){return e==2?"f/pub/masker_list_card.png":(e==3,"f/pub/masker_avatar.png")}var mu={center:{"":{alignItems:"center",flexDirection:"row"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"msg-first":{"":{position:"relative",paddingTop:10,paddingRight:10,paddingBottom:10,paddingLeft:10,borderRadius:"8rpx",marginLeft:10}},"fee-cover":{"":{position:"absolute",opacity:.96,borderRadius:"8rpx",backgroundImage:"linear-gradient(to right, #FF95E4, #FF9A97)",top:0,left:0}},"more-text":{".fee-cover ":{color:"#FFFFFF",fontSize:"24rpx"}},"user-info":{"":{paddingTop:"18rpx"}},pos:{"":{position:"absolute",top:0,left:0}}},gu={name:"MsgFirst",components:{MView:ii,UniIcons:ae,LImg:R,UBaseInfo:ai},props:{width:{type:Number,default:0},info:{type:[Object,Boolean],default:!1},album:{type:Array,default(){return[]}},hideOnline:{type:Boolean,default:!1}},data(){return{user:this.info,videoFlag:Y.VIDEO,albumArr:[],hasMore:!1}},computed:{getImgWH(){let e=parseInt((this.width-58)/4),t=e*1.325,i=(e-25)/2,s=(t-25)/2;return[e,t,i,s]},viewBg(){var e,t,i;return((i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.style)==Ae.LIGHT?"#FFFFFF":"#313131"},viewFeeCoverBg(){var e,t,i;return((i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.style)==Ae.LIGHT?"linear-gradient(to right, #FF95E4, #FF9A97)":"linear-gradient(to right, #80025E, #802C2C)"}},watch:{album(){this.parseAlbum()}},methods:{$str:p,clickUser(){},parseAlbum(){if(this.albumArr=[],_(this.album)){this.albumArr.push({small_url:hu(this.user),media_type:1});return}let e=this.album.length;if(e<=4){this.albumArr=this.album;return}this.hasMore=!0;for(let t=0;t<e;t++)t<=3&&this.albumArr.push(this.album[t])},setUser(e){this.user=e,this.parseAlbum()}},created(){this.parseAlbum()}};function _u(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=A((0,r.resolveDynamicComponent)("uni-icons"),ae),c=A((0,r.resolveDynamicComponent)("u-base-info"),ai);return(0,r.openBlock)(),(0,r.createElementBlock)("view",{onClick:t[0]||(t[0]=(...u)=>a.clickUser&&a.clickUser(...u)),class:"msg-first user-album",style:(0,r.normalizeStyle)({width:`${i.width-20}px`,background:a.viewBg}),renderWhole:!0},[n.albumArr.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"center"},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n.albumArr,(u,d)=>((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:"a"+d,style:(0,r.normalizeStyle)({marginRight:d<3?"6px":0})},[(0,r.createVNode)(o,{src:u.small_url,w:`${a.getImgWH[0]}px`,h:`${a.getImgWH[1]}px`,radius:"8rpx","place-w":`${a.getImgWH[0]-10}px`,"place-type":2},null,8,["src","w","h","place-w"]),u.media_type==n.videoFlag?((0,r.openBlock)(),(0,r.createBlock)(o,{key:0,src:"s/user/video_play.png",w:"25px",h:"25px",style:(0,r.normalizeStyle)([{position:"absolute"},{marginLeft:`${a.getImgWH[2]}px`,marginTop:`${a.getImgWH[3]}px`}])},null,8,["style"])):(0,r.createCommentVNode)("",!0),u.check_price>0||n.hasMore&&d==3?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"fee-cover center-align",style:(0,r.normalizeStyle)({width:`${a.getImgWH[0]}px`,height:`${a.getImgWH[1]}px`,background:a.viewFeeCoverBg})},[d==3&&n.hasMore?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,style:{"flex-direction":"row"}},[(0,r.createElementVNode)("u-text",{class:"more-text"},(0,r.toDisplayString)(a.$str("more")),1),(0,r.createVNode)(l,{type:"right",size:"12px",color:"#FFFFFF"})])):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,style:(0,r.normalizeStyle)({width:`${a.getImgWH[0]}px`,height:`${a.getImgWH[1]}px`}),class:"pos"},[(0,r.createVNode)(o,{src:"s/user/media_fee_bg.png",w:`${a.getImgWH[0]}px`,h:`${a.getImgWH[1]}px`,radius:"8rpx"},null,8,["w","h"]),(0,r.createVNode)(o,{src:u.media_type==1?"s/anchor/i_fee_photo2.png":"s/anchor/i_fee_video2.png",w:"32rpx",h:"32rpx",style:{position:"absolute",top:"10rpx",left:"10rpx"}},null,8,["src"])],4))],4)):(0,r.createCommentVNode)("",!0)],4))),128))])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("view",{class:"center user-info"},[(0,r.createVNode)(c,{info:n.user,nameWidth:"350rpx","show-country":!0,fw:500},null,8,["info"])])],4)}var yu=v(gu,[["render",_u],["styles",[mu]]]),bu={wrap:{"":{position:"fixed",alignItems:"center",flexDirection:"row",paddingTop:0,paddingRight:"4rpx",paddingBottom:0,paddingLeft:"4rpx"}},cover:{"":{zIndex:111,position:"fixed",backgroundColor:"rgba(0,0,0,0)"}},popover:{"":{textAlign:"center",zIndex:111,position:"relative"}},triangle:{"":{width:"28rpx",height:"28rpx",transform:"rotate(45deg)",position:"absolute",zIndex:11}}},xu=Ie("dom"),wu={emits:["onClickOther"],props:{size:{type:Object,default(){return{}}},minMargin:{type:[String,Number],default:15},bgColor:{type:String,default:"#000000"},direction:{type:String,default:"above"},boxShadow:{type:String,default:"0 4rpx 8rpx 0 rgba(0, 0, 0, 0.09)"},triBoxShadow:{type:String,default:"0 4rpx 4rpx 0 rgba(0, 0, 0, 0.09)"},triangleIsTop:{type:Boolean,default:!0},showTriangle:{type:Boolean,default:!0},contentRadius:{type:String,default:"8rpx"},sideOptions:{type:Object,default(){return{}}}},computed:{getStyle(){let e={top:this.getTop()[0]+"px",height:this.popFatherHeight+"px",opacity:this.opacity};return this.sideOptions.hasOwnProperty("left")?e.left=`${this.sideOptions.left}px`:this.sideOptions.hasOwnProperty("right")?e.right=`${this.sideOptions.right}px`:e.left=`${this.getSide()[0]}px`,e},getTriangleStyle(){return{top:this.getTop()[1]+"px",left:this.getSide()[1]+"px","background-color":this.bgColor}},triangleBoxShadow(){return _(this.boxShadow)?"":this.triangleBoxShadow}},data(){return{opacity:0,popWidth:0,popHeight:0,show:!1,showPop:!1,popFatherHeight:0,coverWidth:getApp().globalData.window.width,coverHeight:getApp().globalData.window.height}},methods:{getTop(){let e,t,i=this.size.top,s=this.size.height,n=this.size.bottom;if(this.direction=="above")i<this.popFatherHeight+10?(e=i+s+6,t=2,this.showTriangle||(e-=6)):(e=i-this.popFatherHeight-6,t=this.popHeight,this.showTriangle||(e+=6));else if(this.direction=="below"){let a=getApp().globalData.window;this.coverHeight-a.statusBarHeight-a.safeBottom-44-50-n<this.popFatherHeight+10?(e=i-this.popFatherHeight-6,t=this.popHeight):(e=i+s+6,t=2),this.showTriangle||(e+=6)}return[e,t]},getSide(){let e=this.coverWidth,t=this.size,i=this.popWidth/2,s=t.left+(t.width-12)/2,n,a;return i>=s?(n=this.minMargin,a=s-this.minMargin):this.size.left+this.popWidth>=e?(n=e-this.popWidth-this.minMargin,a=t.left-n+t.width/2-7):(n=s-i+5,a=i-6),[n,a]},clickOther(){this.show=!1,this.$emit("onClickOther")},getPopHeight(){var e=this;xu.getComponentRect(e.$refs.popContent,t=>{if(t&&t.size){let i=t.size;e.popWidth=i.width,e.popHeight=i.height,e.popFatherHeight=i.height+18,e.opacity=1}})},open(){var e=this;e.show=!0,e.opacity=0;let t=setTimeout(function(){e.getPopHeight(),clearTimeout(t)},100)},close(){this.show&&(this.show=!1)}}};function Su(e,t,i,s,n,a){return n.show?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...o)=>a.clickOther&&a.clickOther(...o)),class:"cover",style:(0,r.normalizeStyle)({width:n.coverWidth+"px",height:n.coverHeight+"px"}),renderWhole:!0},[(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)(a.getStyle),class:"wrap"},[i.showTriangle?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"triangle",style:(0,r.normalizeStyle)([a.getTriangleStyle,{boxShadow:a.triangleBoxShadow}])},null,4)):(0,r.createCommentVNode)("",!0),i.showTriangle&&i.triangleIsTop?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"triangle",style:(0,r.normalizeStyle)([a.getTriangleStyle])},null,4)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("view",{ref:"popContent",class:"popover",style:(0,r.normalizeStyle)({"background-color":i.bgColor,boxShadow:i.boxShadow,borderRadius:i.contentRadius})},[(0,r.renderSlot)(e.$slots,"default")],4),i.showTriangle&&!i.triangleIsTop?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:2,class:"triangle",style:(0,r.normalizeStyle)([a.getTriangleStyle])},null,4)):(0,r.createCommentVNode)("",!0)],4)],4)):(0,r.createCommentVNode)("",!0)}var pn=v(wu,[["render",Su],["styles",[bu]]]),Cu={emits:["onChoosePicture"],data(){return{moreActions:[],cameraActions:[]}},methods:{onClickActionItem(e){switch(e.key){case"send_photos":this.chooseImage(1,9);break;case"send_video":this.chooseVideo(1);break;case"take_photos":this.chooseImage(2,1);break;case"take_video":this.chooseVideo(2);break}},chooseImage(e,t){ds(e,t).then(i=>{let s=i.tempFilePaths;for(let n=0,a=s.length;n<a;n++){let o=s[n];uni.getImageInfo({src:o,success:l=>{let c={path:l.path,width:l.width,height:l.height};this.$emit("onChoosePicture",0,c)}})}})},chooseVideo(e){ps(e,!0).then(t=>{let i={path:t.tempFilePath,coverPath:t.coverPath,width:t.height,height:t.width,duration:parseInt(t.duration)||0};this.$emit("onChoosePicture",1,i)})}},created(){this.cameraActions=[{title:p("takePhotos"),key:"take_photos"},{title:p("takeVideosLower"),key:"take_video"},{title:p("sendPhotos"),key:"send_photos"},{title:p("sendVideos"),key:"send_video"}]}},Au={center:{"":{alignItems:"center",flexDirection:"row"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"flex-wrap":{"":{flexWrap:"wrap",flexDirection:"row"}},"msg-bar-express":{"":{position:"relative",backgroundColor:"#FFFFFF",height:0}},"expression-bar":{"":{alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingTop:"14rpx",paddingRight:"36rpx",paddingBottom:"14rpx",paddingLeft:"36rpx"}},"choose-item":{".expression-bar ":{width:"72rpx",height:"72rpx",position:"relative",marginRight:"28rpx"}},"delete-icon":{".expression-bar ":{width:"60rpx",height:"60rpx"}},line:{".expression-bar ":{height:1,backgroundColor:"#CCCCCC",transform:"scaleY(0.5)",transformOrigin:"50% 100%",opacity:.5}},"emoji-wrap":{"":{paddingTop:"20rpx",paddingRight:10,paddingBottom:0,paddingLeft:10}},"pig-wrap":{"":{paddingTop:0,paddingRight:5,paddingBottom:"10rpx",paddingLeft:5}},"new-tag":{"":{backgroundColor:"#34C759",lineHeight:"24rpx",paddingTop:0,paddingRight:"6rpx",paddingBottom:0,paddingLeft:"6rpx",borderRadius:"12rpx",color:"#FFFFFF",fontSize:"16rpx",position:"absolute",left:"40rpx"}},"expression-from":{"":{height:"20rpx",paddingTop:0,paddingRight:"8rpx",paddingBottom:0,paddingLeft:"8rpx",borderBottomLeftRadius:"4rpx",position:"absolute",right:0,top:0,zIndex:111}},text:{".expression-from ":{fontSize:"16rpx",fontWeight:"600",lineHeight:"20rpx",marginLeft:"4rpx"}}},Tu=Ie("animation"),ku={mixins:[ua],name:"MsgBarAction",components:{LImg:R,MIcon:ni,MView:ii},emits:["onOpen","onChooseExpressImg"],props:{isReception:{type:Boolean,default:!1}},data(){return{defHeight:Math.round(240*getApp().globalData.window.scaleH),originalHeight:0,isAndroid:Y.isAndroid,height:0,emojiList:[],screenW:getApp().globalData.window.width,emojiW:0,pigW:0,safeAreaBottom:getApp().globalData.window.safeBottom,swiperCurrent:0,delOpacity:.4,barStyle:{},chooseBgStyle:{borderRadius:"8rpx",background:"rgba(255, 255, 255, 0.1)"},showNewTag:!1,expressionFrom:"Flaticon",expressionBarActW:getApp().globalData.window.width-(uni.upx2px(120)+uni.upx2px(92)),scrollLeft:0,curScrollLeft:0,iconColorW:this.isReception?"_w":"",expressionsList:[]}},watch:{height(e){this.$emit("onOpen",e>0,e)}},computed:{expressionFromStyle(){var e,t,i;let s,n;return((i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.style)==Ae.LIGHT?(s="#FFFFFF",n="#CCCCCC"):(s="#999999",n="#333333"),{color:s,bgColor:n}},barBgColor(){return"rgba(51,51,51,0.01)"},actionBgColor(){var e,t,i;return this.isReception?"transparent":(i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.color.bg1}},methods:{$str:p,clickClose(){this.open(!1)},clickBarImg(e,t){e&&e.stopPropagation(),t==2&&this.showNewTag&&(this.showNewTag=!1,ke("show_new_expression_tag_"+getApp().globalData.uid,"1")),this.handleTabEmoji(t)},clickDelete(){uni.$emit("event_delete_text")},clickPig(e,t){if(e&&e.stopPropagation(),si())return;let i={path:t,width:100,height:100};this.$emit("onChooseExpressImg",i)},clickEmoji(e){this.delOpacity<1&&(this.delOpacity=1),uni.$emit("event_add_emoji_text",e)},onSwiperChange(e){let t=e.detail.current;this.handleTabEmoji(t)},onScrollView(e){this.curScrollLeft=e.detail.scrollLeft},isShow(){return this.height>0},setHeight(e){this.originalHeight=e,this.isShow()&&this.height!=this.defHeight&&this.open(!0)},handleTabEmoji(e){if(this.swiperCurrent==e)return;this.swiperCurrent=e;let t=0,i=uni.upx2px(100)*(this.expressionsList.length+1),s;s=uni.upx2px(100)*e,t=uni.upx2px(100)*e+uni.upx2px(40);let n=uni.upx2px(72),a=this.expressionBarActW/2;s<=a?(this.scrollLeft=this.curScrollLeft,this.$nextTick(()=>{this.scrollLeft=0})):i-t<=a?(this.scrollLeft=this.curScrollLeft,this.$nextTick(()=>{let o=Y.isAndroid?10:2;this.scrollLeft=i-this.expressionBarActW+o})):this.scrollLeft=t-(a-n/2)},parseExpressions(){this.emojiList=["\u{1F600}","\u{1F603}","\u{1F604}","\u{1F601}","\u{1F606}","\u{1F605}","\u{1F602}","\u{1F923}","\uFE0F\u{1F60A}","\u{1F607}","\u{1F642}","\u{1F643}","\u{1F609}","\u{1F60C}","\u{1F60D}","\u{1F970}","\u{1F618}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F60B}","\u{1F61B}","\u{1F61D}","\u{1F61C}","\u{1F92A}","\u{1F928}","\u{1F9D0}","\u{1F913}","\u{1F60E}","\u{1F929}","\u{1F973}","\u{1F60F}","\u{1F612}","\u{1F61E}","\u{1F614}","\u{1F61F}","\u{1F615}","\u{1F641}","\uFE0F\u{1F616}","\u{1F62B}","\u{1F629}","\u{1F97A}","\u{1F622}","\u{1F62D}","\u{1F624}","\u{1F620}","\u{1F621}","\u{1F92C}","\u{1F92F}","\u{1F633}","\u{1F975}","\u{1F976}","\u{1F631}","\u{1F628}","\u{1F630}","\u{1F625}","\u{1F613}","\u{1F917}","\u{1F914}","\u{1F92D}","\u{1F92B}","\u{1F925}","\u{1F636}","\u{1F610}"],this.pigW=parseInt((this.screenW-10)/5)},open(e,t){this.height=e?this.originalHeight:0,this.isAndroid?this.barStyle={height:`${this.height}px`}:Tu.transition(this.$refs.refBarAction,{styles:{height:`${e?this.originalHeight:0}px`},duration:t?1:this.isAndroid?100:300,timingFunction:"ease",needLayout:!0,delay:0})}},created(){this.parseExpressions(),uni.$on("event_bar_action_can_del",e=>{e&&this.delOpacity>=1||(this.delOpacity=e?1:.4)}),this.originalHeight=getApp().globalData.keyboardH,this.originalHeight==0&&(this.originalHeight=this.defHeight),this.emojiW=parseInt((this.screenW-20)/8),this.pigW=parseInt((this.screenW-10)/5),this.showNewTag=!Le("show_new_expression_tag_"+getApp().globalData.uid)},unmounted(){uni.$off("event_bar_action_can_del")}};function vu(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=(0,r.resolveComponent)("m-icon"),c=(0,r.resolveComponent)("m-view"),u=(0,r.resolveComponent)("swiper-item"),d=(0,r.resolveComponent)("swiper");return(0,r.openBlock)(),(0,r.createElementBlock)("view",{ref:"refBarAction",class:"msg-bar-express",style:(0,r.normalizeStyle)([n.barStyle,{background:"rgba(51,51,51,0.25)"}]),renderWhole:!0},[(0,r.createVNode)(c,{type:"bg2",style:(0,r.normalizeStyle)([{"flex-direction":"row","align-items":"center","justify-content":"space-between",padding:"16rpx 38rpx"},{width:`${n.screenW}px`,background:`${a.barBgColor}`}]),class:"expression-bar"},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"center"},[(0,r.createElementVNode)("scroll-view",{scrollX:!0,showScrollbar:!1,scrollLeft:n.scrollLeft,onScroll:t[2]||(t[2]=(...h)=>a.onScrollView&&a.onScrollView(...h)),class:"center",style:(0,r.normalizeStyle)([{width:`${n.expressionBarActW}px`},{height:"72rpx"}])},[(0,r.createElementVNode)("view",{onClick:t[1]||(t[1]=h=>a.clickBarImg(h,0)),class:"choose-item center-align",style:(0,r.normalizeStyle)(n.swiperCurrent==0?n.chooseBgStyle:{background:"rgba(255, 255, 255, 0.1)"})},[(0,r.createVNode)(o,{onClick:t[0]||(t[0]=h=>a.clickBarImg(h,0)),src:"/static/mag-bar-emg.png",needStyle:1,w:"60rpx",h:"60rpx"})],4),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n.expressionsList,(h,f)=>((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:f,onClick:g=>a.clickBarImg(g,f+1),class:"choose-item center-align",style:(0,r.normalizeStyle)(n.swiperCurrent==f+1?n.chooseBgStyle:{background:"transparent"})},[(0,r.createVNode)(o,{onClick:g=>a.clickBarImg(g,f+1),src:h.icon,needStyle:1,w:"60rpx",h:"60rpx"},null,8,["onClick","src"])],12,["onClick"]))),128))],44,["scrollLeft"])]),(0,r.createElementVNode)("view",{class:"center"},[(0,r.createElementVNode)("view",{onClick:t[3]||(t[3]=(...h)=>a.clickDelete&&a.clickDelete(...h)),class:"center-align delete-icon"},[(0,r.createVNode)(o,{src:"/static/delete-bar-msg.png",w:"48rpx",h:"48rpx"})]),n.isAndroid?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,onClick:t[4]||(t[4]=(...h)=>a.clickClose&&a.clickClose(...h)),class:"center-align delete-icon",style:{"margin-left":"16rpx"}},[(0,r.createVNode)(l,{type:"bottom",size:"36rpx",color:i.isReception?"#FFFFFF":"#999999"},null,8,["color"])])):(0,r.createCommentVNode)("",!0)])]),_:1},8,["style"]),(0,r.createVNode)(d,{current:n.swiperCurrent,onChange:a.onSwiperChange,style:(0,r.normalizeStyle)({height:n.originalHeight-50+"px"})},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(u,{class:"swiper-item"},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(c,{type:"bg1"},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("scroll-view",{scrollY:"true",class:"emoji-wrap",showScrollbar:!1,style:(0,r.normalizeStyle)({height:n.originalHeight-50+"px"})},[(0,r.createElementVNode)("view",{class:"flex-wrap",style:(0,r.normalizeStyle)({paddingBottom:n.safeAreaBottom+"px"})},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n.emojiList,(h,f)=>((0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"center-align",onClick:g=>a.clickEmoji(h),key:"e"+f,style:(0,r.normalizeStyle)({width:n.emojiW+"px",height:n.emojiW+"px"})},[(0,r.createElementVNode)("u-text",{style:{"font-size":"60rpx"}},(0,r.toDisplayString)(h),1)],12,["onClick"]))),128))],4)],4)]),_:1})]),_:1}),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n.expressionsList,(h,f)=>((0,r.openBlock)(),(0,r.createBlock)(u,{class:"swiper-item",key:f},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(c,{type:"bg1"},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("scroll-view",{scrollY:"true",class:"pig-wrap",showScrollbar:!1,style:(0,r.normalizeStyle)({height:n.originalHeight-50+"px"})},[(0,r.createElementVNode)("view",{style:{width:"2px","min-height":"10px"}}),(0,r.createElementVNode)("view",{class:"flex-wrap"},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(h.list,(g,I)=>((0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"center-align",onClick:S=>a.clickPig(S,g.src),key:"p"+I,style:(0,r.normalizeStyle)({width:n.pigW+"px",height:n.pigW+"px"})},[(0,r.createVNode)(o,{onClick:S=>a.clickPig(S,g.src),src:g.src,w:g.w+"px",h:g.w+"px"},null,8,["onClick","src","w","h"])],12,["onClick"]))),128))])],4),(0,r.createElementVNode)("view",{class:"expression-from center",style:(0,r.normalizeStyle)({background:a.expressionFromStyle.bgColor})},[(0,r.createVNode)(o,{src:"s/msg/expression_from.png",w:"16rpx",h:"16rpx","need-style":1}),(0,r.createElementVNode)("u-text",{class:"text",style:(0,r.normalizeStyle)({color:a.expressionFromStyle.color})},(0,r.toDisplayString)(n.expressionFrom),5)],4)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["current","onChange","style"])],4)}var Iu=v(ku,[["render",vu],["styles",[Au]]]),Eu={"msg-bar-audio-content":{"":{paddingTop:"20rpx",paddingRight:0,paddingBottom:"20rpx",paddingLeft:0}},"view-doing":{"":{flexDirection:"row",alignItems:"center",paddingLeft:"30rpx"}},"text-duration":{"":{width:"80rpx",textAlign:"center",fontSize:"28rpx",color:"#333333"}},"view-middle":{"":{height:"110rpx",flexDirection:"row",alignItems:"center",justifyContent:"center",position:"absolute",bottom:0}},"view-scroll-cancel":{"":{flexDirection:"row",alignItems:"center"}},"text-cancel-scroll":{"":{color:"#333333",fontSize:"28rpx",marginRight:"2rpx"}},"text-cancel":{"":{fontSize:"34rpx",color:"#333333",fontWeight:"600"}},"view-preview-middle":{"":{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center",height:"80rpx",borderRadius:"40rpx"}},"text-audio-duration":{"":{color:"#333333",fontSize:"28rpx",marginRight:"12rpx",marginLeft:"12rpx"}},"view-record-btn":{"":{height:"100rpx",width:"120rpx",alignItems:"center",justifyContent:"center",flexDirection:"row"}},"center-align":{"":{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},center:{"":{alignItems:"center"}},"audio-tip":{"":{borderRadius:"8rpx",lineHeight:"28rpx",paddingTop:"14rpx",paddingRight:"10rpx",paddingBottom:"14rpx",paddingLeft:"16rpx"}},tip:{".audio-tip ":{color:"#FFFFFF",fontSize:"20rpx",marginRight:"10rpx"}},"f-d-r":{"":{flexDirection:"row"}},"clear-audio":{"":{width:"64rpx",height:"64rpx",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"32rpx"}},"listen-box":{"":{width:"80rpx",height:"80rpx",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"40rpx"}},"listen-box-2":{"":{width:"64rpx",height:"64rpx",backgroundColor:"rgba(255,255,255,0.9)",borderRadius:"32rpx"}}},vt=uni.getRecorderManager(),Mu=Ie("dom"),Du={components:{MIcon:ni,MText:it},emits:["onAudioCancel","onAudioFinish","onBarAudioLockStop"],props:{maxDuration:{type:Number,default:300},onlyVoice:{type:Boolean,default:!1}},data(){return{screenW:getApp().globalData.window.width,showDoing:!0,recordTimer:!1,recordDuration:0,cancelX:getApp().globalData.window.width/2+40,cancelW:getApp().globalData.window.width,touchRightX:0,lastX:0,isCancel:!1,isLock:!1,recordFinishSend:!0,mAudioInner:uni.createInnerAudioContext(),audioPath:"",audioDuration:0,audioDurationPlay:0,audioPlayerTimer:!1,audioSliderValue:0,audioSliderChanging:!1,audioPlayerIcon:"f/msg/audio_play.png",isShowAudio:1,audioTipSize:{}}},computed:{getSafeBottom(){return this.onlyVoice?0:getApp().globalData.window.safeBottom},durationStr(){return this.recordDuration<=0?"00:00":$e(this.recordDuration)},playDurationStr(){return this.audioDurationPlay<=0?"00:00":$e(this.audioDurationPlay)},viewBg(){return"rgba(51,51,51,0.25)"}},methods:{$str:p,clickCancel(e){e.stopPropagation(),this.isCancel=!0,this.stopRecord(!1),this.audioTipSize={},this.$emit("onAudioCancel")},clickSend(){this.isShowAudio!=1&&(this.audioTipSize={},this.$emit("onAudioFinish",!0,{path:this.audioPath,duration:this.audioDuration}))},clickPlay(){this.mAudioInner.paused?(this.mAudioInner.play(),this.handlePlayerInterval()):(this.mAudioInner.pause(),this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer))},clickUpdateAudioStatus(e,t){this.isShowAudio=e,t=="end"?this.$emit("onBarAudioLockStop"):(t=="play"||t=="pause")&&this.clickPlay()},clickAudioTipClose(){this.hasShowAudioTip&&(this.hasShowAudioTip=!1,this.$refs.audioTipPop.close(),Ze("showAudioTip2",!0))},showAudioTip(){this.hasShowAudioTip||this.$nextTick(()=>{Mu.getComponentRect(this.$refs.playAanEndAudioRef,e=>{e&&e.size&&(this.audioTipSize=e.size,this.audioTipSize.top+=5,this.hasShowAudioTip=!0,this.$refs.audioTipPop.open())})})},onClickOther(){this.clickAudioTipClose()},onTouchMoveLeft(e){if(!this.isLock&&!this.isCancel){if(this.lastX!=0){let t=e-this.lastX;this.touchRightX-=t,this.touchRightX<0&&(this.touchRightX=0),this.cancelW+=t}this.lastX=e,e<this.cancelX&&(this.isCancel=!0,this.stopRecord(!1),this.$emit("onAudioCancel"))}},stopRecord(e){this.recordFinishSend=e,this.recordTimer&&clearInterval(this.recordTimer),this.recordTimer=!1,this.recordDuration=0,vt.stop()},startRecord(){this.$nextTick(()=>{ve("showAudioTip2")||setTimeout(()=>{this.showAudioTip()},200),this.startRecordTimer(),vt.start({duration:this.maxDuration*1e3,format:"aac"})})},startRecordTimer(){this.recordTimer||(this.recordTimer=setInterval(()=>{if(this.recordDuration>=this.maxDuration){this.stopRecord(!0);return}this.recordDuration+=1},1e3))},changeAudioLock(){this.isLock=!0,this.touchRightX=0},changeAudioStop(){this.showDoing=!1,this.stopRecord(!1)},initAudioPreview(){this.mAudioInner.src=this.audioPath,this.audioDurationPlay=this.audioDuration},handlePlayerInterval(){this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer),this.audioPlayerTimer=setInterval(()=>{let e=this.mAudioInner.currentTime,t=parseInt(e*100);isNaN(t)||(this.audioDurationPlay=parseInt(e),this.audioSliderChanging||(this.audioSliderValue=parseInt(t/this.audioDuration)))},100)},audioOnEndedListener(e){this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer),this.audioSliderValue=0,this.isShowAudio=2,this.audioDurationPlay=this.audioDuration,this.audioPlayerIcon="f/msg/audio_play.png"},audioOnPlayListener(){this.audioPlayerIcon="f/msg/audio_pause.png",this.isShowAudio=3},audioOnPauseListener(){this.audioPlayerIcon="f/msg/audio_play.png",this.isShowAudio=2}},created(){vt.onStop(e=>{if(this.isCancel)return;E("info","at pagesMsg/coms/msg-bar/msg-bar-audio.vue:246","----> record finish "+JSON.stringify(e));let t=uni.createInnerAudioContext(),i=e.tempFilePath,s=setTimeout(()=>{clearTimeout(s),t.destroy(),this.$emit("onAudioFinish",!1)},2e3);t.src=i,t.onCanplay(()=>{let n=t.duration;clearTimeout(s),E("info","at pagesMsg/coms/msg-bar/msg-bar-audio.vue:260","-----> \u5B8C\u6210\u5F55\u5236 \u65F6\u957F = "+n),t.destroy(),this.recordFinishSend?n<1?this.$emit("onAudioFinish",!1):this.$emit("onAudioFinish",!0,{path:i,duration:Math.round(n)}):(this.audioPath=i,this.audioDuration=Math.round(n),this.initAudioPreview())})}),vt.onError(e=>{E("error","at pagesMsg/coms/msg-bar/msg-bar-audio.vue:277","----> MsgBarAudio mRecordManager onError "+JSON.stringify(e)),this.$emit("onAudioFinish",!1)}),this.mAudioInner.onEnded(this.audioOnEndedListener),this.mAudioInner.onPlay(this.audioOnPlayListener),this.mAudioInner.onPause(this.audioOnPauseListener)},beforeUnmount(){this.mAudioInner.destroy(),this.recordTimer&&(clearInterval(this.recordTimer),this.isCancel=!0,vt.stop()),this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer)}};function Lu(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=A((0,r.resolveDynamicComponent)("uni-icons"),ae),c=A((0,r.resolveDynamicComponent)("custom-popover"),pn);return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"msg-bar-audio",style:(0,r.normalizeStyle)({width:`${n.screenW}px`}),renderWhole:!0},[(0,r.createElementVNode)("view",{class:"center-align msg-bar-audio-content",style:(0,r.normalizeStyle)({background:a.viewBg})},[(0,r.createElementVNode)("view",{onClick:t[0]||(t[0]=(...u)=>a.clickCancel&&a.clickCancel(...u)),class:"center-align clear-audio"},[(0,r.createVNode)(o,{src:"/static/clear-audio.png",w:"40rpx",h:"40rpx"})]),(0,r.createElementVNode)("view",{ref:"playAanEndAudioRef",class:"center",style:{height:"112rpx",margin:"0 60px"}},[(0,r.createElementVNode)("view",{class:"center-align listen-box"},[(0,r.createElementVNode)("view",{class:"listen-box-2 center-align"},[n.isShowAudio==1?((0,r.openBlock)(),(0,r.createBlock)(o,{key:0,onClick:t[1]||(t[1]=u=>a.clickUpdateAudioStatus(2,"end")),src:"/static/listen-audio.png",w:"46rpx",h:"46rpx"})):(0,r.createCommentVNode)("",!0),n.isShowAudio==2?((0,r.openBlock)(),(0,r.createBlock)(o,{key:1,onClick:t[2]||(t[2]=u=>a.clickUpdateAudioStatus(3,"play")),src:"/static/pause-audio.png",w:"46rpx",h:"46rpx"})):(0,r.createCommentVNode)("",!0),n.isShowAudio==3?((0,r.openBlock)(),(0,r.createBlock)(o,{key:2,onClick:t[3]||(t[3]=u=>a.clickUpdateAudioStatus(2,"pause")),src:"/static/play-audio.png",w:"46rpx",h:"46rpx"})):(0,r.createCommentVNode)("",!0)])]),n.isShowAudio==1?((0,r.openBlock)(),(0,r.createElementBlock)("u-text",{key:0,style:{"text-align":"center","font-size":"20rpx",color:"rgba(255,255,255,0.7)","margin-top":"6rpx"}},(0,r.toDisplayString)(a.durationStr),1)):((0,r.openBlock)(),(0,r.createElementBlock)("u-text",{key:1,style:{"text-align":"center","font-size":"20rpx",color:"rgba(255,255,255,0.7)","margin-top":"6rpx"}},(0,r.toDisplayString)(a.playDurationStr),1))],512),(0,r.createElementVNode)("view",{onClick:t[4]||(t[4]=(...u)=>a.clickSend&&a.clickSend(...u))},[(0,r.createVNode)(o,{src:"/static/send-audio.png",w:"66rpx",h:"64rpx",fade:!1})])],4),(0,r.createVNode)(c,{ref:"audioTipPop",size:n.audioTipSize,"bg-color":"#000000","min-margin":"10","triangle-is-top":!1,onOnClickOther:a.onClickOther},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"f-d-r center audio-tip"},[(0,r.createElementVNode)("u-text",{class:"tip"},(0,r.toDisplayString)(a.$str("msg.pressAndHoldToSpeak")),1),(0,r.createVNode)(l,{onClick:a.clickAudioTipClose,type:"clear",color:"#FFFFFF",size:"34rpx"},null,8,["onClick"])])]),_:1},8,["size","onOnClickOther"]),(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)([{background:"#FFFFFF"},{height:`${a.getSafeBottom}px`,background:a.viewBg}])},null,4)],4)}var Fu=v(Du,[["render",Lu],["styles",[Eu]]]),Ou={"view-lock-open":{"":{width:"76rpx",borderTopLeftRadius:"38rpx",borderTopRightRadius:"38rpx",alignItems:"center"}},"view-top":{"":{width:"76rpx",height:"76rpx",borderRadius:"38rpx",position:"absolute",top:0,left:0}},"view-lock":{"":{width:"28rpx",height:"28rpx",backgroundColor:"#DD524D",borderRadius:"4rpx",marginTop:"24rpx",marginLeft:"24rpx"}}},Ru={emits:["onBarAudioLock","onBarAudioLockStop"],data(){return{lockH:uni.upx2px(120),diffHeight:0,viewHeight:uni.upx2px(160),iconUpMargin:uni.upx2px(74),lastY:0,showLock:!1}},methods:{clickStop(){this.showLock&&this.$emit("onBarAudioLockStop")},onTouchMoveUp(e){if(!this.showLock){if(this.lastY!=0){let t=this.lastY-e;this.diffHeight+=t}this.diffHeight>=this.lockH&&(this.diffHeight=this.lockH,this.viewHeight=0,this.iconUpMargin=0,this.showLock=!0,this.$emit("onBarAudioLock")),this.lastY=e}}},computed:{viewBg(){var e,t,i;let s=(e=getApp().globalData)==null?void 0:e.themeObj;return(s==null?void 0:s.style)==Ae.LIGHT?(t=s==null?void 0:s.color)==null?void 0:t.bg2:(i=s==null?void 0:s.color)==null?void 0:i.bg3}}};function Nu(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("uni-icons"),ae),l=A((0,r.resolveDynamicComponent)("l-img"),R);return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"msg-bar-audio-lock",onClick:t[0]||(t[0]=(...c)=>a.clickStop&&a.clickStop(...c)),renderWhole:!0},[(0,r.createElementVNode)("view",{class:"view-lock-open",style:(0,r.normalizeStyle)({height:`${n.viewHeight}px`,background:a.viewBg})},[(0,r.createVNode)(o,{type:"top",size:"30rpx",color:"#333333",style:(0,r.normalizeStyle)({marginTop:`${n.iconUpMargin}px`})},null,8,["style"])],4),(0,r.createElementVNode)("view",{class:"view-top",style:(0,r.normalizeStyle)({background:a.viewBg})},[n.showLock?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"view-lock"})):((0,r.openBlock)(),(0,r.createBlock)(l,{key:1,src:"f/msg/audio_lock.png",w:"54rpx",h:"54rpx",style:{"margin-top":"10rpx","margin-left":"11rpx"}}))],4),(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)({height:`${n.diffHeight}px`})},null,4)])}var Pu=v(Ru,[["render",Nu],["styles",[Ou]]]),Bu={"msg-bar":{"":{position:"relative"}},center:{"":{alignItems:"center",flexDirection:"row"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"msg-bar-call":{"":{marginBottom:"20rpx"}},"call-item":{".msg-bar-call ":{marginRight:"20rpx",backgroundColor:"#44355E",borderRadius:"16rpx",paddingTop:"12rpx",paddingRight:"16rpx",paddingBottom:"12rpx",paddingLeft:"16rpx",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.08)"}},"call-title":{".msg-bar-call ":{color:"#FFFFFF",fontSize:"24rpx",marginLeft:"16rpx"}},"place-item":{".msg-bar-call ":{width:"28rpx",height:"2rpx"}},"msg-bar-view":{"":{flexDirection:"row",justifyContent:"space-between",paddingTop:"12rpx",paddingRight:0,paddingBottom:"12rpx",paddingLeft:0}},img:{".msg-bar-view ":{paddingTop:"14rpx",paddingRight:"10rpx",paddingBottom:"14rpx",paddingLeft:"10rpx"}},"view-camera":{".msg-bar-view ":{width:"80rpx",height:"80rpx",borderRadius:"40rpx"}},"img-send":{".msg-bar-view ":{paddingTop:"12rpx",paddingRight:"20rpx",paddingBottom:"12rpx",paddingLeft:"20rpx"}},"msg-bar-middle":{"":{flex:1,position:"relative",borderRadius:"40rpx",paddingTop:"20rpx",paddingRight:"82rpx",paddingBottom:"20rpx",paddingLeft:"26rpx"}},"input-bar":{".msg-bar-middle ":{lineHeight:40,fontSize:14,flex:1}},expression:{".msg-bar-middle ":{position:"absolute",right:"20rpx",top:"12rpx"}},"audio-tip":{"":{borderRadius:"8rpx",lineHeight:"28rpx",paddingTop:"18rpx",paddingRight:"10rpx",paddingBottom:"19rpx",paddingLeft:"20rpx"}},tip:{".audio-tip ":{color:"#FFFFFF",fontSize:"20rpx",marginRight:"10rpx"}},"mute-mask":{"":{position:"absolute",bottom:0,zIndex:11111}},"unblock-text":{".view-black ":{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",fontSize:"32rpx",color:"#FFFFFF",textDecoration:"underline"}}},Uu=Ie("dom"),un=uni.upx2px(172),ya=uni.upx2px(112),dn=uni.upx2px(90),li=getApp().globalData.window,Wu={name:"MsgBar",components:{LImg:R,MText:it,ActionSheet:Xt,MsgBarAction:Iu,MsgBarAudio:Fu,MsgBarAudioLock:Pu},mixins:[Cu],emits:["onSend","onRecordFinish","onActionOpen","onInputLineChange","onChooseExpressImg","onInputFocus","onInputBlur","onPausedVoice"],props:{chatType:{type:[Number,String],default:1},actionId:{type:[Number,String],default:0},onlyVoice:{type:Boolean,default:!1},hideVoice:{type:Boolean,default:!1},userInfo:{type:Object,default(){return{}}},muteMaskType:{type:Number,default:0},hideBarAction:{type:Boolean,default:!1},isReception:{type:Boolean,default:!1},defaultText:{type:[String,Number],default:""},chatIsReply:{type:Boolean,default:!0}},data(){return{isAndroid:Y.isAndroid,width:li.width,safeBottom:0,cursorSpacing:uni.upx2px(36),text:"",isKeyboardOpen:!1,needOpenAction:!1,showExpression:!0,showSend:!1,sendWidth:0,micWidth:this.hideVoice?un:dn,emojiIndexList:[],audioShow:!1,audioLockShow:!1,audioLockBottom:uni.upx2px(104)+li.safeBottom,isAudioLock:!1,audioTouchTime:0,audioBarShowTimer:!1,audioTipSize:{},hasShowAudioTip:!1,inputAdjustPosition:!0,placeholderStyle:"color: #fff",msgBarActionHeight:0,blackViewH:uni.upx2px(110),colorAction:"#FFFFFF",iconColorW:this.isReception?"_w":""}},computed:{viewBarBg(){return"rgba(51,51,51,0.25)"},viewBarMiddleStyle(){let e={};return e.background="rgba(255, 255, 255, 0.2)",e.border="2rpx solid transparent",e},viewCameraStyle(){let e={};return e.opacity=this.chatIsReply?1:.4,e},viewMuteMaskHeight(){return this.safeBottom+this.msgBarActionHeight+uni.upx2px(104)},muteMaskText(){return this.muteMaskType<=0?"":this.muteMaskType==1?p("msg.mutedYouTip"):p("msg.mutedAllTip")},inputColor(){return"#FFFFFF"}},methods:{$str:p,clickUnblock(){Ki(this.userInfo.uid,this.userInfo.is_black,()=>{uni.$emit("event_change_black",!this.userInfo.is_black,this.userInfo.uid)})},clickStop(e){e&&e.stopPropagation()},clickAudioTipClose(){this.hasShowAudioTip&&(this.hasShowAudioTip=!1,this.$refs.audioTipPop.close(),Ze("showAudioTip1",!0))},clickBarCamera(){if(!this.chatIsReply){We(p("availableAfterToast"));return}this.checkCanNotContact()||(this.isKeyboardOpen&&uni.hideKeyboard(),this.$refs.popCamera.open())},clickBarAlbum(){},clickKeyboard(){this.$nextTick(()=>{this.$refs.input.focus()})},clickExpression(){if(this.$refs.msgBarAction.isShow())this.isKeyboardOpen?(uni.hideKeyboard(),this.showExpression=!1):(this.$refs.input.focus(),this.showExpression=!0);else{if(this.showExpression=!1,this.isKeyboardOpen){this.needOpenAction=!0,uni.hideKeyboard();return}this.$refs.msgBarAction.open(!0)}},clickSend(e){e&&e.stopPropagation(),!this.checkCanNotContact()&&this.handleSend()},checkCanNotContact(){if(this.actionId==w.SYSTEM_ID)return!1;if(si()||qi(this.userInfo))return!0},showAudioTip(){this.hasShowAudioTip||Uu.getComponentRect(this.$refs.audio,e=>{e&&e.size&&(this.audioTipSize=e.size,this.audioTipSize.top+=5,this.hasShowAudioTip=!0,this.$refs.audioTipPop.open())})},onClickOther(){this.clickAudioTipClose()},onInputFocus(){this.showExpression=!0,this.$emit("onInputFocus")},onInputBlur(){this.$emit("onInputBlur")},onLineChange(e){e&&e.detail&&e.detail.height&&this.$emit("onInputLineChange",e.detail.height,e.detail.lineCount)},onInputChange(e){this.text&&this.showSend||(this.text?(this.micWidth=0,this.sendWidth=ya,this.showSend=!0):(this.showSend=!1,this.micWidth=this.hideVoice?un:dn,this.sendWidth=0),uni.$emit("event_bar_action_can_del",this.showSend))},onChooseExpressImg(e){this.$emit("onChooseExpressImg",e)},onActionOpen(e,t){this.msgBarActionHeight=t,e||(this.showExpression=!0),this.$emit("onActionOpen",e,t),this.safeBottom=e?0:li.safeBottom},onKeyboardChange(e){e.height>0?(this.isKeyboardOpen=!0,this.$refs.msgBarAction.setHeight(e.height)):(this.isKeyboardOpen=!1,this.needOpenAction&&(this.needOpenAction=!1,this.$refs.msgBarAction.open(!0,!0)),this.$refs.input.blur())},onKeyboardHeightChanged(e){e.detail.height>0||this.$refs.msgBarAction.isShow()||(this.showExpression=!0)},onAudioTouch(){if(!this.chatIsReply){We(p("availableAfterToast"));return}if(this.isReception){We(p("unavailable"));return}if(this.checkCanNotContact())return;if(this.isKeyboardOpen||this.$refs.msgBarAction.isShow()){uni.hideKeyboard(),this.$refs.msgBarAction.open(!1);return}if(!Bi(j.MICROPHONE)){Gt(j.MICROPHONE);return}this.isAudioLock=!1,this.audioShow=!0},onAudioTouchMove(e){let t=this.$refs.barAudio;if(t){let s=e.changedTouches[0].screenX.toFixed(2);t.onTouchMoveLeft(s)}let i=this.$refs.audioLock;if(i){let s=e.changedTouches[0].screenY.toFixed(2);i.onTouchMoveUp(s)}},onAudioTouchEnd(){this.endAudioTouch(!0)},onAudioTouchCancel(){this.endAudioTouch(!1)},onBarAudioLock(){this.isAudioLock=!0,this.$refs.barAudio.changeAudioLock()},onBarAudioLockStop(){this.audioLockShow=!1,this.$refs.barAudio.changeAudioStop()},onBarAudioAnimChange(e){!e||!e.detail||(this.$refs.barAudio.startRecord(),this.$emit("onPausedVoice",!0))},onBarAudioCancel(){this.audioShow=!1,this.audioLockShow=!1,this.$emit("onPausedVoice",!1)},onBarAudioFinish(e,t){this.onBarAudioCancel(),e&&(this.$emit("onRecordFinish",t),this.$emit("onPausedVoice",!1))},endAudioTouch(e){if(this.isAudioLock)return;if(new Date().getTime()-this.audioTouchTime<600){this.showAudioTip(),clearTimeout(this.audioBarShowTimer),this.audioShow=!1,this.audioLockShow=!1,this.audioBarShowTimer=!1,this.$refs.barAudio&&this.$refs.barAudio.stopRecord(!1);return}this.$refs.barAudio?this.$refs.barAudio.stopRecord(e):this.onBarAudioCancel()},hide(){this.isKeyboardOpen&&uni.hideKeyboard(),this.hideAction()},hideAction(){this.showExpression=!0,this.$refs.msgBarAction.open(!1)},handleSend(){if(this.text==null||this.text=="")return;if(this.text.trim()==""){Ue(p("tips"),p("msg.msgNullTip"),"",p("gotIt"));return}this.$emit("onSend",this.text),this.text="",this.onInputChange()},focus(){this.$refs.input.focus()},setInputAdjustPosition(e){this.inputAdjustPosition!=e&&(this.inputAdjustPosition=e)},setText(e){this.text+=e,this.onInputChange()},clearText(){this.text="",this.showSend=!1,this.micWidth=this.hideVoice?un:dn,this.sendWidth=0}},created(){var e=this;this.onlyVoice||(this.safeBottom=li.safeBottom),uni.onKeyboardHeightChange(this.onKeyboardChange),uni.$on("event_add_emoji_text",function(t){e.text=e.text+t,e.emojiIndexList.push(e.text.length),e.onInputChange({detail:{value:e.text}})}),uni.$on("event_delete_text",function(){let t=e.text.length;if(t<=0)return;let i=e.emojiIndexList.indexOf(t);i!=-1?(e.emojiIndexList.splice(i,1),e.text=e.text.substring(0,t-2)):e.text=e.text.substring(0,t-1),e.onInputChange({detail:{value:e.text}})}),uni.$on("event_clear_text",this.clearText)},mounted(){if(this.defaultText){let e=setTimeout(()=>{this.text=this.defaultText,this.text&&(this.micWidth=0,this.sendWidth=ya,this.showSend=!0),clearTimeout(e)},300)}this.$nextTick(()=>{ve("showAudioTip1")||setTimeout(()=>{this.showAudioTip()},300)})},unmounted(){uni.offKeyboardHeightChange(this.onKeyboardChange),uni.$off("event_add_emoji_text"),uni.$off("event_delete_text"),uni.$off("event_clear_text",this.clearText)}};function Hu(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=(0,r.resolveComponent)("msg-bar-audio"),c=A((0,r.resolveDynamicComponent)("uni-transition"),Ji),u=(0,r.resolveComponent)("MsgBarAudioLock"),d=(0,r.resolveComponent)("msg-bar-action"),h=A((0,r.resolveDynamicComponent)("action-sheet"),Xt),f=A((0,r.resolveDynamicComponent)("uni-icons"),ae),g=A((0,r.resolveDynamicComponent)("custom-popover"),pn),I=(0,r.resolveComponent)("m-text");return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"msg-bar",style:(0,r.normalizeStyle)({width:`${n.width}px`}),renderWhole:!0},[(0,r.renderSlot)(e.$slots,"default"),n.audioShow?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[i.hideBarAction?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"msg-bar-view",style:(0,r.normalizeStyle)({background:a.viewBarBg})},[i.userInfo.is_black?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createElementVNode)("view",{style:{padding:"0 12rpx"}},[n.text?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"center-align view-camera",style:(0,r.normalizeStyle)(a.viewCameraStyle)},[i.onlyVoice?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createBlock)(o,{key:0,needStyle:1,onClick:a.clickBarCamera,src:"/static/send-msg-picture2.png",w:"52rpx",h:"52rpx"},null,8,["onClick"]))],4))]),i.onlyVoice?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"msg-bar-middle",style:(0,r.normalizeStyle)(a.viewBarMiddleStyle)},null,4)):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"msg-bar-middle",style:(0,r.normalizeStyle)(a.viewBarMiddleStyle)},[(0,r.createElementVNode)("u-textarea",{ref:"input",modelValue:n.text,onInput:[t[0]||(t[0]=S=>n.text=S.detail.value),t[3]||(t[3]=(...S)=>a.onInputChange&&a.onInputChange(...S))],adjustPosition:n.inputAdjustPosition,cursorSpacing:n.cursorSpacing,autoHeight:!0,maxlength:-1,showConfirmBar:!1,disableDefaultPadding:!0,onFocus:t[1]||(t[1]=(...S)=>a.onInputFocus&&a.onInputFocus(...S)),onBlur:t[2]||(t[2]=(...S)=>a.onInputBlur&&a.onInputBlur(...S)),onKeyboardheightchange:t[4]||(t[4]=(...S)=>a.onKeyboardHeightChanged&&a.onKeyboardHeightChanged(...S)),onLinechange:t[5]||(t[5]=(...S)=>a.onLineChange&&a.onLineChange(...S)),style:(0,r.normalizeStyle)([{color:this.inputColor},{"max-height":"130px"}]),placeholderStyle:n.placeholderStyle,placeholder:a.$str("message")+"...",class:"input-bar"},null,44,["modelValue","adjustPosition","cursorSpacing","placeholderStyle","placeholder"]),(0,r.createElementVNode)("view",{class:"expression"},[n.showExpression?((0,r.openBlock)(),(0,r.createBlock)(o,{key:0,onClick:a.clickExpression,needStyle:1,src:"/static/bar-add-expression.png",w:"52rpx",h:"52rpx"},null,8,["onClick","src"])):((0,r.openBlock)(),(0,r.createBlock)(o,{key:1,onClick:a.clickKeyboard,needStyle:1,src:"/static/bar-add-keyword.png",w:"52rpx",h:"52rpx"},null,8,["onClick","src"]))])],4)),i.onlyVoice?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:2,style:(0,r.normalizeStyle)({width:`${n.sendWidth}px`})},[n.isAndroid||n.showSend?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,onClick:t[6]||(t[6]=(...S)=>a.clickSend&&a.clickSend(...S)),class:"img-send"},[(0,r.createVNode)(o,{onClick:a.clickSend,src:"/static/send-audio.png",w:"56rpx",h:"56rpx",fade:!1},null,8,["onClick","src"])])):(0,r.createCommentVNode)("",!0)],4)),(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)({width:`${n.micWidth}px`})},[(0,r.createElementVNode)("view",{class:"center"},[i.onlyVoice?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"center img"},[(0,r.createElementVNode)("view",{style:{width:"52rpx"}})])):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,style:(0,r.normalizeStyle)([{opacity:i.chatIsReply?1:.4},{"margin-left":"14rpx"}]),class:"center img"},[(0,r.createVNode)(o,{ref:"audio",onClick:a.onAudioTouch,needStyle:1,src:"/static/send-msg-audio2.png",w:"52rpx",h:"52rpx"},null,8,["onClick","src"])],4))])],4)],64)),i.userInfo.is_black?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,onClick:t[8]||(t[8]=(...S)=>a.clickStop&&a.clickStop(...S)),class:"view-black",style:(0,r.normalizeStyle)({width:`${n.width}px`,height:`${n.blackViewH}px`})},[(0,r.createElementVNode)("view",{class:"center-align",style:{height:"110rpx"}},[(0,r.createElementVNode)("u-text",{onClick:t[7]||(t[7]=(...S)=>a.clickUnblock&&a.clickUnblock(...S)),class:"unblock-text",style:(0,r.normalizeStyle)({color:n.colorAction})},(0,r.toDisplayString)(a.$str("unblock")),5)])],4)):(0,r.createCommentVNode)("",!0)],4)),(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)({height:n.safeBottom+"px",background:a.viewBarBg})},null,4)],64)),(0,r.createVNode)(c,{show:n.audioShow,duration:0,"mode-class":"slide-right",onChange:a.onBarAudioAnimChange},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(l,{ref:"barAudio",onlyVoice:i.onlyVoice,onOnAudioCancel:a.onBarAudioCancel,onOnAudioFinish:a.onBarAudioFinish,onOnBarAudioLockStop:a.onBarAudioLockStop},null,8,["onlyVoice","onOnAudioCancel","onOnAudioFinish","onOnBarAudioLockStop"])]),_:1},8,["show","onChange"]),(0,r.createVNode)(c,{style:(0,r.normalizeStyle)([{bottom:`${n.audioLockBottom}px`},{position:"fixed",right:"20rpx"}]),show:n.audioLockShow,"mode-class":"slide-bottom",duration:300},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(u,{ref:"audioLock",onOnBarAudioLock:a.onBarAudioLock,onOnBarAudioLockStop:a.onBarAudioLockStop},null,8,["onOnBarAudioLock","onOnBarAudioLockStop"])]),_:1},8,["style","show"]),(0,r.createVNode)(d,{ref:"msgBarAction","is-reception":i.isReception,onOnChooseExpressImg:a.onChooseExpressImg,onOnOpen:a.onActionOpen},null,8,["is-reception","onOnChooseExpressImg","onOnOpen"]),(0,r.createVNode)(h,{ref:"popAlbum",onOnClickActionItem:e.onClickActionItem,"show-warn-media":!0,actions:e.moreActions},null,8,["onOnClickActionItem","actions"]),(0,r.createVNode)(h,{ref:"popCamera",onOnClickActionItem:e.onClickActionItem,"show-warn-media":!0,actions:e.cameraActions},null,8,["onOnClickActionItem","actions"]),(0,r.createVNode)(g,{ref:"audioTipPop",size:n.audioTipSize,"bg-color":"#000000","min-margin":"10","triangle-is-top":!1,onOnClickOther:a.onClickOther},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"center audio-tip"},[(0,r.createElementVNode)("u-text",{class:"tip"},(0,r.toDisplayString)(a.$str("msg.ClickToStartRecording")),1),(0,r.createVNode)(f,{onClick:a.clickAudioTipClose,type:"clear",color:"#FFFFFF",size:"34rpx"},null,8,["onClick"])])]),_:1},8,["size","onOnClickOther"]),i.muteMaskType>0?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,onClick:S=>!1,style:(0,r.normalizeStyle)({width:`${n.width}px`,height:`${a.viewMuteMaskHeight}px`,background:a.viewBarBg}),class:"mute-mask"},[(0,r.createElementVNode)("view",{class:"center-align",style:(0,r.normalizeStyle)({height:`${a.viewMuteMaskHeight-n.safeBottom}px`})},[(0,r.createVNode)(o,{needStyle:1,src:"f/msg/msg_muted.png",w:"42rpx",h:"40rpx",style:{"margin-right":"10rpx"}}),(0,r.createVNode)(I,{type:"desc",text:a.muteMaskText,style:{"font-size":"32rpx"}},null,8,["text"])],4)],4)):(0,r.createCommentVNode)("",!0)],4)}var Vu=v(Wu,[["render",Hu],["styles",[Bu]]]),ju={emits:["onEvent"],props:{src:{type:String,default:""},autoPlay:{type:Boolean,default:!1},loops:{type:Number,default:0},repeatMode:{type:Number,default:1},frame:{type:Number,default:0},progress:{type:Number,default:0},speed:{type:Number,default:1},eventStep:{type:Boolean,default:!1}},data(){return{refView:null}},computed:{params(){return{src:Ge(rt(this.src),!1),autoPlay:this.autoPlay,loops:this.loops,repeatMode:this.repeatMode,initFrame:this.frame,progress:this.progress,speed:this.speed,eventStep:this.eventStep}}},methods:{event(e){_(e)||typeof e.detail=="undefined"||this.$emit("onEvent",e.detail)},play(){this.$refs.lottie&&this.$refs.lottie.play()},pause(){this.$refs.lottie&&this.$refs.lottie.pause()},resume(){this.$refs.lottie&&this.$refs.lottie.resume()},stop(){this.$refs.lottie&&this.$refs.lottie.stop()},setFrame(e){this.$refs.lottie&&this.$refs.lottie.setFrame(e)},setProgress(e){this.$refs.lottie&&this.$refs.lottie.setProgress(e)},setSpeed(e){this.$refs.lottie&&this.$refs.lottie.setSpeed(e)},setEventStep(e){this.$refs.lottie&&this.$refs.lottie.setEventStep(e)}},created(){}};function Gu(e,t,i,s,n,a){let o=(0,r.resolveComponent)("nav-anim-lottie");return(0,r.openBlock)(),(0,r.createBlock)(o,{ref:"lottie",params:a.params,onEvent:a.event},null,8,["params","onEvent"])}var zu=v(ju,[["render",Gu]]),$u={"view-scroll":{"":{flexDirection:"row",height:"84rpx",alignItems:"center"}},"place-item":{"":{width:"20rpx",height:"2rpx"}},"call-item":{"":{alignItems:"center",flexDirection:"row",marginRight:"16rpx",borderRadius:"8rpx",paddingTop:0,paddingRight:"16rpx",paddingBottom:0,paddingLeft:"16rpx",height:"68rpx",backgroundColor:"#FFFFFF"}},"text-title":{"":{color:"#333333",fontSize:"30rpx",marginLeft:"8rpx"}},btn:{"":{flexDirection:"row",alignItems:"center",paddingTop:0,paddingRight:"16rpx",paddingBottom:0,paddingLeft:"16rpx",borderRadius:"12rpx"}},"calling-btn":{"":{backgroundColor:"#FF453A"}},"calling-text":{".calling-btn ":{marginLeft:"8rpx",fontSize:"28rpx",lineHeight:"32rpx",color:"#FFFFFF"}}},Yu={components:{Lottie:zu,MText:it,MView:ii},emits:["clickGift","clickGiftAsk","clickCallVideo","clickAddFriends"],props:{showCallAudio:{type:[Boolean,Number],default:!1},showCallVideo:{type:[Boolean,Number],default:!0},userInfo:{type:Object,default(){return{}}},showCooperation:{type:[Boolean,Number],default:!1},showFeedback:{type:Boolean,default:!1},showUser:{type:Boolean,default:!0},callInfo:{type:Object,default(){return null}},isReception:{type:Boolean,default:!1},addFriendsType:{type:[Number,String],default:0},showGift:{type:Boolean,default:!0},ADD_FRIENDS_TYPE:{type:Object,default(){return{}}}},data(){return{sW:getApp().globalData.window.width,styleObj:{},iconColorW:this.isReception?"_w":"",curChatId:0}},methods:{$str:p,clickGift(){this.checkCanContact()||this.$emit("clickGift")},clickCallVideo(){this.$emit("clickCallVideo")},clickCallAudio(){},clickAddFriends(){this.$emit("clickAddFriends")},checkCanContact(){return!!(si()||qi(this.userInfo))}},created(){this.styleObj={background:"rgba(255,255,255,0.9)",color:"#333"}}};function Ju(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R);return(0,r.openBlock)(),(0,r.createElementBlock)("scroll-view",{scrollX:!0,class:"view-scroll",showScrollbar:!1,style:(0,r.normalizeStyle)({width:`${n.sW}px`}),renderWhole:!0},[(0,r.createElementVNode)("view",{class:"place-item"}),i.addFriendsType!=i.ADD_FRIENDS_TYPE.APPLY_SUCCESS?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...l)=>a.clickAddFriends&&a.clickAddFriends(...l)),style:(0,r.normalizeStyle)([{"flex-direction":"row","margin-right":"20rpx","border-radius":"8rpx",width:"222rpx",height:"56rpx","justify-content":"center"},n.styleObj.background?{background:n.styleObj.background}:{}])},[(0,r.createElementVNode)("view",{class:"btn"},[i.addFriendsType==i.ADD_FRIENDS_TYPE.APPLYING?((0,r.openBlock)(),(0,r.createBlock)(o,{key:0,src:"/static/add-friends-applying.png",w:"40rpx",h:"40rpx"})):((0,r.openBlock)(),(0,r.createBlock)(o,{key:1,src:"/static/add-friends.png",w:"40rpx",h:"40rpx"})),(0,r.createElementVNode)("u-text",{style:(0,r.normalizeStyle)([{"font-size":"30rpx","margin-left":"8rpx"},n.styleObj.color?{color:n.styleObj.color}:{}])},(0,r.toDisplayString)(i.addFriendsType==i.ADD_FRIENDS_TYPE.APPLYING?a.$str("applying"):a.$str("addFriends")),5)])],4)):(0,r.createCommentVNode)("",!0),i.showGift?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,onClick:t[1]||(t[1]=(...l)=>a.clickGift&&a.clickGift(...l)),style:(0,r.normalizeStyle)([{"flex-direction":"row","margin-right":"20rpx","border-radius":"8rpx",width:"222rpx",height:"56rpx","justify-content":"center"},n.styleObj.background?{background:n.styleObj.background}:{}])},[(0,r.createElementVNode)("view",{class:"btn"},[(0,r.createVNode)(o,{src:"/static/send-gift.png",w:"40rpx",h:"40rpx"}),(0,r.createElementVNode)("u-text",{style:(0,r.normalizeStyle)([{"font-size":"30rpx","margin-left":"8rpx"},n.styleObj.color?{color:n.styleObj.color}:{}])},(0,r.toDisplayString)(a.$str("sendGift")),5)])],4)):(0,r.createCommentVNode)("",!0),i.showCallVideo?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:2,onClick:t[2]||(t[2]=(...l)=>a.clickCallVideo&&a.clickCallVideo(...l)),style:(0,r.normalizeStyle)([{"flex-direction":"row","margin-right":"20rpx","border-radius":"8rpx",width:"222rpx",height:"56rpx","justify-content":"center"},n.styleObj.background?{background:n.styleObj.background}:{}])},[(0,r.createElementVNode)("view",{class:"btn"},[(0,r.createVNode)(o,{src:"/static/send-video.png",w:"30rpx",h:"30rpx"}),(0,r.createElementVNode)("u-text",{style:(0,r.normalizeStyle)([{"font-size":"30rpx","margin-left":"8rpx"},n.styleObj.color?{color:n.styleObj.color}:{}])},(0,r.toDisplayString)(a.$str("videoChat")),5)])],4)):(0,r.createCommentVNode)("",!0)],4)}var Ku=v(Yu,[["render",Ju],["styles",[$u]]]),qu={center:{"":{flexDirection:"row",alignItems:"center"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"view-reply":{"":{height:"88rpx"}},"left-line":{"":{width:"4rpx",height:"88rpx"}},"view-content":{"":{flex:1,paddingTop:"8rpx",paddingRight:0,paddingBottom:"8rpx",paddingLeft:"24rpx"}},"view-img":{"":{width:"72rpx",height:"72rpx",position:"relative"}}},Xu={emits:["onClickMsgBarReplyClose"],components:{LImg:R,UniIcons:ae,MText:it},props:{data:{type:Object,default(){return{}}},isReception:{type:Boolean,default:!1}},data(){return{nickname:"",content:"",imgInfo:""}},watch:{data:function(e,t){this.parseData(e)}},computed:{viewBg(){var e,t;if(this.isReception)return"#393939";let i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj,s=(i==null?void 0:i.style)==Ae.LIGHT?"bg2":"bg3";return i==null?void 0:i.color[s]},leftLineBg(){var e,t,i;return this.isReception||((i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.style)==Ae.LIGHT?"#0091FF":"#D7F2C9"},contentW(){let e=getApp().globalData.window.width,t=128;return this.imgInfo&&(t+=92),e-uni.upx2px(t)},imgRadius(){return this.data.msg_type==w.M_GIFT_ASK||this.data.msg_type==w.M_GIFT?"0":"8rpx"},closeColor(){var e,t,i;return this.isReception?"#535353":((i=(t=(e=getApp())==null?void 0:e.globalData)==null?void 0:t.themeObj)==null?void 0:i.style)==Ae.LIGHT?"#C5C5C5":"#8E8E8E"},nicknameColor(){return this.isReception?"#FFFFFF":""},contentColor(){return this.isReception?"rgba(255, 255, 255, 0.7)":""}},methods:{clickClose(){this.$emit("onClickMsgBarReplyClose")},parseData(e){e.chat_type==U.M_CHAT_ASS?e.chat_id==w.SYSTEM_ID&&e.send_uid!=getApp().globalData.uid?this.nickname=p("customerService"):e.chat_id!=w.SYSTEM_ID&&e.send_uid!=e.chat_id?this.nickname=p("customerService"):this.nickname=e.user.nickname:this.nickname=e.user.nickname,this.content=sn(e),this.imgInfo=an(e)}},created(){this.parseData(this.data)}};function Zu(e,t,i,s,n,a){let o=(0,r.resolveComponent)("m-text"),l=A((0,r.resolveDynamicComponent)("l-img"),R),c=A((0,r.resolveDynamicComponent)("uni-icons"),ae);return(0,r.openBlock)(),(0,r.createElementBlock)("view",{style:(0,r.normalizeStyle)({background:a.viewBg}),class:"view-reply center",renderWhole:!0},[(0,r.createElementVNode)("view",{class:"left-line",style:(0,r.normalizeStyle)({background:a.leftLineBg})},null,4),(0,r.createElementVNode)("view",{class:"view-content center-between"},[(0,r.createElementVNode)("view",null,[(0,r.createVNode)(o,{text:n.nickname,style:(0,r.normalizeStyle)([{"font-weight":"600","font-size":"24rpx","line-height":"34rpx"},a.nicknameColor?{color:a.nicknameColor}:{}])},null,8,["text","style"]),(0,r.createVNode)(o,{text:n.content,type:"tip",style:(0,r.normalizeStyle)([[{width:`${a.contentW}px`},a.contentColor?{color:a.contentColor}:{}],{"font-size":"20rpx","margin-top":"10rpx","line-break":"28rpx",lines:"1",overflow:"hidden","text-overflow":"ellipsis"}])},null,8,["text","style"])]),(0,r.createElementVNode)("view",{class:"center",style:(0,r.normalizeStyle)({marginLeft:n.imgInfo?"20rpx":0})},[n.imgInfo&&n.imgInfo.small_url?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"view-img center-align"},[(0,r.createVNode)(l,{src:n.imgInfo.small_url,w:"72rpx",h:"72rpx",radius:a.imgRadius},null,8,["src","radius"]),n.imgInfo.media_type==2?((0,r.openBlock)(),(0,r.createBlock)(l,{key:0,src:"s/pub/play_video.png",w:"24rpx",h:"24rpx",style:{position:"absolute"}})):(0,r.createCommentVNode)("",!0)])):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(c,{onClick:a.clickClose,type:"clear",color:a.closeColor,size:"36rpx",style:{padding:"24rpx"}},null,8,["onClick","color"])],4)])],4)}var Qu=v(Xu,[["render",Zu],["styles",[qu]]]),ed={"view-content":{"":{flexDirection:"row",alignItems:"center"}},"op-item":{"":{height:"72rpx",width:"146rpx",textAlign:"center",lineHeight:"72rpx",fontSize:"28rpx"}},"op-text":{"":{height:"72rpx",width:"146rpx",textAlign:"center",lineHeight:"72rpx",fontSize:"28rpx",color:"#FFFFFF"}}},td={emits:["onMsgItemPopDel","onMsgItemPopReply"],data(){return{size:{},msgData:{},msgListType:0,msgIndex:0,contentList:[],fromAdmin:!1,fromKefu:!1}},computed:{viewBg(){var e;let t=(e=getApp().globalData)==null?void 0:e.themeObj;return(t==null?void 0:t.style)==Ae.LIGHT?"#444444":"#555555"}},methods:{clickItem(e){switch(e){case"delete":this.$emit("onMsgItemPopDel",{msgData:this.msgData,listType:this.msgListType,index:this.msgIndex});break;case"report":ne("/pagesPub/my/report",{type:1,targetId:this.msgData.send_uid});break;case"copy":let t=this.msgData.content.content;if(this.msgData.content.text){t=this.msgData.content.text;for(let i=0,s=this.msgData.content.info.length;i<s;i++)t=t.replace("[x]",this.msgData.content.info[i].text)}cs(t);break;case"reply":this.$emit("onMsgItemPopReply",{msgData:this.msgData,listType:this.msgListType,index:this.msgIndex});break}},parseContentList(){this.contentList=[];let e=[U.M_CHAT_NOTICE,U.M_CHAT_NOTIFY,U.M_CHAT_CLUB_NOTICE].indexOf(Number(this.msgData.chat_type))!=-1;!this.msgData.isSend&&this.msgData.msg_type!=w.M_GIFT&&!e&&this.contentList.push({key:"report",title:p("report")}),this.msgData.msg_type==w.M_TEXT&&this.contentList.unshift({key:"copy",title:p("copy")})},open(e,t=!1,i=!1){this.size=e.size,this.msgData=e.data,this.msgListType=e.listType,this.msgIndex=e.index,this.fromAdmin=t,this.fromKefu=i,this.parseContentList(),!(this.contentList.length<=0)&&this.$refs.refPop.open()}}};function id(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("custom-popover"),pn);return(0,r.openBlock)(),(0,r.createBlock)(o,{ref:"refPop",size:n.size,bgColor:a.viewBg,"triangle-is-top":!1},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"view-content"},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n.contentList,(l,c)=>((0,r.openBlock)(),(0,r.createElementBlock)("u-text",{key:"op_"+c,onClick:u=>a.clickItem(l.key),class:"op-text"},(0,r.toDisplayString)(l.title),9,["onClick"]))),128))])]),_:1},8,["size","bgColor"])}var nd=v(td,[["render",id],["styles",[ed]]]),sd={"msg-tip-notice":{"":{paddingTop:"12rpx",paddingRight:"20rpx",paddingBottom:"12rpx",paddingLeft:"20rpx",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"16rpx",marginTop:0,marginRight:"20rpx",marginBottom:0,marginLeft:"20rpx"}},"c-f":{"":{color:"rgba(255,255,255,0.8)"}},"f-10":{"":{fontSize:"20rpx"}},"m-t-10":{"":{marginTop:"20rpx"}}},ad={methods:{$str:p},data(){return{nodes:[{name:"div",attrs:{style:"text-align:center;line-height: 30rpx;color: rgba(255,255,255,0.8)"},children:[{type:"text",text:p("msg.tipNotice"),attrs:{style:"font-weight:400;margin-top:100rpx;"}},{type:"text",text:"&nbsp;"},{type:"text",text:p("msg.tipNotice2"),attrs:{style:"font-weight:bold;"}},{type:"text",text:p("msg.tipNotice3"),attrs:{style:"font-weight:400;"}}]}]}}};function rd(e,t,i,s,n,a){let o=(0,r.resolveComponent)("rich-text");return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"msg-tip-notice",renderWhole:!0},[(0,r.createVNode)(o,{nodes:n.nodes,style:(0,r.normalizeStyle)([{fontSize:"20rpx"},{background:"transparent"}])},null,8,["nodes"]),(0,r.createElementVNode)("u-text",{class:"c-f f-10 m-t-10"},(0,r.toDisplayString)(a.$str("msg.tipWarnNotice")),1)])}var od=v(ad,[["render",rd],["styles",[sd]]]),ld={"center-align":{"":{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},"user-info":{"":{marginTop:"20rpx",marginRight:"20rpx",marginBottom:"20rpx",marginLeft:"20rpx",borderRadius:"16rpx",backgroundColor:"rgba(255,255,255,0.1)",height:"220rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(255,255,255,0.2)"}},"m-lr-35":{"":{marginTop:0,marginRight:"70rpx",marginBottom:0,marginLeft:"70rpx"}},"column-center":{"":{alignItems:"center"}},center:{"":{display:"flex",flexDirection:"row",alignItems:"center"}},"f-12":{"":{fontSize:"24rpx"}},"c-f":{"":{color:"#FFFFFF"}},"f-w6":{"":{fontWeight:"600"}},"m-t-8":{"":{marginTop:"16rpx"}},ellipsis:{"":{lines:1,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}},cd={components:{AvatarImgVip:ln},props:{chatUserInfo:{type:Object,default(){return{}}},sendUserInfo:{type:Object,default(){return{}}}},data(){return{}},methods:{clickAvatar(e,t,i){e.stopPropagation(),uni.hideKeyboard(),t.status!=-1&&Oi(t,i)}}};function ud(e,t,i,s,n,a){var o,l,c,u,d,h,f,g,I;let S=A((0,r.resolveDynamicComponent)("avatar-deleted-img"),ti),T=(0,r.resolveComponent)("avatar-img-vip"),D=A((0,r.resolveDynamicComponent)("l-img"),R);return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"center-align user-info",renderWhole:!0},[i.chatUserInfo?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=L=>a.clickAvatar(L,i.chatUserInfo,!1)),class:"column-center"},[((o=i.chatUserInfo)==null?void 0:o.status)==-1?((0,r.openBlock)(),(0,r.createBlock)(S,{key:0,w:"76rpx",h:"76rpx",radius:"38rpx"})):(0,r.createCommentVNode)("",!0),(l=i.chatUserInfo)!=null&&l.avatar&&i.chatUserInfo.status!=-1?((0,r.openBlock)(),(0,r.createBlock)(T,{key:1,user:i.chatUserInfo,"is-show-vip":!0,w:"100rpx",h:"100rpx","place-w":"60rpx",radius:"10rpx"},null,8,["user"])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("view",{class:"center m-t-8"},[(0,r.createElementVNode)("u-text",{class:"f-12 c-f f-w6 ellipsis",style:{"margin-right":"8rpx","max-width":"160rpx"}},(0,r.toDisplayString)((c=i.chatUserInfo)==null?void 0:c.nickname),1),(u=i.chatUserInfo)!=null&&u.country_flag?((0,r.openBlock)(),(0,r.createBlock)(D,{key:0,src:(d=i.chatUserInfo)==null?void 0:d.country_flag,w:"40rpx",h:"26rpx"},null,8,["src"])):(0,r.createCommentVNode)("",!0)])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("view",{class:"m-lr-35"},[(0,r.createVNode)(D,{src:"/static/msg-detail-user.png",w:"102rpx",h:"50rpx",mode:"scaleToFill"})]),i.sendUserInfo?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,onClick:t[1]||(t[1]=L=>a.clickAvatar(L,i.sendUserInfo,!0)),class:"column-center"},[(h=i.sendUserInfo)!=null&&h.avatar?((0,r.openBlock)(),(0,r.createBlock)(T,{key:0,user:i.sendUserInfo,"is-show-vip":!0,w:"100rpx",h:"100rpx","place-w":"80rpx",radius:"10rpx"},null,8,["user"])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("view",{class:"center m-t-8"},[(0,r.createElementVNode)("u-text",{class:"f-12 c-f f-w6 ellipsis",style:{"margin-right":"8rpx","max-width":"160rpx"}},(0,r.toDisplayString)((f=i.sendUserInfo)==null?void 0:f.nickname),1),(g=i.sendUserInfo)!=null&&g.country_flag?((0,r.openBlock)(),(0,r.createBlock)(D,{key:0,src:(I=i.sendUserInfo)==null?void 0:I.country_flag,w:"40rpx",h:"26rpx"},null,8,["src"])):(0,r.createCommentVNode)("",!0)])])):(0,r.createCommentVNode)("",!0)])}var dd=v(cd,[["render",ud],["styles",[ld]]]),pd={"gift-contain":{"":{width:"280rpx",paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",alignItems:"center",justifyContent:"center",marginTop:"20rpx"}},"view-send":{"":{paddingLeft:"26rpx",backgroundColor:"#CAFBFF",borderRadius:"16rpx"}},"view-receive":{"":{paddingRight:"26rpx",backgroundColor:"#FFFFFF",borderRadius:"16rpx"}},"f-14":{"":{fontSize:"28rpx"}},"f-10":{"":{fontSize:"20rpx"}},"c-9":{"":{color:"#999999"}},"c-3":{"":{color:"#333333"}},"f-w5":{"":{fontWeight:"500"}},"m-t-6":{"":{marginTop:"12rpx"}},center:{"":{display:"flex",flexDirection:"row",alignItems:"center"}}},hd={components:{MLine:He,MsgUser:Ke},mixins:[_t],props:{data:{type:Object,default(){return{}}},index:{type:Number,default:-1},listType:{type:Number,default:1},readTime:{type:[String,Number],default:0},realUser:{type:Object,default(){return{}}}},data(){return{}},computed:{tipStr(){var e;let t=this.data.content;return(t==null?void 0:t.from_type)==Oe.GAME?p("msg.gameFromCenter"):(t==null?void 0:t.from_type)==Oe.CALL?this.data.isSend?(t==null?void 0:t.call_type)==CALL_TYPE.VIDEO?p("msg.giftSendInVideoChat"):p("msg.giftSendInAudioChat"):(t==null?void 0:t.call_type)==CALL_TYPE.VIDEO?p("msg.giftFromVideoCall"):p("msg.giftFromAudioCall"):this.data.isSend?p("msg.giftSendSignTips",{nickname:Ys((e=this.realUser)==null?void 0:e.sex),hour:6}):(this.isNeedSignGift=!0,p("msg.giftClickHereToReceive"))}},methods:{$str:p}};function fd(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=(0,r.resolveComponent)("msg-user");return(0,r.openBlock)(),(0,r.createBlock)(l,{ref:"msgUser",data:i.data,"chat-type":i.data.chat_type,user:i.data.user,"is-send":i.data.isSend,index:i.index,"list-type":i.listType,"read-time":i.readTime},{default:(0,r.withCtx)(()=>{var c,u,d,h,f,g;return[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)(["gift-contain",[i.data.isSend?"view-send":"view-receive"]])},[(0,r.createVNode)(o,{src:(u=(c=i.data)==null?void 0:c.content)==null?void 0:u.icon,w:"100rpx",h:"100rpx"},null,8,["src"]),(0,r.createElementVNode)("u-text",{class:"f-14 c-3 f-w5 m-t-6"},(0,r.toDisplayString)((h=(d=i.data)==null?void 0:d.content)==null?void 0:h.title),1),(0,r.createElementVNode)("view",{class:"center m-t-6"},[(0,r.createElementVNode)("u-text",{class:"f-10",style:{color:"rgba(51,51,51,0.7)"}},(0,r.toDisplayString)((g=(f=i.data)==null?void 0:f.content)==null?void 0:g.price),1),(0,r.createVNode)(o,{src:"/static/coins-b.png",w:"20rpx",h:"20rpx",style:{"margin-left":"8rpx"}})]),(0,r.createElementVNode)("view",{style:{width:"119px",height:"2rpx",background:"rgba(0,0,0,0.15)","margin-top":"30rpx"}}),(0,r.createElementVNode)("u-text",{class:"f-10 c-9 m-t-6",style:{"text-align":"center"}},(0,r.toDisplayString)(a.tipStr),1)],2)]}),_:1},8,["data","chat-type","user","is-send","index","list-type","read-time"])}var md=v(hd,[["render",fd],["styles",[pd]]]),gd={"gift-contain":{"":{width:"280rpx",paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",alignItems:"center",justifyContent:"center",marginTop:"20rpx"}},"view-send":{"":{paddingLeft:"26rpx",backgroundColor:"#CAFBFF",borderRadius:"16rpx"}},"view-receive":{"":{paddingRight:"26rpx",backgroundColor:"#FFFFFF",borderRadius:"16rpx"}},"f-14":{"":{fontSize:"28rpx"}},"f-10":{"":{fontSize:"20rpx"}},"c-9":{"":{color:"#999999"}},"c-3":{"":{color:"#333333"}},"f-w5":{"":{fontWeight:"500"}},"m-t-6":{"":{marginTop:"12rpx"}},center:{"":{display:"flex",flexDirection:"row",alignItems:"center"}}},_d={emits:["onClickSendAsk"],components:{MLine:He,MsgUser:Ke},mixins:[_t],props:{data:{type:Object,default(){return{}}},index:{type:Number,default:-1},listType:{type:Number,default:1},readTime:{type:[String,Number],default:0},realUser:{type:Object,default(){return{}}}},data(){return{}},computed:{},methods:{$str:p,clickSendGift(){this.data.content.from_ask=1,this.$emit("onClickSendAsk",this.data)}}};function yd(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=A((0,r.resolveDynamicComponent)("gradient-button"),da),c=(0,r.resolveComponent)("msg-user");return(0,r.openBlock)(),(0,r.createBlock)(c,{ref:"msgUser",data:i.data,"chat-type":i.data.chat_type,user:i.data.user,"is-send":i.data.isSend,index:i.index,"list-type":i.listType,"read-time":i.readTime},{default:(0,r.withCtx)(()=>{var u,d,h,f,g,I;return[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)(["gift-contain",[i.data.isSend?"view-send":"view-receive"]])},[(0,r.createVNode)(o,{src:(d=(u=i.data)==null?void 0:u.content)==null?void 0:d.icon,w:"100rpx",h:"100rpx"},null,8,["src"]),(0,r.createElementVNode)("u-text",{class:"f-14 c-3 f-w5 m-t-6"},(0,r.toDisplayString)((f=(h=i.data)==null?void 0:h.content)==null?void 0:f.title),1),(0,r.createElementVNode)("view",{class:"center m-t-6"},[(0,r.createElementVNode)("u-text",{class:"f-10",style:{color:"rgba(51,51,51,0.7)"}},(0,r.toDisplayString)((I=(g=i.data)==null?void 0:g.content)==null?void 0:I.price),1),(0,r.createVNode)(o,{src:"/static/coins-b.png",w:"20rpx",h:"20rpx",style:{"margin-left":"8rpx"}})]),(0,r.createElementVNode)("view",{style:{width:"119px",height:"2rpx",background:"rgba(0,0,0,0.15)","margin-top":"30rpx"}}),(0,r.createElementVNode)("u-text",{class:"f-10 c-9 m-t-6",style:{"text-align":"center"}},(0,r.toDisplayString)(a.$str("call.giftAskTip")),1),i.data.isSend?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...S)=>a.clickSendGift&&a.clickSendGift(...S)),class:"center"},[(0,r.createVNode)(l,{btnText:a.$str("send"),"btn-bg":"/static/pic/btn-bg_1.png","prefix-icon":"/static/pic/btn-icon_1.png","suffix-icon":"/static/pic/btn-icon_2.png",btnStyle:{width:"232rpx",height:"50rpx"},fz:"20rpx",fw:400,style:{"margin-top":"24rpx"}},null,8,["btnText"])]))],2)]}),_:1},8,["data","chat-type","user","is-send","index","list-type","read-time"])}var bd=v(_d,[["render",yd],["styles",[gd]]]),xd={"call-bg":{"":{paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",height:"80rpx",flexDirection:"row",alignItems:"center"}},"call-bg-send":{"":{borderTopLeftRadius:"8rpx",borderTopRightRadius:0,borderBottomRightRadius:"8rpx",borderBottomLeftRadius:"8rpx"}},"call-bg-receive":{"":{borderTopLeftRadius:0,borderTopRightRadius:"8rpx",borderBottomRightRadius:"8rpx",borderBottomLeftRadius:"8rpx"}}},wd={components:{MsgUser:Ke},props:{data:{type:Object,default(){return{}}},index:{type:Number,default:-1},realUser:{type:Object,default(){return null}},myUser:{type:Object,default(){return null}}},data(){return{CALL_TYPE:tn}},computed:{callIcon(){let e=this.data.content.call_type;if(this.data.content.call_status,this.data.isSend,e==tn.VIDEO)return"/static/msg-call-icon.png"},callStr(){let{target_user:e,content:t,send_uid:i}=this.data;return ta(t,e,i)},textColor(){return"#333333"},viewBg(){return this.data.isSend?"#CAFBFF":"#FFFFFF"}},methods:{$str:p}};function Sd(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=(0,r.resolveComponent)("msg-user");return(0,r.openBlock)(),(0,r.createBlock)(l,{ref:"msgUser",data:i.data,"chat-type":i.data.chat_type,user:i.data.user,"is-send":i.data.isSend,index:i.index,"real-user":i.realUser,"my-user":i.myUser},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"call-bg call-bg-send",style:(0,r.normalizeStyle)({background:a.viewBg})},[(0,r.createVNode)(o,{src:a.callIcon,w:"40rpx",h:"40rpx",style:(0,r.normalizeStyle)({opacity:i.data.content.call_status==0?.5:1})},null,8,["src","style"]),(0,r.createElementVNode)("view",{style:{"margin-left":"16rpx"}},[(0,r.createElementVNode)("u-text",{style:(0,r.normalizeStyle)([{"font-size":"32rpx",color:"#333333"},{opacity:i.data.content.call_status==0?.5:1}])},(0,r.toDisplayString)(a.callStr),5)])],4)]),_:1},8,["data","chat-type","user","is-send","index","real-user","my-user"])}var Cd=v(wd,[["render",Sd],["styles",[xd]]]),Ad={"center-align":{"":{alignItems:"center",justifyContent:"center",flexDirection:"row"}},"msg-list":{"":{flex:1}},"mask-view":{"":{position:"absolute",top:0}},"lottery-view":{"":{position:"absolute",right:"20rpx",bottom:"320rpx"}},"msg-def":{"":{opacity:1,transitionProperty:"opacity",transitionDuration:500,transitionTimingFunction:"ease-out"}},"reply-flashing":{"":{opacity:.2}},"title-text":{"":{fontSize:17,height:1,position:"absolute",bottom:0,opacity:0,lines:1,overflow:"hidden",textOverflow:"ellipsis"}},"background-img":{"":{position:"absolute",top:0,left:0,zIndex:-10}},"@TRANSITION":{"msg-def":{property:"opacity",duration:500,timingFunction:"ease-out"}}},Td={components:{MsgCall:Cd,MsgGiftAsk:bd,MsgGift:md,MsgTipNotice:od,MsgItemPop:nd,MsgBarReply:Qu,MsgBarScroll:Ku,MsgBar:Vu,MsgUserInfo:dd,MsgFirst:yu,MsgUnkonwn:pu,MsgNoticeSys:cu,MsgVideo:au,MsgNotice:tu,MsgPicture:Xc,MsgVoice:Jc,MsgText:Gc},mixins:[Mc,Ec,Fc]};function kd(e,t,i,s,n,a){let o=A((0,r.resolveDynamicComponent)("l-img"),R),l=A((0,r.resolveDynamicComponent)("uni-load-more"),Yi),c=(0,r.resolveComponent)("MsgText"),u=(0,r.resolveComponent)("MsgVoice"),d=(0,r.resolveComponent)("msg-picture"),h=(0,r.resolveComponent)("msg-gift"),f=(0,r.resolveComponent)("msg-call"),g=(0,r.resolveComponent)("msg-gift-ask"),I=(0,r.resolveComponent)("msg-notice"),S=(0,r.resolveComponent)("msg-video"),T=(0,r.resolveComponent)("msg-notice-sys"),D=(0,r.resolveComponent)("msg-first"),L=(0,r.resolveComponent)("msg-tip-notice"),H=(0,r.resolveComponent)("msg-user-info"),y=(0,r.resolveComponent)("msg-unkonwn"),N=(0,r.resolveComponent)("msg-bar-scroll"),xe=(0,r.resolveComponent)("msg-bar-reply"),Be=(0,r.resolveComponent)("msg-bar"),me=A((0,r.resolveDynamicComponent)("action-sheet"),Xt),we=(0,r.resolveComponent)("msg-item-pop"),Ee=A((0,r.resolveDynamicComponent)("gift-popup"),Fs);return(0,r.openBlock)(),(0,r.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,r.createElementVNode)("view",{class:"background-img"},[(0,r.createVNode)(o,{src:"/static/background-img.png",w:`${e.backgroundWidth}px`,h:`${e.backgroundHeight}px`},null,8,["w","h"])]),(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)([{height:`${e.viewHeight}px`},e.pageBg])},[(0,r.createElementVNode)("list",{onClick:t[1]||(t[1]=(...F)=>e.clickMsgList&&e.clickMsgList(...F)),ref:"msgList",renderReverse:!0,bounce:!1,showScrollbar:!1,loadmoreoffset:20,offsetAccuracy:10,onScroll:t[2]||(t[2]=(...F)=>e.onListScroll&&e.onListScroll(...F)),scrollable:e.scrollable,class:"msg-list"},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.list,(F,oe)=>((0,r.openBlock)(),(0,r.createElementBlock)("cell",{key:"key"+F.ctime,ref_for:!0,ref:"cell"+F.mtime,class:(0,r.normalizeClass)(["msg-def",[e.replyMsgMtime==F.mtime?"reply-flashing":""]]),keepScrollPosition:!0,style:{"padding-bottom":"28rpx"}},[oe==0?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0},[(0,r.createElementVNode)("view",{ref_for:!0,ref:"cellNew",style:(0,r.normalizeStyle)({width:`${e.sw}px`,height:`${e.itemHeightLast}px`})},null,4),e.msgHasMore?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0},[(0,r.createVNode)(l,{status:e.loadMore,contentText:e.loadContent},null,8,["status","contentText"])])):(0,r.createCommentVNode)("",!0)])):(0,r.createCommentVNode)("",!0),F.msg_type==1e3?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"center-align"},[(0,r.createElementVNode)("u-text",{style:{background:"rgba(255,255,255,0.1)",padding:"12rpx 20rpx","border-radius":"24rpx","font-size":"20rpx","text-align":"center",color:"#FFFFFF"}},(0,r.toDisplayString)(F.showTime),1)])):F.msg_type==1?((0,r.openBlock)(),(0,r.createBlock)(c,{key:2,ref_for:!0,ref:"msg"+F.ctime,data:F,index:oe,listType:2,appid:e.appid,"real-user":e.realUser,"my-user":e.realMyUser,onOnClickTextReplyContent:e.onClickTextReplyContent},null,8,["data","index","appid","real-user","my-user","onOnClickTextReplyContent"])):F.msg_type==2?((0,r.openBlock)(),(0,r.createBlock)(u,{key:3,ref_for:!0,ref:"msg"+F.ctime,data:F,index:oe,listType:2,appid:e.appid,"real-user":e.realUser,"my-user":e.realMyUser,onClickMsgVoice:e.clickMsgVoice,onOnMsgVoiceChange:e.onMsgVoiceChange},null,8,["data","index","appid","real-user","my-user","onClickMsgVoice","onOnMsgVoiceChange"])):F.msg_type==3?((0,r.openBlock)(),(0,r.createBlock)(d,{key:4,ref_for:!0,ref:"msg"+F.ctime,data:F,index:oe,listType:2,appid:e.appid,"real-user":e.realUser,onClickPicture:e.clickPicture,"my-user":e.realMyUser},null,8,["data","index","appid","real-user","onClickPicture","my-user"])):F.msg_type==5?((0,r.openBlock)(),(0,r.createBlock)(h,{key:5,ref_for:!0,ref:"msg"+F.ctime,data:F,index:oe,listType:2,appid:e.appid,"real-user":e.realUser,"my-user":e.realMyUser},null,8,["data","index","appid","real-user","my-user"])):F.msg_type==8?((0,r.openBlock)(),(0,r.createBlock)(f,{key:6,ref_for:!0,ref:"msg"+F.ctime,data:F,index:oe,listType:2,appid:e.appid,"real-user":e.realUser,"my-user":e.realMyUser},null,8,["data","index","appid","real-user","my-user"])):F.msg_type==21?((0,r.openBlock)(),(0,r.createBlock)(g,{key:7,ref_for:!0,ref:"msg"+F.ctime,data:F,index:oe,listType:2,appid:e.appid,"real-user":e.realUser,onOnClickSendAsk:e.onClickSendAsk,"my-user":e.realMyUser},null,8,["data","index","appid","real-user","onOnClickSendAsk","my-user"])):F.msg_type==6?((0,r.openBlock)(),(0,r.createBlock)(I,{key:8,data:F,index:oe,listType:2,"my-user":e.realMyUser,onClickAddFriends:e.clickAddFriends,onClickSendGift:e.clickBarGift,onClickCallVideo:t[0]||(t[0]=yt=>e.clickCall(1))},null,8,["data","index","my-user","onClickAddFriends","onClickSendGift"])):F.msg_type==4?((0,r.openBlock)(),(0,r.createBlock)(S,{key:9,ref_for:!0,ref:"msg"+F.ctime,data:F,index:oe,listType:2,appid:e.appid,"real-user":e.realUser,"my-user":e.realMyUser,onClickVideo:e.clickPicture},null,8,["data","index","appid","real-user","my-user","onClickVideo"])):F.msg_type==22?((0,r.openBlock)(),(0,r.createBlock)(T,{key:10,data:F,index:oe,listType:2},null,8,["data","index"])):F.msg_type==37?((0,r.openBlock)(),(0,r.createBlock)(D,{key:11,ref_for:!0,ref:"msgFirst",data:F,index:oe,width:e.sw,info:F.user,userCover:e.userCover,"hide-online":e.hideOnline},null,8,["data","index","width","info","userCover","hide-online"])):F.msg_type==1e4?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:12},[(0,r.createVNode)(L),(0,r.createVNode)(H,{"chat-user-info":e.realUser,"send-user-info":e.chatUserInfo},null,8,["chat-user-info","send-user-info"])],64)):((0,r.openBlock)(),(0,r.createBlock)(y,{key:13,data:F,listType:2,appid:e.appid},null,8,["data","appid"]))],2))),128)),(0,r.createElementVNode)("cell",{style:(0,r.normalizeStyle)({width:`${e.sw}px`,height:`${e.changeHBottom}px`})},null,4),(0,r.createElementVNode)("cell",{ref:"cellLast",keepScrollPosition:!0,renderReversePosition:!0,style:(0,r.normalizeStyle)([{width:`${e.sw}px`},{height:"2rpx"}])},null,4)],40,["scrollable"]),(0,r.createVNode)(Be,{ref:"msgBar",chatType:e.chatType,actionId:e.chatId,"chat-is-reply":e.chatIsReply,userInfo:e.user,onOnSend:e.onSend,defaultText:e.defaultMsgBarText,onOnChoosePicture:e.onChoosePicture,onOnInputLineChange:e.onInputLineChange,onOnRecordFinish:e.onRecordFinish,onOnActionOpen:e.onActionOpen,onOnInputFocus:e.onInputFocus,onOnInputBlur:e.onInputBlur,onOnPausedVoice:e.onPausedVoice},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{ref:"refBarSlot",style:(0,r.normalizeStyle)({height:`${e.barSlotHeight}px`})},[e.showBarScrollView?((0,r.openBlock)(),(0,r.createBlock)(N,{key:0,ADD_FRIENDS_TYPE:e.ADD_FRIENDS_TYPE,addFriendsType:e.addFriendsType,showGift:e.showGift,showCallVideo:e.showCall,comWords:e.barComWords,userInfo:e.user,onClickGift:e.clickBarGift,onClickAddFriends:e.clickAddFriends,onClickCallVideo:t[3]||(t[3]=F=>e.clickCall(1)),"show-user":!1},null,8,["ADD_FRIENDS_TYPE","addFriendsType","showGift","showCallVideo","comWords","userInfo","onClickGift","onClickAddFriends"])):(0,r.createCommentVNode)("",!0),e.replyMsgData?((0,r.openBlock)(),(0,r.createBlock)(xe,{key:1,data:e.replyMsgData,onOnClickMsgBarReplyClose:e.onClickMsgBarReplyClose},null,8,["data","onOnClickMsgBarReplyClose"])):(0,r.createCommentVNode)("",!0)],4)]),_:1},8,["chatType","actionId","chat-is-reply","userInfo","onOnSend","defaultText","onOnChoosePicture","onOnInputLineChange","onOnRecordFinish","onOnActionOpen","onOnInputFocus","onOnInputBlur","onOnPausedVoice"]),e.showMask?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"mask-view",style:(0,r.normalizeStyle)([{width:e.sw+"px",height:e.viewHeight-e.msgBarHeight-e.barSlotHeight+"px"},e.pageBg])},null,4)):(0,r.createCommentVNode)("",!0),e.showMask?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"background-img"},[(0,r.createVNode)(o,{src:"/static/background-img.png",w:`${e.backgroundWidth}px`,h:`${e.backgroundHeight}px`},null,8,["w","h"])])):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(me,{ref:"moreAction",textColor:"#0091FF",title:e.$str("more"),titleColor:"#999",actions:e.moreActions,onOnClickActionItem:e.onClickActionItem},null,8,["title","actions","onOnClickActionItem"]),(0,r.createVNode)(we,{ref:"msgItemPop",onOnMsgItemPopDel:e.onMsgItemPopDel,onOnMsgItemPopReply:e.onMsgItemPopReply},null,8,["onOnMsgItemPopDel","onOnMsgItemPopReply"]),(0,r.createVNode)(Ee,{ref:"giftSheet",fromType:e.giftFromType,onOnSendGift:e.onSendGift},null,8,["fromType","onOnSendGift"]),(0,r.createElementVNode)("u-text",{ref:"titleText",class:"title-text",style:(0,r.normalizeStyle)({maxWidth:`${e.titleMaxWidth}px`})},(0,r.toDisplayString)(e.navBarTitle),5)],4)])}var ci=v(Td,[["render",kd],["styles",[Ad]]]);var hn=plus.webview.currentWebview();if(hn){let e=parseInt(hn.id),t="pagesMsg/chat/index",i={};try{i=JSON.parse(hn.__query__)}catch(n){}ci.mpType="page";let s=Vue.createPageApp(ci,{$store:getApp({allowDefault:!0}).$store,__pageId:e,__pagePath:t,__pageQuery:i});s.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...ci.styles||[]])),s.mount("#root")}})();
/*!
  * @intlify/shared v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/message-resolver v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/runtime v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/message-compiler v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/core-base v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * vue-i18n v9.1.9
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
