"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var pt=Object.create;var te=Object.defineProperty,gt=Object.defineProperties,_t=Object.getOwnPropertyDescriptor,wt=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertyNames,Ie=Object.getOwnPropertySymbols,xt=Object.getPrototypeOf,Pe=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable;var Le=(e,t,i)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ie=(e,t)=>{for(var i in t||(t={}))Pe.call(t,i)&&Le(e,i,t[i]);if(Ie)for(var i of Ie(t))vt.call(t,i)&&Le(e,i,t[i]);return e},De=(e,t)=>gt(e,wt(t));var bt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ct=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of yt(t))!Pe.call(e,o)&&o!==i&&te(e,o,{get:()=>t[o],enumerable:!(n=_t(t,o))||n.enumerable});return e};var Me=(e,t,i)=>(i=e!=null?pt(xt(e)):{},Ct(t||!e||!e.__esModule?te(i,"default",{value:e,enumerable:!0}):i,e));var B=(e,t,i)=>new Promise((n,o)=>{var a=c=>{try{l(i.next(c))}catch(d){o(d)}},r=c=>{try{l(i.throw(c))}catch(d){o(d)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,r);l((i=i.apply(e,t)).next())});var ne=bt((no,Fe)=>{Fe.exports=Vue});var s=Me(ne());var oo=Me(ne());var x=(e,t)=>{let i=e.__vccOpts||e;for(let[n,o]of t)i[n]=o;return i},kt=e=>typeof e=="string";function W(e){return weex.requireModule(e)}function f(e,t,...i){uni.__log__?uni.__log__(e,t,...i):console[e].apply(console,[...i,t])}function F(e,t){return kt(e)?t:e}var At="dev",Be,Oe,Ee,Ve;Be="https://bts.267girl.com",Oe="https://pic3.candychat.link/",Ve="https://pic2.candychat.link/",Ee="1b28c2eac0672761";var g={wv:"1.0.0",ENV:At,apiHost:Be,isAndroid:plus.os.name=="Android",zT:2,ossPicPath:Oe,ossPath:Ve,key:Ee,PHOTO:1,VIDEO:2,appV:parseInt(plus.runtime.version.split(".").join("")),M_TXT:1,M_IMG:3,M_VIDEO:4,M_VOICE:2},w={ALBUM:1,CAMERA:2,VIDEO:3,MICROPHONE:4,ALBUM_AND_CAMERA:101},A={GRANTED:1,DENIED:0,DENIED_ALWAYS:-1};function St(e){switch(e){case w.ALBUM:case w.VIDEO:return Ot;case w.MICROPHONE:return Et;case w.CAMERA:return Vt}}function Y(e,t=!0,i=!0){return new Promise(n=>{let o=function(a){f("log","at common/permission.js:33","then",a),a==A.GRANTED?n(!0):(a==A.DENIED||a==A.DENIED_ALWAYS&&i&&Pt(e),n(!1))};if(g.isAndroid){let a=le(e);f("log","at common/permission.js:47","permissionList",a),Mt(a).then(o)}else St(e)(!0).then(o)})}function Tt(){let e=[],t=!0;if(g.isAndroid){let n=Rt();e.push({key:"camera",value:n.camera,permission:w.CAMERA}),e.push({key:"voice",value:n.voice,permission:w.MICROPHONE}),e.push({key:"album",value:n.storage,permission:w.ALBUM})}else e.push({key:"camera",value:Nt(),permission:w.CAMERA}),e.push({key:"voice",value:He(),permission:w.MICROPHONE}),e.push({key:"album",value:Ht(),permission:w.ALBUM});for(let n=0,o=e.length;n<o;n++)if(!e[n].value){t=!1;break}let i={};for(let n=0,o=e.length;n<o;n++){let a=e[n];i[a.key]=a.value?1:0}return[e,t]}function Ne(e){if(e==w.MICROPHONE)return g.isAndroid?Ft(e):He();if(e==w.ALBUM_AND_CAMERA){let i=Tt()[0];return i?i[1].value&&i[3].value:!0}return!0}function le(e){switch(e){case w.ALBUM:case w.VIDEO:return["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO"];case w.MICROPHONE:return["android.permission.RECORD_AUDIO"];case w.CAMERA:return["android.permission.CAMERA"]}}function It(e){if(_(e)){Dt();return}getApp().globalData.toolModule.permissionOpenActivity({permission:e})}function Lt(e){if(g.isAndroid){let t=le(e);It(t)}else Bt()}function Pt(e,t){let i,n="Session Chat";e==w.ALBUM&&(i=`Turn on the read and write permissions for ${n} in the application management to use the album function normally`),uni.showModal({title:"Tips",content:i,showCancel:!0,cancelText:"Cancel",confirmText:"To turn on",complete(o){o.confirm?(Lt(e),typeof t=="function"&&t(!0)):o.cancel&&typeof t=="function"&&t(!1)}})}function Dt(){var e=plus.android.importClass("android.content.Intent"),t=plus.android.importClass("android.provider.Settings"),i=plus.android.importClass("android.net.Uri"),n=plus.android.runtimeMainActivity(),o=new e;o.setAction(t.ACTION_APPLICATION_DETAILS_SETTINGS);var a=i.fromParts("package",n.getPackageName(),null);o.setData(a),n.startActivity(o)}function Mt(e){return new Promise(t=>{getApp().globalData.toolModule.permission({permission:e},i=>{t(i)})})}function Ft(e){let t=le(e);return getApp().globalData.toolModule.permissionStatus({permission:t})}function Rt(){return getApp().globalData.toolModule.checkPermission()}function Bt(){var e=plus.ios.import("UIApplication"),t=e.sharedApplication(),i=plus.ios.import("NSURL"),n=i.URLWithString("app-settings:");t.openURL(n),plus.ios.deleteObject(n),plus.ios.deleteObject(i),plus.ios.deleteObject(t)}function Ot(){return new Promise(e=>{let t=plus.ios.import("PHPhotoLibrary"),i=t.authorizationStatus();i==3||i==4?(plus.ios.deleteObject(t),e(A.GRANTED)):i==0?plus.ios.invoke("PHPhotoLibrary","requestAuthorization:",function(){plus.ios.deleteObject(t),e(A.DENIED)}):(plus.ios.deleteObject(t),e(A.DENIED_ALWAYS))})}function Et(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),n=i.authorizationStatusForMediaType("soun");n==3?(plus.ios.deleteObject(i),t(A.GRANTED)):n==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","soun",function(){if(e){let o=i.authorizationStatusForMediaType("soun");plus.ios.deleteObject(i),t(o==3?A.GRANTED:A.DENIED)}else plus.ios.deleteObject(i),t(A.DENIED)}):(plus.ios.deleteObject(i),t(A.DENIED_ALWAYS))})}function Vt(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),n=i.authorizationStatusForMediaType("vide");n==3?(plus.ios.deleteObject(i),t(A.GRANTED)):n==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","vide",function(){if(e){let o=i.authorizationStatusForMediaType("vide");plus.ios.deleteObject(i),t(o==3?A.GRANTED:A.DENIED)}else plus.ios.deleteObject(i),t(A.DENIED)}):(plus.ios.deleteObject(i),t(A.DENIED_ALWAYS))})}function He(){let e=plus.ios.importClass("AVCaptureDevice"),t=e.authorizationStatusForMediaType("soun");return plus.ios.deleteObject(e),t==3}function Nt(){let e=plus.ios.importClass("AVCaptureDevice"),t=e.authorizationStatusForMediaType("vide");return plus.ios.deleteObject(e),t==3}function Ht(){var e=!1,t=plus.ios.import("PHPhotoLibrary"),i=t.authorizationStatus();return(i==3||i==4)&&(e=!0),plus.ios.deleteObject(t),e}function Wt(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function G(e,t){let i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length==1?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t}function jt(e){return e=parseInt(e),e.toString().length==16?e=Math.round(e/1e3):e<1e10&&(e=e*1e3),e}function We(e,t=!0,i=!1){if(_(e))return"";e=jt(e);let n=new Date,o=new Date(e),a=n.getFullYear(),r=n.getMonth()+1,l=n.getDate(),c=o.getFullYear(),d=o.getMonth()+1,h=o.getDate(),u="",p=t?" "+G(o,"hh:mm"):"";if(a==c){let L=n.getTime()-e;if(r==d&&l==h)L<60*1e3&&!t?u="Just":u=`Today ${G(o,"hh:mm")}`;else{let D=new Date;D.setDate(D.getDate()-1);let V=new Date;if(V.setDate(V.getDate()-2),d==D.getMonth()+1&&h==D.getDate())u=`Yesterday ${p}`;else{var m=L/36e5;if(m<=7*24){let S=new Array(7),M=i?"Short":"";S[0]=`Sunday ${M}`,S[1]=`Monday ${M}`,S[2]=`Tuesday ${M}`,S[3]=`Wednesday ${M}`,S[4]=`Thursday ${M}`,S[5]=`Friday ${M}`,S[6]=`Saturday ${M}`;var y=S[o.getDay()];u=y+" "+p}else u=G(o,"M/d")+p}}}else u=G(o,"M/d")+p;return u}function zt(e){if(_(e))return"";let t=e.split("/");if(_(t))return"";let i=t[t.length-1];if(_(i))return"";let n=i.split(".");if(_(n))return"";let o=n[n.length-1];return _(o)?"":o.toLowerCase()}function ce(e,t,i=1e4){return e<=0||t<=0?[108,192]:(t>e?(t=t*108/e,t>i&&(t=i),e=108):(t=t*148/e,e=148),[e,t])}var oe={};function de(e,t=500,i="throttle"){let n=e.name;_(n)&&(n=i),!oe[n]&&(oe[n]=!0,e(),setTimeout(function(){oe[n]=""},t))}function ue(){return Math.random().toString(36).substr(2)}function he(e,t,i){return Math.abs(e-t)>i*60*1e3}function je(e){if(!e)return"";let t=JSON.stringify(e);return(typeof t!="string"||t=="{}")&&(t=e.toString()),t}function U(e,t=!1){if(_(e)||e<0||isNaN(e))return t?"00:00:00":"00:00";var i=0,n=0;e>0&&e<10?e="0"+parseInt(e):e<=0?e="00":e>60&&(i=parseInt(e/60)<10?"0"+parseInt(e/60):parseInt(e/60),e=parseInt(e%60)<10?"0"+parseInt(e%60):parseInt(e%60),i>60&&(n=parseInt(i/60)<10?"0"+parseInt(i/60):parseInt(i/60),i=parseInt(i%60)<10?"0"+parseInt(i%60):parseInt(i%60)));var o;return n>0?o=n+":"+i+":"+e:i>0?(o=i+":"+e,t&&(o="00:"+o)):(o="00:"+e,t&&(o="00:"+o)),o}function se(e,t=!0){return e.startsWith("http")?e:e.startsWith("file://")?t?e:e.replace("file://",""):e.startsWith("/storage/")||e.startsWith("/var/mobile/")?t?`file://${e}`:e:e.startsWith("_doc/uniapp")?t?e:plus.io.convertLocalFileSystemURL(e):e.indexOf("apps/__UNI")!=-1?e:!1}function Ut(e){function t(r,l,c){for(;0<c--;)r.push(l)}function i(r,l){return r<<l|r>>>32-l}function n(r,l,c){return r^l^c}function o(r,l){var c=(l&65535)+(r&65535),d=(l>>>16)+(r>>>16)+(c>>>16);return(d&65535)<<16|c&65535}var a="0123456789abcdef";return function(r){for(var l=[],c=r.length*4,d,h=0;h<c;h++)d=r[h>>2]>>(3-h%4)*8,l.push(a.charAt(d>>4&15)+a.charAt(d&15));return l.join("")}(function(r,l){var c,d,h,u,p,m=r.length,y=1732584193,P=4023233417,L=2562383102,D=271733878,V=3285377520,S=[];t(S,1518500249,20),t(S,1859775393,20),t(S,2400959708,20),t(S,3395469782,20),r[l>>5]|=128<<24-l%32,r[(l+65>>9<<4)+15]=l;for(var M=0;M<m;M+=16){c=y,d=P,h=L,u=D,p=V;for(var T=0,j=[];T<80;T++){j[T]=T<16?r[T+M]:i(j[T-3]^j[T-8]^j[T-14]^j[T-16],1);var mt=function(R,N,H,Ae,Se){var Te=(Se&65535)+(R&65535)+(N&65535)+(H&65535)+(Ae&65535),ft=(Se>>>16)+(R>>>16)+(N>>>16)+(H>>>16)+(Ae>>>16)+(Te>>>16);return(ft&65535)<<16|Te&65535}(T<20?function(R,N,H){return R&N^~R&H}(d,h,u):T<40?n(d,h,u):T<60?function(R,N,H){return R&N^R&H^N&H}(d,h,u):n(d,h,u),p,S[T],j[T],i(c,5));p=u,u=h,h=i(d,30),d=c,c=mt}y=o(y,c),P=o(P,d),L=o(L,h),D=o(D,u),V=o(V,p)}return[y,P,L,D,V]}(function(r){for(var l=[],c=255,d=r.length*8,h=0;h<d;h+=8)l[h>>5]|=(r.charCodeAt(h/8)&c)<<24-h%32;return l}(e).slice(),e.length*8))}function Jt(e,t=!1,i=null){let n=me(e,t);if(i)uni.getStorage({key:n,success:i});else return uni.getStorageSync(n)}function me(e,t){return t?`_a_${e}`:`m_${e}`}function Gt(e,t=!1){uni.removeStorage({key:me(e,t)})}function Yt(e,t,i=!1,n=null){let o=me(e,i);n?uni.setStorage({key:o,data:t,success:n}):uni.setStorageSync(o,t)}function Zt(e,t,i=!0){return Xt(getApp().globalData.ossPicPath,e,t,i)}function Xt(e,t,i,n=!0){if(_(t))return"";if(t.startsWith("http")||t.startsWith("file://"))return t;if(t.startsWith("/var/mobile/"))return"file://"+t;if(t.startsWith("/storage/"))return t;let a=`img_${Ut(t)}`,r=Jt(a);if(r){let c={filePath:r,fail(d){Kt(`\u7F13\u5B58\u68C0\u6D4B\u5931\u8D25${t}`,d),Gt(a),typeof i=="function"&&i(e+t)},success(d){}};return typeof i=="function"&&(c.success=function(){i(r)}),uni.getFileInfo(c),r}let l=e+t;return getApp().globalData.picCacheObj[a]||(getApp().globalData.picCacheObj[a]=1,typeof i=="function"&&!n&&i(l),qt(l).then(c=>{Yt(a,c),typeof i=="function"&&n&&i(c),delete getApp().globalData.picCacheObj[a]}).catch(()=>{})),l}function Kt(e,t){f("error","at common/cache.js:52",`cache ${e}`,t)}function ze(e){return _(e)?"":e.substr(0,5)==="_doc/"||e.substr(0,4)==="http"?e:getApp().globalData.ossPath+e}function Ue(e,t,i=1){de(function(){let n=JSON.parse(JSON.stringify(e));f("log","at comExtend/preview-media.js:11","console.log(list[index]);__f__('log','at comExtend/preview-media.js:11',list[index]);)))))))",n[t]),getApp().globalData.previewModule.openBrowser({info:n,index:t,show_report:i},o=>{f("info","at comExtend/preview-media.js:13","Preview.preview "+JSON.stringify(o))})},500,"previewImage")}function Je(e,t){let i=e.msg_type==g.M_VIDEO,n;if(i){let o=t.small_url||t.cover_url||t.cover,a=t.cover_url||t.cover,r=t.url;r.startsWith("_doc")&&(r=plus.io.convertLocalFileSystemURL(r)),n=Re(!0,o,r,a)}else{let o=t.small_url||t.image_url;n=Re(!1,o,t.image_url)}return n}function Re(e,t,i,n="1",o=0,a=0){let r,l=se(t,!1);if(l)r=l;else{let h;if(g.isAndroid?h=!1:h=!(g.appV>=220||g.ENV=="dev"),h){let u=Zt(t);r=u.startsWith("http")?u:plus.io.convertLocalFileSystemURL(u)}else r=g.ossPicPath+t}let c=se(i,!1)||`${getApp().globalData.ossPath}${i}`,d=e?se(n,!1)||`${getApp().globalData.ossPicPath}${n}`:n;return{isVideo:e,thumbnailUrl:r||"",url:c,coverUrl:d,width:o,height:a}}function fe(e,t,i){return new Promise(n=>{let o=e;o.startsWith("_doc")&&(o=plus.io.convertLocalFileSystemURL(o)),getApp().globalData.previewModule.getVideoCover({url:o,width:t,height:i},a=>{$t(`getVideoCover ${a}`),n(a)})})}function $t(e,t){f("error","at comExtend/preview-media.js:94",`preview media ${e}`,t)}function _(e){return e==null||e==""||typeof e=="undefined"}function Qt(e,t="none",i="center"){uni.showToast({title:e,duration:2e3,icon:t,position:i})}var Ge=new Promise(()=>{});function Ye(e,t=1){return new Promise((i,n)=>{let o=["album","camera"],a,r=["compressed"];e==1?(o=["album"],a=w.ALBUM):e==2?(o=["camera"],a=w.CAMERA):e==0&&(a=w.ALBUM_AND_CAMERA),f("log","at common/common.js:41","888888"),Y(a).then(l=>{if(!l){n(),f("error","at common/common.js:45","choose image permission fail");return}uni.chooseImage({count:t,sourceType:o,sizeType:r,crop:{},success:function(c){let d=[];for(let h=0,u=c.tempFilePaths.length;h<u;h++){let p=c.tempFilePaths[h],m=zt(p);["gif","heic"].indexOf(m)!=-1&&d.push(h)}if(d.length>0&&(c.tempFilePaths=c.tempFilePaths.filter((h,u)=>d.indexOf(u)==-1),c.tempFiles&&(c.tempFiles=c.tempFiles.filter((h,u)=>d.indexOf(u)!=-1))),e!=1)for(let h=0,u=c.tempFilePaths.length;h<u;h++)c.tempFilePaths[h]=plus.io.convertLocalFileSystemURL(c.tempFilePaths[h]);i(c)},fail:function(c){n(),f("error","at common/common.js:84","choose image error --->"+JSON.stringify(c))}})})})}function Ze(e,t,i=!1,n=15){return new Promise((o,a)=>{let r,l=["album","camera"],c;e==1?(l=["album"],c=w.VIDEO):e==2&&(l=["camera"],c=w.CAMERA),Y(c).then(d=>{if(!d){a(),f("error","at common/common.js:107","choose video permission fail");return}return uni.chooseVideo({sourceType:l,compressed:!1,maxDuration:n,camera:i?"front":"back"})}).then(d=>{if(f("error","at common/common.js:117","----> uni.chooseVideo "+JSON.stringify(d)),r=JSON.parse(JSON.stringify(d)),r&&r.duration&&parseInt(r.duration)>n){let h=setTimeout(()=>{clearTimeout(h),ei(`Video duration cannot exceed ${n} seconds`,3e3)},500);return a(null),Ge}return r.tempFilePath=r.tempFilePath.replace("file://",""),g.isAndroid&&ti(!0)<3617?ge(r.tempFilePath):new Promise(h=>{h(null)})}).then(d=>{if(d&&(d.orientation=="right"||d.orientation=="left")){f("error","at common/common.js:138","----> uni.chooseVideo videoInfo "+JSON.stringify(d));let h=r.height,u=r.width;r.width=h,r.height=u}return t?fe(r.tempFilePath,r.width,r.height):new Promise(h=>{h(null)})}).then(d=>(f("error","at common/common.js:152","----> uni.chooseVideo coverUrl "+d),r.coverPath=d,o(r))).catch(d=>{f("error","at common/common.js:156","-----> chooseVideo error "+JSON.stringify(d)),a()})})}function pe(e,t="md5"){return new Promise(i=>{uni.getFileInfo({filePath:e,digestAlgorithm:t,success(n){i(n)},fail(){i(null)}})})}function qt(e){return new Promise((t,i)=>{uni.downloadFile({url:e}).then(n=>!n||n.statusCode!=200||!n.tempFilePath?(i(),new Promise(()=>{})):uni.saveFile({tempFilePath:n.tempFilePath})).then(n=>{!n||!n.savedFilePath?i():t(n.savedFilePath)}).catch(n=>{f("error","at common/common.js:193","downloadFile error "+JSON.stringify(n))})})}function Xe(e){return g.ossPicPath+e}function ei(e,t){uni.showToast({title:e,duration:t,icon:"none",position:"center"})}function ti(e){let t=uni.getSystemInfoSync().uniRuntimeVersion;if(!e)return t;let i=t.split("."),n=i[i.length-1];n.length<=1&&(i[i.length-1]=n+"0");let o=i.join("");return Number(o)}function ge(e){return new Promise(t=>{plus.io.getVideoInfo({filePath:e,success(i){t(i)},fail(i){t(`getVideoInfo ${JSON.stringify(i)}`)}})})}function Ke(e,t){return new Promise((i,n)=>{uni.compressVideo({src:e,quality:t,success(o){f("log","at common/common.js:239","videoCompress res "+JSON.stringify(o)),i(o)},fail(o){f("log","at common/common.js:243","videoCompress error "+JSON.stringify(o)),n(`videoCompress ${JSON.stringify(o)}`)}})})}var ae=0;function ii(e){return oi(ni(si(e)))}function ni(e){return ri(li(ai(e),e.length*8))}function oi(e){try{}catch(a){ae=0}for(var t=ae?"0123456789ABCDEF":"0123456789abcdef",i="",n,o=0;o<e.length;o++)n=e.charCodeAt(o),i+=t.charAt(n>>>4&15)+t.charAt(n&15);return i}function si(e){for(var t="",i=-1,n,o;++i<e.length;)n=e.charCodeAt(i),o=i+1<e.length?e.charCodeAt(i+1):0,55296<=n&&n<=56319&&56320<=o&&o<=57343&&(n=65536+((n&1023)<<10)+(o&1023),i++),n<=127?t+=String.fromCharCode(n):n<=2047?t+=String.fromCharCode(192|n>>>6&31,128|n&63):n<=65535?t+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|n&63):n<=2097151&&(t+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|n&63));return t}function ai(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<e.length*8;i+=8)t[i>>5]|=(e.charCodeAt(i/8)&255)<<i%32;return t}function ri(e){for(var t="",i=0;i<e.length*32;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function li(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,n=-271733879,o=-1732584194,a=271733878,r=0;r<e.length;r+=16){var l=i,c=n,d=o,h=a;i=v(i,n,o,a,e[r+0],7,-680876936),a=v(a,i,n,o,e[r+1],12,-389564586),o=v(o,a,i,n,e[r+2],17,606105819),n=v(n,o,a,i,e[r+3],22,-1044525330),i=v(i,n,o,a,e[r+4],7,-176418897),a=v(a,i,n,o,e[r+5],12,1200080426),o=v(o,a,i,n,e[r+6],17,-1473231341),n=v(n,o,a,i,e[r+7],22,-45705983),i=v(i,n,o,a,e[r+8],7,1770035416),a=v(a,i,n,o,e[r+9],12,-1958414417),o=v(o,a,i,n,e[r+10],17,-42063),n=v(n,o,a,i,e[r+11],22,-1990404162),i=v(i,n,o,a,e[r+12],7,1804603682),a=v(a,i,n,o,e[r+13],12,-40341101),o=v(o,a,i,n,e[r+14],17,-1502002290),n=v(n,o,a,i,e[r+15],22,1236535329),i=b(i,n,o,a,e[r+1],5,-165796510),a=b(a,i,n,o,e[r+6],9,-1069501632),o=b(o,a,i,n,e[r+11],14,643717713),n=b(n,o,a,i,e[r+0],20,-373897302),i=b(i,n,o,a,e[r+5],5,-701558691),a=b(a,i,n,o,e[r+10],9,38016083),o=b(o,a,i,n,e[r+15],14,-660478335),n=b(n,o,a,i,e[r+4],20,-405537848),i=b(i,n,o,a,e[r+9],5,568446438),a=b(a,i,n,o,e[r+14],9,-1019803690),o=b(o,a,i,n,e[r+3],14,-187363961),n=b(n,o,a,i,e[r+8],20,1163531501),i=b(i,n,o,a,e[r+13],5,-1444681467),a=b(a,i,n,o,e[r+2],9,-51403784),o=b(o,a,i,n,e[r+7],14,1735328473),n=b(n,o,a,i,e[r+12],20,-1926607734),i=C(i,n,o,a,e[r+5],4,-378558),a=C(a,i,n,o,e[r+8],11,-2022574463),o=C(o,a,i,n,e[r+11],16,1839030562),n=C(n,o,a,i,e[r+14],23,-35309556),i=C(i,n,o,a,e[r+1],4,-1530992060),a=C(a,i,n,o,e[r+4],11,1272893353),o=C(o,a,i,n,e[r+7],16,-155497632),n=C(n,o,a,i,e[r+10],23,-1094730640),i=C(i,n,o,a,e[r+13],4,681279174),a=C(a,i,n,o,e[r+0],11,-358537222),o=C(o,a,i,n,e[r+3],16,-722521979),n=C(n,o,a,i,e[r+6],23,76029189),i=C(i,n,o,a,e[r+9],4,-640364487),a=C(a,i,n,o,e[r+12],11,-421815835),o=C(o,a,i,n,e[r+15],16,530742520),n=C(n,o,a,i,e[r+2],23,-995338651),i=k(i,n,o,a,e[r+0],6,-198630844),a=k(a,i,n,o,e[r+7],10,1126891415),o=k(o,a,i,n,e[r+14],15,-1416354905),n=k(n,o,a,i,e[r+5],21,-57434055),i=k(i,n,o,a,e[r+12],6,1700485571),a=k(a,i,n,o,e[r+3],10,-1894986606),o=k(o,a,i,n,e[r+10],15,-1051523),n=k(n,o,a,i,e[r+1],21,-2054922799),i=k(i,n,o,a,e[r+8],6,1873313359),a=k(a,i,n,o,e[r+15],10,-30611744),o=k(o,a,i,n,e[r+6],15,-1560198380),n=k(n,o,a,i,e[r+13],21,1309151649),i=k(i,n,o,a,e[r+4],6,-145523070),a=k(a,i,n,o,e[r+11],10,-1120210379),o=k(o,a,i,n,e[r+2],15,718787259),n=k(n,o,a,i,e[r+9],21,-343485551),i=O(i,l),n=O(n,c),o=O(o,d),a=O(a,h)}return Array(i,n,o,a)}function Z(e,t,i,n,o,a){return O(ci(O(O(t,e),O(n,a)),o),i)}function v(e,t,i,n,o,a,r){return Z(t&i|~t&n,e,t,o,a,r)}function b(e,t,i,n,o,a,r){return Z(t&n|i&~n,e,t,o,a,r)}function C(e,t,i,n,o,a,r){return Z(t^i^n,e,t,o,a,r)}function k(e,t,i,n,o,a,r){return Z(i^(t|~n),e,t,o,a,r)}function O(e,t){var i=(e&65535)+(t&65535),n=(e>>16)+(t>>16)+(i>>16);return n<<16|i&65535}function ci(e,t){return e<<t|e>>>32-t}var re={md5:function(e){return ii(e)}},E={request(e,t,i,n,o=!1){return new Promise((a,r)=>{let l=!1;l=getApp().globalData.token;let c={"content-type":"application/json",ua:getApp().globalData.ua};l&&(c.Authorization=`Bearer ${l}`);let d=getApp().globalData.apiHost;t.nonce=re.md5(ue()+new Date().getTime());let h=di(t);uni.request({url:d+e,method:"POST",header:c,data:h,dataType:"json",timeout:1e4,complete(p){return B(this,null,function*(){if(f("log","at common/api.js:28","response000000=======response=======",p),i&&uni.hideLoading(),f("log","at common/api.js:30",`request ${e} obj ${JSON.stringify(t)}`),p.statusCode==200){let m=p.data;if(_(m.msg)||Qt(m.msg),m.ok===99){yield getApp().createUser();let y=yield E.request(e,t,i,n,o);a(y);return}if(m.ok>0){a(m);return}n&&r(m)}else if(n)r(p);else return Ge})},fail(p){f("error","at common/api.js:54","api fail ",p)}})})}};function di(e){try{_(e)&&(e={}),e.times=new Date().getTime();let t=Object.keys(e).sort(),i={};for(let o=0,a=t.length;o<a;o++)i[t[o]]=e[t[o]];let n=$e(i).substr(1);return i.sign=re.md5(`${re.md5(n)}${g.key}`),i}catch(t){return e}}function $e(e,t){if(e==null)return"";try{let i="",n=typeof e;if(n=="string"||n=="number")i+="&"+t+"="+Wt(e);else if(n=="boolean")i+="&"+t+"="+(e?1:0);else for(let o in e){let a=t==null?o:t+ui(o);i+=$e(e[o],a)}return i}catch(i){return""}}function ui(e){return`${encodeURIComponent("[")}${e}${encodeURIComponent("]")}`}var hi=e=>e!==null&&typeof e=="object",mi=["{","}"],xe=class{constructor(){this._caches=Object.create(null)}interpolate(t,i,n=mi){if(!i)return[t];let o=this._caches[t];return o||(o=gi(t,n),this._caches[t]=o),_i(o,i)}},fi=/^(?:\d)+/,pi=/^(?:\w)+/;function gi(e,[t,i]){let n=[],o=0,a="";for(;o<e.length;){let r=e[o++];if(r===t){a&&n.push({type:"text",value:a}),a="";let l="";for(r=e[o++];r!==void 0&&r!==i;)l+=r,r=e[o++];let c=r===i,d=fi.test(l)?"list":c&&pi.test(l)?"named":"unknown";n.push({value:l,type:d})}else a+=r}return a&&n.push({type:"text",value:a}),n}function _i(e,t){let i=[],n=0,o=Array.isArray(t)?"list":hi(t)?"named":"unknown";if(o==="unknown")return i;for(;n<e.length;){let a=e[n];switch(a.type){case"text":i.push(a.value);break;case"list":i.push(t[parseInt(a.value,10)]);break;case"named":o==="named"&&i.push(t[a.value]);break}n++}return i}var _e="zh-Hans",Qe="zh-Hant",z="en",wi="fr",yi="es",xi=Object.prototype.hasOwnProperty,qe=(e,t)=>xi.call(e,t),vi=new xe;function bi(e,t){return!!t.find(i=>e.indexOf(i)!==-1)}function Ci(e,t){return t.find(i=>e.indexOf(i)===0)}function et(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if(e=e.toLowerCase(),e==="chinese")return _e;if(e.indexOf("zh")===0)return e.indexOf("-hans")>-1?_e:e.indexOf("-hant")>-1||bi(e,["-tw","-hk","-mo","-cht"])?Qe:_e;let i=[z,wi,yi];t&&Object.keys(t).length>0&&(i=Object.keys(t));let n=Ci(e,i);if(n)return n}var ve=class{constructor({locale:t,fallbackLocale:i,messages:n,watcher:o,formater:a}){this.locale=z,this.fallbackLocale=z,this.message={},this.messages={},this.watchers=[],i&&(this.fallbackLocale=i),this.formater=a||vi,this.messages=n||{},this.setLocale(t||z),o&&this.watchLocale(o)}setLocale(t){let i=this.locale;this.locale=et(t,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],i!==this.locale&&this.watchers.forEach(n=>{n(this.locale,i)})}getLocale(){return this.locale}watchLocale(t){let i=this.watchers.push(t)-1;return()=>{this.watchers.splice(i,1)}}add(t,i,n=!0){let o=this.messages[t];o?n?Object.assign(o,i):Object.keys(i).forEach(a=>{qe(o,a)||(o[a]=i[a])}):this.messages[t]=i}f(t,i,n){return this.formater.interpolate(t,i,n).join("")}t(t,i,n){let o=this.message;return typeof i=="string"?(i=et(i,this.messages),i&&(o=this.messages[i])):n=i,qe(o,t)?this.formater.interpolate(o[t],n).join(""):(console.warn(`Cannot translate the value of keypath ${t}. Use the value of keypath as default.`),t)}};function ki(e,t){e.$watchLocale?e.$watchLocale(i=>{t.setLocale(i)}):e.$watch(()=>e.$locale,i=>{t.setLocale(i)})}function Ai(){return typeof uni!="undefined"&&uni.getLocale?uni.getLocale():typeof global!="undefined"&&global.getLocale?global.getLocale():z}function Si(e,t={},i,n){typeof e!="string"&&([e,t]=[t,e]),typeof e!="string"&&(e=Ai()),typeof i!="string"&&(i=typeof __uniConfig!="undefined"&&__uniConfig.fallbackLocale||z);let o=new ve({locale:e,fallbackLocale:i,messages:t,watcher:n}),a=(r,l)=>{if(typeof getApp!="function")a=function(c,d){return o.t(c,d)};else{let c=!1;a=function(d,h){let u=getApp().$vm;return u&&(u.$locale,c||(c=!0,ki(u,o))),o.t(d,h)}}return a(r,l)};return{i18n:o,f(r,l,c){return o.f(r,l,c)},t(r,l){return a(r,l)},add(r,l,c=!0){return o.add(r,l,c)},watch(r){return o.watchLocale(r)},getLocale(){return o.getLocale()},setLocale(r){return o.setLocale(r)}}}var Ti={"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},Ii={"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"Loading...","uni-load-more.contentnomore":"No more data"},Li={"uni-load-more.contentdown":"\u4E0A\u62C9\u986F\u793A\u66F4\u591A","uni-load-more.contentrefresh":"\u6B63\u5728\u52A0\u8F09...","uni-load-more.contentnomore":"\u6C92\u6709\u66F4\u591A\u6578\u64DA\u4E86"},Pi={"uni-load-more.contentdown":"Tire hacia arriba para mostrar m\xE1s","uni-load-more.contentrefresh":"cargando...","uni-load-more.contentnomore":"No m\xE1s datos"},Di={"uni-load-more.contentdown":"\u0627\u0633\u062D\u0628 \u0644\u0623\u0639\u0644\u0649 \u0644\u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u0645\u0632\u064A\u062F","uni-load-more.contentrefresh":"\u062C\u0627\u0631 \u0627\u0644\u062A\u062D\u0645\u064A\u0644...","uni-load-more.contentnomore":"\u0644\u0627 \u0645\u0632\u064A\u062F \u0645\u0646 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"},Mi={"uni-load-more.contentdown":"K\xE9o l\xEAn \u0111\u1EC3 hi\u1EC3n th\u1ECB th\xEAm","uni-load-more.contentrefresh":"\u0111ang t\u1EA3i...","uni-load-more.contentnomore":"Kh\xF4ng c\xF2n d\u1EEF li\u1EC7u"},Fi={en:Ti,"zh-Hans":Ii,"zh-Hant":Li,es:Pi,ar:Di,vi:Mi},Ri={"uni-load-more":{"":{flexDirection:"row",height:40,alignItems:"center",justifyContent:"center"}},"uni-load-more__text":{"":{fontSize:14,marginLeft:8}},"uni-load-more__img":{"":{width:24,height:24}},"uni-load-more__img--nvue":{"":{color:"#666666"}},"uni-load-more__img--android":{"":{width:24,height:24,transform:"rotate(0deg)"}},"uni-load-more__img--ios":{"":{width:24,height:24,transform:"rotate(0deg)"}}},st;setTimeout(()=>{st=uni.getSystemInfoSync().platform},16);var{t:we}=Si(Fi),Bi={name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default(){return{contentdown:"",contentrefresh:"",contentnomore:""}}},showText:{type:Boolean,default:!1}},data(){return{webviewHide:!1,platform:st,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="}},computed:{iconSnowWidth(){return(Math.floor(this.iconSize/24)||1)*2},contentdownText(){return this.contentText.contentdown||we("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||we("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||we("uni-load-more.contentnomore")}},mounted(){var e=getCurrentPages(),t=e[e.length-1],i=t.$getAppWebview();i.addEventListener("hide",()=>{this.webviewHide=!0}),i.addEventListener("show",()=>{this.webviewHide=!1})},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}};function Oi(e,t,i,n,o,a){return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"uni-load-more",onClick:t[0]||(t[0]=(...r)=>a.onClick&&a.onClick(...r)),renderWhole:!0},[!o.webviewHide&&i.status==="loading"&&i.showIcon?((0,s.openBlock)(),(0,s.createElementBlock)("loading-indicator",{key:0,style:(0,s.normalizeStyle)({color:i.color,width:i.iconSize+"px",height:i.iconSize+"px"}),animating:!0,class:"uni-load-more__img uni-load-more__img--nvue"},null,4)):(0,s.createCommentVNode)("",!0),i.showText?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:1,class:"uni-load-more__text",style:(0,s.normalizeStyle)({color:i.color})},(0,s.toDisplayString)(i.status==="more"?a.contentdownText:i.status==="loading"?a.contentrefreshText:a.contentnomoreText),5)):(0,s.createCommentVNode)("",!0)])}var at=x(Bi,[["render",Oi],["styles",[Ri]]]),tt=W("UploadModule"),rt="/upload/params";function lt(e){_(e)||E.request("/upload/success",{id:e,uid:getApp().globalData.uid},!1,!0).then(t=>{f("error","at common/api-upload.js:13","-----> api upload/success response",t)},t=>{f("error","at common/api-upload.js:15","-----> api upload/success response error",t)})}function be(e,t,i,n,o=null,a=null){return f("log","at common/api-upload.js:29","path======smallInfo",e,o),new Promise((r,l)=>B(this,null,function*(){let c=e.replace("file://",""),d={flag:t,type:i};o&&(d.width=o.width,d.height=o.height);try{if(n){let u=yield pe(c);f("log","at common/api-upload.js:41","fileInfo))))))",u);let p="";u&&(p=u.digest),_(p)||(d.md5=p),d.uid=getApp().globalData.uid}let h=yield E.request(rt,d,!1,!0);if(f("log","at common/api-upload.js:50","paramsResponse",h),h.ok==1&&h.data.is_upload)f("log","at common/api-upload.js:53","upload media is_upload true"),r({path:h.data.dir,smallPath:h.data.small_url,uploadId:h.data.upload_id||0});else{f("log","at common/api-upload.js:60","upPath",c);let u=h.data.upload_id,p=yield ct(c,"",h.data);u&&lt([u]),p.uploadId=u||0,r(p)}}catch(h){let u=je(h);f("error","at common/api-upload.js:69","upload media fail "+u),l(h)}}))}function Ei(e,t,i,n,o,a=!0,r=null,l=!0){return B(this,null,function*(){let c={};try{t.startsWith("_doc")&&(t=plus.io.convertLocalFileSystemURL(t));let d={},h=g.isAndroid?t:`file://${t}`,u=t,p=i;if(c={flag:e,type:g.VIDEO},r&&(c.width=r.width,c.height=r.height),l){let P=yield pe(u),L="";P&&(L=P.digest),_(L)||(c.md5=L)}let m=yield E.request(rt,c,!1,!0);f("log","at common/api-upload.js:98","upload video params response",m);let y;if(m.ok==1&&m.data.is_upload)return{url:m.data.dir,coverUrl:m.data.cover_url,smallUrl:m.data.small_url,uploadId:m.data.upload_id||0};{m.data&&(y=m.data.upload_id);let P=yield ge(h);if(a&&P?P.size>8*1024*1024:!1){let D=yield Ke(h,"medium");u=plus.io.convertLocalFileSystemURL(D.tempFilePath),p=yield fe(u,n,o)}return u=u.replace("file://",""),p=p.replace("file://",""),d={url:m.data.dir.path,coverUrl:m.data.dir.cover_path,smallUrl:m.data.dir.small_url,uploadId:m.data.upload_id||0},yield ct(u,p,m.data),y&&lt([y]),d}}catch(d){throw f("error","at common/api-upload.js:130","upload video error",d),d}})}function ct(e,t,i,n=0,o=0){return new Promise((a,r)=>{tt?(f("log","at common/api-upload.js:140","filePath,isBase64,coverFilePath,coverIsBase64,s3Info",e,n,t,o),f("log","at common/api-upload.js:141",i),tt.singleUpS3({filePath:e,isBase64:n,coverFilePath:t,coverIsBase64:o,ossInfo:i},l=>{f("log","at common/api-upload.js:150","upload plugin s3 result",l),(typeof l=="object"?l.success:l)?a({path:i.dir.path,smallPath:i.dir.small_url}):r(`_upModuleS3 ${JSON.stringify(l)}`)})):r("UploadModule null")})}var X=0,K=0,I={titleTimeCheck:5,sendPicture(e,t,i){I.uploadPicture({},e,t,i,n=>{},n=>{})},parseDataPicture(e,t,i,n){return{image_url:e,image_width:t,image_height:i,small_url:n}},uploadVoice(e,t,i,n,o){let a=t.startsWith("_doc")?convertLocalFileSystemURL(t):t;be(a,MEDIA_FLAG.MESSAGE,MEDIA.VOICE,!1).then(r=>{let l=JSON.stringify(this.parseDataVoice(r.path,i));e.msg_content=l,n(l)},()=>{o(e)})},parseSendData(e,t,i){let n={for_uid:e,uid:e,isSend:!0,msg_type:i,mtime:new Date().getTime(),msg_content:{}};switch(i){case g.M_TXT:n.msg_content={content:t};break;case g.M_IMG:n.msg_content={image_url:t.path,image_width:t.width,image_height:t.height,small_url:t.path};break;case g.M_VIDEO:n.msg_content={url:t.path,cover:t.coverPath,width:t.width,height:t.height,duration:t.duration};break;case g.M_VOICE:n.msg_content={voice_url:t.path,voice_duration:t.duration};break}return n},parseMsgTime(e){return{msg_type:1e3,ctime:e,showTime:We(e)}},checkTimeDiff(e,t,i){return Math.abs(e-t)>i*60*1e3},getHistoryTitleTime(e,t=I.titleTimeCheck){let i=-1;if(X==0)return X=e,null;i=X;let n=null;return he(i,e,t)&&(n=I.parseMsgTime(i)),X=e,n},getAddTitleTime(e,t=I.titleTimeCheck){if(K==0)return K=e,null;let i=null;return he(K,e,t)&&(i=I.parseMsgTime(e),K=e),i}};function Vi(e){return plus.io.convertLocalFileSystemURL(e)}var Ni=W("dom"),Hi={data(){return{lastTitleTime:0,messageNone:1,viewHeight:getApp().globalData.window.height-getApp().globalData.window.statusBarHeight-44,sw:getApp().globalData.window.width,msgBarHeight:getApp().globalData.window.safeBottom+uni.upx2px(104),historyList:[],addList:[],previewList:[],previewKeyList:[],scrollable:!0,itemHeightLast:10,itemHeightFirst:10,changeHBottom:0,userId:"",syncMtime:0,lastMtime:0,userInfos:{},sendStatusSrc:!1,msgHasMore:!1,barSlotHeight:uni.upx2px(84)}},computed:{classRotate(){return this.messageNone?"":"list-rotate"},navBarFontColor(){return"#000000"},navBarBgColor(){return"#FFFFFF"}},methods:{clickCall(){uni.navigateTo({url:"/pages/chat/call"})},clickPicture(e){let t=this.previewKeyList.indexOf(e.pKey);t!=-1&&Ue(this.previewList,t,0)},addPreviewInfo(e,t){if([g.M_IMG,g.M_VIDEO].indexOf(Number(e.msg_type))==-1)return null;try{let i=ue(),n=e.msg_content,o=Je(e,n);return t==1?(this.previewList.unshift(o),this.previewKeyList.unshift(i)):(this.previewList.push(o),this.previewKeyList.push(i)),i}catch(i){return null}},parseMsgItem(e,t,i,n){if(i==1){let a=I.getHistoryTitleTime(t.mtime);a!=null&&n!=0&&e.push(a)}else{let a=I.getAddTitleTime(t.mtime);a!=null&&e.push(a)}t.isSend=t.for_uid==getApp().globalData.uid;let o=this.addPreviewInfo(t,i);o&&(t.pKey=o),e.push(t)},onLoadMore(){if(this.messageNone)return;this.msgHasMore=!0,this.lastMtime=this.historyList[this.historyList.length-1].mtime;let e={uid:this.userId,sync_mtime:this.syncMtime,last_mtime:this.lastMtime};E.request("/msg/service",e).then(t=>{this.msgHasMore=!1;let i=t.data.list.length?t.data.list:[];if(_(i))return;let n=[];for(let o in i)this.parseMsgItem(n,i[o],2,o);this.historyList=[...this.historyList,...n]})},onRecordFinishNext(e){!e||!e.path||!e.duration||this.sendVoice(e.path,e.duration)},onRecordFinish(e){f("error","at pages/chat/chat.mixin.js:116","-----> msg onRecordFinish "+JSON.stringify(e)),this.onRecordFinishNext(e)},onInputLineChange(){this.messageNone&&this.scrollBottom()},scrollList(e,t=!0){Ni.scrollToElement(e,{animated:t})},scrollBottom(e=!1){let t=this.messageNone?"cellNew":"cellLast";this.scrollList(this.$refs[t],e)},addMsg(e,t){this.addMsgTimeByLast(e.mtime);let i=this.messageNone?1:2,n=this.addPreviewInfo(e,i);n&&(e.pKey=n),this.addList.push(JSON.parse(JSON.stringify(e))),this.$nextTick(()=>{this.scrollBottom(),typeof t=="function"&&t()})},sendVoice(e,t){return B(this,null,function*(){let i=I.parseSendData(this.userId,{path:e,duration:t},g.M_VOICE);this.addMsg(i,()=>{this.$refs[`msg${i.mtime}`][0].loadingShow()});let n=e.startsWith("_doc")?Vi(e):e,o=yield be(n,"message",3,!1);f("log","at pages/chat/chat.mixin.js:147","sendData,uploadObj********************voice",i,o),this.sendMsg(i,o,()=>{this.$refs[`msg${i.mtime}`][0].loadingHide()})})},onChoosePicture(e,t){return B(this,null,function*(){let i;if(e==0){i=I.parseSendData(this.userId,t,g.M_IMG),this.addMsg(i,()=>{this.$refs[`msg${i.mtime}`][0].loadingShow()});let n=i.msg_content,o=yield be(n.image_url,"message",1,!0,{width:n.image_width,height:n.image_height});f("log","at pages/chat/chat.mixin.js:161","sendData,uploadObj********************image",i,o),this.sendMsg(i,o,()=>{this.$refs[`msg${i.mtime}`][0].loadingHide()})}if(e==1){i=I.parseSendData(this.userId,t,g.M_VIDEO),this.addMsg(i,()=>{this.$refs[`msg${i.mtime}`][0].loadingShow()});let n=i.msg_content,o=yield Ei("message",n.url,n.cover,n.width,n.height,!0,{width:n.width,height:n.height});f("log","at pages/chat/chat.mixin.js:173","sendData,uploadObj********************video",i,o),this.sendMsg(i,o,()=>{this.$refs[`msg${i.mtime}`][0].loadingHide()})}})},sendMsg(e,t=null,i){if(e.msg_type!=g.M_TXT&&(delete e.for_uid,delete e.isSend,delete e.pKey),!_(t)&&e.msg_type==g.M_IMG){let n=e.msg_content;n.small_url=t.smallPath,n.image_url=t.path,n.upload_id=t.uploadId}if(!_(t)&&e.msg_type==g.M_VIDEO){let n=e.msg_content;n.url=t.url,n.cover=t.coverUrl,n.upload_id=t.uploadId}if(!_(t)&&e.msg_type==g.M_VOICE){let n=e.msg_content;n.voice_url=t.path}E.request("/msg/send",e).then(n=>{f("log","at pages/chat/chat.mixin.js:202","/msg/send=========resault",n),typeof i=="function"&&i(),n.data&&(n.data.isSend=!1,setTimeout(()=>{this.addList.push(n.data),this.$nextTick(()=>{this.scrollBottom()})},700))})},onSend(e){let t=I.parseSendData(this.userId,e,g.M_TXT);this.addMsgTimeByLast(t.mtime),this.addMsg(t,()=>{this.$refs[`msg${t.mtime}`][0].loadingShow()});let i={msg_type:1,msg_content:{content:e}};this.sendMsg(i,"",()=>{this.$refs[`msg${t.mtime}`][0].loadingHide()})},addMsgTimeByLast(e,t=5){if(this.lastTitleTime==0){let i=this.addList.length>0?this.addList[this.addList.length-1]:this.historyList[0];!_(i)&&i.ctime&&(this.lastTitleTime=i.ctime)}I.checkTimeDiff(this.lastTitleTime,e,t)&&(this.addList.push(I.parseMsgTime(e)),this.lastTitleTime=e)}},onLoad(){return B(this,null,function*(){if(f("log","at pages/chat/chat.mixin.js:244","getApp().globalData.ua",getApp().globalData.ua),!(yield getApp().createUser()))return;this.userId=getApp().globalData.uid;let t={uid:this.userId,sync_mtime:this.syncMtime,last_mtime:this.lastMtime},i=yield E.request("/msg/service",t);this.messageNone=i.data.has_more?0:1;let n=i.data.list.length?i.data.list:[];if(_(n))return;let o=[];if(this.messageNone){for(let a=n.length-1,r=0;a>=r;a--)this.parseMsgItem(o,n[a],1,a);this.addList=o}else{for(let a in n)this.parseMsgItem(o,n[a],2,a);this.historyList=o}this.$nextTick(()=>{this.messageNone&&this.scrollBottom()})})}},Wi={SUCCESS:0,FAIL:1,USER_DEL:4},ji={center:{"":{alignItems:"center",flexDirection:"row"}},"flex-start":{"":{justifyContent:"flex-start"}},"flex-end":{"":{justifyContent:"flex-end"}},container:{"":{paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10,alignItems:"flex-start",flexDirection:"row"}},"admin-del-str":{"":{color:"#FF0000",fontSize:"24rpx"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"view-send":{"":{paddingLeft:"26rpx"}},"view-receive":{"":{paddingRight:"26rpx"}},content:{".view-receive ":{borderTopLeftRadius:0,borderTopRightRadius:"8rpx",borderBottomRightRadius:"8rpx",borderBottomLeftRadius:"8rpx",overflow:"hidden"}},"view-tran-end":{".view-receive ":{justifyContent:"flex-end",marginBottom:"12rpx",marginTop:"8rpx"},"":{paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"18rpx",flexDirection:"row",alignItems:"center",marginBottom:"12rpx",marginTop:"8rpx"}},"text-tran":{"":{fontSize:"18rpx",marginLeft:"4rpx"}}},zi={props:{data:{type:Object,default(){return{}}}},data(){return{maxWidth:getApp().globalData.window.width-20-6-uni.upx2px(32),showLoading:!1,msgState:0}},computed:{viewBg(){return this.data.isSend?"#E1FFC3":"#FFFFFF"},sendStatusSrc(){return this.msgState==Wi.FAIL?"/static/i-error.png":""}},methods:{loadingShow(){this.showLoading=!0},loadingHide(){this.showLoading=!1}}};function Ui(e,t,i,n,o,a){let r=F((0,s.resolveDynamicComponent)("uni-load-more"),at);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{style:{position:"relative"},renderWhole:!0},[i.data.isSend?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"container flex-end"},[(0,s.createElementVNode)("view",{class:"center",style:{"margin-right":"6px","justify-content":"flex-end"}},[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)({maxWidth:o.maxWidth+"px"}),class:"center flex-end"},[(0,s.createElementVNode)("view",null,[o.showLoading?((0,s.openBlock)(),(0,s.createBlock)(r,{key:0,style:{height:"30px","margin-right":"10rpx"},status:"loading",iconSize:17})):(0,s.createCommentVNode)("",!0)]),(0,s.createElementVNode)("view",{class:(0,s.normalizeClass)([i.data.isSend?"view-send":"view-receive"]),style:{flex:"1"}},[(0,s.createElementVNode)("view",{class:"content",style:(0,s.normalizeStyle)({background:a.viewBg})},[(0,s.renderSlot)(e.$slots,"default",{style:"flex:1"})],4)],2)],4)]),(0,s.createElementVNode)("u-image",{src:"https://pix.veryjack.com/i/2023/04/04/fsxnkv.webp",style:{width:"76rpx",height:"76rpx","border-radius":"38rpx"}})])):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,class:"container flex-start"},[(0,s.createElementVNode)("u-image",{style:{width:"76rpx",height:"76rpx","border-radius":"38rpx"},src:"https://img0.baidu.com/it/u=367268319,3445943231&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500"}),(0,s.createElementVNode)("view",{class:"center",style:{"margin-left":"6px"}},[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)({maxWidth:o.maxWidth+"px"}),class:"center flex-start"},[(0,s.createElementVNode)("view",{class:(0,s.normalizeClass)([i.data.isSend?"view-send":"view-receive"])},[(0,s.createElementVNode)("view",{class:"content",style:(0,s.normalizeStyle)({background:a.viewBg})},[(0,s.renderSlot)(e.$slots,"default")],4)],2)],4)])]))])}var Q=x(zi,[["render",Ui],["styles",[ji]]]),q={methods:{loadingShow(){this.$refs.msgBase.loadingShow()},loadingHide(){this.$refs.msgBase.loadingHide()},checkStopClick(e){return this.$refs.msgBase.isStopClick==1?(this.$refs.msgBase.isStopClick=0,e.stopPropagation(),!0):!1}}},Ji={components:{MsgBase:Q},mixins:[q],props:{data:{type:Object,default(){return{}}}},data(){return{maxWidthContent:getApp().globalData.window.width-130}},methods:{}};function Gi(e,t,i,n,o,a){let r=(0,s.resolveComponent)("msg-base");return(0,s.openBlock)(),(0,s.createBlock)(r,{ref:"msgBase",data:i.data},{default:(0,s.withCtx)(()=>[i.data.msg_content&&i.data.msg_content.content?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,style:(0,s.normalizeStyle)([{"font-size":"32rpx","line-height":"42rpx",padding:"18rpx 20rpx"},{"max-width":o.maxWidthContent+"px"}])},(0,s.toDisplayString)(i.data.msg_content.content),5)):(0,s.createCommentVNode)("",!0)]),_:1},8,["data"])}var Yi=x(Ji,[["render",Gi]]),Zi=W("animation"),$=class{constructor(t,i){this.options=t,this.animation=uni.createAnimation(t),this.currentStepAnimates={},this.next=0,this.$=i}_nvuePushAnimates(t,i){let n=this.currentStepAnimates[this.next],o={};if(n?o=n:o={styles:{},config:{}},dt.includes(t)){o.styles.transform||(o.styles.transform="");let a="";t==="rotate"&&(a="deg"),o.styles.transform+=`${t}(${i+a}) `}else o.styles[t]=`${i}`;this.currentStepAnimates[this.next]=o}_animateRun(t={},i={}){let n=this.$.$refs.ani.ref;if(n)return new Promise((o,a)=>{Zi.transition(n,ie({styles:t},i),r=>{o()})})}_nvueNextAnimate(t,i=0,n){let o=t[i];if(o){let{styles:a,config:r}=o;this._animateRun(a,r).then(()=>{i+=1,this._nvueNextAnimate(t,i,n)})}else this.currentStepAnimates={},typeof n=="function"&&n(),this.isEnd=!0}step(t={}){return this.currentStepAnimates[this.next].config=Object.assign({},this.options,t),this.currentStepAnimates[this.next].styles.transformOrigin=this.currentStepAnimates[this.next].config.transformOrigin,this.next++,this}run(t){this.isEnd=!1,this.$.$refs.ani&&this.$.$refs.ani.ref&&(this._nvueNextAnimate(this.currentStepAnimates,0,t),this.next=0)}},dt=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"],Xi=["opacity","backgroundColor"],Ki=["width","height","left","right","top","bottom"];dt.concat(Xi,Ki).forEach(e=>{$.prototype[e]=function(...t){return this._nvuePushAnimates(e,t),this}});function it(e,t){if(t)return clearTimeout(t.timer),new $(e,t)}var $i={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default(){return"fade"}},duration:{type:Number,default:300},styles:{type:Object,default(){return{}}},customClass:{type:String,default:""}},data(){return{isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}},watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e=De(ie({},this.styles),{"transition-duration":this.duration/1e3+"s"}),t="";for(let i in e){let n=this.toLine(i);t+=n+":"+e[i]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=it(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let i in e)try{typeof e[i]=="object"?this.animation[i](...e[i]):this.animation[i](e[i])}catch(n){f("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:139",`\u65B9\u6CD5 ${i} \u4E0D\u5B58\u5728`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);typeof e!="undefined"&&(this.opacity=e),this.transform=t,this.$nextTick(()=>{this.timer=setTimeout(()=>{this.animation=it(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})},20)})},close(e){this.animation&&this.tranfromInit(!0).step().run(()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:t,transform:i}=this.styleInit(!1);this.opacity=t||1,this.transform=i,this.$emit("change",{detail:this.isShow})})},styleInit(e){let t={transform:""},i=(n,o)=>{o==="fade"?t.opacity=this.animationType(n)[o]:t.transform+=this.animationType(n)[o]+" "};return typeof this.modeClass=="string"?i(e,this.modeClass):this.modeClass.forEach(n=>{i(e,n)}),t},tranfromInit(e){let t=(i,n)=>{let o=null;n==="fade"?o=i?0:1:(o=i?"-100%":"0",n==="zoom-in"&&(o=i?.8:1),n==="zoom-out"&&(o=i?1.2:1),n==="slide-right"&&(o=i?"100%":"0"),n==="slide-bottom"&&(o=i?"100%":"0")),this.animation[this.animationMode()[n]](o)};return typeof this.modeClass=="string"?t(e,this.modeClass):this.modeClass.forEach(i=>{t(e,i)}),this.animation},animationType(e){return{fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}},animationMode(){return{fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}},toLine(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}}};function Qi(e,t,i,n,o,a){return o.isShow?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,ref:"ani",animation:o.animationData,class:(0,s.normalizeClass)(i.customClass),style:(0,s.normalizeStyle)(a.transformStyles),onClick:t[0]||(t[0]=(...r)=>a.onClick&&a.onClick(...r)),renderWhole:!0},[(0,s.renderSlot)(e.$slots,"default")],14,["animation"])):(0,s.createCommentVNode)("",!0)}var Ce=x($i,[["render",Qi]]),qi={"uni-popup":{"":{position:"fixed"},".top":{top:0},".left":{top:0},".right":{top:0}},"uni-popup__wrapper":{".uni-popup ":{position:"relative"},".uni-popup .left":{paddingTop:0,flex:1},".uni-popup .right":{paddingTop:0,flex:1}},"fixforpc-top":{"":{top:0}}},en={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},maskClick:{type:Boolean,default:!0},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBgColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{maskClass(){return{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:this.maskBgColor}},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return this.backgroundColor===""||this.backgroundColor==="none"?"transparent":this.backgroundColor}},mounted(){(()=>{let{windowWidth:t,windowHeight:i,windowTop:n,safeAreaInsets:o}=uni.getSystemInfoSync();this.popupWidth=t,this.popupHeight=i+n,this.safeArea?this.safeAreaInsets=o:this.safeAreaInsets=0})()},created(){this.mkclick=this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1},methods:{closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){this.clearPropagation=!0},open(e,t=!0){if(e&&["top","center","bottom","left","right","message","dialog","share"].indexOf(e)!==-1||(e=this.type),this.maskShow=t,!this.config[e]){f("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:218","\u7F3A\u5C11\u7C7B\u578B\uFF1A",e);return}this[this.config[e]](),this.$emit("change",{show:!0,type:e})},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.showPopup=!1},300)},touchstart(){this.clearPropagation=!1},onTap(){if(this.clearPropagation){this.clearPropagation=!1;return}this.$emit("maskClick"),this.mkclick&&this.close()},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0,this.$nextTick(()=>{this.messageChild&&this.type==="message"&&this.messageChild.timerClose()}))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets&&this.safeAreaInsets.bottom||0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},!e&&(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)}}};function tn(e,t,i,n,o,a){let r=F((0,s.resolveDynamicComponent)("uni-transition"),Ce);return o.showPopup?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:(0,s.normalizeClass)(["uni-popup",[o.popupstyle,a.isDesktop?"fixforpc-z-index":""]]),onTouchmove:t[2]||(t[2]=(0,s.withModifiers)((...l)=>a.clear&&a.clear(...l),["stop","prevent"])),renderWhole:!0},[(0,s.createElementVNode)("view",{onTouchstart:t[1]||(t[1]=(...l)=>a.touchstart&&a.touchstart(...l))},[o.maskShow?((0,s.openBlock)(),(0,s.createBlock)(r,{key:"1",name:"mask","mode-class":"fade",styles:a.maskClass,duration:o.duration,show:o.showTrans,onClick:a.onTap},null,8,["styles","duration","show","onClick"])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(r,{key:"2","mode-class":o.ani,name:"content",styles:o.transClass,duration:o.duration,show:o.showTrans,onClick:a.onTap},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:(0,s.normalizeClass)(["uni-popup__wrapper",[o.popupstyle]]),style:(0,s.normalizeStyle)({backgroundColor:a.bg}),onClick:t[0]||(t[0]=(...l)=>a.clear&&a.clear(...l))},[(0,s.renderSlot)(e.$slots,"default")],6)]),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],34)):(0,s.createCommentVNode)("",!0)}var nn=x(en,[["render",tn],["styles",[qi]]]),on={"level-center":{"":{alignItems:"center",flexDirection:"row"}},"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"column-center":{"":{flexDirection:"column",alignItems:"center"}},"action-wrap":{"":{borderRadius:"26rpx",marginTop:"12rpx",marginRight:"16rpx",marginBottom:0,marginLeft:"16rpx"}},"title-item":{".action-wrap ":{paddingTop:"28rpx",paddingRight:"28rpx",paddingBottom:"28rpx",paddingLeft:"28rpx"}},"action-item":{".action-wrap ":{height:"106rpx",paddingTop:0,paddingRight:"40rpx",paddingBottom:0,paddingLeft:"40rpx"}},title:{".action-wrap .action-item ":{marginLeft:"50rpx"}},"item-text":{".action-wrap .action-item ":{textAlign:"center",lineHeight:"106rpx"}},line:{"":{height:"2rpx",backgroundColor:"rgba(230,230,230,0.5)",transform:"scaleY(0.5)",transformOrigin:"50% 100%"}}},sn={emits:["onClickActionItem","onChange","onMaskClick"],props:{actions:{type:[Array,Object],default:[]}},data(){return{textSize:"38rpx",itemTextColor:"#333333"}},methods:{getOssPicPath:Xe,clickThis(e){e&&e.stopPropagation()},clickItem(e){this.$refs.popup.close(),this.$nextTick(()=>{let t=e!=-1?this.actions[e]:{key:"cancel"};this.$emit("onClickActionItem",t)})},onMaskClick(){this.$emit("onMaskClick")},onChange(e){this.$emit("onChange",e)},open(){this.$refs.popup.open()}}};function an(e,t,i,n,o,a){let r=F((0,s.resolveDynamicComponent)("uni-popup"),nn);return(0,s.openBlock)(),(0,s.createBlock)(r,{onClick:(0,s.withModifiers)(a.clickThis,["stop"]),ref:"popup",type:"bottom",maskBgColor:"rgba(0, 0, 0, 0.4)",onChange:a.onChange,onMaskClick:a.onMaskClick,style:{"z-index":"99999"}},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"action-wrap",style:{"background-color":"#FFFFFF"}},[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(i.actions,(l,c,d)=>((0,s.openBlock)(),(0,s.createElementBlock)("view",{index:"a"+c},[l.icon?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"action-item level-center",onClick:h=>a.clickItem(c)},[(0,s.createElementVNode)("u-image",{style:{height:"46rpx",width:"46rpx","margin-right":"50rpx"},src:a.getOssPicPath(l.icon)},null,8,["src"]),(0,s.createElementVNode)("u-text",{style:(0,s.normalizeStyle)({fontSize:o.textSize,color:o.itemTextColor})},(0,s.toDisplayString)(l.title),5)],8,["onClick"])):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,class:"action-item",onClick:h=>a.clickItem(c)},[(0,s.createElementVNode)("u-text",{style:(0,s.normalizeStyle)({fontSize:o.textSize,color:"#333333"}),class:"item-text"},(0,s.toDisplayString)(l.title),5)],8,["onClick"])),(0,s.createElementVNode)("view",{class:"line"})],8,["index"]))),256))]),(0,s.createElementVNode)("view",{class:"action-wrap action-bottom",style:{marginBottom:"10px",backgroundColor:"#FFFFFF"}},[(0,s.createElementVNode)("view",{class:"action-item level-center",onClick:t[0]||(t[0]=l=>a.clickItem(-1)),style:{"justify-content":"center"}},[(0,s.createElementVNode)("u-text",{style:(0,s.normalizeStyle)({color:"#333333",fontSize:o.textSize})},"Cancel",4)])])]),_:1},8,["onClick","onChange","onMaskClick"])}var rn=x(sn,[["render",an],["styles",[on]]]),ln={wrap:{"":{position:"fixed",alignItems:"center",flexDirection:"row",paddingTop:0,paddingRight:"4rpx",paddingBottom:0,paddingLeft:"4rpx"}},cover:{"":{zIndex:111,position:"fixed",backgroundColor:"rgba(0,0,0,0)"}},popover:{"":{borderRadius:"8rpx",textAlign:"center",zIndex:111,position:"relative"}},triangle:{"":{width:"28rpx",height:"28rpx",transform:"rotate(45deg)",position:"absolute",zIndex:11}}},cn=W("dom"),dn={emits:["onClickOther"],props:{size:{type:Object,default(){return{}}},minMargin:{type:[String,Number],default:15},bgColor:{type:String,default:"#FFFFFF"},direction:{type:String,default:"above"},boxShadow:{type:String,default:"0 4rpx 8rpx 0 rgba(0, 0, 0, 0.09)"},triBoxShadow:{type:String,default:"0 4rpx 4rpx 0 rgba(0, 0, 0, 0.09)"}},computed:{getStyle(){return{top:this.getTop()[0]+"px",height:this.popFatherHeight+"px",opacity:this.opacity,left:this.getSide()[0]+"px"}},getTriangleStyle(){return{top:this.getTop()[1]+"px",left:this.getSide()[1]+"px","background-color":this.bgColor}},triangleBoxShadow(){return _(this.boxShadow)?"":this.triangleBoxShadow}},data(){return{opacity:0,popWidth:0,popHeight:0,show:!1,showPop:!1,popFatherHeight:0,coverWidth:getApp().globalData.window.width,coverHeight:getApp().globalData.window.height}},methods:{getTop(){let e,t,i=this.size.top,n=this.size.height,o=this.size.bottom;if(this.direction=="above")i<this.popFatherHeight+10?(e=i+n+6,t=2):(e=i-this.popFatherHeight-6,t=this.popHeight);else if(this.direction=="below"){let a=getApp().globalData.window;this.coverHeight-a.statusBarHeight-a.safeBottom-44-50-o<this.popFatherHeight+10?(e=i-this.popFatherHeight-6,t=this.popHeight):(e=i+n+6,t=2)}return[e,t]},getSide(){let e=this.coverWidth,t=this.size,i=this.popWidth/2,n=t.left+(t.width-12)/2,o,a;return i>=n?(o=this.minMargin,a=n-this.minMargin):this.size.left+this.popWidth>=e?(o=e-this.popWidth-this.minMargin,a=t.left-o+t.width/2-7):(o=n-i+5,a=i-6),[o,a]},clickOther(){this.show=!1,this.$emit("onClickOther")},getPopHeight(){var e=this;cn.getComponentRect(e.$refs.popContent,t=>{if(t&&t.size){let i=t.size;e.popWidth=i.width,e.popHeight=i.height,e.popFatherHeight=i.height+18,e.opacity=1}})},open(){var e=this;e.show=!0,e.opacity=0;let t=setTimeout(function(){e.getPopHeight(),clearTimeout(t)},100)},close(){this.show&&(this.show=!1)}}};function un(e,t,i,n,o,a){return o.show?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...r)=>a.clickOther&&a.clickOther(...r)),class:"cover",style:(0,s.normalizeStyle)({width:o.coverWidth+"px",height:o.coverHeight+"px"}),renderWhole:!0},[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)(a.getStyle),class:"wrap"},[(0,s.createElementVNode)("view",{class:"triangle",style:(0,s.normalizeStyle)([a.getTriangleStyle,{boxShadow:a.triangleBoxShadow}])},null,4),(0,s.createElementVNode)("view",{ref:"popContent",class:"popover",style:(0,s.normalizeStyle)({"background-color":i.bgColor,boxShadow:i.boxShadow})},[(0,s.renderSlot)(e.$slots,"default")],4),(0,s.createElementVNode)("view",{class:"triangle",style:(0,s.normalizeStyle)([a.getTriangleStyle])},null,4)],4)],4)):(0,s.createCommentVNode)("",!0)}var hn=x(dn,[["render",un],["styles",[ln]]]),mn={id:"2852637",name:"uniui\u56FE\u6807\u5E93",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]},fn="/static/uniicons.ttf",pn={"uni-icons":{"":{fontFamily:"uniicons",textDecoration:"none",textAlign:"center"}}},gn=weex.requireModule("dom");gn.addRule("fontFace",{fontFamily:"uniicons",src:"url('"+fn+"')"});var _n={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data(){return{icons:mn.glyphs}},computed:{unicode(){let e=this.icons.find(t=>t.font_class===this.type);return e?unescape(`%u${e.unicode}`):""}},methods:{_onClick(e){this.$emit("click",e)}}};function wn(e,t,i,n,o,a){return(0,s.openBlock)(),(0,s.createElementBlock)("u-text",{style:(0,s.normalizeStyle)({color:i.color,"font-size":i.size}),class:"uni-icons",onClick:t[0]||(t[0]=(...r)=>a._onClick&&a._onClick(...r))},(0,s.toDisplayString)(a.unicode),5)}var ut=x(_n,[["render",wn],["styles",[pn]]]),yn={"view-lock-open":{"":{width:"76rpx",borderTopLeftRadius:"38rpx",borderTopRightRadius:"38rpx",alignItems:"center"}},"view-top":{"":{width:"76rpx",height:"76rpx",borderRadius:"38rpx",position:"absolute",top:0,left:0}},"view-lock":{"":{width:"32rpx",height:"32rpx",backgroundColor:"#DD524D",borderRadius:"4rpx",marginTop:"22rpx",marginLeft:"22rpx"}}},xn={emits:["onBarAudioLock","onBarAudioLockStop"],data(){return{lockH:uni.upx2px(120),diffHeight:0,viewHeight:uni.upx2px(160),iconUpMargin:uni.upx2px(74),lastY:0,showLock:!1}},methods:{clickStop(){this.showLock&&this.$emit("onBarAudioLockStop")},onTouchMoveUp(e){if(!this.showLock){if(this.lastY!=0){let t=this.lastY-e;this.diffHeight+=t}this.diffHeight>=this.lockH&&(this.diffHeight=this.lockH,this.viewHeight=0,this.iconUpMargin=0,this.showLock=!0,this.$emit("onBarAudioLock")),this.lastY=e}}},computed:{viewBg(){return"#FFFFFF"}}};function vn(e,t,i,n,o,a){let r=F((0,s.resolveDynamicComponent)("uni-icons"),ut);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"msg-bar-audio-lock",onClick:t[0]||(t[0]=(...l)=>a.clickStop&&a.clickStop(...l)),renderWhole:!0},[(0,s.createElementVNode)("view",{class:"view-lock-open",style:(0,s.normalizeStyle)({height:`${o.viewHeight}px`,background:a.viewBg})},[(0,s.createVNode)(r,{type:"top",size:"30rpx",color:"#333333",style:(0,s.normalizeStyle)({marginTop:`${o.iconUpMargin}px`})},null,8,["style"])],4),(0,s.createElementVNode)("view",{class:"view-top",style:(0,s.normalizeStyle)({background:a.viewBg})},[o.showLock?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"view-lock"})):((0,s.openBlock)(),(0,s.createElementBlock)("u-image",{key:1,src:"/static/audio_lock.png",style:{"margin-top":"10rpx","margin-left":"11rpx",width:"54rpx",height:"54rpx"}}))],4),(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)({height:`${o.diffHeight}px`})},null,4)])}var bn=x(xn,[["render",vn],["styles",[yn]]]),Cn={"fj-slider":{"":{position:"relative"}},"fj-touch-right":{"":{position:"absolute"}},"fj-line":{"":{position:"absolute",left:0,right:0}}},kn=W("dom"),An={name:"CustomSlider",emits:["onChanged","onChangeStart","onChange"],props:{fillValue:{type:Number,default:100},maxValue:{type:Number,default:0},step:{type:Number,default:1},activeColor:{type:String,default:"#2F85FC"},inactiveColor:{type:String,default:"#999999"},blockWidth:{type:Number,default:24},lineHeight:{type:Number,default:8},lineRadius:{type:Number,default:4},blockColor:{type:String,default:"#FFFFFF"},disClick:{type:Boolean,default:!1}},data(){return{lineWidth:0,maxLeft:0,lineLeft:0,curValue:0,sMaxValue:0,sFillValue:0,percentage:0,sBlockWidth:uni.upx2px(this.blockWidth),sLineHeight:uni.upx2px(this.lineHeight),sLineTop:(uni.upx2px(this.blockWidth)-uni.upx2px(this.lineHeight))/2,sLineRadius:uni.upx2px(this.lineRadius),getRectInterval:!1}},watch:{maxValue(e,t){this.sMaxValue=e,this.maxLeft=this.sMaxValue/this.percentage,this.checkMaxLeft()},fillValue(e,t){this.sFillValue=this.fillValue}},methods:{clickLine(e){e.stopPropagation(),!this.disClick&&this.touchmove(e,!0)},envir(e){this.getRectInterval=setTimeout(()=>{kn.getComponentRect(e.refName,t=>{if(clearTimeout(this.getRectInterval),this.getRectInterval=!1,t&&t.size&&t.size.height!=0){let i=t.size;e.fn({width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right})}else this.envir(e)})},100)},touchstart(e){this.$emit("onChangeStart",this.curValue)},touchmove(e,t){e.stopPropagation();let i;if(t?i=e.changedTouches[0].screenX-this.lineLeft:i=e.touches[0].screenX-this.lineLeft,i<0||i>this.lineWidth)return;let n=Math.ceil(i);n>this.lineWidth&&(n=this.lineWidth),this.curValue=Math.round(n*this.percentage),this.maxLeft=Math.ceil(i),this.checkMaxLeft(),this.$emit("onChange",this.curValue)},touchend(e){if(this.step===1)this.sMaxValue=this.curValue;else{let t=Math.round(this.maxLeft*this.percentage/this.step);this.sMaxValue=t*this.step,this.sFillValue-this.sMaxValue<this.step&&(this.sMaxValue=this.sFillValue),this.maxLeft=this.sMaxValue/this.percentage}f("info","at components/custom-slider.vue:179","m-slider onChanged "+this.curValue),this.$emit("onChanged",this.curValue)},checkMaxLeft(){this.maxLeft>this.lineWidth-this.sBlockWidth?this.maxLeft=this.lineWidth-this.sBlockWidth:this.maxLeft<=4&&(this.maxLeft=0)}},mounted(){this.$nextTick(()=>{this.envir({className:".fj-line",refName:this.$refs["fj-line"],fn:e=>{this.lineWidth=e.width,this.lineLeft=e.left,this.sMaxValue=this.maxValue>0?this.maxValue:0,this.sFillValue=this.fillValue>0?this.fillValue:0,this.percentage=this.sFillValue/this.lineWidth,this.maxLeft=this.sMaxValue/this.percentage}})})},unmounted(){this.getRectInterval&&clearTimeout(this.getRectInterval)}};function Sn(e,t,i,n,o,a){return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"fj-slider",onTouchend:t[3]||(t[3]=(...r)=>a.clickLine&&a.clickLine(...r)),renderWhole:!0},[(0,s.createElementVNode)("view",{class:"fj-line",ref:"fj-line",style:(0,s.normalizeStyle)({background:i.inactiveColor,height:`${o.sLineHeight}px`,top:`${o.sLineTop}px`,borderRadius:`${o.sLineRadius}px`})},null,4),(0,s.createElementVNode)("view",{class:"fj-line",style:(0,s.normalizeStyle)({width:`${Math.abs(o.maxLeft)}px`,background:i.activeColor,height:`${o.sLineHeight}px`,top:`${o.sLineTop}px`,borderTopLeftRadius:`${o.sLineRadius}px`,borderBottomLeftRadius:`${o.sLineRadius}px`})},null,4),(0,s.createElementVNode)("view",{class:"fj-touch-right",onTouchstart:t[0]||(t[0]=(...r)=>a.touchstart&&a.touchstart(...r)),onTouchmove:t[1]||(t[1]=(...r)=>a.touchmove&&a.touchmove(...r)),onTouchend:t[2]||(t[2]=(...r)=>a.touchend&&a.touchend(...r)),style:(0,s.normalizeStyle)({left:`${o.maxLeft}px`,background:i.blockColor,width:`${o.sBlockWidth}px`,height:`${o.sBlockWidth}px`,borderRadius:`${o.sBlockWidth/2}px`})},null,36)],32)}var ht=x(An,[["render",Sn],["styles",[Cn]]]),Tn={"msg-bar-audio-content":{"":{height:"96rpx",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},"view-doing":{"":{flexDirection:"row",alignItems:"center",paddingLeft:"30rpx"}},"text-duration":{"":{width:"80rpx",textAlign:"center",fontSize:"28rpx",color:"#333333"}},"view-middle":{"":{height:"96rpx",flexDirection:"row",alignItems:"center",justifyContent:"center",position:"absolute",bottom:0}},"view-scroll-cancel":{"":{flexDirection:"row",alignItems:"center"}},"text-cancel-scroll":{"":{color:"#333333",fontSize:"28rpx",marginRight:"2rpx"}},"text-cancel":{"":{fontSize:"34rpx",color:"#333333",fontWeight:"600"}},"view-preview-middle":{"":{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center",height:"80rpx",borderRadius:"40rpx"}},"text-audio-duration":{"":{color:"#333333",fontSize:"28rpx",marginRight:"12rpx",marginLeft:"12rpx"}},"view-record-btn":{"":{height:"100rpx",width:"120rpx",alignItems:"center",justifyContent:"center",flexDirection:"row"}},"l-img":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}}},J=uni.getRecorderManager(),In={components:{CustomSlider:ht},emits:["onAudioCancel","onAudioFinish"],props:{maxDuration:{type:Number,default:300},onlyVoice:{type:Boolean,default:!1}},data(){return{screenW:getApp().globalData.window.width,showDoing:!0,recordTimer:!1,recordDuration:0,cancelX:getApp().globalData.window.width/2+40,cancelW:getApp().globalData.window.width,touchRightX:0,lastX:0,isCancel:!1,isLock:!1,recordFinishSend:!0,mAudioInner:uni.createInnerAudioContext(),audioPath:"",audioDuration:0,audioDurationPlay:0,audioPlayerTimer:!1,audioSliderValue:0,audioSliderChanging:!1,audioPlayerIcon:"/static/audio_play_1.png"}},computed:{getSafeBottom(){return 0},durationStr(){return this.recordDuration<=0?"00:00":U(this.recordDuration)},playDurationStr(){return this.audioDurationPlay<=0?"00:00":U(this.audioDurationPlay)},viewBg(){return"#FFFFFF"},viewMiddleBg(){return"#F1F3F6"},sliderActColor(){return"#333333"},sliderBgColor(){return"#CCCCCC"}},methods:{clickCancel(e){e.stopPropagation(),this.isCancel=!0,this.stopRecord(!1),this.$emit("onAudioCancel")},clickDel(){this.$emit("onAudioCancel")},clickSend(){this.$emit("onAudioFinish",!0,{path:this.audioPath,duration:this.audioDuration})},clickPlay(){this.mAudioInner.paused?(this.mAudioInner.play(),this.handlePlayerInterval()):(this.mAudioInner.pause(),this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer))},onSliderChangeStart(){this.audioSliderChanging=!0},onSliderChanged(e){this.audioSliderChanging=!1;let t=e/100,i=parseInt(this.audioDuration*t);this.audioDurationPlay=i,this.mAudioInner.seek(this.audioDuration*t)},onTouchMoveLeft(e){if(!this.isLock&&!this.isCancel){if(this.lastX!=0){let t=e-this.lastX;this.touchRightX-=t,this.touchRightX<0&&(this.touchRightX=0),this.cancelW+=t}this.lastX=e,e<this.cancelX&&(this.isCancel=!0,this.stopRecord(!1),this.$emit("onAudioCancel"))}},stopRecord(e){this.recordFinishSend=e,this.recordTimer&&clearInterval(this.recordTimer),this.recordTimer=!1,this.recordDuration=0,J.stop()},startRecord(){this.$nextTick(()=>{this.startIconDoingAnim(),setTimeout(()=>{this.startBtnAnim()},300),this.startRecordTimer(),J.start({duration:this.maxDuration*1e3,format:"aac"})})},startIconDoingAnim(){let e={duration:800};this.$refs.animPoint.step({opacity:.2},e),this.$refs.animPoint.step({opacity:1},e),this.$refs.animPoint.run(()=>{this.startIconDoingAnim()})},startBtnAnim(){this.$refs.animBtn.step({scale:1.3,opacity:0},{duration:1e3}),this.$refs.animBtn.step({scale:1,opacity:1},{duration:1}),this.$refs.animBtn.run(()=>{this.startBtnAnim()})},startRecordTimer(){this.recordTimer||(this.recordTimer=setInterval(()=>{if(this.recordDuration>=this.maxDuration){this.stopRecord(!0);return}this.recordDuration+=1},1e3))},changeAudioLock(){this.isLock=!0,this.touchRightX=0},changeAudioStop(){this.showDoing=!1,this.stopRecord(!1)},initAudioPreview(){this.mAudioInner.src=this.audioPath,this.audioDurationPlay=this.audioDuration},handlePlayerInterval(){this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer),this.audioPlayerTimer=setInterval(()=>{let e=this.mAudioInner.currentTime,t=parseInt(e*100);isNaN(t)||(this.audioDurationPlay=parseInt(e),this.audioSliderChanging||(this.audioSliderValue=parseInt(t/this.audioDuration)))},100)},audioOnEndedListener(e){this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer),this.audioSliderValue=0,this.audioDurationPlay=this.audioDuration,this.audioPlayerIcon="/static/audio_play_1.png"},audioOnPlayListener(){this.audioPlayerIcon="/static/audio_pause_1.png"},audioOnPauseListener(){this.audioPlayerIcon="/static/audio_play_1.png"}},created(){J.onStop(e=>{if(this.isCancel)return;f("info","at pages/chat/coms/msg-bar-audio.vue:244","----> record finish "+JSON.stringify(e));let t=uni.createInnerAudioContext(),i=e.tempFilePath,n=setTimeout(()=>{clearTimeout(n),t.destroy(),this.$emit("onAudioFinish",!1)},2e3);t.src=i,t.onCanplay(()=>{let o=t.duration;clearTimeout(n),f("info","at pages/chat/coms/msg-bar-audio.vue:258","-----> \u5B8C\u6210\u5F55\u5236 \u65F6\u957F = "+o),t.destroy(),this.recordFinishSend?o<1?this.$emit("onAudioFinish",!1):this.$emit("onAudioFinish",!0,{path:i,duration:Math.round(o)}):(this.audioPath=i,this.audioDuration=Math.round(o),this.initAudioPreview())})}),J.onError(e=>{f("error","at pages/chat/coms/msg-bar-audio.vue:275","----> MsgBarAudio mRecordManager onError "+JSON.stringify(e)),this.$emit("onAudioFinish",!1)}),this.mAudioInner.onEnded(this.audioOnEndedListener),this.mAudioInner.onPlay(this.audioOnPlayListener),this.mAudioInner.onPause(this.audioOnPauseListener)},beforeUnmount(){this.mAudioInner.destroy(),this.recordTimer&&(clearInterval(this.recordTimer),this.isCancel=!0,J.stop()),this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer)}};function Ln(e,t,i,n,o,a){let r=F((0,s.resolveDynamicComponent)("uni-icons"),ut),l=F((0,s.resolveDynamicComponent)("uni-transition"),Ce),c=(0,s.resolveComponent)("CustomSlider");return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"msg-bar-audio",style:(0,s.normalizeStyle)({width:`${o.screenW}px`}),renderWhole:!0},[o.showDoing?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"msg-bar-audio-content",style:(0,s.normalizeStyle)({background:a.viewBg})},[(0,s.createElementVNode)("view",{class:"view-middle",style:(0,s.normalizeStyle)({width:`${o.cancelW}px`})},[o.isLock?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,onClick:t[0]||(t[0]=(...d)=>a.clickCancel&&a.clickCancel(...d)),style:{"font-size":"34rpx","font-weight":"600"}},"Cancel")):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,class:"view-scroll-cancel"},[(0,s.createElementVNode)("u-text",{style:{"font-size":"28rpx","margin-right":"2rpx"}},"Swipe left to cancel"),(0,s.createVNode)(r,{type:"left",size:"30rpx",color:"#333333"})]))],4),(0,s.createElementVNode)("view",{class:"view-doing"},[(0,s.createVNode)(l,{ref:"animPoint",show:!0},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("u-image",{src:"/static/audio_point.png",style:{width:"54rpx",height:"54rpx"}})]),_:1},512),(0,s.createElementVNode)("u-text",{style:{width:"80rpx","text-align":"center","font-size":"28rpx"}},(0,s.toDisplayString)(a.durationStr),1)]),(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)({marginRight:`${o.touchRightX}px`}),class:"view-record-btn"},[(0,s.createVNode)(l,{ref:"animBtn",show:!0,style:{"background-image":"linear-gradient(to bottom, #FF0DAD, #FF4B63)",width:"80rpx",height:"80rpx","border-radius":"40rpx"}},null,512),(0,s.createElementVNode)("u-image",{src:"/static/i_audio_s_1.png",style:{width:"100rpx",height:"100rpx",position:"absolute",top:"0rpx",right:"10rpx"}})],4)],4)):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,class:"msg-bar-audio-content",style:(0,s.normalizeStyle)({background:a.viewBg})},[(0,s.createVNode)(r,{onClick:a.clickDel,type:"trash",size:"52rpx",color:"#FF3232",style:{padding:"10rpx 20rpx 10rpx 30rpx"}},null,8,["onClick"]),(0,s.createElementVNode)("view",{class:"view-preview-middle",style:(0,s.normalizeStyle)({background:a.viewMiddleBg})},[(0,s.createElementVNode)("view",{style:{padding:"0rpx 10rpx"}},[(0,s.createElementVNode)("u-image",{onClick:t[1]||(t[1]=(...d)=>a.clickPlay&&a.clickPlay(...d)),src:o.audioPlayerIcon,style:{width:"56rpx",height:"56rpx"}},null,8,["src"])]),(0,s.createVNode)(c,{ref:"audioSlider",style:{flex:"1",height:"24rpx"},"max-value":o.audioSliderValue,"fill-value":100,"active-color":a.sliderActColor,"inactive-color":a.sliderBgColor,"dis-click":!0,blockColor:a.sliderActColor,onOnChangeStart:a.onSliderChangeStart,onOnChanged:a.onSliderChanged},null,8,["max-value","active-color","inactive-color","blockColor","onOnChangeStart","onOnChanged"]),(0,s.createElementVNode)("u-text",{style:{"font-size":"28rpx","margin-right":"12rpx","margin-left":"12rpx"}},(0,s.toDisplayString)(a.playDurationStr),1)],4),(0,s.createElementVNode)("view",{class:"l-img",style:{padding:"0px 20rpx"}},[(0,s.createElementVNode)("u-image",{onClick:t[2]||(t[2]=(...d)=>a.clickSend&&a.clickSend(...d)),src:"/static/send_red.png",style:{width:"52rpx",height:"52rpx"}})])],4)),(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)([{background:"#FFFFFF"},{height:`${a.getSafeBottom}px`,background:a.viewBg}])},null,4)],4)}var Pn=x(In,[["render",Ln],["styles",[Tn]]]),Dn={"msg-bar":{"":{position:"relative"}},center:{"":{alignItems:"center",flexDirection:"row"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"msg-bar-view":{"":{flexDirection:"row",justifyContent:"space-between",paddingTop:"12rpx",paddingRight:0,paddingBottom:"12rpx",paddingLeft:0}},img:{".msg-bar-view ":{paddingTop:"14rpx",paddingRight:"10rpx",paddingBottom:"14rpx",paddingLeft:"10rpx"}},"view-camera":{".msg-bar-view ":{width:"80rpx",height:"80rpx",borderRadius:"40rpx"}},"img-send":{".msg-bar-view ":{paddingTop:"12rpx",paddingRight:"30rpx",paddingBottom:"12rpx",paddingLeft:"10rpx"}},"msg-bar-middle":{"":{flex:1,position:"relative",borderRadius:"40rpx",paddingTop:"20rpx",paddingRight:"82rpx",paddingBottom:"10rpx",paddingLeft:"26rpx"}},"input-bar":{".msg-bar-middle ":{lineHeight:50,fontSize:14,flex:1}},expression:{".msg-bar-middle ":{position:"absolute",right:"20rpx",top:"12rpx"}},"audio-tip":{"":{borderRadius:"8rpx",lineHeight:"28rpx",paddingTop:"14rpx",paddingRight:"10rpx",paddingBottom:"14rpx",paddingLeft:"16rpx"}},tip:{".audio-tip ":{color:"#FFFFFF",fontSize:"20rpx",marginRight:"10rpx"}}},Mn=W("dom"),nt=uni.upx2px(172),Fn=uni.upx2px(112),ot=uni.upx2px(90),ye=getApp().globalData.window,Rn={emits:["onSend","onRecordFinish","onInputLineChange","onChoosePicture"],components:{ActionSheet:rn,CustomPopover:hn,MsgBarAudioLock:bn,MsgBarAudio:Pn},props:{hideVoice:{type:Boolean,default:!1},onlyVoice:{type:Boolean,default:!1}},data(){return{isAndroid:g.isAndroid,width:getApp().globalData.window.width,safeBottom:0,cursorSpacing:uni.upx2px(36),text:"",inputColor:"#333333",isKeyboardOpen:!1,sendWidth:0,inputAdjustPosition:!0,placeholderStyle:"color: rgba(153,153,153,0.5)",msgBarActionHeight:0,showSend:!1,audioShow:!1,audioLockShow:!1,audioLockBottom:uni.upx2px(104)+ye.safeBottom,isAudioLock:!1,audioTouchTime:0,audioTipSize:{},audioBarShowTimer:!1,micWidth:this.hideVoice?ot:nt,moreActions:[{icon:"s/msg/i_album.png",title:"Send photo",key:"send_photo"},{icon:"s/msg/i_album_video.png",title:"Send video",key:"send_video"}],cameraActions:[{icon:"s/msg/i_camera_photo.png",title:"Take photo",key:"take_photo"},{icon:"s/msg/i_camera_video.png",title:"Take video",key:"take_video"}]}},computed:{viewBarBg(){return"#F9FAFD"},viewBarMiddleStyle(){let e={},t=1,i="#EEEEEE";return e.background="rgba(255, 255, 255, "+t+")",e.border="2rpx solid "+i,e},viewCameraStyle(){let e={},t=1,i="#EEEEEE";return e.background="rgba(255, 255, 255, "+t+")",e.border="2rpx solid "+i,e}},methods:{clickBarCamera(){this.isKeyboardOpen&&uni.hideKeyboard(),this.$refs.popCamera.open()},clickAudioTipClose(){this.hasShowAudioTip&&(this.hasShowAudioTip=!1,this.$refs.audioTipPop.close())},clickSend(e){e&&e.stopPropagation(),this.handleSend()},clickBarAlbum(){this.isKeyboardOpen&&uni.hideKeyboard(),this.$refs.popAlbum.open()},onClickOther(){this.clickAudioTipClose()},onInputChange(e){this.text&&this.showSend||(this.text?(this.micWidth=0,this.sendWidth=Fn,this.showSend=!0):(this.showSend=!1,this.micWidth=this.hideVoice?ot:nt,this.sendWidth=0))},onBarAudioAnimChange(e){!e||!e.detail||this.$refs.barAudio.startRecord()},onClickActionItem(e){switch(f("log","at pages/chat/coms/msg-bar.vue:187","item====item",e),e.key){case"send_photo":this.chooseImage(1,9);break;case"send_video":this.chooseVideo(1);break;case"take_photo":this.chooseImage(2,1);break;case"take_video":this.chooseVideo(2);break}},hide(){this.isKeyboardOpen&&uni.hideKeyboard()},onLineChange(e){e&&e.detail&&e.detail.height&&this.$emit("onInputLineChange",e.detail.height,e.detail.lineCount)},onKeyboardChange(e){e.height>0?this.isKeyboardOpen=!0:(this.isKeyboardOpen=!1,this.needOpenAction&&(this.needOpenAction=!1),this.$refs.input.blur())},onBarAudioLock(){this.isAudioLock=!0,this.$refs.barAudio.changeAudioLock()},onBarAudioLockStop(){this.audioLockShow=!1,this.$refs.barAudio.changeAudioStop()},onBarAudioFinish(e,t){this.onBarAudioCancel(),e&&this.$emit("onRecordFinish",t)},chooseImage(e,t){Ye(e,t).then(i=>{let n=i.tempFilePaths;for(let o=0,a=n.length;o<a;o++){let r=n[o];uni.getImageInfo({src:r,success:l=>{let c={path:l.path,width:l.width,height:l.height};this.$emit("onChoosePicture",0,c)}})}})},chooseVideo(e){Ze(e,!0).then(t=>{let i={path:t.tempFilePath,coverPath:t.coverPath,cover:t.coverPath,width:t.width,height:t.height,duration:parseInt(t.duration)||0};f("log","at pages/chat/coms/msg-bar.vue:258","params",i),this.$emit("onChoosePicture",1,i)})},handleSend(){if(this.text==null||this.text=="")return;this.text.trim()==""&&uni.showModal({title:"Tips",content:"Unable to send blank message.",showCancel:!1,cancelText:"",confirmText:"Got it",editable:!1,success(t){t.confirm}}),this.$emit("onSend",this.text),this.text="",this.onInputChange()},onAudioTouch(){if(this.isKeyboardOpen){uni.hideKeyboard();return}if(!Ne(w.MICROPHONE)){Y(w.MICROPHONE);return}this.isAudioLock=!1,this.audioTouchTime=new Date().getTime(),this.audioBarShowTimer=setTimeout(()=>{uni.vibrateShort({}),this.audioShow=!0,this.audioLockShow=!0},400)},onAudioTouchMove(e){let t=this.$refs.barAudio;if(t){let n=e.changedTouches[0].screenX.toFixed(2);t.onTouchMoveLeft(n)}let i=this.$refs.audioLock;if(i){let n=e.changedTouches[0].screenY.toFixed(2);i.onTouchMoveUp(n)}},onAudioTouchEnd(){this.endAudioTouch(!0)},onAudioTouchCancel(){this.endAudioTouch(!1)},showAudioTip(){this.hasShowAudioTip||Mn.getComponentRect(this.$refs.audio,e=>{e&&e.size&&(this.audioTipSize=e.size,this.hasShowAudioTip=!0,this.$refs.audioTipPop.open())})},onBarAudioCancel(){this.audioShow=!1,this.audioLockShow=!1},endAudioTouch(e){if(this.isAudioLock)return;if(new Date().getTime()-this.audioTouchTime<600){this.showAudioTip(),clearTimeout(this.audioBarShowTimer),this.audioShow=!1,this.audioLockShow=!1,this.audioBarShowTimer=!1,this.$refs.barAudio&&this.$refs.barAudio.stopRecord(!1);return}this.$refs.barAudio?this.$refs.barAudio.stopRecord(e):this.onBarAudioCancel()}},created(){this.onlyVoice||(this.safeBottom=ye.safeBottom),this.safeBottom=ye.safeBottom,uni.onKeyboardHeightChange(this.onKeyboardChange)},unmounted(){uni.offKeyboardHeightChange(this.onKeyboardChange)}};function Bn(e,t,i,n,o,a){let r=(0,s.resolveComponent)("action-sheet"),l=(0,s.resolveComponent)("MsgBarAudio"),c=F((0,s.resolveDynamicComponent)("uni-transition"),Ce),d=(0,s.resolveComponent)("MsgBarAudioLock"),h=(0,s.resolveComponent)("custom-popover");return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"msg-bar",style:(0,s.normalizeStyle)({width:`${o.width}px`}),renderWhole:!0},[(0,s.renderSlot)(e.$slots,"default"),(0,s.createElementVNode)("view",{class:"msg-bar-view",style:(0,s.normalizeStyle)({background:a.viewBarBg})},[(0,s.createElementVNode)("view",{style:{padding:"0 12rpx"}},[(0,s.createElementVNode)("view",{class:"center-align view-camera",style:(0,s.normalizeStyle)(a.viewCameraStyle)},[(0,s.createElementVNode)("u-image",{onClick:t[0]||(t[0]=(...u)=>a.clickBarCamera&&a.clickBarCamera(...u)),src:"/static/bar_new_camera.png",style:{width:"52rpx",height:"52rpx"}})],4)]),(0,s.createElementVNode)("view",{class:"msg-bar-middle",style:(0,s.normalizeStyle)(a.viewBarMiddleStyle)},[(0,s.createElementVNode)("u-textarea",{ref:"input",modelValue:o.text,onInput:[t[1]||(t[1]=u=>o.text=u.detail.value),t[3]||(t[3]=(...u)=>a.onInputChange&&a.onInputChange(...u))],adjustPosition:o.inputAdjustPosition,cursorSpacing:o.cursorSpacing,autoHeight:!0,maxlength:-1,showConfirmBar:!1,disableDefaultPadding:!0,onLinechange:t[2]||(t[2]=(...u)=>a.onLineChange&&a.onLineChange(...u)),style:(0,s.normalizeStyle)({color:this.inputColor}),placeholderStyle:o.placeholderStyle,placeholder:"Message...",class:"input-bar"},null,44,["modelValue","adjustPosition","cursorSpacing","placeholderStyle"])],4),(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)({width:`${o.sendWidth}px`})},[o.isAndroid||o.showSend?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,onClick:t[5]||(t[5]=(...u)=>a.clickSend&&a.clickSend(...u)),class:"img-send"},[(0,s.createElementVNode)("u-image",{onClick:t[4]||(t[4]=(...u)=>a.clickSend&&a.clickSend(...u)),src:"/static/send_red.png",style:{width:"56rpx",height:"56rpx"}})])):(0,s.createCommentVNode)("",!0)],4),(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)({width:`${o.micWidth}px`})},[(0,s.createElementVNode)("view",{class:"center"},[(0,s.createElementVNode)("view",{class:"center img",style:{"margin-left":"14rpx"}},[(0,s.createElementVNode)("u-image",{onClick:t[6]||(t[6]=(...u)=>a.clickBarAlbum&&a.clickBarAlbum(...u)),src:"/static/bar_new_album.png",style:{width:"52rpx",height:"52rpx"}})]),i.hideVoice?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,onTouchstart:t[7]||(t[7]=(...u)=>a.onAudioTouch&&a.onAudioTouch(...u)),onTouchmove:t[8]||(t[8]=(0,s.withModifiers)((...u)=>a.onAudioTouchMove&&a.onAudioTouchMove(...u),["stop","prevent"])),onTouchend:t[9]||(t[9]=(...u)=>a.onAudioTouchEnd&&a.onAudioTouchEnd(...u)),onTouchcancel:t[10]||(t[10]=(...u)=>a.onAudioTouchCancel&&a.onAudioTouchCancel(...u)),class:"img"},[(0,s.createElementVNode)("u-image",{ref:"audio",src:"/static/bar_new_microphone.png",style:{width:"52rpx",height:"52rpx"}},null,512)],32))])],4)],4),(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)({height:o.safeBottom+"px",background:a.viewBarBg})},null,4),(0,s.createVNode)(r,{ref:"popCamera",onOnClickActionItem:a.onClickActionItem,actions:o.cameraActions},null,8,["onOnClickActionItem","actions"]),(0,s.createVNode)(r,{ref:"popAlbum",onOnClickActionItem:a.onClickActionItem,actions:o.moreActions},null,8,["onOnClickActionItem","actions"]),(0,s.createVNode)(c,{show:o.audioShow,"mode-class":"slide-right",onChange:a.onBarAudioAnimChange,duration:300,style:{position:"absolute",bottom:"0"}},{default:(0,s.withCtx)(()=>[(0,s.createVNode)(l,{ref:"barAudio",onlyVoice:i.onlyVoice,onOnAudioCancel:a.onBarAudioCancel,onOnAudioFinish:a.onBarAudioFinish},null,8,["onlyVoice","onOnAudioCancel","onOnAudioFinish"])]),_:1},8,["show","onChange"]),(0,s.createVNode)(c,{show:o.audioLockShow,style:(0,s.normalizeStyle)([{bottom:`${o.audioLockBottom}px`},{position:"fixed",right:"20rpx"}]),"mode-class":"slide-bottom",duration:300},{default:(0,s.withCtx)(()=>[(0,s.createVNode)(d,{ref:"audioLock",onOnBarAudioLock:a.onBarAudioLock,onOnBarAudioLockStop:a.onBarAudioLockStop},null,8,["onOnBarAudioLock","onOnBarAudioLockStop"])]),_:1},8,["show","style"]),(0,s.createVNode)(h,{ref:"audioTipPop",size:o.audioTipSize,"bg-color":"#6A607C","min-margin":"10",onOnClickOther:a.onClickOther},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"center audio-tip"},[(0,s.createElementVNode)("u-text",{class:"tip"},"Hold to talk, Release to send"),(0,s.createElementVNode)("u-image",{onClick:t[11]||(t[11]=(...u)=>a.clickAudioTipClose&&a.clickAudioTipClose(...u)),style:{height:"28rpx",width:"28rpx"},src:"/static/close_white.png"})])]),_:1},8,["size","onOnClickOther"])],4)}var On=x(Rn,[["render",Bn],["styles",[Dn]]]),En={components:{MsgBase:Q},mixins:[q],props:{data:{type:Object,default(){return{}}}},computed:{getWH(){let e=this.data;return ce(e.image_width,e.image_height,200)},border(){return"1px solid #EEEEEE"}},data(){return{src:""}},methods:{clickPicture(e){this.checkStopClick(e)||this.$emit("clickPicture",this.data)},parseSrc(){let e;e=0;let t=this.data.msg_content&&this.data.msg_content.small_url;if(t.startsWith("s/")){let i=getApp().getAppFilePath(t,e);if(!_(i))return i}return t.startsWith("file://")?t:t.startsWith("/var/mobile/")?"file://"+t:t.startsWith("/storage/")?t:getApp().globalData.ossPicPath+"/"+t}},created(){f("log","at pages/chat/coms/msg-picture.vue:67","data-piic",this.data),this.src=this.parseSrc(),f("log","at pages/chat/coms/msg-picture.vue:69","data-src",this.src)}};function Vn(e,t,i,n,o,a){let r=(0,s.resolveComponent)("msg-base");return(0,s.openBlock)(),(0,s.createBlock)(r,{ref:"msgBase",data:i.data},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("u-image",{mode:"aspectFill",onClick:t[0]||(t[0]=(...l)=>a.clickPicture&&a.clickPicture(...l)),src:o.src,style:(0,s.normalizeStyle)({width:`${a.getWH[0]}px`,height:`${a.getWH[1]}px`,border:a.border})},null,12,["src"])]),_:1},8,["data"])}var Nn=x(En,[["render",Vn]]),Hn={"msg-video":{"":{position:"relative",alignItems:"center",justifyContent:"center"}},"video-duration":{"":{color:"#FFFFFF",position:"absolute",bottom:0,right:0,paddingTop:"10rpx",paddingRight:"10rpx",paddingBottom:"10rpx",paddingLeft:"10rpx",fontSize:"24rpx"}}},Wn={components:{MsgBase:Q},mixins:[q],emits:["clickVideo"],props:{data:{type:Object,default(){return{}}}},data(){return{}},computed:{getWH(){let e=this.data.msg_content;return ce(e.width,e.height,200)},getDuration(){return U(Math.round(this.data.msg_content.duration))}},methods:{clickVideo(e){this.checkStopClick(e)||(e.stopPropagation(),this.$emit("clickVideo",this.data))},parseSrc(e){let t;if(t=0,e.startsWith("s/")){let i=getApp().getAppFilePath(e,t);if(!_(i))return i}return e.startsWith("file://")?e:e.startsWith("/var/mobile/")?"file://"+e:e.startsWith("/storage/")?e:getApp().globalData.ossPicPath+"/"+e}},created(){f("log","at pages/chat/coms/msg-video.vue:66","data",this.data)}};function jn(e,t,i,n,o,a){let r=(0,s.resolveComponent)("msg-base");return(0,s.openBlock)(),(0,s.createBlock)(r,{ref:"msgBase",data:i.data},{default:(0,s.withCtx)(()=>[i.data.msg_content&&i.data.msg_content.cover?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,onClick:t[2]||(t[2]=(...l)=>a.clickVideo&&a.clickVideo(...l)),class:"msg-video",style:(0,s.normalizeStyle)({width:a.getWH[0]+"px",height:a.getWH[1]+"px"})},[(0,s.createElementVNode)("u-image",{onClick:t[0]||(t[0]=(...l)=>a.clickVideo&&a.clickVideo(...l)),src:a.parseSrc(i.data.msg_content.cover),style:(0,s.normalizeStyle)({width:a.getWH[0]+"px",height:a.getWH[1]+"px",borderRadius:"16rpx",border:"1px solid #EEEEEE"})},null,12,["src"]),(0,s.createElementVNode)("u-image",{onClick:t[1]||(t[1]=(...l)=>a.clickVideo&&a.clickVideo(...l)),src:a.parseSrc("s/pub/play_video.png"),style:{width:"56rpx",height:"56rpx",position:"absolute"}},null,8,["src"]),(0,s.createElementVNode)("u-text",{class:"video-duration"},(0,s.toDisplayString)(a.getDuration),1)],4)):(0,s.createCommentVNode)("",!0)]),_:1},8,["data"])}var zn=x(Wn,[["render",jn],["styles",[Hn]]]),Un={"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"send-voice":{"":{borderTopLeftRadius:"8rpx",borderTopRightRadius:0,borderBottomRightRadius:"8rpx",borderBottomLeftRadius:"8rpx"}},"receive-voice":{"":{borderTopLeftRadius:0,borderTopRightRadius:"8rpx",borderBottomRightRadius:"8rpx",borderBottomLeftRadius:"8rpx"}},"view-voice":{"":{alignItems:"center",flexDirection:"row"}},"view-content":{"":{alignItems:"center",flexDirection:"row",width:"400rpx",height:"76rpx"}},"text-duration":{"":{paddingTop:0,paddingRight:"24rpx",paddingBottom:0,paddingLeft:"26rpx",textAlign:"center",fontSize:"28rpx",lineHeight:"40rpx"}}},Jn={mixins:[q],components:{MsgBase:Q,CustomSlider:ht},emits:["clickMsgVoice","onMsgVoiceChange"],props:{data:{type:Object,default(){return{}}}},data(){return{iconPlay:"/static/audio_msg_play.png",sliderValue:0,curDuration:this.data.msg_content.voice_duration,sliderH:uni.upx2px(24)}},computed:{durationStr(){return this.curDuration<=0?"00:00":U(this.curDuration)},sliderActColor(){return"#333333"},sliderBgColor(){return"rgba(0, 0, 0, 0.1)"},viewBg(){return this.data.isSend?"#E1FFC3":"#FFFFFF"}},methods:{clickVoice(e){e&&e.stopPropagation(),de(()=>{if(this.checkStopClick(e))return;f("log","at pages/chat/coms/msg-voice.vue:65","\u70B9\u51FB\u64AD\u653E\u8BED\u97F3 clickVoice \u6267\u884C ----> ");let t=this.data.msg_content;this.$emit("clickMsgVoice",this.data,this.curDuration==t.voice_duration?0:this.curDuration)},500,"msg-voice-click")},changeDuration(e,t){let i=this.data.msg_content;e==-1&&(e=i.voice_duration),this.curDuration=e,this.sliderValue=parseInt(t/i.voice_duration)},changeIcon(e){this.iconPlay=`/static/audio_msg_${e?"pause":"play"}.png`},onSliderChangeStart(){this.$emit("onMsgVoiceChange",!1,this.curDuration,this.data)},onSliderChanged(e){let t=e/100,i=this.data.msg_content;this.curDuration=Math.round(i.voice_duration*t),this.$emit("onMsgVoiceChange",!0,this.curDuration,this.data)}}};function Gn(e,t,i,n,o,a){let r=(0,s.resolveComponent)("custom-slider"),l=(0,s.resolveComponent)("msg-base");return(0,s.openBlock)(),(0,s.createBlock)(l,{ref:"msgBase",data:i.data},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"view-voice",onClick:t[2]||(t[2]=(...c)=>a.clickVoice&&a.clickVoice(...c))},[(0,s.createElementVNode)("view",{class:(0,s.normalizeClass)(["view-content",[i.data.isSend?"send-voice":"receive-voice"]]),style:(0,s.normalizeStyle)({background:a.viewBg})},[(0,s.createElementVNode)("view",{onClick:t[1]||(t[1]=(...c)=>a.clickVoice&&a.clickVoice(...c)),class:"center-align",style:{width:"66rpx",height:"68rpx"}},[(0,s.createElementVNode)("u-image",{onClick:t[0]||(t[0]=(...c)=>a.clickVoice&&a.clickVoice(...c)),src:o.iconPlay,style:{width:"26rpx",height:"26rpx"}},null,8,["src"])]),(0,s.createVNode)(r,{ref:"audioSlider",style:(0,s.normalizeStyle)([{flex:"1"},{height:`${o.sliderH}px`}]),"max-value":o.sliderValue,"fill-value":100,"active-color":a.sliderActColor,"inactive-color":a.sliderBgColor,"dis-click":!0,blockColor:a.sliderActColor,"line-height":4,onOnChangeStart:a.onSliderChangeStart,onOnChanged:a.onSliderChanged},null,8,["style","max-value","active-color","inactive-color","blockColor","onOnChangeStart","onOnChanged"]),(0,s.createElementVNode)("u-text",{style:{padding:"0 24rpx 0 26rpx","text-align":"center","font-size":"28rpx","line-height":"40rpx"}},(0,s.toDisplayString)(a.durationStr),1)],6)])]),_:1},8,["data"])}var Yn=x(Jn,[["render",Gn],["styles",[Un]]]),Zn={"view-scroll":{"":{flexDirection:"row",height:"84rpx"}},"place-item":{"":{width:"20rpx",height:"2rpx"}},"call-item":{"":{alignItems:"center",flexDirection:"row",marginRight:"16rpx",borderRadius:"8rpx",paddingTop:0,paddingRight:"16rpx",paddingBottom:0,paddingLeft:"16rpx",height:"68rpx",backgroundColor:"#FFFFFF"}},"text-title":{"":{color:"#333333",fontSize:"30rpx",marginLeft:"8rpx"}}},Xn={emits:["clickCallVideo"],props:{showCallVideo:{type:Boolean,default:!1}},data(){return{sW:getApp().globalData.window.width}},methods:{clickCallVideo(){this.$emit("clickCallVideo")}}};function Kn(e,t,i,n,o,a){return(0,s.openBlock)(),(0,s.createElementBlock)("scroll-view",{scrollX:"true",class:"view-scroll",showScrollbar:!1,style:(0,s.normalizeStyle)({width:`${o.sW}px`}),renderWhole:!0},[(0,s.createElementVNode)("view",{class:"place-item"}),i.showCallVideo?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...r)=>a.clickCallVideo&&a.clickCallVideo(...r)),class:"call-item"},[(0,s.createElementVNode)("u-image",{src:"/static/bar_a_video_2.png",style:{width:"30rpx",height:"30rpx"}}),(0,s.createElementVNode)("u-text",{style:{"font-size":"30rpx","margin-left":"8rpx"}},"Video chat")])):(0,s.createCommentVNode)("",!0)],4)}var $n=x(Xn,[["render",Kn],["styles",[Zn]]]),Qn={data(){return{playTimer:!1,isPlayingByTouch:!1,mAudioInner:uni.createInnerAudioContext(),mLastPlayCTime:0}},methods:{clickMsgVoice(e,t){let i=this.$refs[`msg${e.mtime}`][0],n=e.msg_content;if(!i)return;if(typeof this.mAudioInner.paused!="undefined"&&!this.mAudioInner.paused&&(this.mAudioInner.stop(),this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.mLastPlayCTime==e.mtime)){this.mLastPlayCTime=0;return}this.mAudioInner.src=ze(n.voice_url),this.mAudioInner.startTime=t,this.mLastPlayCTime=e.mtime,this.mAudioInner.play(),this.handlePlayTimer(e.mtime),i.changeIcon(!0)},onMsgVoiceChange(e,t,i){if(!e){this.scrollable=!1,!this.mAudioInner.paused&&i.mtime==this.mLastPlayCTime?(this.isPlayingByTouch=!0,this.mAudioInner.pause(),this.playTimer&&clearInterval(this.playTimer)):this.isPlayingByTouch=!1;return}this.scrollable=!0,this.isPlayingByTouch&&(this.mAudioInner.seek(t),this.mAudioInner.play(),this.handlePlayTimer(i.mtime))},handlePlayTimer(e){let t=this.$refs[`msg${e}`][0];this.playTimer&&clearInterval(this.playTimer),this.playTimer=setInterval(()=>{if(this.mAudioInner.paused)return;let i=this.mAudioInner.currentTime,n=Math.round(i*100);isNaN(n)||t.changeDuration(Math.round(i),n)},100)},initAudio(){this.mAudioInner.onEnded(()=>{this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.$refs[`msg${this.mLastPlayCTime}`][0].changeDuration(-1,0),this.mLastPlayCTime=0}),this.mAudioInner.onError(e=>{this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.mLastPlayCTime=0})}},onLoad(){this.initAudio()},onUnload(){this.mAudioInner.destroy(),this.playTimer&&clearInterval(this.playTimer)}},qn={"list-rotate":{"":{transform:"rotate(180deg)"}},"msg-def":{"":{opacity:1,transitionProperty:"opacity",transitionDuration:500,transitionTimingFunction:"ease-out"}},"center-align":{"":{alignItems:"center",justifyContent:"center",flexDirection:"row"}},"loading-more":{"":{flex:1,alignItems:"center",justifyContent:"center",flexDirection:"row",height:40}},"@TRANSITION":{"msg-def":{property:"opacity",duration:500,timingFunction:"ease-out"}}},eo={mixins:[Hi,Qn],components:{MsgText:Yi,MsgBar:On,MsgPicture:Nn,MsgVideo:zn,MsgVoice:Yn,MsgBarScroll:$n}};function to(e,t,i,n,o,a){let r=(0,s.resolveComponent)("msg-text"),l=(0,s.resolveComponent)("msg-picture"),c=(0,s.resolveComponent)("msg-video"),d=(0,s.resolveComponent)("msg-voice"),h=F((0,s.resolveDynamicComponent)("uni-load-more"),at),u=(0,s.resolveComponent)("msg-bar-scroll"),p=(0,s.resolveComponent)("msg-bar");return(0,s.openBlock)(),(0,s.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)([{height:`${e.viewHeight}px`},{"background-color":"#F1F3F6"}])},[(0,s.createElementVNode)("list",{ref:"msgList",class:(0,s.normalizeClass)(["msg-list",[e.classRotate]]),showScrollbar:!1,loadmoreoffset:20,offsetAccuracy:10,onLoadmore:t[0]||(t[0]=(...m)=>e.onLoadMore&&e.onLoadMore(...m))},[(0,s.createElementVNode)("cell",{ref:"cellLast",style:(0,s.normalizeStyle)({width:`${e.sw}px`,height:`${e.itemHeightFirst}px`})},null,4),(0,s.createElementVNode)("cell",null,[(0,s.createElementVNode)("list",{showScrollbar:!1,scrollable:!1,class:(0,s.normalizeClass)([e.classRotate])},[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(e.addList,(m,y)=>((0,s.openBlock)(),(0,s.createElementBlock)("cell",{key:`key${y}`,ref_for:!0,ref:`cell${m.mtime}`,class:"msg-def",style:{"padding-bottom":"28rpx"}},[m.msg_type==1e3?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,style:{"font-size":"24rpx","text-align":"center"}},(0,s.toDisplayString)(m.showTime),1)):m.msg_type==1?((0,s.openBlock)(),(0,s.createBlock)(r,{key:1,ref_for:!0,ref:"msg"+m.mtime,data:m},null,8,["data"])):m.msg_type==3?((0,s.openBlock)(),(0,s.createBlock)(l,{key:2,ref_for:!0,ref:"msg"+m.mtime,data:m,onClickPicture:e.clickPicture},null,8,["data","onClickPicture"])):m.msg_type==4?((0,s.openBlock)(),(0,s.createBlock)(c,{key:3,ref_for:!0,ref:"msg"+m.mtime,data:m,index:y,onClickVideo:e.clickPicture},null,8,["data","index","onClickVideo"])):m.msg_type==2?((0,s.openBlock)(),(0,s.createBlock)(d,{key:4,ref_for:!0,ref:"msg"+m.mtime,data:m,index:y,onClickMsgVoice:e.clickMsgVoice,onOnMsgVoiceChange:e.onMsgVoiceChange},null,8,["data","index","onClickMsgVoice","onOnMsgVoiceChange"])):(0,s.createCommentVNode)("",!0)]))),128))],2)]),((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(e.historyList,(m,y)=>((0,s.openBlock)(),(0,s.createElementBlock)("cell",{key:"cell"+m.ctime,ref_for:!0,ref:"cell"+m.mtime,style:{"padding-bottom":"28rpx"},class:(0,s.normalizeClass)(["msg-def",[e.classRotate]])},[m.msg_type==1e3?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,style:{"font-size":"24rpx","text-align":"center"}},(0,s.toDisplayString)(m.showTime),1)):m.msg_type==1?((0,s.openBlock)(),(0,s.createBlock)(r,{key:1,ref_for:!0,ref:"msg"+m.mtime,data:m},null,8,["data"])):m.msg_type==3?((0,s.openBlock)(),(0,s.createBlock)(l,{key:2,ref_for:!0,ref:"msg"+m.mtime,data:m,index:y,onClickPicture:e.clickPicture},null,8,["data","index","onClickPicture"])):m.msg_type==4?((0,s.openBlock)(),(0,s.createBlock)(c,{key:3,ref_for:!0,ref:"msg"+m.mtime,data:m,index:y,onClickVideo:e.clickPicture},null,8,["data","index","onClickVideo"])):m.msg_type==2?((0,s.openBlock)(),(0,s.createBlock)(d,{key:4,ref_for:!0,ref:"msg"+m.mtime,data:m,index:y,onClickMsgVoice:e.clickMsgVoice,onOnMsgVoiceChange:e.onMsgVoiceChange},null,8,["data","index","onClickMsgVoice","onOnMsgVoiceChange"])):(0,s.createCommentVNode)("",!0)],2))),128)),(0,s.createElementVNode)("cell",{style:(0,s.normalizeStyle)({width:`${e.sw}px`,height:`${e.changeHBottom}px`})},null,4),(0,s.createElementVNode)("cell",{ref:"cellNew",style:(0,s.normalizeStyle)({width:`${e.sw}px`,height:`${e.itemHeightLast}px`})},null,4),e.msgHasMore?((0,s.openBlock)(),(0,s.createElementBlock)("cell",{key:0},[(0,s.createElementVNode)("view",{class:(0,s.normalizeClass)(["center-align loading-more",[e.classRotate]])},[(0,s.createVNode)(h,{style:{height:"30px"},showText:!1,status:"loading",iconSize:14,color:"#333333"})],2)])):(0,s.createCommentVNode)("",!0)],34),(0,s.createVNode)(p,{ref:"msgBar",onOnSend:e.onSend,onOnRecordFinish:e.onRecordFinish,onOnChoosePicture:e.onChoosePicture,onOnInputLineChange:e.onInputLineChange},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{ref:"refBarSlot",style:(0,s.normalizeStyle)({height:`${e.barSlotHeight}px`})},[(0,s.createVNode)(u,{showCallVideo:!0,onClickCallVideo:e.clickCall},null,8,["onClickCallVideo"])],4)]),_:1},8,["onOnSend","onOnRecordFinish","onOnChoosePicture","onOnInputLineChange"])],4)])}var ee=x(eo,[["render",to],["styles",[qn]]]);var ke=plus.webview.currentWebview();if(ke){let e=parseInt(ke.id),t="pages/chat/index",i={};try{i=JSON.parse(ke.__query__)}catch(o){}ee.mpType="page";let n=Vue.createPageApp(ee,{$store:getApp({allowDefault:!0}).$store,__pageId:e,__pagePath:t,__pageQuery:i});n.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...ee.styles||[]])),n.mount("#root")}})();
