"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var sn=Object.create;var Ke=Object.defineProperty,rn=Object.defineProperties,on=Object.getOwnPropertyDescriptor,ln=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertyNames,Pt=Object.getOwnPropertySymbols,un=Object.getPrototypeOf,Mt=Object.prototype.hasOwnProperty,dn=Object.prototype.propertyIsEnumerable;var Ot=(e,t,i)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ze=(e,t)=>{for(var i in t||(t={}))Mt.call(t,i)&&Ot(e,i,t[i]);if(Pt)for(var i of Pt(t))dn.call(t,i)&&Ot(e,i,t[i]);return e},Et=(e,t)=>rn(e,ln(t));var fn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var mn=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of cn(t))!Mt.call(e,a)&&a!==i&&Ke(e,a,{get:()=>t[a],enumerable:!(n=on(t,a))||n.enumerable});return e};var Qe=(e,t,i)=>(i=e!=null?sn(un(e)):{},mn(t||!e||!e.__esModule?Ke(i,"default",{value:e,enumerable:!0}):i,e));var ie=(e,t,i)=>new Promise((n,a)=>{var s=c=>{try{l(i.next(c))}catch(u){a(u)}},o=c=>{try{l(i.throw(c))}catch(u){a(u)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(s,o);l((i=i.apply(e,t)).next())});var xe=fn((uo,Ft)=>{Ft.exports=Vue});var r=Qe(xe());var v=Qe(xe()),pn="dev",ti;ti="1b28c2eac0672761";var j={wv:"1.2.6",ENV:pn,kfApiSignValue:ti,zT:1,appId:plus.runtime.appid,appV:parseInt(plus.runtime.version.split(".").join("")),API_HOST_V:1,isAndroid:plus.os.name=="Android",PHOTO:1,VIDEO:2,VOICE:3,TXT:4,SYSTEM_ID:1e7};function gn(e,t,i=!1,n=null){let a=lt(e,i);n?uni.setStorage({key:a,data:t,success:n}):uni.setStorageSync(a,t)}function Ne(e,t=!1,i=null){let n=lt(e,t);if(i)uni.getStorage({key:n,success:i});else return uni.getStorageSync(n)}function hn(e,t=!1){uni.removeStorage({key:lt(e,t)})}function lt(e,t){return t?`_a_${e}`:`m_${e}`}function C(e){return typeof e=="undefined"||e==null||e==""}function yn(e){return e===""||e===null}var te=new Promise(()=>{});function wn(e,t,i=""){if(C(e))return"";let n=[];for(let a in e)n.push(a+"="+e[a]);return i+n.join(t)}function Ie(e){return typeof e=="number"?e+"":typeof e=="boolean"?e?"true":"false":C(e)?"null":typeof e=="object"?JSON.stringify(e):e}function ct(e){try{let t=JSON.parse(e);if(typeof t=="object")return t}catch(t){}return!1}var Xe={};function ut(e,t=500,i="throttle"){let n=e.name;C(n)&&(n=i),!Xe[n]&&(Xe[n]=!0,e(),setTimeout(function(){Xe[n]=""},t))}function _n(e){if(C(e))return"";let t=e.split("/");if(C(t))return"";let i=t[t.length-1];if(C(i))return"";let n=i.split(".");if(C(n))return"";let a=n[n.length-1];return C(a)?"":a.toLowerCase()}function ii(e){if(!e)return"";let t=JSON.stringify(e);return(typeof t!="string"||t=="{}")&&(t=e.toString()),t}function bn(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function dt(){return Math.random().toString(36).substr(2)}function ft(e,t,i=1e4){return e<=0||t<=0?[108,192]:(t>e?(t=t*108/e,t>i&&(t=i),e=108):(t=t*148/e,e=148),[e,t])}function _e(e,t=!1){if(C(e)||e<0||isNaN(e))return t?"00:00:00":"00:00";let i=0,n=0;e>0&&e<10?e="0"+parseInt(e):e<=0?e="00":e>60&&(i=parseInt(e/60)<10?"0"+parseInt(e/60):parseInt(e/60),e=parseInt(e%60)<10?"0"+parseInt(e%60):parseInt(e%60),i>60&&(n=parseInt(i/60)<10?"0"+parseInt(i/60):parseInt(i/60),i=parseInt(i%60)<10?"0"+parseInt(i%60):parseInt(i%60)));let a;return n>0?a=n+":"+i+":"+e:i>0?(a=i+":"+e,t&&(a="00:"+a)):(a="00:"+e,t&&(a="00:"+a)),a}function An(e){return e=parseInt(e),e.toString().length==16?e=Math.round(e/1e3):e<1e10&&(e=e*1e3),e}function mt(e,t,i){return Math.abs(e-t)>i*60*1e3}function Le(e,t){let i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length==1?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t}function ni(e,t=!0,i=!1){if(C(e))return"";e=An(e);let n=new Date,a=new Date(e),s=n.getFullYear(),o=n.getMonth()+1,l=n.getDate(),c=a.getFullYear(),u=a.getMonth()+1,d=a.getDate(),m="",g=t?" "+Le(a,"hh:mm"):"";if(s==c){let y=n.getTime()-e;if(o==u&&l==d)y<60*1e3&&!t?m="Just":m=`Today ${Le(a,"hh:mm")}`;else{let A=new Date;A.setDate(A.getDate()-1);let P=new Date;if(P.setDate(P.getDate()-2),u==A.getMonth()+1&&d==A.getDate())m=`Yesterday ${g}`;else{var _=y/36e5;if(_<=7*24){let T=new Array(7),w=i?"Short":"";T[0]=`Sunday ${w}`,T[1]=`Monday ${w}`,T[2]=`Tuesday ${w}`,T[3]=`Wednesday ${w}`,T[4]=`Thursday ${w}`,T[5]=`Friday ${w}`,T[6]=`Saturday ${w}`;var p=T[a.getDay()];m=p+" "+g}else m=Le(a,"M/d")+g}}}else m=Le(a,"M/d")+g;return m}var kn=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",ae=e=>kn?Symbol(e):e,vn=(e,t,i)=>Sn({l:e,k:t,s:i}),Sn=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),z=e=>typeof e=="number"&&isFinite(e),Cn=e=>pt(e)==="[object Date]",Me=e=>pt(e)==="[object RegExp]",Re=e=>x(e)&&Object.keys(e).length===0;function Tn(e,t){typeof console!="undefined"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}var J=Object.assign;function Nt(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}var xn=Object.prototype.hasOwnProperty;function ai(e,t){return xn.call(e,t)}var H=Array.isArray,$=e=>typeof e=="function",k=e=>typeof e=="string",E=e=>typeof e=="boolean",G=e=>e!==null&&typeof e=="object",si=Object.prototype.toString,pt=e=>si.call(e),x=e=>pt(e)==="[object Object]",In=e=>e==null?"":H(e)||x(e)&&e.toString===si?JSON.stringify(e,null,2):String(e);var Ln=Object.prototype.hasOwnProperty;function Dn(e,t){return Ln.call(e,t)}var Pe=e=>e!==null&&typeof e=="object",se=[];se[0]={w:[0],i:[3,0],["["]:[4],o:[7]};se[1]={w:[1],["."]:[2],["["]:[4],o:[7]};se[2]={w:[2],i:[3,0],[0]:[3,0]};se[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};se[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};se[5]={["'"]:[4,0],o:8,l:[5,0]};se[6]={['"']:[4,0],o:8,l:[6,0]};var Pn=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function On(e){return Pn.test(e)}function Mn(e){let t=e.charCodeAt(0),i=e.charCodeAt(e.length-1);return t===i&&(t===34||t===39)?e.slice(1,-1):e}function En(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Fn(e){let t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:On(t)?Mn(t):"*"+t}function Nn(e){let t=[],i=-1,n=0,a=0,s,o,l,c,u,d,m,g=[];g[0]=()=>{o===void 0?o=l:o+=l},g[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},g[2]=()=>{g[0](),a++},g[3]=()=>{if(a>0)a--,n=4,g[0]();else{if(a=0,o===void 0||(o=Fn(o),o===!1))return!1;g[1]()}};function _(){let p=e[i+1];if(n===5&&p==="'"||n===6&&p==='"')return i++,l="\\"+p,g[0](),!0}for(;n!==null;)if(i++,s=e[i],!(s==="\\"&&_())){if(c=En(s),m=se[n],u=m[c]||m.l||8,u===8||(n=u[0],u[1]!==void 0&&(d=g[u[1]],d&&(l=s,d()===!1))))return;if(n===7)return t}}var Rt=new Map;function Ee(e,t){if(!Pe(e))return null;let i=Rt.get(t);if(i||(i=Nn(t),i&&Rt.set(t,i)),!i)return null;let n=i.length,a=e,s=0;for(;s<n;){let o=a[i[s]];if(o===void 0)return null;a=o,s++}return a}function tt(e){if(!Pe(e))return e;for(let t in e)if(Dn(e,t))if(!t.includes("."))Pe(e[t])&&tt(e[t]);else{let i=t.split("."),n=i.length-1,a=e;for(let s=0;s<n;s++)i[s]in a||(a[i[s]]={}),a=a[i[s]];a[i[n]]=e[t],delete e[t],Pe(a[i[n]])&&tt(a[i[n]])}return e}var Rn=e=>e,Bn=e=>"",Vn="text",Wn=e=>e.length===0?"":e.join(""),Hn=In;function Bt(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function jn(e){let t=z(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(z(e.named.count)||z(e.named.n))?z(e.named.count)?e.named.count:z(e.named.n)?e.named.n:t:t}function Un(e,t){t.count||(t.count=e),t.n||(t.n=e)}function zn(e={}){let t=e.locale,i=jn(e),n=G(e.pluralRules)&&k(t)&&$(e.pluralRules[t])?e.pluralRules[t]:Bt,a=G(e.pluralRules)&&k(t)&&$(e.pluralRules[t])?Bt:void 0,s=y=>y[n(i,y.length,a)],o=e.list||[],l=y=>o[y],c=e.named||{};z(e.pluralIndex)&&Un(i,c);let u=y=>c[y];function d(y){let A=$(e.messages)?e.messages(y):G(e.messages)?e.messages[y]:!1;return A||(e.parent?e.parent.message(y):Bn)}let m=y=>e.modifiers?e.modifiers[y]:Rn,g=x(e.processor)&&$(e.processor.normalize)?e.processor.normalize:Wn,_=x(e.processor)&&$(e.processor.interpolate)?e.processor.interpolate:Hn,p=x(e.processor)&&k(e.processor.type)?e.processor.type:Vn,b={list:l,named:u,plural:s,linked:(y,A)=>{let P=d(y)(b);return k(A)?m(A)(P):P},message:d,type:p,interpolate:_,normalize:g};return b}function ri(e,t,i={}){let{domain:n,messages:a,args:s}=i,o=e,l=new SyntaxError(String(o));return l.code=e,t&&(l.location=t),l.domain=n,l}var $n="9.1.9",Be=-1,Vt="";function Gn(){return{upper:e=>k(e)?e.toUpperCase():e,lower:e=>k(e)?e.toLowerCase():e,capitalize:e=>k(e)?`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`:e}}var Jn,Wt=0;function Yn(e={}){let t=k(e.version)?e.version:$n,i=k(e.locale)?e.locale:"en-US",n=H(e.fallbackLocale)||x(e.fallbackLocale)||k(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:i,a=x(e.messages)?e.messages:{[i]:{}},s=x(e.datetimeFormats)?e.datetimeFormats:{[i]:{}},o=x(e.numberFormats)?e.numberFormats:{[i]:{}},l=J({},e.modifiers||{},Gn()),c=e.pluralRules||{},u=$(e.missing)?e.missing:null,d=E(e.missingWarn)||Me(e.missingWarn)?e.missingWarn:!0,m=E(e.fallbackWarn)||Me(e.fallbackWarn)?e.fallbackWarn:!0,g=!!e.fallbackFormat,_=!!e.unresolving,p=$(e.postTranslation)?e.postTranslation:null,b=x(e.processor)?e.processor:null,y=E(e.warnHtmlMessage)?e.warnHtmlMessage:!0,A=!!e.escapeParameter,P=$(e.messageCompiler)?e.messageCompiler:Jn,T=$(e.onWarn)?e.onWarn:Tn,w=e,I=G(w.__datetimeFormatters)?w.__datetimeFormatters:new Map,Z=G(w.__numberFormatters)?w.__numberFormatters:new Map,re=G(w.__meta)?w.__meta:{};return Wt++,{version:t,cid:Wt,locale:i,fallbackLocale:n,messages:a,datetimeFormats:s,numberFormats:o,modifiers:l,pluralRules:c,missing:u,missingWarn:d,fallbackWarn:m,fallbackFormat:g,unresolving:_,postTranslation:p,processor:b,warnHtmlMessage:y,escapeParameter:A,messageCompiler:P,onWarn:T,__datetimeFormatters:I,__numberFormatters:Z,__meta:re}}function gt(e,t,i,n,a){let{missing:s,onWarn:o}=e;if(s!==null){let l=s(e,i,t,a);return k(l)?l:t}else return t}function be(e,t,i){let n=e;n.__localeChainCache||(n.__localeChainCache=new Map);let a=n.__localeChainCache.get(i);if(!a){a=[];let s=[i];for(;H(s);)s=Ht(a,s,t);let o=H(t)?t:x(t)?t.default?t.default:null:t;s=k(o)?[o]:o,H(s)&&Ht(a,s,!1),n.__localeChainCache.set(i,a)}return a}function Ht(e,t,i){let n=!0;for(let a=0;a<t.length&&E(n);a++){let s=t[a];k(s)&&(n=Kn(e,t[a],i))}return n}function Kn(e,t,i){let n,a=t.split("-");do{let s=a.join("-");n=Zn(e,s,i),a.splice(-1,1)}while(a.length&&n===!0);return n}function Zn(e,t,i){let n=!1;if(!e.includes(t)&&(n=!0,t)){n=t[t.length-1]!=="!";let a=t.replace(/!/g,"");e.push(a),(H(i)||x(i))&&i[a]&&(n=i[a])}return n}function ye(e,t,i){let n=e;n.__localeChainCache=new Map,be(e,i,t)}function ue(e){return ri(e,null,void 0)}var jt=()=>"",le=e=>$(e);function Ut(e,...t){let{fallbackFormat:i,postTranslation:n,unresolving:a,fallbackLocale:s,messages:o}=e,[l,c]=it(...t),u=E(c.missingWarn)?c.missingWarn:e.missingWarn,d=E(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn,m=E(c.escapeParameter)?c.escapeParameter:e.escapeParameter,g=!!c.resolvedMessage,_=k(c.default)||E(c.default)?E(c.default)?l:c.default:i?l:"",p=i||_!=="",b=k(c.locale)?c.locale:e.locale;m&&Qn(c);let[y,A,P]=g?[l,b,o[b]||{}]:Xn(e,l,b,s,d,u),T=l;if(!g&&!(k(y)||le(y))&&p&&(y=_,T=y),!g&&(!(k(y)||le(y))||!k(A)))return a?Be:l;let w=!1,I=()=>{w=!0},Z=le(y)?y:oi(e,l,A,y,T,I);if(w)return y;let re=ta(e,A,P,c),Y=zn(re),Q=qn(e,Z,Y);return n?n(Q):Q}function Qn(e){H(e.list)?e.list=e.list.map(t=>k(t)?Nt(t):t):G(e.named)&&Object.keys(e.named).forEach(t=>{k(e.named[t])&&(e.named[t]=Nt(e.named[t]))})}function Xn(e,t,i,n,a,s){let{messages:o,onWarn:l}=e,c=be(e,n,i),u={},d,m=null,g="translate";for(let _=0;_<c.length&&(d=c[_],u=o[d]||{},(m=Ee(u,t))===null&&(m=u[t]),!(k(m)||$(m)));_++){let p=gt(e,t,d,s,g);p!==t&&(m=p)}return[m,d,u]}function oi(e,t,i,n,a,s){let{messageCompiler:o,warnHtmlMessage:l}=e;if(le(n)){let u=n;return u.locale=u.locale||i,u.key=u.key||t,u}let c=o(n,ea(e,i,a,n,l,s));return c.locale=i,c.key=t,c.source=n,c}function qn(e,t,i){return t(i)}function it(...e){let[t,i,n]=e,a={};if(!k(t)&&!z(t)&&!le(t))throw ue(14);let s=z(t)?String(t):(le(t),t);return z(i)?a.plural=i:k(i)?a.default=i:x(i)&&!Re(i)?a.named=i:H(i)&&(a.list=i),z(n)?a.plural=n:k(n)?a.default=n:x(n)&&J(a,n),[s,a]}function ea(e,t,i,n,a,s){return{warnHtmlMessage:a,onError:o=>{throw s&&s(o),o},onCacheKey:o=>vn(t,i,o)}}function ta(e,t,i,n){let{modifiers:a,pluralRules:s}=e,l={locale:t,modifiers:a,pluralRules:s,messages:c=>{let u=Ee(i,c);if(k(u)){let d=!1,g=oi(e,c,t,u,c,()=>{d=!0});return d?jt:g}else return le(u)?u:jt}};return e.processor&&(l.processor=e.processor),n.list&&(l.list=n.list),n.named&&(l.named=n.named),z(n.plural)&&(l.pluralIndex=n.plural),l}function zt(e,...t){let{datetimeFormats:i,unresolving:n,fallbackLocale:a,onWarn:s}=e,{__datetimeFormatters:o}=e,[l,c,u,d]=nt(...t),m=E(u.missingWarn)?u.missingWarn:e.missingWarn;E(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;let g=!!u.part,_=k(u.locale)?u.locale:e.locale,p=be(e,a,_);if(!k(l)||l==="")return new Intl.DateTimeFormat(_).format(c);let b={},y,A=null,P="datetime format";for(let I=0;I<p.length&&(y=p[I],b=i[y]||{},A=b[l],!x(A));I++)gt(e,l,y,m,P);if(!x(A)||!k(y))return n?Be:l;let T=`${y}__${l}`;Re(d)||(T=`${T}__${JSON.stringify(d)}`);let w=o.get(T);return w||(w=new Intl.DateTimeFormat(y,J({},A,d)),o.set(T,w)),g?w.formatToParts(c):w.format(c)}function nt(...e){let[t,i,n,a]=e,s={},o={},l;if(k(t)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(t))throw ue(16);l=new Date(t);try{l.toISOString()}catch(c){throw ue(16)}}else if(Cn(t)){if(isNaN(t.getTime()))throw ue(15);l=t}else if(z(t))l=t;else throw ue(14);return k(i)?s.key=i:x(i)&&(s=i),k(n)?s.locale=n:x(n)&&(o=n),x(a)&&(o=a),[s.key||"",l,s,o]}function $t(e,t,i){let n=e;for(let a in i){let s=`${t}__${a}`;n.__datetimeFormatters.has(s)&&n.__datetimeFormatters.delete(s)}}function Gt(e,...t){let{numberFormats:i,unresolving:n,fallbackLocale:a,onWarn:s}=e,{__numberFormatters:o}=e,[l,c,u,d]=at(...t),m=E(u.missingWarn)?u.missingWarn:e.missingWarn;E(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;let g=!!u.part,_=k(u.locale)?u.locale:e.locale,p=be(e,a,_);if(!k(l)||l==="")return new Intl.NumberFormat(_).format(c);let b={},y,A=null,P="number format";for(let I=0;I<p.length&&(y=p[I],b=i[y]||{},A=b[l],!x(A));I++)gt(e,l,y,m,P);if(!x(A)||!k(y))return n?Be:l;let T=`${y}__${l}`;Re(d)||(T=`${T}__${JSON.stringify(d)}`);let w=o.get(T);return w||(w=new Intl.NumberFormat(y,J({},A,d)),o.set(T,w)),g?w.formatToParts(c):w.format(c)}function at(...e){let[t,i,n,a]=e,s={},o={};if(!z(t))throw ue(14);let l=t;return k(i)?s.key=i:x(i)&&(s=i),k(n)?s.locale=n:x(n)&&(o=n),x(a)&&(o=a),[s.key||"",l,s,o]}function Jt(e,t,i){let n=e;for(let a in i){let s=`${t}__${a}`;n.__numberFormatters.has(s)&&n.__numberFormatters.delete(s)}}var ia="9.1.9";function oe(e,...t){return ri(e,null,void 0)}var st=ae("__transrateVNode"),rt=ae("__datetimeParts"),ot=ae("__numberParts");ae("__enableEmitter");ae("__disableEmitter");var na=ae("__setPluralRules");ae("__intlifyMeta");var li=ae("__injectWithOption"),Yt=0;function Kt(e){return(t,i,n,a)=>e(i,n,(0,v.getCurrentInstance)()||void 0,a)}function ci(e,t){let{messages:i,__i18n:n}=t,a=x(i)?i:H(n)?{}:{[e]:{}};if(H(n)&&n.forEach(({locale:s,resource:o})=>{s?(a[s]=a[s]||{},Fe(o,a[s])):Fe(o,a)}),t.flatJson)for(let s in a)ai(a,s)&&tt(a[s]);return a}var De=e=>!G(e)||H(e);function Fe(e,t){if(De(e)||De(t))throw oe(20);for(let i in e)ai(e,i)&&(De(e[i])||De(t[i])?t[i]=e[i]:Fe(e[i],t[i]))}function aa(e={}){let{__root:t}=e,i=t===void 0,n=E(e.inheritLocale)?e.inheritLocale:!0,a=(0,v.ref)(t&&n?t.locale.value:k(e.locale)?e.locale:"en-US"),s=(0,v.ref)(t&&n?t.fallbackLocale.value:k(e.fallbackLocale)||H(e.fallbackLocale)||x(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:a.value),o=(0,v.ref)(ci(a.value,e)),l=(0,v.ref)(x(e.datetimeFormats)?e.datetimeFormats:{[a.value]:{}}),c=(0,v.ref)(x(e.numberFormats)?e.numberFormats:{[a.value]:{}}),u=t?t.missingWarn:E(e.missingWarn)||Me(e.missingWarn)?e.missingWarn:!0,d=t?t.fallbackWarn:E(e.fallbackWarn)||Me(e.fallbackWarn)?e.fallbackWarn:!0,m=t?t.fallbackRoot:E(e.fallbackRoot)?e.fallbackRoot:!0,g=!!e.fallbackFormat,_=$(e.missing)?e.missing:null,p=$(e.missing)?Kt(e.missing):null,b=$(e.postTranslation)?e.postTranslation:null,y=E(e.warnHtmlMessage)?e.warnHtmlMessage:!0,A=!!e.escapeParameter,P=t?t.modifiers:x(e.modifiers)?e.modifiers:{},T=e.pluralRules||t&&t.pluralRules,w;function I(){return Yn({version:ia,locale:a.value,fallbackLocale:s.value,messages:o.value,messageCompiler:function(h){return X=>X.normalize([h])},datetimeFormats:l.value,numberFormats:c.value,modifiers:P,pluralRules:T,missing:p===null?void 0:p,missingWarn:u,fallbackWarn:d,fallbackFormat:g,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:y,escapeParameter:A,__datetimeFormatters:x(w)?w.__datetimeFormatters:void 0,__numberFormatters:x(w)?w.__numberFormatters:void 0,__v_emitter:x(w)?w.__v_emitter:void 0,__meta:{framework:"vue"}})}w=I(),ye(w,a.value,s.value);function Z(){return[a.value,s.value,o.value,l.value,c.value]}let re=(0,v.computed)({get:()=>a.value,set:f=>{a.value=f,w.locale=a.value}}),Y=(0,v.computed)({get:()=>s.value,set:f=>{s.value=f,w.fallbackLocale=s.value,ye(w,a.value,f)}}),Q=(0,v.computed)(()=>o.value),q=(0,v.computed)(()=>l.value),ve=(0,v.computed)(()=>c.value);function Se(){return $(b)?b:null}function Ce(f){b=f,w.postTranslation=f}function Je(){return _}function Ni(f){f!==null&&(p=Kt(f)),_=f,w.missing=p}function ce(f,h,X,U,Ye,Te){Z();let he;if(he=f(w),z(he)&&he===Be){let[an,lo]=h();return t&&m?U(t):Ye(an)}else{if(Te(he))return he;throw oe(14)}}function Lt(...f){return ce(h=>Ut(h,...f),()=>it(...f),"translate",h=>h.t(...f),h=>h,h=>k(h))}function Ri(...f){let[h,X,U]=f;if(U&&!G(U))throw oe(15);return Lt(h,X,J({resolvedMessage:!0},U||{}))}function Bi(...f){return ce(h=>zt(h,...f),()=>nt(...f),"datetime format",h=>h.d(...f),()=>Vt,h=>k(h))}function Vi(...f){return ce(h=>Gt(h,...f),()=>at(...f),"number format",h=>h.n(...f),()=>Vt,h=>k(h))}function Wi(f){return f.map(h=>k(h)?(0,v.createVNode)(v.Text,null,h,0):h)}let Hi={normalize:Wi,interpolate:f=>f,type:"vnode"};function ji(...f){return ce(h=>{let X,U=h;try{U.processor=Hi,X=Ut(U,...f)}finally{U.processor=null}return X},()=>it(...f),"translate",h=>h[st](...f),h=>[(0,v.createVNode)(v.Text,null,h,0)],h=>H(h))}function Ui(...f){return ce(h=>Gt(h,...f),()=>at(...f),"number format",h=>h[ot](...f),()=>[],h=>k(h)||H(h))}function zi(...f){return ce(h=>zt(h,...f),()=>nt(...f),"datetime format",h=>h[rt](...f),()=>[],h=>k(h)||H(h))}function $i(f){T=f,w.pluralRules=T}function Gi(f,h){let X=k(h)?h:a.value,U=Dt(X);return Ee(U,f)!==null}function Ji(f){let h=null,X=be(w,s.value,a.value);for(let U=0;U<X.length;U++){let Ye=o.value[X[U]]||{},Te=Ee(Ye,f);if(Te!=null){h=Te;break}}return h}function Yi(f){let h=Ji(f);return h!=null?h:t?t.tm(f)||{}:{}}function Dt(f){return o.value[f]||{}}function Ki(f,h){o.value[f]=h,w.messages=o.value}function Zi(f,h){o.value[f]=o.value[f]||{},Fe(h,o.value[f]),w.messages=o.value}function Qi(f){return l.value[f]||{}}function Xi(f,h){l.value[f]=h,w.datetimeFormats=l.value,$t(w,f,h)}function qi(f,h){l.value[f]=J(l.value[f]||{},h),w.datetimeFormats=l.value,$t(w,f,h)}function en(f){return c.value[f]||{}}function tn(f,h){c.value[f]=h,w.numberFormats=c.value,Jt(w,f,h)}function nn(f,h){c.value[f]=J(c.value[f]||{},h),w.numberFormats=c.value,Jt(w,f,h)}return Yt++,t&&((0,v.watch)(t.locale,f=>{n&&(a.value=f,w.locale=f,ye(w,a.value,s.value))}),(0,v.watch)(t.fallbackLocale,f=>{n&&(s.value=f,w.fallbackLocale=f,ye(w,a.value,s.value))})),{id:Yt,locale:re,fallbackLocale:Y,get inheritLocale(){return n},set inheritLocale(f){n=f,f&&t&&(a.value=t.locale.value,s.value=t.fallbackLocale.value,ye(w,a.value,s.value))},get availableLocales(){return Object.keys(o.value).sort()},messages:Q,datetimeFormats:q,numberFormats:ve,get modifiers(){return P},get pluralRules(){return T||{}},get isGlobal(){return i},get missingWarn(){return u},set missingWarn(f){u=f,w.missingWarn=u},get fallbackWarn(){return d},set fallbackWarn(f){d=f,w.fallbackWarn=d},get fallbackRoot(){return m},set fallbackRoot(f){m=f},get fallbackFormat(){return g},set fallbackFormat(f){g=f,w.fallbackFormat=g},get warnHtmlMessage(){return y},set warnHtmlMessage(f){y=f,w.warnHtmlMessage=f},get escapeParameter(){return A},set escapeParameter(f){A=f,w.escapeParameter=f},t:Lt,rt:Ri,d:Bi,n:Vi,te:Gi,tm:Yi,getLocaleMessage:Dt,setLocaleMessage:Ki,mergeLocaleMessage:Zi,getDateTimeFormat:Qi,setDateTimeFormat:Xi,mergeDateTimeFormat:qi,getNumberFormat:en,setNumberFormat:tn,mergeNumberFormat:nn,getPostTranslationHandler:Se,setPostTranslationHandler:Ce,getMissingHandler:Je,setMissingHandler:Ni,[st]:ji,[ot]:Ui,[rt]:zi,[na]:$i,[li]:e.__injectWithOption}}var ht={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};J({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>z(e)||!isNaN(e)}},ht);function sa({slots:e},t){return t.length===1&&t[0]==="default"?e.default?e.default():[]:t.reduce((i,n)=>{let a=e[n];return a&&(i[n]=a()),i},{})}function ui(e,t,i,n){let{slots:a,attrs:s}=t;return()=>{let o={part:!0},l={};e.locale&&(o.locale=e.locale),k(e.format)?o.key=e.format:G(e.format)&&(k(e.format.key)&&(o.key=e.format.key),l=Object.keys(e.format).reduce((m,g)=>i.includes(g)?J({},m,{[g]:e.format[g]}):m,{}));let c=n(e.value,o,l),u=[o.key];H(c)?u=c.map((m,g)=>{let _=a[m.type];return _?_({[m.type]:m.value,index:g,parts:c}):[m.value]}):k(c)&&(u=[c]);let d=J({},s);return k(e.tag)?(0,v.h)(e.tag,d,u):G(e.tag)?(0,v.h)(e.tag,d,u):(0,v.h)(v.Fragment,d,u)}}var ra=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"];J({value:{type:Number,required:!0},format:{type:[String,Object]}},ht);var oa=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"];J({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},ht);function yt(e={}){let t=(0,v.getCurrentInstance)();if(t==null)throw oe(16);if(!t.appContext.app.__VUE_I18N_SYMBOL__)throw oe(17);let i=(0,v.inject)(t.appContext.app.__VUE_I18N_SYMBOL__);if(!i)throw oe(22);let n=i.mode==="composition"?i.global:i.global.__composer,a=Re(e)?"__i18n"in t.type?"local":"global":e.useScope?e.useScope:"local";if(a==="global"){let l=G(e.messages)?e.messages:{};"__i18nGlobal"in t.type&&(l=ci(n.locale.value,{messages:l,__i18n:t.type.__i18nGlobal}));let c=Object.keys(l);if(c.length&&c.forEach(u=>{n.mergeLocaleMessage(u,l[u])}),G(e.datetimeFormats)){let u=Object.keys(e.datetimeFormats);u.length&&u.forEach(d=>{n.mergeDateTimeFormat(d,e.datetimeFormats[d])})}if(G(e.numberFormats)){let u=Object.keys(e.numberFormats);u.length&&u.forEach(d=>{n.mergeNumberFormat(d,e.numberFormats[d])})}return n}if(a==="parent"){let l=la(i,t,e.__useComponent);return l==null&&(l=n),l}if(i.mode==="legacy")throw oe(18);let s=i,o=s.__getInstance(t);if(o==null){let l=t.type,c=J({},e);l.__i18n&&(c.__i18n=l.__i18n),n&&(c.__root=n),o=aa(c),ca(s,t),s.__setInstance(t,o)}return o}function la(e,t,i=!1){let n=null,a=t.root,s=t.parent;for(;s!=null;){let o=e;if(e.mode==="composition")n=o.__getInstance(s);else{let l=o.__getInstance(s);l!=null&&(n=l.__composer),i&&n&&!n[li]&&(n=null)}if(n!=null||a===s)break;s=s.parent}return n}function ca(e,t,i){(0,v.onMounted)(()=>{},t),(0,v.onUnmounted)(()=>{e.__deleteInstance(t)},t)}var ua={LEVEL_33:33,LEVEL_29:29},da=["gif","heic"],fa={en:{title:"English",language:"en",code:"en-US"},es:{title:"espa\xF1ol",language:"es",code:"es-ES"},ar:{title:"\u0639\u0631\u0628\u064A",language:"ar",code:"ar-SA"},vi:{title:"Ti\u1EBFng Vi\u1EC7t",language:"vi",code:"vi-VN"},tr:{title:"T\xFCrk\xE7e",language:"tr",code:"tr-TR"},pt:{title:"Portugu\xEAs",language:"pt",code:"pt-PT"}},ma=e=>typeof e=="string",pa="onResize";function fe(e){return weex.requireModule(e)}function D(e,t,...i){uni.__log__?uni.__log__(e,t,...i):console[e].apply(console,[...i,t])}function me(e,t){return ma(e)?t:e}var ga=e=>(t,i=(0,v.getCurrentInstance)())=>{!v.isInSSRComponentSetup&&(0,v.injectHook)(e,t,i)},di=ga(pa);var ha={INIT:1,OPEN:2,CALLBACK:3,SOCKET:4,LOGIN:5},ya={welcome:"/pages/welcome/welcome",login:"/pages/login/login",warningDialog:"/pagesDialog/warning",homeFilterSexGuide:"/pagesDialog/home-filter-sex-guide",setLoginProfile:"/pagesLogin/profile",forgetPwd:"/pagesLogin/forget-pwd",emailLogin:"/pagesLogin/email-login",privacyDialog:"/pagesLogin/privacy-dialog"};function fi(e,t){let i=ya[e];return i||(i=e),i+wn(t,"&","?")}function wa(e,t=null,i=null,n=!1){let a=fi(e,t),s={url:a,fail:o=>{D("error","at common/route.js:25",`\u6253\u5F00\u9875\u9762\u5931\u8D25${a} ${JSON.stringify(o)}`)}};n&&(s=Object.assign(s,n)),i!=null&&(s.events=i),uni.navigateTo(s)}function mi(e,t,i,n,a=null){let o={url:fi(e,t),success(l){l.eventChannel.emit(i,n)}};a!=null&&(o.events=a),uni.navigateTo(o)}function _a(e=1,t="",i=""){let n={delta:e};t&&(n.animationType=t),i&&(n.animationDuration=i),uni.navigateBack(n)}function ba(){let e=[],t=getCurrentPages();for(let i=0,n=t.length;i<n;i++){let a=t[i].$page;e.push(a.path)}return e}function pi(e){return new Promise(t=>{getApp().globalData.pluginTool.permissionRequest({permission:e},i=>{t(i)})})}function Aa(e){return getApp().globalData.pluginTool.permissionStatusSync({permission:e})}function ka(e){return getApp().globalData.pluginTool.permissionOpenSetting({permission:e})}function va(){return getApp().globalData.pluginTool.permissionCheckAll()}function Sa(){return getApp().globalData.pluginTool.locationAuthorizationStatusSync()}function Ca(){return new Promise(e=>{getApp().globalData.pluginTool.locationAuthorizationStatus({},t=>{e(t)})})}var S={ALBUM:1,CAMERA:2,VIDEO:3,MICROPHONE:4,NOTIFY:5,LOCATION:6,DRAW_OVERLAYS:7,ALBUM_AND_CAMERA:101},L={GRANTED:1,DENIED:0,DENIED_ALWAYS:-1};function Ve(e,t=!0,i=!0){return new Promise(n=>{if(e==S.ALBUM_AND_CAMERA){wt(S.ALBUM_AND_CAMERA)?n(!0):(i&&Zt(e),n(!1));return}let a=function(s){s==L.GRANTED?n(!0):(s==L.DENIED||s==L.DENIED_ALWAYS&&i&&Zt(e),n(!1))};if(j.isAndroid)if(e==S.NOTIFY)Da().then(a);else{let s=We(e);pi(s).then(a)}else Va(e)(t).then(a)})}function Ta(){let e=[],t=!0;if(j.isAndroid){let s=va();e.push({key:"notice",value:s.notice,permission:S.NOTIFY}),e.push({key:"camera",value:s.camera,permission:S.CAMERA}),e.push({key:"voice",value:s.voice,permission:S.MICROPHONE}),e.push({key:"album",value:s.storage,permission:S.ALBUM})}else e.push({key:"notice",value:_t(),permission:S.NOTIFY}),e.push({key:"camera",value:Ra(),permission:S.CAMERA}),e.push({key:"voice",value:gi(),permission:S.MICROPHONE}),e.push({key:"album",value:Ba(),permission:S.ALBUM});for(let s=0,o=e.length;s<o;s++)if(!e[s].value){t=!1;break}let i={};for(let s=0,o=e.length;s<o;s++){let l=e[s];i[l.key]=l.value?1:0}i.auto_translate=getApp().globalData.translateAuto?1:0;let n=ws()?1:0,a=ys();return i.audio_translate=n,i.audio_language=a,de.request("/user/sync-permission",i),[e,t]}function wt(e){if(e==S.NOTIFY)return j.isAndroid?Oe(e):_t();if(e==S.MICROPHONE)return j.isAndroid?Oe(e):gi();if(e==S.ALBUM_AND_CAMERA){let i=Ta()[0];return i?i[1].value&&i[3].value:!0}else if(e==S.LOCATION)return j.isAndroid?Oe(e):Sa();return!0}function xa(e){j.isAndroid?Ia(We(e)):Pa()}function Zt(e,t){uni.showModal({title:N("tips"),content:Wa(e),showCancel:!0,cancelText:N("cancel"),confirmText:N("toTurnOn"),complete(i){i.confirm?(xa(e),typeof t=="function"&&t(!0)):i.cancel&&typeof t=="function"&&t(!1)}})}function Oe(e){let t=We(e);return Aa(t)}function Ia(e){if(C(e)){La();return}ka(e)}function La(){var e=plus.android.importClass("android.content.Intent"),t=plus.android.importClass("android.provider.Settings"),i=plus.android.importClass("android.net.Uri"),n=plus.android.runtimeMainActivity(),a=new e;a.setAction(t.ACTION_APPLICATION_DETAILS_SETTINGS);var s=i.fromParts("package",n.getPackageName(),null);a.setData(s),n.startActivity(a)}function We(e){switch(e){case S.LOCATION:return["android.permission.ACCESS_FINE_LOCATION","android.permission.ACCESS_COARSE_LOCATION"];case S.ALBUM:case S.VIDEO:return["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO"];case S.MICROPHONE:return["android.permission.RECORD_AUDIO"];case S.CAMERA:return["android.permission.CAMERA"];case S.NOTIFY:return["android.permission.POST_NOTIFICATIONS"]}}function Da(){return new Promise(e=>{if(getApp().globalData.sys.androidAPILevel>=ua.LEVEL_33)pi(We(S.NOTIFY)).then(t=>{e(t)});else{let t=Oe(S.NOTIFY);e(t?L.GRANTED:L.DENIED_ALWAYS)}})}function Pa(){var e=plus.ios.import("UIApplication"),t=e.sharedApplication(),i=plus.ios.import("NSURL"),n=i.URLWithString("app-settings:");t.openURL(n),plus.ios.deleteObject(n),plus.ios.deleteObject(i),plus.ios.deleteObject(t)}function Oa(){return new Promise(e=>{Ca().then(t=>{e(t==1?L.GRANTED:L.DENIED_ALWAYS)})})}function Ma(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),n=i.authorizationStatusForMediaType("soun");n==3?(plus.ios.deleteObject(i),t(L.GRANTED)):n==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","soun",function(){if(e){let a=i.authorizationStatusForMediaType("soun");plus.ios.deleteObject(i),t(a==3?L.GRANTED:L.DENIED)}else plus.ios.deleteObject(i),t(L.DENIED)}):(plus.ios.deleteObject(i),t(L.DENIED_ALWAYS))})}function Ea(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),n=i.authorizationStatusForMediaType("vide");n==3?(plus.ios.deleteObject(i),t(L.GRANTED)):n==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","vide",function(){if(e){let a=i.authorizationStatusForMediaType("vide");plus.ios.deleteObject(i),t(a==3?L.GRANTED:L.DENIED)}else plus.ios.deleteObject(i),t(L.DENIED)}):(plus.ios.deleteObject(i),t(L.DENIED_ALWAYS))})}function Fa(e){return new Promise(t=>{let i=plus.ios.import("PHPhotoLibrary"),n=i.authorizationStatus();n==3||n==4?(plus.ios.deleteObject(i),t(L.GRANTED)):n==0?plus.ios.invoke("PHPhotoLibrary","requestAuthorization:",function(){if(e){let a=i.authorizationStatus();plus.ios.deleteObject(i),t(a==3||a==4?L.GRANTED:L.DENIED)}else plus.ios.deleteObject(i),t(L.DENIED)}):(plus.ios.deleteObject(i),t(L.DENIED_ALWAYS))})}function Na(){return new Promise(e=>{let t=_t();e(t?L.GRANTED:L.DENIED_ALWAYS)})}function gi(){let e=plus.ios.importClass("AVCaptureDevice"),t=e.authorizationStatusForMediaType("soun");return plus.ios.deleteObject(e),t==3}function Ra(){let e=plus.ios.importClass("AVCaptureDevice"),t=e.authorizationStatusForMediaType("vide");return plus.ios.deleteObject(e),t==3}function Ba(){var e=!1,t=plus.ios.import("PHPhotoLibrary"),i=t.authorizationStatus();return(i==3||i==4)&&(e=!0),plus.ios.deleteObject(t),e}function _t(){var e=!1,t=plus.ios.import("UIApplication"),i=t.sharedApplication(),n=0;if(i.currentUserNotificationSettings){var a=i.currentUserNotificationSettings();n=a.plusGetAttribute("types"),e=n!=0,plus.ios.deleteObject(a)}else n=i.enabledRemoteNotificationTypes(),e=n!=0;return plus.ios.deleteObject(i),plus.ios.deleteObject(t),e}function Va(e){switch(e){case S.LOCATION:return Oa;case S.ALBUM:case S.VIDEO:return Fa;case S.MICROPHONE:return Ma;case S.CAMERA:return Ea;case S.NOTIFY:return Na}}function Wa(e){let t=getApp().globalData.appInfo;return e==S.LOCATION?N("openLocationPerTip",{appName:t.name}):e==S.ALBUM||e==S.VIDEO?N("openAlbumPerTip",{appName:t.name}):e==S.MICROPHONE?N("openMicrophonePerTip",{appName:t.name}):e==S.NOTIFY?N("msg.openNoticePerTips",{appName:t.name}):e==S.CAMERA?N("openCameraPerTip",{appName:t.name}):e==S.ALBUM_AND_CAMERA?N("openPermissionTipAlbumCamera",{appName:t.name}):""}function Ha(e){function t(o,l,c){for(;0<c--;)o.push(l)}function i(o,l){return o<<l|o>>>32-l}function n(o,l,c){return o^l^c}function a(o,l){var c=(l&65535)+(o&65535),u=(l>>>16)+(o>>>16)+(c>>>16);return(u&65535)<<16|c&65535}var s="0123456789abcdef";return function(o){for(var l=[],c=o.length*4,u,d=0;d<c;d++)u=o[d>>2]>>(3-d%4)*8,l.push(s.charAt(u>>4&15)+s.charAt(u&15));return l.join("")}(function(o,l){var c,u,d,m,g,_=o.length,p=1732584193,b=4023233417,y=2562383102,A=271733878,P=3285377520,T=[];t(T,1518500249,20),t(T,1859775393,20),t(T,2400959708,20),t(T,3395469782,20),o[l>>5]|=128<<24-l%32,o[(l+65>>9<<4)+15]=l;for(var w=0;w<_;w+=16){c=p,u=b,d=y,m=A,g=P;for(var I=0,Z=[];I<80;I++){Z[I]=I<16?o[I+w]:i(Z[I-3]^Z[I-8]^Z[I-14]^Z[I-16],1);var re=function(Y,Q,q,ve,Se){var Ce=(Se&65535)+(Y&65535)+(Q&65535)+(q&65535)+(ve&65535),Je=(Se>>>16)+(Y>>>16)+(Q>>>16)+(q>>>16)+(ve>>>16)+(Ce>>>16);return(Je&65535)<<16|Ce&65535}(I<20?function(Y,Q,q){return Y&Q^~Y&q}(u,d,m):I<40?n(u,d,m):I<60?function(Y,Q,q){return Y&Q^Y&q^Q&q}(u,d,m):n(u,d,m),g,T[I],Z[I],i(c,5));g=m,m=d,d=i(u,30),u=c,c=re}p=a(p,c),b=a(b,u),y=a(y,d),A=a(A,m),P=a(P,g)}return[p,b,y,A,P]}(function(o){for(var l=[],c=255,u=o.length*8,d=0;d<u;d+=8)l[d>>5]|=(o.charCodeAt(d/8)&c)<<24-d%32;return l}(e).slice(),e.length*8))}function ja(e,t,i=!0){return Ua(getApp().globalData.ossPicPath,e,t,i)}function Ua(e,t,i,n=!0){if(C(t))return"";if(t.startsWith("http")||t.startsWith("file://"))return t;if(t.startsWith("/var/mobile/"))return"file://"+t;if(t.startsWith("/storage/"))return t;let s=`img_${Ha(t)}`,o=Ne(s);if(o){let c={filePath:o,fail(u){za(`\u7F13\u5B58\u68C0\u6D4B\u5931\u8D25${t}`,u),hn(s),typeof i=="function"&&i(e+t)},success(u){}};return typeof i=="function"&&(c.success=function(){i(o)}),uni.getFileInfo(c),o}let l=e+t;return getApp().globalData.picCacheObj[s]||(getApp().globalData.picCacheObj[s]=1,typeof i=="function"&&!n&&i(l),Ga(l).then(c=>{gn(s,c),typeof i=="function"&&n&&i(c),delete getApp().globalData.picCacheObj[s]}).catch(()=>{})),l}function za(e,t){D("error","at common/cache.js:66",`cache ${e}`,t)}function qe(e,t=!0){return e.startsWith("http")?e:e.startsWith("file://")?t?e:e.replace("file://",""):e.startsWith("/storage/")||e.startsWith("/var/mobile/")?t?`file://${e}`:e:e.startsWith("_doc/uniapp")?t?e:plus.io.convertLocalFileSystemURL(e):e.indexOf("apps/__UNI")!=-1?e:!1}var M={TXT:1,IMG:3,VIDEO:4,VOICE:2,HUNG_UP:5},hi={SUCCESS:0,FAIL:1,USER_DEL:4};function Qt(e,t,i,n="1",a=0,s=0){let o=getApp().globalData.kfOnline?getApp().globalData.kfOssPath:getApp().globalData.ossPath,l=getApp().globalData.kfOnline?getApp().globalData.kfOssPicPath:getApp().globalData.ossPicPath,c,u=qe(t,!1);if(u)c=u;else{let g;if(j.isAndroid,g=!1,g){let _=ja(t);c=_.startsWith("http")?_:plus.io.convertLocalFileSystemURL(_)}else c=l+t}let d=qe(i,!1)||`${o}${i}`,m=e?qe(n,!1)||`${l}${n}`:n;return{isVideo:e,thumbnailUrl:c||"",url:d,coverUrl:m,width:a,height:s}}function yi(e,t){let i=e.msg_type==M.VIDEO,n;if(i){let a=t.small_url||t.cover_url||t.cover,s=t.cover_url||t.cover,o=t.url;o.startsWith("_doc")&&(o=plus.io.convertLocalFileSystemURL(o)),n=Qt(!0,a,o,s)}else{let a=t.small_url||t.image_url;n=Qt(!1,a,t.image_url)}return n}function wi(e,t,i=1){getApp().globalData.filterAppHide=!0,ut(function(){let n=JSON.parse(JSON.stringify(e));getApp().globalData.pluginImageBrowser.openBrowser({info:n,index:t,showIndicator:i},a=>{D("info","at comExtend/plugin-image-browser.js:67","Preview.preview "+JSON.stringify(a))})},500,"previewImage")}function bt(e,t,i){return new Promise(n=>{let a=e;a.startsWith("_doc")&&(a=plus.io.convertLocalFileSystemURL(a)),getApp().globalData.pluginImageBrowser.getVideoCover({url:a,width:t,height:i},s=>{n(s)})})}function $a(e,t){getApp().globalData.s.commit("setPubValue",{name:e,value:t})}function Ga(e){return new Promise((t,i)=>{uni.downloadFile({url:e}).then(n=>!n||n.statusCode!=200||!n.tempFilePath?(i(),new Promise(()=>{})):uni.saveFile({tempFilePath:n.tempFilePath})).then(n=>{!n||!n.savedFilePath?i():t(n.savedFilePath)}).catch(n=>{D("error","at common/common.js:44","downloadFile error "+JSON.stringify(n))})})}function At(e,t="md5"){return new Promise(i=>{uni.getFileInfo({filePath:e,digestAlgorithm:t,success(n){i(n)},fail(){i(null)}})})}function Xt(e,t){t?plus.runtime.openWeb(e):plus.runtime.openURL(e)}function Ja(e,t,i,n=N("confirm")){Ka(e,t,i,"",n,!1)}function Ya(e){return["Si, desbloquear","Reenviar Completar"].indexOf(e)!=-1}function Ka(e,t,i,n,a=N("confirm"),s=!0,o=N("cancel"),l=!1){let c=!1;if(!j.isAndroid&&(c=Ya(a),c)){let u=a;a=o,o=u}uni.showModal({title:e,content:t,showCancel:s,cancelText:o,confirmText:a,editable:l,success(u){u.confirm?c?typeof n=="function"&&n():typeof i=="function"&&i(u):u.cancel&&(c?typeof i=="function"&&i(u):typeof n=="function"&&n())}})}function kt(e,t="none",i="center"){uni.showToast({title:e,duration:2e3,icon:t,position:i})}function Za(e,t){uni.showToast({title:e,duration:t,icon:"none",position:"center"})}function _i(e){return new Promise(t=>{plus.io.getVideoInfo({filePath:e,success(i){t(i)},fail(i){t(`getVideoInfo ${JSON.stringify(i)}`)}})})}function bi(e,t=1,i=!1,n=!1){return new Promise((a,s)=>{let o=["album","camera"],l;e==1?(o=["album"],l=S.ALBUM):e==2?(o=["camera"],l=S.CAMERA):e==0&&(l=S.ALBUM_AND_CAMERA);let c=["compressed"];i&&c.push("original");let u={};if(n){let d=getApp().globalData.window.width;u={width:d,height:d}}Ve(l).then(d=>{if(!d){s(),D("error","at common/common.js:214","choose image permission fail");return}getApp().globalData.filterAppHide=!0,uni.chooseImage({count:t,sourceType:o,sizeType:c,crop:u,success:function(m){let g=[];for(let _=0,p=m.tempFilePaths.length;_<p;_++){let b=m.tempFilePaths[_],y=_n(b);da.indexOf(y)!=-1&&g.push(_)}if(g.length>0&&(m.tempFilePaths=m.tempFilePaths.filter((_,p)=>g.indexOf(p)==-1),m.tempFiles&&(m.tempFiles=m.tempFiles.filter((_,p)=>g.indexOf(p)!=-1))),e!=1)for(let _=0,p=m.tempFilePaths.length;_<p;_++)m.tempFilePaths[_]=plus.io.convertLocalFileSystemURL(m.tempFilePaths[_]);a(m)},fail:function(m){s(),D("error","at common/common.js:253","choose image error --->"+JSON.stringify(m))}})})})}function Ai(e,t,i=!1,n=15){return new Promise((a,s)=>{let o,l=["album","camera"],c;e==1?(l=["album"],c=S.VIDEO):e==2&&(l=["camera"],c=S.CAMERA),Ve(c).then(u=>{if(!u){s();return}return getApp().globalData.filterAppHide=!0,uni.chooseVideo({sourceType:l,compressed:!1,maxDuration:n,camera:i?"front":"back"})}).then(u=>{if(D("error","at common/common.js:286","----> uni.chooseVideo "+JSON.stringify(u)),o=JSON.parse(JSON.stringify(u)),o&&o.duration&&parseInt(o.duration)>n){let d=setTimeout(()=>{clearTimeout(d),Za(`Video duration cannot exceed ${n} seconds`,3e3)},500);return s(null),te}return o.tempFilePath=o.tempFilePath.replace("file://",""),new Promise(d=>{d(null)})}).then(()=>t?bt(o.tempFilePath,o.width,o.height):new Promise(u=>{u(null)})).then(u=>(o.coverPath=u,a(o))).catch(u=>{s()})})}function ki(e,t){return new Promise((i,n)=>{uni.compressVideo({src:e,quality:t,success(a){D("log","at common/common.js:326","videoCompress res "+JSON.stringify(a)),i(a)},fail(a){D("log","at common/common.js:330","videoCompress error "+JSON.stringify(a)),n(`videoCompress ${JSON.stringify(a)}`)}})})}function Qa(){return getApp().globalData.pluginApplet.bundleId()}function Xa(){let e=Qa();return j.isAndroid?["com.chat.cupid_res","com.chat.cupid","com.example.uni_applet"].indexOf(e)==-1?`${e}.a`:"com.cupid.home.a":["com.kuxin.test1","com.kuxin.test3","com.cmchat.CMChatDemo"].indexOf(e)==-1?e:"com.cupid.home"}var et=0;function qa(e){return ts(es(is(e)))}function es(e){return as(ss(ns(e),e.length*8))}function ts(e){try{}catch(s){et=0}for(var t=et?"0123456789ABCDEF":"0123456789abcdef",i="",n,a=0;a<e.length;a++)n=e.charCodeAt(a),i+=t.charAt(n>>>4&15)+t.charAt(n&15);return i}function is(e){for(var t="",i=-1,n,a;++i<e.length;)n=e.charCodeAt(i),a=i+1<e.length?e.charCodeAt(i+1):0,55296<=n&&n<=56319&&56320<=a&&a<=57343&&(n=65536+((n&1023)<<10)+(a&1023),i++),n<=127?t+=String.fromCharCode(n):n<=2047?t+=String.fromCharCode(192|n>>>6&31,128|n&63):n<=65535?t+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|n&63):n<=2097151&&(t+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|n&63));return t}function ns(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<e.length*8;i+=8)t[i>>5]|=(e.charCodeAt(i/8)&255)<<i%32;return t}function as(e){for(var t="",i=0;i<e.length*32;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function ss(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,n=-271733879,a=-1732584194,s=271733878,o=0;o<e.length;o+=16){var l=i,c=n,u=a,d=s;i=R(i,n,a,s,e[o+0],7,-680876936),s=R(s,i,n,a,e[o+1],12,-389564586),a=R(a,s,i,n,e[o+2],17,606105819),n=R(n,a,s,i,e[o+3],22,-1044525330),i=R(i,n,a,s,e[o+4],7,-176418897),s=R(s,i,n,a,e[o+5],12,1200080426),a=R(a,s,i,n,e[o+6],17,-1473231341),n=R(n,a,s,i,e[o+7],22,-45705983),i=R(i,n,a,s,e[o+8],7,1770035416),s=R(s,i,n,a,e[o+9],12,-1958414417),a=R(a,s,i,n,e[o+10],17,-42063),n=R(n,a,s,i,e[o+11],22,-1990404162),i=R(i,n,a,s,e[o+12],7,1804603682),s=R(s,i,n,a,e[o+13],12,-40341101),a=R(a,s,i,n,e[o+14],17,-1502002290),n=R(n,a,s,i,e[o+15],22,1236535329),i=B(i,n,a,s,e[o+1],5,-165796510),s=B(s,i,n,a,e[o+6],9,-1069501632),a=B(a,s,i,n,e[o+11],14,643717713),n=B(n,a,s,i,e[o+0],20,-373897302),i=B(i,n,a,s,e[o+5],5,-701558691),s=B(s,i,n,a,e[o+10],9,38016083),a=B(a,s,i,n,e[o+15],14,-660478335),n=B(n,a,s,i,e[o+4],20,-405537848),i=B(i,n,a,s,e[o+9],5,568446438),s=B(s,i,n,a,e[o+14],9,-1019803690),a=B(a,s,i,n,e[o+3],14,-187363961),n=B(n,a,s,i,e[o+8],20,1163531501),i=B(i,n,a,s,e[o+13],5,-1444681467),s=B(s,i,n,a,e[o+2],9,-51403784),a=B(a,s,i,n,e[o+7],14,1735328473),n=B(n,a,s,i,e[o+12],20,-1926607734),i=V(i,n,a,s,e[o+5],4,-378558),s=V(s,i,n,a,e[o+8],11,-2022574463),a=V(a,s,i,n,e[o+11],16,1839030562),n=V(n,a,s,i,e[o+14],23,-35309556),i=V(i,n,a,s,e[o+1],4,-1530992060),s=V(s,i,n,a,e[o+4],11,1272893353),a=V(a,s,i,n,e[o+7],16,-155497632),n=V(n,a,s,i,e[o+10],23,-1094730640),i=V(i,n,a,s,e[o+13],4,681279174),s=V(s,i,n,a,e[o+0],11,-358537222),a=V(a,s,i,n,e[o+3],16,-722521979),n=V(n,a,s,i,e[o+6],23,76029189),i=V(i,n,a,s,e[o+9],4,-640364487),s=V(s,i,n,a,e[o+12],11,-421815835),a=V(a,s,i,n,e[o+15],16,530742520),n=V(n,a,s,i,e[o+2],23,-995338651),i=W(i,n,a,s,e[o+0],6,-198630844),s=W(s,i,n,a,e[o+7],10,1126891415),a=W(a,s,i,n,e[o+14],15,-1416354905),n=W(n,a,s,i,e[o+5],21,-57434055),i=W(i,n,a,s,e[o+12],6,1700485571),s=W(s,i,n,a,e[o+3],10,-1894986606),a=W(a,s,i,n,e[o+10],15,-1051523),n=W(n,a,s,i,e[o+1],21,-2054922799),i=W(i,n,a,s,e[o+8],6,1873313359),s=W(s,i,n,a,e[o+15],10,-30611744),a=W(a,s,i,n,e[o+6],15,-1560198380),n=W(n,a,s,i,e[o+13],21,1309151649),i=W(i,n,a,s,e[o+4],6,-145523070),s=W(s,i,n,a,e[o+11],10,-1120210379),a=W(a,s,i,n,e[o+2],15,718787259),n=W(n,a,s,i,e[o+9],21,-343485551),i=ne(i,l),n=ne(n,c),a=ne(a,u),s=ne(s,d)}return Array(i,n,a,s)}function He(e,t,i,n,a,s){return ne(rs(ne(ne(t,e),ne(n,s)),a),i)}function R(e,t,i,n,a,s,o){return He(t&i|~t&n,e,t,a,s,o)}function B(e,t,i,n,a,s,o){return He(t&n|i&~n,e,t,a,s,o)}function V(e,t,i,n,a,s,o){return He(t^i^n,e,t,a,s,o)}function W(e,t,i,n,a,s,o){return He(i^(t|~n),e,t,a,s,o)}function ne(e,t){var i=(e&65535)+(t&65535),n=(e>>16)+(t>>16)+(i>>16);return n<<16|i&65535}function rs(e,t){return e<<t|e>>>32-t}var we={md5:function(e){return qa(e)}};function os(e,t){let i=getApp().globalData.s.state.AES.encrypt(t,e);return`${getApp().globalData.apiUaPrefix}${i}`}function qt(e){let t=Xa();return we.md5(`${t}${e}${getApp().globalData.apiEncValue}`).substring(0,16)}function vt(e,t){try{C(e)&&(e={}),e.times=new Date().getTime();let i=Object.keys(e).sort(),n={};for(let s=0,o=i.length;s<o;s++)n[i[s]]=e[i[s]];let a=vi(n).substr(1);return n.sign=we.md5(`${we.md5(a)}${t}`),n}catch(i){return e}}function vi(e,t){if(e==null)return"";try{let i="",n=typeof e;if(n=="string"||n=="number")i+="&"+t+"="+bn(e);else if(n=="boolean")i+="&"+t+"="+(e?1:0);else for(let a in e){let s=t==null?a:t+ls(a);i+=vi(e[a],s)}return i}catch(i){return""}}function ls(e){return`${encodeURIComponent("[")}${e}${encodeURIComponent("]")}`}var de={setToken(e){C(e)||$a("pubToken",e)},isLogin(){let e=getApp().globalData.s.state;return!C(e.pubToken)&&e.pubUser.uid},request(e,t,i,n,a=!1){return new Promise((s,o)=>{let l=!1;if(i)if(i=="refresh")l=!0;else{let b={mask:!0};typeof i=="string"&&(b.title=i),uni.showLoading(b)}let c=getApp().globalData.ua,u,d=vt(t,getApp().globalData.apiSignValue),m=!1;try{m=getApp().globalData.s.state.pubToken}catch(b){D("error","at common/api.js:37","request token catch "+JSON.stringify(b))}let g={"content-type":"application/json"},_=getApp().globalData.apiHost,p;m&&getApp().globalData.uid!==0?(g.Authorization=`Bearer ${m}`,p=qt(getApp().globalData.uid)):p=qt(0),g.ua=os(c,p),u=getApp().globalData.s.state.AES.encrypt(p,JSON.stringify(d)),uni.request({url:_+e,method:"POST",header:g,data:u,dataType:"json",timeout:1e4,complete(b){if(i&&uni.hideLoading(),D("log","at common/api.js:62",`request ${e} obj ${JSON.stringify(t)}`),b.statusCode==200){let y=b.data,A=getApp().globalData.s.state.AES.decrypt(p,y);if(A=ct(A),!A){n&&o(A),ei(1,g.ua,c,u,e,m);return}if(A.data&&typeof A.data.callback=="object"&&(de.handleCallback(A.data.callback),a))return te;if(A.ok===99)return getApp().loginOut(),te;if(A.ok==-98)return ps(A.data),n&&o(A),te;if(C(A.msg)||kt(A.msg),A.ok>0){s(A);return}n&&o(A)}else if(b.statusCode==202){let y=b.data;return(y==null?void 0:y.ok)==100&&ei((y==null?void 0:y.type)||0,g.ua,c,u,e,m),te}else if(l&&uni.stopPullDownRefresh(),n)o(b);else return te},fail(b){}})})},handleCallback(e){switch(e.func_name){case"alert":cs(e.func_data);break;case"open":us(e.func_data);break;case"close":_a();break;case"banned_alert":let t=e.func_data.exp_time;if(parseInt(new Date().getTime()/1e3)>t)return;mi("/pagesDialog/banned",{from_cache:0},"bannedDialogData",e.func_data,{});break;case"reload_route":getApp().handleSecret(e.func_data,ha.CALLBACK,{});break;case"event":ds(e.func_data);break;case"api":fs(e.func_data);break}},accessLog(e,t){this.request("/other/access-log",{api_name:e,content:Ie(t)})},accessLogExtra(e,t,i){let n=`${Ie(t)} ${Ie(i)}`;this.request("/other/access-log",{api_name:e,content:n})},accessLogApi(e,t,i,n){let a=`url:${t} p:${JSON.stringify(i)} res ${Ie(n)}`;de.accessLog(e,a)}};function cs(e){let t=e.enter_func,i=e.cancel_title,n=e.enter_title,a=e.cancel_func,s=!C(i);uni.hideKeyboard(),uni.showModal({title:e.title,content:e.msg,showCancel:s,cancelText:s?i:N("cancel"),confirmText:n||N("ok"),complete(o){o.confirm?C(t)||de.handleCallback(t):o.cancel&&(C(a)||de.handleCallback(a))}})}function us(e){let t=e.page_name,i=e.data;t=="inside_web"?Xt(i.route,!0):t=="safari"?Xt(i.route,!1):t=="web"?wa(i.route):t=="native"&&ms(i.route)}function ds(e){let t=e.event_key;if(C(t))return;let i=e.data;C(i)?uni.$emit(t):uni.$emit(t,i)}function fs(e){if(e.type==1){let i={user_info:{is_rest:0}};de.request("/user/update-info",i,!0).then(()=>{getApp().pubUser.is_rest=0,Ja(N("tips"),N("anchorTurnedOffRest"),"",N("gotIt"))})}}function ms(e){return new Function("return "+e)()}function ps(e){ba().indexOf("/pagesDialog/stop_taking")==-1&&(getApp().globalData.appStopTaking=!0,mi("/pagesDialog/stop_taking",{},"stopTakingData",e))}function ei(e,t,i,n,a,s){let o={type:e,ua:t,origin_ua:i,params:n,api:a,token:s},l=!1;try{l=getApp().globalData.s.state.pubToken}catch(u){D("error","at common/api.js:231","request token catch "+JSON.stringify(u))}let c={"content-type":"application/json",ua:getApp().globalData.ua};l&&(c.Authorization=`Bearer ${l}`),uni.request({url:`${getApp().globalData.apiHost}/log/report`,method:"POST",header:c,data:o,dataType:"json",timeout:1e4})}function gs(e=!0){let t=Ne("language_app_key");if(!e||!yn(t))return t;let i=hs(!1),n=fa[i];return C(n)?"en":i}function hs(e){let t=uni.getAppBaseInfo().language;return C(t)?e?"en-US":"en":e?t:t.split("-")[0]}function ys(){return Ne("call_automatic_source_language")||gs()}function ws(){return!!Ne("call_automatic_open")}function N(...e){return getApp().globalData.s.state.pubI18n(...e)}var O=(e,t)=>{let i=e.__vccOpts||e;for(let[n,a]of t)i[n]=a;return i};var F=Qe(xe()),_s={"l-img":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"place-img":{"":{position:"absolute",top:0,left:0}}},bs={props:{src:{type:String,default:""},mode:{type:String,default:"aspectFill"},w:{type:String,default:"0"},h:{type:String,default:"0"},placeW:{type:String,default:"0"},radius:{type:String,default:"0"},lazyLoad:{type:Boolean,default:!1},fade:{type:Boolean,default:!0},border:{type:String,default:""},otherStyle:{type:Object,default(){return{}}},click:{type:Boolean,default:!0},useNativePic:{type:Boolean,default:!0}},data(){return{isLoad:!1,placeSrc:"/static/img_load.png",path:""}},watch:{src(){this.isLoad=!1,this.path=this.parse()}},computed:{viewStyle(){let e={width:this.w,height:this.h};return this.setRadius(e)},imgStyle(){let e={width:this.w,height:this.h};return e=Object.assign(e,this.otherStyle),this.setRadius(e)},borderStyle(){return this.border?{border:this.border}:{}},placeViewStyle(){return{width:this.placeW,height:this.placeW,position:"relative"}}},methods:{clickImg(e){this.$emit("click",e)},setRadius(e){let t=this.radius.split(" ");return t.length<=1?e.borderRadius=this.radius:(e.borderTopLeftRadius=t[0],e.borderTopRightRadius=t[1],e.borderBottomRightRadius=t[2],e.borderBottomLeftRadius=t[3]),e},onLoad(){this.path&&(this.isLoad=!0,this.$emit("onLoad"))},parse(){return this.src?this.useNativePic?this.src:this.src.startsWith("file://")?this.src:this.src.startsWith("/var/mobile/")?"file://"+this.src:this.src.startsWith("/storage/")?this.src:this.src.startsWith("https")?this.src:this.useNativePic?this.src:getApp().globalData.kfOssPicPath+this.src:""}},created(){this.path=this.parse()}};function As(e,t,i,n,a,s){return(0,F.openBlock)(),(0,F.createElementBlock)("view",{class:"l-img",onClick:t[1]||(t[1]=(...o)=>s.clickImg&&s.clickImg(...o)),style:(0,F.normalizeStyle)([s.viewStyle,s.borderStyle]),renderWhole:!0},[(0,F.createElementVNode)("view",{class:"l-img",style:(0,F.normalizeStyle)([{position:"relative"},s.viewStyle])},[a.isLoad?(0,F.createCommentVNode)("",!0):((0,F.openBlock)(),(0,F.createElementBlock)("view",{key:0,style:(0,F.normalizeStyle)(s.placeViewStyle)},[(0,F.createElementVNode)("u-image",{src:a.placeSrc,style:(0,F.normalizeStyle)({width:i.placeW,height:i.placeW})},null,12,["src"])],4)),(0,F.createElementVNode)("u-image",{onLoad:t[0]||(t[0]=(...o)=>s.onLoad&&s.onLoad(...o)),src:a.path,mode:i.mode,lazyLoad:i.lazyLoad,fadeShow:i.fade,style:(0,F.normalizeStyle)([s.imgStyle,s.borderStyle]),class:"place-img"},null,44,["src","mode","lazyLoad","fadeShow"])],4)],4)}var ee=O(bs,[["render",As],["styles",[_s]]]);function ks(e){return plus.io.convertLocalFileSystemURL(e)}var vs=["titleIcon","titleIconRadius","subtitleText","subtitleSize","subtitleColor","subtitleOverflow","titleAlign","backgroundImage","backgroundRepeat","blurEffect"],Ss={props:{title:{type:String,default:""},titleIcon:{type:String,default:""},titleIconRadius:{type:String,default:""},subtitleText:{type:String,default:""},subtitleSize:{type:String,default:""},subtitleColor:{type:String,default:""},subtitleOverflow:{type:String,default:""},titleAlign:{type:String,default:""},backgroundImage:{type:String,default:""},backgroundRepeat:{type:String,default:""},blurEffect:{type:String,default:""},loading:{type:Boolean,default:!1},frontColor:{type:String,default:"#ffffff"},backgroundColor:{type:String,default:"#000000"},colorAnimationDuration:{type:Number,default:0},colorAnimationTimingFunc:{type:String,default:"linear"}},created(){let e=getCurrentPages(),t=e[e.length-1];this.__$page=t,this.$watch("title",()=>{this.setNavigationBarTitle()}),this.$watch("loading",()=>{this.setNavigationBarLoading()}),this.$watch(()=>[this.frontColor,this.backgroundColor,this.colorAnimationDuration,this.colorAnimationTimingFunc],()=>{this.setNavigationBarColor()}),this.__$webview=t.$getAppWebview(),vs.forEach(i=>{let n={};(this[i]||this[i].length>0)&&(n[i]=this[i]),this.setTitleNView(n),this.$watch(i,a=>{let s={};s[i]=a,this.setTitleNView(s)})})},beforeMount(){this.title&&this.setNavigationBarTitle(),this.setNavigationBarLoading(),this.setNavigationBarColor()},methods:{setNavigationBarTitle(){uni.setNavigationBarTitle({__page__:this.__$page,title:this.title})},setNavigationBarLoading(){uni[(this.loading?"show":"hide")+"NavigationBarLoading"]({__page__:this.__$page})},setNavigationBarColor(){uni.setNavigationBarColor({__page__:this.__$page,frontColor:this.frontColor,backgroundColor:this.backgroundColor,animation:{duration:this.colorAnimationDuration,timingFunc:this.colorAnimationTimingFunc}})},setTitleNView(e){let t=this.__$webview,i=t.getStyle();i&&i.titleNView&&t.setStyle({titleNView:e})}}};function Cs(e,t,i,n,a,s){return(0,r.openBlock)(),(0,r.createElementBlock)("view",{style:{display:"none"},renderWhole:!0})}var Ts=O(Ss,[["render",Cs]]),xs={name:"PageMeta",setup(e,{emit:t}){di(i=>{t("resize",i)})},props:{backgroundTextStyle:{type:String,default:"dark",validator(e){return["dark","light"].indexOf(e)!==-1}},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created(){let e=getCurrentPages()[0];this.$pageVm=e.$vm||e,this._currentWebview=e.$getAppWebview(),this.enablePullDownRefresh&&this.setPullDownRefresh(this._currentWebview,!0),this.$watch("enablePullDownRefresh",t=>{this.setPullDownRefresh(this._currentWebview,t)}),this.$watch("backgroundTextStyle",()=>{this.setBackgroundTextStyle()}),this.$watch(()=>[this.rootFontSize,this.pageStyle],()=>{this.setPageMeta()}),this.$watch(()=>[this.backgroundColor,this.backgroundColorTop,this.backgroundColorBottom],()=>{this.setBackgroundColor()}),this.$watch(()=>[this.scrollTop,this.scrollDuration],()=>{this.pageScrollTo()})},beforeMount(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle()},mounted(){this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh(e,t){e.setStyle({pullToRefresh:{support:t,style:plus.os.name==="Android"?"circle":"default"}})},setPageMeta(){uni.setPageMeta({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle(){},setBackgroundColor(){},pageScrollTo(){let e=String(this.scrollTop);e.indexOf("rpx")!==-1&&(e=uni.upx2px(e.replace("rpx",""))),e=parseFloat(e),!isNaN(e)&&uni.pageScrollTo({scrollTop:e,duration:this.scrollDuration,success:()=>{}})}}};function Is(e,t,i,n,a,s){return(0,r.openBlock)(),(0,r.createElementBlock)("view",{style:{display:"none"},renderWhole:!0},[(0,r.renderSlot)(e.$slots,"default")])}var Ls=O(xs,[["render",Is]]),je=0,Ue=0,K={titleTimeCheck:5,parseSendData(e,t,i){let n={for_uid:e,isSend:!0,msg_type:i,mtime:new Date().getTime(),msg_content:{}};switch(i){case M.TXT:n.msg_content={content:t};break;case M.IMG:n.msg_content={image_url:t.path,image_width:t.width,image_height:t.height,small_url:t.path};break;case M.VIDEO:n.msg_content={url:t.path,cover:t.coverPath,width:t.width,height:t.height,duration:t.duration};break;case M.VOICE:n.msg_content={voice_url:t.path,voice_duration:t.duration};break;case M.HUNG_UP:n.msg_content={end_type:t}}return n},parseMsgTime(e){return{msg_type:1e3,ctime:e,showTime:ni(e)}},checkTimeDiff(e,t,i){return Math.abs(e-t)>i*60*1e3},getHistoryTitleTime(e,t=K.titleTimeCheck){String(e).length==16&&(e=e/1e3);let i=-1;if(je==0)return je=e,null;i=je;let n=null;return mt(i,e,t)&&(n=K.parseMsgTime(i)),je=e,n},getAddTitleTime(e,t=K.titleTimeCheck){if(String(e).length==16&&(e=e/1e3),Ue==0)return Ue=e,null;let i=null;return mt(Ue,e,t)&&(i=K.parseMsgTime(e),Ue=e),i}},pe={request(e,t,i,n,a=!1){return new Promise((s,o)=>{let l=!1;l=getApp().globalData.kfToken;let c={"content-type":"application/json",ua:getApp().globalData.kfUa};l&&(c.Authorization=`Bearer ${l}`),t.nonce=we.md5(dt()+new Date().getTime());let u=getApp().globalData.kfApiDesVal,d=vt(t,j.kfApiSignValue),m=getApp().globalData.s.state.AES.encrypt(u,JSON.stringify(d));uni.request({url:getApp().globalData.kfApiHost+e,method:"POST",header:c,data:m,dataType:"json",timeout:1e4,complete(_){return ie(this,null,function*(){if(i&&uni.hideLoading(),_.statusCode==200){let p=_.data,b=getApp().globalData.s.state.AES.decrypt(u,p);if(b=ct(b),!b){n&&o(b);return}if(C(b.msg)||kt(b.msg),b.ok===99)try{yield getApp().kfCreateUser();let y=yield api.request(e,t,i,n,a);s(y);return}catch(y){return te}if(b.ok>0){s(b);return}n&&o(b)}else if(n)o(_);else return te})},fail(_){}})})}},Si=fe("UploadModule"),Di="/upload/params";function Pi(e){C(e)||pe.request("/upload/success",{id:e,uid:getApp().globalData.kfUid},!1,!0).then(t=>{},t=>{})}function Ci(e,t,i,n,a=null,s=null){return new Promise((o,l)=>ie(this,null,function*(){let c=e.replace("file://",""),u={flag:t,type:i};a&&(u.width=a.width,u.height=a.height);try{if(n){let m=yield At(c),g="";m&&(g=m.digest),C(g)||(u.md5=g),u.uid=getApp().globalData.kfUid}let d=yield pe.request(Di,u,!1,!0);if(d.ok==1&&d.data.is_upload)D("log","at common/api-upload-kf.js:36","upload media is_upload true"),o({path:d.data.dir,smallPath:d.data.small_url,uploadId:d.data.upload_id||0});else{let m=d.data.upload_id,g=yield Oi(c,"",d.data);m&&Pi([m]),g.uploadId=m||0,o(g)}}catch(d){let m=ii(d);D("error","at common/api-upload-kf.js:51","upload media fail "+m),l(d)}}))}function Ds(e,t,i,n,a,s=!0,o=null,l=!0){return ie(this,null,function*(){let c={};try{t.startsWith("_doc")&&(t=plus.io.convertLocalFileSystemURL(t));let u={},d=j.isAndroid?t:`file://${t}`,m=t,g=i;if(c={flag:e,type:j.VIDEO},o&&(c.width=o.width,c.height=o.height),l){let b=yield At(m),y="";b&&(y=b.digest),C(y)||(c.md5=y)}let _=yield pe.request(Di,c,!1,!0),p;if(_.ok==1&&_.data.is_upload)return{url:_.data.dir,coverUrl:_.data.cover_url,smallUrl:_.data.small_url,uploadId:_.data.upload_id||0};{_.data&&(p=_.data.upload_id);let b=yield _i(d);if(s&&b?b.size>8*1024*1024:!1){let A=yield ki(d,"medium");m=plus.io.convertLocalFileSystemURL(A.tempFilePath),g=yield bt(m,n,a)}return m=m.replace("file://",""),g=g.replace("file://",""),u={url:_.data.dir.path,coverUrl:_.data.dir.cover_path,smallUrl:_.data.dir.small_url,uploadId:_.data.upload_id||0},yield Oi(m,g,_.data),p&&Pi([p]),u}}catch(u){throw D("error","at common/api-upload-kf.js:111","upload video error",u),u}})}function Oi(e,t,i,n=0,a=0){return new Promise((s,o)=>{Si?Si.singleUpS3({filePath:e,isBase64:n,coverFilePath:t,coverIsBase64:a,ossInfo:i},l=>{D("log","at common/api-upload-kf.js:128","upload plugin s3 result",l),(typeof l=="object"?l.success:l)?s({path:i.dir.path,smallPath:i.dir.small_url}):o(`_upModuleS3 ${JSON.stringify(l)}`)}):o("UploadModule null")})}var Ps=fe("dom"),Os={data(){return{MSG:M,bgColor:"#F8F8F8",sW:getApp().globalData.window.width,viewHeight:getApp().globalData.window.height-getApp().globalData.window.statusBarHeight-44,statusBarHeight:getApp().globalData.window.statusBarHeight,showVideoCall:getApp().globalData.kfShowVideoCall,itemHeightLast:20,itemHeightFirst:20,inputFocused:0,messageNone:1,addList:[],historyList:[],msgHasMore:!1,lastTitleTime:0,previewList:[],previewKeyList:[],scrollable:!0,changeHBottom:0,userId:"",syncMtime:0,lastMtime:0,userInfos:{},sendStatusSrc:!1,barSlotHeight:uni.upx2px(84),isAddTitleClick:!1}},computed:{classRotate(){return this.messageNone?"":"list-rotate"},keyboardHeight(){return this.inputFocused?getApp().globalData.keyboardH:0}},methods:{clickMsgList(e){e&&e.stopPropagation(),this.$refs.msgBar&&this.$refs.msgBar.hide()},clickBarVideo(){uni.navigateTo({url:"/pagesChat/call"})},clickBack(){j.isAndroid?plus.runtime.quit():typeof getApp().globalData.pluginApplet.close=="function"&&getApp().globalData.pluginApplet.close()},clickPicture(e){let t=this.previewKeyList.indexOf(e.pKey);t!=-1&&wi(this.previewList,t,0)},addPreviewInfo(e,t){if([M.IMG,M.VIDEO].indexOf(Number(e.msg_type))==-1)return null;try{let i=dt(),n=e.msg_content,a=yi(e,n);return t==1?(this.previewList.unshift(a),this.previewKeyList.unshift(i)):(this.previewList.push(a),this.previewKeyList.push(i)),i}catch(i){return null}},parseMsgItem(e,t,i,n){if(i==1){let s=K.getHistoryTitleTime(t.mtime);s!=null&&n!=0&&e.push(s)}else{let s=K.getAddTitleTime(t.mtime);s!=null&&e.push(s)}t.isSend=t.for_uid==getApp().globalData.kfUid;let a=this.addPreviewInfo(t,i);a&&(t.pKey=a),e.push(t)},onInputFocused(e){this.inputFocused=e,this.$nextTick(()=>{e&&this.scrollBottom()})},onLoadMore(){if(this.messageNone||this.loading)return;this.loading=!0,this.msgHasMore=!0,this.lastMtime=this.historyList[this.historyList.length-1].mtime;let e={uid:this.userId,sync_mtime:this.syncMtime,last_mtime:this.lastMtime};pe.request("/msg/service",e).then(t=>{this.msgHasMore=!1,this.loading=!1;let i=t.data.list.length?t.data.list:[];if(C(i))return;let n=[];for(let a in i)this.parseMsgItem(n,i[a],2,a);this.historyList=[...this.historyList,...n]})},onSendAudio(e){!e||!e.path||!e.duration||this.sendVoice(e.path,e.duration)},onInputLineChange(){this.messageNone&&this.scrollBottom()},scrollList(e,t=!0){Ps.scrollToElement(e,{animated:t})},scrollBottom(e=!1){let t=this.messageNone?"cellNew":"cellLast";this.scrollList(this.$refs[t],e)},addMsg(e,t){this.addMsgTimeByLast(e.mtime);let i=this.messageNone?1:2,n=this.addPreviewInfo(e,i);n&&(e.pKey=n),this.addList.push(JSON.parse(JSON.stringify(e))),this.$nextTick(()=>{this.scrollBottom(),typeof t=="function"&&t()})},sendVoice(e,t){return ie(this,null,function*(){let i=K.parseSendData(this.userId,{path:e,duration:t},M.VOICE);this.addMsg(i,()=>{this.$refs[`msg${i.mtime}`][0].loadingShow()});let n=e.startsWith("_doc")?ks(e):e,a=yield Ci(n,"message",3,!1);this.checkSendStatus(i),this.sendMsg(i,a,()=>{this.$refs[`msg${i.mtime}`][0].loadingHide()})})},onChoosePicture(e,t){return ie(this,null,function*(){let i;if(e==0){i=K.parseSendData(this.userId,t,M.IMG),this.addMsg(i,()=>{this.$refs[`msg${i.mtime}`][0].loadingShow()});let n=i.msg_content,a=yield Ci(n.image_url,"message",1,!0,{width:n.image_width,height:n.image_height});this.checkSendStatus(i),this.sendMsg(i,a,()=>{this.$refs[`msg${i.mtime}`][0].loadingHide()})}if(e==1){i=K.parseSendData(this.userId,t,M.VIDEO),this.addMsg(i,()=>{this.$refs[`msg${i.mtime}`][0].loadingShow()});let n=i.msg_content,a=yield Ds("message",n.url,n.cover,n.width,n.height,!0,{width:n.width,height:n.height});this.checkSendStatus(i),this.sendMsg(i,a,()=>{this.$refs[`msg${i.mtime}`][0].loadingHide()})}})},sendMsg(e,t=null,i){if(e.msg_type!=M.TXT&&(delete e.for_uid,delete e.isSend,delete e.pKey),!C(t)&&e.msg_type==M.IMG){let n=e.msg_content;n.small_url=t.smallPath,n.image_url=t.path,n.upload_id=t.uploadId}if(!C(t)&&e.msg_type==M.VIDEO){let n=e.msg_content;n.url=t.url,n.cover=t.coverUrl,n.upload_id=t.uploadId}if(!C(t)&&e.msg_type==M.VOICE){let n=e.msg_content;n.voice_url=t.path}pe.request("/msg/send",e).then(n=>{typeof i=="function"&&i()})},onSend(e){let t=K.parseSendData(this.userId,e,M.TXT);this.addMsgTimeByLast(t.mtime),this.addMsg(t,()=>{this.$refs[`msg${t.mtime}`][0].loadingShow()});let i={msg_type:1,msg_content:{content:e}};this.checkSendStatus(t),this.sendMsg(i,"",()=>{this.$refs[`msg${t.mtime}`][0].loadingHide()})},checkSendStatus(e){setTimeout(()=>{this.$refs[`msg${e.mtime}`][0].getLoadingStatus()&&this.$refs[`msg${e.mtime}`][0].setErrorStatus()},1e4)},addMsgTimeByLast(e,t=5){if(this.lastTitleTime==0){let i=this.addList.length>0?this.addList[this.addList.length-1]:this.historyList[0];!C(i)&&i.ctime&&(this.lastTitleTime=i.ctime)}K.checkTimeDiff(this.lastTitleTime,e,t)&&(this.addList.push(K.parseMsgTime(e)),this.lastTitleTime=e)},initMsgList(){return ie(this,null,function*(){let e={sync_mtime:this.syncMtime,last_mtime:this.lastMtime},t=yield pe.request("/msg/service",e);this.messageNone=t.data.has_more?0:1;let i=t.data.list.length?t.data.list:[];if(C(i))return;let n=[];if(this.messageNone){for(let a=i.length-1,s=0;a>=s;a--)this.parseMsgItem(n,i[a],1,a);this.addList=n}else{for(let a in i)this.parseMsgItem(n,i[a],2,a);this.historyList=n}this.$nextTick(()=>{this.messageNone&&this.scrollBottom()})})}},onLoad(e){return ie(this,null,function*(){yield getApp().kfInit(),this.initMsgList(),uni.$on("event_socket_message",t=>{t.isSend=!1,this.addList.push(t),this.$nextTick(()=>{this.scrollBottom()})}),uni.$on("event_hung_up_notice",t=>{let i=K.parseSendData(this.userId,t,M.HUNG_UP);this.addMsg(i,"")})})},onUnload(){uni.$off("event_socket_message"),uni.$off("event_hung_up_notice")}},Ms={data(){return{playTimer:!1,isPlayingByTouch:!1,mAudioInner:uni.createInnerAudioContext(),mLastPlayCTime:0}},methods:{clickMsgVoice(e,t){let i=this.$refs[`msg${e.mtime}`][0],n=e.msg_content;if(!i)return;if(typeof this.mAudioInner.paused!="undefined"&&!this.mAudioInner.paused&&(this.mAudioInner.stop(),this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.$refs[`msg${this.mLastPlayCTime}`][0].pauseAnim(),this.mLastPlayCTime==e.mtime)){this.mLastPlayCTime=0;return}this.mAudioInner.src=this.parseVoiceUrl(n.voice_url),this.mAudioInner.startTime=t,this.mLastPlayCTime=e.mtime,this.mAudioInner.play(),this.handlePlayTimer(e.mtime),i.changeIcon(!0),this.$refs[`msg${this.mLastPlayCTime}`][0].playAnim()},onMsgVoiceChange(e,t,i){if(!e){this.scrollable=!1,!this.mAudioInner.paused&&i.mtime==this.mLastPlayCTime?(this.isPlayingByTouch=!0,this.mAudioInner.pause(),this.playTimer&&clearInterval(this.playTimer)):this.isPlayingByTouch=!1;return}this.scrollable=!0,this.isPlayingByTouch&&(this.mAudioInner.seek(t),this.mAudioInner.play(),this.handlePlayTimer(i.mtime))},handlePlayTimer(e){let t=this.$refs[`msg${e}`][0];this.playTimer&&clearInterval(this.playTimer),this.playTimer=setInterval(()=>{if(this.mAudioInner.paused)return;let i=this.mAudioInner.currentTime,n=Math.round(i*100);isNaN(n)||t.changeDuration(Math.round(i),n)},100)},parseVoiceUrl(e){return C(e)?"":e.substr(0,5)==="_doc/"||e.substr(0,4)==="http"?e:getApp().globalData.kfOssPath+e},initAudio(){this.mAudioInner.onEnded(()=>{this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.$refs[`msg${this.mLastPlayCTime}`][0].changeDuration(-1,0),this.$refs[`msg${this.mLastPlayCTime}`][0].pauseAnim(),this.mLastPlayCTime=0}),this.mAudioInner.onError(e=>{this.playTimer&&clearInterval(this.playTimer),this.$refs[`msg${this.mLastPlayCTime}`][0].changeIcon(!1),this.$refs[`msg${this.mLastPlayCTime}`][0].playAnim(),this.mLastPlayCTime=0})}},onLoad(){this.initAudio()},onUnload(){this.mAudioInner.destroy(),this.playTimer&&clearInterval(this.playTimer)}},Es=e=>e!==null&&typeof e=="object",Fs=["{","}"],Tt=class{constructor(){this._caches=Object.create(null)}interpolate(t,i,n=Fs){if(!i)return[t];let a=this._caches[t];return a||(a=Bs(t,n),this._caches[t]=a),Vs(a,i)}},Ns=/^(?:\d)+/,Rs=/^(?:\w)+/;function Bs(e,[t,i]){let n=[],a=0,s="";for(;a<e.length;){let o=e[a++];if(o===t){s&&n.push({type:"text",value:s}),s="";let l="";for(o=e[a++];o!==void 0&&o!==i;)l+=o,o=e[a++];let c=o===i,u=Ns.test(l)?"list":c&&Rs.test(l)?"named":"unknown";n.push({value:l,type:u})}else s+=o}return s&&n.push({type:"text",value:s}),n}function Vs(e,t){let i=[],n=0,a=Array.isArray(t)?"list":Es(t)?"named":"unknown";if(a==="unknown")return i;for(;n<e.length;){let s=e[n];switch(s.type){case"text":i.push(s.value);break;case"list":i.push(t[parseInt(s.value,10)]);break;case"named":a==="named"&&i.push(t[s.value]);break}n++}return i}var St="zh-Hans",Ti="zh-Hant",ge="en",Ws="fr",Hs="es",js=Object.prototype.hasOwnProperty,xi=(e,t)=>js.call(e,t),Us=new Tt;function zs(e,t){return!!t.find(i=>e.indexOf(i)!==-1)}function $s(e,t){return t.find(i=>e.indexOf(i)===0)}function Ii(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if(e=e.toLowerCase(),e==="chinese")return St;if(e.indexOf("zh")===0)return e.indexOf("-hans")>-1?St:e.indexOf("-hant")>-1||zs(e,["-tw","-hk","-mo","-cht"])?Ti:St;let i=[ge,Ws,Hs];t&&Object.keys(t).length>0&&(i=Object.keys(t));let n=$s(e,i);if(n)return n}var xt=class{constructor({locale:t,fallbackLocale:i,messages:n,watcher:a,formater:s}){this.locale=ge,this.fallbackLocale=ge,this.message={},this.messages={},this.watchers=[],i&&(this.fallbackLocale=i),this.formater=s||Us,this.messages=n||{},this.setLocale(t||ge),a&&this.watchLocale(a)}setLocale(t){let i=this.locale;this.locale=Ii(t,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],i!==this.locale&&this.watchers.forEach(n=>{n(this.locale,i)})}getLocale(){return this.locale}watchLocale(t){let i=this.watchers.push(t)-1;return()=>{this.watchers.splice(i,1)}}add(t,i,n=!0){let a=this.messages[t];a?n?Object.assign(a,i):Object.keys(i).forEach(s=>{xi(a,s)||(a[s]=i[s])}):this.messages[t]=i}f(t,i,n){return this.formater.interpolate(t,i,n).join("")}t(t,i,n){let a=this.message;return typeof i=="string"?(i=Ii(i,this.messages),i&&(a=this.messages[i])):n=i,xi(a,t)?this.formater.interpolate(a[t],n).join(""):(console.warn(`Cannot translate the value of keypath ${t}. Use the value of keypath as default.`),t)}};function Gs(e,t){e.$watchLocale?e.$watchLocale(i=>{t.setLocale(i)}):e.$watch(()=>e.$locale,i=>{t.setLocale(i)})}function Js(){return typeof uni!="undefined"&&uni.getLocale?uni.getLocale():typeof global!="undefined"&&global.getLocale?global.getLocale():ge}function Ys(e,t={},i,n){typeof e!="string"&&([e,t]=[t,e]),typeof e!="string"&&(e=Js()),typeof i!="string"&&(i=typeof __uniConfig!="undefined"&&__uniConfig.fallbackLocale||ge);let a=new xt({locale:e,fallbackLocale:i,messages:t,watcher:n}),s=(o,l)=>{if(typeof getApp!="function")s=function(c,u){return a.t(c,u)};else{let c=!1;s=function(u,d){let m=getApp().$vm;return m&&(m.$locale,c||(c=!0,Gs(m,a))),a.t(u,d)}}return s(o,l)};return{i18n:a,f(o,l,c){return a.f(o,l,c)},t(o,l){return s(o,l)},add(o,l,c=!0){return a.add(o,l,c)},watch(o){return a.watchLocale(o)},getLocale(){return a.getLocale()},setLocale(o){return a.setLocale(o)}}}var Ks={"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},Zs={"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"Loading...","uni-load-more.contentnomore":"No more data"},Qs={"uni-load-more.contentdown":"\u4E0A\u62C9\u986F\u793A\u66F4\u591A","uni-load-more.contentrefresh":"\u6B63\u5728\u52A0\u8F09...","uni-load-more.contentnomore":"\u6C92\u6709\u66F4\u591A\u6578\u64DA\u4E86"},Xs={"uni-load-more.contentdown":"Tire hacia arriba para mostrar m\xE1s","uni-load-more.contentrefresh":"cargando...","uni-load-more.contentnomore":"No m\xE1s datos"},qs={"uni-load-more.contentdown":"\u0627\u0633\u062D\u0628 \u0644\u0623\u0639\u0644\u0649 \u0644\u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u0645\u0632\u064A\u062F","uni-load-more.contentrefresh":"\u062C\u0627\u0631 \u0627\u0644\u062A\u062D\u0645\u064A\u0644...","uni-load-more.contentnomore":"\u0644\u0627 \u0645\u0632\u064A\u062F \u0645\u0646 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"},er={"uni-load-more.contentdown":"K\xE9o l\xEAn \u0111\u1EC3 hi\u1EC3n th\u1ECB th\xEAm","uni-load-more.contentrefresh":"\u0111ang t\u1EA3i...","uni-load-more.contentnomore":"Kh\xF4ng c\xF2n d\u1EEF li\u1EC7u"},tr={en:Ks,"zh-Hans":Zs,"zh-Hant":Qs,es:Xs,ar:qs,vi:er},ir={"uni-load-more":{"":{flexDirection:"row",height:40,alignItems:"center",justifyContent:"center"}},"uni-load-more__text":{"":{fontSize:14,marginLeft:8}},"uni-load-more__img":{"":{width:24,height:24}},"uni-load-more__img--nvue":{"":{color:"#666666"}},"uni-load-more__img--android":{"":{width:24,height:24,transform:"rotate(0deg)"}},"uni-load-more__img--ios":{"":{width:24,height:24,transform:"rotate(0deg)"}}},Mi;setTimeout(()=>{Mi=uni.getSystemInfoSync().platform},16);var{t:Ct}=Ys(tr),nr={name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default(){return{contentdown:"",contentrefresh:"",contentnomore:""}}},showText:{type:Boolean,default:!1}},data(){return{webviewHide:!1,platform:Mi,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="}},computed:{iconSnowWidth(){return(Math.floor(this.iconSize/24)||1)*2},contentdownText(){return this.contentText.contentdown||Ct("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||Ct("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||Ct("uni-load-more.contentnomore")}},mounted(){var e=getCurrentPages(),t=e[e.length-1],i=t.$getAppWebview();i.addEventListener("hide",()=>{this.webviewHide=!0}),i.addEventListener("show",()=>{this.webviewHide=!1})},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}};function ar(e,t,i,n,a,s){return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"uni-load-more",onClick:t[0]||(t[0]=(...o)=>s.onClick&&s.onClick(...o)),renderWhole:!0},[!a.webviewHide&&i.status==="loading"&&i.showIcon?((0,r.openBlock)(),(0,r.createElementBlock)("loading-indicator",{key:0,style:(0,r.normalizeStyle)({color:i.color,width:i.iconSize+"px",height:i.iconSize+"px"}),animating:!0,class:"uni-load-more__img uni-load-more__img--nvue"},null,4)):(0,r.createCommentVNode)("",!0),i.showText?((0,r.openBlock)(),(0,r.createElementBlock)("u-text",{key:1,class:"uni-load-more__text",style:(0,r.normalizeStyle)({color:i.color})},(0,r.toDisplayString)(i.status==="more"?s.contentdownText:i.status==="loading"?s.contentrefreshText:s.contentnomoreText),5)):(0,r.createCommentVNode)("",!0)])}var sr=O(nr,[["render",ar],["styles",[ir]]]),rr={center:{"":{alignItems:"center",flexDirection:"row"}},"flex-start":{"":{justifyContent:"flex-start"}},"flex-end":{"":{justifyContent:"flex-end"}},container:{"":{paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10,alignItems:"flex-end",flexDirection:"row"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"view-send":{"":{paddingLeft:"26rpx"}},content:{".view-send ":{borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",borderBottomRightRadius:"16rpx",borderBottomLeftRadius:"16rpx",overflow:"hidden"},".view-receive ":{borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",borderBottomRightRadius:"16rpx",borderBottomLeftRadius:"16rpx",overflow:"hidden"}},"view-receive":{"":{paddingRight:"26rpx"}}},or={components:{KfImg:ee},props:{data:{type:Object,default(){return{}}}},data(){return{maxWidth:getApp().globalData.window.width-20-6-uni.upx2px(32),showLoading:!1,msgState:0,customerAvatar:getApp().globalData.kfCustomerAvatar,userAvatar:getApp().globalData.kfUserAvatar}},computed:{viewBg(){return this.data.isSend?"#B6CBFF":"#FFFFFF"},sendStatusSrc(){return this.msgState==hi.FAIL?"/static/i-error.png":""}},methods:{loadingShow(){this.showLoading=!0},loadingHide(){this.showLoading=!1},getLoadingStatus(){return this.showLoading},setErrorStatus(){this.showLoading=!1,this.msgState=1}}};function lr(e,t,i,n,a,s){let o=me((0,r.resolveDynamicComponent)("uni-load-more"),sr),l=(0,r.resolveComponent)("kf-img");return(0,r.openBlock)(),(0,r.createElementBlock)("view",{style:{position:"relative"},renderWhole:!0},[i.data.isSend?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"container flex-end"},[(0,r.createElementVNode)("view",{class:"center",style:{"margin-right":"8px","justify-content":"flex-end"}},[(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)({maxWidth:a.maxWidth+"px"}),class:"center flex-end"},[(0,r.createElementVNode)("view",null,[a.showLoading?((0,r.openBlock)(),(0,r.createBlock)(o,{key:0,style:{height:"30px","margin-right":"10rpx"},status:"loading",iconSize:17})):(0,r.createCommentVNode)("",!0),s.sendStatusSrc?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,style:{padding:"10rpx"}},[(0,r.createVNode)(l,{src:s.sendStatusSrc,w:"32rpx",h:"32rpx"},null,8,["src"])])):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)([i.data.isSend?"view-send":"view-receive"]),style:{flex:"1"}},[(0,r.createElementVNode)("view",{class:"content",style:(0,r.normalizeStyle)({background:s.viewBg})},[(0,r.renderSlot)(e.$slots,"default",{style:"flex:1"})],4)],2)],4)]),(0,r.createVNode)(l,{src:a.userAvatar,w:"80rpx",h:"80rpx",radius:"40rpx",useNativePic:!1},null,8,["src"])])):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"container flex-start"},[(0,r.createVNode)(l,{src:a.customerAvatar,w:"80rpx",h:"80rpx",radius:"40rpx",useNativePic:!1},null,8,["src"]),(0,r.createElementVNode)("view",{class:"center",style:{"margin-left":"8px"}},[(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)({maxWidth:a.maxWidth+"px"}),class:"center flex-start"},[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)([i.data.isSend?"view-send":"view-receive"])},[(0,r.createElementVNode)("view",{class:"content",style:(0,r.normalizeStyle)({background:s.viewBg})},[(0,r.renderSlot)(e.$slots,"default")],4)],2)],4)])]))])}var ke=O(or,[["render",lr],["styles",[rr]]]),$e={methods:{loadingShow(){this.$refs.msgBase.loadingShow()},loadingHide(){this.$refs.msgBase.loadingHide()},getLoadingStatus(){return this.$refs.msgBase.getLoadingStatus()},setErrorStatus(){this.$refs.msgBase.setErrorStatus()},checkStopClick(e){return this.$refs.msgBase.isStopClick==1?(this.$refs.msgBase.isStopClick=0,e.stopPropagation(),!0):!1}}},cr={components:{MsgBase:ke},mixins:[$e],props:{data:{type:Object,default(){return{}}}},data(){return{maxWidthContent:getApp().globalData.window.width-130}},methods:{}};function ur(e,t,i,n,a,s){let o=(0,r.resolveComponent)("msg-base");return(0,r.openBlock)(),(0,r.createBlock)(o,{ref:"msgBase",data:i.data},{default:(0,r.withCtx)(()=>[i.data.msg_content&&i.data.msg_content.content?((0,r.openBlock)(),(0,r.createElementBlock)("u-text",{key:0,style:(0,r.normalizeStyle)([{"font-size":"32rpx","line-height":"38rpx",padding:"20rpx 24rpx"},{"max-width":a.maxWidthContent+"px"}])},(0,r.toDisplayString)(i.data.msg_content.content),5)):(0,r.createCommentVNode)("",!0)]),_:1},8,["data"])}var dr=O(cr,[["render",ur]]),fr={components:{MsgBase:ke,KfImg:ee},mixins:[$e],props:{data:{type:Object,default(){return{}}}},computed:{getWH(){let e=this.data.msg_content;return ft(e.image_width,e.image_height,200)},border(){return"1px solid #EEEEEE"}},data(){return{src:""}},methods:{clickPicture(e){this.checkStopClick(e)||this.$emit("clickPicture",this.data)}},created(){this.src=this.data.msg_content&&this.data.msg_content.small_url}};function mr(e,t,i,n,a,s){let o=(0,r.resolveComponent)("kf-img"),l=(0,r.resolveComponent)("msg-base");return(0,r.openBlock)(),(0,r.createBlock)(l,{ref:"msgBase",data:i.data},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(o,{mode:"aspectFill",onClick:s.clickPicture,src:a.src,placeW:`${s.getWH[0]}px`,w:s.getWH[0]+"px",h:s.getWH[1]+"px",radius:"16rpx","use-native-pic":!1},null,8,["onClick","src","placeW","w","h"])]),_:1},8,["data"])}var pr=O(fr,[["render",mr]]),gr={"msg-video":{"":{position:"relative",alignItems:"center",justifyContent:"center"}},"video-duration":{"":{color:"#FFFFFF",position:"absolute",bottom:0,right:0,paddingTop:"10rpx",paddingRight:"10rpx",paddingBottom:"10rpx",paddingLeft:"10rpx",fontSize:"24rpx"}}},hr={components:{KfImg:ee,MsgBase:ke},mixins:[$e],emits:["clickVideo"],props:{data:{type:Object,default(){return{}}}},data(){return{}},computed:{getWH(){let e=this.data.msg_content;return ft(e.width,e.height,200)},getDuration(){return _e(Math.round(this.data.msg_content.duration))}},methods:{clickVideo(e){this.checkStopClick(e)||(e.stopPropagation(),this.$emit("clickVideo",this.data))}}};function yr(e,t,i,n,a,s){let o=(0,r.resolveComponent)("kf-img"),l=(0,r.resolveComponent)("msg-base");return(0,r.openBlock)(),(0,r.createBlock)(l,{ref:"msgBase",data:i.data},{default:(0,r.withCtx)(()=>[i.data.msg_content&&i.data.msg_content.cover?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...c)=>s.clickVideo&&s.clickVideo(...c)),class:"msg-video",style:(0,r.normalizeStyle)({width:s.getWH[0]+"px",height:s.getWH[1]+"px"})},[(0,r.createVNode)(o,{onClick:s.clickVideo,src:i.data.msg_content.cover,w:s.getWH[0]+"px",h:s.getWH[1]+"px",radius:"16rpx",border:"1px solid #EEEEEE","use-native-pic":!1,placeW:`${s.getWH[0]}px`},null,8,["onClick","src","w","h","placeW"]),(0,r.createVNode)(o,{onClick:s.clickVideo,src:"/static/play_video.png",w:"56rpx",h:"56rpx",style:{position:"absolute"}},null,8,["onClick"]),(0,r.createElementVNode)("u-text",{class:"video-duration"},(0,r.toDisplayString)(s.getDuration),1)],4)):(0,r.createCommentVNode)("",!0)]),_:1},8,["data"])}var wr=O(hr,[["render",yr],["styles",[gr]]]),_r={center:{"":{alignItems:"center",flexDirection:"row"}}},br={components:{KfImg:ee},props:{images:{type:Array,default(){return[]}},w:{type:String,default(){return"0rpx"}},h:{type:String,default(){return"0rpx"}},pauseSrc:{type:String,default(){return""}}},data(){return{audioActionImg:"",timer:"",pauseAudioAction:!1,imageList:[]}},methods:{play(){this.timer||(this.timer=setInterval(()=>{let e;this.pauseAudioAction?(e=JSON.parse(JSON.stringify(this.images)),this.pauseAudioAction=!1):e=JSON.parse(JSON.stringify(this.imageList));let t=e[e.length-1];for(let i=e.length-1;i>=0;i--)i!=0?e[i]=e[i-1]:e[i]=t;this.imageList=e},200))},close(){this.timer&&clearInterval(this.timer),this.timer=null,this.pauseAudioAction=!0;let e=[];for(let t=0;t<this.imageList.length;++t)e[t]=this.pauseSrc;this.imageList=e}},created(){this.imageList=JSON.parse(JSON.stringify(this.images))}};function Ar(e,t,i,n,a,s){let o=(0,r.resolveComponent)("kf-img");return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"center",renderWhole:!0},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.imageList,(l,c)=>((0,r.openBlock)(),(0,r.createBlock)(o,{key:c,style:(0,r.normalizeStyle)({marginLeft:c>0?"10rpx":"0rpx"}),src:a.imageList[c],w:i.w,h:i.h},null,8,["style","src","w","h"]))),128))])}var Ei=O(br,[["render",Ar],["styles",[_r]]]),kr={"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"view-voice":{"":{alignItems:"center",flexDirection:"row",width:"380rpx",paddingTop:"10rpx",paddingRight:"10rpx",paddingBottom:"10rpx",paddingLeft:"10rpx"}},"text-duration":{"":{paddingTop:0,paddingRight:"24rpx",paddingBottom:0,paddingLeft:"26rpx",textAlign:"center",fontSize:"28rpx",lineHeight:"40rpx"}}},vr={mixins:[$e],components:{AudioPlayAni:Ei,KfImg:ee,MsgBase:ke},emits:["clickMsgVoice","onMsgVoiceChange"],props:{data:{type:Object,default(){return{}}}},data(){return{iconPlay:"/static/audio_msg_pause.png",sliderValue:0,curDuration:this.data.msg_content.voice_duration,sliderH:uni.upx2px(24),images:["/static/audio_msg_ani_1.png","/static/audio_msg_ani_2.png","/static/audio_msg_ani_3.png"]}},computed:{durationStr(){return this.curDuration<=0?"00:00":_e(this.curDuration)}},methods:{clickVoice(e){e&&e.stopPropagation(),ut(()=>{if(this.checkStopClick(e))return;let t=this.data.msg_content;this.$emit("clickMsgVoice",this.data,this.curDuration==t.voice_duration?0:this.curDuration)},500,"msg-voice-click")},changeDuration(e,t){let i=this.data.msg_content;e==-1&&(e=i.voice_duration),this.curDuration=e,this.sliderValue=parseInt(t/i.voice_duration)},changeIcon(e){this.iconPlay=`/static/audio_msg_${e?"play":"pause"}.png`},pauseAnim(){this.$refs.audioAnim.close()},playAnim(){this.$refs.audioAnim.play()}},mounted(){this.$refs.audioAnim.close()}};function Sr(e,t,i,n,a,s){let o=(0,r.resolveComponent)("kf-img"),l=(0,r.resolveComponent)("audio-play-ani"),c=(0,r.resolveComponent)("msg-base");return(0,r.openBlock)(),(0,r.createBlock)(c,{ref:"msgBase",data:i.data},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"view-voice",onClick:t[1]||(t[1]=(...u)=>s.clickVoice&&s.clickVoice(...u))},[(0,r.createElementVNode)("view",{onClick:t[0]||(t[0]=(...u)=>s.clickVoice&&s.clickVoice(...u)),class:"center-align",style:{width:"60rpx",height:"60rpx"}},[(0,r.createVNode)(o,{onClick:s.clickVoice,w:"60rpx",h:"60rpx",src:a.iconPlay},null,8,["onClick","src"])]),(0,r.createVNode)(l,{ref:"audioAnim",pauseSrc:"/static/audio_msg_ani_pause.png",images:a.images,w:"52rpx",h:"32rpx"},null,8,["images"]),(0,r.createElementVNode)("u-text",{style:{padding:"0 26rpx 0 26rpx","text-align":"center","font-size":"28rpx","line-height":"40rpx"}},(0,r.toDisplayString)(s.durationStr),1)])]),_:1},8,["data"])}var Cr=O(vr,[["render",Sr],["styles",[kr]]]),Tr={center:{"":{display:"flex",alignItems:"center",flexDirection:"row"}}},xr={components:{KfImg:ee,MsgBase:ke},props:{data:{type:Object,default(){return{}}}},data(){return{maxWidthContent:getApp().globalData.window.width-130}},computed:{notice(){return(this.data.msg_content&&this.data.msg_content.end_type)==1?"Declined by you":"Canceled"}},methods:{}};function Ir(e,t,i,n,a,s){let o=(0,r.resolveComponent)("kf-img"),l=(0,r.resolveComponent)("msg-base");return(0,r.openBlock)(),(0,r.createBlock)(l,{ref:"msgBase",data:i.data},{default:(0,r.withCtx)(()=>[s.notice?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"center",style:(0,r.normalizeStyle)({height:"60rpx",maxWidth:a.maxWidthContent+"px"})},[(0,r.createElementVNode)("view",{class:"center",style:{width:"60rpx",height:"60rpx","justify-content":"center"}},[(0,r.createVNode)(o,{src:"/static/call_video_fail.png",w:"40rpx",h:"40rpx"})]),(0,r.createElementVNode)("u-text",{style:{"font-size":"28rpx","font-weight":"500"}},"Video chat"),(0,r.createElementVNode)("u-text",{style:{padding:"18rpx 20rpx","line-height":"28rpx","font-size":"24rpx"}},(0,r.toDisplayString)(s.notice),1)],4)):(0,r.createCommentVNode)("",!0)]),_:1},8,["data"])}var Lr=O(xr,[["render",Ir],["styles",[Tr]]]),Dr={center:{"":{alignItems:"center",flexDirection:"row"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"center-between":{"":{alignItems:"center",flexDirection:"row",justifyContent:"space-between"}}},Ae=uni.getRecorderManager(),Pr={components:{KfImg:ee,AudioPlayAni:Ei},computed:{durationStr(){return this.recordDuration<=0?"00:00":_e(this.recordDuration)},playDurationStr(){return this.audioDurationPlay<=0?"00:00":_e(this.audioDurationPlay)}},props:{maxDuration:{type:Number,default:300}},data(){return{widthContent:getApp().globalData.window.width,recordTimer:!1,recordDuration:0,mAudioInner:uni.createInnerAudioContext(),isCancel:!1,audioPath:"",audioDuration:0,playStatus:"taking",audioPlayerIcon:"/static/audio_taking.png",audioDurationPlay:0,defHeight:Math.round(240*getApp().globalData.window.scaleH),statusBarHeight:uni.upx2px(96),images:["/static/audio_bar_ani_1.png","/static/audio_bar_ani_2.png","/static/audio_bar_ani_3.png","/static/audio_bar_ani_4.png","/static/audio_bar_ani_5.png"]}},methods:{clickAudio(e){e.stopPropagation()},clickDel(){this.$emit("onAudioCancel")},clickSend(){this.$emit("onAudioFinish",{path:this.audioPath,duration:this.audioDuration})},clickPlay(){this.playStatus!="taking"&&(this.mAudioInner.paused?(this.mAudioInner.play(),this.handlePlayerInterval()):(this.mAudioInner.pause(),this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer)))},handlePlayerInterval(){this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer),this.audioPlayerTimer=setInterval(()=>{let e=this.mAudioInner.currentTime,t=parseInt(e*100);isNaN(t)||(this.audioDurationPlay=parseInt(e))},100)},startRecordTimer(){this.recordTimer||(this.recordTimer=setInterval(()=>{if(this.recordDuration>=this.maxDuration){this.stopRecord();return}this.recordDuration+=1},1e3))},stopRecord(){this.recordTimer&&clearInterval(this.recordTimer),this.recordTimer=!1,this.$refs.audioAnim.close(),Ae.stop()},startRecord(){this.$nextTick(()=>{this.startRecordTimer(),Ae.start({duration:this.maxDuration*1e3,format:"aac"}),this.$refs.audioAnim.play()})},initAudioPreview(){this.mAudioInner.src=this.audioPath,this.audioDurationPlay=this.audioDuration},audioOnEndedListener(e){this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer),this.audioDurationPlay=this.audioDuration,this.$refs.audioAnim.close(),this.audioPlayerIcon="/static/audio_preview_pause.png"},audioOnPlayListener(){this.$refs.audioAnim.play(),this.audioPlayerIcon="/static/audio_preview_play.png"},audioOnPauseListener(){this.$refs.audioAnim.close(),this.audioPlayerIcon="/static/audio_preview_pause.png"}},created(){this.playStatus="taking",Ae.onStop(e=>{if(this.isCancel)return;D("info","at pagesChat/coms/msg-bar-audio.vue:151","----> record finish "+JSON.stringify(e));let t=uni.createInnerAudioContext(),i=e.tempFilePath,n=setTimeout(()=>{clearTimeout(n),t.destroy()},2e3);t.src=i,this.playStatus="pause",this.audioPlayerIcon="/static/audio_preview_pause.png",t.onCanplay(()=>{let a=t.duration;clearTimeout(n),D("info","at pagesChat/coms/msg-bar-audio.vue:169","-----> \u5B8C\u6210\u5F55\u5236 \u65F6\u957F = "+a),t.destroy(),this.audioPath=i,this.audioDuration=Math.round(a),this.initAudioPreview()})}),Ae.onError(e=>{D("error","at pagesChat/coms/msg-bar-audio.vue:178","----> MsgBarAudio mRecordManager onError "+JSON.stringify(e))}),this.mAudioInner.onEnded(this.audioOnEndedListener),this.mAudioInner.onPlay(this.audioOnPlayListener),this.mAudioInner.onPause(this.audioOnPauseListener)},beforeUnmount(){this.mAudioInner.destroy(),this.recordTimer&&(clearInterval(this.recordTimer),this.isCancel=!0,Ae.stop()),this.audioPlayerTimer&&clearInterval(this.audioPlayerTimer)}};function Or(e,t,i,n,a,s){let o=(0,r.resolveComponent)("kf-img"),l=(0,r.resolveComponent)("audio-play-ani");return(0,r.openBlock)(),(0,r.createElementBlock)("view",{onClick:t[3]||(t[3]=(...c)=>s.clickAudio&&s.clickAudio(...c)),style:(0,r.normalizeStyle)([{width:a.widthContent},{height:"100rpx","background-color":"#FFFFFF"}]),renderWhole:!0},[(0,r.createElementVNode)("view",{class:"center-between",style:{padding:"20rpx 24rpx 0rpx 24rpx"}},[(0,r.createElementVNode)("view",{onClick:t[0]||(t[0]=(...c)=>s.clickDel&&s.clickDel(...c)),class:"center-align",style:{width:"60rpx",height:"60rpx"}},[(0,r.createVNode)(o,{w:"60rpx",h:"60rpx",src:"/static/cancel_audio.png"})]),(0,r.createElementVNode)("view",{class:"center-between",style:{flex:"1",margin:"0rpx 32rpx 0rpx 24rpx","background-color":"#356FFF","border-radius":"16rpx",height:"72rpx",padding:"0rpx 8rpx"}},[(0,r.createElementVNode)("view",{onClick:t[1]||(t[1]=(...c)=>s.clickPlay&&s.clickPlay(...c)),class:"center-align",style:{width:"60rpx",height:"60rpx"}},[(0,r.createVNode)(o,{w:"60rpx",h:"60rpx",src:a.audioPlayerIcon},null,8,["src"])]),(0,r.createElementVNode)("view",{style:{"padding-left":"20rpx",flex:"1"}},[(0,r.createVNode)(l,{ref:"audioAnim",pauseSrc:"/static/audio_bar_ani_pause.png",images:a.images,w:"52rpx",h:"32rpx"},null,8,["images"])]),(0,r.createElementVNode)("u-text",{style:{color:"#FFFFFF","font-size":"24rpx","margin-right":"20rpx"}},(0,r.toDisplayString)(a.playStatus=="taking"?s.durationStr:s.playDurationStr),1)]),(0,r.createElementVNode)("view",{onClick:t[2]||(t[2]=(...c)=>s.clickSend&&s.clickSend(...c)),class:"center-align",style:{width:"60rpx",height:"60rpx"}},[(0,r.createVNode)(o,{w:"60rpx",h:"60rpx",src:"/static/send_active.png"})])])],4)}var Mr=O(Pr,[["render",Or],["styles",[Dr]]]),Er={center:{"":{alignItems:"center",flexDirection:"row"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"flex-wrap":{"":{flexWrap:"wrap",flexDirection:"row"}},"msg-bar-express":{"":{position:"relative",backgroundColor:"#FFFFFF",height:0}},"expression-bar":{"":{alignItems:"center",flexDirection:"row",justifyContent:"space-between",backgroundColor:"#FFFFFF",paddingTop:"14rpx",paddingRight:"36rpx",paddingBottom:"14rpx",paddingLeft:"36rpx"}},line:{".expression-bar ":{height:1,backgroundColor:"#CCCCCC",transform:"scaleY(0.5)",transformOrigin:"50% 100%",opacity:.5}},"emoji-wrap":{"":{paddingTop:"20rpx",paddingRight:10,paddingBottom:0,paddingLeft:10}},"pig-wrap":{"":{paddingTop:0,paddingRight:5,paddingBottom:"10rpx",paddingLeft:5}}},Fr=fe("animation"),Nr={emits:["onOpen","onClickEmoji"],data(){return{defHeight:Math.round(240*getApp().globalData.window.scaleH),originalHeight:0,isAndroid:j.isAndroid,height:0,emojiList:[],screenW:getApp().globalData.window.width,emojiW:0,safeAreaBottom:getApp().globalData.window.safeBottom,swiperCurrent:0,barStyle:{}}},watch:{height(e){this.$emit("onOpen",e>0,e)}},methods:{clickEmoji(e){this.$emit("onClickEmoji",e)},isShow(){return this.height>0},setHeight(e){this.originalHeight=e,this.isShow()&&this.height!=this.defHeight&&this.open(!0)},parseExpressions(){this.emojiList=["\u{1F600}","\u{1F603}","\u{1F604}","\u{1F601}","\u{1F606}","\u{1F605}","\u{1F602}","\u{1F923}","\uFE0F\u{1F60A}","\u{1F607}","\u{1F642}","\u{1F643}","\u{1F609}","\u{1F60C}","\u{1F60D}","\u{1F970}","\u{1F618}","\u{1F617}","\u{1F619}","\u{1F61A}","\u{1F60B}","\u{1F61B}","\u{1F61D}","\u{1F61C}","\u{1F92A}","\u{1F928}","\u{1F9D0}","\u{1F913}","\u{1F60E}","\u{1F929}","\u{1F973}","\u{1F60F}","\u{1F612}","\u{1F61E}","\u{1F614}","\u{1F61F}","\u{1F615}","\u{1F641}","\uFE0F\u{1F616}","\u{1F62B}","\u{1F629}","\u{1F97A}","\u{1F622}","\u{1F62D}","\u{1F624}","\u{1F620}","\u{1F621}","\u{1F92C}","\u{1F92F}","\u{1F633}","\u{1F975}","\u{1F976}","\u{1F631}","\u{1F628}","\u{1F630}","\u{1F625}","\u{1F613}","\u{1F917}","\u{1F914}","\u{1F92D}","\u{1F92B}","\u{1F925}","\u{1F636}","\u{1F610}"]},open(e,t){this.height=e?this.originalHeight:0,this.isAndroid?this.barStyle={height:`${this.height}px`}:Fr.transition(this.$refs.refBarAction,{styles:{height:`${e?this.originalHeight:0}px`},duration:t?1:this.isAndroid?100:300,timingFunction:"ease",needLayout:!0,delay:0})}},created(){this.parseExpressions(),this.originalHeight=getApp().globalData.keyboardH,this.originalHeight||(this.originalHeight=this.defHeight),this.emojiW=parseInt((this.screenW-20)/8)}};function Rr(e,t,i,n,a,s){return(0,r.openBlock)(),(0,r.createElementBlock)("view",{ref:"refBarAction",class:"msg-bar-express",style:(0,r.normalizeStyle)(a.barStyle),renderWhole:!0},[(0,r.createElementVNode)("scroll-view",{scrollY:"true",class:"emoji-wrap",showScrollbar:!1,style:(0,r.normalizeStyle)({height:a.originalHeight+"px"})},[(0,r.createElementVNode)("view",{class:"flex-wrap"},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.emojiList,(o,l)=>((0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"center-align",onClick:c=>s.clickEmoji(o),key:"e"+l,style:(0,r.normalizeStyle)({width:a.emojiW+"px",height:a.emojiW+"px"})},[(0,r.createElementVNode)("u-text",{style:{"font-size":"60rpx"}},(0,r.toDisplayString)(o),1)],12,["onClick"]))),128))])],4),(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)({height:a.safeAreaBottom+"px",background:"#000000"})},null,4)],4)}var Br=O(Nr,[["render",Rr],["styles",[Er]]]),Vr=fe("animation"),ze=class{constructor(t,i){this.options=t,this.animation=uni.createAnimation(t),this.currentStepAnimates={},this.next=0,this.$=i}_nvuePushAnimates(t,i){let n=this.currentStepAnimates[this.next],a={};if(n?a=n:a={styles:{},config:{}},Fi.includes(t)){a.styles.transform||(a.styles.transform="");let s="";t==="rotate"&&(s="deg"),a.styles.transform+=`${t}(${i+s}) `}else a.styles[t]=`${i}`;this.currentStepAnimates[this.next]=a}_animateRun(t={},i={}){let n=this.$.$refs.ani.ref;if(n)return new Promise((a,s)=>{Vr.transition(n,Ze({styles:t},i),o=>{a()})})}_nvueNextAnimate(t,i=0,n){let a=t[i];if(a){let{styles:s,config:o}=a;this._animateRun(s,o).then(()=>{i+=1,this._nvueNextAnimate(t,i,n)})}else this.currentStepAnimates={},typeof n=="function"&&n(),this.isEnd=!0}step(t={}){return this.currentStepAnimates[this.next].config=Object.assign({},this.options,t),this.currentStepAnimates[this.next].styles.transformOrigin=this.currentStepAnimates[this.next].config.transformOrigin,this.next++,this}run(t){this.isEnd=!1,this.$.$refs.ani&&this.$.$refs.ani.ref&&(this._nvueNextAnimate(this.currentStepAnimates,0,t),this.next=0)}},Fi=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"],Wr=["opacity","backgroundColor"],Hr=["width","height","left","right","top","bottom"];Fi.concat(Wr,Hr).forEach(e=>{ze.prototype[e]=function(...t){return this._nvuePushAnimates(e,t),this}});function Li(e,t){if(t)return clearTimeout(t.timer),new ze(e,t)}var jr={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default(){return"fade"}},duration:{type:Number,default:300},styles:{type:Object,default(){return{}}},customClass:{type:String,default:""}},data(){return{isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}},watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e=Et(Ze({},this.styles),{"transition-duration":this.duration/1e3+"s"}),t="";for(let i in e){let n=this.toLine(i);t+=n+":"+e[i]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=Li(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let i in e)try{typeof e[i]=="object"?this.animation[i](...e[i]):this.animation[i](e[i])}catch(n){D("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:139",`\u65B9\u6CD5 ${i} \u4E0D\u5B58\u5728`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);typeof e!="undefined"&&(this.opacity=e),this.transform=t,this.$nextTick(()=>{this.timer=setTimeout(()=>{this.animation=Li(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})},20)})},close(e){this.animation&&this.tranfromInit(!0).step().run(()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:t,transform:i}=this.styleInit(!1);this.opacity=t||1,this.transform=i,this.$emit("change",{detail:this.isShow})})},styleInit(e){let t={transform:""},i=(n,a)=>{a==="fade"?t.opacity=this.animationType(n)[a]:t.transform+=this.animationType(n)[a]+" "};return typeof this.modeClass=="string"?i(e,this.modeClass):this.modeClass.forEach(n=>{i(e,n)}),t},tranfromInit(e){let t=(i,n)=>{let a=null;n==="fade"?a=i?0:1:(a=i?"-100%":"0",n==="zoom-in"&&(a=i?.8:1),n==="zoom-out"&&(a=i?1.2:1),n==="slide-right"&&(a=i?"100%":"0"),n==="slide-bottom"&&(a=i?"100%":"0")),this.animation[this.animationMode()[n]](a)};return typeof this.modeClass=="string"?t(e,this.modeClass):this.modeClass.forEach(i=>{t(e,i)}),this.animation},animationType(e){return{fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}},animationMode(){return{fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}},toLine(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}}};function Ur(e,t,i,n,a,s){return a.isShow?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,ref:"ani",animation:a.animationData,class:(0,r.normalizeClass)(i.customClass),style:(0,r.normalizeStyle)(s.transformStyles),onClick:t[0]||(t[0]=(...o)=>s.onClick&&s.onClick(...o)),renderWhole:!0},[(0,r.renderSlot)(e.$slots,"default")],14,["animation"])):(0,r.createCommentVNode)("",!0)}var zr=O(jr,[["render",Ur]]),$r={"uni-popup":{"":{position:"fixed"},".top":{top:0},".left":{top:0},".right":{top:0}},"uni-popup__wrapper":{".uni-popup ":{position:"relative"},".uni-popup .left":{paddingTop:0,flex:1},".uni-popup .right":{paddingTop:0,flex:1}},"fixforpc-top":{"":{top:0}}},Gr={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},maskClick:{type:Boolean,default:!0},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBgColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{maskClass(){return{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:this.maskBgColor}},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return this.backgroundColor===""||this.backgroundColor==="none"?"transparent":this.backgroundColor}},mounted(){(()=>{let{windowWidth:t,windowHeight:i,windowTop:n,safeAreaInsets:a}=uni.getSystemInfoSync();this.popupWidth=t,this.popupHeight=i+n,this.safeArea?this.safeAreaInsets=a:this.safeAreaInsets=0})()},created(){this.mkclick=this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1},methods:{closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){this.clearPropagation=!0},open(e,t=!0){if(e&&["top","center","bottom","left","right","message","dialog","share"].indexOf(e)!==-1||(e=this.type),this.maskShow=t,!this.config[e]){D("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:218","\u7F3A\u5C11\u7C7B\u578B\uFF1A",e);return}this[this.config[e]](),this.$emit("change",{show:!0,type:e})},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.showPopup=!1},300)},touchstart(){this.clearPropagation=!1},onTap(){if(this.clearPropagation){this.clearPropagation=!1;return}this.$emit("maskClick"),this.mkclick&&this.close()},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0,this.$nextTick(()=>{this.messageChild&&this.type==="message"&&this.messageChild.timerClose()}))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets&&this.safeAreaInsets.bottom||0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},!e&&(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)}}};function Jr(e,t,i,n,a,s){let o=me((0,r.resolveDynamicComponent)("uni-transition"),zr);return a.showPopup?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:(0,r.normalizeClass)(["uni-popup",[a.popupstyle,s.isDesktop?"fixforpc-z-index":""]]),onTouchmove:t[2]||(t[2]=(0,r.withModifiers)((...l)=>s.clear&&s.clear(...l),["stop","prevent"])),renderWhole:!0},[(0,r.createElementVNode)("view",{onTouchstart:t[1]||(t[1]=(...l)=>s.touchstart&&s.touchstart(...l))},[a.maskShow?((0,r.openBlock)(),(0,r.createBlock)(o,{key:"1",name:"mask","mode-class":"fade",styles:s.maskClass,duration:a.duration,show:a.showTrans,onClick:s.onTap},null,8,["styles","duration","show","onClick"])):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(o,{key:"2","mode-class":a.ani,name:"content",styles:a.transClass,duration:a.duration,show:a.showTrans,onClick:s.onTap},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:(0,r.normalizeClass)(["uni-popup__wrapper",[a.popupstyle]]),style:(0,r.normalizeStyle)({backgroundColor:s.bg}),onClick:t[0]||(t[0]=(...l)=>s.clear&&s.clear(...l))},[(0,r.renderSlot)(e.$slots,"default")],6)]),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],34)):(0,r.createCommentVNode)("",!0)}var Yr=O(Gr,[["render",Jr],["styles",[$r]]]),Kr={"level-center":{"":{alignItems:"center",flexDirection:"row"}},"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"column-center":{"":{flexDirection:"column",alignItems:"center"}},"action-wrap":{"":{borderRadius:"26rpx",marginTop:"12rpx",marginRight:"16rpx",marginBottom:0,marginLeft:"16rpx"}},"title-item":{".action-wrap ":{paddingTop:"28rpx",paddingRight:"28rpx",paddingBottom:"28rpx",paddingLeft:"28rpx"}},"action-item":{".action-wrap ":{height:"106rpx",paddingTop:0,paddingRight:"40rpx",paddingBottom:0,paddingLeft:"40rpx"}},title:{".action-wrap .action-item ":{marginLeft:"50rpx"}},"item-text":{".action-wrap .action-item ":{textAlign:"center",lineHeight:"106rpx"}},line:{"":{height:"2rpx",backgroundColor:"rgba(230,230,230,0.5)",transform:"scaleY(0.5)",transformOrigin:"50% 100%"}}},Zr={components:{kfImg:ee},emits:["onClickActionItem","onChange","onMaskClick"],props:{actions:{type:[Array,Object],default:[]}},data(){return{textSize:"38rpx",itemTextColor:"#333333"}},methods:{clickThis(e){e&&e.stopPropagation()},clickItem(e){this.$refs.popup.close(),this.$nextTick(()=>{let t=e!=-1?this.actions[e]:{key:"cancel"};this.$emit("onClickActionItem",t)})},onMaskClick(){this.$emit("onMaskClick")},onChange(e){this.$emit("onChange",e)},open(){this.$refs.popup.open()}}};function Qr(e,t,i,n,a,s){let o=(0,r.resolveComponent)("kf-img"),l=me((0,r.resolveDynamicComponent)("uni-popup"),Yr);return(0,r.openBlock)(),(0,r.createBlock)(l,{onClick:(0,r.withModifiers)(s.clickThis,["stop"]),ref:"popup",type:"bottom",maskBgColor:"rgba(0, 0, 0, 0.4)",onChange:s.onChange,onMaskClick:s.onMaskClick,style:{"z-index":"99999"}},{default:(0,r.withCtx)(()=>[(0,r.createElementVNode)("view",{class:"action-wrap",style:{"background-color":"#FFFFFF"}},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(i.actions,(c,u,d)=>((0,r.openBlock)(),(0,r.createElementBlock)("view",{index:"a"+u},[c.icon?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,class:"action-item level-center",onClick:m=>s.clickItem(u)},[(0,r.createVNode)(o,{src:c.icon,w:"46rpx",h:"46rpx",style:{"margin-right":"50rpx"},"use-native-pic":!1,useNativePic:!0},null,8,["src"]),(0,r.createElementVNode)("u-text",{style:(0,r.normalizeStyle)({fontSize:a.textSize,color:a.itemTextColor})},(0,r.toDisplayString)(c.title),5)],8,["onClick"])):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"action-item",onClick:m=>s.clickItem(u)},[(0,r.createElementVNode)("u-text",{style:(0,r.normalizeStyle)({fontSize:a.textSize,color:"#333333"}),class:"item-text"},(0,r.toDisplayString)(c.title),5)],8,["onClick"])),(0,r.createElementVNode)("view",{class:"line"})],8,["index"]))),256))]),(0,r.createElementVNode)("view",{class:"action-wrap action-bottom",style:{marginBottom:"10px",backgroundColor:"#FFFFFF"}},[(0,r.createElementVNode)("view",{class:"action-item level-center",onClick:t[0]||(t[0]=c=>s.clickItem(-1)),style:{"justify-content":"center"}},[(0,r.createElementVNode)("u-text",{style:(0,r.normalizeStyle)({color:"#333333",fontSize:a.textSize})},"Cancel",4)])])]),_:1},8,["onClick","onChange","onMaskClick"])}var Xr=O(Zr,[["render",Qr],["styles",[Kr]]]),qr={"msg-bar":{"":{position:"relative"}},center:{"":{alignItems:"center",flexDirection:"row"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"msg-bar-view":{"":{flexDirection:"row",paddingTop:"20rpx",paddingRight:"24rpx",paddingBottom:"0rpx",paddingLeft:"24rpx"}},"msg-bar-middle":{"":{flex:1,position:"relative",borderRadius:"16rpx",paddingTop:"18rpx",paddingRight:"82rpx",paddingBottom:"10rpx",paddingLeft:"26rpx",backgroundColor:"#0a7aff"}},"input-bar":{".msg-bar-middle ":{fontSize:14,flex:1}},voice:{".msg-bar-middle ":{position:"absolute",right:"20rpx",top:"10rpx"}},"audio-tip":{"":{borderRadius:"8rpx",lineHeight:"28rpx",paddingTop:"14rpx",paddingRight:"10rpx",paddingBottom:"14rpx",paddingLeft:"16rpx"}},tip:{".audio-tip ":{color:"#FFFFFF",fontSize:"20rpx",marginRight:"10rpx"}}};fe("dom");var eo={emits:["onSend","onChoosePicture","onInputLineChange","onSendAudio"],components:{MsgBarAudio:Mr,KfImg:ee,MsgBarAction:Br,KfActionSheet:Xr},props:{hideVoice:{type:Boolean,default:!1}},data(){return{isAndroid:j.isAndroid,width:getApp().globalData.window.width,safeBottom:0,cursorSpacing:uni.upx2px(96),text:"",inputColor:"#333333",isKeyboardOpen:!1,inputAdjustPosition:!1,placeholderStyle:"color: rgba(153,153,153,0.5)",msgBarActionHeight:0,showSend:!1,audioShow:!1,audioLockShow:!1,audioLockBottom:uni.upx2px(104)+getApp().globalData.window.safeBottom,isAudioLock:!1,audioTouchTime:0,audioTipSize:{},audioBarShowTimer:!1,expressionAct:!1,audioRecordShow:!1,emojiList:[],cameraActions:[{icon:"/static/i_camera_photo.png",title:"Take photo",key:"take_photo"},{icon:"/static/i_camera_video.png",title:"Take video",key:"take_video"}]}},computed:{viewBarBg(){return"#F9FAFD"},viewBarMiddleStyle(){let e={},t=1,i="#EEEEEE";return e.background="rgba(255, 255, 255, "+t+")",e.border="2rpx solid "+i,e},sendAct(){return!!this.text}},methods:{clickBarCamera(){this.expressionAct&&(this.expressionAct=!1),this.isKeyboardOpen&&uni.hideKeyboard(),this.$refs.popCamera.open()},clickSend(e){e&&e.stopPropagation(),this.handleSend()},clickExpression(){this.expressionAct||(this.isKeyboardOpen&&uni.hideKeyboard(),this.expressionAct=!0,setTimeout(()=>{this.$refs.msgBarAction.open(!0,!0)},200))},clickPic(){this.isKeyboardOpen&&uni.hideKeyboard(),this.expressionAct&&(this.expressionAct=!1),this.chooseImage(1,9)},clickVideo(){this.isKeyboardOpen&&uni.hideKeyboard(),this.expressionAct&&(this.expressionAct=!1),this.chooseVideo(1)},onAudioCancel(){this.audioRecordShow=!1},onAudioFinish(e){this.$emit("onSendAudio",e),this.audioRecordShow=!1},onAudioTouch(){if(this.expressionAct&&(this.expressionAct=!1),this.isKeyboardOpen||this.$refs.msgBarAction.isShow()){uni.hideKeyboard(),this.$refs.msgBarAction.open(!1);return}this.audioTouchTime=new Date().getTime()},onAudioTouchEnd(){new Date().getTime()-this.audioTouchTime<600||this.$nextTick(()=>{this.$refs.msgBarAudio.stopRecord()})},onAudioLongTouch(){if(!wt(S.MICROPHONE)){Ve(S.MICROPHONE);return}this.audioRecordShow=!0,this.$nextTick(()=>{this.$refs.msgBarAudio.startRecord()})},onClickActionItem(e){switch(this.expressionAct&&(this.expressionAct=!1),e.key){case"take_photo":this.chooseImage(2,1);break;case"take_video":this.chooseVideo(2);break}},hide(){this.isKeyboardOpen&&uni.hideKeyboard(),this.expressionAct&&(this.expressionAct=!1),this.$refs.msgBarAction.open(!1)},onLineChange(e){e&&e.detail&&e.detail.height&&this.$emit("onInputLineChange",e.detail.height,e.detail.lineCount)},onFocus(){this.expressionAct&&(this.expressionAct=!1),this.$refs.msgBarAction.open(!1),this.$emit("onInputFocused",1)},onBlur(){uni.hideKeyboard(),this.$emit("onInputFocused",0)},onActionOpen(e,t){},onClickEmoji(e){this.text=this.text+e},chooseImage(e,t){bi(e,t).then(i=>{let n=i.tempFilePaths;for(let a=0,s=n.length;a<s;a++){let o=n[a];uni.getImageInfo({src:o,success:l=>{let c={path:l.path,width:l.width,height:l.height};this.$emit("onChoosePicture",0,c)}})}})},chooseVideo(e){Ai(e,!0).then(t=>{let i={path:t.tempFilePath,coverPath:t.coverPath,cover:t.coverPath,width:t.width,height:t.height,duration:parseInt(t.duration)||0};this.$emit("onChoosePicture",1,i)})},handleSend(){if(this.text==null||this.text=="")return;this.text.trim()==""&&uni.showModal({title:"Tips",content:"Unable to send blank message.",showCancel:!1,cancelText:"",confirmText:"Got it",editable:!1,success(t){t.confirm}}),this.$emit("onSend",this.text),this.text=""},onKeyboardChange(e){e.height>0?(this.isKeyboardOpen=!0,this.$refs.msgBarAction.setHeight(e.height),getApp().globalData.keyboardH=e.height):(this.isKeyboardOpen=!1,this.$refs.input.blur())}},created(){this.safeBottom=getApp().globalData.window.safeBottom,uni.onKeyboardHeightChange(this.onKeyboardChange)},unmounted(){uni.offKeyboardHeightChange(this.onKeyboardChange)}};function to(e,t,i,n,a,s){let o=(0,r.resolveComponent)("kf-img"),l=(0,r.resolveComponent)("msg-bar-audio"),c=(0,r.resolveComponent)("msg-bar-action"),u=(0,r.resolveComponent)("kf-action-sheet");return(0,r.openBlock)(),(0,r.createElementBlock)("view",{class:"msg-bar",style:(0,r.normalizeStyle)({width:`${a.width}px`}),renderWhole:!0},[(0,r.renderSlot)(e.$slots,"default"),(0,r.createElementVNode)("view",{class:"msg-bar-view",style:(0,r.normalizeStyle)([{background:s.viewBarBg},{position:"relative"}])},[(0,r.createElementVNode)("view",{class:"msg-bar-middle",style:(0,r.normalizeStyle)(s.viewBarMiddleStyle)},[(0,r.createElementVNode)("u-textarea",{ref:"input",modelValue:a.text,onInput:t[0]||(t[0]=d=>a.text=d.detail.value),adjustPosition:a.inputAdjustPosition,cursorSpacing:a.cursorSpacing,autoHeight:!0,maxlength:-1,showConfirmBar:!1,disableDefaultPadding:!0,onLinechange:t[1]||(t[1]=(...d)=>s.onLineChange&&s.onLineChange(...d)),onFocus:t[2]||(t[2]=(0,r.withModifiers)((...d)=>s.onFocus&&s.onFocus(...d),["stop"])),onBlur:t[3]||(t[3]=(...d)=>s.onBlur&&s.onBlur(...d)),style:(0,r.normalizeStyle)({color:this.inputColor}),placeholderStyle:a.placeholderStyle,class:"input-bar"},null,44,["modelValue","adjustPosition","cursorSpacing","placeholderStyle"]),(0,r.createElementVNode)("view",{class:"voice",onTouchstart:t[4]||(t[4]=(...d)=>s.onAudioTouch&&s.onAudioTouch(...d)),onLongpress:t[5]||(t[5]=(...d)=>s.onAudioLongTouch&&s.onAudioLongTouch(...d)),onTouchend:t[6]||(t[6]=(...d)=>s.onAudioTouchEnd&&s.onAudioTouchEnd(...d))},[(0,r.createVNode)(o,{src:"/static/s_audio_m.png",w:"60rpx",h:"60rpx"})],32)],4),(0,r.createElementVNode)("view",{style:{margin:"12rpx 0rpx 6rpx 32rpx"}},[s.sendAct?((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:0,onClick:t[7]||(t[7]=(...d)=>s.clickSend&&s.clickSend(...d))},[(0,r.createVNode)(o,{onClick:s.clickSend,src:"/static/send_active.png",w:"60rpx",h:"60rpx"},null,8,["onClick"])])):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1},[(0,r.createVNode)(o,{src:"/static/send_default.png",w:"60rpx",h:"60rpx"})]))]),a.audioRecordShow?((0,r.openBlock)(),(0,r.createBlock)(l,{key:0,ref:"msgBarAudio",onOnAudioCancel:s.onAudioCancel,onOnAudioFinish:s.onAudioFinish,style:{position:"absolute",bottom:"0",left:"0"}},null,8,["onOnAudioCancel","onOnAudioFinish"])):(0,r.createCommentVNode)("",!0)],4),(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)([{background:s.viewBarBg},{height:"96rpx",padding:"20rpx 74rpx 16rpx 54rpx"}])},[(0,r.createElementVNode)("view",{class:"center",style:{"justify-content":"space-between"}},[(0,r.createElementVNode)("view",{class:"center-align",style:{width:"60rpx",height:"60rpx"},onClick:t[8]||(t[8]=(...d)=>s.clickExpression&&s.clickExpression(...d))},[a.expressionAct?((0,r.openBlock)(),(0,r.createBlock)(o,{key:1,w:"60rpx",h:"60rpx",src:"/static/choose_expression_active.png"})):((0,r.openBlock)(),(0,r.createBlock)(o,{key:0,w:"60rpx",h:"60rpx",src:"/static/choose_expression.png"}))]),(0,r.createElementVNode)("view",{class:"center-align",style:{width:"60rpx",height:"60rpx"},onClick:t[9]||(t[9]=(...d)=>s.clickPic&&s.clickPic(...d))},[(0,r.createVNode)(o,{w:"60rpx",h:"60rpx",src:"/static/choose_pic.png"})]),(0,r.createElementVNode)("view",{class:"center-align",style:{width:"60rpx",height:"60rpx"},onClick:t[10]||(t[10]=(...d)=>s.clickBarCamera&&s.clickBarCamera(...d))},[(0,r.createVNode)(o,{w:"60rpx",h:"60rpx",src:"/static/take_photo.png"})]),(0,r.createElementVNode)("view",{class:"center-align",style:{width:"60rpx",height:"60rpx"},onClick:t[11]||(t[11]=(...d)=>s.clickVideo&&s.clickVideo(...d))},[(0,r.createVNode)(o,{w:"60rpx",h:"60rpx",src:"/static/choose_video.png"})])])],4),(0,r.createVNode)(c,{ref:"msgBarAction",onOnOpen:s.onActionOpen,onOnClickEmoji:s.onClickEmoji},null,8,["onOnOpen","onOnClickEmoji"]),(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)({height:a.safeBottom+"px",background:s.viewBarBg})},null,4),(0,r.createVNode)(u,{ref:"popCamera",onOnClickActionItem:s.onClickActionItem,actions:a.cameraActions},null,8,["onOnClickActionItem","actions"])],4)}var io=O(eo,[["render",to],["styles",[qr]]]),no={center:{"":{flexDirection:"row",alignItems:"center"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"nav-bar":{"":{position:"fixed",backgroundColor:"#FFFFFF",height:44,paddingTop:0,paddingRight:20,paddingBottom:0,paddingLeft:20,justifyContent:"space-between"}},"status-bar":{"":{position:"fixed",top:0,left:0,right:0,backgroundColor:"#FFFFFF",zIndex:99999}},"call-img-size":{"":{width:20,height:20}},"list-rotate":{"":{transform:"rotate(180deg)"}},"msg-def":{"":{opacity:1,transitionProperty:"opacity",transitionDuration:500,transitionTimingFunction:"ease-out"}},"loading-more":{"":{flex:1,height:40,alignItems:"center",flexDirection:"row",justifyContent:"center"}},"@TRANSITION":{"msg-def":{property:"opacity",duration:500,timingFunction:"ease-out"}}},ao={mixins:[Os,Ms],components:{MsgText:dr,MsgPicture:pr,MsgVideo:wr,MsgVoice:Cr,MsgCall:Lr,MsgBar:io}};function so(e,t,i,n,a,s){let o=me((0,r.resolveDynamicComponent)("navigation-bar"),Ts),l=me((0,r.resolveDynamicComponent)("page-meta"),Ls),c=(0,r.resolveComponent)("msg-text"),u=(0,r.resolveComponent)("msg-picture"),d=(0,r.resolveComponent)("msg-video"),m=(0,r.resolveComponent)("msg-voice"),g=(0,r.resolveComponent)("msg-call"),_=(0,r.resolveComponent)("msg-bar");return(0,r.openBlock)(),(0,r.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,r.createVNode)(l,{"background-color":e.bgColor,"background-color-top":e.bgColor,"background-color-bottom":e.bgColor,"page-style":"background-color:#F8F8F8"},{default:(0,r.withCtx)(()=>[(0,r.createVNode)(o,{"background-color":"#FFFFFF","front-color":"#000000"})]),_:1},8,["background-color","background-color-top","background-color-bottom"]),(0,r.createElementVNode)("view",null,[(0,r.createElementVNode)("view",{class:"status-bar",style:(0,r.normalizeStyle)({height:`${e.statusBarHeight}px`})},null,4),(0,r.createElementVNode)("view",{class:"center nav-bar",style:(0,r.normalizeStyle)({top:`${e.statusBarHeight}px`,left:0,right:0})},[(0,r.createElementVNode)("u-image",{onClick:t[0]||(t[0]=(...p)=>e.clickBack&&e.clickBack(...p)),src:"/static/back.png",class:"call-img-size"}),(0,r.createElementVNode)("u-text",{style:{"font-size":"20px","font-weight":"500"}},"Customer service"),e.showVideoCall?((0,r.openBlock)(),(0,r.createElementBlock)("u-image",{key:0,onClick:t[1]||(t[1]=(...p)=>e.clickBarVideo&&e.clickBarVideo(...p)),src:"/static/video_call.png",class:"call-img-size"})):((0,r.openBlock)(),(0,r.createElementBlock)("view",{key:1,class:"call-img-size",style:{"background-color":"transparent"}}))],4),(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)({height:`${e.statusBarHeight+44}px`})},null,4),(0,r.createElementVNode)("view",{style:(0,r.normalizeStyle)([{height:`${e.viewHeight}px`,paddingBottom:`${e.keyboardHeight}px`},{"background-color":"#F1F3F6"}])},[(0,r.createElementVNode)("list",{onClick:t[3]||(t[3]=(...p)=>e.clickMsgList&&e.clickMsgList(...p)),ref:"msgList",class:(0,r.normalizeClass)([[e.classRotate],"msg-list"]),showScrollbar:!1,loadmoreoffset:20,offsetAccuracy:10,onLoadmore:t[4]||(t[4]=(...p)=>e.onLoadMore&&e.onLoadMore(...p))},[(0,r.createElementVNode)("cell",{ref:"cellLast",style:(0,r.normalizeStyle)({width:`${e.sW}px`,height:`${e.itemHeightFirst}px`})},null,4),(0,r.createElementVNode)("cell",null,[(0,r.createElementVNode)("list",{showScrollbar:!1,scrollable:!1,class:(0,r.normalizeClass)([e.classRotate])},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.addList,(p,b)=>((0,r.openBlock)(),(0,r.createElementBlock)("cell",{key:`key${b}`,ref_for:!0,ref:`cell${p.mtime}`,class:"msg-def",style:{"padding-bottom":"28rpx"},onClick:t[2]||(t[2]=(...y)=>e.clickMsgList&&e.clickMsgList(...y))},[p.msg_type==1e3?((0,r.openBlock)(),(0,r.createElementBlock)("u-text",{key:0,style:{"font-size":"24rpx","text-align":"center"}},(0,r.toDisplayString)(p.showTime),1)):p.msg_type==e.MSG.TXT?((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,ref_for:!0,ref:"msg"+p.mtime,data:p},null,8,["data"])):p.msg_type==e.MSG.IMG?((0,r.openBlock)(),(0,r.createBlock)(u,{key:2,ref_for:!0,ref:"msg"+p.mtime,data:p,onClickPicture:e.clickPicture},null,8,["data","onClickPicture"])):p.msg_type==e.MSG.VIDEO?((0,r.openBlock)(),(0,r.createBlock)(d,{key:3,ref_for:!0,ref:"msg"+p.mtime,data:p,index:b,onClickVideo:e.clickPicture},null,8,["data","index","onClickVideo"])):p.msg_type==e.MSG.VOICE?((0,r.openBlock)(),(0,r.createBlock)(m,{key:4,ref_for:!0,ref:"msg"+p.mtime,data:p,index:b,onClickMsgVoice:e.clickMsgVoice,onOnMsgVoiceChange:e.onMsgVoiceChange},null,8,["data","index","onClickMsgVoice","onOnMsgVoiceChange"])):p.msg_type==e.MSG.HUNG_UP?((0,r.openBlock)(),(0,r.createBlock)(g,{key:5,ref_for:!0,ref:"msg"+p.mtime,data:p},null,8,["data"])):(0,r.createCommentVNode)("",!0)]))),128))],2)]),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.historyList,(p,b)=>((0,r.openBlock)(),(0,r.createElementBlock)("cell",{key:"cell"+p.ctime,ref_for:!0,ref:"cell"+p.mtime,style:{"padding-bottom":"28rpx"},class:(0,r.normalizeClass)(["msg-def",[e.classRotate]])},[p.msg_type==1e3?((0,r.openBlock)(),(0,r.createElementBlock)("u-text",{key:0,style:{"font-size":"24rpx","text-align":"center"}},(0,r.toDisplayString)(p.showTime),1)):p.msg_type==e.MSG.TXT?((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,ref_for:!0,ref:"msg"+p.mtime,data:p},null,8,["data"])):p.msg_type==e.MSG.IMG?((0,r.openBlock)(),(0,r.createBlock)(u,{key:2,ref_for:!0,ref:"msg"+p.mtime,data:p,index:b,onClickPicture:e.clickPicture},null,8,["data","index","onClickPicture"])):p.msg_type==e.MSG.VIDEO?((0,r.openBlock)(),(0,r.createBlock)(d,{key:3,ref_for:!0,ref:"msg"+p.mtime,data:p,index:b,onClickVideo:e.clickPicture},null,8,["data","index","onClickVideo"])):p.msg_type==e.MSG.VOICE?((0,r.openBlock)(),(0,r.createBlock)(m,{key:4,ref_for:!0,ref:"msg"+p.mtime,data:p,index:b,onClickMsgVoice:e.clickMsgVoice,onOnMsgVoiceChange:e.onMsgVoiceChange},null,8,["data","index","onClickMsgVoice","onOnMsgVoiceChange"])):p.msg_type==e.MSG.HUNG_UP?((0,r.openBlock)(),(0,r.createBlock)(g,{key:5,ref_for:!0,ref:"msg"+p.mtime,data:p},null,8,["data"])):(0,r.createCommentVNode)("",!0)],2))),128)),(0,r.createElementVNode)("cell",{ref:"cellNew",style:(0,r.normalizeStyle)({width:`${e.sW}px`,height:`${e.itemHeightLast}px`})},null,4)],34),(0,r.createVNode)(_,{ref:"msgBar",onOnSend:e.onSend,onOnChoosePicture:e.onChoosePicture,onOnSendAudio:e.onSendAudio,onOnInputLineChange:e.onInputLineChange,onOnInputFocused:e.onInputFocused},null,8,["onOnSend","onOnChoosePicture","onOnSendAudio","onOnInputLineChange","onOnInputFocused"])],4)])])}var Ge=O(ao,[["render",so],["styles",[no]]]);var It=plus.webview.currentWebview();if(It){let e=parseInt(It.id),t="pagesChat/index",i={};try{i=JSON.parse(It.__query__)}catch(a){}Ge.mpType="page";let n=Vue.createPageApp(Ge,{$store:getApp({allowDefault:!0}).$store,__pageId:e,__pagePath:t,__pageQuery:i});n.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...Ge.styles||[]])),n.mount("#root")}})();
/*!
  * @intlify/shared v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/message-resolver v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/runtime v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/message-compiler v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/core-base v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * vue-i18n v9.1.9
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
