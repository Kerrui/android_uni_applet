"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var ot=Object.create;var E=Object.defineProperty;var nt=Object.getOwnPropertyDescriptor;var rt=Object.getOwnPropertyNames;var at=Object.getPrototypeOf,st=Object.prototype.hasOwnProperty;var lt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var pt=(t,e,i,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of rt(e))!st.call(t,s)&&s!==i&&E(t,s,{get:()=>e[s],enumerable:!(o=nt(e,s))||o.enumerable});return t};var V=(t,e,i)=>(i=t!=null?ot(at(t)):{},pt(e||!t||!t.__esModule?E(i,"default",{value:t,enumerable:!0}):i,t));var v=lt((At,J)=>{J.exports=Vue});var Dt=V(v());function A(t,e,...i){uni.__log__?uni.__log__(t,e,...i):console[t].apply(console,[...i,e])}var L=(t,e)=>{let i=t.__vccOpts||t;for(let[o,s]of e)i[o]=s;return i};var M={zT:2,appId:plus.runtime.appid,appV:parseInt(plus.runtime.version.split(".").join("")),isAndroid:plus.os.name=="Android"};function U(t){return new Promise((e,i)=>{uni.downloadFile({url:t}).then(o=>!o||o.statusCode!=200||!o.tempFilePath?(i(),new Promise(()=>{})):uni.saveFile({tempFilePath:o.tempFilePath})).then(o=>{!o||!o.savedFilePath?i():e(o.savedFilePath)}).catch(o=>{A("error","at common/common.js:78","downloadFile error "+JSON.stringify(o))})})}function I(t,e,i,o="Confirm"){ut(t,e,i,"",o,!1)}function ut(t,e,i,o,s="Confirm",a=!0,n="Cancel",r=!1,p){uni.showModal({title:t,content:e,showCancel:a,cancelText:n,confirmText:s,editable:r,placeholderText:p,success(u){u.confirm?typeof i=="function"&&i(u):u.cancel&&typeof o=="function"&&o()}})}function k(t){return typeof t=="undefined"||t==null||t==""}var Tt=new Promise(()=>{});function q(t){function e(n,r,p){for(;0<p--;)n.push(r)}function i(n,r){return n<<r|n>>>32-r}function o(n,r,p){return n^r^p}function s(n,r){var p=(r&65535)+(n&65535),u=(r>>>16)+(n>>>16)+(p>>>16);return(u&65535)<<16|p&65535}var a="0123456789abcdef";return function(n){for(var r=[],p=n.length*4,u,f=0;f<p;f++)u=n[f>>2]>>(3-f%4)*8,r.push(a.charAt(u>>4&15)+a.charAt(u&15));return r.join("")}(function(n,r){var p,u,f,h,D,tt=n.length,w=1732584193,_=4023233417,C=2562383102,T=271733878,P=3285377520,b=[];e(b,1518500249,20),e(b,1859775393,20),e(b,2400959708,20),e(b,3395469782,20),n[r>>5]|=128<<24-r%32,n[(r+65>>9<<4)+15]=r;for(var F=0;F<tt;F+=16){p=w,u=_,f=C,h=T,D=P;for(var g=0,S=[];g<80;g++){S[g]=g<16?n[g+F]:i(S[g-3]^S[g-8]^S[g-14]^S[g-16],1);var et=function(m,d,y,B,R){var z=(R&65535)+(m&65535)+(d&65535)+(y&65535)+(B&65535),it=(R>>>16)+(m>>>16)+(d>>>16)+(y>>>16)+(B>>>16)+(z>>>16);return(it&65535)<<16|z&65535}(g<20?function(m,d,y){return m&d^~m&y}(u,f,h):g<40?o(u,f,h):g<60?function(m,d,y){return m&d^m&y^d&y}(u,f,h):o(u,f,h),D,b[g],S[g],i(p,5));D=h,h=f,f=i(u,30),u=p,p=et}w=s(w,p),_=s(_,u),C=s(C,f),T=s(T,h),P=s(P,D)}return[w,_,C,T,P]}(function(n){for(var r=[],p=255,u=n.length*8,f=0;f<u;f+=8)r[f>>5]|=(n.charCodeAt(f/8)&p)<<24-f%32;return r}(t).slice(),t.length*8))}function ct(t,e,i=!1,o=null){let s=W(t,i);o?uni.setStorage({key:s,data:e,success:o}):uni.setStorageSync(s,e)}function H(t,e=!1,i=null){let o=W(t,e);if(i)uni.getStorage({key:o,success:i});else return uni.getStorageSync(o)}function j(t,e=!1){uni.removeStorage({key:W(t,e)})}function W(t,e){return e?`_s_${t}`:`s_${t}`}function G(t,e,i=!0){return Y(getApp().globalData.ossPicPath,t,e,i)}function K(t,e,i=!0){return Y(getApp().globalData.ossPath,t,e,i)}function Q(t){if(k(t)||t.startsWith("http"))return;let i=`img_${q(t)}`,o=H(i);j(i),o&&uni.removeSavedFile({filePath:o})}function Y(t,e,i,o=!0){if(k(e))return"";if(e.startsWith("http")||e.startsWith("file://"))return e;if(e.startsWith("/var/mobile/"))return"file://"+e;if(e.startsWith("/storage/"))return e;let a=`img_${q(e)}`,n=H(a);if(n){let p={filePath:n,fail(u){ft(`\u7F13\u5B58\u68C0\u6D4B\u5931\u8D25${e}`,u),j(a),typeof i=="function"&&i(t+e)},success(u){}};return typeof i=="function"&&(p.success=function(){i(n)}),uni.getFileInfo(p),n}let r=t+e;return getApp().globalData.picCacheObj[a]||(getApp().globalData.picCacheObj[a]=1,A("error","at common/cache.js:105","------> \u7F13\u5B58\u5730\u5740 "+e),typeof i=="function"&&!o&&i(r),U(r).then(p=>{ct(a,p),typeof i=="function"&&o&&i(p),delete getApp().globalData.picCacheObj[a]}).catch(()=>{})),r}function ft(t,e){A("error","at common/cache.js:117",`cache ${t}`,e)}var c=V(v());var gt={"l-img":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"place-img":{"":{position:"absolute",top:0,left:0}}},ht={name:"LImg",emits:["click","onError","onLoad"],props:{src:{type:String,default:""},mode:{type:String,default:"aspectFill"},w:{type:String,default:"0"},h:{type:String,default:"0"},radius:{type:String,default:"0"},lazyLoad:{type:Boolean,default:!1},fade:{type:Boolean,default:!0},placeType:{type:Number,default:0},placeW:{type:String,default:""},placeFontSize:{type:[String,Boolean],default:""},placeBottom:{type:String,default:""},border:{type:String,default:""},otherStyle:{type:Object,default(){return{}}},click:{type:Boolean,default:!0},isGif:{type:Boolean,default:!1},needStyle:{type:[String,Number],default:0},useCache:{type:Boolean,default:!1},fitWH:{type:String,default:""},isStatic:{type:Number,default:0}},data(){return{errorCount:1,path:"",refresh:!0,darkDir:"",isLoad:!1,fitStr:""}},watch:{src(){this.isLoad=!1,this.path=this.parse()}},computed:{placeSrc(){return this.placeType==1?"/static/img_load_s.png":this.placeType==2?"/static/img_load_b.png":""},placeViewStyle(){let t={width:this.placeW,height:this.placeW,position:"relative"};return this.placeBottom&&(t.marginBottom=this.placeBottom),t},placeFontSizeVal(){return this.placeFontSize===!1?"":this.placeFontSize?this.placeFontSize:this.placeType==2?"24rpx":"16rpx"},borderStyle(){if(this.border=="")return{};let t={},e=this.border.split(" ");return t.borderWidth=e[0],t.borderStyle=e[1],t.borderColor=e[2],t},viewStyle(){let t={width:this.w,minWidth:this.w,height:this.h,minHeight:this.h};return this.setRadius(t)},imgStyle(){let t={width:this.w,height:this.h};return t=Object.assign(t,this.otherStyle),this.setRadius(t)},ossPathOriginal(){return this.isGif?getApp().globalData.ossPath:getApp().globalData.ossPicPath}},methods:{clickImg(t){this.click&&this.$emit("click",t)},setRadius(t){let e=this.radius.split(" ");return e.length<=1?t.borderRadius=this.radius:(t.borderTopLeftRadius=e[0],t.borderTopRightRadius=e[1],t.borderBottomRightRadius=e[2],t.borderBottomLeftRadius=e[3]),t},onLoadError(){if(this.path){if(this.path.startsWith("http")){if(this.errorCount>2){this.isError=!0,this.$emit("onError");return}this.errorCount+=1,this.refresh=!1,setTimeout(()=>{this.refresh=!0},500);return}this.path=this.ossPathOriginal+this.darkDir+this.src,Q(this.darkDir+this.src)}},onLoad(){this.isLoad=!0,this.$emit("onLoad")},parse(){if(this.isStatic)return this.src;let t;return t=0,this.src.startsWith("/static")?this.src:this.useCache||t&&M.isAndroid?this.isGif?K(this.fitStr+this.darkDir+this.src):G(this.fitStr+this.darkDir+this.src):this.src.startsWith("file://")?this.src:this.src.startsWith("/var/mobile/")?"file://"+this.src:this.src.startsWith("/storage/")?this.src:this.ossPathOriginal+this.fitStr+this.darkDir+this.src}},created(){this.fitWH&&this.src.indexOf("fit-in")==-1&&(this.fitStr="fit-in/"+this.fitWH+"/"),this.path=this.parse()}};function mt(t,e,i,o,s,a){return(0,c.openBlock)(),(0,c.createElementBlock)("view",{class:"l-img",onClick:e[2]||(e[2]=(...n)=>a.clickImg&&a.clickImg(...n)),style:(0,c.normalizeStyle)([a.viewStyle,a.borderStyle]),renderWhole:!0},[(0,c.createElementVNode)("view",{class:"l-img",style:(0,c.normalizeStyle)([{position:"relative"},a.viewStyle])},[i.placeType&&!s.isLoad?((0,c.openBlock)(),(0,c.createElementBlock)("view",{key:0,style:(0,c.normalizeStyle)(a.placeViewStyle)},[(0,c.createElementVNode)("u-image",{src:a.placeSrc,style:(0,c.normalizeStyle)({width:i.placeW,height:i.placeW})},null,12,["src"])],4)):(0,c.createCommentVNode)("",!0),s.refresh?((0,c.openBlock)(),(0,c.createElementBlock)("u-image",{key:1,onError:e[0]||(e[0]=(...n)=>a.onLoadError&&a.onLoadError(...n)),onLoad:e[1]||(e[1]=(...n)=>a.onLoad&&a.onLoad(...n)),src:s.path,mode:i.mode,lazyLoad:i.lazyLoad,fadeShow:i.fade,style:(0,c.normalizeStyle)([a.imgStyle,a.borderStyle]),class:"place-img"},null,44,["src","mode","lazyLoad","fadeShow"])):(0,c.createCommentVNode)("",!0)],4)],4)}var X=L(ht,[["render",mt],["styles",[gt]]]);function Z(t){try{return getApp().globalData.pluginTool.imageCached({url:t})}catch(e){return!1}}function N(t){try{return getApp().globalData.pluginTool.imageCacheFilePath({url:t})}catch(e){return""}}function $(t){getApp().globalData.pluginTool.imageCacheByUrl({url:t})}var l=V(v());var dt={"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}}},yt={components:{LImg:X},data(){return{img1:"f/control/video-label.png",img2:"s/my/i_coins_big.png",img100:""}},methods:{click1(){let t=`${getApp().globalData.ossPicPath}${this.img1}`,e=Z(t);I("Tips",e?"\u5DF2\u7F13\u5B58":"\u6CA1\u6709\u68C0\u6D4B\u5230\u7F13\u5B58")},click2(){let t=`${getApp().globalData.ossPicPath}${this.img1}`,e=N(t);I("Tips",e||"\u6CA1\u6709\u83B7\u53D6\u5230\u7F13\u5B58\u5730\u5740")},click3(){let t=`${getApp().globalData.ossPicPath}${this.img2}`;$(t),setTimeout(()=>{this.img100=N(t)},5e3)}},onLoad(t){}};function St(t,e,i,o,s,a){let n=(0,l.resolveComponent)("l-img"),r=(0,l.resolveComponent)("button");return(0,l.openBlock)(),(0,l.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,l.createElementVNode)("view",{style:{flex:"1"}},[(0,l.createElementVNode)("view",{class:"center-between"},[(0,l.createVNode)(n,{src:s.img1,w:"100px",h:"100px"},null,8,["src"]),s.img100?((0,l.openBlock)(),(0,l.createBlock)(n,{key:0,src:s.img100,w:"100px",h:"100px"},null,8,["src"])):(0,l.createCommentVNode)("",!0)]),(0,l.createVNode)(r,{onClick:a.click1},{default:(0,l.withCtx)(()=>[(0,l.createTextVNode)("\u68C0\u6D4B\u4E0A\u9762\u{1F446}\u7684\u56FE\u7247 - \u662F\u5426\u88AB\u7F13\u5B58")]),_:1},8,["onClick"]),(0,l.createVNode)(r,{onClick:a.click2},{default:(0,l.withCtx)(()=>[(0,l.createTextVNode)("\u83B7\u53D6\u4E0A\u9762\u{1F446}\u7684\u56FE\u7247 - \u7F13\u5B58\u5730\u5740")]),_:1},8,["onClick"]),(0,l.createVNode)(r,{onClick:a.click3,style:{"margin-top":"20px"}},{default:(0,l.withCtx)(()=>[(0,l.createTextVNode)("\u901A\u8FC7\u7F51\u7EDC\u5730\u5740\u7F13\u5B58\u56FE\u7247")]),_:1},8,["onClick"])])])}var x=L(yt,[["render",St],["styles",[dt]]]);var O=plus.webview.currentWebview();if(O){let t=parseInt(O.id),e="pagesPub/image-cache",i={};try{i=JSON.parse(O.__query__)}catch(s){}x.mpType="page";let o=Vue.createPageApp(x,{$store:getApp({allowDefault:!0}).$store,__pageId:t,__pagePath:e,__pageQuery:i});o.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...x.styles||[]])),o.mount("#root")}})();
