"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var Ue=Object.create;var ue=Object.defineProperty;var ke=Object.getOwnPropertyDescriptor;var Ve=Object.getOwnPropertyNames;var We=Object.getPrototypeOf,Fe=Object.prototype.hasOwnProperty;var Re=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var ze=(e,r,t,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Ve(r))!Fe.call(e,o)&&o!==t&&ue(e,o,{get:()=>r[o],enumerable:!(a=ke(r,o))||a.enumerable});return e};var K=(e,r,t)=>(t=e!=null?Ue(We(e)):{},ze(r||!e||!e.__esModule?ue(t,"default",{value:e,enumerable:!0}):t,e));var U=(e,r,t)=>new Promise((a,o)=>{var i=l=>{try{n(t.next(l))}catch(u){o(u)}},s=l=>{try{n(t.throw(l))}catch(u){o(u)}},n=l=>l.done?a(l.value):Promise.resolve(l.value).then(i,s);n((t=t.apply(e,r)).next())});var z=Re((ft,fe)=>{fe.exports=Vue});var ct=K(z());function c(e,r,...t){uni.__log__?uni.__log__(e,r,...t):console[e].apply(console,[...t,r])}var F=(e,r)=>{let t=e.__vccOpts||e;for(let[a,o]of r)t[a]=o;return t};var R={zT:2,appId:plus.runtime.appid,appV:parseInt(plus.runtime.version.split(".").join("")),isAndroid:plus.os.name=="Android"};function ce(e,r){getApp().globalData.s.commit("setPubValue",{name:e,value:r})}function L(e,r="none",t="center"){uni.showToast({title:e,duration:2e3,icon:r,position:t})}function pe(e){return new Promise(r=>{plus.io.getVideoInfo({filePath:e,success(t){r(t)},fail(t){r(`getVideoInfo ${JSON.stringify(t)}`)}})})}function me(e,r){return new Promise((t,a)=>{uni.compressVideo({src:e,quality:r,success(o){c("log","at common/common.js:51","videoCompress res "+JSON.stringify(o)),t(o)},fail(o){c("log","at common/common.js:55","videoCompress error "+JSON.stringify(o)),a(`videoCompress ${JSON.stringify(o)}`)}})})}function de(e){return new Promise((r,t)=>{uni.downloadFile({url:e}).then(a=>!a||a.statusCode!=200||!a.tempFilePath?(t(),new Promise(()=>{})):uni.saveFile({tempFilePath:a.tempFilePath})).then(a=>{!a||!a.savedFilePath?t():r(a.savedFilePath)}).catch(a=>{c("error","at common/common.js:78","downloadFile error "+JSON.stringify(a))})})}function M(e,r,t,a,o="Confirm",i=!0,s="Cancel",n=!1,l){uni.showModal({title:e,content:r,showCancel:i,cancelText:s,confirmText:o,editable:n,placeholderText:l,success(u){u.confirm?typeof t=="function"&&t(u):u.cancel&&typeof a=="function"&&a()}})}function he(e,r){let t={mask:!!e};r&&(t.title=r),uni.showLoading(t)}function Q(){uni.hideLoading()}function A(e){return typeof e=="undefined"||e==null||e==""}var W=new Promise(()=>{});function ge(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16).toUpperCase()})}function ye(e){try{let r=JSON.parse(e);if(typeof r=="object")return r}catch(r){}return!1}function Y(e){if(!e)return"";let r=JSON.stringify(e);return(typeof r!="string"||r=="{}")&&(r=e.toString()),r}function j(e,r=!0){return e.startsWith("http")?e:e.startsWith("file://")?r?e:e.replace("file://",""):e.startsWith("/storage/")||e.startsWith("/var/mobile/")?r?`file://${e}`:e:e.startsWith("_doc/uniapp")?r?e:plus.io.convertLocalFileSystemURL(e):e.indexOf("apps/__UNI")!=-1?e:!1}var X=0;function Me(e){return Je(je($e(e)))}function je(e){return He(Ge(qe(e),e.length*8))}function Je(e){try{}catch(i){X=0}for(var r=X?"0123456789ABCDEF":"0123456789abcdef",t="",a,o=0;o<e.length;o++)a=e.charCodeAt(o),t+=r.charAt(a>>>4&15)+r.charAt(a&15);return t}function $e(e){for(var r="",t=-1,a,o;++t<e.length;)a=e.charCodeAt(t),o=t+1<e.length?e.charCodeAt(t+1):0,55296<=a&&a<=56319&&56320<=o&&o<=57343&&(a=65536+((a&1023)<<10)+(o&1023),t++),a<=127?r+=String.fromCharCode(a):a<=2047?r+=String.fromCharCode(192|a>>>6&31,128|a&63):a<=65535?r+=String.fromCharCode(224|a>>>12&15,128|a>>>6&63,128|a&63):a<=2097151&&(r+=String.fromCharCode(240|a>>>18&7,128|a>>>12&63,128|a>>>6&63,128|a&63));return r}function qe(e){for(var r=Array(e.length>>2),t=0;t<r.length;t++)r[t]=0;for(var t=0;t<e.length*8;t+=8)r[t>>5]|=(e.charCodeAt(t/8)&255)<<t%32;return r}function He(e){for(var r="",t=0;t<e.length*32;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function Ge(e,r){e[r>>5]|=128<<r%32,e[(r+64>>>9<<4)+14]=r;for(var t=1732584193,a=-271733879,o=-1732584194,i=271733878,s=0;s<e.length;s+=16){var n=t,l=a,u=o,f=i;t=y(t,a,o,i,e[s+0],7,-680876936),i=y(i,t,a,o,e[s+1],12,-389564586),o=y(o,i,t,a,e[s+2],17,606105819),a=y(a,o,i,t,e[s+3],22,-1044525330),t=y(t,a,o,i,e[s+4],7,-176418897),i=y(i,t,a,o,e[s+5],12,1200080426),o=y(o,i,t,a,e[s+6],17,-1473231341),a=y(a,o,i,t,e[s+7],22,-45705983),t=y(t,a,o,i,e[s+8],7,1770035416),i=y(i,t,a,o,e[s+9],12,-1958414417),o=y(o,i,t,a,e[s+10],17,-42063),a=y(a,o,i,t,e[s+11],22,-1990404162),t=y(t,a,o,i,e[s+12],7,1804603682),i=y(i,t,a,o,e[s+13],12,-40341101),o=y(o,i,t,a,e[s+14],17,-1502002290),a=y(a,o,i,t,e[s+15],22,1236535329),t=S(t,a,o,i,e[s+1],5,-165796510),i=S(i,t,a,o,e[s+6],9,-1069501632),o=S(o,i,t,a,e[s+11],14,643717713),a=S(a,o,i,t,e[s+0],20,-373897302),t=S(t,a,o,i,e[s+5],5,-701558691),i=S(i,t,a,o,e[s+10],9,38016083),o=S(o,i,t,a,e[s+15],14,-660478335),a=S(a,o,i,t,e[s+4],20,-405537848),t=S(t,a,o,i,e[s+9],5,568446438),i=S(i,t,a,o,e[s+14],9,-1019803690),o=S(o,i,t,a,e[s+3],14,-187363961),a=S(a,o,i,t,e[s+8],20,1163531501),t=S(t,a,o,i,e[s+13],5,-1444681467),i=S(i,t,a,o,e[s+2],9,-51403784),o=S(o,i,t,a,e[s+7],14,1735328473),a=S(a,o,i,t,e[s+12],20,-1926607734),t=b(t,a,o,i,e[s+5],4,-378558),i=b(i,t,a,o,e[s+8],11,-2022574463),o=b(o,i,t,a,e[s+11],16,1839030562),a=b(a,o,i,t,e[s+14],23,-35309556),t=b(t,a,o,i,e[s+1],4,-1530992060),i=b(i,t,a,o,e[s+4],11,1272893353),o=b(o,i,t,a,e[s+7],16,-155497632),a=b(a,o,i,t,e[s+10],23,-1094730640),t=b(t,a,o,i,e[s+13],4,681279174),i=b(i,t,a,o,e[s+0],11,-358537222),o=b(o,i,t,a,e[s+3],16,-722521979),a=b(a,o,i,t,e[s+6],23,76029189),t=b(t,a,o,i,e[s+9],4,-640364487),i=b(i,t,a,o,e[s+12],11,-421815835),o=b(o,i,t,a,e[s+15],16,530742520),a=b(a,o,i,t,e[s+2],23,-995338651),t=_(t,a,o,i,e[s+0],6,-198630844),i=_(i,t,a,o,e[s+7],10,1126891415),o=_(o,i,t,a,e[s+14],15,-1416354905),a=_(a,o,i,t,e[s+5],21,-57434055),t=_(t,a,o,i,e[s+12],6,1700485571),i=_(i,t,a,o,e[s+3],10,-1894986606),o=_(o,i,t,a,e[s+10],15,-1051523),a=_(a,o,i,t,e[s+1],21,-2054922799),t=_(t,a,o,i,e[s+8],6,1873313359),i=_(i,t,a,o,e[s+15],10,-30611744),o=_(o,i,t,a,e[s+6],15,-1560198380),a=_(a,o,i,t,e[s+13],21,1309151649),t=_(t,a,o,i,e[s+4],6,-145523070),i=_(i,t,a,o,e[s+11],10,-1120210379),o=_(o,i,t,a,e[s+2],15,718787259),a=_(a,o,i,t,e[s+9],21,-343485551),t=O(t,n),a=O(a,l),o=O(o,u),i=O(i,f)}return Array(t,a,o,i)}function J(e,r,t,a,o,i){return O(Ke(O(O(r,e),O(a,i)),o),t)}function y(e,r,t,a,o,i,s){return J(r&t|~r&a,e,r,o,i,s)}function S(e,r,t,a,o,i,s){return J(r&a|t&~a,e,r,o,i,s)}function b(e,r,t,a,o,i,s){return J(r^t^a,e,r,o,i,s)}function _(e,r,t,a,o,i,s){return J(t^(r|~a),e,r,o,i,s)}function O(e,r){var t=(e&65535)+(r&65535),a=(e>>16)+(r>>16)+(t>>16);return a<<16|t&65535}function Ke(e,r){return e<<r|e>>>32-r}var x={md5:function(e){return Me(e)}};function Qe(e,r){let t=getApp().globalData.s.state.AES.encrypt(r,e);return`${getApp().globalData.apiUaPrefix}${t}`}function Se(e){return x.md5(`${getApp().globalData.channel}${e}${getApp().globalData.apiEncValue}`).substring(0,16)}var $={setToken(e){A(e)||ce("pubToken",e)},isLogin(){let e=getApp().globalData.s.state;return!A(e.pubToken)&&e.pubUser.uid},request(e,r,t,a,o=!1){return new Promise((i,s)=>{var n,l,u;let f=!1;if(t)if(t=="refresh")f=!0;else{let h={mask:!0};typeof t=="string"&&(h.title=t),uni.showLoading(h)}let p=!1;try{p=getApp().globalData.s.state.pubToken}catch(h){c("error","at common/api.js:31","request token catch "+JSON.stringify(h))}A((n=getApp().globalData)==null?void 0:n.ua)&&(Z(7,(l=getApp().globalData)==null?void 0:l.ua,typeof((u=getApp().globalData)==null?void 0:u.ua),r,e,p),getApp().initUaInfo());let w=getApp().globalData.ua,T,D=Ye(r),C={"content-type":"application/json"},k=getApp().globalData.apiHost,P;p&&getApp().globalData.uid!==0?(C.Authorization=`Bearer ${p}`,P=Se(getApp().globalData.uid)):P=Se(0),C.ua=Qe(w,P),T=getApp().globalData.s.state.AES.encrypt(P,JSON.stringify(D)),uni.request({url:k+e,method:"POST",header:C,data:T,dataType:"json",timeout:1e4,complete(h){if(t&&uni.hideLoading(),c("log","at common/api.js:63",`request ${e} obj ${JSON.stringify(r)}`,h.statusCode),h.header&&h.header["x-report-log"]&&Z(h.header["x-report-log"],C.ua,w,T,e,p),h.statusCode==200){let E=h.data,m=getApp().globalData.s.state.AES.decrypt(P,E);if(m=ye(m),c("log","at common/api.js:71","res:",m),!m){a&&s(m),Z(1,C.ua,w,T,e,p);return}if(m.data&&typeof m.data.callback=="object"&&($.handleCallback(m.data.callback),o))return W;if(m.ok===99)return getApp().loginOut("API ok 99"),W;if(m.ok==-98)return a&&s(m),W;if(A(m.msg)||L(m.msg),m.ok>0){i(m);return}a&&s(m)}else{if(h.statusCode==401)return getApp().loginOut("API status code 401"),W;if(f&&uni.stopPullDownRefresh(),a)s(h);else return W}},fail(h){}})})},handleCallback(e){},accessLogExtra(e,r,t){}};function Ye(e){try{A(e)&&(e={}),e.times=new Date().getTime();let r=Object.keys(e).sort(),t={};for(let o=0,i=r.length;o<i;o++)t[r[o]]=e[r[o]];let a=be(t).substr(1);return t.sign=x.md5(`${x.md5(a)}${getApp().globalData.apiSignValue}`),t}catch(r){return e}}function be(e,r){if(e==null||typeof e=="number"&&isNaN(e))return"";try{let t="",a=typeof e;if(a=="string"||a=="number")t+="&"+r+"="+ge(e);else if(a=="boolean")t+="&"+r+"="+(e?1:0);else for(let o in e){let i=r==null?o:r+Xe(o);t+=be(e[o],i)}return t}catch(t){return""}}function Xe(e){return`${encodeURIComponent("[")}${e}${encodeURIComponent("]")}`}function Z(e,r,t,a,o,i){let s={type:e,ua:r,origin_ua:t,params:a,api:o,token:i},n=!1;try{n=getApp().globalData.s.state.pubToken}catch(u){c("error","at common/api.js:182","request token catch "+JSON.stringify(u))}let l={"content-type":"application/json",ua:getApp().globalData.ua};n&&(l.Authorization=`Bearer ${n}`),uni.request({url:`${getApp().globalData.apiHost}/log/report`,method:"POST",header:l,data:s,dataType:"json",timeout:1e4})}var _e={PHOTO:1,VIDEO:2,VOICE:3,TXT:4},ee={DB:"db",MESSAGE:"message",AVATAR:"avatar",LOG:"log",ALBUM:"album"};function ve(e){function r(s,n,l){for(;0<l--;)s.push(n)}function t(s,n){return s<<n|s>>>32-n}function a(s,n,l){return s^n^l}function o(s,n){var l=(n&65535)+(s&65535),u=(n>>>16)+(s>>>16)+(l>>>16);return(u&65535)<<16|l&65535}var i="0123456789abcdef";return function(s){for(var n=[],l=s.length*4,u,f=0;f<l;f++)u=s[f>>2]>>(3-f%4)*8,n.push(i.charAt(u>>4&15)+i.charAt(u&15));return n.join("")}(function(s,n){var l,u,f,p,w,T=s.length,D=1732584193,C=4023233417,k=2562383102,P=271733878,h=3285377520,E=[];r(E,1518500249,20),r(E,1859775393,20),r(E,2400959708,20),r(E,3395469782,20),s[n>>5]|=128<<24-n%32,s[(n+65>>9<<4)+15]=n;for(var m=0;m<T;m+=16){l=D,u=C,f=k,p=P,w=h;for(var v=0,V=[];v<80;v++){V[v]=v<16?s[v+m]:t(V[v-3]^V[v-8]^V[v-14]^V[v-16],1);var Ne=function(I,N,B,se,ne){var le=(ne&65535)+(I&65535)+(N&65535)+(B&65535)+(se&65535),Be=(ne>>>16)+(I>>>16)+(N>>>16)+(B>>>16)+(se>>>16)+(le>>>16);return(Be&65535)<<16|le&65535}(v<20?function(I,N,B){return I&N^~I&B}(u,f,p):v<40?a(u,f,p):v<60?function(I,N,B){return I&N^I&B^N&B}(u,f,p):a(u,f,p),w,E[v],V[v],t(l,5));w=p,p=f,f=t(u,30),u=l,l=Ne}D=o(D,l),C=o(C,u),k=o(k,f),P=o(P,p),h=o(h,w)}return[D,C,k,P,h]}(function(s){for(var n=[],l=255,u=s.length*8,f=0;f<u;f+=8)n[f>>5]|=(s.charCodeAt(f/8)&l)<<24-f%32;return n}(e).slice(),e.length*8))}function Ze(e,r,t=!1,a=null){let o=te(e,t);a?uni.setStorage({key:o,data:r,success:a}):uni.setStorageSync(o,r)}function we(e,r=!1,t=null){let a=te(e,r);if(t)uni.getStorage({key:a,success:t});else return uni.getStorageSync(a)}function Ae(e,r=!1){uni.removeStorage({key:te(e,r)})}function te(e,r){return r?`_s_${e}`:`s_${e}`}function q(e,r,t=!0){return Le(getApp().globalData.ossPicPath,e,r,t)}function Ce(e,r,t=!0){return Le(getApp().globalData.ossPath,e,r,t)}function Pe(e){if(A(e)||e.startsWith("http"))return;let t=`img_${ve(e)}`,a=we(t);Ae(t),a&&uni.removeSavedFile({filePath:a})}function Le(e,r,t,a=!0){if(A(r))return"";if(r.startsWith("http")||r.startsWith("file://"))return r;if(r.startsWith("/var/mobile/"))return"file://"+r;if(r.startsWith("/storage/")||r.startsWith("/data/"))return r;let i=`img_${ve(r)}`,s=we(i);if(s){let l={filePath:s,fail(u){xe(`\u7F13\u5B58\u68C0\u6D4B\u5931\u8D25${r}`,u),Ae(i),typeof t=="function"&&t(e+r)},success(u){}};return typeof t=="function"&&(l.success=function(){t(s)}),uni.getFileInfo(l),s}let n=e+r;return getApp().globalData.picCacheObj[i]||(getApp().globalData.picCacheObj[i]=1,c("error","at common/cache.js:107","------> \u7F13\u5B58\u5730\u5740 "+r),typeof t=="function"&&!a&&t(n),de(n).then(l=>{Ze(i,l),typeof t=="function"&&a&&t(l),delete getApp().globalData.picCacheObj[i]}).catch(()=>{})),n}function xe(e,r){c("error","at common/cache.js:119",`cache ${e}`,r)}function H(e,r,t){return new Promise(a=>{c("log","at comPlugin/image-browser.js:7",e),c("log","at comPlugin/image-browser.js:8",r),c("log","at comPlugin/image-browser.js:9",t);let o=e;o.startsWith("_doc")&&(o=plus.io.convertLocalFileSystemURL(o)),getApp().globalData.pluginImageBrowser.getVideoCover({url:o},i=>{a(i)})})}function ae(e,r,t,a="1",o=0,i=0){let s,n=j(r,!1);if(n)s=n;else{let f;if(R.isAndroid,f=!1,f){let p=q(r);s=p.startsWith("http")?p:plus.io.convertLocalFileSystemURL(p)}else s=getApp().globalData.ossPicPath+r}let l=j(t,!1)||`${getApp().globalData.ossPath}${t}`,u=e?j(a,!1)||`${getApp().globalData.ossPicPath}${a}`:a;return{isVideo:e,thumbnailUrl:s||"",url:l,coverUrl:u,width:o,height:i}}function oe(e,r,t=1){et(function(){let a=JSON.parse(JSON.stringify(e));getApp().globalData.pluginImageBrowser.openBrowser({info:a,index:r,showIndicator:t},o=>{c("info","at comPlugin/image-browser.js:65","Preview.preview "+JSON.stringify(o))})},500,"previewImage")}var re={};function et(e,r=500,t="throttle"){let a=e.name;A(a)&&(a=t),!re[a]&&(re[a]=!0,e(),setTimeout(function(){re[a]=""},r))}var De="/upload/params";function Ie(e,r,t){return new Promise((a,o)=>U(this,null,function*(){let i=e.replace("file://",""),s={flag:r,type:t};try{let n=yield $.request(De,s,!1,!0),l=yield Te(i,"",n.data);a(l)}catch(n){let l=Y(n);c("error","at common/api-upload.js:27","upload media fail "+l),uni.hideLoading(),o(n)}}))}function Oe(e,r,t,a,o,i=!0){return U(this,null,function*(){let s={};try{r.startsWith("_doc")&&(r=plus.io.convertLocalFileSystemURL(r));let n={},l=R.isAndroid?r:`file://${r}`,u=r,f=t;s={flag:e,type:_e.VIDEO};let p=yield $.request(De,s,!1,!0);c("log","at common/api-upload.js:46","upload video params response",p);let w=yield pe(l);if(i&&w?w.size>8*1024*1024:!1){let D=yield me(l,"medium");u=plus.io.convertLocalFileSystemURL(D.tempFilePath),f=yield H(u,a,o)}return u=u.replace("file://",""),f=f.replace("file://",""),n={url:p.data.dir.path,coverUrl:p.data.dir.cover_path,smallUrl:p.data.dir.small_url},yield Te(u,f,p.data),n}catch(n){let l=Y(n);throw c("error","at common/api-upload.js:66","upload media fail "+l),l}})}function Te(e,r,t,a=0,o=0){return new Promise((i,s)=>{getApp().globalData.pluginUpload.singleUpS3({filePath:e,isBase64:a,coverFilePath:r,coverIsBase64:o,ossInfo:t},n=>{c("log","at common/api-upload.js:80","upload plugin s3 result",n),(typeof n=="object"?n.success:n)?i({path:t.dir.path,smallPath:t.dir.small_url}):s(`_upModuleS3 ${JSON.stringify(n)}`)})})}var g=K(z());var d=K(z());var tt={"l-img":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"place-img":{"":{position:"absolute",top:0,left:0}}},rt={name:"LImg",emits:["click","onError","onLoad"],props:{src:{type:String,default:""},mode:{type:String,default:"aspectFill"},w:{type:String,default:"0"},h:{type:String,default:"0"},radius:{type:String,default:"0"},lazyLoad:{type:Boolean,default:!1},fade:{type:Boolean,default:!0},placeType:{type:Number,default:0},placeW:{type:String,default:""},placeFontSize:{type:[String,Boolean],default:""},placeBottom:{type:String,default:""},border:{type:String,default:""},otherStyle:{type:Object,default(){return{}}},click:{type:Boolean,default:!0},isGif:{type:Boolean,default:!1},needStyle:{type:[String,Number],default:0},useCache:{type:Boolean,default:!1},fitWH:{type:String,default:""},isStatic:{type:Number,default:0}},data(){return{errorCount:1,path:"",refresh:!0,darkDir:"",isLoad:!1,fitStr:""}},watch:{src(){this.isLoad=!1,this.path=this.parse()}},computed:{placeSrc(){return this.placeType==1?"/static/img_load_s.png":this.placeType==2?"/static/img_load_b.png":""},placeViewStyle(){let e={width:this.placeW,height:this.placeW,position:"relative"};return this.placeBottom&&(e.marginBottom=this.placeBottom),e},placeFontSizeVal(){return this.placeFontSize===!1?"":this.placeFontSize?this.placeFontSize:this.placeType==2?"24rpx":"16rpx"},borderStyle(){if(this.border=="")return{};let e={},r=this.border.split(" ");return e.borderWidth=r[0],e.borderStyle=r[1],e.borderColor=r[2],e},viewStyle(){let e={width:this.w,minWidth:this.w,height:this.h,minHeight:this.h};return this.setRadius(e)},imgStyle(){let e={width:this.w,height:this.h};return e=Object.assign(e,this.otherStyle),this.setRadius(e)},ossPathOriginal(){return this.isGif?getApp().globalData.ossPath:getApp().globalData.ossPicPath}},methods:{clickImg(e){this.click&&this.$emit("click",e)},setRadius(e){let r=this.radius.split(" ");return r.length<=1?e.borderRadius=this.radius:(e.borderTopLeftRadius=r[0],e.borderTopRightRadius=r[1],e.borderBottomRightRadius=r[2],e.borderBottomLeftRadius=r[3]),e},onLoadError(){if(this.path){if(this.path.startsWith("http")){if(this.errorCount>2){this.isError=!0,this.$emit("onError");return}this.errorCount+=1,this.refresh=!1,setTimeout(()=>{this.refresh=!0},500);return}this.path=this.ossPathOriginal+this.darkDir+this.src,Pe(this.darkDir+this.src)}},onLoad(){this.isLoad=!0,this.$emit("onLoad")},parse(){if(this.isStatic)return this.src;let e;return e=0,this.src.startsWith("/static")?this.src:this.useCache||e&&R.isAndroid?this.isGif?Ce(this.fitStr+this.darkDir+this.src):q(this.fitStr+this.darkDir+this.src):this.src.startsWith("file://")?this.src:this.src.startsWith("/var/mobile/")?"file://"+this.src:this.src.startsWith("/storage/")?this.src:this.ossPathOriginal+this.fitStr+this.darkDir+this.src}},created(){this.fitWH&&this.src.indexOf("fit-in")==-1&&(this.fitStr="fit-in/"+this.fitWH+"/"),this.path=this.parse()}};function at(e,r,t,a,o,i){return(0,d.openBlock)(),(0,d.createElementBlock)("view",{class:"l-img",onClick:r[2]||(r[2]=(...s)=>i.clickImg&&i.clickImg(...s)),style:(0,d.normalizeStyle)([i.viewStyle,i.borderStyle]),renderWhole:!0},[(0,d.createElementVNode)("view",{class:"l-img",style:(0,d.normalizeStyle)([{position:"relative"},i.viewStyle])},[t.placeType&&!o.isLoad?((0,d.openBlock)(),(0,d.createElementBlock)("view",{key:0,style:(0,d.normalizeStyle)(i.placeViewStyle)},[(0,d.createElementVNode)("u-image",{src:i.placeSrc,style:(0,d.normalizeStyle)({width:t.placeW,height:t.placeW})},null,12,["src"])],4)):(0,d.createCommentVNode)("",!0),o.refresh?((0,d.openBlock)(),(0,d.createElementBlock)("u-image",{key:1,onError:r[0]||(r[0]=(...s)=>i.onLoadError&&i.onLoadError(...s)),onLoad:r[1]||(r[1]=(...s)=>i.onLoad&&i.onLoad(...s)),src:o.path,mode:t.mode,lazyLoad:t.lazyLoad,fadeShow:t.fade,style:(0,d.normalizeStyle)([i.imgStyle,i.borderStyle]),class:"place-img"},null,44,["src","mode","lazyLoad","fadeShow"])):(0,d.createCommentVNode)("",!0)],4)],4)}var Ee=F(rt,[["render",at],["styles",[tt]]]);var ot={emits:["onChoose"],props:{maxSelected:{type:Number,default:2},singleMaxSize:{type:Number,default:9},totalMaxSize:{type:Number,default:10}},data(){return{content:{maxSizeTip:"\u6700\u5927\u9650\u5236\u7684\u63D0\u793A\u6587\u6848(500MB)",send:"Send",sendColor:"#ffffff",sendBgColor:"#00A7ff",selectorIcon:""}}},methods:{onPop(e){c("log","at comsExtend/album-selector-view.vue:47","\u5F39\u7A97\u63D0\u793A\u4E8B\u4EF6",e),e.detail.type==1?L("\u8D85\u8FC7\u6700\u5927\u9009\u62E9\u6570"):e.detail.type==2?L("\u603B\u7684\u5927\u5C0F\u8D85\u8FC7\u6700\u5927"):e.detail.type==3?L("\u5355\u4E2A\u5927\u5C0F\u8D85\u8FC7\u6700\u5927"):e.detail.type==4&&L("\u6743\u9650\u5F39\u6846")},onItem(e){if(e.detail.previewInfo.type==3)H(e.detail.previewInfo.path,400,700).then(r=>U(this,null,function*(){let t=[ae(!0,e.detail.previewInfo.path,e.detail.previewInfo.path,r,300,500)];oe(t,0)}));else{let r=[ae(!1,e.detail.previewInfo.path,e.detail.previewInfo.path,1,300,500)];oe(r,0)}},onSend(e){return U(this,null,function*(){c("error","at comsExtend/album-selector-view.vue:70","album selector onSend",e.detail);for(let r=0,t=e.detail.album_selected_array.length;r<t;r++){let a=e.detail.album_selected_array[r];a.media_type=a.type==3?2:1}this.$emit("onChoose",e.detail.album_selected_array)})}},onLoad(){}};function it(e,r,t,a,o,i){let s=(0,g.resolveComponent)("nav-system-album");return(0,g.openBlock)(),(0,g.createBlock)(s,{max_selected:t.maxSelected,single_max_size:t.singleMaxSize,total_max_size:t.totalMaxSize,content:o.content,onPop:i.onPop,onItem:i.onItem,onSend:i.onSend},null,8,["max_selected","single_max_size","total_max_size","content","onPop","onItem","onSend"])}var st=F(ot,[["render",it]]),nt={components:{AlbumSelectorView:st,LImg:Ee},data(){return{safeBottomH:getApp().globalData.window.safeBottom}},methods:{onChoose(e){c("error","at pagesPub/album-selector.nvue:25","album selector onChoose",e),M("Tips",JSON.stringify(e),()=>{let r=e[0];he(!0),r.media_type==1?Ie(r.path,ee.ALBUM,r.media_type).then(t=>{Q(),c("log","at pagesPub/album-selector.nvue:32",t.path),M("\u4E0A\u4F20\u6210\u529F",t.path)},t=>{c("error","at pagesPub/album-selector.nvue:35","album selector \u4E0A\u4F20\u5931\u8D25",t),L("\u4E0A\u4F20\u5931\u8D25")}):H(r.path,400,700).then(t=>U(this,null,function*(){Oe(ee.ALBUM,r.path,t,400,700).then(a=>{c("log","at pagesPub/album-selector.nvue:41",a),Q(),M("\u4E0A\u4F20\u6210\u529F",a.url)},a=>{c("error","at pagesPub/album-selector.nvue:45","album selector \u4E0A\u4F20\u5931\u8D25",a),L("\u4E0A\u4F20\u5931\u8D25")})}))},"","\u6D4B\u8BD5\u4E0A\u4F20")}},onLoad(e){}};function lt(e,r,t,a,o,i){let s=(0,g.resolveComponent)("album-selector-view");return(0,g.openBlock)(),(0,g.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,g.createElementVNode)("view",{style:{flex:"1"}},[(0,g.createVNode)(s,{onOnChoose:i.onChoose,style:{flex:"1"}},null,8,["onOnChoose"]),(0,g.createElementVNode)("view",{style:(0,g.normalizeStyle)([{width:"1px"},{height:o.safeBottomH+"px"}])},null,4)])])}var G=F(nt,[["render",lt]]);var ie=plus.webview.currentWebview();if(ie){let e=parseInt(ie.id),r="pagesPub/album-selector",t={};try{t=JSON.parse(ie.__query__)}catch(o){}G.mpType="page";let a=Vue.createPageApp(G,{$store:getApp({allowDefault:!0}).$store,__pageId:e,__pagePath:r,__pageQuery:t});a.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...G.styles||[]])),a.mount("#root")}})();
