"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var Cl=Object.create;var $n=Object.defineProperty,Al=Object.defineProperties,Tl=Object.getOwnPropertyDescriptor,Sl=Object.getOwnPropertyDescriptors,vl=Object.getOwnPropertyNames,rs=Object.getOwnPropertySymbols,kl=Object.getPrototypeOf,os=Object.prototype.hasOwnProperty,Fl=Object.prototype.propertyIsEnumerable;var ss=(e,t,i)=>t in e?$n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Rt=(e,t)=>{for(var i in t||(t={}))os.call(t,i)&&ss(e,i,t[i]);if(rs)for(var i of rs(t))Fl.call(t,i)&&ss(e,i,t[i]);return e},vi=(e,t)=>Al(e,Sl(t));var as=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ll=(e,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of vl(t))!os.call(e,n)&&n!==i&&$n(e,n,{get:()=>t[n],enumerable:!(o=Tl(t,n))||o.enumerable});return e};var q=(e,t,i)=>(i=e!=null?Cl(kl(e)):{},Ll(t||!e||!e.__esModule?$n(i,"default",{value:e,enumerable:!0}):i,e));var $=(e,t,i)=>new Promise((o,n)=>{var r=u=>{try{c(i.next(u))}catch(p){n(p)}},a=u=>{try{c(i.throw(u))}catch(p){n(p)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(r,a);c((i=i.apply(e,t)).next())});var Z=as((S_,ls)=>{ls.exports=Vue});var Kn=as((v_,cs)=>{cs.exports=uni.Vuex});var W=q(Z()),Es=q(Kn());var Il=e=>typeof e=="string";function le(e){return weex.requireModule(e)}function C(e,t,...i){uni.__log__?uni.__log__(e,t,...i):console[e].apply(console,[...i,t])}function y(e,t){return Il(e)?t:e}var Dl="dev",Os,Rs,Ns,Bs,Ps;Os="https://ztest1.candychat.link",Bs="https://mtest2.candychat.link",Ps="https://atest3.267girl.com",Rs="https://pic2.candychat.link/",Ns="https://pic3.candychat.link/";var Ml={wv:"13.2.0",ENV:Dl,apiHost:Os,ossPath:Rs,pApiHost:Bs,oApiHost:Ps,ossPicPath:Ns,zT:3,appId:plus.runtime.appid,appV:parseInt(plus.runtime.version.split(".").join("")),OSS_PATH_V:1,OSS_PIC_PATH_V:1,API_HOST_V:1,isAndroid:plus.os.name=="Android",PHOTO:1,VIDEO:2,VOICE:3,TXT:4,SYSTEM_ID:1e7,M_TEXT:1,M_VOICE:2,M_IMG:3,M_GIFT:5,M_NOTICE:6,M_CALL:8,M_RECOMMEND_USER:11,M_RECOMMEND_CLUB:12,M_VIDEO:18,M_GIFT_ASK:21,M_NOTICE_SYS:22,M_EXPRESSION:23,M_LETTER:24,M_PAID_PHOTO:25,M_PAID_VIDEO:26,M_MATCH_SUCCESS:27,M_N_DEF:100,M_N_AUDIT:103,M_N_VIP:104,M_N_RECHARGE:105,M_N_CLUB_AUDIT_REJECT:106,M_N_CLUB_AUDIT:107,M_N_GREETING_AUDIT:115,M_N_SYS_NOTICE:116,M_N_CALL:117,M_N_COOPERATE:118,M_N_WITHDRAW:119,M_N_REPORT_AUDIT:120,M_N_IMG:121,M_N_PRIVACY_CALL:122,M_N_WITHDRAW_NOTICE:123,M_N_WITH_MEDIA:124,M_N_MONITOR:202,M_C_RECHARGE:1001,M_C_CALL_TEXT_AUDIO:1002,M_CHAT_PRI:1,M_CHAT_CLUB:2,M_CHAT_ASS:3,M_CHAT_NOTICE:4,M_CHAT_NOTIFY:5,M_CHAT_CLUB_NOTICE:6,PAY_TYPE_SUCCESS:0,PAY_TYPE_FAIL:1,PAY_TYPE_CANCEL:2,PAY_TYPE_NOT_EXIST:3,PAY_TYPE_NOT_ALLOW:4,PAY_TYPE_ERROR:5,MATCH_PRICE:10},O=Ml,El={LEVEL_33:33,LEVEL_29:29},si={FIND:0,USER:1,MSG:2,MY:3},ti={FIND:"/pages/user/index",MSG:"/pages/msg/index",CALL:"/pages/call-history/index",USER:"/pages/user/index",MY:"/pages/my/index"};var lr={AGORA:"agora",DB:"db",MESSAGE:"message",AVATAR:"avatar",REPORT:"report",FEEDBACK:"feedback",WITHDRAW:"withdraw",CLUB:"club",BANNED:"banned",WARNING:"warning",ALBUM:"album",AUTH:"auth",LOG:"log"};var Ol={en:{title:"English",language:"en",code:"en-US"},es:{title:"espa\xF1ol",language:"es",code:"es-ES"},ar:{title:"\u0639\u0631\u0628\u064A",language:"ar",code:"ar-SA"},vi:{title:"Ti\u1EBFng Vi\u1EC7t",language:"vi",code:"vi-VN"},tr:{title:"T\xFCrk\xE7e",language:"tr",code:"tr-TR"},pt:{title:"Portugu\xEAs",language:"pt",code:"pt-PT"}},an={MATCH:1,ENABLE_CAMERA:2,ENABLE_MICROPHONE:3,MATCH_GENDER:4,FREE_LAUNCH:5,FREE_EXPLORE:6,MOMENTS:7,PRIVACY_RANK:8,PRIVACY_GIFT:9,PRIVACY_BALANCE:10,PRIVACY_LEVEL:11,PRIVACY_VISIT:12,PRIVACY_PROFILE:13,PRIVACY_CONTACT:14,PRIVACY_HIDE_ONLINE:15,PRIVACY_ONLINE_NOTICE:16,BANNER_PRIVACY_POPULAR:17,BANNER_GIVE_COINS:19,BANNER_FILTER_LIST:20,BANNER_MEDIA_DESTRUCT:21,BANNER_CLUB_ADVANCED:22,BOOST_FREE:23,ENABLE_REMOTE_AUDIO:24},Rl={ACCOUNT:0,LOGIN:1,MESSAGE:2,RECHARGE:6,MSG_SYSTEM:7,DEVICE:8,IP:9,CALL:10,WITHDRAW:11,JOIN_CLUB:14,CREATE_CLUB:15,COACH_LIST:16,SAY_HELLO_MSG:17,GIFT:18,MATCH:19,MOMENT:20,TASK:21,GAME:22,INVITE:23,CERTIFICATION:24,CONSUME:25,NOTIFICATION:26,RANKING_LIST:27};var us={SUPER:1,KEFU:2};var li={MOMENT:1,SIGN:2,CHECK_SIGN:3,MESSAGE:4,CHECK_NICKNAME:5,CALL:6,CLUB_INTRO:7,CHECK_CLUB_NAME:8,CHECK_CLUB_INTRO:9,REPORT:10,FEEDBACK:11,FEE_ALBUM:12,GREET:13,SENSITIVE:14,MSG_PRI:15,MSG_CLUB:16,MSG_SYS:17,MSG_KEFU:18,GAME_MSG:19,CHECK_CLUB_NAME_V1:20,CHECK_CLUB_INTRO_V1:21,CHECK_CLUB_REASON:22,CLUB_NAME:23,CLUB_APPLICATION_REASON:24,BANNED_REASON:25,WARNING_REASON:26};var pt={CALL_FEE:1,CALL_FREE:2},Ei={NO_BALANCE_MSG_WINDOW:1,NO_BALANCE_POP:2,NO_BALANCE_END_POP:3};var Nl={DISBAND:1,CHECK_RESULT:2};var Bl=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",xt=e=>Bl?Symbol(e):e,Pl=(e,t,i)=>Hl({l:e,k:t,s:i}),Hl=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Ee=e=>typeof e=="number"&&isFinite(e),Ul=e=>cr(e)==="[object Date]",nn=e=>cr(e)==="[object RegExp]",ln=e=>K(e)&&Object.keys(e).length===0;function Gl(e,t){typeof console!="undefined"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}var Ve=Object.assign;function ps(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}var Wl=Object.prototype.hasOwnProperty;function Hs(e,t){return Wl.call(e,t)}var ke=Array.isArray,Oe=e=>typeof e=="function",P=e=>typeof e=="string",_e=e=>typeof e=="boolean",Re=e=>e!==null&&typeof e=="object",Us=Object.prototype.toString,cr=e=>Us.call(e),K=e=>cr(e)==="[object Object]",Vl=e=>e==null?"":ke(e)||K(e)&&e.toString===Us?JSON.stringify(e,null,2):String(e);var jl=Object.prototype.hasOwnProperty;function zl(e,t){return jl.call(e,t)}var en=e=>e!==null&&typeof e=="object",Ct=[];Ct[0]={w:[0],i:[3,0],["["]:[4],o:[7]};Ct[1]={w:[1],["."]:[2],["["]:[4],o:[7]};Ct[2]={w:[2],i:[3,0],[0]:[3,0]};Ct[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};Ct[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};Ct[5]={["'"]:[4,0],o:8,l:[5,0]};Ct[6]={['"']:[4,0],o:8,l:[6,0]};var $l=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Kl(e){return $l.test(e)}function Yl(e){let t=e.charCodeAt(0),i=e.charCodeAt(e.length-1);return t===i&&(t===34||t===39)?e.slice(1,-1):e}function ql(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Jl(e){let t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:Kl(t)?Yl(t):"*"+t}function Zl(e){let t=[],i=-1,o=0,n=0,r,a,c,u,p,d,_,w=[];w[0]=()=>{a===void 0?a=c:a+=c},w[1]=()=>{a!==void 0&&(t.push(a),a=void 0)},w[2]=()=>{w[0](),n++},w[3]=()=>{if(n>0)n--,o=4,w[0]();else{if(n=0,a===void 0||(a=Jl(a),a===!1))return!1;w[1]()}};function D(){let b=e[i+1];if(o===5&&b==="'"||o===6&&b==='"')return i++,c="\\"+b,w[0](),!0}for(;o!==null;)if(i++,r=e[i],!(r==="\\"&&D())){if(u=ql(r),_=Ct[o],p=_[u]||_.l||8,p===8||(o=p[0],p[1]!==void 0&&(d=w[p[1]],d&&(c=r,d()===!1))))return;if(o===7)return t}}var hs=new Map;function rn(e,t){if(!en(e))return null;let i=hs.get(t);if(i||(i=Zl(t),i&&hs.set(t,i)),!i)return null;let o=i.length,n=e,r=0;for(;r<o;){let a=n[i[r]];if(a===void 0)return null;n=a,r++}return n}function Zn(e){if(!en(e))return e;for(let t in e)if(zl(e,t))if(!t.includes("."))en(e[t])&&Zn(e[t]);else{let i=t.split("."),o=i.length-1,n=e;for(let r=0;r<o;r++)i[r]in n||(n[i[r]]={}),n=n[i[r]];n[i[o]]=e[t],delete e[t],en(n[i[o]])&&Zn(n[i[o]])}return e}var Xl=e=>e,Ql=e=>"",ec="text",tc=e=>e.length===0?"":e.join(""),ic=Vl;function ms(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function nc(e){let t=Ee(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Ee(e.named.count)||Ee(e.named.n))?Ee(e.named.count)?e.named.count:Ee(e.named.n)?e.named.n:t:t}function rc(e,t){t.count||(t.count=e),t.n||(t.n=e)}function sc(e={}){let t=e.locale,i=nc(e),o=Re(e.pluralRules)&&P(t)&&Oe(e.pluralRules[t])?e.pluralRules[t]:ms,n=Re(e.pluralRules)&&P(t)&&Oe(e.pluralRules[t])?ms:void 0,r=T=>T[o(i,T.length,n)],a=e.list||[],c=T=>a[T],u=e.named||{};Ee(e.pluralIndex)&&rc(i,u);let p=T=>u[T];function d(T){let G=Oe(e.messages)?e.messages(T):Re(e.messages)?e.messages[T]:!1;return G||(e.parent?e.parent.message(T):Ql)}let _=T=>e.modifiers?e.modifiers[T]:Xl,w=K(e.processor)&&Oe(e.processor.normalize)?e.processor.normalize:tc,D=K(e.processor)&&Oe(e.processor.interpolate)?e.processor.interpolate:ic,b=K(e.processor)&&P(e.processor.type)?e.processor.type:ec,F={list:c,named:p,plural:r,linked:(T,G)=>{let ee=d(T)(F);return P(G)?_(G)(ee):ee},message:d,type:b,interpolate:D,normalize:w};return F}function Gs(e,t,i={}){let{domain:o,messages:n,args:r}=i,a=e,c=new SyntaxError(String(a));return c.code=e,t&&(c.location=t),c.domain=o,c}var oc="9.1.9",cn=-1,ds="";function ac(){return{upper:e=>P(e)?e.toUpperCase():e,lower:e=>P(e)?e.toLowerCase():e,capitalize:e=>P(e)?`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`:e}}var lc,fs=0;function cc(e={}){let t=P(e.version)?e.version:oc,i=P(e.locale)?e.locale:"en-US",o=ke(e.fallbackLocale)||K(e.fallbackLocale)||P(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:i,n=K(e.messages)?e.messages:{[i]:{}},r=K(e.datetimeFormats)?e.datetimeFormats:{[i]:{}},a=K(e.numberFormats)?e.numberFormats:{[i]:{}},c=Ve({},e.modifiers||{},ac()),u=e.pluralRules||{},p=Oe(e.missing)?e.missing:null,d=_e(e.missingWarn)||nn(e.missingWarn)?e.missingWarn:!0,_=_e(e.fallbackWarn)||nn(e.fallbackWarn)?e.fallbackWarn:!0,w=!!e.fallbackFormat,D=!!e.unresolving,b=Oe(e.postTranslation)?e.postTranslation:null,F=K(e.processor)?e.processor:null,T=_e(e.warnHtmlMessage)?e.warnHtmlMessage:!0,G=!!e.escapeParameter,ee=Oe(e.messageCompiler)?e.messageCompiler:lc,te=Oe(e.onWarn)?e.onWarn:Gl,M=e,Y=Re(M.__datetimeFormatters)?M.__datetimeFormatters:new Map,Ge=Re(M.__numberFormatters)?M.__numberFormatters:new Map,ct=Re(M.__meta)?M.__meta:{};return fs++,{version:t,cid:fs,locale:i,fallbackLocale:o,messages:n,datetimeFormats:r,numberFormats:a,modifiers:c,pluralRules:u,missing:p,missingWarn:d,fallbackWarn:_,fallbackFormat:w,unresolving:D,postTranslation:b,processor:F,warnHtmlMessage:T,escapeParameter:G,messageCompiler:ee,onWarn:te,__datetimeFormatters:Y,__numberFormatters:Ge,__meta:ct}}function ur(e,t,i,o,n){let{missing:r,onWarn:a}=e;if(r!==null){let c=r(e,i,t,n);return P(c)?c:t}else return t}function Oi(e,t,i){let o=e;o.__localeChainCache||(o.__localeChainCache=new Map);let n=o.__localeChainCache.get(i);if(!n){n=[];let r=[i];for(;ke(r);)r=gs(n,r,t);let a=ke(t)?t:K(t)?t.default?t.default:null:t;r=P(a)?[a]:a,ke(r)&&gs(n,r,!1),o.__localeChainCache.set(i,n)}return n}function gs(e,t,i){let o=!0;for(let n=0;n<t.length&&_e(o);n++){let r=t[n];P(r)&&(o=uc(e,t[n],i))}return o}function uc(e,t,i){let o,n=t.split("-");do{let r=n.join("-");o=pc(e,r,i),n.splice(-1,1)}while(n.length&&o===!0);return o}function pc(e,t,i){let o=!1;if(!e.includes(t)&&(o=!0,t)){o=t[t.length-1]!=="!";let n=t.replace(/!/g,"");e.push(n),(ke(i)||K(i))&&i[n]&&(o=i[n])}return o}function ki(e,t,i){let o=e;o.__localeChainCache=new Map,Oi(e,i,t)}function ii(e){return Gs(e,null,void 0)}var _s=()=>"",Ht=e=>Oe(e);function ys(e,...t){let{fallbackFormat:i,postTranslation:o,unresolving:n,fallbackLocale:r,messages:a}=e,[c,u]=Xn(...t),p=_e(u.missingWarn)?u.missingWarn:e.missingWarn,d=_e(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,_=_e(u.escapeParameter)?u.escapeParameter:e.escapeParameter,w=!!u.resolvedMessage,D=P(u.default)||_e(u.default)?_e(u.default)?c:u.default:i?c:"",b=i||D!=="",F=P(u.locale)?u.locale:e.locale;_&&hc(u);let[T,G,ee]=w?[c,F,a[F]||{}]:mc(e,c,F,r,d,p),te=c;if(!w&&!(P(T)||Ht(T))&&b&&(T=D,te=T),!w&&(!(P(T)||Ht(T))||!P(G)))return n?cn:c;let M=!1,Y=()=>{M=!0},Ge=Ht(T)?T:Ws(e,c,G,T,te,Y);if(M)return T;let ct=gc(e,G,ee,u),Ie=sc(ct),We=dc(e,Ge,Ie);return o?o(We):We}function hc(e){ke(e.list)?e.list=e.list.map(t=>P(t)?ps(t):t):Re(e.named)&&Object.keys(e.named).forEach(t=>{P(e.named[t])&&(e.named[t]=ps(e.named[t]))})}function mc(e,t,i,o,n,r){let{messages:a,onWarn:c}=e,u=Oi(e,o,i),p={},d,_=null,w="translate";for(let D=0;D<u.length&&(d=u[D],p=a[d]||{},(_=rn(p,t))===null&&(_=p[t]),!(P(_)||Oe(_)));D++){let b=ur(e,t,d,r,w);b!==t&&(_=b)}return[_,d,p]}function Ws(e,t,i,o,n,r){let{messageCompiler:a,warnHtmlMessage:c}=e;if(Ht(o)){let p=o;return p.locale=p.locale||i,p.key=p.key||t,p}let u=a(o,fc(e,i,n,o,c,r));return u.locale=i,u.key=t,u.source=o,u}function dc(e,t,i){return t(i)}function Xn(...e){let[t,i,o]=e,n={};if(!P(t)&&!Ee(t)&&!Ht(t))throw ii(14);let r=Ee(t)?String(t):(Ht(t),t);return Ee(i)?n.plural=i:P(i)?n.default=i:K(i)&&!ln(i)?n.named=i:ke(i)&&(n.list=i),Ee(o)?n.plural=o:P(o)?n.default=o:K(o)&&Ve(n,o),[r,n]}function fc(e,t,i,o,n,r){return{warnHtmlMessage:n,onError:a=>{throw r&&r(a),a},onCacheKey:a=>Pl(t,i,a)}}function gc(e,t,i,o){let{modifiers:n,pluralRules:r}=e,c={locale:t,modifiers:n,pluralRules:r,messages:u=>{let p=rn(i,u);if(P(p)){let d=!1,w=Ws(e,u,t,p,u,()=>{d=!0});return d?_s:w}else return Ht(p)?p:_s}};return e.processor&&(c.processor=e.processor),o.list&&(c.list=o.list),o.named&&(c.named=o.named),Ee(o.plural)&&(c.pluralIndex=o.plural),c}function ws(e,...t){let{datetimeFormats:i,unresolving:o,fallbackLocale:n,onWarn:r}=e,{__datetimeFormatters:a}=e,[c,u,p,d]=Qn(...t),_=_e(p.missingWarn)?p.missingWarn:e.missingWarn;_e(p.fallbackWarn)?p.fallbackWarn:e.fallbackWarn;let w=!!p.part,D=P(p.locale)?p.locale:e.locale,b=Oi(e,n,D);if(!P(c)||c==="")return new Intl.DateTimeFormat(D).format(u);let F={},T,G=null,ee="datetime format";for(let Y=0;Y<b.length&&(T=b[Y],F=i[T]||{},G=F[c],!K(G));Y++)ur(e,c,T,_,ee);if(!K(G)||!P(T))return o?cn:c;let te=`${T}__${c}`;ln(d)||(te=`${te}__${JSON.stringify(d)}`);let M=a.get(te);return M||(M=new Intl.DateTimeFormat(T,Ve({},G,d)),a.set(te,M)),w?M.formatToParts(u):M.format(u)}function Qn(...e){let[t,i,o,n]=e,r={},a={},c;if(P(t)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(t))throw ii(16);c=new Date(t);try{c.toISOString()}catch(u){throw ii(16)}}else if(Ul(t)){if(isNaN(t.getTime()))throw ii(15);c=t}else if(Ee(t))c=t;else throw ii(14);return P(i)?r.key=i:K(i)&&(r=i),P(o)?r.locale=o:K(o)&&(a=o),K(n)&&(a=n),[r.key||"",c,r,a]}function bs(e,t,i){let o=e;for(let n in i){let r=`${t}__${n}`;o.__datetimeFormatters.has(r)&&o.__datetimeFormatters.delete(r)}}function xs(e,...t){let{numberFormats:i,unresolving:o,fallbackLocale:n,onWarn:r}=e,{__numberFormatters:a}=e,[c,u,p,d]=er(...t),_=_e(p.missingWarn)?p.missingWarn:e.missingWarn;_e(p.fallbackWarn)?p.fallbackWarn:e.fallbackWarn;let w=!!p.part,D=P(p.locale)?p.locale:e.locale,b=Oi(e,n,D);if(!P(c)||c==="")return new Intl.NumberFormat(D).format(u);let F={},T,G=null,ee="number format";for(let Y=0;Y<b.length&&(T=b[Y],F=i[T]||{},G=F[c],!K(G));Y++)ur(e,c,T,_,ee);if(!K(G)||!P(T))return o?cn:c;let te=`${T}__${c}`;ln(d)||(te=`${te}__${JSON.stringify(d)}`);let M=a.get(te);return M||(M=new Intl.NumberFormat(T,Ve({},G,d)),a.set(te,M)),w?M.formatToParts(u):M.format(u)}function er(...e){let[t,i,o,n]=e,r={},a={};if(!Ee(t))throw ii(14);let c=t;return P(i)?r.key=i:K(i)&&(r=i),P(o)?r.locale=o:K(o)&&(a=o),K(n)&&(a=n),[r.key||"",c,r,a]}function Cs(e,t,i){let o=e;for(let n in i){let r=`${t}__${n}`;o.__numberFormatters.has(r)&&o.__numberFormatters.delete(r)}}var _c="9.1.9";function Bt(e,...t){return Gs(e,null,void 0)}var tr=xt("__transrateVNode"),ir=xt("__datetimeParts"),nr=xt("__numberParts");xt("__enableEmitter");xt("__disableEmitter");var yc=xt("__setPluralRules");xt("__intlifyMeta");var Vs=xt("__injectWithOption"),As=0;function Ts(e){return(t,i,o,n)=>e(i,o,(0,W.getCurrentInstance)()||void 0,n)}function js(e,t){let{messages:i,__i18n:o}=t,n=K(i)?i:ke(o)?{}:{[e]:{}};if(ke(o)&&o.forEach(({locale:r,resource:a})=>{r?(n[r]=n[r]||{},sn(a,n[r])):sn(a,n)}),t.flatJson)for(let r in n)Hs(n,r)&&Zn(n[r]);return n}var Xi=e=>!Re(e)||ke(e);function sn(e,t){if(Xi(e)||Xi(t))throw Bt(20);for(let i in e)Hs(e,i)&&(Xi(e[i])||Xi(t[i])?t[i]=e[i]:sn(e[i],t[i]))}function wc(e={}){let{__root:t}=e,i=t===void 0,o=_e(e.inheritLocale)?e.inheritLocale:!0,n=(0,W.ref)(t&&o?t.locale.value:P(e.locale)?e.locale:"en-US"),r=(0,W.ref)(t&&o?t.fallbackLocale.value:P(e.fallbackLocale)||ke(e.fallbackLocale)||K(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:n.value),a=(0,W.ref)(js(n.value,e)),c=(0,W.ref)(K(e.datetimeFormats)?e.datetimeFormats:{[n.value]:{}}),u=(0,W.ref)(K(e.numberFormats)?e.numberFormats:{[n.value]:{}}),p=t?t.missingWarn:_e(e.missingWarn)||nn(e.missingWarn)?e.missingWarn:!0,d=t?t.fallbackWarn:_e(e.fallbackWarn)||nn(e.fallbackWarn)?e.fallbackWarn:!0,_=t?t.fallbackRoot:_e(e.fallbackRoot)?e.fallbackRoot:!0,w=!!e.fallbackFormat,D=Oe(e.missing)?e.missing:null,b=Oe(e.missing)?Ts(e.missing):null,F=Oe(e.postTranslation)?e.postTranslation:null,T=_e(e.warnHtmlMessage)?e.warnHtmlMessage:!0,G=!!e.escapeParameter,ee=t?t.modifiers:K(e.modifiers)?e.modifiers:{},te=e.pluralRules||t&&t.pluralRules,M;function Y(){return cc({version:_c,locale:n.value,fallbackLocale:r.value,messages:a.value,messageCompiler:function(I){return qe=>qe.normalize([I])},datetimeFormats:c.value,numberFormats:u.value,modifiers:ee,pluralRules:te,missing:b===null?void 0:b,missingWarn:p,fallbackWarn:d,fallbackFormat:w,unresolving:!0,postTranslation:F===null?void 0:F,warnHtmlMessage:T,escapeParameter:G,__datetimeFormatters:K(M)?M.__datetimeFormatters:void 0,__numberFormatters:K(M)?M.__numberFormatters:void 0,__v_emitter:K(M)?M.__v_emitter:void 0,__meta:{framework:"vue"}})}M=Y(),ki(M,n.value,r.value);function Ge(){return[n.value,r.value,a.value,c.value,u.value]}let ct=(0,W.computed)({get:()=>n.value,set:A=>{n.value=A,M.locale=n.value}}),Ie=(0,W.computed)({get:()=>r.value,set:A=>{r.value=A,M.fallbackLocale=r.value,ki(M,n.value,A)}}),We=(0,W.computed)(()=>a.value),Ye=(0,W.computed)(()=>c.value),qt=(0,W.computed)(()=>u.value);function Jt(){return Oe(F)?F:null}function Zt(A){F=A,M.postTranslation=A}function De(){return D}function el(A){A!==null&&(b=Ts(A)),D=A,M.missing=b}function Xt(A,I,qe,Me,zn,Zi){Ge();let Si;if(Si=A(M),Ee(Si)&&Si===cn){let[xl,A_]=I();return t&&_?Me(t):zn(xl)}else{if(Zi(Si))return Si;throw Bt(14)}}function is(...A){return Xt(I=>ys(I,...A),()=>Xn(...A),"translate",I=>I.t(...A),I=>I,I=>P(I))}function tl(...A){let[I,qe,Me]=A;if(Me&&!Re(Me))throw Bt(15);return is(I,qe,Ve({resolvedMessage:!0},Me||{}))}function il(...A){return Xt(I=>ws(I,...A),()=>Qn(...A),"datetime format",I=>I.d(...A),()=>ds,I=>P(I))}function nl(...A){return Xt(I=>xs(I,...A),()=>er(...A),"number format",I=>I.n(...A),()=>ds,I=>P(I))}function rl(A){return A.map(I=>P(I)?(0,W.createVNode)(W.Text,null,I,0):I)}let sl={normalize:rl,interpolate:A=>A,type:"vnode"};function ol(...A){return Xt(I=>{let qe,Me=I;try{Me.processor=sl,qe=ys(Me,...A)}finally{Me.processor=null}return qe},()=>Xn(...A),"translate",I=>I[tr](...A),I=>[(0,W.createVNode)(W.Text,null,I,0)],I=>ke(I))}function al(...A){return Xt(I=>xs(I,...A),()=>er(...A),"number format",I=>I[nr](...A),()=>[],I=>P(I)||ke(I))}function ll(...A){return Xt(I=>ws(I,...A),()=>Qn(...A),"datetime format",I=>I[ir](...A),()=>[],I=>P(I)||ke(I))}function cl(A){te=A,M.pluralRules=te}function ul(A,I){let qe=P(I)?I:n.value,Me=ns(qe);return rn(Me,A)!==null}function pl(A){let I=null,qe=Oi(M,r.value,n.value);for(let Me=0;Me<qe.length;Me++){let zn=a.value[qe[Me]]||{},Zi=rn(zn,A);if(Zi!=null){I=Zi;break}}return I}function hl(A){let I=pl(A);return I!=null?I:t?t.tm(A)||{}:{}}function ns(A){return a.value[A]||{}}function ml(A,I){a.value[A]=I,M.messages=a.value}function dl(A,I){a.value[A]=a.value[A]||{},sn(I,a.value[A]),M.messages=a.value}function fl(A){return c.value[A]||{}}function gl(A,I){c.value[A]=I,M.datetimeFormats=c.value,bs(M,A,I)}function _l(A,I){c.value[A]=Ve(c.value[A]||{},I),M.datetimeFormats=c.value,bs(M,A,I)}function yl(A){return u.value[A]||{}}function wl(A,I){u.value[A]=I,M.numberFormats=u.value,Cs(M,A,I)}function bl(A,I){u.value[A]=Ve(u.value[A]||{},I),M.numberFormats=u.value,Cs(M,A,I)}return As++,t&&((0,W.watch)(t.locale,A=>{o&&(n.value=A,M.locale=A,ki(M,n.value,r.value))}),(0,W.watch)(t.fallbackLocale,A=>{o&&(r.value=A,M.fallbackLocale=A,ki(M,n.value,r.value))})),{id:As,locale:ct,fallbackLocale:Ie,get inheritLocale(){return o},set inheritLocale(A){o=A,A&&t&&(n.value=t.locale.value,r.value=t.fallbackLocale.value,ki(M,n.value,r.value))},get availableLocales(){return Object.keys(a.value).sort()},messages:We,datetimeFormats:Ye,numberFormats:qt,get modifiers(){return ee},get pluralRules(){return te||{}},get isGlobal(){return i},get missingWarn(){return p},set missingWarn(A){p=A,M.missingWarn=p},get fallbackWarn(){return d},set fallbackWarn(A){d=A,M.fallbackWarn=d},get fallbackRoot(){return _},set fallbackRoot(A){_=A},get fallbackFormat(){return w},set fallbackFormat(A){w=A,M.fallbackFormat=w},get warnHtmlMessage(){return T},set warnHtmlMessage(A){T=A,M.warnHtmlMessage=A},get escapeParameter(){return G},set escapeParameter(A){G=A,M.escapeParameter=A},t:is,rt:tl,d:il,n:nl,te:ul,tm:hl,getLocaleMessage:ns,setLocaleMessage:ml,mergeLocaleMessage:dl,getDateTimeFormat:fl,setDateTimeFormat:gl,mergeDateTimeFormat:_l,getNumberFormat:yl,setNumberFormat:wl,mergeNumberFormat:bl,getPostTranslationHandler:Jt,setPostTranslationHandler:Zt,getMissingHandler:De,setMissingHandler:el,[tr]:ol,[nr]:al,[ir]:ll,[yc]:cl,[Vs]:e.__injectWithOption}}var pr={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};Ve({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Ee(e)||!isNaN(e)}},pr);function bc({slots:e},t){return t.length===1&&t[0]==="default"?e.default?e.default():[]:t.reduce((i,o)=>{let n=e[o];return n&&(i[o]=n()),i},{})}function zs(e,t,i,o){let{slots:n,attrs:r}=t;return()=>{let a={part:!0},c={};e.locale&&(a.locale=e.locale),P(e.format)?a.key=e.format:Re(e.format)&&(P(e.format.key)&&(a.key=e.format.key),c=Object.keys(e.format).reduce((_,w)=>i.includes(w)?Ve({},_,{[w]:e.format[w]}):_,{}));let u=o(e.value,a,c),p=[a.key];ke(u)?p=u.map((_,w)=>{let D=n[_.type];return D?D({[_.type]:_.value,index:w,parts:u}):[_.value]}):P(u)&&(p=[u]);let d=Ve({},r);return P(e.tag)?(0,W.h)(e.tag,d,p):Re(e.tag)?(0,W.h)(e.tag,d,p):(0,W.h)(W.Fragment,d,p)}}var xc=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"];Ve({value:{type:Number,required:!0},format:{type:[String,Object]}},pr);var Cc=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"];Ve({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},pr);function hr(e={}){let t=(0,W.getCurrentInstance)();if(t==null)throw Bt(16);if(!t.appContext.app.__VUE_I18N_SYMBOL__)throw Bt(17);let i=(0,W.inject)(t.appContext.app.__VUE_I18N_SYMBOL__);if(!i)throw Bt(22);let o=i.mode==="composition"?i.global:i.global.__composer,n=ln(e)?"__i18n"in t.type?"local":"global":e.useScope?e.useScope:"local";if(n==="global"){let c=Re(e.messages)?e.messages:{};"__i18nGlobal"in t.type&&(c=js(o.locale.value,{messages:c,__i18n:t.type.__i18nGlobal}));let u=Object.keys(c);if(u.length&&u.forEach(p=>{o.mergeLocaleMessage(p,c[p])}),Re(e.datetimeFormats)){let p=Object.keys(e.datetimeFormats);p.length&&p.forEach(d=>{o.mergeDateTimeFormat(d,e.datetimeFormats[d])})}if(Re(e.numberFormats)){let p=Object.keys(e.numberFormats);p.length&&p.forEach(d=>{o.mergeNumberFormat(d,e.numberFormats[d])})}return o}if(n==="parent"){let c=Ac(i,t,e.__useComponent);return c==null&&(c=o),c}if(i.mode==="legacy")throw Bt(18);let r=i,a=r.__getInstance(t);if(a==null){let c=t.type,u=Ve({},e);c.__i18n&&(u.__i18n=c.__i18n),o&&(u.__root=o),a=wc(u),Tc(r,t),r.__setInstance(t,a)}return a}function Ac(e,t,i=!1){let o=null,n=t.root,r=t.parent;for(;r!=null;){let a=e;if(e.mode==="composition")o=a.__getInstance(r);else{let c=a.__getInstance(r);c!=null&&(o=c.__composer),i&&o&&!o[Vs]&&(o=null)}if(o!=null||n===r)break;r=r.parent}return o}function Tc(e,t,i){(0,W.onMounted)(()=>{},t),(0,W.onUnmounted)(()=>{e.__deleteInstance(t)},t)}function N(e,t,i=!1,o=null){let n=mr(e,i);o?uni.setStorage({key:n,data:t,success:o}):uni.setStorageSync(n,t)}function R(e,t=!1,i=null){let o=mr(e,t);if(i)uni.getStorage({key:o,success:i});else return uni.getStorageSync(o)}function de(e,t=!1){uni.removeStorage({key:mr(e,t)})}function mr(e,t){return t?`_a_${e}`:`m_${e}`}function $s(e,t,i){let o=i;typeof i=="undefined"&&(o=getApp().globalData.uid),N(e+"_"+o,t)}function dr(e,t){let i=t;return typeof t=="undefined"&&(i=getApp().globalData.uid),R(e+"_"+i)}var ut={NONE:0,WAITING:1,GAME:2,WEEK_UP:3,JUDGE_ROOM:100},Ks={HEART_INTERVAL:30},pe={VIDEO:1,VOICE:2},ce={CALL:1,ANSWER:2,MATCH_ACCEPT:3,MATCH_CONNECT:4},lt={CALL:1,MATCH:2},ci={DEF:0,NOTIFY:1,CONNECT:2},Ys={HOME:0,MSG:1,MATCH:2,RECOMMEND:3,MATCH_NOTIFY:4,QUALITY:5,NO_COINS_DIALOG:6,CALL_LOG:7,GAME_MATCH:8,GAME_MATCH_NOTIFY:9,RANKING_LIST:10,PRIVACY_SET_MSG:11,MOMENT:12,CALlING:98,FREE_MIN_POP:99,ANSWER_ERROR:100,END_PAGE:101,APP_NOTIFY:102},Ne={TEXT:1,GIFT:2,GIFT_ASK_ACTION:3,SYS:4,TEXT_AUDIO:5,GIFT_ASK:1001,AUTOMATIC:1002,MATCH_TIP:1003,NO_COINS:1004,FOLLOW:1005},Ut={CLOSE:1,NO_ACCURATE:2,CHECK_NO_SAME:4,CHANGE_LANGUAGE:5,OPEN:6,CHECK_DIFFERENT:7,OPEN_TRANSLATE:8},Ri={CANCEL:1,REFUSE:2,USER_END:3,GIRL_END:4,BALANCE:5,HEART:6,SYSTEM:7,TIMEOUT:8},nt={CALL:1,END:2,REFUSE:3,WARNING:4,RECEIVE_GIFT:5,BALANCE:6,NO_MONEY:7,MESSAGE:8,TRANSLATE:9,MASK:10,FACE_DETECTION:11};function qs(e){return e==1?h("his"):h("her")}function un(e){return e==1?h("hisLower"):h("herLower")}function he(e){return e==1?h("himLower"):h("herLower")}function At(e){return e==1?h("he"):h("she")}function ht(e){return e==1?h("heLower"):h("sheLower")}function fr(e){return e==1?h("giveHim"):h("giveHer")}function Js(e){return e>1?h("haveLower"):h("hasLower")}function gr(e){return e>1?h("monthsLower"):h("monthLower")}function ui(e){return e==1?h("videoChatLower"):h("audioChatLower")}function pn(e){return`${e} ${e>1?h("coinsLower"):h("coinLower")}`}function g(e){return typeof e=="undefined"||e==null||e==""}function _r(e){return e===""||e===null}var it=new Promise(()=>{});function Sc(e,t,i=""){if(g(e))return"";let o=[];for(let n in e)o.push(n+"="+e[n]);return i+o.join(t)}function ni(e){return typeof e=="number"?e+"":typeof e=="boolean"?e?"true":"false":g(e)?"null":typeof e=="object"?JSON.stringify(e):e}function Pt(e){return e.replace(new RegExp("'","gm"),"\uFF07")}function Zs(e){return e.replace(new RegExp("\uFF07","gm"),"'")}function Xs(e,t){let i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in i)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length==1?i[o]:("00"+i[o]).substr((""+i[o]).length)));return t}function hn(e,t=18){if(g(e))return"";let i=new Date(Date.parse(e.replace(/-/g,"/"))),o=Math.ceil((new Date().getTime()-i)/31536e6),n=o>1?o-1:o;return n<t?t:n}function Nt(e){return e<10?"0"+e:e}function mn(e,t=!1,i=!1,o=!0){e<1e10&&(e=e*1e3);var n=new Date(e),r=n.getFullYear(),a=n.getMonth()+1,c=n.getDate(),u=n.getHours(),p=n.getMinutes(),d=n.getSeconds();let _=t?`${r}-`:"";if(i)return _+Nt(a)+"-"+Nt(c);{let w=o?":"+Nt(d):"";return _+Nt(a)+"-"+Nt(c)+" "+Nt(u)+":"+Nt(p)+w}}function Ni(e,t=!1){if(g(e)||e<0||isNaN(e))return t?"00:00:00":"00:00";var i=0,o=0;e>0&&e<10?e="0"+parseInt(e):e<=0?e="00":e>60&&(i=parseInt(e/60)<10?"0"+parseInt(e/60):parseInt(e/60),e=parseInt(e%60)<10?"0"+parseInt(e%60):parseInt(e%60),i>60&&(o=parseInt(i/60)<10?"0"+parseInt(i/60):parseInt(i/60),i=parseInt(i%60)<10?"0"+parseInt(i%60):parseInt(i%60)));var n;return o>0?n=o+":"+i+":"+e:i>0?(n=i+":"+e,t&&(n="00:"+n)):(n="00:"+e,t&&(n="00:"+n)),n}function Je(e){try{let t=JSON.parse(e);if(typeof t=="object")return t}catch(t){}return!1}function Qs(e){let t=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return e.match(t)}function eo(e,t){for(let i in e)if(t[i]!=null&&e[i]!=t[i])return!0;return!1}function pi(e){return g(e)?!0:Object.keys(e).length<=0}function to(e,t){let i=t-e,o=Math.random();return e+Math.round(o*i)}var Yn={};function io(e,t=500,i="throttle"){let o=e.name;g(o)&&(o=i),!Yn[o]&&(Yn[o]=!0,e(),setTimeout(function(){Yn[o]=""},t))}function yr(e){if(!e)return"";let t=JSON.stringify(e);return(typeof t!="string"||t=="{}")&&(t=e.toString()),t}function vc(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Fi={adminAgencyList:"/pagesAdmin/agency/list",adminAgencyDetail:"/pagesAdmin/agency/agency-detail",adminAgencyEdit:"/pagesAdmin/agency/agency-edit",adminAgencyEditPrice:"/pagesAdmin/agency/agency-edit-price",adminAgencyEditWithdrawInfo:"/pagesAdmin/agency/withdraw-info",adminAgencyEditName:"/pagesAdmin/agency/agency-edit-nickname",adminAgencyEditCountry:"/pagesAdmin/agency/agency-edit-country",adminAgencyEditEmail:"/pagesAdmin/agency/agency-edit-email",adminAgencyEditWhatsApp:"/pagesAdmin/agency/agency-edit-whatsapp",adminAgencyInvited:"/pagesAdmin/agency/invited",adminAgencyListSub:"/pagesAdmin/agency/list-sub",adminAgencyGirlsList:"/pagesAdmin/agency/girls-list",adminAgencyGirlsListSub:"/pagesAdmin/agency/girls-list-sub",adminAgencyDataPanel:"/pagesAdmin/agency/data-panel",adminAgencyDataHistory:"/pagesAdmin/agency/data-history",adminAgencyDataDetail:"/pagesAdmin/agency/data-detail",adminAgencyDataDetailTask:"/pagesAdmin/agency/data-detail-task",adminAgencyWithdrawRecords:"/pagesAdmin/agency/withdraw-records",adminAgencyWalletDetail:"/pagesAdmin/agency/wallet-detail",adminAgencyHandleBan:"/pagesAdmin/agency/handle-ban",adminAgencyHandleDelete:"/pagesAdmin/agency/handle-delete",adminAgencySelected:"/pagesAdmin/agency/selected-agency",adminAgencyStatus:"/pagesAdmin/agency/agency-status",adminAgencySubAgencyList:"/pagesAdmin/agency/sub-agency-list",adminAgencyWithdrawGirlList:"/pagesAdmin/agency/withdraw/girl-list",adminAgencyWithdrawSubAgentList:"/pagesAdmin/agency/withdraw/sub-agent-list",adminAgencyWithdrawSettlementDetail:"/pagesAdmin/agency/withdraw/settlement-detail",adminAgencyWithdrawEntiretyDetail:"/pagesAdmin/agency/withdraw/entirety-detail",adminAgencyWithdrawEntiretyDetailReject:"/pagesAdmin/agency/withdraw/entirety-detail-reject",adminAgencyHistoricalMemberList:"/pagesAdmin/agency/historical-list",adminAgencyWithdrawSubAgentDetail:"/pagesAdmin/agency/withdraw/sub-agent-detail",adminAuditSettlement:"/pagesAdmin/auditNew/settlement",adminAuditSettlementSub:"/pagesAdmin/auditNew/settlement-sub",adminAuditWithdraw:"/pagesAdmin/auditNew/withdraw",adminAuditWithdrawCashList:"/pagesAdmin/audit/withdraw-cash-list",adminWallet:"/pagesAdmin/wallet/wallet",adminWalletCoinStat:"/pagesAdmin/wallet/coin-stat",adminAgencyAnchorDetail:"/pagesAdmin/agencyManager/anchor-detail",adminChannelBackend:"/pagesAdmin/channel/channel-backend",adminAuditAgencyAvatar:"/pagesAdmin/auditNew/agency-avatar",adminAuditAgencyName:"/pagesAdmin/auditNew/agency-name",adminAuditCheckAllUnderReview:"/pagesAdmin/audit/check-all-under-review",adminPermissionWebManage:"/pagesAdmin/more/permission-web-manage",adminPermissionList:"/pagesAdmin/more/permission-list",adminPermissionEdit:"/pagesAdmin/more/permission-edit",adminPermissionNewAccount:"/pagesAdmin/more/permission-new-account",adminPermissionChooseRole:"/pagesAdmin/more/permission-choose-role",adminPermissionNewRole:"/pagesAdmin/more/permission-new-role",adminWhiteList:"/pagesAdmin/more/white-list",adminCallEvaluationList:"/pagesAdmin/user/call-evaluation-list",adminWarnDeviceUser:"/pagesAdmin/user/ban-device-user",adminWarnList:"/pagesAdmin/audit/warn-list",adminVersionUseList:"/pagesAdmin/more/version-use-list",adminAuditSettlementReview:"/pagesAdmin/auditNew/settlement-review",adminAuditWithdrawReview:"/pagesAdmin/auditNew/withdraw-review",adminClubApplication:"/pagesAdmin/auditNew/club-application",adminClubModification:"/pagesAdmin/auditNew/club-modification",adminClubManagement:"/pagesAdmin/club/management",warningDialog:"/pagesDialog/warning",homeFilterSexGuide:"/pagesDialog/home-filter-sex-guide",club:"/pagesClub/club",clubReachLevel:"/pagesDialog/club-reach-level",clubStatusRemind:"/pagesDialog/club-status-remind",clubApplyCreate:"/pagesClub/apply-create",clubCreateSuccess:"/pagesClub/create-success",clubRules:"/pagesDialog/club-rules",clubApplicationList:"/pagesClub/application-list",clubWarning:"/pagesDialog/club-warning",clubDisband:"/pagesDialog/club-disband",adminClubManagementSub:"/pagesAdmin/club/management-sub",adminClubTodayNew:"/pagesAdmin/club/club-today-new",adminClubNormal:"/pagesAdmin/club/club-normal",adminClubManageGirls:"/pagesAdmin/club/club-manage-girls",adminClubOperator:"/pagesAdmin/club/club-operator",adminClubDisbanded:"/pagesAdmin/club/club-disbanded",adminClubMemberList:"/pagesAdmin/club/member-new",adminClubInfo:"/pagesAdmin/club/detail-new",adminCLubWarning:"/pagesAdmin/club/warning",adminClubOperatorLog:"/pagesAdmin/club/operation-log",adminClubPersonalApplication:"/pagesAdmin/auditNew/club-application-personal",adminOutsourcingIndex:"/pagesAdmin/more/outsourcing/index",adminOutsourcingPermissionList:"/pagesAdmin/more/outsourcing/permission-list",adminOutsourcingNewRole:"/pagesAdmin/more/outsourcing/new-role",adminOutsourcingEditRole:"/pagesAdmin/more/outsourcing/edit-role",adminRefundDetail:"/pagesAdmin/refund/detail"};function no(e,t){let i=Fi[e];return i||(i=e),i+Sc(t,"&","?")}function ie(e,t=null,i=null,o=!1){let n=no(e,t),r={url:n,fail:a=>{C("error","at common/route.js:107",`\u6253\u5F00\u9875\u9762\u5931\u8D25${n} ${JSON.stringify(a)}`),getApp().globalData.appCRE&&n.startsWith("/pagesAdmin")&&O.zT!=3&&k.request("/sign/reload-route",{},!0)}};o&&(r=Object.assign(r,o)),i!=null&&(r.events=i),uni.navigateTo(r)}function X(e,t,i,o,n=null){let a={url:no(e,t),success(c){c.eventChannel.emit(i,o)}};n!=null&&(a.events=n),uni.navigateTo(a)}function Gt(e=1,t="",i=""){let o={delta:e};t&&(o.animationType=t),i&&(o.animationDuration=i),uni.navigateBack(o)}function ro(e){g(e)||uni.switchTab({url:e})}function je(){let e=[],t=getCurrentPages();for(let i=0,o=t.length;i<o;i++){let n=t[i].$page;e.push(n.path)}return e}function so(){let e=[],t=getCurrentPages();for(let i=0,o=t.length;i<o;i++){let n=t[i].$page;e.push(n)}return e}function Bi(e="path"){let t=getCurrentPages(),i=t[t.length-1];if(!i)return"";let o=i.$page;return o?o[e]:""}function wr(e){let t=1,i=getCurrentPages();for(let o=0,n=i.length;o<n;o++)if(i[o].$page.path==e)return i.length-o;return t}function oo(e){let t=su();t&&(t==us.SUPER?ie("/pagesAdmin/user/info",{uid:e}):t==us.KEFU&&ie("/pagesAdmin/user/info-sub",{user_detail:t,uid:e}))}function br(e,t=null,i=null){let n={uid:typeof e=="object"?e.uid:e};i&&(n=Object.assign(n,i)),X("/pagesMsg/pri/chat",n,"priData",{user:e,extra:t})}function kc(e,t=null){let o={id:typeof e=="object"?e.club_id:e};t&&(o=Object.assign(o,t)),X("/pagesMsg/club/chat",o,"clubData",{club:e})}function ao(e){ie("/pagesMsg/ass/chat",e)}function lo(){au(Rl.GAME,!0)||X("/pages/call/chat-view",{},"callViewData",{isGame:!0})}function co(e,t=0,i=0){if(g(e))return;if(t&&i){kc(e);return}ie("/pagesClub/info",{id:e,isMember:t})}function uo(e,t=!0){return e.startsWith("http")?e:e.startsWith("file://")?t?e:e.replace("file://",""):e.startsWith("/storage/")||e.startsWith("/var/mobile/")?t?`file://${e}`:e:e.startsWith("_doc/uniapp")?t?e:plus.io.convertLocalFileSystemURL(e):e.indexOf("apps/__UNI")!=-1?e:!1}function po(e="ACTION_SETTINGS"){let t=plus.android.importClass("android.content.Intent"),i=plus.android.importClass("android.provider.Settings"),o=plus.android.runtimeMainActivity(),n=new t(i[e]);o.startActivity(n)}function ho(e,t){let i=plus.io.convertLocalFileSystemURL("_doc");if(!O.isAndroid)return i+"/";let o=`${e}/`,n=i.indexOf(o),r=t?n+o.length:n;return i.substr(0,r)}function dn(e){return new Promise(t=>{let i=getCurrentPages(),n=i[i.length-1].$getAppWebview(),r=`${e}_${new Date().getTime()}`,a=new plus.nativeObj.Bitmap(r);n.draw(a,()=>{a.save(`_doc/${r}.jpg`,{overwrite:!0},c=>{t(c.target),a.clear()},c=>{a.clear(),t(null)})},c=>{t(null)},{check:!0})})}var Fc=[{key:"tr",title:"T\xFCrk"},{key:"pt",title:"Portugu\xEAs"}];function ai(e=!0){let t=R("language_app_key");if(!e||!_r(t))return t;let i=hi(!1),o=Ol[i];return g(o)?"en":i}function hi(e){let t=uni.getAppBaseInfo().language;return g(t)?e?"en-US":"en":e?t:t.split("-")[0]}function mo(){return hi()||ai()}function xr(e){getApp().globalData.translateAuto!=e&&(e&&!R("translate_auto_open_first")&&(uni.showModal({title:h("tips"),content:h("msg.translateAutoOpenMsgTips"),showCancel:!1,confirmText:h("gotIt")}),N("translate_auto_open_first",1)),N("translate_auto_close",e?0:1),getApp().globalData.translateAuto=e,uni.$emit("event_translate_auto_change",e),k.request("/user/sync-permission",{auto_translate:e?1:0}))}function fo(e){return getApp().globalData.translateAuto?getApp().globalData.translateKey!=e:!1}function mi(){uni.showModal({title:h("tips"),content:h("msg.translateAutoCloseTips"),showCancel:!0,cancelText:h("cancel"),confirmText:h("turnOff"),success(e){e.confirm&&xr(!1)}})}function Cr(){return R("call_automatic_source_language")||ai()}function go(e){N("call_automatic_source_language",e)}function Lc(){return!!R("call_automatic_open")}function _o(e){N("call_automatic_open",e)}function h(...e){return getApp().globalData.s.state.pubI18n(...e)}function yo(e){function t(a,c,u){for(;0<u--;)a.push(c)}function i(a,c){return a<<c|a>>>32-c}function o(a,c,u){return a^c^u}function n(a,c){var u=(c&65535)+(a&65535),p=(c>>>16)+(a>>>16)+(u>>>16);return(p&65535)<<16|u&65535}var r="0123456789abcdef";return function(a){for(var c=[],u=a.length*4,p,d=0;d<u;d++)p=a[d>>2]>>(3-d%4)*8,c.push(r.charAt(p>>4&15)+r.charAt(p&15));return c.join("")}(function(a,c){var u,p,d,_,w,D=a.length,b=1732584193,F=4023233417,T=2562383102,G=271733878,ee=3285377520,te=[];t(te,1518500249,20),t(te,1859775393,20),t(te,2400959708,20),t(te,3395469782,20),a[c>>5]|=128<<24-c%32,a[(c+65>>9<<4)+15]=c;for(var M=0;M<D;M+=16){u=b,p=F,d=T,_=G,w=ee;for(var Y=0,Ge=[];Y<80;Y++){Ge[Y]=Y<16?a[Y+M]:i(Ge[Y-3]^Ge[Y-8]^Ge[Y-14]^Ge[Y-16],1);var ct=function(Ie,We,Ye,qt,Jt){var Zt=(Jt&65535)+(Ie&65535)+(We&65535)+(Ye&65535)+(qt&65535),De=(Jt>>>16)+(Ie>>>16)+(We>>>16)+(Ye>>>16)+(qt>>>16)+(Zt>>>16);return(De&65535)<<16|Zt&65535}(Y<20?function(Ie,We,Ye){return Ie&We^~Ie&Ye}(p,d,_):Y<40?o(p,d,_):Y<60?function(Ie,We,Ye){return Ie&We^Ie&Ye^We&Ye}(p,d,_):o(p,d,_),w,te[Y],Ge[Y],i(u,5));w=_,_=d,d=i(p,30),p=u,u=ct}b=n(b,u),F=n(F,p),T=n(T,d),G=n(G,_),ee=n(ee,w)}return[b,F,T,G,ee]}(function(a){for(var c=[],u=255,p=a.length*8,d=0;d<p;d+=8)c[d>>5]|=(a.charCodeAt(d/8)&u)<<24-d%32;return c}(e).slice(),e.length*8))}function Pi(e,t,i=!0){return bo(getApp().globalData.ossPicPath,e,t,i)}function ze(e,t,i=!0){return bo(getApp().globalData.ossPath,e,t,i)}function wo(e){if(g(e)||e.startsWith("http"))return;let i=`img_${yo(e)}`,o=R(i);de(i),o&&uni.removeSavedFile({filePath:o})}function bo(e,t,i,o=!0){if(g(t))return"";if(t.startsWith("http")||t.startsWith("file://"))return t;if(t.startsWith("/var/mobile/"))return"file://"+t;if(t.startsWith("/storage/"))return t;let r=`img_${yo(t)}`,a=R(r);if(a){let u={filePath:a,fail(p){Ic(`\u7F13\u5B58\u68C0\u6D4B\u5931\u8D25${t}`,p),de(r),typeof i=="function"&&i(e+t)},success(p){}};return typeof i=="function"&&(u.success=function(){i(a)}),uni.getFileInfo(u),a}let c=e+t;return getApp().globalData.picCacheObj[r]||(getApp().globalData.picCacheObj[r]=1,typeof i=="function"&&!o&&i(c),Qc(c).then(u=>{N(r,u),typeof i=="function"&&o&&i(u),delete getApp().globalData.picCacheObj[r]}).catch(()=>{})),c}function Ic(e,t){C("error","at common/cache.js:118",`cache ${e}`,t)}var oe={CANDY_CHAT_I:"__UNI__CB903B1",CANDY_CHAT_A:"__UNI__564E31A",CHAT_NOW_A:"__UNI__DB0D401",CHAT_NOW_DEV:"__UNI__DEED62E",HOT_FACE_A:"__UNI__0D44E11",HOT_FACE_DEV:"__UNI__58DBD61",LOVE_SKY:"__UNI__0EE5E5E",DEV:"__UNI__3932C1F",DEV2:"__UNI__9C66D76"};function fn(){let e=plus.runtime.appid,t,i,o,n,r,a,c,u;switch(e){case oe.CANDY_CHAT_I:case oe.CANDY_CHAT_A:t="Candy Chat",i="https://apps.apple.com/us/app/id1596210708",o="s/logo/CandyChat.png",n="Fanfanzhijiao Network Technology Co., Ltd.",r="fanfanzhijiao2021@163.com",a="https://sites.google.com/view/candy-chat-terms-policy/terms-of-use?authuser=0",c="https://sites.google.com/view/candy-chat-terms-policy/privacy-policy?authuser=0",u="s/pub/sys_notice_bg_candy_chat.png";break;case oe.CHAT_NOW_A:case oe.CHAT_NOW_DEV:t="Chat Now",i="https://apps.apple.com/us/app/id1596210708",o="s/logo/ChatNow.png",n="Fanfanzhijiao Network Technology Co., Ltd.",r="atree0120@gmail.com",a="https://sites.google.com/view/chats-now/privacy-policy",c="https://sites.google.com/view/chats-now/user-agreement?authuser=0",u="s/pub/sys_notice_bg_chat_now.png";break;case oe.HOT_FACE_A:case oe.HOT_FACE_DEV:t="HotFace",i="https://apps.apple.com/us/app/id1596210708",o="s/logo/HotFace.png",n="Fanfanzhijiao Network Technology Co., Ltd.",r="atree0120@gmail.com",a="https://sites.google.com/view/meu-agreement/user-agreement?authuser=0",c="https://sites.google.com/view/meu-agreement/privacy-policy?authuser=0",u="s/pub/sys_notice_bg_hot_face.png";break;case oe.LOVE_SKY:t="LoveSky",i="",o="s/logo/lovesky.png",n="Fanfanzhijiao Network Technology Co., Ltd.",r="fanfanzhijiao2021@163.com",a="https://sites.google.com/view/lovesky-terms-of-use/terms-of-use?authuser=0",c="https://sites.google.com/view/lovesky-privacy-policy/privacy-policy?authuser=0";break;case oe.DEV:case oe.DEV2:t="Candy Chat Dev",i="https://apps.apple.com/us/app/id1596210708",o="s/logo/qialiao@3x.png",n="Liuyi Cool Technology Co., Ltd.",r="support_matchstar@163.com",a="https://sites.google.com/view/lovesky-terms-of-use/terms-of-use?authuser=0",c="https://sites.google.com/view/lovesky-privacy-policy/privacy-policy?authuser=0",u="s/pub/sys_notice_bg_candy_chat.png";break}return{name:t,iosStore:i,logo:o,cName:n,cMail:r,agreement:a,privacy:c,sysNoticeBg:u}}function xo(){switch(plus.runtime.appid){case oe.CANDY_CHAT_I:case oe.CANDY_CHAT_A:return"s/match/candy_chat_1.png";case oe.CHAT_NOW_A:case oe.CHAT_NOW_DEV:return"";case oe.HOT_FACE_A:case oe.HOT_FACE_DEV:return"";case oe.LOVE_SKY:return"";case oe.DEV:return"s/match/candy_chat_1.png"}return""}function Ar(e){getApp().globalData.pluginTool.screenshotStop({is_stop:e})}function Co(e){getApp().globalData.pluginTool.startScreenShotMonitor({},t=>{g(t)||(t.type==1?e(1):e(2))})}function Ao(){getApp().globalData.pluginTool.stopScreenShotMonitor({})}function To(){let e=Bi();getApp().globalData.pluginTool.addScreenShield({route:e},t=>{})}function So(e){let t=Bi();getApp().globalData.pluginTool.removeScreenShield({route:t},i=>{typeof e=="function"&&e(i)})}function Dc(){return getApp().globalData.pluginTool.vpnConnected()}function vo(e){return new Promise(t=>{getApp().globalData.pluginTool.permissionRequest({permission:e},i=>{t(i)})})}function Mc(e){return getApp().globalData.pluginTool.permissionStatusSync({permission:e})}function Ec(e){return getApp().globalData.pluginTool.permissionOpenSetting({permission:e})}function Oc(){return getApp().globalData.pluginTool.permissionCheckAll()}function Rc(){return getApp().globalData.pluginTool.locationAuthorizationStatusSync()}function Nc(){return new Promise(e=>{getApp().globalData.pluginTool.locationAuthorizationStatus({},t=>{e(t)})})}var U={ALBUM:1,CAMERA:2,VIDEO:3,MICROPHONE:4,NOTIFY:5,LOCATION:6,DRAW_OVERLAYS:7,ALBUM_AND_CAMERA:101},ae={GRANTED:1,DENIED:0,DENIED_ALWAYS:-1};function Tr(e,t=!0,i=!0){return new Promise(o=>{if(e==U.ALBUM_AND_CAMERA){Sr(U.ALBUM_AND_CAMERA)?o(!0):(i&&Ii(e),o(!1));return}let n=function(r){r==ae.GRANTED?o(!0):(r==ae.DENIED||r==ae.DENIED_ALWAYS&&i&&Ii(e),o(!1))};if(O.isAndroid)if(e==U.NOTIFY)Gc().then(n);else{let r=gn(e);vo(r).then(n)}else Jc(e)(t).then(n)})}function Bc(e,t,i){if(getApp().globalData.uid!=0)return new Promise(o=>{let n;if(i==null?n=ko():n=i,n==null){o();return}let r={fromType:e,showClose:t,resList:n[0]};X("/pagesDialog/check-permission",null,"permissionData",r,{onCloseListener:()=>{o()}})})}function ko(){let e=[],t=!0;if(O.isAndroid){let r=Oc();e.push({key:"notice",value:r.notice,permission:U.NOTIFY}),e.push({key:"camera",value:r.camera,permission:U.CAMERA}),e.push({key:"voice",value:r.voice,permission:U.MICROPHONE}),e.push({key:"album",value:r.storage,permission:U.ALBUM})}else e.push({key:"notice",value:vr(),permission:U.NOTIFY}),e.push({key:"camera",value:Yc(),permission:U.CAMERA}),e.push({key:"voice",value:Fo(),permission:U.MICROPHONE}),e.push({key:"album",value:qc(),permission:U.ALBUM});for(let r=0,a=e.length;r<a;r++)if(!e[r].value){t=!1;break}let i={};for(let r=0,a=e.length;r<a;r++){let c=e[r];i[c.key]=c.value?1:0}i.auto_translate=getApp().globalData.translateAuto?1:0;let o=Lc()?1:0,n=Cr();return i.audio_translate=o,i.audio_language=n,k.request("/user/sync-permission",i),[e,t]}function Sr(e){if(e==U.NOTIFY)return O.isAndroid?tn(e):vr();if(e==U.MICROPHONE)return O.isAndroid?tn(e):Fo();if(e==U.ALBUM_AND_CAMERA){let i=ko()[0];return i?i[1].value&&i[3].value:!0}else if(e==U.LOCATION)return O.isAndroid?tn(e):Rc();return!0}function Pc(e){O.isAndroid?Hc(gn(e)):Wc()}function Ii(e,t){uni.showModal({title:h("tips"),content:Zc(e),showCancel:!0,cancelText:h("cancel"),confirmText:h("toTurnOn"),complete(i){i.confirm?(Pc(e),typeof t=="function"&&t(!0)):i.cancel&&typeof t=="function"&&t(!1)}})}function tn(e){let t=gn(e);return Mc(t)}function Hc(e){if(g(e)){Uc();return}Ec(e)}function Uc(){var e=plus.android.importClass("android.content.Intent"),t=plus.android.importClass("android.provider.Settings"),i=plus.android.importClass("android.net.Uri"),o=plus.android.runtimeMainActivity(),n=new e;n.setAction(t.ACTION_APPLICATION_DETAILS_SETTINGS);var r=i.fromParts("package",o.getPackageName(),null);n.setData(r),o.startActivity(n)}function gn(e){switch(e){case U.LOCATION:return["android.permission.ACCESS_FINE_LOCATION","android.permission.ACCESS_COARSE_LOCATION"];case U.ALBUM:case U.VIDEO:return["android.permission.READ_MEDIA_IMAGES","android.permission.READ_MEDIA_VIDEO"];case U.MICROPHONE:return["android.permission.RECORD_AUDIO"];case U.CAMERA:return["android.permission.CAMERA"];case U.NOTIFY:return["android.permission.POST_NOTIFICATIONS"]}}function Gc(){return new Promise(e=>{if(getApp().globalData.sys.androidAPILevel>=El.LEVEL_33)vo(gn(U.NOTIFY)).then(t=>{e(t)});else{let t=tn(U.NOTIFY);e(t?ae.GRANTED:ae.DENIED_ALWAYS)}})}function Wc(){var e=plus.ios.import("UIApplication"),t=e.sharedApplication(),i=plus.ios.import("NSURL"),o=i.URLWithString("app-settings:");t.openURL(o),plus.ios.deleteObject(o),plus.ios.deleteObject(i),plus.ios.deleteObject(t)}function Vc(){return new Promise(e=>{Nc().then(t=>{e(t==1?ae.GRANTED:ae.DENIED_ALWAYS)})})}function jc(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),o=i.authorizationStatusForMediaType("soun");o==3?(plus.ios.deleteObject(i),t(ae.GRANTED)):o==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","soun",function(){if(e){let n=i.authorizationStatusForMediaType("soun");plus.ios.deleteObject(i),t(n==3?ae.GRANTED:ae.DENIED)}else plus.ios.deleteObject(i),t(ae.DENIED)}):(plus.ios.deleteObject(i),t(ae.DENIED_ALWAYS))})}function zc(e){return new Promise(t=>{let i=plus.ios.importClass("AVCaptureDevice"),o=i.authorizationStatusForMediaType("vide");o==3?(plus.ios.deleteObject(i),t(ae.GRANTED)):o==0?plus.ios.invoke("AVCaptureDevice","requestAccessForMediaType:completionHandler:","vide",function(){if(e){let n=i.authorizationStatusForMediaType("vide");plus.ios.deleteObject(i),t(n==3?ae.GRANTED:ae.DENIED)}else plus.ios.deleteObject(i),t(ae.DENIED)}):(plus.ios.deleteObject(i),t(ae.DENIED_ALWAYS))})}function $c(e){return new Promise(t=>{let i=plus.ios.import("PHPhotoLibrary"),o=i.authorizationStatus();o==3||o==4?(plus.ios.deleteObject(i),t(ae.GRANTED)):o==0?plus.ios.invoke("PHPhotoLibrary","requestAuthorization:",function(){if(e){let n=i.authorizationStatus();plus.ios.deleteObject(i),t(n==3||n==4?ae.GRANTED:ae.DENIED)}else plus.ios.deleteObject(i),t(ae.DENIED)}):(plus.ios.deleteObject(i),t(ae.DENIED_ALWAYS))})}function Kc(){return new Promise(e=>{let t=vr();e(t?ae.GRANTED:ae.DENIED_ALWAYS)})}function Fo(){let e=plus.ios.importClass("AVCaptureDevice"),t=e.authorizationStatusForMediaType("soun");return plus.ios.deleteObject(e),t==3}function Yc(){let e=plus.ios.importClass("AVCaptureDevice"),t=e.authorizationStatusForMediaType("vide");return plus.ios.deleteObject(e),t==3}function qc(){var e=!1,t=plus.ios.import("PHPhotoLibrary"),i=t.authorizationStatus();return(i==3||i==4)&&(e=!0),plus.ios.deleteObject(t),e}function vr(){var e=!1,t=plus.ios.import("UIApplication"),i=t.sharedApplication(),o=0;if(i.currentUserNotificationSettings){var n=i.currentUserNotificationSettings();o=n.plusGetAttribute("types"),e=o!=0,plus.ios.deleteObject(n)}else o=i.enabledRemoteNotificationTypes(),e=o!=0;return plus.ios.deleteObject(i),plus.ios.deleteObject(t),e}function Jc(e){switch(e){case U.LOCATION:return Vc;case U.ALBUM:case U.VIDEO:return $c;case U.MICROPHONE:return jc;case U.CAMERA:return zc;case U.NOTIFY:return Kc}}function Zc(e){let t=fn();return e==U.LOCATION?h("openLocationPerTip",{appName:t.name}):e==U.ALBUM||e==U.VIDEO?h("openAlbumPerTip",{appName:t.name}):e==U.MICROPHONE?h("openMicrophonePerTip",{appName:t.name}):e==U.NOTIFY?h("msg.openNoticePerTips",{appName:t.name}):e==U.CAMERA?h("openCameraPerTip",{appName:t.name}):e==U.ALBUM_AND_CAMERA?h("openPermissionTipAlbumCamera",{appName:t.name}):""}function rt(e,t){getApp().globalData.s.commit("setPubValue",{name:e,value:t})}function B(e,t){getApp().globalData.s.commit(e,t)}function on(e,t){e==si.MSG&&getApp().setNumberBadge(),t>0?uni.setTabBarBadge({index:e,text:t+""}):uni.removeTabBarBadge({index:e})}function Xc(e,t=!0){t?uni.showTabBarRedDot({index:e}):uni.hideTabBarRedDot({index:e})}function Qc(e){return new Promise((t,i)=>{uni.downloadFile({url:e}).then(o=>!o||o.statusCode!=200||!o.tempFilePath?(i(),new Promise(()=>{})):uni.saveFile({tempFilePath:o.tempFilePath})).then(o=>{!o||!o.savedFilePath?i():t(o.savedFilePath)}).catch(o=>{C("error","at common/common.js:65","downloadFile error "+JSON.stringify(o))})})}function kr(e,t,i){return new Promise(o=>{let n=t?e:plus.io.convertLocalFileSystemURL(e);plus.io.resolveLocalFileSystemURL(n,function(r){r.isFile?r.remove():r.isDirectory&&r.removeRecursively(),o()},function(r){C("error","at common/common.js:81","----> delFile fail "+JSON.stringify(r)),i&&o()})})}function Lo(e,t="md5"){return new Promise(i=>{uni.getFileInfo({filePath:e,digestAlgorithm:t,success(o){i(o)},fail(){i(null)}})})}function Di(e,t){t?plus.runtime.openWeb(e):plus.runtime.openURL(e)}function ye(e,t,i,o=h("confirm")){Be(e,t,i,"",o,!1)}function eu(e){return["Si, desbloquear","Reenviar Completar"].indexOf(e)!=-1}function Be(e,t,i,o,n=h("confirm"),r=!0,a=h("cancel"),c=!1){let u=!1;if(!O.isAndroid&&(u=eu(n),u)){let p=n;n=a,a=p}uni.showModal({title:e,content:t,showCancel:r,cancelText:a,confirmText:n,editable:c,success(p){p.confirm?u?typeof o=="function"&&o():typeof i=="function"&&i(p):p.cancel&&(u?typeof i=="function"&&i(p):typeof o=="function"&&o())}})}function Tt(e,t="none",i="center"){uni.showToast({title:e,duration:2e3,icon:t,position:i})}function di(e){return new Promise(t=>{let i=uni.createInnerAudioContext();i.src=e,i.sessionCategory="ambient",i.onError(o=>{i.destroy(),t(0)}),i.onPlay(()=>{t(1)}),i.onEnded(o=>{i.destroy(),t(2)}),i.play()})}var _n={LIGHT:1,DARK:2};function Io(e,t,i){uni.$emit("event_follow",e,!t);let o=getApp().globalData.s.state.pubUser.focus_num;t?o-=1:o+=1,rt("pubUser.focus_num",o);let n={flag:t?"del":"add",target_uid:e};i&&(n.room_id=i),k.request("/user/follow",n)}function be(e){let t=Number(e);if(isNaN(t)){C("error","at common/user.js:35","\u5237\u65B0\u4F59\u989D\u5931\u8D25");return}rt("pubAccount.money",t),C("error","at common/user.js:39",`\u5237\u65B0\u4F59\u989D ${t}`)}function Hi(e){if(e=Number(e),isNaN(e))return;let t=Number(getApp().pubAccount.money);isNaN(t)&&(t=0);let i=t+e;rt("pubAccount.money",i)}function mt(e,t=1,i=!0){if(e=Number(e),isNaN(e))return!0;let o=getApp().pubAccount.money-e*t;return o>=0?!0:(i&&Ze(Math.abs(o),0),!1)}function yn(){return getApp().globalData.s.state.pubUser.is_vip}function wn(e){let i=R("vip_callback");i?(i.from_type=e,k.handleCallback({func_name:"vip_alert",func_data:i})):k.request("/pay/vip/callback",{type:e},!0)}function Ze(e,t=0,i,o){let r=R("coin_callback"),a={};a.order_source=typeof i=="undefined"?0:i,a.click_type=typeof o=="undefined"?0:o,r?(a.fromType=t,a.diffCoin=e,X("/pages/coin/coin-dialog",a,"coinDialogData",r)):(a.from_type=t,a.diff_coin=e,k.request("/pay/coin/callback",a,!0))}function Do(){de("coin_callback")}function Mo(){de("vip_callback")}function tu(e){let t=getApp().pubUser.seeking_sex;return e?t:t==0?getApp().pubUser.sex==1?2:1:t}function j(){return getApp().globalData.s.state.pubUser.is_auth}function iu(){return!j()&&getApp().pubUser.recharge_money>0}function nu(){let e=getApp().globalData.admin;return e&&e.permission&&e.permission.kefu}function ru(){let e=getApp().globalData.admin;return e&&e.permission&&e.permission.check_all}function Fr(){let e=getApp().globalData.admin;return e&&e.permission&&e.permission.screenshot}function su(){let e=getApp().globalData.admin;return!e||!e.permission?0:e.permission.user_detail}function ou(){let e=getApp().globalData.admin;return!g(e)&&e.type==1}function au(e,t){let i=getApp().globalData.bannedInfos[e];if(g(i))return!1;if(t){if(B("appDialog/addDialogBan",i),Bi()=="/pagesDialog/banned")return;B("appDialog/executeBanWarningDialog")}return!0}function Eo(e){let t=getApp().globalData.bossRules;if(Object.keys(t).length<=0)return!1;let i=Number(e.recharge_money),o=Number(e.level);return t.recharge>0?i>=t.recharge:t.level>0?o>=t.level:!1}var rr={DEFAULT:1e4,FAIL:0,SUCCESS:1,DISCONNECT:6,RECONNECT:7},lu={INIT:"init",APP_SHOW:"app_show",TAB_SHOW:"tab_show",MSG_INDEX_REFRESH:"msg_index_refresh",STOP_TAKING_RECOVERY:"stop_taking_recovery",CATCH_MSG_SYNC:"sync_catch",API_CALL_BACK:"api_call_back",RECONNECT_LISTENER:"reconnect_listener",RECONNECT_LOCAL:"reconnect_local"};function cu(e){return new Promise((t,i)=>{getApp().globalData.pluginDB.selectSql({sql:e},o=>{o.status==1?t(o.rows):(C("error","at comExtend/plugin-DB.js:44","db \u63D2\u4EF6 select \u6267\u884C \u9519\u8BEF "+o.message),i(o.message))})})}function uu(e){return new Promise((t,i)=>{getApp().globalData.pluginDB.executeSql({sql:e},o=>{o.status==1?t(o.rows):(C("error","at comExtend/plugin-DB.js:57","db \u63D2\u4EF6 execute \u6267\u884C \u9519\u8BEF "+o.message),i(o.message))})})}function St(e,t){return new Promise((i,o)=>{uu(e).then(n=>{i(n)},n=>{o(),t||No("execute",n,e)})})}function vt(e,t){return new Promise((i,o)=>{cu(e).then(n=>{i(n)},n=>{o(),t||No("select",n,e)})})}function V(e){return g(e)?0:parseInt(e)}function dt(e){return g(e)?"":e}function pu(){return getApp().globalData.pluginMqtt.checkStatusSync()?rr.SUCCESS:rr.FAIL}function hu(){return pu()}function mu(){return hu()==rr.SUCCESS}var oi={getUserDesc(){let e=getApp().pubUser;return Object.keys(e).length<=3?"\u672A\u767B\u5F55":[e.uid,e.is_auth?"\u4E3B\u64AD":"\u7528\u6237",`\u7B49\u7EA7-${e.level}`,`vip${e.is_vip?"\u662F":"\u5426"}`,`\u5145\u503C${e.recharge_money}`,`\u4F59\u989D${getApp().pubAccount.money}`,`\u540E\u53F0\u8EAB\u4EFD${du()}`].join("|")},getActionDesc(){let e=je(),t=e.length;return[`\u9875\u9762: ${(t>5?e.slice(t-5):e).join(",")}`,`${getApp().globalData.catchApiUrlList.join(",")}`].join("|")},getEnvironsDesc(){let e=getApp().globalData.ua.split("|"),t=[`${e[1]}`,`app\u7248\u672C${e[2]}`,`zip\u7248\u672C${e[3]}-${e[13]}`,`${e[6]}`,`\u54C1\u724C${e[11]}`,`\u578B\u53F7${e[12]}`,`\u7F51\u7EDC${getApp().globalData.network.type}`,`MQTT${mu()?"\u662F":"\u5426"}`],i=Dc();return typeof i!="undefined"&&t.push(`VPN${i?"\u662F":"\u5426"}`),t.join("|")}};function du(){if(ou())return"\u8D85\u7BA1";let e=[];return nu()&&e.push("\u5BA2\u670D"),ru()&&e.push("\u5BA1\u6838"),e.length<=0?"\u65E0":e.join("\u548C")}var qn=0;function fu(e){return _u(gu(yu(e)))}function gu(e){return bu(xu(wu(e),e.length*8))}function _u(e){try{}catch(r){qn=0}for(var t=qn?"0123456789ABCDEF":"0123456789abcdef",i="",o,n=0;n<e.length;n++)o=e.charCodeAt(n),i+=t.charAt(o>>>4&15)+t.charAt(o&15);return i}function yu(e){for(var t="",i=-1,o,n;++i<e.length;)o=e.charCodeAt(i),n=i+1<e.length?e.charCodeAt(i+1):0,55296<=o&&o<=56319&&56320<=n&&n<=57343&&(o=65536+((o&1023)<<10)+(n&1023),i++),o<=127?t+=String.fromCharCode(o):o<=2047?t+=String.fromCharCode(192|o>>>6&31,128|o&63):o<=65535?t+=String.fromCharCode(224|o>>>12&15,128|o>>>6&63,128|o&63):o<=2097151&&(t+=String.fromCharCode(240|o>>>18&7,128|o>>>12&63,128|o>>>6&63,128|o&63));return t}function wu(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<e.length*8;i+=8)t[i>>5]|=(e.charCodeAt(i/8)&255)<<i%32;return t}function bu(e){for(var t="",i=0;i<e.length*32;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t}function xu(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,o=-271733879,n=-1732584194,r=271733878,a=0;a<e.length;a+=16){var c=i,u=o,p=n,d=r;i=Ae(i,o,n,r,e[a+0],7,-680876936),r=Ae(r,i,o,n,e[a+1],12,-389564586),n=Ae(n,r,i,o,e[a+2],17,606105819),o=Ae(o,n,r,i,e[a+3],22,-1044525330),i=Ae(i,o,n,r,e[a+4],7,-176418897),r=Ae(r,i,o,n,e[a+5],12,1200080426),n=Ae(n,r,i,o,e[a+6],17,-1473231341),o=Ae(o,n,r,i,e[a+7],22,-45705983),i=Ae(i,o,n,r,e[a+8],7,1770035416),r=Ae(r,i,o,n,e[a+9],12,-1958414417),n=Ae(n,r,i,o,e[a+10],17,-42063),o=Ae(o,n,r,i,e[a+11],22,-1990404162),i=Ae(i,o,n,r,e[a+12],7,1804603682),r=Ae(r,i,o,n,e[a+13],12,-40341101),n=Ae(n,r,i,o,e[a+14],17,-1502002290),o=Ae(o,n,r,i,e[a+15],22,1236535329),i=Te(i,o,n,r,e[a+1],5,-165796510),r=Te(r,i,o,n,e[a+6],9,-1069501632),n=Te(n,r,i,o,e[a+11],14,643717713),o=Te(o,n,r,i,e[a+0],20,-373897302),i=Te(i,o,n,r,e[a+5],5,-701558691),r=Te(r,i,o,n,e[a+10],9,38016083),n=Te(n,r,i,o,e[a+15],14,-660478335),o=Te(o,n,r,i,e[a+4],20,-405537848),i=Te(i,o,n,r,e[a+9],5,568446438),r=Te(r,i,o,n,e[a+14],9,-1019803690),n=Te(n,r,i,o,e[a+3],14,-187363961),o=Te(o,n,r,i,e[a+8],20,1163531501),i=Te(i,o,n,r,e[a+13],5,-1444681467),r=Te(r,i,o,n,e[a+2],9,-51403784),n=Te(n,r,i,o,e[a+7],14,1735328473),o=Te(o,n,r,i,e[a+12],20,-1926607734),i=Se(i,o,n,r,e[a+5],4,-378558),r=Se(r,i,o,n,e[a+8],11,-2022574463),n=Se(n,r,i,o,e[a+11],16,1839030562),o=Se(o,n,r,i,e[a+14],23,-35309556),i=Se(i,o,n,r,e[a+1],4,-1530992060),r=Se(r,i,o,n,e[a+4],11,1272893353),n=Se(n,r,i,o,e[a+7],16,-155497632),o=Se(o,n,r,i,e[a+10],23,-1094730640),i=Se(i,o,n,r,e[a+13],4,681279174),r=Se(r,i,o,n,e[a+0],11,-358537222),n=Se(n,r,i,o,e[a+3],16,-722521979),o=Se(o,n,r,i,e[a+6],23,76029189),i=Se(i,o,n,r,e[a+9],4,-640364487),r=Se(r,i,o,n,e[a+12],11,-421815835),n=Se(n,r,i,o,e[a+15],16,530742520),o=Se(o,n,r,i,e[a+2],23,-995338651),i=ve(i,o,n,r,e[a+0],6,-198630844),r=ve(r,i,o,n,e[a+7],10,1126891415),n=ve(n,r,i,o,e[a+14],15,-1416354905),o=ve(o,n,r,i,e[a+5],21,-57434055),i=ve(i,o,n,r,e[a+12],6,1700485571),r=ve(r,i,o,n,e[a+3],10,-1894986606),n=ve(n,r,i,o,e[a+10],15,-1051523),o=ve(o,n,r,i,e[a+1],21,-2054922799),i=ve(i,o,n,r,e[a+8],6,1873313359),r=ve(r,i,o,n,e[a+15],10,-30611744),n=ve(n,r,i,o,e[a+6],15,-1560198380),o=ve(o,n,r,i,e[a+13],21,1309151649),i=ve(i,o,n,r,e[a+4],6,-145523070),r=ve(r,i,o,n,e[a+11],10,-1120210379),n=ve(n,r,i,o,e[a+2],15,718787259),o=ve(o,n,r,i,e[a+9],21,-343485551),i=bt(i,c),o=bt(o,u),n=bt(n,p),r=bt(r,d)}return Array(i,o,n,r)}function bn(e,t,i,o,n,r){return bt(Cu(bt(bt(t,e),bt(o,r)),n),i)}function Ae(e,t,i,o,n,r,a){return bn(t&i|~t&o,e,t,n,r,a)}function Te(e,t,i,o,n,r,a){return bn(t&o|i&~o,e,t,n,r,a)}function Se(e,t,i,o,n,r,a){return bn(t^i^o,e,t,n,r,a)}function ve(e,t,i,o,n,r,a){return bn(i^(t|~o),e,t,n,r,a)}function bt(e,t){var i=(e&65535)+(t&65535),o=(e>>16)+(t>>16)+(i>>16);return o<<16|i&65535}function Cu(e,t){return e<<t|e>>>32-t}var sr={md5:function(e){return fu(e)}};function Oo(){return"tb_error_log"}function Au(e,t){return new Promise(i=>{let o=`SELECT * FROM ${Oo()} WHERE status = ${V(e)} AND identify = '${t}' ORDER BY id DESC LIMIT 1`;vt(o,!0).then(n=>{i(n[0])})})}function Tu(e,t,i,o,n,r,a,c,u,p){return Au(e,t).then(d=>{if(d)return Promise.resolve(!0);let _=`INSERT INTO ${Oo()} (status, identify, grade, flag, user_desc, action_desc, environs_desc, error_desc, create_time, exp_time) values (${V(e)}, '${t}', ${i}, '${o}', '${Pt(n)}', '${Pt(r)}', '${Pt(a)}', '${Pt(c)}', ${V(u)}, ${V(p)})`;return St(_,!0)})}var xn={CRASH:1,USER:11,API_FAIL:12,API_ERROR:13,MSG_SYNC:14,DB_PLUGIN:15,FRAME:21,LISTENER:31,BUG_DB_GET_NONE:201,BUG_MSG_SYNC_PLUGIN_LOSS:202,BUG_MSG_SYNC_JS_LOSS:203},Cn={CRASH:"crash",MEMORY:"memory",LISTENER:"listener",FRAME_API:"frame_api",API:"api",DB:"db",PAYMENT:"payment",AUTH_FACE:"auth_face",CHAT_CALL:"chat_call",HOT_UPDATE:"hot_update",MESSAGE_PARSE:"message_parse",BUG:"bug"};function Ro(){return getApp().globalData.uid==0?!1:O.zT==3?!0:O.appId==oe.CHAT_NOW_A||O.ENV=="dev"}var Su=1e3;function vu(e,t){try{if(!Ro())return;let i=or(t),o=`api-${e} ${i}`;C("error","at comCatch/catch-save.js:15","catch api fail "+o);let n=Po(o);Fu().then(r=>{let a;typeof r=="boolean"?a="\u6D4B\u8BD5\u8C37\u6B4C\u6210\u529F":a=`\u6D4B\u8BD5\u8C37\u6B4C\u5931\u8D25-${or(r)}`,n.errorDesc=`${n.errorDesc} - ${a}`,Ho(xn.API_FAIL,Cn.API,n)})}catch(i){}}function ku(e,t,i){try{if(!Ro())return;let o=or(i);o=o.substring(0,120);let n=`statusCode-${i.statusCode}-${o}-api-${e}-${JSON.stringify(t)}`;C("error","at comCatch/catch-save.js:37","catch api error "+n);let r=Po(n);Ho(xn.API_ERROR,Cn.API,r)}catch(o){}}function No(e,t,i){try{if(i.indexOf("tb_error_log")!=-1)return;let o=`${e} - ${t}`;i&&(o+=` - ${i}`),C("error","at comCatch/catch-save.js:74","catch db "+o),Uo(xn.DB_PLUGIN,Cn.DB,o)}catch(o){}}function Bo(e,t){let i=`${yr(e)} || ${t}`;C("error","at comCatch/catch-save.js:148","*****************catchVideoCall************ \u89C6\u9891\u901A\u8BDD\u5F02\u5E38"+i),Uo(xn.USER,Cn.CHAT_CALL,i)}function or(e){if(!e)return"";let t=JSON.stringify(e);return(typeof t!="string"||t=="{}")&&(t=e.toString()),t}function Po(e){return{identify:sr.md5(e),errorDesc:e,userDesc:oi.getUserDesc(),actionDesc:oi.getActionDesc(),environsDesc:oi.getEnvironsDesc(),expTime:0}}function Ho(e,t,i){Tu(0,i.identify,e,t,i.userDesc,i.actionDesc,i.environsDesc,i.errorDesc,new Date().getTime(),i.expTime)}function Uo(e,t,i){let o=[],n=new Date().getTime();if(n-getApp().globalData.catchApiLastReqTime<=Su)return;getApp().globalData.catchApiLastReqTime=n,o.push({grade:e,flag:t,user_desc:oi.getUserDesc(),action_desc:oi.getActionDesc(),environs_desc:oi.getEnvironsDesc(),error_desc:i,create_time:n,createTimeStr:mn(n)});let r={log_list:o};k.request("/monitor/record-exception-log",r)}function Fu(){return new Promise(e=>{uni.request({url:"https://google.com",method:"GET",timeout:5e3,success(t){e(!0)},fail(t){e(t)}})})}var Lu=["/monitor/index","/chat/call/log","/chat/msg/mq-log","/user/sync-permission","/monitor/record-exception-log"],Ss=["/monitor/record-exception-log"],vs=5,Qi={invoke(e,t){if(Lu.indexOf(e)!=-1)return;let i="";i+=`\u63A5\u53E3=${e};`,i+=`\u53C2\u6570=${JSON.stringify(t)}`,i+=`\u65F6\u95F4=${mn(new Date().getTime())}`,getApp().globalData.catchApiUrlList.push(`\u3010${i}\u3011`);let o=getApp().globalData.catchApiUrlList.length;o>vs&&(getApp().globalData.catchApiUrlList=getApp().globalData.catchApiUrlList.slice(o-vs))},error(e,t,i){Ss.indexOf(e)==-1&&getApp().globalData.network.isConnected&&(!i||typeof i.statusCode=="undefined"||ku(e,t,i))},fail(e,t){Ss.indexOf(e)==-1&&getApp().globalData.network.isConnected&&vu(e,t)}},Iu={INIT:1,OPEN:2,CALLBACK:3,SOCKET:4,LOGIN:5};function $e(e,t=!1){if(!t&&e.hide_profile){let i=e.uid%9999;return i<1e3&&(i="0"+i),h("mysteryer")+i}else return e.nickname||""}function Ui(e,t="small_avatar",i=!1,o=1){if(!i&&e.hide_profile)return Du(o);{if(e[t])return e[t];let n=t=="small_avatar"?"avatar":"small_avatar";return e[n]}}function Du(e){return e==2?"s/privacy/masker_list_card.png":e==3?"s/privacy/masker_card.png":"s/privacy/masker_avatar.png"}function ks(){if(getApp().pubUnreadMy.moment>0){on(si.MY,getApp().pubUnreadMy.moment);return}on(si.MY,0),Xc(si.MY,getApp().pubUnreadMy.fans>0)}var L={PERMISSION:"permission",PERFECT_DATA:"perfect_data",REST:"rest",HOME_FILTER:"home_filter",GRID_GUIDE:"grid_guide",NOTIFY:"notify",HELLO:"hello",SHARE:"share",LANGUAGE_UP:"language_up",RAMADAN:"ramadan",MSG_DISTURB:"msg_disturb",CALL_DISTURB:"call_disturb",BAN:"ban",WARNING:"warning",HOME_SEX_FILTER:"home_sex_filter",CLUB_RESULT:"club_result",CLUB_DISBAND:"club_disband"},Mu={[L.HOME_FILTER]:"seeking_sex_open_time",[L.GRID_GUIDE]:"dialog_show_time_grid_guide",[L.NOTIFY]:"dialog_show_time_notify",[L.HELLO]:"dialog_show_time_hello"},ar=-99,Mi=-100,Eu={[L.HOME_FILTER]:1,[L.HOME_SEX_FILTER]:1,[L.GRID_GUIDE]:1,[L.NOTIFY]:2,[L.SHARE]:3,[L.HELLO]:4,[L.LANGUAGE_UP]:5,[L.RAMADAN]:6},Lr={[L.PERMISSION]:1,[L.PERFECT_DATA]:2,[L.REST]:3,[L.HOME_FILTER]:4,[L.HOME_SEX_FILTER]:4,[L.GRID_GUIDE]:4,[L.NOTIFY]:5,[L.SHARE]:7,[L.LANGUAGE_UP]:8};function Ou(e){return Bu(L.HOME_FILTER,21600)?!1:tu(!1)!=e}function Ru(e){return O.isAndroid||e||R(Ir(L.GRID_GUIDE))?!1:!R("user_list_sort_"+getApp().globalData.uid)}function Go(){return Sr(U.NOTIFY)?!1:!Nu()}function Wo(){let e=R(`dialog_call_disturb_${getApp().globalData.uid}`);return g(e)&&!j()&&!getApp().globalData.isBoosting}function Nu(){let e=dr(`${L.NOTIFY}_show_status`);if(!g(e))return!0;let t=R(Ir(L.NOTIFY));return!g(t)}function Ir(e){return`${Mu[e]}_${getApp().globalData.uid}`}function Bu(e,t){let i=R(Ir(e));if(!i)return!1;let o=new Date().getTime();return o<=i?!1:parseInt((o-i)/1e3)<=t}var Fs=!1,Qt=!1,wt=0,Li={appDialogList:[],appDialogStop:!1,appDialogCurKey:"",appDialogHelloData:!1,appBanDialogList:[],appClubResultList:[],appDialogIsShowBan:!1,appBanDialogCurKey:"",appWarningDialogCurKey:"",appClubResultCurKey:""},Pu={setDialogHelloData(e,t){e.appDialogHelloData=t},setDialogCurKey(e,t){e.appDialogCurKey=t},setDialogList(e,t){e.appDialogList=t,e.appDialogList.sort((i,o)=>i.sort-o.sort)},sortDialogList(e){e.appDialogList.sort((t,i)=>t.sort-i.sort)},resetDialogItem(e,t){let i=e.appDialogList.findIndex(o=>o.key==t.key);i!=-1&&(e.appDialogList[i].hasExec=!1,e.appDialogList[i].delay=t.delay)},resetClubResultDialogItem(e,t){let i=e.appClubResultList.findIndex(o=>o.key==t.key);i!=-1&&(e.appClubResultList[i].hasExec=!1)},delDialogItem(e,t){g(e.appDialogList)||e.appDialogList.splice(t,1)},delDialogItemByKey(e,t){if(g(e.appDialogList))return;let i=e.appDialogList.findIndex(o=>o.key==t);i!=-1&&e.appDialogList.splice(i,1)},clearDialog(e){e.appDialogStop=!0,e.appDialogList=[]},executeDialog(e,t){if(e.appBanDialogCurKey||e.appWarningDialogCurKey||e.appClubResultCurKey||g(e.appDialogList)||e.appDialogStop)return;let i=e.appDialogList[0];g(i)||i.hasExec||i.isCanExecute&&(e.appDialogList[0].hasExec=!0,Jn[i.funcName](i).then(()=>{e.appDialogCurKey="";let o=e.appDialogList.indexOf(i);o!=-1&&B("appDialog/delDialogItem",o),B("appDialog/executeDialog","execute then")}))},addDialog(e,t){let i=t.key;e.appDialogStop=!0;let o=e.appDialogList.findIndex(n=>n.key==i);if(o!=-1){if(e.appDialogList[o].isAdd){e.appDialogStop=!1,e.appDialogCurKey||B("appDialog/executeDialog");return}e.appDialogList[o].isAdd=!0,e.appDialogList[o].addTime=new Date().getTime(),e.appDialogList[o].isCanExecute=!0}else{let n=j()?1:2,r;switch(i){case L.HOME_FILTER:r=zu(n,!0);break;case L.HELLO:r=Ls(t.delay);break;case L.MSG_DISTURB:r=Ku(t.delay);break;case L.CALL_DISTURB:r=Yu(t.delay);break;default:e.appDialogStop=!1,e.appDialogCurKey||B("appDialog/executeDialog");return}r.isAdd=!0,r.addTime=new Date().getTime(),e.appDialogList.push(r)}e.appDialogList.sort((n,r)=>n.sort==r.sort?r.addTime-n.addTime||(n.isCanExecute?Mi:0):n.sort-r.sort),!e.appDialogCurKey&&(e.appDialogCurKey=i,e.appDialogStop=!1,B("appDialog/executeDialog"))},addDialogHomeFilter(e,t){getApp().globalData.appCRE==0||!Ou(t)||B("appDialog/addDialog",{key:L.HOME_FILTER})},addDialogHomeSexFilter(e,t){getApp().globalData.appCRE!=0&&(B("appDialog/addDialog",{key:L.HOME_SEX_FILTER,value:t}),B("appDialog/sortDialogList"))},addDialogGridGuide(e,t){let i=e.appDialogList.findIndex(n=>n.key==L.GRID_GUIDE);if(Ru(t)){if(i==-1)return;B("appDialog/addDialog",{key:L.GRID_GUIDE})}else i!=-1&&B("appDialog/delDialogItem",i)},addDialogNotify(e,t){t&&!Go()||ie("/pagesDialog/open-sys-notice")},addDialogHello(e,t){if(getApp().globalData.appCRE==0||Fs)return;Fs=!0;let i=e.appDialogList[0];if(i&&i.key==L.SHARE){wt=30;let o=Ls(wt);o.sort=Wt(j()?1:2,L.SHARE+1),o.isAdd=!0,o.addTime=new Date().getTime(),e.appDialogList.push(o),e.appDialogList.sort((n,r)=>n.sort==r.sort?r.addTime-n.addTime||(n.isCanExecute?Mi:0):n.sort-r.sort);return}wt=t,B("appDialog/addDialog",{key:L.HELLO,delay:t})},addDialogMsgDisturb(e,t){B("appDialog/addDialog",{key:L.MSG_DISTURB,delay:t})},addDialogCallDisturb(e,t){B("appDialog/addDialog",{key:L.CALL_DISTURB,delay:t})},delBanDialogItem(e){g(Li.appBanDialogList)||Li.appBanDialogList.splice(e,1)},delClubResultDialogItem(e){g(Li.appClubResultList)||Li.appClubResultList.splice(e,1)},addDialogBan(e,t){let i=qu(t);e.appDialogIsShowBan?uni.$emit("event_refresh_banned_data",t):(e.appBanDialogList.push(i),B("appDialog/sortBanWarningDialog"))},addDialogWarning(e,t){if(e.appBanDialogList.map(n=>n.sort).indexOf(Number(t.id))!=-1)return;let o;t.from_type==2?o=Zu(t):o=Ju(t),e.appBanDialogList.push(o),!(e.appBanDialogCurKey||e.appWarningDialogCurKey)&&B("appDialog/executeBanWarningDialog")},addDialogClubNoticeDialog(e,t){let i,o,n=e.appClubResultList.map(r=>r.key);t.type==Nl.CHECK_RESULT?(o=L.CLUB_RESULT+"_"+t.club_id,n.indexOf(o)==-1&&(i=Qu(t))):(o=L.CLUB_DISBAND+"_"+t.club_id,n.indexOf(o)==-1&&(i=Xu(t))),i&&e.appClubResultList.push(i),!(e.appBanDialogCurKey||e.appWarningDialogCurKey)&&(e.appClubResultCurKey||B("appDialog/executeClubNoticeDialog"))},executeBanWarningDialog(e){if(g(e.appBanDialogList)){B("appDialog/executeClubNoticeDialog");return}let t=e.appBanDialogList[0];if(g(t)||t.hasExec)return;let i=getApp().globalData.curCallId>ut.WAITING;if(i){t.isBan&&uni.$emit("event_banned_close_chat");return}e.appBanDialogList[0].hasExec=!i||!t.isBan,e.appDialogIsShowBan=t.isBan,t.isBan?e.appBanDialogCurKey="ban":e.appWarningDialogCurKey="warning",Jn[t.funcName](t).then(o=>{if(t.isBan){if(e.appBanDialogCurKey="",e.appDialogIsShowBan=!1,o==1){let n=e.appBanDialogList.indexOf(t);n!=-1&&B("appDialog/delBanDialogItem",n)}}else{e.appWarningDialogCurKey="";let n=e.appBanDialogList.indexOf(t);n!=-1&&B("appDialog/delBanDialogItem",n)}B("appDialog/executeBanWarningDialog","execute then")})},executeClubNoticeDialog(e,t){if(e.appBanDialogCurKey||e.appWarningDialogCurKey)return;if(g(e.appClubResultList)){B("appDialog/executeDialog");return}let i=e.appClubResultList[0];g(i)||i.hasExec||getApp().globalData.curCallId>ut.WAITING||(e.appClubResultCurKey="club_result",e.appClubResultList[0].hasExec=!0,t&&t.delay&&(i.delay=t.delay),Jn[i.funcName](i).then(()=>{e.appClubResultCurKey="";let n=e.appClubResultList.indexOf(i);n!=-1&&B("appDialog/delClubResultDialogItem",n),B("appDialog/executeClubNoticeDialog","execute then")}))},sortBanWarningDialog(e){let t=e.appBanDialogList.filter(o=>o.sort==ar),i=e.appBanDialogList.filter(o=>o.sort!=ar);i=i.sort((o,n)=>o.sort-n.sort),e.appBanDialogList=[...t,...i]}},Hu={init(i,o){return $(this,arguments,function*({state:e},t){C("error","at store/modules/app-dialog.js:326","------> init dialog list, data ",t);let n=[];j()?n=Wu(t.data,t.homeViewSizeObj):n=Gu(t.data,t.homeViewSizeObj),B("appDialog/setDialogList",n),B("appDialog/executeDialog")})}},Uu={namespaced:!0,state:Li,mutations:Pu,actions:Hu};function Gu(e,t){permissionGetAllStatus();let i=[],o=Vo(2,t,e.homeFilterSex);o&&i.push(o);let n=jo(2,t);n&&i.push(n);let r=zo(2,e.share);r&&i.push(r);let a=$o(2);a&&i.push(a);let c=$u(2,e.notifyTips);return c&&i.push(c),i}function Wu(e,t){let i=[],o=Vu(e.authList);o&&i.push(o);let n=ju();n&&i.push(n);let r=Vo(2,t,e.homeFilterSex);r&&i.push(r);let a=jo(1,t);a&&i.push(a);let c=5,u=zo(1,e.share,c);u&&i.push(u);let p=$o(1);return p&&i.push(p),i}function Vu(e){return typeof e=="undefined"?null:{key:L.PERFECT_DATA,sort:Lr[L.PERFECT_DATA],delay:0,data:e,hasExec:!1,isCanExecute:!0,addTime:new Date().getTime(),funcName:"_dialogExecutePerfectData"}}function ju(){return Ko()||!getApp().pubUser.is_rest?null:{key:L.REST,sort:Lr[L.REST],delay:0,data:{},hasExec:!1,isCanExecute:!0,addTime:new Date().getTime(),funcName:"_dialogExecuteRest"}}function zu(e,t){return{key:L.HOME_FILTER,sort:Wt(e,L.HOME_FILTER),delay:0,data:{},hasExec:!1,isCanExecute:t,addTime:new Date().getTime(),funcName:"_dialogExecuteHomeFilter"}}function Vo(e,t,i){return getApp().globalData.appCRE==0||!t||!t.filter?null:{key:L.HOME_SEX_FILTER,sort:Wt(e,L.HOME_SEX_FILTER),delay:0,data:{value:i,size:t.filter},hasExec:!1,isCanExecute:!0,addTime:new Date().getTime(),funcName:"_dialogExecuteHomeSexFilter"}}function jo(e,t){if(getApp().globalData.appCRE==0)return null;let i="grid";if(!t||!t[i])return null;let o={sizeList:[{key:i,size:t[i]}],from_type:1};return{key:L.GRID_GUIDE,sort:Wt(e,L.GRID_GUIDE),delay:0,data:o,hasExec:!1,isCanExecute:!1,addTime:new Date().getTime(),funcName:"_dialogExecuteGridGuide"}}function zo(e,t,i=5){return getApp().globalData.appCRE==0||g(t)||getApp().globalData.launchCount<3||iu()?null:{key:L.SHARE,sort:Wt(e,L.SHARE),delay:i,data:t,hasExec:!1,isCanExecute:!0,addTime:new Date().getTime(),funcName:"_dialogExecuteShare"}}function Ls(e){return{key:L.HELLO,sort:Mi,delay:e,data:{},hasExec:!1,isCanExecute:!0,addTime:new Date().getTime(),funcName:"_dialogExecuteHello"}}function $o(e){let t=R("user_switch_language_status");if(t)return null;let i=ai(!1);if(t||g(i))return null;let o=Fc.map(a=>a.key),n=ai();if(o.indexOf(n)!=-1)return null;let r=hi(!1);return o.indexOf(r)==-1?null:{key:L.LANGUAGE_UP,sort:Wt(e,L.LANGUAGE_UP),delay:5,data:{},hasExec:!1,isCanExecute:!0,addTime:new Date().getTime(),funcName:"_dialogExecuteLanguageUp"}}function $u(e,t){return g(t)||R(`stop_notify_${getApp().globalData.uid}_${t.time}`)||!Sr(U.NOTIFY)?null:{key:L.RAMADAN,sort:Wt(e,L.RAMADAN),delay:5,data:t,hasExec:!1,isCanExecute:!0,addTime:new Date().getTime(),funcName:"_dialogExecuteRamadan"}}function Ku(e){return{key:L.MSG_DISTURB,sort:Mi,delay:e,data:{from_type:1},hasExec:!1,isCanExecute:!0,addTime:new Date().getTime(),funcName:"_dialogExecuteMsgDisturb"}}function Yu(e){return{key:L.CALL_DISTURB,sort:Mi,delay:e,data:{from_type:2},hasExec:!1,isCanExecute:!0,addTime:new Date().getTime(),funcName:"_dialogExecuteCallDisturb"}}function qu(e){return{key:L.BAN,sort:ar,data:e,delay:e.delay||0,hasExec:!1,isBan:!0,addTime:new Date().getTime(),funcName:"_dialogExecuteBan"}}function Ju(e){return{key:L.WARNING,sort:Number(e.id),data:e,delay:e.delay||0,hasExec:!1,isBan:!1,addTime:new Date().getTime(),funcName:"_dialogExecuteWarning"}}function Zu(e){return{key:L.WARNING,sort:Number(e.id),data:e,delay:e.delay||0,hasExec:!1,isBan:!1,addTime:new Date().getTime(),funcName:"_dialogExecuteClubWarning"}}function Xu(e){return{key:L.CLUB_DISBAND+"_"+e.club_id,data:e,delay:e.delay||0,hasExec:!1,isBan:!1,addTime:new Date().getTime(),funcName:"_dialogExecuteClubDisband"}}function Qu(e){return{key:L.CLUB_RESULT+"_"+e.club_id,data:e,delay:e.delay||0,hasExec:!1,isBan:!1,addTime:new Date().getTime(),funcName:"_dialogExecuteClubResult"}}var Jn={_dialogExecutePermission(e){return new Promise(t=>{let i=setTimeout(()=>{clearTimeout(i),tt(e.key,e.delay,0)&&(B("appDialog/setDialogCurKey",L.PERMISSION),Bc(1,!1,e.permissionRes).then(()=>{t()}))},e.delay*1e3)})},_dialogExecutePerfectData(e){return new Promise(t=>{B("appDialog/setDialogCurKey",L.PERFECT_DATA),X("/pagesDialog/complete-content-first",{},"DataCompleteContentFirst",e.data,{onCloseListener(){t()}})})},_dialogExecuteRest(){return new Promise(e=>{B("appDialog/setDialogCurKey",L.REST),Be(h("tips"),h("anchor.rest.openedTip"),()=>{let t={user_info:{is_rest:0}};k.request("/user/update-info",t,!0,!0).then(i=>{rt("pubUser.is_rest",0),ye(h("tips"),h("anchor.rest.turnOff"),()=>{e()},h("gotIt"))},()=>{e()})},()=>{e()},h("startWorking"))})},_dialogExecuteHomeFilter(e){return new Promise(t=>{tt(e.key,e.delay,ti.USER)&&(B("appDialog/setDialogCurKey",L.HOME_FILTER),ie("/pagesDialog/seeking-sex-guide",{},{onCloseChooseSeekingSex:i=>{uni.$emit("event_app_dialog_seeking_sex_after",i),t()}}))})},_dialogExecuteHomeSexFilter(e){return new Promise(t=>{tt(e.key,e.delay,ti.USER)&&(B("appDialog/setDialogCurKey",L.HOME_SEX_FILTER),ie(Fi.homeFilterSexGuide,{params:JSON.stringify(e.data)},{onCloseListener:()=>{uni.$emit("event_handle_filter_seeking_sex"),t()}}))})},_dialogExecuteGridGuide(e){return new Promise(t=>{if(!tt(e.key,e.delay,ti.USER))return;B("appDialog/setDialogCurKey",L.GRID_GUIDE);let i=e.data.sizeList;ie("/pagesDialog/guide-cover",{list:encodeURIComponent(JSON.stringify(i))},{onCloseGuideCover:()=>{uni.$emit("event_app_dialog_close_guide",{from_type:e.data.from_type}),t()}})})},_dialogExecuteShare(e){return new Promise(t=>{let i=setTimeout(()=>{clearTimeout(i),tt(e.key,e.delay,0)&&(B("appDialog/setDialogCurKey",L.SHARE),X("/pagesDialog/share",{},"shareData",e.data.data,{onCloseListener:()=>{t()}}))},e.delay*1e3)})},_dialogExecuteLanguageUp(e){return new Promise(t=>{let i=setTimeout(()=>{clearTimeout(i),tt(e.key,e.delay,0)&&(B("appDialog/setDialogCurKey",L.LANGUAGE_UP),N("user_switch_language_status","1"),ie("/pagesDialog/switch-language-remind",{},{onCloseListener(){t()}}))},e.delay*1e3)})},_dialogExecuteRamadan(e){return new Promise(t=>{let i=setTimeout(()=>{clearTimeout(i),tt(e.key,e.delay,0)&&(B("appDialog/setDialogCurKey",L.RAMADAN),X("/pagesDialog/stop-notify",{},"dataStopNotify",e.data,{onCloseListener(){t()}}))},e.delay*1e3)})},_dialogExecuteHello(e){return new Promise(t=>{ip().then(i=>{if(!i){t();return}if(Qt&&clearInterval(Qt),e.delay<=0||wt<=0){if(!tt(e.key,wt,0))return;B("appDialog/setDialogCurKey",L.HELLO),Is(i,()=>{t()});return}Qt=setInterval(()=>{if(!tt(e.key,wt,0)){Qt&&clearInterval(Qt);return}wt-=1,wt<=0&&(clearInterval(Qt),B("appDialog/setDialogCurKey",L.HELLO),Is(i,()=>{t()}))},1e3)})})},_dialogExecuteMsgDisturb(e){return new Promise(t=>{let i=setTimeout(()=>{clearTimeout(i),tt(e.key,e.delay,ti.MSG)&&(B("appDialog/setDialogCurKey",L.MSG_DISTURB),ie("/pagesDialog/disturb-def",e.data,{onCloseListener:()=>{t()}}))},e.delay*1e3)})},_dialogExecuteCallDisturb(e){return new Promise(t=>{let i=setTimeout(()=>{clearTimeout(i),tt(e.key,e.delay,0)&&(B("appDialog/setDialogCurKey",L.CALL_DISTURB),ie("/pagesDialog/disturb-def",e.data,{onCloseListener:()=>{t()}}))},e.delay*1e3)})},_dialogExecuteBan(e){return new Promise(t=>{let i=e.exp_time;if(parseInt(new Date().getTime()/1e3)>i){t();return}let o=setTimeout(()=>{clearTimeout(o);let n=e.data.from_cache?1:0;X("/pagesDialog/banned",{from_cache:n},"bannedDialogData",e.data,{onCloseListener:r=>{t(r)}})},e.delay*1e3)})},_dialogExecuteWarning(e){return new Promise(t=>{let i=setTimeout(()=>{clearTimeout(i),X("/pagesDialog/warning",{},"warningDialogData",e.data,{onCloseListener:()=>{t()}})},e.delay*1e3)})},_dialogExecuteClubWarning(e){return new Promise(t=>{let i=setTimeout(()=>{clearTimeout(i),X(Fi.clubWarning,{},"clubDialogData",e.data,{onCloseListener:()=>{t()}})},e.delay*1e3)})},_dialogExecuteClubDisband(e){return new Promise(t=>{let i=setTimeout(()=>{clearTimeout(i),X(Fi.clubDisband,{},"clubDialogData",e.data,{onCloseListener:()=>{t()}})},e.delay*1e3)})},_dialogExecuteClubResult(e){return new Promise(t=>{let i=setTimeout(()=>{clearTimeout(i),X(Fi.clubStatusRemind,{from_type:2},"clubDialogData",e.data,{onCloseListener:()=>{t()}})},e.delay*1e3)})}};function tt(e,t,i){let o;return i==0?o=ep():o=tp(i),getApp().globalData.isGestureBacking||getApp().globalData.s.state.appDialog.appDialogStop||Ko()||!o?(B("appDialog/resetDialogItem",{key:e,delay:t}),!1):!0}function Ko(){return getApp().globalData.uid==0}function ep(){return getCurrentPages().length==1}function tp(e){let t=je();return t.length==1&&t[0]==e}function Wt(e,t){return e==1?Lr[t]:Eu[t]}function ip(){return new Promise(e=>{let t=getApp().globalData.s.state.appDialog.appDialogHelloData;t?e(t):k.request("/user/greet-coach-list",{},!1,!0).then(i=>{g(i.data)||g(i.data.list)?e(null):(B("appDialog/setDialogHelloData",i.data),e(i.data))},i=>{e(null)})})}function Is(e,t){X("/pagesDialog/quality-user",{},"qualityUserData",e,{onCloseListener:i=>{i&&Go()?setTimeout(()=>{B("appDialog/addDialogNotify")},2300):t()}})}var np={curSendCont:0,msgMtimeList:[]},rp=60,Ds=6,sp={addSendCount(e){e.curSendCont+=1},clearSendCount(e){e.curSendCont=0},addMsgDisturbSaveCount(e,t){let i=e.msgMtimeList.length;if(e.msgMtimeList.length<Ds&&(e.msgMtimeList.push(t/1e6),i=e.msgMtimeList.length),i>=Ds){let o=e.msgMtimeList[0];e.msgMtimeList[i-1]-o<=rp&&B("appDialog/addDialogMsgDisturb",2),e.msgMtimeList.splice(0,1)}}},op={namespaced:!0,state:np,mutations:sp},ap={callMtimeList:[]},lp=60,Ms=3,cp={addCallDisturbReceiveCount(e,t){let i=e.callMtimeList.length;if(e.callMtimeList.length<Ms&&(e.callMtimeList.push(t/1e3),i=e.callMtimeList.length),i>=Ms){let o=e.callMtimeList[0];e.callMtimeList[i-1]-o<=lp&&B("appDialog/addDialogCallDisturb",2),e.callMtimeList.splice(0,1)}},clearCallDisturbReceiveMtime(e){e.callMtimeList=[]}},up={namespaced:!0,state:ap,mutations:cp},ri=R("pubData");ri||(ri={});var pp=["pubToken","pubUser","pubAccount","pubPrivacy"],hp=function(e,t){if(pp.indexOf(e)==-1)return;let i=R("pubData");i=i||{},i[e]=t,N("pubData",i),["pubUser","pubAccount"].indexOf(e)!=-1?uni.$emit("event_vuex_watch",e):uni.$emit(`event_vuex_watch_${e}`)},mp=(0,Es.createStore)({state:{pubToken:ri.pubToken||"",pubUser:ri.pubUser||{nickname:"",uid:0,avatar:""},pubAccount:ri.pubAccount||{money:0},pubPrivacy:ri.pubPrivacy||{},pubUnread:0,pubUnreadMy:{fans:0,moment:0,moment_type:1},pubI18n:"",pubAI18n:""},mutations:{setPubValue(e,t){let i=t.name.split("."),o="",n=i.length;if(n>=2){let r=e[i[0]];for(let a=1;a<n-1;a++)r=r[i[a]];r[i[n-1]]=t.value,o=i[0]}else e[t.name]=t.value,o=t.name;hp(o,e[o])},initUnread(e,t){let i=parseInt(t);i<0&&(i=0),e.pubUnread=i,on(si.MSG,e.pubUnread),uni.$emit("event_vuex_watch_pub_unread",i)},setUnread(e,t){let i=parseInt(t);if(isNaN(i)||i==0)return;let o=e.pubUnread+i;o<0&&(o=0),e.pubUnread=o,on(si.MSG,e.pubUnread),uni.$emit("event_vuex_watch_pub_unread",o)},initUnreadMy(e,t){let i=e.pubUnreadMy;typeof t.fans!="undefined"&&(i.fans=Number(t.fans)),typeof t.moment!="undefined"&&(i.moment=Number(t.moment)),typeof t.moment_type!="undefined"&&(i.moment_type=Number(t.moment_type)),e.pubUnreadMy=i,ks(),uni.$emit("event_vuex_watch_pubUnreadMy",i)},setUnreadMy(e,t){let i=e.pubUnreadMy;for(let o in t)i[o]=t[o];e.pubUnreadMy=i,ks(),uni.$emit("event_vuex_watch_pubUnreadMy",i)}},modules:{appDialog:Uu,message:op,call:up}}),ei={handleCache(){let e=ei.getCache();g(e)||(e=Je(e),!ei.checkIsShow()&&(e.from_cache=1,B("appDialog/addDialogBan",e),B("appDialog/executeBanWarningDialog")))},checkIsShow(){return Bi()=="/pagesDialog/banned"},setCache(e){let t=JSON.stringify(e);N(ei.getCacheKey(),t)},getCache(){return R(ei.getCacheKey())},getCacheKey(){return`banned_data_${mp.state.pubUser.uid}`},removeCache(){de(ei.getCacheKey())}},k={setToken(e){g(e)||rt("pubToken",e)},isLogin(){let e=getApp().globalData.s.state;return!g(e.pubToken)&&e.pubUser.uid},requestOutsourcing(e,t,i,o,n=!1){return k.requestBase(e,t,i,o,n,3)},requestManager(e,t,i,o,n=!1){return k.requestBase(e,t,i,o,n,2)},request(e,t,i,o,n=!1){return k.requestBase(e,t,i,o,n,1)},requestBase(e,t,i,o,n=!1,r){return new Promise((a,c)=>{let u=!1;try{u=getApp().globalData.s.state.pubToken}catch(D){C("error","at common/api.js:35","request token catch "+JSON.stringify(D))}let p={"content-type":"application/json",ua:getApp().globalData.ua},d;r==1?(d=getApp().globalData.apiHost,u&&(p.auth=`Bearer ${u}`)):r==2?(d=getApp().globalData.pApiHost,u&&(p.Authorization=`Bearer ${u}`)):r==3&&(d=getApp().globalData.oApiHost,u&&(p.Authorization=`Bearer ${u}`));let _=!1;if(i)if(i=="refresh")_=!0;else{let D={mask:!0};typeof i=="string"&&(D.title=i),uni.showLoading(D)}Qi.invoke(e,t);let w=bp(t);uni.request({url:d+e,method:"POST",header:p,data:w,dataType:"json",timeout:1e4,complete(D){if(i&&uni.hideLoading(),C("log","at common/api.js:74",`request ${e} obj ${JSON.stringify(t)}`),D.statusCode==200){let b=D.data;if(b.data&&typeof b.data.callback=="object"&&(k.handleCallback(b.data.callback),n))return it;if(b.ok===99)return getApp().loginOut(),it;if(b.ok==-98)return wp(b.data),o&&c(b),it;if(g(b.msg)||Tt(b.msg),b.ok>0){a(b);return}o&&c(b)}else if(_&&uni.stopPullDownRefresh(),o)c(D),Qi.error(e,t,D);else return Qi.error(e,t,D),it},fail(D){Qi.fail(e,D)}})})},handleCallback(e){switch(e.func_name){case"alert":dp(e.func_data);break;case"open":fp(e.func_data);break;case"vip_alert":X("/pages/vip/vip-dialog",null,"vipDialogData",e.func_data);break;case"recharge_alert":let t={fromType:e.func_data.from_type,diffCoin:e.func_data.diff_coin||0};t.order_source=typeof e.func_data.order_source=="undefined"?0:e.func_data.order_source,t.click_type=typeof e.func_data.click_type=="undefined"?0:e.func_data.click_type,X("/pages/coin/coin-dialog",t,"coinDialogData",e.func_data);break;case"close":Gt();break;case"banned_alert":let i=e.func_data.exp_time;if(parseInt(new Date().getTime()/1e3)>i||(B("appDialog/addDialogBan",e.func_data),ei.setCache(e.func_data),Bi()=="/pagesDialog/banned"))return;let n=setTimeout(()=>{clearTimeout(n),B("appDialog/executeBanWarningDialog")},e.delay*1e3);break;case"reconnect_mqtt":getApp().socketReconnect(lu.API_CALL_BACK,e.func_data);break;case"reload_route":getApp().handleSecret(e.func_data,Iu.CALLBACK,{});break;case"event":gp(e.func_data);break;case"api":_p(e.func_data);break;case"sensitive_alert":X("/pagesDialog/sensitive-check",null,"sensitiveData",e.func_data),uni.hideKeyboard();break;case"free_coins":X("/pagesDialog/coins-free",{coin:e.func_data.free_coins},"coinsFree",{},{});break}},accessLog(e,t){this.request("/other/access-log",{api_name:e,content:ni(t)})},accessLogExtra(e,t,i){let o=`${ni(t)} ${ni(i)}`;this.request("/other/access-log",{api_name:e,content:o})},accessLogApi(e,t,i,o){let n=`url:${t} p:${JSON.stringify(i)} res ${ni(o)}`;k.accessLog(e,n)}};function dp(e){let t=e.enter_func,i=e.cancel_title,o=e.enter_title,n=e.cancel_func,r=!g(i);uni.hideKeyboard(),uni.showModal({title:e.title,content:e.msg,showCancel:r,cancelText:r?i:h("cancel"),confirmText:o||h("ok"),complete(a){a.confirm?g(t)||k.handleCallback(t):a.cancel&&(g(n)||k.handleCallback(n))}})}function fp(e){let t=e.page_name,i=e.data;t=="inside_web"?Di(i.route,!0):t=="safari"?Di(i.route,!1):t=="web"?ie(i.route):t=="native"?yp(i.route):t=="chat"&&(je().indexOf("/pages/call/chat-view")==-1?br(i.user_info):uni.$emit("event_no_connect_close_listener",{action:"chat_pri",user:i.user_info}))}function gp(e){let t=e.event_key;if(g(t))return;let i=e.data;g(i)?uni.$emit(t):uni.$emit(t,i)}function _p(e){if(e.type==1){let i={user_info:{is_rest:0}};k.request("/user/update-info",i,!0).then(()=>{getApp().pubUser.is_rest=0,ye(h("tips"),h("anchorTurnedOffRest"),"",h("gotIt"))})}}function yp(e){return new Function("return "+e)()}function wp(e){je().indexOf("/pagesDialog/stop_taking")==-1&&(getApp().globalData.appStopTaking=!0,getApp().socketDisconnect(),X("/pagesDialog/stop_taking",{},"stopTakingData",e))}function bp(e){try{g(e)&&(e={}),e.times=new Date().getTime();let t=Object.keys(e).sort(),i={};for(let n=0,r=t.length;n<r;n++)i[t[n]]=e[t[n]];let o=Yo(i).substr(1);return i.sign=sr.md5(`${sr.md5(o)}fMHjgD94yoc6TbB7sGoA`),i}catch(t){return e}}function Yo(e,t){if(e==null)return"";try{let i="",o=typeof e;if(o=="string"||o=="number")i+="&"+t+"="+vc(e);else if(o=="boolean")i+="&"+t+"="+(e?1:0);else for(let n in e){let r=t==null?n:t+xp(n);i+=Yo(e[n],r)}return i}catch(i){return""}}function xp(e){return`${encodeURIComponent("[")}${e}${encodeURIComponent("]")}`}var S=(e,t)=>{let i=e.__vccOpts||e;for(let[o,n]of t)i[o]=n;return i};var ne=q(Z()),Cp={"l-img":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"place-img":{"":{position:"absolute",top:0,left:0}},"text-place":{"":{color:"#999999",position:"absolute",bottom:0,textAlign:"center"}}},Ap={name:"LImg",emits:["click","onError","onLoad"],props:{src:{type:String,default:""},mode:{type:String,default:"aspectFill"},w:{type:String,default:"0"},h:{type:String,default:"0"},radius:{type:String,default:"0"},lazyLoad:{type:Boolean,default:!1},fade:{type:Boolean,default:!0},placeType:{type:Number,default:0},placeW:{type:String,default:""},placeFontSize:{type:[String,Boolean],default:""},placeBottom:{type:String,default:""},border:{type:String,default:""},otherStyle:{type:Object,default(){return{}}},click:{type:Boolean,default:!0},isGif:{type:Boolean,default:!1},needStyle:{type:[String,Number],default:0},useCache:{type:Boolean,default:!1},fitWH:{type:String,default:""}},data(){return{errorCount:1,path:"",refresh:!0,darkDir:"",isLoad:!1,fitStr:""}},watch:{src(){this.isLoad=!1,this.path=this.parse()}},computed:{placeSrc(){return this.placeType==1?"/static/img_load_s.png":this.placeType==2?"/static/img_load_b.png":""},placeViewStyle(){let e={width:this.placeW,height:this.placeW,position:"relative"};return this.placeBottom&&(e.marginBottom=this.placeBottom),e},placeFontSizeVal(){return this.placeFontSize===!1?"":this.placeFontSize?this.placeFontSize:this.placeType==2?"24rpx":"16rpx"},borderStyle(){if(this.border=="")return{};let e={},t=this.border.split(" ");return e.borderWidth=t[0],e.borderStyle=t[1],e.borderColor=t[2],e},viewStyle(){let e={width:this.w,minWidth:this.w,height:this.h,minHeight:this.h};return this.setRadius(e)},imgStyle(){let e={width:this.w,height:this.h};return e=Object.assign(e,this.otherStyle),this.setRadius(e)},ossPathOriginal(){return this.isGif?getApp().globalData.ossPath:getApp().globalData.ossPicPath}},methods:{$str:h,clickImg(e){this.click&&this.$emit("click",e)},setRadius(e){let t=this.radius.split(" ");return t.length<=1?e.borderRadius=this.radius:(e.borderTopLeftRadius=t[0],e.borderTopRightRadius=t[1],e.borderBottomRightRadius=t[2],e.borderBottomLeftRadius=t[3]),e},onLoadError(){if(this.path){if(this.path.startsWith("http")){if(this.errorCount>2){this.isError=!0,this.$emit("onError");return}this.errorCount+=1,this.refresh=!1,setTimeout(()=>{this.refresh=!0},500);return}this.path=this.ossPathOriginal+this.darkDir+this.src,wo(this.darkDir+this.src)}},onLoad(){this.isLoad=!0,this.$emit("onLoad")},parse(){let e;if(e=0,this.src.startsWith("/static"))return this.src;if(this.src.startsWith("s/")){let t=getApp().getAppFilePath(this.darkDir+this.src,e);if(!g(t))return t}return this.useCache||e&&O.isAndroid?this.isGif?ze(this.fitStr+this.darkDir+this.src):Pi(this.fitStr+this.darkDir+this.src):this.src.startsWith("file://")?this.src:this.src.startsWith("/var/mobile/")?"file://"+this.src:this.src.startsWith("/storage/")?this.src:this.ossPathOriginal+this.fitStr+this.darkDir+this.src}},created(){this.needStyle==1&&getApp().globalData.themeObj.style==_n.DARK?this.darkDir="dark/":this.darkDir="",this.fitWH&&this.src.indexOf("fit-in")==-1&&(this.fitStr="fit-in/"+this.fitWH+"/"),this.path=this.parse()}};function Tp(e,t,i,o,n,r){return(0,ne.openBlock)(),(0,ne.createElementBlock)("view",{class:"l-img",onClick:t[2]||(t[2]=(...a)=>r.clickImg&&r.clickImg(...a)),style:(0,ne.normalizeStyle)([r.viewStyle,r.borderStyle]),renderWhole:!0},[(0,ne.createElementVNode)("view",{class:"l-img",style:(0,ne.normalizeStyle)([{position:"relative"},r.viewStyle])},[i.placeType&&!n.isLoad?((0,ne.openBlock)(),(0,ne.createElementBlock)("view",{key:0,style:(0,ne.normalizeStyle)(r.placeViewStyle)},[(0,ne.createElementVNode)("u-image",{src:r.placeSrc,style:(0,ne.normalizeStyle)({width:i.placeW,height:i.placeW})},null,12,["src"]),r.placeFontSizeVal?((0,ne.openBlock)(),(0,ne.createElementBlock)("u-text",{key:0,class:"text-place",style:(0,ne.normalizeStyle)({fontSize:r.placeFontSizeVal,width:i.placeW})},(0,ne.toDisplayString)(r.$str("loading"))+"...",5)):(0,ne.createCommentVNode)("",!0)],4)):(0,ne.createCommentVNode)("",!0),n.refresh?((0,ne.openBlock)(),(0,ne.createElementBlock)("u-image",{key:1,onError:t[0]||(t[0]=(...a)=>r.onLoadError&&r.onLoadError(...a)),onLoad:t[1]||(t[1]=(...a)=>r.onLoad&&r.onLoad(...a)),src:n.path,mode:i.mode,lazyLoad:i.lazyLoad,fadeShow:i.fade,style:(0,ne.normalizeStyle)([r.imgStyle,r.borderStyle]),class:"place-img"},null,44,["src","mode","lazyLoad","fadeShow"])):(0,ne.createCommentVNode)("",!0)],4)],4)}var v=S(Ap,[["render",Tp],["styles",[Cp]]]);var s=q(Z());var Xe=q(Z());var Sp=le("animation"),An=class{constructor(t,i){this.options=t,this.animation=uni.createAnimation(t),this.currentStepAnimates={},this.next=0,this.$=i}_nvuePushAnimates(t,i){let o=this.currentStepAnimates[this.next],n={};if(o?n=o:n={styles:{},config:{}},Jo.includes(t)){n.styles.transform||(n.styles.transform="");let r="";t==="rotate"&&(r="deg"),n.styles.transform+=`${t}(${i+r}) `}else n.styles[t]=`${i}`;this.currentStepAnimates[this.next]=n}_animateRun(t={},i={}){let o=this.$.$refs.ani.ref;if(o)return new Promise((n,r)=>{Sp.transition(o,Rt({styles:t},i),a=>{n()})})}_nvueNextAnimate(t,i=0,o){let n=t[i];if(n){let{styles:r,config:a}=n;this._animateRun(r,a).then(()=>{i+=1,this._nvueNextAnimate(t,i,o)})}else this.currentStepAnimates={},typeof o=="function"&&o(),this.isEnd=!0}step(t={}){return this.currentStepAnimates[this.next].config=Object.assign({},this.options,t),this.currentStepAnimates[this.next].styles.transformOrigin=this.currentStepAnimates[this.next].config.transformOrigin,this.next++,this}run(t){this.isEnd=!1,this.$.$refs.ani&&this.$.$refs.ani.ref&&(this._nvueNextAnimate(this.currentStepAnimates,0,t),this.next=0)}},Jo=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"],vp=["opacity","backgroundColor"],kp=["width","height","left","right","top","bottom"];Jo.concat(vp,kp).forEach(e=>{An.prototype[e]=function(...t){return this._nvuePushAnimates(e,t),this}});function qo(e,t){if(t)return clearTimeout(t.timer),new An(e,t)}var Fp={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default(){return"fade"}},duration:{type:Number,default:300},styles:{type:Object,default(){return{}}},customClass:{type:String,default:""}},data(){return{isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}},watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e=vi(Rt({},this.styles),{"transition-duration":this.duration/1e3+"s"}),t="";for(let i in e){let o=this.toLine(i);t+=o+":"+e[i]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=qo(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let i in e)try{typeof e[i]=="object"?this.animation[i](...e[i]):this.animation[i](e[i])}catch(o){C("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:139",`\u65B9\u6CD5 ${i} \u4E0D\u5B58\u5728`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);typeof e!="undefined"&&(this.opacity=e),this.transform=t,this.$nextTick(()=>{this.timer=setTimeout(()=>{this.animation=qo(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})},20)})},close(e){this.animation&&this.tranfromInit(!0).step().run(()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:t,transform:i}=this.styleInit(!1);this.opacity=t||1,this.transform=i,this.$emit("change",{detail:this.isShow})})},styleInit(e){let t={transform:""},i=(o,n)=>{n==="fade"?t.opacity=this.animationType(o)[n]:t.transform+=this.animationType(o)[n]+" "};return typeof this.modeClass=="string"?i(e,this.modeClass):this.modeClass.forEach(o=>{i(e,o)}),t},tranfromInit(e){let t=(i,o)=>{let n=null;o==="fade"?n=i?0:1:(n=i?"-100%":"0",o==="zoom-in"&&(n=i?.8:1),o==="zoom-out"&&(n=i?1.2:1),o==="slide-right"&&(n=i?"100%":"0"),o==="slide-bottom"&&(n=i?"100%":"0")),this.animation[this.animationMode()[o]](n)};return typeof this.modeClass=="string"?t(e,this.modeClass):this.modeClass.forEach(i=>{t(e,i)}),this.animation},animationType(e){return{fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}},animationMode(){return{fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}},toLine(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}}};function Lp(e,t,i,o,n,r){return n.isShow?((0,Xe.openBlock)(),(0,Xe.createElementBlock)("view",{key:0,ref:"ani",animation:n.animationData,class:(0,Xe.normalizeClass)(i.customClass),style:(0,Xe.normalizeStyle)(r.transformStyles),onClick:t[0]||(t[0]=(...a)=>r.onClick&&r.onClick(...a)),renderWhole:!0},[(0,Xe.renderSlot)(e.$slots,"default")],14,["animation"])):(0,Xe.createCommentVNode)("",!0)}var st=S(Fp,[["render",Lp]]);var kt=q(Z());var Ip={id:"2852637",name:"uniui\u56FE\u6807\u5E93",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]},Dp="/static/uniicons.ttf",Mp={"uni-icons":{"":{fontFamily:"uniicons",textDecoration:"none",textAlign:"center"}}},Ep=weex.requireModule("dom");Ep.addRule("fontFace",{fontFamily:"uniicons",src:"url('"+Dp+"')"});var Op={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data(){return{icons:Ip.glyphs}},computed:{unicode(){let e=this.icons.find(t=>t.font_class===this.type);return e?unescape(`%u${e.unicode}`):""}},methods:{_onClick(e){this.$emit("click",e)}}};function Rp(e,t,i,o,n,r){return(0,kt.openBlock)(),(0,kt.createElementBlock)("u-text",{style:(0,kt.normalizeStyle)({color:i.color,"font-size":i.size}),class:"uni-icons",onClick:t[0]||(t[0]=(...a)=>r._onClick&&r._onClick(...a))},(0,kt.toDisplayString)(r.unicode),5)}var J=S(Op,[["render",Rp],["styles",[Mp]]]);var m=q(Z());var Q=q(Z()),Np={"uni-popup":{"":{position:"fixed"},".top":{top:0},".left":{top:0},".right":{top:0}},"uni-popup__wrapper":{".uni-popup ":{position:"relative"},".uni-popup .left":{paddingTop:0,flex:1},".uni-popup .right":{paddingTop:0,flex:1}},"fixforpc-top":{"":{top:0}}},Bp={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},maskClick:{type:Boolean,default:!0},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBgColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{maskClass(){return{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:this.maskBgColor}},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return this.backgroundColor===""||this.backgroundColor==="none"?"transparent":this.backgroundColor}},mounted(){(()=>{let{windowWidth:t,windowHeight:i,windowTop:o,safeAreaInsets:n}=uni.getSystemInfoSync();this.popupWidth=t,this.popupHeight=i+o,this.safeArea?this.safeAreaInsets=n:this.safeAreaInsets=0})()},created(){this.mkclick=this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1},methods:{closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){this.clearPropagation=!0},open(e,t=!0){if(e&&["top","center","bottom","left","right","message","dialog","share"].indexOf(e)!==-1||(e=this.type),this.maskShow=t,!this.config[e]){C("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:218","\u7F3A\u5C11\u7C7B\u578B\uFF1A",e);return}this[this.config[e]](),this.$emit("change",{show:!0,type:e})},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.showPopup=!1},300)},touchstart(){this.clearPropagation=!1},onTap(){if(this.clearPropagation){this.clearPropagation=!1;return}this.$emit("maskClick"),this.mkclick&&this.close()},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0,this.$nextTick(()=>{this.messageChild&&this.type==="message"&&this.messageChild.timerClose()}))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets&&this.safeAreaInsets.bottom||0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},!e&&(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg},!e&&(this.showPopup=!0,this.showTrans=!0)}}};function Pp(e,t,i,o,n,r){let a=y((0,Q.resolveDynamicComponent)("uni-transition"),st);return n.showPopup?((0,Q.openBlock)(),(0,Q.createElementBlock)("view",{key:0,class:(0,Q.normalizeClass)(["uni-popup",[n.popupstyle,r.isDesktop?"fixforpc-z-index":""]]),onTouchmove:t[2]||(t[2]=(0,Q.withModifiers)((...c)=>r.clear&&r.clear(...c),["stop","prevent"])),renderWhole:!0},[(0,Q.createElementVNode)("view",{onTouchstart:t[1]||(t[1]=(...c)=>r.touchstart&&r.touchstart(...c))},[n.maskShow?((0,Q.openBlock)(),(0,Q.createBlock)(a,{key:"1",name:"mask","mode-class":"fade",styles:r.maskClass,duration:n.duration,show:n.showTrans,onClick:r.onTap},null,8,["styles","duration","show","onClick"])):(0,Q.createCommentVNode)("",!0),(0,Q.createVNode)(a,{key:"2","mode-class":n.ani,name:"content",styles:n.transClass,duration:n.duration,show:n.showTrans,onClick:r.onTap},{default:(0,Q.withCtx)(()=>[(0,Q.createElementVNode)("view",{class:(0,Q.normalizeClass)(["uni-popup__wrapper",[n.popupstyle]]),style:(0,Q.normalizeStyle)({backgroundColor:r.bg}),onClick:t[0]||(t[0]=(...c)=>r.clear&&r.clear(...c))},[(0,Q.renderSlot)(e.$slots,"default")],6)]),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],34)):(0,Q.createCommentVNode)("",!0)}var re=S(Bp,[["render",Pp],["styles",[Np]]]);var se=q(Z()),Hp={wrap:{"":{position:"fixed",alignItems:"center",flexDirection:"row",paddingTop:0,paddingRight:"4rpx",paddingBottom:0,paddingLeft:"4rpx"}},cover:{"":{zIndex:111,position:"fixed",backgroundColor:"rgba(0,0,0,0)"}},popover:{"":{borderRadius:"8rpx",textAlign:"center",zIndex:111,position:"relative"}},triangle:{"":{width:"28rpx",height:"28rpx",transform:"rotate(45deg)",position:"absolute",zIndex:11}}},Up=le("dom"),Gp={emits:["onClickOther"],props:{size:{type:Object,default(){return{}}},minMargin:{type:[String,Number],default:15},bgColor:{type:String,default:"#FFFFFF"},direction:{type:String,default:"above"},boxShadow:{type:String,default:"0 4rpx 8rpx 0 rgba(0, 0, 0, 0.09)"},triBoxShadow:{type:String,default:"0 4rpx 4rpx 0 rgba(0, 0, 0, 0.09)"},triangleIsTop:{type:Boolean,default:!0}},computed:{getStyle(){return{top:this.getTop()[0]+"px",height:this.popFatherHeight+"px",opacity:this.opacity,left:this.getSide()[0]+"px"}},getTriangleStyle(){return{top:this.getTop()[1]+"px",left:this.getSide()[1]+"px","background-color":this.bgColor}},triangleBoxShadow(){return g(this.boxShadow)?"":this.triangleBoxShadow}},data(){return{opacity:0,popWidth:0,popHeight:0,show:!1,showPop:!1,popFatherHeight:0,coverWidth:getApp().globalData.window.width,coverHeight:getApp().globalData.window.height}},methods:{getTop(){let e,t,i=this.size.top,o=this.size.height,n=this.size.bottom;if(this.direction=="above")i<this.popFatherHeight+10?(e=i+o+6,t=2):(e=i-this.popFatherHeight-6,t=this.popHeight);else if(this.direction=="below"){let r=getApp().globalData.window;this.coverHeight-r.statusBarHeight-r.safeBottom-44-50-n<this.popFatherHeight+10?(e=i-this.popFatherHeight-6,t=this.popHeight):(e=i+o+6,t=2)}return[e,t]},getSide(){let e=this.coverWidth,t=this.size,i=this.popWidth/2,o=t.left+(t.width-12)/2,n,r;return i>=o?(n=this.minMargin,r=o-this.minMargin):this.size.left+this.popWidth>=e?(n=e-this.popWidth-this.minMargin,r=t.left-n+t.width/2-7):(n=o-i+5,r=i-6),[n,r]},clickOther(){this.show=!1,this.$emit("onClickOther")},getPopHeight(){var e=this;Up.getComponentRect(e.$refs.popContent,t=>{if(t&&t.size){let i=t.size;e.popWidth=i.width,e.popHeight=i.height,e.popFatherHeight=i.height+18,e.opacity=1}})},open(){var e=this;e.show=!0,e.opacity=0;let t=setTimeout(function(){e.getPopHeight(),clearTimeout(t)},100)},close(){this.show&&(this.show=!1)}}};function Wp(e,t,i,o,n,r){return n.show?((0,se.openBlock)(),(0,se.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...a)=>r.clickOther&&r.clickOther(...a)),class:"cover",style:(0,se.normalizeStyle)({width:n.coverWidth+"px",height:n.coverHeight+"px"}),renderWhole:!0},[(0,se.createElementVNode)("view",{style:(0,se.normalizeStyle)(r.getStyle),class:"wrap"},[(0,se.createElementVNode)("view",{class:"triangle",style:(0,se.normalizeStyle)([r.getTriangleStyle,{boxShadow:r.triangleBoxShadow}])},null,4),i.triangleIsTop?((0,se.openBlock)(),(0,se.createElementBlock)("view",{key:0,class:"triangle",style:(0,se.normalizeStyle)([r.getTriangleStyle])},null,4)):(0,se.createCommentVNode)("",!0),(0,se.createElementVNode)("view",{ref:"popContent",class:"popover",style:(0,se.normalizeStyle)({"background-color":i.bgColor,boxShadow:i.boxShadow})},[(0,se.renderSlot)(e.$slots,"default")],4),i.triangleIsTop?(0,se.createCommentVNode)("",!0):((0,se.openBlock)(),(0,se.createElementBlock)("view",{key:1,class:"triangle",style:(0,se.normalizeStyle)([r.getTriangleStyle])},null,4))],4)],4)):(0,se.createCommentVNode)("",!0)}var Gi=S(Gp,[["render",Wp],["styles",[Hp]]]);var we={MSG:1,CALL:2,HOME:3,GAME:4,CLUB:5,GRAB:6,MOMENT:8},Fe={GIFT:1,BAG:2},Vp={};function Sn(){return new Promise(e=>{let t=R("g_gift_1");g(t)||getApp().globalData.giftVersion>parseInt(t.version)?k.request("/chat/gift/res",{}).then(i=>{let o={version:i.data.version,content:i.data.res};N("g_gift_1",o),Tn(i.data.res),e(o.content)}):(Tn(t.content),e(t.content))})}function Zo(){return new Promise(e=>{let t=R("gift_bag_"+getApp().globalData.uid);g(t)?Wi().then(i=>{e(i)}):(Tn(t),e(t))})}function Wi(){return new Promise(e=>{k.request("/chat/gift/bag",{}).then(t=>{let i=t.data.list||[],o=zp(i),n={list:i,count:o};N("gift_bag_"+getApp().globalData.uid,n),Tn(i),jp(i),e(n)})})}function jp(e){let t="gift_bag_swipe_current_"+getApp().globalData.uid,i="gift_bag_current_info_"+getApp().globalData.uid,o=R(t),n=R(i);if(g(e))o&&de(t),n&&de(i);else if(!n)N(i,e[0]);else{let r="";for(let a=0,c=e.length;a<c;a++){let u=e[a];u.gift_id==n.gift_id&&(r=u)}g(r)?N(i,e[0]):N(i,r)}}function zp(e){let t=0;for(let i=0,o=e.length;i<o;i++)t+=e[i].num;return t}function Tn(e){for(let t=0,i=e.length;t<i;t++){let o=e[t];Vp[o.gift_id]=o}}var vn={};function Vt(e,t="",i={}){xe(e,t,i),Dr(e,t,i)}function xe(e,t="",i={}){if(Xo()&&typeof vn.fbEvent!="undefined")try{vn.fbEvent({event:e,valueToSum:t,params:i},function(){C("info","at comEvent/event.js:17",`fbEvent ${e} success`)},function(){C("error","at comEvent/event.js:19",`fbEvent ${e} error`)})}catch(o){}}function Dr(e,t="",i={}){if(O.isAndroid&&Xo()&&typeof vn.fireEvent!="undefined")try{g(t)||(i.value=t),vn.fireEvent({event:e,params:i},function(){C("info","at comEvent/event.js:32",`fireEvent ${e} success`)},function(){C("error","at comEvent/event.js:34",`fireEvent ${e} error`)})}catch(o){}}function Xo(){return!(!O.isAndroid&&O.appV<133)}function Mr(e,t=!1,i=!1){let o=`match_${e}`;if(i){let n=`${o}_total`;xe(n)}t&&(o=`${o}_${fi()}`),xe(o)}function gi(e,t,i=!1,o=0){t&&(xe("videochat_click_total"),xe(`videochat_click_${fi()}_total`));let n=`videochat_${e}`;i&&(n=`${n}_${fi(o)}`),xe(n)}function _i(e,t=!1){t&&(xe("audiochat_click_total"),xe(`audiochat_click_${fi()}`));let i=`audiochat_${e}`;xe(i)}function Vi(e,t){t==1?xe("gift_total_click"):t==2&&xe("gift_total_success"),xe(`gift_${e}`)}function kn(e){xe(`${e}_click`)}function Qo(e,t,i=!1){t&&xe("game_click_total");let o=`game_${e}`;i&&(o=`${o}_${fi()}`),xe(o)}function ea(){xe("game_bet_click_total");let e=`game_bet_click_${fi()}`;xe(e)}function fi(e){return j()?e?"anchor".substr(0,6-e):"anchor":"user"}var Le=q(Z());var $p=e=>e!==null&&typeof e=="object",Kp=["{","}"],Rr=class{constructor(){this._caches=Object.create(null)}interpolate(t,i,o=Kp){if(!i)return[t];let n=this._caches[t];return n||(n=Jp(t,o),this._caches[t]=n),Zp(n,i)}},Yp=/^(?:\d)+/,qp=/^(?:\w)+/;function Jp(e,[t,i]){let o=[],n=0,r="";for(;n<e.length;){let a=e[n++];if(a===t){r&&o.push({type:"text",value:r}),r="";let c="";for(a=e[n++];a!==void 0&&a!==i;)c+=a,a=e[n++];let u=a===i,p=Yp.test(c)?"list":u&&qp.test(c)?"named":"unknown";o.push({value:c,type:p})}else r+=a}return r&&o.push({type:"text",value:r}),o}function Zp(e,t){let i=[],o=0,n=Array.isArray(t)?"list":$p(t)?"named":"unknown";if(n==="unknown")return i;for(;o<e.length;){let r=e[o];switch(r.type){case"text":i.push(r.value);break;case"list":i.push(t[parseInt(r.value,10)]);break;case"named":n==="named"&&i.push(t[r.value]);break}o++}return i}var Er="zh-Hans",ta="zh-Hant",yi="en",Xp="fr",Qp="es",eh=Object.prototype.hasOwnProperty,ia=(e,t)=>eh.call(e,t),th=new Rr;function ih(e,t){return!!t.find(i=>e.indexOf(i)!==-1)}function nh(e,t){return t.find(i=>e.indexOf(i)===0)}function na(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if(e=e.toLowerCase(),e==="chinese")return Er;if(e.indexOf("zh")===0)return e.indexOf("-hans")>-1?Er:e.indexOf("-hant")>-1||ih(e,["-tw","-hk","-mo","-cht"])?ta:Er;let i=[yi,Xp,Qp];t&&Object.keys(t).length>0&&(i=Object.keys(t));let o=nh(e,i);if(o)return o}var Nr=class{constructor({locale:t,fallbackLocale:i,messages:o,watcher:n,formater:r}){this.locale=yi,this.fallbackLocale=yi,this.message={},this.messages={},this.watchers=[],i&&(this.fallbackLocale=i),this.formater=r||th,this.messages=o||{},this.setLocale(t||yi),n&&this.watchLocale(n)}setLocale(t){let i=this.locale;this.locale=na(t,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],i!==this.locale&&this.watchers.forEach(o=>{o(this.locale,i)})}getLocale(){return this.locale}watchLocale(t){let i=this.watchers.push(t)-1;return()=>{this.watchers.splice(i,1)}}add(t,i,o=!0){let n=this.messages[t];n?o?Object.assign(n,i):Object.keys(i).forEach(r=>{ia(n,r)||(n[r]=i[r])}):this.messages[t]=i}f(t,i,o){return this.formater.interpolate(t,i,o).join("")}t(t,i,o){let n=this.message;return typeof i=="string"?(i=na(i,this.messages),i&&(n=this.messages[i])):o=i,ia(n,t)?this.formater.interpolate(n[t],o).join(""):(console.warn(`Cannot translate the value of keypath ${t}. Use the value of keypath as default.`),t)}};function rh(e,t){e.$watchLocale?e.$watchLocale(i=>{t.setLocale(i)}):e.$watch(()=>e.$locale,i=>{t.setLocale(i)})}function sh(){return typeof uni!="undefined"&&uni.getLocale?uni.getLocale():typeof global!="undefined"&&global.getLocale?global.getLocale():yi}function oh(e,t={},i,o){typeof e!="string"&&([e,t]=[t,e]),typeof e!="string"&&(e=sh()),typeof i!="string"&&(i=typeof __uniConfig!="undefined"&&__uniConfig.fallbackLocale||yi);let n=new Nr({locale:e,fallbackLocale:i,messages:t,watcher:o}),r=(a,c)=>{if(typeof getApp!="function")r=function(u,p){return n.t(u,p)};else{let u=!1;r=function(p,d){let _=getApp().$vm;return _&&(_.$locale,u||(u=!0,rh(_,n))),n.t(p,d)}}return r(a,c)};return{i18n:n,f(a,c,u){return n.f(a,c,u)},t(a,c){return r(a,c)},add(a,c,u=!0){return n.add(a,c,u)},watch(a){return n.watchLocale(a)},getLocale(){return n.getLocale()},setLocale(a){return n.setLocale(a)}}}var ah={"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"loading...","uni-load-more.contentnomore":"No more data"},lh={"uni-load-more.contentdown":"Pull up to show more","uni-load-more.contentrefresh":"Loading...","uni-load-more.contentnomore":"No more data"},ch={"uni-load-more.contentdown":"\u4E0A\u62C9\u986F\u793A\u66F4\u591A","uni-load-more.contentrefresh":"\u6B63\u5728\u52A0\u8F09...","uni-load-more.contentnomore":"\u6C92\u6709\u66F4\u591A\u6578\u64DA\u4E86"},uh={"uni-load-more.contentdown":"Tire hacia arriba para mostrar m\xE1s","uni-load-more.contentrefresh":"cargando...","uni-load-more.contentnomore":"No m\xE1s datos"},ph={"uni-load-more.contentdown":"\u0627\u0633\u062D\u0628 \u0644\u0623\u0639\u0644\u0649 \u0644\u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u0645\u0632\u064A\u062F","uni-load-more.contentrefresh":"\u062C\u0627\u0631 \u0627\u0644\u062A\u062D\u0645\u064A\u0644...","uni-load-more.contentnomore":"\u0644\u0627 \u0645\u0632\u064A\u062F \u0645\u0646 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"},hh={"uni-load-more.contentdown":"K\xE9o l\xEAn \u0111\u1EC3 hi\u1EC3n th\u1ECB th\xEAm","uni-load-more.contentrefresh":"\u0111ang t\u1EA3i...","uni-load-more.contentnomore":"Kh\xF4ng c\xF2n d\u1EEF li\u1EC7u"},mh={en:ah,"zh-Hans":lh,"zh-Hant":ch,es:uh,ar:ph,vi:hh},dh={"uni-load-more":{"":{flexDirection:"row",height:40,alignItems:"center",justifyContent:"center"}},"uni-load-more__text":{"":{fontSize:14,marginLeft:8}},"uni-load-more__img":{"":{width:24,height:24}},"uni-load-more__img--nvue":{"":{color:"#666666"}},"uni-load-more__img--android":{"":{width:24,height:24,transform:"rotate(0deg)"}},"uni-load-more__img--ios":{"":{width:24,height:24,transform:"rotate(0deg)"}}},ra;setTimeout(()=>{ra=uni.getSystemInfoSync().platform},16);var{t:Or}=oh(mh),fh={name:"UniLoadMore",emits:["clickLoadMore"],props:{status:{type:String,default:"more"},showIcon:{type:Boolean,default:!0},iconType:{type:String,default:"auto"},iconSize:{type:Number,default:24},color:{type:String,default:"#777777"},contentText:{type:Object,default(){return{contentdown:"",contentrefresh:"",contentnomore:""}}},showText:{type:Boolean,default:!1}},data(){return{webviewHide:!1,platform:ra,imgBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzlBMzU3OTlEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzlBMzU3OUFEOUM0MTFFOUI0NTZDNERBQURBQzI4RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDOUEzNTc5N0Q5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDOUEzNTc5OEQ5QzQxMUU5QjQ1NkM0REFBREFDMjhGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+ALSwAAA6CSURBVHja1FsLkFZVHb98LM+F5bHL8khA1iSeiyQBCRM+YGqKUnnJTDLGI0BGZlKDIU2MMglUiDApEZvSsZnQtBRJtKwQNKQMFYeRDR10WOLd8ljYXdh+v8v5fR3Od+797t1dnOnO/Ofce77z+J//+b/P+ZqtXbs2sJ9MJhNUV1cHJ06cCJo3bx7EPc2aNcvpy7pWrVoF+/fvDyoqKoI2bdoE9fX1F7TjN8a+EXBn/fkfvw942Tf+wYMHg9mzZwfjxo0LDhw4EPa1x2MbFw/fOGfPng1qa2tzcCkILsLDydq2bRsunpOTMM7TD/W/tZDZhPdeKD+yGxHhdu3aBV27dg3OnDlzMVANMheLAO3btw8KCwuDmpoaX5OxbgUIMEq7K8IcPnw4KCsrC/r37x8cP378/4cAXAB3vqSkJMuiDhTkw+XcuXNhOWbMmKBly5YhUT8xArhyFvP0BfwRsAuwxJZJsm/nzp2DTp06he/OU+cZ64K6o0ePBkOHDg2GDx8e6gEbJ5Q/NHNuAJQ1hgBeHUDlR7nVTkY8rQAvAi4z34vR/mPs1FoRsaCgIJThI0eOBC1atEiFGGV+5MiRoS45efJkqFjJFXV1dQuA012m2WcwTw98fy6CqBdsaiIO4CScrGPHjvk4odhavPquRtFWXEC25VgkREKOCh/qDSq+vn37htzD/mZTOmOc5U7zKzBPEedygWshcDyWvs30igAbU+6oyMgJBCFhwQE0fccxN60Ay9iebbjoDh06hMowjQxT4fXq1SskArmHZpkArvixp/kWzHdMeArExSJEaiXIjjRjRJ4DaAGWpibLzXN3Fm1vA5teBgh3j1Rv3bp1YgKwPdmf2p9zcyNYYgPKMfY0T5f5nNYdw158nJ8QawW4CLKwiOBSEgO/hok2eBydR+3dYH+PLxA5J8Vv0KBBwenTp0P2JWAx6+yFEBfs8lMY+y0SWMBNI9E4ThKi58VKTg3FQZS1RQF1cz27eC0QHMu+3E0SkUowjhVt5VdaWhp07949ZHv2Qd1EjDXM2cla1M0nl3GxAs3J9yREzyTdFVKVFOaE9qRA8GM0WebRuo9JGZKA7Mv2SeS/Z8+eoQ9BArMfFrLGo6jvxbhHbJZnKX2Rzz1O7QhJJ9Cs2ZMaWIyq/zhdeqPNfIoHd58clIQD+JSXl4dKlyIAuBdVXZwFVWKspSSoxE++h8x4k3uCnEhE4I5KwRiFWGOU0QWKiCYLbdoRMRKAu2kQ9vkfLU6dOhX06NEjlH+yMRZSinnuyWnYosVcji8CEA/6Cg2JF+IIUBqnGKUTCNwtwBN4f89RiK1R96DEgO2o0NDmtEdvVFdVVYV+P3UAPUEs6GFwV3PHmXkD4vh74iDFJysVI/MlaQhwKeBNTLYX5VuA8T4/gZxA4MRGFxDB6R7OmYPfyykGRJbyie+XnGYnQIC/coH9+vULiYrxrkL9ZA9+0ykaHIfEpM7ge8TiJ2CsHYwyMfafAF1yCGBHYIbCVDjDjKt7BeB51D+LgQa6OkG7IDYEEtvQ7lnXLKLtLdLuJBpE4gPUXcW2+PkZwOex+4cGDhwYDBkyRL7/HFcEwUGPo/8uWRUpYnfxGHco8HkewLHLyYmAawAPuIFZxhOpDfJQ8gbUv41yORAptMWBNr6oqMhWird5+u+iHmBb2nhjDV7HWBNQTgK8y11l5NetWzc5ULscAtSj7nbNI0skhWeUZCc0W4nyH/jO4Vz0u1IeYhbk4AiwM6tjxIWByHsoZ9qcIBPJd/y+DwPfBESOmCa/QF3WiZHucLlEDpNxcNhmheEOPgdQNx6/VZFQzFZ5TN08AHXQt2Ii3EdyFuUsPtTcGPhW5iMiCNELvz+Gdn9huG4HUJaW/w3g0wxV0XaG7arG2WeKiUWYM4Y7GO5ezshTARbbWGw/DvXkpp/ivVvE0JVoMxN4rpGzJMhE5Pl+xlATsDIqikP9F9D2z3h9nOksEUFhK+qO4rcPkoalMQ/HqJLIyb3F3JdjrCcw1yZ8joyJLR5gCo54etlag7qIoeNh1N1BRYj3DTFJ0elotxPlVzkGuYAmL0VSJVGAJA41c4Z6A3BzTLfn0HYwYKEI6CUAMzZEWvLsIcQOo1AmmyyM72nHJCfYsogflGV6jEk9vyQZXSuq6w4c16NsGcGZbwOPr+H1RkOk2LEzjNepxQkihHSCQ4ynAYNRx2zMKV92CQMWqj8J0BRE8EShxRFN6YrfCRhC0x3r/Zm4IbQCcmJoV0kMamllccR6FjHqUC5F2R/wS2dcymOlfAKOS4KmzQb5cpNC2MC7JhVn5wjXoJ44rYhLh8n0eXOCorJxa7POjbSlCGVczr34/RsAmrcvo9s+wGp3tzVhntxiXiJ4nvEYb4FJkf0O8HocAePmLvCxnL0AORraVekJk6TYjDabRVXfRE2lCN1h6ZQRN1+InUbsCpKwoBZHh0dODN9JBCUffItXxEavTQkUtnfTVAplCWL3JISz29h4NjotnuSsQKJCk8dF+kJR6RARjrqFVmfPnj3ZbK8cIJ0msd6jgHPGtfVTQ8VLmlvh4mct9sobRmPic0DyDQQnx/NlfYUgyz59+oScsH379pAwXABD32nTpoUHIToESeI5mnbE/UqDdyLcafEBf2MCqgC7NwxIbMREJQ0g4D4sfJwnD+AmRrII05cfMWJE+L1169bQr+fip06dGp4oJ83lmYd5wj/EmMa4TaHivo4EeCguYZBnkB5g2aWA69OIEnUHOaGysjIYMGBAMGnSpODYsWPZwCpFmm4lNq+4gSLQA7jcX8DwtjEyRC8wjabnXEx9kfWnTJkSJkAo90xpJVV+FmcVNeYAF5zWngS4C4O91MBxmAv8blLEpbjI5sz9MTdAhcgkCT1RO8mZkAjfiYpTEvStAS53Uw1vAiUGgZ3GpuQEYvoiBqlIan7kSDHnTwJQFNiPu0+5VxCVYhcZIjNrdXUDdp+Eq5AZ3Gkg8QAyVZRZIk4Tl4QAbF9cXJxNYZMAtAokgs4BrNxEpCtteXg7DDTMDKYNSuQdKsnJBek7HxewvxaosWxLYXtw+cJp18217wql4aKCfBNoEu0O5VU+PhctJ0YeXD4C6JQpyrlpSLTojpGGGN5YwNziChdIZLk4lvLcFJ9jMX3QdiImY9bmGQU+TRUL5CHITTRlgF8D9ouD1MfmLoEPl5xokIumZ2cfgMpHt47IW9N64Hsh7wQYYjyIugWuF5fCqYncXRd5vPMWyizzvhi/32+nvG0dZc9vR6fZOu0md5e+uC408FvKSIOZwXlGvxPv95izA2Vtvg1xKFWARI+vMX66HUhpQQb643uW1bSjuTWyw2SBvDrBvjFic1eGGlz5esq3ko9uSIlBRqPuFcCv8F4WIcN12nVaBd0SaYwI6PDDImR11JkqgHcPmQssjxIn6bUshygDFJUTxPMpHk+jfjPgupgdnYV2R/g7xSjtpah8RJBewhwf0gGK6XI92u4wXFEU40afJ4DN4h5LcAd+40HI3JgJecuT0c062W0i2hQJUTcxan3/CMW1PF2K6bbA+Daz4xRs1D3Br1Cm0OihKCqizW78/nXAF/G5TXrEcVzaNMH6CyMswqsAHqDyDLEyou8lwOXnKF8DjI6KjV3KzMBiXkDH8ij/H214J5A596ekrZ3F0zXlWeL7+P5eUrNo3/QwC15uxthuzidy7DzKRwEDaAViiDgKbTbz7CJnzo0bN7pIfIiid8SuPwn25o3QCmpnyjlZkyxPP8EomCJzrGb7GJMx7tNsq4MT2xMUYaiErZOluTzKsnz3gwCeCZyVRZJfYplNEokEjwrPtxlxjeYAk+F1F74VAzPxQRNYYdtpOUvWs8J1sGhBJMNsb7igN8plJs1eSmLIhLKE4rvaCX27gOhLpLOsIzJ7qn/i+wZzcvSOZ23/du8TZjwV8zHIXoP4R3ifBxiFz1dcVpa3aPntPE+c6TmIWE9EtcMmAcPdWAhYhAXxcLOQi9L1WhD1Sc8p1d2oL7XGiRKp8F4A2i8K/nfI+y/gsTDJ/YC/8+AD5Uh04KHiGl+cIFPnBDDrPMjwRGkLXyxO4VGbfQWnDH2v0bVWE3C9QOXlepbgjEfIJQI6XDG3z5ahD9cw2pS78ipB85wyScNTvsVzlzzhL8/jRrnmVjfFJK/m3m4nj9vbgQTguT8XZTjsm672R5uJKEaQmBI/c58gyus8ZDagLpEVSJBIyHp4jn++xqPV71OgQgJYEWOtZ/haxRtKmWOBu8xdBLftWltsY84zE6WIEy/eIOWL+BaayMx+KHtL7EAkqdNDLiEXmEMUHniedtJqg9HmZtfvt26vNi0BdG3Ft3g8ZOf7PAu59TxtzivLNIekyi+wD1i8CuUiD9FXAa8C+/xS3JPmZnomyc7H+fb4/Se0bk41Fel621r4cgVxbq91V4jVqwB7HTe2M7jgB+QWHavZkDRPmZcASoZEmBx6i75bGjPcMdL4/VKGFAGWZkGzPG0XAbdL9A81G5LOmUnC9hHKJeO7dcUMjblSl12867ElFTtaGl20xvvLGPdVz/8TVuU7y0x1PG7vtNg24oz9Uo/Z412++VFWI7Fcog9tu9Lm6gvRmIPv9x1xmQAu6RDkXtbOtlGEmpgD5Nvnyc0dcv0EE6cfdi1HmhMf9wDF3k3gtRvEedhxjpgfqPb9PU9iEJHnyOUA7bQUXh6kq/D7l2iTjWv7XOD530BDr8jIrus+srXjt4MzumJMHuTsBa63YKE1+RR5lBjEikCCnWKWiHdzOgKO+nRIBAF88za/IFmJ3eMZov4CYxGBabcpGL8EYx+SeMXJeRwHNsV/h+vdxeuhEpN3ZyNY78Gm2fknJxVGhyjixPiQvVkNzT1elD9Py/aTAL64Hb9vcYmC9zfdXdT/C1LeGbg4rnBaAihDFJH12W5ulfNCNe/xTsP3bp8ikzJs5BF+5PNfAQYAPaseTdsEcaYAAAAASUVORK5CYII="}},computed:{iconSnowWidth(){return(Math.floor(this.iconSize/24)||1)*2},contentdownText(){return this.contentText.contentdown||Or("uni-load-more.contentdown")},contentrefreshText(){return this.contentText.contentrefresh||Or("uni-load-more.contentrefresh")},contentnomoreText(){return this.contentText.contentnomore||Or("uni-load-more.contentnomore")}},mounted(){var e=getCurrentPages(),t=e[e.length-1],i=t.$getAppWebview();i.addEventListener("hide",()=>{this.webviewHide=!0}),i.addEventListener("show",()=>{this.webviewHide=!1})},methods:{onClick(){this.$emit("clickLoadMore",{detail:{status:this.status}})}}};function gh(e,t,i,o,n,r){return(0,Le.openBlock)(),(0,Le.createElementBlock)("view",{class:"uni-load-more",onClick:t[0]||(t[0]=(...a)=>r.onClick&&r.onClick(...a)),renderWhole:!0},[!n.webviewHide&&i.status==="loading"&&i.showIcon?((0,Le.openBlock)(),(0,Le.createElementBlock)("loading-indicator",{key:0,style:(0,Le.normalizeStyle)({color:i.color,width:i.iconSize+"px",height:i.iconSize+"px"}),animating:!0,class:"uni-load-more__img uni-load-more__img--nvue"},null,4)):(0,Le.createCommentVNode)("",!0),i.showText?((0,Le.openBlock)(),(0,Le.createElementBlock)("u-text",{key:1,class:"uni-load-more__text",style:(0,Le.normalizeStyle)({color:i.color})},(0,Le.toDisplayString)(i.status==="more"?r.contentdownText:i.status==="loading"?r.contentrefreshText:r.contentnomoreText),5)):(0,Le.createCommentVNode)("",!0)])}var Qe=S(fh,[["render",gh],["styles",[dh]]]);var K_=q(Z());function Br(e,t){let i=oa();return new Promise(o=>{let n=0;vt(`SELECT * FROM ${i} WHERE uid = ${e.uid} LIMIT 1`).then(r=>{if(r.length>0)if(t&&eo(r[0],e)){n=1;let a=`UPDATE ${i} SET nickname = '${Pt(e.nickname)}', avatar = '${e.avatar}', sex = ${V(e.sex)}, birthday = '${dt(e.birthday)}', is_vip = ${V(e.is_vip)}, is_auth = ${V(e.is_auth)}, level = ${V(e.level)}, country_code = '${dt(e.country_code)}', country_flag = '${dt(e.country_flag)}', language = '${dt(e.language)}', hide_vip = ${V(e.hide_vip)}, hide_level = ${V(e.hide_level)}, hide_profile = ${V(e.hide_profile)}, auth_status = ${V(e.auth_status)} WHERE uid = ${e.uid}`;St(a).then(()=>{o(n)},()=>{o(n)})}else o(n);else{n=2;let a=`INSERT INTO ${i} (uid, nickname, avatar, sex, birthday, is_vip, is_auth, level, country_code, country_flag, language, hide_vip, hide_level, hide_profile, auth_status) VALUES (${e.uid}, '${Pt(e.nickname)}', '${e.avatar}', ${V(e.sex)}, '${dt(e.birthday)}', ${V(e.is_vip)}, ${V(e.is_auth)}, ${V(e.level)}, '${dt(e.country_code)}', '${dt(e.country_flag)}', '${dt(e.language)}', ${V(e.hide_vip)}, ${V(e.hide_level)}, ${V(e.hide_profile)}, ${V(e.auth_status)})`;St(a).then(()=>{o(n)},()=>{o(n)})}},()=>{o(n)})})}function sa(e,t=!0){let i=oa();return new Promise(o=>{if(t&&(e=e.filter(a=>!g(a))),e.length<=0){o({});return}let n={},r=`SELECT * FROM ${i} WHERE uid IN (${e.join(",")}) LIMIT ${e.length}`;vt(r).then(a=>{for(let c=0,u=a.length;c<u;c++){let p=a[c];p&&(p.nickname=Zs(p.nickname),n[p.uid]=p)}o(n)})})}function oa(){return getApp().globalData.uid==2256587?"tb_user_1":"tb_user"}var Ft=q(Z());var _h={props:{text:{type:[String,Number],default:""},type:{type:String,default:"title"},useText:{type:[Number,Boolean],default:!1},colorVal:{type:String,default:""}},computed:{color(){return this.colorVal?this.colorVal:getApp().globalData.themeObj.color[this.type]}}};function yh(e,t,i,o,n,r){return(0,Ft.openBlock)(),(0,Ft.createElementBlock)("u-text",{style:(0,Ft.normalizeStyle)({color:r.color})},(0,Ft.toDisplayString)(i.text),5)}var aa=S(_h,[["render",yh]]);var Lt=q(Z());var wh={props:{type:{type:String,default:"bg2"}},computed:{bgColor(){return getApp().globalData.themeObj.color[this.type]}}};function bh(e,t,i,o,n,r){return(0,Lt.openBlock)(),(0,Lt.createElementBlock)("view",{style:(0,Lt.normalizeStyle)({background:r.bgColor}),renderWhole:!0},[(0,Lt.renderSlot)(e.$slots,"default")],4)}var la=S(wh,[["render",bh]]);function xh(e,t){return new Promise(i=>{Br(t,!0).then(()=>{let o=`SELECT * FROM tb_club_member WHERE club_id = ${e} AND uid = ${t.uid}`;vt(o).then(n=>{if(n[0]){let a=`UPDATE tb_club_member SET sex = ${V(t.sex)}, is_auth = ${V(t.is_auth)}, member_type = ${V(t.member_type)}, is_mute = ${V(t.is_mute)}, join_type = ${V(t.join_type)}, join_time = ${V(t.join_time)}, active_time = ${V(t.active_time)} WHERE club_id = ${e} AND uid = ${t.uid}`;St(a).then(()=>{i()})}else Ch(e,t).then(()=>{i()})},()=>{i()})})})}function Pr(e,t){return new Promise(i=>{let o=t.length,n=0;for(let r=0,a=t.length;r<a;r++){let c=t[r];c.uid&&xh(e,c).then(()=>{n+=1,n==o&&i()})}})}function Ch(e,t){let i=`INSERT INTO tb_club_member (club_id, uid, sex, is_auth, member_type, is_mute, join_type, join_time, active_time, remark) VALUES (${e}, ${V(t.uid)}, ${V(t.sex)}, ${V(t.is_auth)}, ${V(t.member_type)}, ${V(t.is_mute)}, ${V(t.join_type)}, ${V(t.join_time)}, ${V(t.active_time)}, '')`;return St(i)}function Ah(e,t,i){let o=[],n=[],r=[],a=[],c,u;return new Promise(p=>{let d;i==1?d=Th:d=function(){return new Promise(w=>{w()})},d(e,t).then(_=>{_&&(a=_.uidList,n=_.founderList,r=_.managerList);let w;return t==-1?w=`SELECT * FROM tb_club_member WHERE club_id = ${e} AND member_type = 1 ORDER BY active_time DESC`:w=`SELECT * FROM tb_club_member WHERE club_id = ${e} AND member_type = 1 AND is_auth = ${V(t)} ORDER BY active_time DESC`,vt(w)}).then(_=>{c=_,u=_.length;for(let w=0,D=u;w<D;w++){let b=_[w];a.push(b.uid)}return sa(a,!1)}).then(_=>{for(let w=0,D=u;w<D;w++){let b=c[w],F=_[b.uid];if(F){let T=Object.assign(b,F);o.push(T)}}if(i==1){for(let w=0,D=r.length;w<D;w++){let b=r[w],F=_[b.uid];if(F){let T=Object.assign(b,F);o.unshift(T)}}for(let w=0,D=n.length;w<D;w++){let b=n[w],F=_[b.uid];if(F){let T=Object.assign(b,F);o.unshift(T)}}}p({list:o})})})}function Th(e,t){let i=[],o=[],n=[];return new Promise(r=>{let a;t==-1?a="":a=` AND is_auth = ${V(t)} `,vt(`SELECT * FROM tb_club_member WHERE club_id = ${e} AND member_type > 1 ${a}`).then(c=>{for(let u=0,p=c.length;u<p;u++){let d=c[u];i.push(d.uid),d.member_type==2?o.push(d):n.push(d)}r({uidList:i,founderList:o,managerList:n})})})}function ca(e){return new Promise(t=>{let i=`DELETE FROM tb_club_member WHERE club_id = ${e}`;St(i).then(()=>{t()},()=>{t()})})}var Sh={wrap:{"":{boxShadow:"none"}}},vh={center:{"":{flexDirection:"row",alignItems:"center"}},"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"center-align":{"":{alignItems:"center",justifyContent:"center",flexDirection:"row"}},ellipsis:{"":{lines:1,overflow:"hidden",textOverflow:"ellipsis"}},"receivers-pop":{"":{width:"450rpx",borderRadius:"8rpx",backgroundColor:"rgba(0,0,0,0)"}},"choose-bar":{".receivers-pop ":{paddingTop:"18rpx",paddingRight:"10rpx",paddingBottom:"18rpx",paddingLeft:"10rpx"}},"choose-str":{".receivers-pop .choose-bar ":{fontSize:"22rpx",color:"#FF4477",lineHeight:"32rpx"}},"btn-wrap":{".receivers-pop .choose-bar ":{height:"40rpx",backgroundColor:"#000102",borderRadius:"4rpx",paddingTop:"2rpx",paddingRight:"2rpx",paddingBottom:"2rpx",paddingLeft:"2rpx",position:"relative"}},btn:{".receivers-pop .choose-bar .btn-wrap ":{fontSize:"18rpx",color:"#FFFFFF",height:"36rpx",lineHeight:"36rpx",textAlign:"center",width:"90rpx"}},"btn-active":{".receivers-pop .choose-bar .btn-wrap ":{backgroundColor:"#5A5A59",borderRadius:"4rpx"}},"btn-line":{".receivers-pop .choose-bar .btn-wrap ":{width:"2rpx",height:"20rpx",backgroundColor:"#666666",position:"absolute",top:"10rpx"}},"split-line":{".receivers-pop ":{height:"2rpx",opacity:.1,backgroundColor:"#FFFFFF"}},"member-list":{".receivers-pop ":{flex:1,paddingTop:0,paddingRight:"10rpx",paddingBottom:0,paddingLeft:"10rpx"}},"avatar-bg":{".receivers-pop .member-list ":{width:"32rpx",height:"32rpx",backgroundColor:"#716F6F",borderRadius:"4rpx"}},"member-item":{".receivers-pop .member-list ":{paddingTop:"10rpx",paddingRight:0,paddingBottom:"10rpx",paddingLeft:0}},nickname:{".receivers-pop .member-list .member-item ":{fontSize:"22rpx",color:"#FFFFFF",lineHeight:"32rpx"}},"loading-view":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center",marginTop:"10rpx",minHeight:"50rpx"}}},kh={emits:["onReceiversClose","onChangeSelectStr"],components:{UniLoadMore:Qe,LImg:v,CustomPopover:Gi},props:{size:{type:Object,default(){return{}}},clubId:{type:[Number,String],default:0}},data(){return{chooseIdx:-1,memberList:{},allList:{},boysList:{},girlsList:{},allPageTime:1,boysPageTime:1,girlsPageTime:1,selectUidList:[],selectNameList:[],selectStr:"",isSelectAll:!1,selectUserList:[],loadMore:"nomore",loadContent:{contentrefresh:" ",contentnomore:" "},showLoading:!1,openCount:0}},computed:{selectCount(){return this.selectUidList.length}},methods:{$str:h,clickReceivePop(e){e&&e.stopPropagation()},clickMember(e){if(e==-1)this.isSelectAll=!0,this.selectStr=h("allMembers"),this.selectUidList.length>0&&(this.parseList("all",!0),this.parseList("boys",!0),this.parseList("girls",!0)),this.selectUidList=[],this.selectNameList=[],this.selectUserList=[],this.$refs.receiversPop.close(),this.onClickOther();else{this.isSelectAll=!1;let t=this.getMemberKey(),i=this.memberList["u_"+e],o=this.selectUidList.indexOf(i.uid);o!=-1?(this.selectUidList.splice(o,1),this.selectNameList.splice(o,1),this.selectUserList.splice(o,1)):(this.selectUidList.push(i.uid),this.selectNameList.push(i.nickname),this.selectUserList.push(i)),this.selectNameList.length>0?this.selectStr=this.selectNameList.join("\u3001"):this.selectStr="",this.memberList=JSON.parse(JSON.stringify(this[t+"List"]))}this.$emit("onChangeSelectStr",this.selectStr)},clickChooseBtn(e,t,i){t&&this.chooseIdx==e||(this.memberList=JSON.parse(JSON.stringify({})),this.chooseIdx=e,this.$nextTick(()=>{let o=this.getMemberKey(),n=this.getIsAuth(),r=this[o+"List"];Object.keys(r).length>0?(this.showLoading=!0,this.parseList(o,!1,()=>{let a={club_id:this.clubId,page_time:0};n!=-1&&(a.is_auth=n),this.reqSyncMembers(a,o,!0),typeof i=="function"&&i()})):this.loadMembers(!0,n,()=>{typeof i=="function"&&i()})}))},chooseUserSet(e){let t=this.selectUidList.indexOf(e.uid);t!=-1&&this.selectUidList.splice(t,1),this.clickMember(e.uid)},getIsAuth(){return this.chooseIdx==0?-1:this.chooseIdx==1?0:1},getMemberKey(){return this.chooseIdx==0?"all":this.chooseIdx==1?"boys":"girls"},onClickOther(){let e={isSelectAll:this.isSelectAll,uidList:this.selectUidList,userList:this.selectUserList};this.$emit("onReceiversClose",e)},onLoadMore(){if(this.loadMore=="nomore")return;this.loadMore="loading";let e=this.getMemberKey(),t=this.getIsAuth(),i={club_id:this.clubId,page_time:this[e+"PageTime"]};t!=-1&&(i.is_auth=t),this.reqSyncMembers(i,e,!1)},handleMember(e){if(e.chat_id!=this.clubId||!e.send_uid||e.send_uid==O.SYSTEM_ID)return;let t=e.user_infos[e.send_uid];if(this.memberList["u_"+t.uid])return;let o=this.getIsAuth();o!=-1&&o!=t.is_auth||(this.memberList["u"+t.uid]=t)},handleSaveMember(){let e=Object.values(this.allList);Pr(this.clubId,e)},parseList(e,t=!1,i){let o=this[e+"List"];for(let n=0,r=this.selectUidList.length;n<r;n++){let a=this.selectUidList[n],c=o["u_"+a];c&&(c.selected=!t)}t||(this[e+"List"]=JSON.parse(JSON.stringify(o)),this.memberList=this[e+"List"]),typeof i=="function"&&i()},parseListNew(e,t,i,o=!1){i&&(this[e+"List"]={});for(let n=0,r=t.length;n<r;n++){let a=t[n];a.uid&&a.uid!=getApp().pubUser.uid&&(a.member_type==2?a.identityStr=h("owner"):a.member_type==3&&(a.identityStr=h("admin")),this.memberList["u_"+a.uid]=a,i&&(this[e+"List"]["u_"+a.uid]=a),o&&Br(a,!0))}},reqSyncMembers(e,t,i){k.request("/chat/club/sync-members",e,!1,!0).then(o=>{this.showLoading=!1,i&&(this.memberList=JSON.parse(JSON.stringify({})),this[t+"List"]=JSON.parse(JSON.stringify({}))),this[t+"PageTime"]=o.data.page_time,this.parseListNew(t,o.data.list,i,!0),this.loadMore=o.data.has_more?"loadmore":"nomore",this.getIsAuth()==-1&&i&&ca(this.clubId).then(()=>{Pr(this.clubId,o.data.list)})},()=>{this.showLoading=!1})},loadMembers(e,t,i){let o=this.getMemberKey();e?this[o+"Page"]=1:this[o+"Page"]++;let n=this[o+"Page"];this.showLoading=!0,Ah(this.clubId,t,n).then(r=>{this.parseListNew(o,r.list,!0,!1);let a={club_id:this.clubId,page_time:0};return t!=-1&&(a.is_auth=t),k.request("/chat/club/sync-members",a,!1,!0)}).then(r=>{this.showLoading=!1,this.memberList=JSON.parse(JSON.stringify({})),this[o+"PageTime"]=r.data.page_time,this.parseListNew(o,r.data.list,!0,!0),this.loadMore=r.data.has_more?"loadmore":"nomore",typeof i=="function"&&i(),t==-1&&e&&ca(this.clubId).then(()=>{Pr(this.clubId,r.data.list)})},()=>{this.showLoading=!1})},clear(){this.selectUidList=[],this.selectNameList=[],this.selectUserList=[],this.isSelectAll=!1,this.selectStr=""},open(e){this.openCount+=1,e&&this.clear(),this.$refs.receiversPop.open();let t=this.chooseIdx==-1?0:this.chooseIdx;this.clickChooseBtn(t,!1,()=>{e&&this.chooseUserSet(e)})}},created(){uni.$on("event_message_update_member",this.handleMember)},unmounted(){uni.$off("event_message_update_member",this.handleMember),this.openCount>1&&this.handleSaveMember()}};function Fh(e,t,i,o,n,r){let a=y((0,m.resolveDynamicComponent)("l-img"),v),c=y((0,m.resolveDynamicComponent)("uni-load-more"),Qe),u=y((0,m.resolveDynamicComponent)("custom-popover"),Gi);return(0,m.openBlock)(),(0,m.createBlock)(u,{ref:"receiversPop",size:i.size,"bg-color":"#424344","box-shadow":"",onOnClickOther:r.onClickOther,style:{"z-index":"1000"}},{default:(0,m.withCtx)(()=>[(0,m.createElementVNode)("view",{onClick:t[5]||(t[5]=(...p)=>r.clickReceivePop&&r.clickReceivePop(...p)),class:"receivers-pop",style:{height:"480rpx"}},[(0,m.createElementVNode)("view",{class:"choose-bar center-between"},[(0,m.createElementVNode)("u-text",{class:"choose-str"},(0,m.toDisplayString)(r.$str("selected"))+"("+(0,m.toDisplayString)(r.selectCount)+")",1),(0,m.createElementVNode)("view",{class:"center btn-wrap"},[(0,m.createElementVNode)("u-text",{onClick:t[0]||(t[0]=p=>r.clickChooseBtn(0,!0)),class:(0,m.normalizeClass)(["btn",[n.chooseIdx==0?"btn-active":""]])},(0,m.toDisplayString)(r.$str("all")),3),n.chooseIdx==2?((0,m.openBlock)(),(0,m.createElementBlock)("view",{key:0,class:"btn-line",style:{left:"90rpx"}})):(0,m.createCommentVNode)("",!0),(0,m.createElementVNode)("u-text",{onClick:t[1]||(t[1]=p=>r.clickChooseBtn(1,!0)),class:(0,m.normalizeClass)(["btn",[n.chooseIdx==1?"btn-active":""]])},(0,m.toDisplayString)(r.$str("boys")),3),n.chooseIdx==0?((0,m.openBlock)(),(0,m.createElementBlock)("view",{key:1,class:"btn-line",style:{right:"90rpx"}})):(0,m.createCommentVNode)("",!0),(0,m.createElementVNode)("u-text",{onClick:t[2]||(t[2]=p=>r.clickChooseBtn(2,!0)),class:(0,m.normalizeClass)(["btn",[n.chooseIdx==2?"btn-active":""]])},(0,m.toDisplayString)(r.$str("girls")),3)])]),(0,m.createElementVNode)("view",{class:"split-line"}),n.showLoading?((0,m.openBlock)(),(0,m.createElementBlock)("view",{key:0,class:"loading-view"},[(0,m.createElementVNode)("loading-indicator",{animating:!0,style:{color:"#FFFFFF",width:"30rpx",height:"30rpx"}})])):(0,m.createCommentVNode)("",!0),(0,m.createElementVNode)("list",{ref:"memberList",showScrollbar:!1,onLoadmore:t[4]||(t[4]=(...p)=>r.onLoadMore&&r.onLoadMore(...p)),class:"member-list"},[(0,m.createElementVNode)("cell",{style:{height:"10rpx",width:"10rpx"}}),n.chooseIdx==0?((0,m.openBlock)(),(0,m.createElementBlock)("cell",{key:0},[(0,m.createElementVNode)("view",{onClick:t[3]||(t[3]=p=>r.clickMember(-1)),class:"center-between member-item"},[(0,m.createElementVNode)("view",{class:"center"},[(0,m.createElementVNode)("view",{class:"center-align avatar-bg"},[(0,m.createVNode)(a,{src:"s/club/person_many_yellow.png",w:"16rpx",h:"18rpx"})]),(0,m.createElementVNode)("u-text",{class:"nickname",style:{"margin-left":"12rpx"}},(0,m.toDisplayString)(r.$str("allMembers")),1)]),(0,m.createVNode)(a,{src:n.isSelectAll?"s/msg/select_square_s.png":"s/msg/select_square_n.png",w:"20rpx",h:"20rpx"},null,8,["src"])])])):(0,m.createCommentVNode)("",!0),((0,m.openBlock)(!0),(0,m.createElementBlock)(m.Fragment,null,(0,m.renderList)(n.memberList,(p,d,_)=>((0,m.openBlock)(),(0,m.createElementBlock)("cell",{key:n.chooseIdx+"_"+p.uid},[(0,m.createElementVNode)("view",{onClick:w=>r.clickMember(p.uid),class:"center-between member-item"},[(0,m.createElementVNode)("view",{class:"center",style:{"padding-right":"20rpx"}},[(0,m.createVNode)(a,{src:p.avatar,w:"32rpx",h:"32rpx",radius:"4rpx"},null,8,["src"]),(0,m.createElementVNode)("view",{class:"center",style:{"margin-left":"12rpx"}},[(0,m.createElementVNode)("u-text",{class:"nickname ellipsis",style:{"max-width":"250rpx"}},(0,m.toDisplayString)(p.nickname),1),(0,m.createElementVNode)("u-text",{class:"nickname",style:{"margin-left":"6rpx","min-width":"max-content"}},(0,m.toDisplayString)(p.identityStr?"("+p.identityStr+")":""),1)])]),(0,m.createVNode)(a,{src:n.selectUidList.indexOf(p.uid)==-1?"s/msg/select_square_n.png":"s/msg/select_square_s.png",w:"20rpx",h:"20rpx"},null,8,["src"])],8,["onClick"])]))),128)),(0,m.createElementVNode)("cell",null,[n.loadMore!="nomore"?((0,m.openBlock)(),(0,m.createBlock)(c,{key:0,status:n.loadMore,contentText:n.loadContent,color:"#FFFFFF"},null,8,["status","contentText"])):(0,m.createCommentVNode)("",!0)]),(0,m.createElementVNode)("cell",{style:{height:"10rpx",width:"10rpx"}})],544)])]),_:1},8,["size","onOnClickOther"])}var Lh=S(kh,[["render",Fh],["styles",[Sh,vh]]]),Ih={center:{"":{display:"flex",alignItems:"center",flexDirection:"row"}},"center-between":{"":{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between"}},"center-align":{"":{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"center"}},"column-center":{"":{flexDirection:"column",alignItems:"center",justifyContent:"center"}},ellipsis:{"":{lines:1,overflow:"hidden",textOverflow:"ellipsis"}},"split-line":{"":{height:"2rpx",backgroundColor:"#EDEDED",transform:"scaleY(0.5)",transformOrigin:"50% 100%"}},"gift-sheet":{"":{borderTopLeftRadius:"20rpx",borderTopRightRadius:"20rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,backgroundColor:"#FFFFFF"}},"top-bar":{"":{position:"relative",borderTopLeftRadius:"20rpx",borderTopRightRadius:"20rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,backgroundImage:"linear-gradient(to right, #FF008B, #FF5954)"}},"new-packet":{".top-bar ":{height:"90rpx",paddingTop:0,paddingRight:"28rpx",paddingBottom:0,paddingLeft:"28rpx",zIndex:111}},tip:{".top-bar .new-packet ":{fontSize:"24rpx",color:"#FFDC0D",marginLeft:"10rpx"}},"look-over":{".top-bar .new-packet ":{backgroundColor:"#FFFFFF",height:"48rpx",borderRadius:"8rpx",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",color:"#FF4477",lineHeight:"48rpx",fontSize:"28rpx"}},"new-recharge-bg":{".top-bar ":{position:"absolute",top:0,left:0}},"gift-item":{"":{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"26rpx",zIndex:111,position:"relative",borderRadius:"24rpx",paddingBottom:"8rpx",boxSizing:"border-box"}},title:{".gift-item ":{fontSize:"24rpx",lineHeight:"34rpx",maxHeight:"34rpx",lines:1,overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"}},price:{".gift-item ":{fontSize:"20rpx",color:"#FFAA0D",marginRight:"4rpx",marginTop:"2rpx",textAlign:"center",lineHeight:"28rpx"}},"gift-num":{".gift-item ":{backgroundColor:"#FF4477",fontSize:"20rpx",color:"#FFFFFF",paddingTop:0,paddingRight:"8rpx",paddingBottom:0,paddingLeft:"8rpx",borderRadius:"18rpx",position:"absolute",right:0,bottom:0}},"balance-wrap":{"":{marginBottom:"-10rpx",paddingRight:"28rpx",height:"60rpx"}},"type-text":{".balance-wrap ":{fontSize:"24rpx",color:"#999999",lineHeight:"34rpx",marginLeft:"6rpx"}},"type-active":{".balance-wrap ":{fontWeight:"600",color:"#FF4477"}},balance:{".balance-wrap ":{fontSize:"24rpx",color:"#FFB000",fontWeight:"500",lineHeight:"34rpx",marginRight:"4rpx",marginTop:"2rpx"}},"recharge-text":{".balance-wrap ":{fontSize:"24rpx",lineHeight:"34rpx",color:"#FF743F",marginRight:"4rpx"}},"recharge-bottom":{"":{paddingTop:0,paddingRight:"28rpx",paddingBottom:0,paddingLeft:"28rpx"}},"choose-user":{".recharge-bottom ":{fontSize:"24rpx",color:"#FF4477",lineHeight:"34rpx"}},"send-wrap":{".recharge-bottom ":{borderRadius:"8rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#FF4477"}},"choose-count":{".recharge-bottom .send-wrap ":{paddingTop:0,paddingRight:"24rpx",paddingBottom:0,paddingLeft:"24rpx",lineHeight:"52rpx",height:"52rpx"}},count:{".recharge-bottom .send-wrap .choose-count ":{fontSize:"24rpx",marginRight:"6rpx"}},button:{".recharge-bottom .send-wrap ":{height:"56rpx",borderRadius:"4rpx",lineHeight:"56rpx",paddingTop:0,paddingRight:"32rpx",paddingBottom:0,paddingLeft:"32rpx",fontSize:"28rpx",color:"#FFFFFF",backgroundImage:"linear-gradient(to right, #FF00BD, #FF5954)"}},"count-pop":{"":{width:"100rpx",borderRadius:"8rpx",backgroundColor:"#000000",marginTop:"-10rpx"}},"count-text":{".count-pop ":{fontSize:"24rpx",color:"#FFFFFF",textAlign:"center",paddingTop:"16rpx",paddingRight:0,paddingBottom:"16rpx",paddingLeft:0}},"go-btn":{"":{marginTop:"20rpx",backgroundImage:"linear-gradient(to right, #FF00BD, #FF5954)",borderRadius:"8rpx",color:"#FFFFFF",lineHeight:"40rpx",paddingTop:"6rpx",paddingRight:"40rpx",paddingBottom:"6rpx",paddingLeft:"40rpx",fontSize:"28rpx"}},"view-title-action":{"":{height:"60rpx",paddingTop:0,paddingRight:"30rpx",paddingBottom:0,paddingLeft:"30rpx"}}},ua=le("dom"),Dh={components:{MView:la,MText:aa,ChooseReceiversPop:Lh,UniPopup:re,CustomPopover:Gi,LImg:v,UniIcons:J},emits:["onSendAskGift","onSendGift","onChange"],props:{fromType:{type:[String,Number],default:1},isAsk:{type:Boolean,default:!1},isGreeting:{type:Boolean,default:!1},roomId:{type:[String,Number],default:""},showSend:{type:Boolean,default:!0}},data(){return{prizeWheelShow:getApp().globalData.prizeWheelShow,actionId:0,accountInfo:getApp().pubAccount,giftList:{},giftBagList:{slide:[]},popShow:!1,paddingBottom:getApp().globalData.window.safeBottom+10,giftInfo:{},giftWidth:parseInt(getApp().globalData.window.width/4),screenW:getApp().globalData.window.width,myUser:getApp().pubUser,giftId:"",chooseCount:1,giftCountPopSize:{},countArr:[999,699,198,99,38,12,5,1],swipeCurrent:0,sheetHeight:0,openTimer:!1,receiverSize:{},uidList:[],selectStr:"",selectUserList:[],isSelectAll:!1,chooseUser:"",giftListType:1,bagCount:0,typeGift:Fe.GIFT,typeBag:Fe.BAG,isAuth:j()}},computed:{giftSwiperItemStyle(){let e={"flex-wrap":"wrap"};return e["flex-direction"]="row",e},showList(){return this.giftListType==Fe.GIFT?this.giftList:this.giftBagList},showIndicatorDots(){return this.giftListType==Fe.GIFT||this.showList.slide.length>1}},methods:{$str:h,clickThis(e){e&&e.stopPropagation()},clickGoBtn(){ie("/pagesPub/luck-draw/index"),this.$refs.giftPopup.close()},clickType(e,t){e&&e.stopPropagation(),this.giftListType=t,t==1&&this.parseGiftList(),this.parseDefChoose(),this.$nextTick(()=>{this.setSheetHeight()})},clickCount(e){this.chooseCount=e},clickGiftReceivers(){ua.getComponentRect(this.$refs.giftReceivers,e=>{e&&e.size&&(this.receiverSize=e.size,this.$refs.receiversPop.open(this.chooseUser),this.chooseUser&&(this.chooseUser=""))})},clickChooseCount(){var e=this;ua.getComponentRect(this.$refs.giftCount,t=>{t&&t.size&&(e.giftCountPopSize=t.size,e.$refs.giftCountPop.open())})},clickGift(e,t,i){e&&e.stopPropagation();let o=this.showList.slide;if(this.giftInfo=o[t].list[i],this.isAsk){this.$emit("onSendAskGift",this.giftInfo),this.$refs.giftPopup.close();return}this.giftId=this.giftInfo.gift_id;let n=this.getStorageKey();this.giftListType==Fe.GIFT?(N(n[0],this.swipeCurrent),N(n[1],this.giftInfo)):(N(n[2],this.swipeCurrent),N(n[3],this.giftInfo))},clickSend(){if(g(this.giftId)){Tt(this.$str("msg.giftPleaseChoose"));return}this.isAsk||(this.fromType==we.CALL||this.fromType==we.GAME?Vi("call_click",1):Vi("chat_click",1));let e=this.giftInfo;e.count=this.chooseCount;let t={gift_id:this.giftInfo.gift_id,to_uid:this.actionId,from_type:this.fromType,number:this.chooseCount};if(this.giftListType==Fe.BAG?(e.gift_source=1,t.gift_source=1):delete e.gift_source,this.fromType==we.CLUB){if(this.uidList.length>0){if(this.giftListType==Fe.GIFT){let i=this.uidList.length*this.chooseCount*this.giftInfo.price;if(!mt(i))return}else if(!this.checkGiftCount())return}else if(!this.checkGiftCount())return;e.club_id=this.actionId,!this.isSelectAll&&this.uidList.length<=0?(e.to_uid=-1,e.from_type=6):e.to_uid=this.isSelectAll?0:this.uidList,this.selectUserList.length>0&&(e.user_list=this.selectUserList),this.clearMemberPopData()}else if(!this.checkGiftCount())return;if(N("gift_list_type_"+getApp().globalData.uid,this.giftListType+""),[we.MSG,we.CALL,we.GAME,we.CLUB].indexOf(parseInt(this.fromType))!=-1){this.$emit("onSendGift",e),this.$refs.giftPopup.close();return}k.request("/chat/gift/send",t,!0).then(i=>{this.$emit("onSendGift",e),be(i.data.balance),i.data.from_bag&&Wi()})},clickRecharge(){Ze(0,1)},checkGiftCount(){if(this.giftListType!=Fe.BAG)return!0;let e=this.giftInfo.num;if((this.uidList.length>0?this.uidList.length:1)*this.chooseCount-e>0){let o=e>1?"gift.notEnoughGiftsTips":"gift.notEnoughGiftTips";return ye(h("tips"),h(o,{num:e}),"",h("gotIt")),!1}return!0},clearMemberPopData(){this.selectStr="",this.uidList=[],this.selectUserList=[],this.isSelectAll=!1,this.$refs.receiversPop.clear(),this.chooseUser&&(this.chooseUser="")},onSheetChange(e){e.height=this.sheetHeight,e.show?this.openTimer=setTimeout(()=>{clearTimeout(this.openTimer),this.$emit("onChange",e)},500):(clearTimeout(this.openTimer),this.$emit("onChange",e))},onSwipeChange(e){this.swipeCurrent=e.detail.current},onReceiversClose(e){this.uidList=e.uidList,this.isSelectAll=e.isSelectAll,this.selectUserList=e.userList},onChangeSelectStr(e){this.selectStr=e},setChooseUser(e){this.isSelectAll=!1,this.uidList=[e.uid],this.selectUserList=[e],this.selectStr=e.nickname,this.chooseUser=e},setSheetHeight(){let e=this.giftWidth*2;e+=uni.upx2px(20),e+=this.isAsk?0:uni.upx2px(100),e+=uni.upx2px(100),e+=this.paddingBottom,this.sheetHeight=e},getStorageKey(){let e=getApp().globalData.uid;return["gift_swipe_current_"+e,"gift_current_info_"+e,"gift_bag_swipe_current_"+e,"gift_bag_current_info_"+e]},parseGifts(e){let t=[],i=[];if(this.isGreeting){let o=getApp().globalData.config.max_ask_gift_price;for(let n=0,r=e.length;n<r;n++){let a=e[n];a.price>=o||i.push(a)}}else{let o=[];for(let n=0,r=e.length;n<r;n++){let a=e[n];g(a.title)||g(a.icon)||o.push(a)}i=o}for(let o=0,n=i.length;o<n;o+=8)t.push({list:i.slice(o,o+8)});return{slide:t}},parseDefInfo(){let e=R("gift_swipe_current");if(e){let i="gift_swipe_current_"+getApp().globalData.uid;N(i,e),de("gift_swipe_current")}let t=R("gift_current_info");if(t){let i="gift_current_info_"+getApp().globalData.uid;N(i,t),de("gift_current_info")}},parseGiftList(){Object.keys(this.giftList).length<=0&&Sn().then(e=>{this.giftList=this.parseGifts(e)})},parseDefChoose(){this.giftListType==Fe.GIFT&&this.parseDefInfo();let e=this.getStorageKey(),t=this.giftListType==Fe.GIFT?e[0]:e[2],i=R(t);this.swipeCurrent=i?Number(i):0;let o=this.giftListType==Fe.GIFT?e[1]:e[3],n=R(o);n&&(this.giftInfo=n,this.giftId=n.gift_id)},open(e,t){uni.hideKeyboard(),this.actionId=e,this.isAsk||this.isAuth?(this.giftId=0,this.giftListType=Fe.GIFT,this.parseGiftList(),this.setSheetHeight(),this.$nextTick(()=>{this.$refs.giftPopup.open()})):Zo().then(i=>{if(typeof t!="undefined")this.giftListType=t;else{let o=R("gift_list_type_"+getApp().globalData.uid);o?this.giftListType=Number(o):this.giftListType=i.count<=0?Fe.GIFT:Fe.BAG}this.bagCount=i.count,this.giftBagList=this.parseGifts(i.list),this.giftListType==Fe.GIFT&&this.parseGiftList(),this.parseDefChoose(),this.setSheetHeight(),this.$nextTick(()=>{this.$refs.giftPopup.open()})})}}};function Mh(e,t,i,o,n,r){let a=y((0,m.resolveDynamicComponent)("l-img"),v),c=y((0,m.resolveDynamicComponent)("uni-icons"),J),u=(0,m.resolveComponent)("swiper-item"),p=(0,m.resolveComponent)("m-text"),d=(0,m.resolveComponent)("swiper"),_=y((0,m.resolveDynamicComponent)("uni-popup"),re),w=y((0,m.resolveDynamicComponent)("custom-popover"),Gi),D=(0,m.resolveComponent)("choose-receivers-pop");return(0,m.openBlock)(),(0,m.createElementBlock)("view",{onClick:t[10]||(t[10]=(...b)=>r.clickThis&&r.clickThis(...b)),renderWhole:!0},[(0,m.createVNode)(_,{"safe-area":!1,onChange:r.onSheetChange,"border-radius":"20rpx",ref:"giftPopup",style:{"z-index":"999"},type:"bottom"},{default:(0,m.withCtx)(()=>[(0,m.createElementVNode)("view",{class:"gift-sheet",style:(0,m.normalizeStyle)({paddingBottom:n.paddingBottom+"px"})},[i.isAsk?(0,m.createCommentVNode)("",!0):((0,m.openBlock)(),(0,m.createElementBlock)("view",{key:0,class:"top-bar"},[(0,m.createVNode)(a,{src:"s/gift/icon/gift_new_recharge_bg_1.png",w:`${n.screenW}px`,h:"88rpx",radius:"20rpx 20rpx 0 0",style:{position:"absolute",left:"0",top:"0"}},null,8,["w"]),(0,m.createElementVNode)("view",{class:"new-packet center-between"},[(0,m.createElementVNode)("view",{class:"center"},[(0,m.createVNode)(a,{src:"s/pub/more_coins.png",w:"56rpx",h:"56rpx"}),(0,m.createElementVNode)("u-text",{class:"tip"},(0,m.toDisplayString)(r.$str("gift.sheetReceiveNewPacket")),1)]),(0,m.createElementVNode)("u-text",{onClick:t[0]||(t[0]=(...b)=>r.clickRecharge&&r.clickRecharge(...b)),class:"look-over"},(0,m.toDisplayString)(r.$str("check")),1)])])),(0,m.createElementVNode)("view",{class:"balance-wrap center-between"},[(0,m.createElementVNode)("view",{class:"center"},[(0,m.createElementVNode)("view",{onClick:t[2]||(t[2]=b=>r.clickType(b,1)),class:"center view-title-action"},[(0,m.createVNode)(a,{onClick:t[1]||(t[1]=b=>r.clickType(b,1)),src:`s/pub/gift_home_${n.giftListType==n.typeGift?"s":"n"}.png`,w:"32rpx",h:"32rpx"},null,8,["src"]),(0,m.createElementVNode)("u-text",{class:(0,m.normalizeClass)(["type-text",[n.giftListType==n.typeGift?"type-active":""]])},(0,m.toDisplayString)(r.$str("gift")),3)]),!i.isAsk&&!n.isAuth?((0,m.openBlock)(),(0,m.createElementBlock)("view",{key:0,onClick:t[4]||(t[4]=b=>r.clickType(b,2)),class:"center view-title-action"},[(0,m.createVNode)(a,{onClick:t[3]||(t[3]=b=>r.clickType(b,2)),src:`s/pub/gift_bag_${n.giftListType==n.typeBag?"s":"n"}.png`,w:"32rpx",h:"32rpx"},null,8,["src"]),(0,m.createElementVNode)("u-text",{class:(0,m.normalizeClass)(["type-text",[n.giftListType==n.typeBag?"type-active":""]])},(0,m.toDisplayString)(n.bagCount>0?r.$str("bagNum",{num:n.bagCount}):r.$str("bag")),3)])):(0,m.createCommentVNode)("",!0)]),(0,m.createElementVNode)("view",{class:"center"},[(0,m.createElementVNode)("view",{class:"center",style:{"margin-right":"44rpx"}},[(0,m.createElementVNode)("u-text",{class:"balance"},(0,m.toDisplayString)(Number(n.accountInfo.money)),1),(0,m.createVNode)(a,{src:"s/my/i_coins.png",w:"24rpx",h:"24rpx"})]),(0,m.createElementVNode)("view",{onClick:t[5]||(t[5]=(...b)=>r.clickRecharge&&r.clickRecharge(...b)),class:"center"},[(0,m.createElementVNode)("u-text",{class:"recharge-text"},(0,m.toDisplayString)(r.$str("topUp")),1),(0,m.createVNode)(c,{type:"right",size:"12px",color:"#FF743F"})])])]),(0,m.createVNode)(d,{"indicator-dots":r.showIndicatorDots,"indicator-active-color":"#F70AB8","indicator-color":"rgba(255, 3, 187, .3)",onChange:r.onSwipeChange,current:n.swipeCurrent,style:{height:"480rpx"}},{default:(0,m.withCtx)(()=>[((0,m.openBlock)(!0),(0,m.createElementBlock)(m.Fragment,null,(0,m.renderList)(r.showList.slide,(b,F)=>((0,m.openBlock)(),(0,m.createBlock)(u,{key:F,style:(0,m.normalizeStyle)(r.giftSwiperItemStyle)},{default:(0,m.withCtx)(()=>[((0,m.openBlock)(!0),(0,m.createElementBlock)(m.Fragment,null,(0,m.renderList)(b.list,(T,G)=>((0,m.openBlock)(),(0,m.createElementBlock)("view",{key:G,style:(0,m.normalizeStyle)([{position:"relative"},{height:`${n.giftWidth+12}px`}])},[(0,m.createElementVNode)("view",{onClick:ee=>r.clickGift(ee,F,G),class:"gift-item",style:(0,m.normalizeStyle)({width:`${n.giftWidth}px`,border:`1px solid ${n.giftId==T.gift_id?"#FF4477":"#FFFFFF"}`})},[(0,m.createElementVNode)("view",{style:{"margin-top":"4px",position:"relative",padding:"0 20rpx"}},[(0,m.createVNode)(a,{onClick:ee=>r.clickGift(ee,F,G),src:T.icon,"use-cache":!0,w:"100rpx",h:"100rpx"},null,8,["onClick","src"]),n.giftListType==n.typeBag?((0,m.openBlock)(),(0,m.createElementBlock)("u-text",{key:0,class:"gift-num"},"x"+(0,m.toDisplayString)(T.num),1)):(0,m.createCommentVNode)("",!0)]),(0,m.createElementVNode)("u-text",{class:"title",style:(0,m.normalizeStyle)({width:`${n.giftWidth-16}px`})},(0,m.toDisplayString)(T.title),5),(0,m.createElementVNode)("view",{class:"center"},[(0,m.createElementVNode)("u-text",{class:"price"},(0,m.toDisplayString)(T.price),1),(0,m.createVNode)(a,{src:"s/my/i_coins.png",w:"18rpx",h:"18rpx",style:{"margin-top":"2rpx"}})])],12,["onClick"])],4))),128))]),_:2},1032,["style"]))),128)),n.giftListType==n.typeBag&&n.bagCount<=0?((0,m.openBlock)(),(0,m.createBlock)(u,{key:0,style:(0,m.normalizeStyle)(r.giftSwiperItemStyle)},{default:(0,m.withCtx)(()=>[(0,m.createElementVNode)("view",{class:"column-center",style:{flex:"1"}},[(0,m.createVNode)(a,{src:"s/pub/empty_gift_1.png",w:"192rpx",h:"168rpx"}),n.prizeWheelShow?((0,m.openBlock)(),(0,m.createBlock)(p,{key:0,type:"desc",text:r.$str("gift.getByPrizeWheelTips"),style:{"margin-top":"20rpx","font-size":"24rpx"}},null,8,["text"])):(0,m.createCommentVNode)("",!0),n.prizeWheelShow?((0,m.openBlock)(),(0,m.createElementBlock)("u-text",{key:1,onClick:t[6]||(t[6]=(...b)=>r.clickGoBtn&&r.clickGoBtn(...b)),class:"go-btn"},(0,m.toDisplayString)(r.$str("go")),1)):(0,m.createCommentVNode)("",!0)])]),_:1},8,["style"])):(0,m.createCommentVNode)("",!0)]),_:1},8,["indicator-dots","onChange","current"]),i.showSend?((0,m.openBlock)(),(0,m.createElementBlock)("view",{key:1,class:"recharge-bottom center-between"},[i.fromType==5?((0,m.openBlock)(),(0,m.createElementBlock)("view",{key:0,ref:"giftReceivers",onClick:t[7]||(t[7]=(...b)=>r.clickGiftReceivers&&r.clickGiftReceivers(...b)),class:"center"},[n.selectStr?((0,m.openBlock)(),(0,m.createElementBlock)("u-text",{key:0,class:"choose-user ellipsis",style:{"max-width":"400rpx"}},(0,m.toDisplayString)(r.$str("sendTo"))+":\xA0"+(0,m.toDisplayString)(n.selectStr),1)):((0,m.openBlock)(),(0,m.createElementBlock)("u-text",{key:1,class:"choose-user"},(0,m.toDisplayString)(r.$str("gift.sheetChooseReceivers")),1)),(0,m.createVNode)(c,{type:"right",size:"20rpx",color:"#FF4477",style:{"margin-top":"-2rpx"}})],512)):((0,m.openBlock)(),(0,m.createElementBlock)("view",{key:1})),i.isAsk?(0,m.createCommentVNode)("",!0):((0,m.openBlock)(),(0,m.createElementBlock)("view",{key:2,class:"send-wrap center"},[(0,m.createElementVNode)("view",{onClick:t[8]||(t[8]=(...b)=>r.clickChooseCount&&r.clickChooseCount(...b)),ref:"giftCount",class:"choose-count center-align"},[(0,m.createElementVNode)("u-text",{class:"count"},(0,m.toDisplayString)(n.chooseCount),1),(0,m.createVNode)(c,{color:"#000000",size:"12px",style:{"margin-top":"-2rpx"},type:"top"})],512),(0,m.createElementVNode)("u-text",{onClick:t[9]||(t[9]=(...b)=>r.clickSend&&r.clickSend(...b)),class:"button"},(0,m.toDisplayString)(r.$str("give")),1)]))])):(0,m.createCommentVNode)("",!0)],4)]),_:1},8,["onChange"]),(0,m.createVNode)(w,{ref:"giftCountPop",size:n.giftCountPopSize,"bg-color":"black",style:{"z-index":"1000"}},{default:(0,m.withCtx)(()=>[(0,m.createElementVNode)("view",{class:"count-pop"},[((0,m.openBlock)(!0),(0,m.createElementBlock)(m.Fragment,null,(0,m.renderList)(n.countArr,(b,F)=>((0,m.openBlock)(),(0,m.createElementBlock)("u-text",{onClick:T=>r.clickCount(b),key:"c"+F,class:"count-text"},(0,m.toDisplayString)(b),9,["onClick"]))),128))])]),_:1},8,["size"]),i.fromType==5?((0,m.openBlock)(),(0,m.createBlock)(D,{key:0,ref:"receiversPop","club-id":n.actionId,size:n.receiverSize,onOnChangeSelectStr:r.onChangeSelectStr,onOnReceiversClose:r.onReceiversClose},null,8,["club-id","size","onOnChangeSelectStr","onOnReceiversClose"])):(0,m.createCommentVNode)("",!0)])}var pa=S(Dh,[["render",Mh],["styles",[Ih]]]);var Eh="call",Oh="recharge";var zi={FROM_TYPE:{WAKE_UP:"wake_up",NO_SUPPORT_V5:"no_support_v5"},request(e,t){ha(Oh,e,t)}},$i={FROM_TYPE:{ON_ERROR:"on_error",AUDIO_INIT:"audio_init",AUDIO_TO_TEXT:"audio_to_text",MATCH_SUCCESS_TIME:"match_success_time"},request(e,t){ha(Eh,e,t)}};function ha(e,t,i){let o={flag:e,from_type:t,content:Rh(i)};k.request("/monitor/index",o)}function Rh(e){let t;return g(e)?t="null":typeof e=="object"?t=JSON.stringify(e):t=e,t}var jt,Fn,ji;switch(plus.runtime.appid){case oe.CANDY_CHAT_A:jt="c3v53rma3da8",Fn="14b1rm",ji="82lpuw";break;case oe.CANDY_CHAT_I:jt="sgpo44z99tds",Fn="ckncxr",ji="dnpqdb";break;case oe.HOT_FACE_A:jt="1fzidbmjjf40",Fn="ejyw5x",ji="2bnaab";break;case oe.CHAT_NOW_A:jt="1bz8365i4bj4",Fn="mo48fo",ji="8p83hy";break;case oe.DEV:jt=O.isAndroid?"ejvzj0f8c4qo":"k3t90chs58u8";break}var Hr;jt&&(Hr=le("HWUniNativePlugin-AdjustModule"));function ma(e){typeof e=="number"&&(e=e+""),Nh(ji,e)}function Nh(e,t,i,o,n,r){if(!Bh()||g(e))return;let a={token:e};g(t)||(a.money=t),g(i)||(a.orderId=i),g(o)||(a.partnerParams=o),g(n)||(a.callbackParams=n),g(r)||(a.callbackId=r),Hr.event(a,c=>{Ph(`event ${e}`,c)})}function Bh(){return!g(jt)&&Hr}function Ph(e,t){C("error","at comExtend/adjust.js:150",`Adjust ${e}`,t)}var da="g_language_1",fa="report_label_res";function _a(){return new Promise(e=>{let t=R(da);g(t)||getApp().globalData.languageVersion>parseInt(t.version)?k.request("/other/language-list",{}).then(i=>{let o={version:i.data.version,list:i.data.list};N(da,o),e(o)}):e(t)})}function ya(){return new Promise(e=>{let t=R(fa),i=ai();if(g(t)||g(t.res[i])||getApp().globalData.reportLabelVersion>parseInt(t.version))k.request("/report/reason",{}).then(o=>{let n=o.data.report_type,r=Je(JSON.stringify(t));g(r)&&(r={}),g(r.res)&&(r.res={}),r.res[i]=n;let a={version:o.data.version,res:r.res};N(fa,a);let c=ga(n);e(c)});else{let o=ga(t.res[i]);e(o)}})}function ga(e){return j()?e.filter(t=>t.identity!=1):e.filter(t=>t.identity!=2)}var E=q(Z());var et=q(Z()),Hh={"fj-slider":{"":{position:"relative"}},"fj-touch-right":{"":{position:"absolute"}},"fj-line":{"":{position:"absolute",left:0,right:0}}},Uh=le("dom"),Gh={name:"CustomSlider",emits:["onChanged","onChangeStart","onChange"],props:{fillValue:{type:Number,default:100},maxValue:{type:Number,default:0},step:{type:Number,default:1},activeColor:{type:String,default:"#2F85FC"},inactiveColor:{type:String,default:"#999999"},blockWidth:{type:Number,default:24},lineHeight:{type:Number,default:8},lineRadius:{type:Number,default:4},blockColor:{type:String,default:"#FFFFFF"},disClick:{type:Boolean,default:!1}},data(){return{lineWidth:0,maxLeft:0,lineLeft:0,curValue:0,sMaxValue:0,sFillValue:0,percentage:0,sBlockWidth:uni.upx2px(this.blockWidth),sLineHeight:uni.upx2px(this.lineHeight),sLineTop:(uni.upx2px(this.blockWidth)-uni.upx2px(this.lineHeight))/2,sLineRadius:uni.upx2px(this.lineRadius),getRectInterval:!1}},watch:{maxValue(e,t){this.sMaxValue=e,this.maxLeft=this.sMaxValue/this.percentage,this.checkMaxLeft()},fillValue(e,t){this.sFillValue=this.fillValue}},methods:{clickLine(e){e.stopPropagation(),!this.disClick&&this.touchmove(e,!0)},envir(e){this.getRectInterval=setTimeout(()=>{Uh.getComponentRect(e.refName,t=>{if(clearTimeout(this.getRectInterval),this.getRectInterval=!1,t&&t.size&&t.size.height!=0){let i=t.size;e.fn({width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right})}else this.envir(e)})},100)},touchstart(e){this.$emit("onChangeStart",this.curValue)},touchmove(e,t){e.stopPropagation();let i;if(t?i=e.changedTouches[0].screenX-this.lineLeft:i=e.touches[0].screenX-this.lineLeft,i<0||i>this.lineWidth)return;let o=Math.ceil(i);o>this.lineWidth&&(o=this.lineWidth),this.curValue=Math.round(o*this.percentage),this.maxLeft=Math.ceil(i),this.checkMaxLeft(),this.$emit("onChange",this.curValue)},touchend(e){if(this.step===1)this.sMaxValue=this.curValue;else{let t=Math.round(this.maxLeft*this.percentage/this.step);this.sMaxValue=t*this.step,this.sFillValue-this.sMaxValue<this.step&&(this.sMaxValue=this.sFillValue),this.maxLeft=this.sMaxValue/this.percentage}C("info","at components/custom-slider/custom-slider.vue:179","m-slider onChanged "+this.curValue),this.$emit("onChanged",this.curValue)},checkMaxLeft(){this.maxLeft>this.lineWidth-this.sBlockWidth?this.maxLeft=this.lineWidth-this.sBlockWidth:this.maxLeft<=4&&(this.maxLeft=0)}},mounted(){this.$nextTick(()=>{this.envir({className:".fj-line",refName:this.$refs["fj-line"],fn:e=>{this.lineWidth=e.width,this.lineLeft=e.left,this.sMaxValue=this.maxValue>0?this.maxValue:0,this.sFillValue=this.fillValue>0?this.fillValue:0,this.percentage=this.sFillValue/this.lineWidth,this.maxLeft=this.sMaxValue/this.percentage}})})},unmounted(){this.getRectInterval&&clearTimeout(this.getRectInterval)}};function Wh(e,t,i,o,n,r){return(0,et.openBlock)(),(0,et.createElementBlock)("view",{class:"fj-slider",onTouchend:t[3]||(t[3]=(...a)=>r.clickLine&&r.clickLine(...a)),renderWhole:!0},[(0,et.createElementVNode)("view",{class:"fj-line",ref:"fj-line",style:(0,et.normalizeStyle)({background:i.inactiveColor,height:`${n.sLineHeight}px`,top:`${n.sLineTop}px`,borderRadius:`${n.sLineRadius}px`})},null,4),(0,et.createElementVNode)("view",{class:"fj-line",style:(0,et.normalizeStyle)({width:`${Math.abs(n.maxLeft)}px`,background:i.activeColor,height:`${n.sLineHeight}px`,top:`${n.sLineTop}px`,borderTopLeftRadius:`${n.sLineRadius}px`,borderBottomLeftRadius:`${n.sLineRadius}px`})},null,4),(0,et.createElementVNode)("view",{class:"fj-touch-right",onTouchstart:t[0]||(t[0]=(...a)=>r.touchstart&&r.touchstart(...a)),onTouchmove:t[1]||(t[1]=(...a)=>r.touchmove&&r.touchmove(...a)),onTouchend:t[2]||(t[2]=(...a)=>r.touchend&&r.touchend(...a)),style:(0,et.normalizeStyle)({left:`${n.maxLeft}px`,background:i.blockColor,width:`${n.sBlockWidth}px`,height:`${n.sBlockWidth}px`,borderRadius:`${n.sBlockWidth/2}px`})},null,36)],32)}var Ur=S(Gh,[["render",Wh],["styles",[Hh]]]);var En=class{constructor(t){t&&(this.width=t.width,this.height=t.height)}},On=class{constructor(t){t&&(this.dimensions=t.dimensions,this.frameRate=t.frameRate,this.minFrameRate=t.minFrameRate,this.bitrate=t.bitrate,this.minBitrate=t.minBitrate,this.orientationMode=t.orientationMode,this.degradationPrefer=t.degradationPrefer,this.mirrorMode=t.mirrorMode)}},Yi=class{constructor(t){t&&(this.lighteningContrastLevel=t.lighteningContrastLevel,this.lighteningLevel=t.lighteningLevel,this.smoothnessLevel=t.smoothnessLevel,this.rednessLevel=t.rednessLevel,this.sharpnessLevel=t.sharpnessLevel)}},Ki=class{constructor(t,i){this.appId=t,i&&(this.areaCode=i.areaCode,this.logConfig=i.logConfig)}},wa=le("Agora-RTC-ChannelModule"),Ln="io.agora.rtc.",In=le("globalEvent"),zt=new Map,qi=class{constructor(t){this._listeners=new Map,this.channelId=t}_callMethod(t,i){return new Promise((o,n)=>{wa.callMethod({method:t,args:Rt({channelId:this.channelId},i)},r=>{r&&r.code?n(r):o(r)})})}static create(t){return $(this,null,function*(){return zt.get(t)||(yield new Promise((i,o)=>{wa.callMethod({method:"create",args:{channelId:t}},n=>{n&&n.code?o(n):i(n)})}),zt.set(t,new qi(t))),zt.get(t)})}static destroyAll(){zt.forEach(t=>$(this,null,function*(){t.removeAllListeners(),yield t._callMethod("destroy")})),zt.clear()}destroy(){return this.removeAllListeners(),zt.delete(this.channelId),this._callMethod("destroy")}addListener(t,i){let o=r=>{let{channelId:a,data:c}=r;a===this.channelId&&i(...c)},n=this._listeners.get(t);return n===void 0&&(n=new Map,this._listeners.set(t,n)),In.addEventListener(Ln+t,o),n.set(i,o),{remove:()=>{this.removeListener(t,i)}}}removeListener(t,i){let o=this._listeners.get(t);o!==void 0&&(In.removeEventListener(Ln+t,o.get(i)),o.delete(i))}removeAllListeners(t){if(t===void 0){this._listeners.forEach((i,o)=>{In.removeAllEventListeners(Ln+o)}),this._listeners.clear();return}In.removeAllEventListeners(Ln+t),this._listeners.delete(t)}setClientRole(t,i){return this._callMethod("setClientRole",{role:t,options:i})}joinChannel(t,i,o,n){return this._callMethod("joinChannel",{token:t,optionalInfo:i,optionalUid:o,options:n})}joinChannelWithUserAccount(t,i,o){return this._callMethod("joinChannelWithUserAccount",{token:t,userAccount:i,options:o})}leaveChannel(){return this._callMethod("leaveChannel")}renewToken(t){return this._callMethod("renewToken",{token:t})}getConnectionState(){return this._callMethod("getConnectionState")}publish(){return this._callMethod("publish")}unpublish(){return this._callMethod("unpublish")}getCallId(){return this._callMethod("getCallId")}adjustUserPlaybackSignalVolume(t,i){return this._callMethod("adjustUserPlaybackSignalVolume",{uid:t,volume:i})}muteRemoteAudioStream(t,i){return this._callMethod("muteRemoteAudioStream",{uid:t,muted:i})}muteAllRemoteAudioStreams(t){return this._callMethod("muteAllRemoteAudioStreams",{muted:t})}setDefaultMuteAllRemoteAudioStreams(t){return this._callMethod("setDefaultMuteAllRemoteAudioStreams",{muted:t})}muteAllRemoteVideoStreams(t){return this._callMethod("muteAllRemoteVideoStreams",{muted:t})}muteRemoteVideoStream(t,i){return this._callMethod("muteRemoteVideoStream",{uid:t,muted:i})}setDefaultMuteAllRemoteVideoStreams(t){return this._callMethod("setDefaultMuteAllRemoteVideoStreams",{muted:t})}enableRemoteSuperResolution(t,i){return this._callMethod("enableRemoteSuperResolution",{uid:t,enabled:i})}setRemoteVoicePosition(t,i,o){return this._callMethod("setRemoteVoicePosition",{uid:t,pan:i,gain:o})}addPublishStreamUrl(t,i){return this._callMethod("addPublishStreamUrl",{url:t,transcodingEnabled:i})}removePublishStreamUrl(t){return this._callMethod("removePublishStreamUrl",{url:t})}setLiveTranscoding(t){return this._callMethod("setLiveTranscoding",{transcoding:t})}startChannelMediaRelay(t){return this._callMethod("startChannelMediaRelay",{channelMediaRelayConfiguration:t})}stopChannelMediaRelay(){return this._callMethod("stopChannelMediaRelay")}updateChannelMediaRelay(t){return this._callMethod("updateChannelMediaRelay",{channelMediaRelayConfiguration:t})}setRemoteDefaultVideoStreamType(t){return this._callMethod("setRemoteDefaultVideoStreamType",{streamType:t})}setRemoteVideoStreamType(t,i){return this._callMethod("setRemoteVideoStreamType",{uid:t,streamType:i})}setRemoteUserPriority(t,i){return this._callMethod("setRemoteUserPriority",{uid:t,userPriority:i})}registerMediaMetadataObserver(){return this._callMethod("registerMediaMetadataObserver")}sendMetadata(t){return this._callMethod("sendMetadata",{metadata:t})}setMaxMetadataSize(t){return this._callMethod("setMaxMetadataSize",{size:t})}unregisterMediaMetadataObserver(){return this._callMethod("unregisterMediaMetadataObserver")}enableEncryption(t,i){return this._callMethod("enableEncryption",{enabled:t,config:i})}setEncryptionMode(t){return this._callMethod("setEncryptionMode",{encryptionMode:t})}setEncryptionSecret(t){return this._callMethod("setEncryptionSecret",{secret:t})}addInjectStreamUrl(t,i){return this._callMethod("addInjectStreamUrl",{url:t,config:i})}removeInjectStreamUrl(t){return this._callMethod("removeInjectStreamUrl",{url:t})}createDataStream(t,i){return this._callMethod("createDataStream",{reliable:t,ordered:i})}createDataStreamWithConfig(t){return this._callMethod("createDataStream",{config:t})}sendStreamMessage(t,i){return this._callMethod("sendStreamMessage",{streamId:t,message:i})}muteLocalAudioStream(t){return this._callMethod("muteLocalAudioStream",{muted:t})}muteLocalVideoStream(t){return this._callMethod("muteLocalVideoStream",{muted:t})}pauseAllChannelMediaRelay(){return this._callMethod("pauseAllChannelMediaRelay")}resumeAllChannelMediaRelay(){return this._callMethod("resumeAllChannelMediaRelay")}setAVSyncSource(t,i){return this._callMethod("setAVSyncSource",{channelId:t,uid:i})}startRtmpStreamWithTranscoding(t,i){return this._callMethod("startRtmpStreamWithTranscoding",{url:t,transcoding:i})}startRtmpStreamWithoutTranscoding(t){return this._callMethod("startRtmpStreamWithoutTranscoding",{url:t})}stopRtmpStream(t){return this._callMethod("stopRtmpStream",{url:t})}updateRtmpTranscoding(t){return this._callMethod("updateRtmpTranscoding",{transcoding:t})}},Vh=le("Agora-RTC-EngineModule"),Dn="io.agora.rtc.",Mn=le("globalEvent"),ot,f=class{constructor(){this._listeners=new Map}static _callMethod(t,i){return new Promise((o,n)=>{Vh.callMethod({method:t,args:i},r=>{r&&r.code?n(r):o(r)})})}static instance(){if(ot)return ot;throw new Error("please create RtcEngine first")}static getSdkVersion(){return $(this,null,function*(){return f._callMethod("getSdkVersion")})}static getErrorDescription(t){return $(this,null,function*(){return f._callMethod("getErrorDescription",{error:t})})}static create(t){return $(this,null,function*(){return f.createWithContext(new Ki(t))})}static createWithAreaCode(t,i){return $(this,null,function*(){return f.createWithContext(new Ki(t,{areaCode:[i]}))})}static createByExtension(t,i){return $(this,null,function*(){return f.createWithExtension(new Ki(t),i)})}static createWithConfig(t){return $(this,null,function*(){return this.createWithContext(t)})}static createWithContext(t){return $(this,null,function*(){if(ot)return ot;let i;if(t.areaCode){let o=0;t.areaCode.forEach(n=>{o|=n}),i=o}return yield f._callMethod("create",{config:vi(Rt({},t),{areaCode:i}),appType:14}),ot=new f,ot})}static createWithExtension(t,i){return $(this,null,function*(){if(ot)return ot;let o;if(t.areaCode){let n=0;t.areaCode.forEach(r=>{n|=r}),o=n}return yield f._callMethod("create",{config:vi(Rt({},t),{areaCode:o,extension:i||[]}),appType:14}),ot=new f,ot})}destroy(){return qi.destroyAll(),this.removeAllListeners(),ot=void 0,f._callMethod("destroy")}addListener(t,i){let o=r=>{let{channelId:a,data:c}=r;a===void 0&&i(...c)},n=this._listeners.get(t);return n===void 0&&(n=new Map,this._listeners.set(t,n)),Mn.addEventListener(Dn+t,o),n.set(i,o),{remove:()=>{this.removeListener(t,i)}}}removeListener(t,i){let o=this._listeners.get(t);o!==void 0&&(Mn.removeEventListener(Dn+t,o.get(i)),o.delete(i))}removeAllListeners(t){if(t===void 0){this._listeners.forEach((i,o)=>{Mn.removeAllEventListeners(Dn+o)}),this._listeners.clear();return}Mn.removeAllEventListeners(Dn+t),this._listeners.delete(t)}setChannelProfile(t){return f._callMethod("setChannelProfile",{profile:t})}setClientRole(t,i){return f._callMethod("setClientRole",{role:t,options:i})}joinChannel(t,i,o,n,r){return f._callMethod("joinChannel",{token:t,channelName:i,optionalInfo:o,optionalUid:n,options:r})}switchChannel(t,i,o){return f._callMethod("switchChannel",{token:t,channelName:i,options:o})}leaveChannel(){return f._callMethod("leaveChannel")}renewToken(t){return f._callMethod("renewToken",{token:t})}enableWebSdkInteroperability(t){return f._callMethod("enableWebSdkInteroperability",{enabled:t})}getConnectionState(){return f._callMethod("getConnectionState")}getCallId(){return f._callMethod("getCallId")}rate(t,i,o){return f._callMethod("rate",{callId:t,rating:i,description:o})}complain(t,i){return f._callMethod("complain",{callId:t,description:i})}setLogFile(t){return f._callMethod("setLogFile",{filePath:t})}setLogFilter(t){return f._callMethod("setLogFilter",{filter:t})}setLogFileSize(t){return f._callMethod("setLogFileSize",{fileSizeInKBytes:t})}setParameters(t){return f._callMethod("setParameters",{parameters:t})}getUserInfoByUid(t){return f._callMethod("getUserInfoByUid",{uid:t})}getUserInfoByUserAccount(t){return f._callMethod("getUserInfoByUserAccount",{userAccount:t})}joinChannelWithUserAccount(t,i,o,n){return f._callMethod("joinChannelWithUserAccount",{token:t,channelName:i,userAccount:o,options:n})}registerLocalUserAccount(t,i){return f._callMethod("registerLocalUserAccount",{appId:t,userAccount:i})}adjustPlaybackSignalVolume(t){return f._callMethod("adjustPlaybackSignalVolume",{volume:t})}adjustRecordingSignalVolume(t){return f._callMethod("adjustRecordingSignalVolume",{volume:t})}adjustUserPlaybackSignalVolume(t,i){return f._callMethod("adjustUserPlaybackSignalVolume",{uid:t,volume:i})}disableAudio(){return f._callMethod("disableAudio")}enableAudio(){return f._callMethod("enableAudio")}enableAudioVolumeIndication(t,i,o){return f._callMethod("enableAudioVolumeIndication",{interval:t,smooth:i,report_vad:o})}enableLocalAudio(t){return f._callMethod("enableLocalAudio",{enabled:t})}muteAllRemoteAudioStreams(t){return f._callMethod("muteAllRemoteAudioStreams",{muted:t})}muteLocalAudioStream(t){return f._callMethod("muteLocalAudioStream",{muted:t})}muteRemoteAudioStream(t,i){return f._callMethod("muteRemoteAudioStream",{uid:t,muted:i})}setAudioProfile(t,i){return f._callMethod("setAudioProfile",{profile:t,scenario:i})}setDefaultMuteAllRemoteAudioStreams(t){return f._callMethod("setDefaultMuteAllRemoteAudioStreams",{muted:t})}disableVideo(){return f._callMethod("disableVideo")}enableLocalVideo(t){return f._callMethod("enableLocalVideo",{enabled:t})}enableVideo(){return f._callMethod("enableVideo")}muteAllRemoteVideoStreams(t){return f._callMethod("muteAllRemoteVideoStreams",{muted:t})}muteLocalVideoStream(t){return f._callMethod("muteLocalVideoStream",{muted:t})}muteRemoteVideoStream(t,i){return f._callMethod("muteRemoteVideoStream",{uid:t,muted:i})}setBeautyEffectOptions(t,i){return f._callMethod("setBeautyEffectOptions",{enabled:t,options:i})}enableRemoteSuperResolution(t,i){return f._callMethod("enableRemoteSuperResolution",{uid:t,enabled:i})}setDefaultMuteAllRemoteVideoStreams(t){return f._callMethod("setDefaultMuteAllRemoteVideoStreams",{muted:t})}setVideoEncoderConfiguration(t){return f._callMethod("setVideoEncoderConfiguration",{config:t})}startPreview(){return f._callMethod("startPreview")}stopPreview(){return f._callMethod("stopPreview")}adjustAudioMixingPlayoutVolume(t){return f._callMethod("adjustAudioMixingPlayoutVolume",{volume:t})}adjustAudioMixingPublishVolume(t){return f._callMethod("adjustAudioMixingPublishVolume",{volume:t})}adjustAudioMixingVolume(t){return f._callMethod("adjustAudioMixingVolume",{volume:t})}getAudioMixingCurrentPosition(){return f._callMethod("getAudioMixingCurrentPosition")}getAudioMixingDuration(t){return f._callMethod("getAudioMixingDuration",{filePath:t})}getAudioMixingPlayoutVolume(){return f._callMethod("getAudioMixingPlayoutVolume")}getAudioMixingPublishVolume(){return f._callMethod("getAudioMixingPublishVolume")}pauseAudioMixing(){return f._callMethod("pauseAudioMixing")}resumeAudioMixing(){return f._callMethod("resumeAudioMixing")}setAudioMixingPitch(t){return f._callMethod("setAudioMixingPitch",{pitch:t})}setAudioMixingPosition(t){return f._callMethod("setAudioMixingPosition",{pos:t})}startAudioMixing(t,i,o,n,r){return f._callMethod("startAudioMixing",{filePath:t,loopback:i,replace:o,cycle:n,startPos:r})}stopAudioMixing(){return f._callMethod("stopAudioMixing")}getEffectsVolume(){return f._callMethod("getEffectsVolume")}pauseAllEffects(){return f._callMethod("pauseAllEffects")}pauseEffect(t){return f._callMethod("pauseEffect",{soundId:t})}playEffect(t,i,o,n,r,a,c,u){return f._callMethod("playEffect",{soundId:t,filePath:i,loopCount:o,pitch:n,pan:r,gain:a,publish:c,startPos:u})}setEffectPosition(t,i){return f._callMethod("setEffectPosition",{soundId:t,pos:i})}getEffectDuration(t){return f._callMethod("getEffectDuration",{filePath:t})}getEffectCurrentPosition(t){return f._callMethod("getEffectCurrentPosition",{soundId:t})}preloadEffect(t,i){return f._callMethod("preloadEffect",{soundId:t,filePath:i})}resumeAllEffects(){return f._callMethod("resumeAllEffects")}resumeEffect(t){return f._callMethod("resumeEffect",{soundId:t})}setEffectsVolume(t){return f._callMethod("setEffectsVolume",{volume:t})}setVolumeOfEffect(t,i){return f._callMethod("setVolumeOfEffect",{soundId:t,volume:i})}stopAllEffects(){return f._callMethod("stopAllEffects")}stopEffect(t){return f._callMethod("stopEffect",{soundId:t})}unloadEffect(t){return f._callMethod("unloadEffect",{soundId:t})}setLocalVoiceChanger(t){return f._callMethod("setLocalVoiceChanger",{voiceChanger:t})}setLocalVoiceEqualization(t,i){return f._callMethod("setLocalVoiceEqualization",{bandFrequency:t,bandGain:i})}setLocalVoicePitch(t){return f._callMethod("setLocalVoicePitch",{pitch:t})}setLocalVoiceReverb(t,i){return f._callMethod("setLocalVoiceReverb",{reverbKey:t,value:i})}setLocalVoiceReverbPreset(t){return f._callMethod("setLocalVoiceReverbPreset",{preset:t})}enableSoundPositionIndication(t){return f._callMethod("enableSoundPositionIndication",{enabled:t})}setRemoteVoicePosition(t,i,o){return f._callMethod("setRemoteVoicePosition",{uid:t,pan:i,gain:o})}addPublishStreamUrl(t,i){return f._callMethod("addPublishStreamUrl",{url:t,transcodingEnabled:i})}removePublishStreamUrl(t){return f._callMethod("removePublishStreamUrl",{url:t})}setLiveTranscoding(t){return f._callMethod("setLiveTranscoding",{transcoding:t})}startChannelMediaRelay(t){return f._callMethod("startChannelMediaRelay",{channelMediaRelayConfiguration:t})}stopChannelMediaRelay(){return f._callMethod("stopChannelMediaRelay")}updateChannelMediaRelay(t){return f._callMethod("updateChannelMediaRelay",{channelMediaRelayConfiguration:t})}isSpeakerphoneEnabled(){return f._callMethod("isSpeakerphoneEnabled")}setDefaultAudioRoutetoSpeakerphone(t){return f._callMethod("setDefaultAudioRoutetoSpeakerphone",{defaultToSpeaker:t})}setEnableSpeakerphone(t){return f._callMethod("setEnableSpeakerphone",{enabled:t})}enableInEarMonitoring(t){return f._callMethod("enableInEarMonitoring",{enabled:t})}setInEarMonitoringVolume(t){return f._callMethod("setInEarMonitoringVolume",{volume:t})}enableDualStreamMode(t){return f._callMethod("enableDualStreamMode",{enabled:t})}setRemoteDefaultVideoStreamType(t){return f._callMethod("setRemoteDefaultVideoStreamType",{streamType:t})}setRemoteVideoStreamType(t,i){return f._callMethod("setRemoteVideoStreamType",{uid:t,streamType:i})}setLocalPublishFallbackOption(t){return f._callMethod("setLocalPublishFallbackOption",{option:t})}setRemoteSubscribeFallbackOption(t){return f._callMethod("setRemoteSubscribeFallbackOption",{option:t})}setRemoteUserPriority(t,i){return f._callMethod("setRemoteUserPriority",{uid:t,userPriority:i})}disableLastmileTest(){return f._callMethod("disableLastmileTest")}enableLastmileTest(){return f._callMethod("enableLastmileTest")}startEchoTest(t,i){return console.assert(t===void 0||i===void 0,"Only need one of the params"),f._callMethod("startEchoTest",{intervalInSeconds:t,config:i})}startLastmileProbeTest(t){return f._callMethod("startLastmileProbeTest",{config:t})}stopEchoTest(){return f._callMethod("stopEchoTest")}stopLastmileProbeTest(){return f._callMethod("stopLastmileProbeTest")}registerMediaMetadataObserver(){return f._callMethod("registerMediaMetadataObserver")}sendMetadata(t){return f._callMethod("sendMetadata",{metadata:t})}setMaxMetadataSize(t){return f._callMethod("setMaxMetadataSize",{size:t})}unregisterMediaMetadataObserver(){return f._callMethod("unregisterMediaMetadataObserver")}addVideoWatermark(t,i){return f._callMethod("addVideoWatermark",{watermarkUrl:t,options:i})}clearVideoWatermarks(){return f._callMethod("clearVideoWatermarks")}enableEncryption(t,i){return f._callMethod("enableEncryption",{enabled:t,config:i})}setEncryptionMode(t){return f._callMethod("setEncryptionMode",{encryptionMode:t})}setEncryptionSecret(t){return f._callMethod("setEncryptionSecret",{secret:t})}startAudioRecording(t,i,o){return f._callMethod("startAudioRecording",{filePath:t,sampleRate:i,quality:o})}startAudioRecordingWithConfig(t){return f._callMethod("startAudioRecording",{config:t})}startRhythmPlayer(t,i,o){return f._callMethod("startRhythmPlayer",{sound1:t,sound2:i,config:o})}stopRhythmPlayer(){return f._callMethod("stopRhythmPlayer")}configRhythmPlayer(t){return f._callMethod("configRhythmPlayer",t)}stopAudioRecording(){return f._callMethod("stopAudioRecording")}addInjectStreamUrl(t,i){return f._callMethod("addInjectStreamUrl",{url:t,config:i})}removeInjectStreamUrl(t){return f._callMethod("removeInjectStreamUrl",{url:t})}enableFaceDetection(t){return f._callMethod("enableFaceDetection",{enabled:t})}enableFaceDetectionIos(t){return f._callMethod("enableFaceDetection",{enable:t})}getCameraMaxZoomFactor(){return f._callMethod("getCameraMaxZoomFactor")}isCameraAutoFocusFaceModeSupported(){return f._callMethod("isCameraAutoFocusFaceModeSupported")}isCameraExposurePositionSupported(){return f._callMethod("isCameraExposurePositionSupported")}isCameraFocusSupported(){return f._callMethod("isCameraFocusSupported")}isCameraTorchSupported(){return f._callMethod("isCameraTorchSupported")}isCameraZoomSupported(){return f._callMethod("isCameraZoomSupported")}setCameraAutoFocusFaceModeEnabled(t){return f._callMethod("setCameraAutoFocusFaceModeEnabled",{enabled:t})}setCameraCapturerConfiguration(t){return f._callMethod("setCameraCapturerConfiguration",{config:t})}setCameraExposurePosition(t,i){return f._callMethod("setCameraExposurePosition",{positionXinView:t,positionYinView:i})}setCameraFocusPositionInPreview(t,i){return f._callMethod("setCameraFocusPositionInPreview",{positionX:t,positionY:i})}setCameraTorchOn(t){return f._callMethod("setCameraTorchOn",{isOn:t})}setCameraZoomFactor(t){return f._callMethod("setCameraZoomFactor",{factor:t})}switchCamera(){return f._callMethod("switchCamera")}createDataStream(t,i){return f._callMethod("createDataStream",{reliable:t,ordered:i})}createDataStreamWithConfig(t){return f._callMethod("createDataStream",{config:t})}sendStreamMessage(t,i){return f._callMethod("sendStreamMessage",{streamId:t,message:i})}sendCustomReportMessage(t,i,o,n,r){return f._callMethod("sendCustomReportMessage",{id:t,category:i,event:o,label:n,value:r})}setAudioSessionOperationRestriction(t){return f._callMethod("setAudioSessionOperationRestriction",{restriction:t})}getNativeHandle(){return f._callMethod("getNativeHandle")}enableDeepLearningDenoise(t){return f._callMethod("enableDeepLearningDenoise",{enabled:t})}setCloudProxy(t){return f._callMethod("setCloudProxy",{proxyType:t})}uploadLogFile(){return f._callMethod("uploadLogFile")}setLocalAccessPoint(t){return f._callMethod("setLocalAccessPoint",{config:t})}setAudioEffectParameters(t,i,o){return f._callMethod("setAudioEffectParameters",{preset:t,param1:i,param2:o})}setVoiceBeautifierParameters(t,i,o){return f._callMethod("setVoiceBeautifierParameters",{preset:t,param1:i,param2:o})}setAudioEffectPreset(t){return f._callMethod("setAudioEffectPreset",{preset:t})}setVoiceBeautifierPreset(t){return f._callMethod("setVoiceBeautifierPreset",{preset:t})}setVoiceConversionPreset(t){return f._callMethod("setVoiceConversionPreset",{preset:t})}pauseAllChannelMediaRelay(){return f._callMethod("pauseAllChannelMediaRelay")}resumeAllChannelMediaRelay(){return f._callMethod("resumeAllChannelMediaRelay")}enableVirtualBackground(t,i){return f._callMethod("enableVirtualBackground",{enabled:t,backgroundSource:i})}getAudioFileInfo(t){return f._callMethod("getAudioFileInfo",{filePath:t})}getAudioTrackCount(){return f._callMethod("getAudioTrackCount")}selectAudioTrack(t){return f._callMethod("selectAudioTrack",{index:t})}setAudioMixingDualMonoMode(t){return f._callMethod("setAudioMixingDualMonoMode",{mode:t})}setAudioMixingPlaybackSpeed(t){return f._callMethod("setAudioMixingPlaybackSpeed",{speed:t})}takeSnapshot(t,i,o){return f._callMethod("takeSnapshot",{channel:t,uid:i,filePath:o})}enableContentInspect(t,i){return f._callMethod("enableContentInspect",{enabled:t,config:i})}enableWirelessAccelerate(t){return f._callMethod("enableWirelessAccelerate",{enabled:t})}setAgoraLibPath(t){return f._callMethod("setAgoraLibPath",{path:t})}setColorEnhanceOptions(t,i){return f._callMethod("setColorEnhanceOptions",{enabled:t,options:i})}setLowLightEnhanceOptions(t,i){return f._callMethod("setLowLightEnhanceOptions",{enabled:t,options:i})}setVideoDenoiserOptions(t,i){return f._callMethod("setVideoDenoiserOptions",{enabled:t,options:i})}startRecording(t){return f._callMethod("startRecording",{config:t})}startRtmpStreamWithTranscoding(t,i){return f._callMethod("startRtmpStreamWithTranscoding",{url:t,transcoding:i})}startRtmpStreamWithoutTranscoding(t){return f._callMethod("startRtmpStreamWithoutTranscoding",{url:t})}stopRecording(){return f._callMethod("stopRecording")}stopRtmpStream(t){return f._callMethod("stopRtmpStream",{url:t})}updateRtmpTranscoding(t){return f._callMethod("updateRtmpTranscoding",{transcoding:t})}setAVSyncSource(t,i){return f._callMethod("setAVSyncSource",{channelId:t,uid:i})}enableExtension(t,i,o){return f._callMethod("enableExtension",{provider:t,extension:i,enable:o})}enableLocalVoicePitchCallback(t){return f._callMethod("enableLocalVoicePitchCallback",{interval:t})}enableSpatialAudio(t){return f._callMethod("enableSpatialAudio",{enabled:t})}setRemoteUserSpatialAudioParams(t,i){return f._callMethod("setRemoteUserSpatialAudioParams",{uid:t,params:i})}startScreenCapture(t){return f._callMethod("startScreenCapture",{parameters:t})}stopScreenCapture(){return f._callMethod("stopScreenCapture")}updateScreenCaptureParameters(t){return f._callMethod("updateScreenCaptureParameters",{parameters:t})}setExtensionProperty(t,i,o,n){return f._callMethod("setExtensionProperty",{provider:t,extension:i,key:o,property:n})}},Gr=(e=>(e[e.Stopped=0]="Stopped",e[e.Starting=1]="Starting",e[e.Decoding=2]="Decoding",e[e.Frozen=3]="Frozen",e[e.Failed=4]="Failed",e))(Gr||{}),Wr=(e=>(e[e.Communication=0]="Communication",e[e.LiveBroadcasting=1]="LiveBroadcasting",e[e.Game=2]="Game",e))(Wr||{}),Vr=(e=>(e[e.Min=-1]="Min",e[e.Fps1=1]="Fps1",e[e.Fps7=7]="Fps7",e[e.Fps10=10]="Fps10",e[e.Fps15=15]="Fps15",e[e.Fps24=24]="Fps24",e[e.Fps30=30]="Fps30",e[e.Fps60=60]="Fps60",e))(Vr||{}),jr=(e=>(e[e.Standard=0]="Standard",e[e.Compatible=-1]="Compatible",e))(jr||{}),ba=(e=>(e[e.Auto=0]="Auto",e[e.Enabled=1]="Enabled",e[e.Disabled=2]="Disabled",e))(ba||{}),zr=(e=>(e[e.Stopped=0]="Stopped",e[e.Starting=1]="Starting",e[e.Decoding=2]="Decoding",e[e.Frozen=3]="Frozen",e[e.Failed=4]="Failed",e))(zr||{}),xa=(e=>(e[e.Hidden=1]="Hidden",e[e.Fit=2]="Fit",e[e.Adaptive=3]="Adaptive",e[e.FILL=4]="FILL",e))(xa||{}),Rn=(e=>(e[e.High=0]="High",e[e.Low=1]="Low",e))(Rn||{}),jh={center:{"":{alignItems:"center",flexDirection:"row"}},"center-between":{"":{alignItems:"center",flexDirection:"row",justifyContent:"space-between"}},"beauty-pop":{"":{paddingTop:20,paddingRight:23,paddingBottom:20,paddingLeft:23,backgroundColor:"rgba(0,0,0,0.2)",borderTopLeftRadius:"28rpx",borderTopRightRadius:"28rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0}},title:{".beauty-pop ":{color:"#FFFFFF",fontSize:"24rpx",lineHeight:"34rpx",marginRight:"12rpx"}},level:{".beauty-pop ":{marginTop:"40rpx"}},item:{".beauty-pop .level ":{width:"80rpx",height:"80rpx",color:"#FFFFFF",fontSize:"26rpx",textAlign:"center",borderRadius:50,lineHeight:"80rpx",backgroundColor:"rgba(247,247,247,0.297)"}},active:{".beauty-pop .level ":{backgroundColor:"rgba(255,68,119,0.99)"}},default:{".beauty-pop .level ":{textAlign:"center",lineHeight:"80rpx",fontSize:"24rpx",color:"#FFFFFF"}}},zh={components:{CustomSlider:Ur,LImg:v,UniPopup:re},emits:["onBeautyChange","onChange"],data(){return{beautyInfo:{whitening:0,smoothing:0,rosy:0,level:0},currentSlider:"",levelArr:[0,1,2,3,4],safeBottomH:getApp().globalData.window.safeBottom}},computed:{getSliderW(){return(getApp().globalData.window.width-46-32)/2}},methods:{$str:h,onChange(e){this.$emit("onChange",e)},clickLevel(e){e!=this.beautyInfo.level&&(this.setBeautyLevel(e),this.$emit("onBeautyChange",this.beautyInfo),N("beauty_info",JSON.stringify(this.beautyInfo)))},clickDefault(){de("beauty_info"),this.initBeautyInfo(),this.$emit("onBeautyChange",this.beautyInfo)},onSliderChangeStart(e){this.currentSlider=e},onSliderChanged(e){g(this.currentSlider)||(this.beautyInfo[this.currentSlider]=e,this.$emit("onBeautyChange",this.beautyInfo),N("beauty_info",JSON.stringify(this.beautyInfo)))},initBeautyInfo(){let e=R("beauty_info");e?this.beautyInfo=Je(e):(this.setBeautyLevel(2),N("beauty_info",JSON.stringify(this.beautyInfo)))},setBeautyLevel(e){let t=e*25;this.beautyInfo.whitening=t,this.beautyInfo.smoothing=t,this.beautyInfo.rosy=t,this.beautyInfo.level=e},open(){this.$refs.beautyPop.open()}},created(){this.initBeautyInfo()}};function $h(e,t,i,o,n,r){let a=y((0,E.resolveDynamicComponent)("l-img"),v),c=y((0,E.resolveDynamicComponent)("custom-slider"),Ur),u=y((0,E.resolveDynamicComponent)("uni-popup"),re);return(0,E.openBlock)(),(0,E.createElementBlock)("view",{renderWhole:!0},[(0,E.createVNode)(u,{"safe-area":!1,onChange:r.onChange,"mask-bg-color":"rgba(0, 0, 0, 0)",ref:"beautyPop",type:"bottom"},{default:(0,E.withCtx)(()=>[(0,E.createElementVNode)("view",{class:"beauty-pop",style:(0,E.normalizeStyle)({paddingBottom:n.safeBottomH+10+"px"})},[(0,E.createElementVNode)("view",{class:"center-between"},[(0,E.createElementVNode)("view",null,[(0,E.createElementVNode)("view",{class:"center"},[(0,E.createElementVNode)("u-text",{class:"title"},(0,E.toDisplayString)(r.$str("whitening")),1),(0,E.createVNode)(a,{src:"s/call/beauty-whitening.png",w:"32rpx",h:"32rpx"})]),(0,E.createVNode)(c,{"fill-value":100,"max-value":n.beautyInfo.whitening,style:(0,E.normalizeStyle)([{"margin-top":"12rpx",height:"20rpx"},{width:r.getSliderW+"px"}]),"block-width":20,"line-height":4,onOnChange:r.onSliderChanged,onOnChangeStart:t[0]||(t[0]=p=>r.onSliderChangeStart("whitening")),onOnChanged:r.onSliderChanged,"active-color":"#FFFFFF","block-color":"#FFFFFF",inactiveColor:"rgba(255, 255, 255, 0.1)"},null,8,["max-value","style","onOnChange","onOnChanged"])]),(0,E.createElementVNode)("view",null,[(0,E.createElementVNode)("view",{class:"center"},[(0,E.createElementVNode)("u-text",{class:"title"},(0,E.toDisplayString)(r.$str("rosy")),1),(0,E.createVNode)(a,{src:"s/call/beauty-rosy.png",w:"32rpx",h:"32rpx"})]),(0,E.createVNode)(c,{"fill-value":100,"max-value":n.beautyInfo.rosy,style:(0,E.normalizeStyle)([{"margin-top":"12rpx",height:"20rpx"},{width:r.getSliderW+"px"}]),"block-width":20,"line-height":4,onOnChange:r.onSliderChanged,onOnChangeStart:t[1]||(t[1]=p=>r.onSliderChangeStart("rosy")),onOnChanged:r.onSliderChanged,"active-color":"#FFFFFF","block-color":"#FFFFFF",inactiveColor:"rgba(255, 255, 255, 0.1)"},null,8,["max-value","style","onOnChange","onOnChanged"])])]),(0,E.createElementVNode)("view",{class:"center-between",style:{"margin-top":"62rpx"}},[(0,E.createElementVNode)("view",null,[(0,E.createElementVNode)("view",{class:"center"},[(0,E.createElementVNode)("u-text",{class:"title"},(0,E.toDisplayString)(r.$str("smoothing")),1),(0,E.createVNode)(a,{src:"s/call/beauty-smoothing.png",w:"32rpx",h:"32rpx"})]),(0,E.createVNode)(c,{"fill-value":100,"max-value":n.beautyInfo.smoothing,style:(0,E.normalizeStyle)([{"margin-top":"12rpx",height:"20rpx"},{width:r.getSliderW+"px"}]),"block-width":20,"line-height":4,onOnChange:r.onSliderChanged,onOnChangeStart:t[2]||(t[2]=p=>r.onSliderChangeStart("smoothing")),onOnChanged:r.onSliderChanged,"active-color":"#FFFFFF","block-color":"#FFFFFF",inactiveColor:"rgba(255, 255, 255, 0.1)"},null,8,["max-value","style","onOnChange","onOnChanged"])]),(0,E.createElementVNode)("view",null,[(0,E.createVNode)(c,{"fill-value":0,"max-value":0,style:(0,E.normalizeStyle)([{"margin-top":"12rpx",height:"0"},{width:r.getSliderW+"px"}]),"block-width":0,"line-height":0,"active-color":"#FFFFFF","block-color":"#FFFFFF",inactiveColor:"rgba(255, 255, 255, 0)"},null,8,["style"])])]),(0,E.createElementVNode)("view",{class:"level center-between"},[((0,E.openBlock)(!0),(0,E.createElementBlock)(E.Fragment,null,(0,E.renderList)(n.levelArr,(p,d)=>((0,E.openBlock)(),(0,E.createElementBlock)("u-text",{onClick:_=>r.clickLevel(p),key:"l"+d,class:(0,E.normalizeClass)(["item",[n.beautyInfo.level==p?"active":""]])},(0,E.toDisplayString)(p),11,["onClick"]))),128)),(0,E.createElementVNode)("u-text",{onClick:t[3]||(t[3]=(...p)=>r.clickDefault&&r.clickDefault(...p)),class:"default"},(0,E.toDisplayString)(r.$str("default")),1)])],4)]),_:1},8,["onChange"])])}var Ca=S(zh,[["render",$h],["styles",[jh]]]),Kh={name:"RtcSurfaceView",props:{zOrderMediaOverlay:{type:Boolean,default:!1},zOrderOnTop:{type:Boolean,default:!1},renderMode:{type:Number,default:xa.Hidden},uid:Number,channelId:String,mirrorMode:{type:Number,default:ba.Auto}}};function Yh(e,t,i,o,n,r){let a=(0,E.resolveComponent)("Agora-RTC-SurfaceView");return(0,E.openBlock)(),(0,E.createBlock)(a,{zOrderMediaOverlay:i.zOrderMediaOverlay,zOrderOnTop:i.zOrderOnTop,renderMode:i.renderMode,data:{uid:i.uid,channelId:i.channelId},mirrorMode:i.mirrorMode},null,8,["zOrderMediaOverlay","zOrderOnTop","renderMode","data","mirrorMode"])}var $r=S(Kh,[["render",Yh]]);function Kr(e,t){Be(h("tips"),h("anchor.rest.turnOffTip"),()=>{let i={user_info:{is_rest:0}};k.request("/user/update-info",i,!0).then(()=>{typeof e=="function"&&e(),rt("pubUser.is_rest",0),ye(h("tips"),h("anchor.rest.turnOff"),"",h("gotIt"))})},()=>{typeof t=="function"&&t()},h("turnOff"))}function Nn(){return!j()||getApp().pubUser.is_rest!=1?!1:(uni.hideKeyboard(),Kr(!1,!1),!0)}var Iy=q(Z());function qh(e,t,i,o,n){return new Promise(r=>{getApp().globalData.pluginUpload.singleUpS3({filePath:e,isBase64:t,coverFilePath:i,coverIsBase64:o,ossInfo:n},a=>{r(a)})})}var Jh="/upload/params-s3";function Yr(e,t,i,o,n=null,r=null){return new Promise((a,c)=>$(this,null,function*(){let u=e.replace("file://",""),p={flag:t,type:i};n&&(p.width=n.width,p.height=n.height),r&&(p=Object.assign(p,r));try{if(o){let _=yield Lo(u),w="";_&&(w=_.digest),g(w)||(p.md5=w)}let d=yield k.request(Jh,p,!1,!0);if(d.ok==1&&d.data.is_upload)C("log","at common/api-upload.js:73","upload media is_upload true"),a({path:d.data.dir,smallPath:d.data.small_url,uploadId:d.data.upload_id||0});else{let _=d.data.upload_id,w=yield Xh(u,"",d.data);_&&Zh([_]),w.uploadId=_||0,a(w)}}catch(d){let _=yr(d);C("error","at common/api-upload.js:88","upload media fail "+_),Qh(t,p,_),c(d)}}))}function Zh(e){g(e)||k.request("/upload/success",{id:e},!1,!0).then(t=>{C("error","at common/api-upload.js:162","-----> api upload/success response",t)},t=>{C("error","at common/api-upload.js:164","-----> api upload/success response error",t)})}function Xh(e,t,i,o=0,n=0){return new Promise((r,a)=>{qh(e,o,t,n,i).then(c=>{C("log","at common/api-upload.js:171","upload plugin s3 result",c),(typeof c=="object"?c.success:c)?r({path:i.dir.path,smallPath:i.dir.small_url}):a(`_upModuleS3 ${JSON.stringify(c)}`)})})}function Qh(e,t,i){let o=e=="auth"?"upload_auth":"upload",n=ni(t);k.accessLogExtra(o,`${e} ${n}`,i)}function Aa(e){let t=`${ho("apps",!1)}agora_log/`;return e==-1?t:`${t}${getApp().globalData.uid}_${e}.log`}function qr(e){return e==3||e==4||e==5||e==6?0:1}var wi=q(Z());var em={emits:["click"],components:{LImg:v},props:{user:{type:Object,default(){return{}}},w:{type:String,default:"0"},h:{type:String,default:"0"},radius:{type:String,default:"0"},setKey:{type:String,default:"small_avatar"},border:{type:String,default:""},placeType:{type:Number,default:1},placeW:{type:String,default:""},placeFontSize:{type:[String,Boolean],default:""},placeBottom:{type:String,default:""},click:{type:Boolean,default:!0},fromAdmin:{type:[Boolean,Number],default:!1},fromType:{type:Number,default:1},fade:{type:Boolean,default:!0}},computed:{avatarUrl(){return Ui(this.user,this.setKey,this.fromAdmin,this.fromType)}},methods:{clickAvatar(e){this.click&&this.$emit("click",e)}}};function tm(e,t,i,o,n,r){let a=y((0,wi.resolveDynamicComponent)("l-img"),v);return(0,wi.openBlock)(),(0,wi.createBlock)(a,{onClick:r.clickAvatar,src:r.avatarUrl,w:i.w,h:i.h,radius:i.radius,border:i.border,"place-type":i.placeType,"place-w":i.placeW,"place-font-size":i.placeFontSize,"place-bottom":i.placeBottom,fade:i.fade},null,8,["onClick","src","w","h","radius","border","place-type","place-w","place-font-size","place-bottom","fade"])}var It=S(em,[["render",tm]]);function im(){return getApp().globalData.appCRE||mt(40,1,!1)?!0:(Be(h("tips"),h("call40CoinsTip"),()=>{ie("/pages/coin/coins")},"","Purchase"),!1)}function Ta(e,t,i,o){im()&&nm(lt.CALL,e,ce.CALL,t,i,null,o,ci.DEF)}function nm(e,t,i,o,n,r,a,c){if(C("error","at comCall/call.js:48","_openCall "+getApp().globalData.curCallId),g(o))return;if(o.uid==getApp().globalData.uid){if(i!=ce.CALL)return;ye(h("tips"),h("noCallSelf"),"",h("gotIt"));return}if(getApp().globalData.curCallId!=ut.NONE)return;getApp().globalData.curCallId=ut.WEEK_UP;let u=rm(e,t,i,o,n,r,a,c);X("/pages/call/chat-view",{},"callViewData",u)}function rm(e,t,i,o,n,r,a,c){let u={user:o,roomType:e,callType:t,actionType:i,fromType:a,videoInfo:n,openType:c};return n&&(u.videoInfo=n),r&&(u.roomInfo=r,r.isGame&&(u.isGame=r.isGame)),u}function bi(e,t,i,o,n,r){if(typeof t.gift_source=="undefined"||!t.gift_source){if(!mt(t.price,e))return;Hi(-t.price)}typeof r=="function"&&r();let a={gift_id:t.gift_id,to_uid:i,from_type:n,room_id:o,number:e};typeof t.from_ask!="undefined"&&(a.from_ask=t.from_ask),typeof t.gift_source!="undefined"&&(a.gift_source=t.gift_source),k.request("/chat/gift/send",a).then(c=>{c.ok==1&&(be(c.data.balance),Vi("call_success",2),c.data.from_bag&&Wi())})}function xi(e,t,i=""){g(e.svga_url)||je().indexOf("/pagesDialog/anim")==-1&&ze(e.svga_url,o=>{C("error","at comGift/gift-anim.js:10","showGiftAnim path "+o),ie("/pagesDialog/anim",{path:o,showClose:t?1:0,flag:i})},!1)}var jy=q(Z()),gt={AD:1,AD_SPREAD:2,CONTACT:3,MARK_ID:4,WHITE_LINK:5,PORNOGRAPHIC:6},Ji={MSG:1,MOMENT:2,NICKNAME:3,SIGN:4,CLUB_NAME:5,CLUB_INTRO:6,MSG_CALL:7,MSG_CLUB:8};function Sa(e,t){try{let i=e.toLocaleLowerCase(),o=!1,n=getApp().globalData.sensitiveWordsObj[gt.AD];if(o=Bn(n,i),o)return ft(!0,n.type,o);let r=Qs(i);if(r){if(sm(r))return ft(!1,gt.WHITE_LINK,"");if(i.indexOf("apps.apple.com")!=-1||i.indexOf("play.google.com")!=-1){let u=getApp().globalData.sensitiveWordsObj[gt.MARK_ID];if(o=u.words.findDfa(i),o)return ft(!0,u.type,o)}let c=getApp().globalData.sensitiveWordsObj[gt.AD_SPREAD];return o=Bn(c,i),o?ft(!0,c.type,o):ft(!0,gt.WHITE_LINK,r[0])}let a=om(i);if(a)return ft(!0,gt.CONTACT,a);if([Ji.MSG,Ji.MSG_CLUB,Ji.MSG_CALL].indexOf(t)==-1){let c=getApp().globalData.sensitiveWordsObj[gt.PORNOGRAPHIC];if(o=Bn(c,i),o)return ft(!0,c.type,o)}return ft(!1,0,"")}catch(i){return C("error","at comSensitive/sensitive-check.js:56","sensitive check catch "+JSON.stringify(i)),ft(!1,-1,"")}}function ft(e,t,i){return C("error","at comSensitive/sensitive-check.js:62",`sensitive check ${e} type = ${t} find = ${i}`),{has:e,type:t,find:i}}function sm(e){let t=getApp().globalData.sensitiveWordsObj[gt.WHITE_LINK];for(let i=0,o=e.length;i<o;i++)if(!t.words.containsDfa(e[i]))return!1;return!0}function om(e){let t=!1,i=/[\d\w]+\b@[a-zA-ZA-z0-9]+\.[a-z]+/g;if(t=e.match(i),t)return t[0];let o=/^[0-9]{8,}$/;if(t=e.match(o),t)return t[0];let n=/\+(([0123456789]{6,})+)/g;if(t=e.match(n),t)return t[0];let r=/(@)((\w|=|\?|\.|\/|&|-|:|%)+)/g;if(t=e.match(r),t)return t[0];let a=getApp().globalData.sensitiveWordsObj[gt.CONTACT],c=Bn(a,e);return c||!1}function Bn(e,t){let i=e.words.wordsWithIndex(t);if(i.length<=0)return!1;for(let o=0,n=i.length;o<n;o++){let r=i[o],a=am(t,r.text,r.start,r.end);if(a)return a}return!1}function am(e,t,i,o){try{if(e.length==t.length)return t;let n=i==0,r=o==e.length,a=i==0?0:i-1,c=o==e.length?o:o+1,u=e.substring(a,c),p=`('|"| |#|@|{|}|\\||/|\\(|\\)|\\[|\\])`,d=`('|"| |#|@|{|}|\\||/|\\(|\\)|\\[|\\]|,|\\.|:)`,_;return n?_=new RegExp(t+d,"g"):r?_=new RegExp(p+t,"g"):_=new RegExp(p+t+d,"g"),u.match(_)?u:!1}catch(n){return C("error","at comSensitive/sensitive-check.js:138","sensitive _checkContext catch "+JSON.stringify(n)),!1}}var x=q(Z());var lm={"view-this":{"":{flexDirection:"row",alignItems:"center",position:"relative",marginRight:"8rpx"}},"text-level":{"":{width:"50rpx",lineHeight:"50rpx",textAlign:"center",color:"#FFFFFF",position:"absolute",top:0}}},cm={props:{info:{type:Object,default(){return{}}},vipAlways:{type:Boolean,default:!1},levelAlways:{type:Boolean,default:!1},hideVip:{type:Boolean,default:!1}},computed:{show(){return this.info.is_auth||this.info.level>0||this.showVip||this.levelAlways},showVip(){return this.hideVip?!1:this.info.is_vip?this.info.hide_vip?this.vipAlways:!0:!1},showLevel(){return!this.info.hide_level&&(this.info.level>0||this.info.is_auth)?!0:this.levelAlways},levelStr(){let e=this.info.is_auth?1:0;return this.info.level<=0?e:this.info.level},levelSrc(){return this.info.sex==2?"s/pub/level_a.png":"s/pub/level_c.png"},levelSize(){return this.info.level>99?"10rpx":this.info.level>9?"14rpx":"16rpx"},levelWeight(){return this.info.level>99?"bold":"normal"}}};function um(e,t,i,o,n,r){let a=y((0,x.resolveDynamicComponent)("l-img"),v);return r.show?((0,x.openBlock)(),(0,x.createElementBlock)("view",{key:0,class:"view-this",renderWhole:!0},[r.showLevel?((0,x.openBlock)(),(0,x.createElementBlock)("view",{key:0},[(0,x.createVNode)(a,{src:r.levelSrc,w:"50rpx",h:"50rpx"},null,8,["src"]),(0,x.createElementVNode)("u-text",{class:"text-level",style:(0,x.normalizeStyle)({fontSize:r.levelSize,fontWeight:r.levelWeight})},(0,x.toDisplayString)(r.levelStr),5)])):(0,x.createCommentVNode)("",!0),r.showVip?((0,x.openBlock)(),(0,x.createBlock)(a,{key:1,src:"s/pub/vip_3.png",w:"56rpx",h:"24rpx",style:{"margin-left":"8rpx"}})):(0,x.createCommentVNode)("",!0)])):(0,x.createCommentVNode)("",!0)}var va=S(cm,[["render",um],["styles",[lm]]]),pm={center:{"":{alignItems:"center",flexDirection:"row"}},"m-l-4":{"":{marginLeft:"8rpx"}},"m-r-4":{"":{marginRight:"8rpx"}}},hm={props:{user:{type:Object,default(){return{}}},imgW:{type:Number,default:40},imgH:{type:Number,default:26},fontSize:{type:Number,default:24},color:{type:String,default:""},showName:{type:Boolean,default:!1},showCode:{type:Boolean,default:!0},desc:{type:Boolean,default:!1}},computed:{defClass(){let e={fontSize:`${this.fontSize}rpx`};return g(this.color)?e.color=getApp().globalData.themeObj.color.title:e.color=this.color,e}}};function mm(e,t,i,o,n,r){let a=y((0,x.resolveDynamicComponent)("l-img"),v);return i.user.country_code&&!i.desc?((0,x.openBlock)(),(0,x.createElementBlock)("view",{key:0,class:"center"},[(0,x.createVNode)(a,{src:i.user.country_flag,w:`${i.imgW}rpx`,h:`${i.imgH}rpx`},null,8,["src","w","h"]),i.showCode&&i.user.country_code?((0,x.openBlock)(),(0,x.createElementBlock)("u-text",{key:0,class:"m-l-4",style:(0,x.normalizeStyle)(r.defClass)},(0,x.toDisplayString)(i.user.country_code.toUpperCase()),5)):(0,x.createCommentVNode)("",!0),i.showName&&i.user.country_name?((0,x.openBlock)(),(0,x.createElementBlock)("u-text",{key:1,class:"m-l-4",style:(0,x.normalizeStyle)(r.defClass)},(0,x.toDisplayString)(i.user.country_name),5)):(0,x.createCommentVNode)("",!0)])):i.user.country_code?((0,x.openBlock)(),(0,x.createElementBlock)("view",{key:1,class:"center m-r-4"},[i.showName&&i.user.country_name?((0,x.openBlock)(),(0,x.createElementBlock)("u-text",{key:0,class:"m-r-4",style:(0,x.normalizeStyle)(r.defClass)},(0,x.toDisplayString)(i.user.country_name),5)):(0,x.createCommentVNode)("",!0),i.showCode&&i.user.country_code?((0,x.openBlock)(),(0,x.createElementBlock)("u-text",{key:1,class:"m-r-4",style:(0,x.normalizeStyle)(r.defClass)},(0,x.toDisplayString)(i.user.country_code.toUpperCase()),5)):(0,x.createCommentVNode)("",!0),(0,x.createVNode)(a,{src:i.user.country_flag,w:`${i.imgW}rpx`,h:`${i.imgH}rpx`},null,8,["src","w","h"])])):(0,x.createCommentVNode)("",!0)}var ka=S(hm,[["render",mm],["styles",[pm]]]),dm={"user-info":{"":{flexDirection:"row",alignItems:"center"}},"nickname-nvue":{"":{lines:1,textOverflow:"ellipsis",wordWrap:"anywhere"}},"m-r-4":{"":{marginRight:"8rpx"}},"text-official":{"":{lineHeight:"28rpx",backgroundColor:"#34C759",borderRadius:"4rpx",paddingTop:0,paddingRight:"8rpx",paddingBottom:0,paddingLeft:"8rpx",color:"#FFFFFF",fontSize:"20rpx",fontStyle:"italic",fontWeight:"700",marginRight:"8rpx"}}},fm={components:{LImg:v,CountryCode:ka,LevelVip:va},props:{info:{type:Object,default(){return{}}},noName:{type:Number,default:0},nameColor:{type:String,default:""},nameSize:{type:String,default:"26rpx"},nameWidth:{type:String,default:"300rpx"},fw:{type:[String,Number],default:"400"},desc:{type:Boolean,default:!1},isAdmin:{type:Number,default:0},showAge:{type:Boolean,default:!0},showAuth:{type:Boolean,default:!0},showCountry:{type:Boolean,default:!1},showCountryCode:{type:Boolean,default:!0},levelAlways:{type:Boolean,default:!1}},computed:{officialStr(){return this.info.auth_status==9?h("official"):""},age(){if(!this.showAge||g(this.info.birthday)||this.info.hide_profile)return"";let e=hn(this.info.birthday);return g(e)||isNaN(e)?"":`${this.noName?"":", "}${e}`},nicknameText(){return $e(this.info,this.isAdmin)},showCountryInfo(){return this.showCountry&&this.info.hide_profile!=1},nicknameColor(){return g(this.nameColor)?getApp().globalData.themeObj.color.title:this.nameColor}}};function gm(e,t,i,o,n,r){let a=y((0,x.resolveDynamicComponent)("level-vip"),va),c=y((0,x.resolveDynamicComponent)("country-code"),ka),u=y((0,x.resolveDynamicComponent)("l-img"),v);return(0,x.openBlock)(),(0,x.createElementBlock)("view",{renderWhole:!0},[i.desc?((0,x.openBlock)(),(0,x.createElementBlock)("view",{key:1,class:"user-info",style:{"justify-content":"flex-end"}},[r.officialStr?((0,x.openBlock)(),(0,x.createElementBlock)("u-text",{key:0,class:"text-official"},(0,x.toDisplayString)(r.officialStr),1)):((0,x.openBlock)(),(0,x.createElementBlock)("view",{key:1,class:"user-info"},[i.showAuth&&i.info.auth_status==1?((0,x.openBlock)(),(0,x.createBlock)(u,{key:0,src:"s/pub/verified_1.png",w:"24rpx",h:"24rpx",style:{"margin-right":"8rpx"}})):(0,x.createCommentVNode)("",!0),r.showCountryInfo?((0,x.openBlock)(),(0,x.createBlock)(c,{key:1,user:i.info,color:r.nicknameColor,desc:i.desc,"show-code":i.showCountryCode},null,8,["user","color","desc","show-code"])):(0,x.createCommentVNode)("",!0),(0,x.createVNode)(a,{info:i.info,"vip-always":i.isAdmin==1,"level-always":i.levelAlways,style:{"margin-right":"8rpx"}},null,8,["info","vip-always","level-always"])])),i.noName?(0,x.createCommentVNode)("",!0):((0,x.openBlock)(),(0,x.createElementBlock)("u-text",{key:2,class:(0,x.normalizeClass)(["nickname-nvue",[r.age?"":"m-r-4"]]),style:(0,x.normalizeStyle)({color:r.nicknameColor,fontSize:i.nameSize,maxWidth:i.nameWidth,fontWeight:i.fw})},(0,x.toDisplayString)(r.nicknameText),7)),r.age?((0,x.openBlock)(),(0,x.createElementBlock)("u-text",{key:3,class:"nickname-nvue",style:(0,x.normalizeStyle)({color:r.nicknameColor,fontSize:i.nameSize,fontWeight:i.fw})},(0,x.toDisplayString)(r.age),5)):(0,x.createCommentVNode)("",!0)])):((0,x.openBlock)(),(0,x.createElementBlock)("view",{key:0,class:"user-info"},[i.noName?(0,x.createCommentVNode)("",!0):((0,x.openBlock)(),(0,x.createElementBlock)("u-text",{key:0,class:(0,x.normalizeClass)(["nickname-nvue",[r.age?"":"m-r-4"]]),style:(0,x.normalizeStyle)({color:r.nicknameColor,fontSize:i.nameSize,maxWidth:i.nameWidth,fontWeight:i.fw})},(0,x.toDisplayString)(r.nicknameText),7)),r.age?((0,x.openBlock)(),(0,x.createElementBlock)("u-text",{key:1,class:"nickname-nvue m-r-4",style:(0,x.normalizeStyle)({color:r.nicknameColor,fontSize:i.nameSize,fontWeight:i.fw})},(0,x.toDisplayString)(r.age),5)):(0,x.createCommentVNode)("",!0),r.officialStr?((0,x.openBlock)(),(0,x.createElementBlock)("u-text",{key:2,class:"text-official"},(0,x.toDisplayString)(r.officialStr),1)):((0,x.openBlock)(),(0,x.createElementBlock)("view",{key:3,class:"user-info"},[(0,x.createVNode)(a,{info:i.info,"vip-always":i.isAdmin==1,"level-always":i.levelAlways,style:{"margin-right":"8rpx"}},null,8,["info","vip-always","level-always"]),r.showCountryInfo?((0,x.openBlock)(),(0,x.createBlock)(c,{key:0,user:i.info,color:r.nicknameColor,"show-code":i.showCountryCode,style:{"margin-right":"8rpx"}},null,8,["user","color","show-code"])):(0,x.createCommentVNode)("",!0),i.showAuth&&i.info.auth_status==1?((0,x.openBlock)(),(0,x.createBlock)(u,{key:1,src:"s/pub/verified_1.png",w:"24rpx",h:"24rpx",style:{"margin-right":"8rpx"}})):(0,x.createCommentVNode)("",!0)]))]))])}var $t=S(fm,[["render",gm],["styles",[dm]]]);var Ke=q(Z());var _m={"coin-flex":{"":{flexDirection:"row",alignItems:"center"}}},ym={props:{coin:{type:[String,Number],default:""},w:{type:Number,default:20},size:{type:Number,default:24},mR:{type:Number,default:4},fw:{type:Number,default:400},color:{type:String,default:""}},data(){return{}},computed:{textColor(){return this.color?this.color:getApp().globalData.themeObj.color.coin}}};function wm(e,t,i,o,n,r){let a=y((0,Ke.resolveDynamicComponent)("l-img"),v);return(0,Ke.openBlock)(),(0,Ke.createElementBlock)("view",{class:"coin-flex",renderWhole:!0},[(0,Ke.createElementVNode)("u-text",{style:(0,Ke.normalizeStyle)({fontSize:`${i.size}rpx`,marginRight:`${i.mR}rpx`,fontWeight:i.fw,color:r.textColor})},(0,Ke.toDisplayString)(i.coin),5),(0,Ke.createVNode)(a,{src:"s/my/i_coins.png",w:`${i.w}rpx`,h:`${i.w}rpx`},null,8,["w","h"])])}var Ce=S(ym,[["render",wm],["styles",[_m]]]);var Dt=q(Z()),bm={emits:["click"],props:{data:{type:Object,default(){return{text:"",info:[],click:[]}}},fontSize:{type:String,default:"24rpx"},color:{type:String,default(){return getApp().globalData.themeObj.color.title}},selectable:{type:Boolean,default:!1}},data(){return{version:0,nodes:[{name:"div",children:[]}]}},watch:{data(){this.parse()}},methods:{click(e){let t=Array.isArray(this.data.click)?this.data.click[0]:this.data.click;t&&(t.disabled||(e.stopPropagation(),t.action==1?ie("/pages/main/user-home",{uid:t.id}):t.action==2?co(t.id,t.member,0):t.action==3?Ze(0,1):t.action==4?oo(t.id):t.action==5?Di(t.url,!1):t.action==6?Di(t.url,!0):t.action==100?ie(t.url):t.action==101&&this.$emit("click")))},parseTextV1(e,t,i,o="",n=""){let r={type:"text",text:`${t?"&nbsp;":""}${e}${i?"&nbsp;":""}`},a="";return o!=""&&(a+=`color:${o};`),n!=""&&(a+=`font-size:${n};`),a!=""&&(r.attrs={style:a}),r},parseDataV1(){let e=[];if(this.data.text=="[x]"){let i=this.data.info[0];this.nodes[0].children=[this.parseTextV1(i.text,!1,!1,i.color)];return}let t=this.data.text.split("[x]");for(let i=0,o=t.length;i<o;i++){let n=t[i];n!=""&&e.push(this.parseTextV1(n,!1,!1,this.color));let r=this.data.info[i];if(r){let a,c;try{g(n)||n.endsWith('"')?a=!1:a=!0;let p=t[i+1];g(p)||p.startsWith('"')||p.startsWith(",")||p.startsWith(".")?c=!1:c=!0}catch(p){a=!0,c=!0}let u="";r.user_info?r.user_info.uid==getApp().pubUser.uid?u=r.self:u=r.nickname:u=r.text,e.push(this.parseTextV1(u,a,c,r.color))}}e.length>1&&(this.nodes[0].children=e)},parseText(e,t="",i=""){let o={type:"text",text:`${e}`},n="";return g(t)||(n+=`color:${t};`),g(i)||(n+=`font-size:${i};`),n!=""&&(o.attrs={style:n}),o},parse(){let e=this.data.text.split(/(\[%\w+%\])/).filter(function(i){return i!==""});if(e.length<=1){this.parseDataV1();return}let t=[];for(let i=0,o=e.length;i<o;i++){let n=e[i];if(n.startsWith("[%")){let a=n.replace(/[\s+,\[%,%\]]/g,""),c=this.data.info[a];if(g(c)||g(c.text))continue;t.push(this.parseText(c.text,c.color,c.fontSize))}else n.startsWith(" ")&&(n=`&nbsp;${n}`),n.endsWith(" ")&&(n=`${n}&nbsp;`),t.push(this.parseText(n,this.color))}t.length>1&&(this.nodes[0].children=t)}},created(){g(this.data.text)||this.parse()}};function xm(e,t,i,o,n,r){let a=(0,Dt.resolveComponent)("rich-text");return(0,Dt.openBlock)(),(0,Dt.createBlock)(a,{onClick:r.click,nodes:n.nodes,selectable:i.selectable,style:(0,Dt.normalizeStyle)({color:i.color,fontSize:i.fontSize})},null,8,["onClick","nodes","selectable","style"])}var Pe=S(bm,[["render",xm]]);var H=q(Z());var Ci=q(Z());var Cm={line:{"":{height:"2rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%"}}},Am={computed:{bgColor(){return getApp().globalData.themeObj.color.line}}};function Tm(e,t,i,o,n,r){return(0,Ci.openBlock)(),(0,Ci.createElementBlock)("view",{style:(0,Ci.normalizeStyle)({background:r.bgColor}),class:"line",renderWhole:!0},null,4)}var Fa=S(Am,[["render",Tm],["styles",[Cm]]]);var Sm={"tran-flex":{"":{flexDirection:"row",alignItems:"center"}},"view-tran":{"":{flexDirection:"row",justifyContent:"center",alignItems:"center"}},"text-a":{"":{fontSize:"20rpx"}},"text-tran":{"":{fontSize:"26rpx",marginLeft:"8rpx"}},"text-end":{"":{color:"#999999",fontSize:"24rpx",marginLeft:"4rpx"}}},vm={components:{MLine:Fa},emits:["onTranslateFinish","onTranslateClick"],props:{text:{type:String,default:""},border:{type:Boolean,default:!1},showTran:{type:Boolean,default:!0},showTranContent:{type:Boolean,default:!0},contentTop:{type:Number,default:20},showTranEnd:{type:Boolean,default:!1},bg:{type:[Boolean,String],default:!1},textColor:{type:String,default(){return getApp().globalData.themeObj.color.barBtn}},aColor:{type:String,default:"#FFFFFF"},contentColor:{type:String,default(){return getApp().globalData.themeObj.color.title}},isAuto:{type:Boolean,default:!1},isAutoForce:{type:Boolean,default:!1},translateResult:{type:String,default:""},fromLanguage:{type:String,default:""},apiParams:{type:Object,default(){return{}}},translateSize:{type:String,default:"24rpx"},paddingTop:{type:String,default:"10rpx"},fw:{type:Number,default:0}},data(){return{transStatus:0,tranContent:""}},watch:{text(e){e&&(this.transStatus=0,this.tranContent="",this.executeTranAuto())},translateResult(e){this.transStatus=0,this.tranContent="",this.executeTranAuto()}},computed:{borderStyle(){return this.border?{"border-radius":"4px","padding-left":"10rpx","padding-right":"10rpx","padding-top":this.paddingTop}:{}},viewStyle(){if(this.border){let e=getApp().globalData.themeObj.style==_n.LIGHT?"#624A8E":"#7D8288";return{"border-radius":"4px",width:"32rpx",height:"32rpx",background:this.bg||e}}return{opacity:"0.89","border-radius":"2px",width:"26rpx",height:"26rpx",background:this.bg||"#FF4477"}},contentStyle(){let e={marginTop:`${this.contentTop}rpx`,color:this.contentColor,fontSize:this.translateSize};return this.fw>0&&(e["font-weight"]=this.fw),e},tranIconSrc(){return"s/pub/tran_end_1.png"},tranStr(){return this.isAuto?h("autoTranslation"):h("translation")},translateStr(){return h("translate")}},methods:{clickTranEndView(e){(this.isAuto||this.isAutoForce)&&(e&&e.stopPropagation(),mi())},clickThis(e){e&&e.stopPropagation(),this.reqTranslate()&&((this.isAuto||this.isAutoForce)&&this.$emit("onTranslateClick"),xr(!0))},handleTranRes(e){this.transStatus=2,this.showTranContent&&(this.tranContent=e),this.$emit("onTranslateFinish",{text:e})},reqTranslate(){if(g(this.text)||this.transStatus!=0)return!1;if(this.translateResult)return this.handleTranRes(this.translateResult),!0;this.transStatus=1;let e=this.apiParams;return e.target=getApp().globalData.translateKey,e.content=this.text,k.request("/translate/index",e,!1,!0).then(t=>{t.ok==1&&t.data.text&&this.handleTranRes(t.data.text)},t=>{this.transStatus=0}),!0},executeTranAuto(){(this.isAutoForce||this.isAuto&&fo(this.fromLanguage))&&this.$nextTick(()=>{this.reqTranslate()})}},created(){if(!(!this.isAuto&&!this.isAutoForce)&&getApp().globalData.translateAuto){if(this.translateResult){this.transStatus=2,this.tranContent=this.translateResult;return}this.executeTranAuto()}}};function km(e,t,i,o,n,r){let a=y((0,H.resolveDynamicComponent)("l-img"),v),c=(0,H.resolveComponent)("m-line");return(0,H.openBlock)(),(0,H.createElementBlock)("view",{style:(0,H.normalizeStyle)([r.borderStyle,{background:"transparent"}]),renderWhole:!0},[n.transStatus!=2?((0,H.openBlock)(),(0,H.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(0,H.withModifiers)((...u)=>r.clickThis&&r.clickThis(...u),["stop"])),class:"tran-flex"},[(0,H.createElementVNode)("view",{class:"view-tran",style:(0,H.normalizeStyle)(r.viewStyle)},[n.transStatus==1?((0,H.openBlock)(),(0,H.createBlock)(a,{key:0,src:"s/pub/tran_load_1.gif",w:"20rpx",h:"20rpx","is-gif":!0})):n.transStatus==0?((0,H.openBlock)(),(0,H.createElementBlock)("u-text",{key:1,class:"text-a",style:(0,H.normalizeStyle)({color:`${i.aColor}`})},"A",4)):(0,H.createCommentVNode)("",!0)],4),i.showTran?((0,H.openBlock)(),(0,H.createElementBlock)("u-text",{key:0,class:"text-tran",style:(0,H.normalizeStyle)({color:i.textColor})},(0,H.toDisplayString)(r.translateStr),5)):(0,H.createCommentVNode)("",!0)])):n.tranContent?((0,H.openBlock)(),(0,H.createElementBlock)("view",{key:1},[(0,H.createVNode)(c),(0,H.createElementVNode)("u-text",{style:(0,H.normalizeStyle)(r.contentStyle)},(0,H.toDisplayString)(n.tranContent),5),i.showTranEnd?((0,H.openBlock)(),(0,H.createElementBlock)("view",{key:0,onClick:t[1]||(t[1]=(...u)=>r.clickTranEndView&&r.clickTranEndView(...u)),class:"tran-flex",style:{"margin-top":"8rpx"}},[(0,H.createVNode)(a,{src:r.tranIconSrc,w:"30rpx",h:"30rpx"},null,8,["src"]),(0,H.createElementVNode)("u-text",{class:"text-end"},(0,H.toDisplayString)(r.tranStr),1)])):(0,H.createCommentVNode)("",!0)])):(0,H.createCommentVNode)("",!0)],4)}var Mt=S(vm,[["render",km],["styles",[Sm]]]);function La(e){if(g(e.info))return"";let t=Object.keys(e.info);for(let i=0,o=t.length;i<o;i++){let n=t[i];e.text=e.text.replace("[%"+n+"%]",` ${e.info[n].text} `)}return e.text}var z=q(Z());var Fm={"center-column":{"":{flexDirection:"column",alignItems:"center"}},"center-align":{"":{alignItems:"center",flexDirection:"row",justifyContent:"center"}},"confirm-pop":{"":{paddingTop:"20rpx",paddingRight:"40rpx",paddingBottom:"40rpx",paddingLeft:"40rpx",backgroundColor:"#FFFFFF",borderRadius:"16rpx"}},"gift-title":{".confirm-pop ":{fontSize:"34rpx",lineHeight:"48rpx",fontWeight:"600",marginTop:"10rpx",textAlign:"center"}},price:{".confirm-pop ":{fontSize:"24rpx",color:"#FFAA0D",marginRight:"4rpx"}},"reminder-text":{".confirm-pop ":{fontSize:"24rpx",marginLeft:"8rpx",lineHeight:"24rpx"}},"send-btn":{".confirm-pop ":{color:"#FFFFFF",fontSize:"28rpx",height:"88rpx",marginTop:"36rpx",borderRadius:"16rpx",lineHeight:"88rpx",textAlign:"center",backgroundImage:"linear-gradient(to right, #FF00BD, #FF5954)"}}},Lm={components:{LImg:v,UniPopup:re},emits:["onSendGift","onClickCancel"],data(){return{data:{content:{}},textNodes:"",popWidth:getApp().globalData.window.width-80,btnWidth:getApp().globalData.window.width-120,status:1,reminderIcon:"s/msg/no_reminder_s_1.png"}},computed:{},methods:{$str:h,clickPop(e){e.stopPropagation()},clickCancel(){this.$emit("onClickCancel"),this.$refs.confirmSendPop.close()},clickSend(){this.data.content.count=1,this.$emit("onSendGift",this.data.content),this.$refs.confirmSendPop.close(),this.status==1&&N("send_ask_gift_status",this.status)},clickNotReminder(){this.status==0?(this.status=1,this.reminderIcon="s/msg/no_reminder_s_1.png"):(this.status=0,this.reminderIcon="s/msg/no_reminder_n_1.png")},parseNodes(){let e=this.data.content.price>1?h("coinsLower"):h("coinLower");return[{name:"div",children:[{type:"text",text:h("msg.giftWorth")},{type:"text",text:"&nbsp;"+this.data.content.price,attrs:{style:"color: #FFAA0D;"}},{type:"text",text:"&nbsp;"+e+". "+h("msg.giftSureToGiveAway")+"?"}]}]},open(e){this.data=e,this.textNodes=this.parseNodes(),this.$nextTick(()=>{this.$refs.confirmSendPop.open()})}}};function Im(e,t,i,o,n,r){let a=y((0,z.resolveDynamicComponent)("l-img"),v),c=(0,z.resolveComponent)("rich-text"),u=y((0,z.resolveDynamicComponent)("uni-popup"),re);return(0,z.openBlock)(),(0,z.createBlock)(u,{"is-mask-click":!1,"mask-click":!1,mode:"center",ref:"confirmSendPop"},{default:(0,z.withCtx)(()=>[(0,z.createElementVNode)("view",{onClick:t[2]||(t[2]=(...p)=>r.clickPop&&r.clickPop(...p))},[(0,z.createElementVNode)("view",{style:(0,z.normalizeStyle)({width:`${n.popWidth}px`}),class:"confirm-pop center-column"},[(0,z.createVNode)(a,{src:n.data.content.icon,h:"144rpx",w:"144rpx"},null,8,["src"]),(0,z.createElementVNode)("u-text",{class:"gift-title"},(0,z.toDisplayString)(n.data.content.title),1),(0,z.createElementVNode)("view",{class:"center-align",style:{"margin-top":"10rpx"}},[(0,z.createElementVNode)("u-text",{class:"price"},(0,z.toDisplayString)(n.data.content.price),1),(0,z.createVNode)(a,{h:"18rpx",src:"s/my/i_coins.png",w:"18rpx"})]),(0,z.createVNode)(c,{nodes:n.textNodes,style:{"align-items":"center","flex-direction":"row","justify-content":"center","font-size":"30rpx","text-align":"center","margin-top":"32rpx","background-color":"transparent"}},null,8,["nodes"]),(0,z.createElementVNode)("view",{onClick:t[0]||(t[0]=(...p)=>r.clickNotReminder&&r.clickNotReminder(...p)),class:"center-align",style:{"margin-top":"36rpx"}},[(0,z.createVNode)(a,{src:n.reminderIcon,h:"24rpx",w:"24rpx"},null,8,["src"]),(0,z.createElementVNode)("u-text",{class:"reminder-text"},(0,z.toDisplayString)(r.$str("noMoreReminder")),1)]),(0,z.createElementVNode)("u-text",{style:(0,z.normalizeStyle)({width:`${n.btnWidth}px`}),onClick:t[1]||(t[1]=(...p)=>r.clickSend&&r.clickSend(...p)),class:"send-btn"},(0,z.toDisplayString)(r.$str("send")),5)],4),(0,z.createElementVNode)("view",{class:"center-align",style:{"margin-top":"48rpx"}},[(0,z.createVNode)(a,{onClick:r.clickCancel,h:"72rpx",src:"s/msg/close_white.png",w:"72rpx"},null,8,["onClick"])])])]),_:1},512)}var Jr=S(Lm,[["render",Im],["styles",[Fm]]]);var fe=q(Z());var Dm={"view-answer":{"":{alignItems:"center",justifyContent:"center"}},"view-answer-img":{"":{alignItems:"center",justifyContent:"center",backgroundColor:"#17BB07"}}},Mm={emits:["click"],props:{callType:{type:Number,default:1},animW:{type:Number,default:144},bgW:{type:Number,default:110},iconW:{type:Number,default:68},iconVW:{type:Number,default:48}},data(){return{}},computed:{bgStyle(){return{width:`${this.bgW}rpx`,height:`${this.bgW}rpx`,borderRadius:`${this.bgW/2}rpx`}},answerIcon(){return this.callType==pe.VIDEO?"s/call/answer_white.png":"s/call/answer_voice_white.png"},answerIconH(){return this.callType==pe.VIDEO?`${this.iconVW}rpx`:`${this.iconW}rpx`}},methods:{clickAnswer(e){e&&e.stopPropagation(),this.$emit("click")},startAnswerBgAnim(){let e=this.$refs.animAnswerBg;e==null||typeof e=="undefined"||typeof e.step=="undefined"||(e.step({scale:1.3,opacity:0},{duration:1e3}),e.step({scale:1,opacity:1},{duration:1}),e.run(()=>{this.startAnswerBgAnim()}))},startAnswerIcon(){let e=this.$refs.animAnswerImg;e==null||typeof e=="undefined"||typeof e.step=="undefined"||(e.step({rotate:-10},{duration:500}),e.step({rotate:10},{duration:500}),e.run(()=>{this.startAnswerIcon()}))}},created(){setTimeout(()=>{this.startAnswerBgAnim(),this.startAnswerIcon()},1e3)}};function Em(e,t,i,o,n,r){let a=y((0,fe.resolveDynamicComponent)("uni-transition"),st),c=y((0,fe.resolveDynamicComponent)("l-img"),v);return(0,fe.openBlock)(),(0,fe.createElementBlock)("view",{onClick:t[1]||(t[1]=(...u)=>r.clickAnswer&&r.clickAnswer(...u)),class:"view-answer",style:(0,fe.normalizeStyle)({width:`${i.animW}rpx`,height:`${i.animW}rpx`}),renderWhole:!0},[(0,fe.createVNode)(a,{ref:"animAnswerBg",show:!0,style:(0,fe.normalizeStyle)([r.bgStyle,{position:"absolute",background:"#17BB07"}])},null,8,["style"]),(0,fe.createElementVNode)("view",{onClick:t[0]||(t[0]=(...u)=>r.clickAnswer&&r.clickAnswer(...u)),style:(0,fe.normalizeStyle)(r.bgStyle),class:"view-answer-img"},[(0,fe.createVNode)(a,{ref:"animAnswerImg",show:!0},{default:(0,fe.withCtx)(()=>[(0,fe.createVNode)(c,{onClick:r.clickAnswer,src:r.answerIcon,w:`${i.iconW}rpx`,h:r.answerIconH},null,8,["onClick","src","w","h"])]),_:1},512)],4)],4)}var Ia=S(Mm,[["render",Em],["styles",[Dm]]]);var l=q(Z());var Da={data(){return{pubUser:getApp().pubUser,pubAccount:getApp().pubAccount}},methods:{eventVuexWatch(e){C("error","at store/watch.mixin.js:10","event_vuex_watch change "+e),this[e]=getApp()[e],typeof this.onEventVuexWatch=="function"&&this.onEventVuexWatch(e)}},onLoad(){uni.$on("event_vuex_watch",this.eventVuexWatch)},onUnload(){uni.$off("event_vuex_watch",this.eventVuexWatch)}};function Pn(e,t){g(e)||g(t)||(N(`game_bet_info_${getApp().globalData.uid}`,{gameId:e,betInfo:t}),getApp().globalData.hasBetNumber=!0)}function Ma(e,t){let i=R(`game_bet_info_${getApp().globalData.uid}`);if(g(i)||i.gameId!=e)return-1;let o=0,n=i.betInfo;return n[t]&&(o+=n[t].prizes),t>=5?n.B&&(o+=n.B.prizes):n.S&&(o+=n.S.prizes),t%2==0?n.E&&(o+=n.E.prizes):n.O&&(o+=n.O.prizes),o}function Ea(e){return e=="B"?10:e=="S"?11:e=="O"?12:e=="E"?13:parseInt(e)}function Zr(e){return e=="B"?[5,6,7,8,9]:e=="S"?[0,1,2,3,4]:e=="O"?[1,3,5,7,9]:e=="E"?[0,2,4,6,8]:[]}function Oa(e){return e=="B"?h("big"):e=="S"?h("small"):e=="O"?h("odd"):e=="E"?h("even"):""}function Hn(){k.request("/chat/game/exit",{})}var He=q(Z()),Om={text:{"":{color:"#333333"}},"text-small":{"":{fontSize:"32rpx",fontWeight:"600"}},"text-big":{"":{fontSize:"80rpx",fontWeight:"800"}}},Rm={emits:[],props:{sizeType:{type:Number,default:1},gameInfo:{type:Object,default(){return{}}},draw:{type:Boolean,default:!1}},data(){return{number:1,timer:!1,isDrawing:0,resNumber:0}},watch:{gameInfo:{handler(e,t){pi(e)||typeof t!="undefined"&&e.status==t.status||(C("error","at pagesGame/coms/lottery-number.vue:42","lottery-number watch "+JSON.stringify(e)),e.status==0?this.reset():e.status==1?this.startDrawing():this.showLuckNumber(e.result))},immediate:!0,deep:!0},draw:{handler(e,t){e&&this.startDrawing()}}},computed:{textClass(){return this.sizeType==1?"text-small":"text-big"},imgW(){return this.sizeType==1?"36rpx":"72rpx"}},methods:{clearTimer(){this.timer&&(clearInterval(this.timer),this.timer=!1)},startDrawing(){this.isDrawing=1,this.clearTimer(),this.timer=setInterval(()=>{let e=to(0,9);e==this.number&&(e=e+1>9?8:e+1),this.number=e},100)},showLuckNumber(e){this.isDrawing=2,this.clearTimer(),this.resNumber=e},reset(){this.clearTimer(),this.isDrawing=0}},created(){},unmounted(){this.clearTimer()}};function Nm(e,t,i,o,n,r){let a=y((0,He.resolveDynamicComponent)("l-img"),v);return(0,He.openBlock)(),(0,He.createElementBlock)("view",{renderWhole:!0},[n.isDrawing==0?((0,He.openBlock)(),(0,He.createBlock)(a,{key:0,src:"s/game/lottery-def-1.png",w:r.imgW,h:r.imgW},null,8,["w","h"])):((0,He.openBlock)(),(0,He.createElementBlock)("u-text",{key:1,class:(0,He.normalizeClass)(["text",[r.textClass]])},(0,He.toDisplayString)(n.isDrawing==1?n.number:n.resNumber),3))])}var Ai=S(Rm,[["render",Nm],["styles",[Om]]]);var Bm={"view-btn":{"":{alignItems:"center",justifyContent:"flex-end"}},"text-rate":{"":{fontWeight:"500",color:"#FFFFFF",position:"absolute",left:0,textAlign:"center",transform:"rotate(-45deg)",paddingTop:"4rpx"}},"text-number":{"":{fontSize:"28rpx",fontWeight:"600",color:"#3B0000"}},"view-bet-coins":{"":{marginBottom:"4rpx",marginTop:"4rpx"}},"text-none":{".view-bet-coins ":{lineHeight:"24rpx",fontSize:"22rpx",color:"#3B0000",textAlign:"center",width:"50rpx"}},bet:{".view-bet-coins ":{backgroundColor:"rgba(0,0,0,0.2)",height:"24rpx",alignItems:"center",paddingLeft:"8rpx",paddingRight:"8rpx",borderRadius:"12rpx",flexDirection:"row",color:"#FFFFFF"}},"text-bet":{".view-bet-coins ":{fontSize:"20rpx",lineHeight:"24rpx",fontWeight:"500",color:"#FFFFFF",marginRight:"4rpx"}},"text-win":{"":{fontSize:"14rpx",fontWeight:"800",color:"#FFFFFF"}},"img-rule":{"":{position:"absolute",top:0,right:0,paddingLeft:"4rpx",paddingRight:"4rpx",paddingBottom:"4rpx"}}},Pm={emits:["onBtnListener","onBtnToast"],props:{width:{type:Number,default:0},info:{type:Object,default(){return{}}},gameStatus:{type:Number,default:0},draw:{type:Boolean,default:!1},isCallConnect:{type:[Boolean,Number],default:!1}},data(){return{isWideS:getApp().globalData.window.isWideScreen,rateW:this.width*.225,bottomHB:parseInt(this.width*.1774),bottomHS:parseInt(this.width*.1129),status:this.info.status}},watch:{"info.status":{handler(e,t){this.status=e}}},computed:{rateStyle(){let e=this.draw||this.gameStatus==3||this.gameStatus==2,t=0;return this.status==2?t=0:e&&this.status==1&&!this.info.isBet?t=6:this.status==1||this.info.isBet&&this.info.tCoins?t=0:t=6,{width:`${this.rateW}px`,height:`${this.rateW}px`,lineHeight:`${this.rateW}px`,top:`${t}rpx`,fontSize:this.isWideS?"14rpx":"16rpx"}},bgSrc(){if(this.status==2)return"s/game/btn-bg-w-1.png";let e=this.draw||this.gameStatus==3||this.gameStatus==2;return this.info.isBet&&this.status==3&&!e?"s/game/btn-bg-c.png":this.info.isBet?"s/game/btn-bg-s.png":e?"s/game/btn-bg-none.png":this.status==0?"s/game/btn-bg-n.png":this.status==1?"s/game/btn-bg-c.png":""},fontColor(){return this.status==2?"#333333":this.draw||this.gameStatus==3||this.gameStatus==2||this.info.isBet?"#FFFFFF":this.status==0?"#333333":"#FFFFFF"},bottomStr(){return this.status==2?h("winning"):""},bottomStyle(){let e=this.status!=0||this.info.isBet?this.bottomHB:this.bottomHS;return{height:`${e}px`,lineHeight:`${e}px`}},ruleTop(){return this.status==0?10:4},noneStatus(){return this.draw||this.gameStatus==3||this.gameStatus==2}},methods:{clickRule(e){e&&e.stopPropagation();let t=this.info.number,i=Zr(t).join(",");ye(h("tips"),h("game.BSOETip",{number:t,number_str:Oa(t),number_list:i}),"",h("ok"))},clickBtn(e){if(e&&e.stopPropagation(),!this.draw){if(this.gameStatus!=0){ye(h("tips"),h("bet.lotteryDoingTip"),"",h("gotIt"));return}if(this.status!=2){if(this.info.isBet)this.status==1||this.status==0?(this.status=3,this.showNumberToast()):this.status==3&&(this.status=0);else if(this.status==0)this.status=1,this.showNumberToast();else if(this.status==1)this.status=0;else return;this.isCallConnect||di(ze("s/game/v/choose.mp3")),this.$emit("onBtnListener",this.status,this.info)}}},showNumberToast(){this.info.index>9&&!R(`game_btn_toast_${this.info.number}`)&&(this.$emit("onBtnToast",this.info.number,Zr(this.info.number).join(",")),N(`game_btn_toast_${this.info.number}`,!0))}},created(){}};function Hm(e,t,i,o,n,r){let a=y((0,l.resolveDynamicComponent)("l-img"),v),c=y((0,l.resolveDynamicComponent)("coin"),Ce);return(0,l.openBlock)(),(0,l.createElementBlock)("view",{onClick:t[1]||(t[1]=(...u)=>r.clickBtn&&r.clickBtn(...u)),class:"view-btn",style:(0,l.normalizeStyle)({width:`${i.width}px`,height:`${i.width}px`}),renderWhole:!0},[(0,l.createVNode)(a,{src:r.bgSrc,w:`${i.width}px`,h:`${i.width}px`,style:{position:"absolute",top:"0"}},null,8,["src","w","h"]),(0,l.createElementVNode)("u-text",{class:"text-rate",style:(0,l.normalizeStyle)([r.rateStyle])},(0,l.toDisplayString)(i.info.rate)+"x",5),(0,l.createElementVNode)("u-text",{class:"text-number",style:(0,l.normalizeStyle)({color:r.fontColor})},(0,l.toDisplayString)(i.info.number),5),(0,l.createElementVNode)("view",{class:"view-bet-coins"},[r.noneStatus&&n.status==1&&!i.info.isBet?((0,l.openBlock)(),(0,l.createElementBlock)("u-text",{key:0,class:"text-none"},"-")):n.status==1||i.info.isBet&&i.info.tCoins?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:1,class:"bet"},[(0,l.createElementVNode)("u-text",{class:"text-bet"},(0,l.toDisplayString)(i.info.tCoins),1),(0,l.createVNode)(a,{src:"s/my/i_coins.png",w:"16rpx",h:"16rpx"})])):((0,l.openBlock)(),(0,l.createElementBlock)("u-text",{key:2,class:"text-none"},"-"))]),(0,l.createVNode)(c,{coin:i.info.bet,size:18,w:14,color:r.fontColor,mR:2},null,8,["coin","color"]),(0,l.createElementVNode)("u-text",{class:"text-win",style:(0,l.normalizeStyle)(r.bottomStyle)},(0,l.toDisplayString)(r.bottomStr),5),i.info.index>9?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...u)=>r.clickRule&&r.clickRule(...u)),class:"img-rule",style:(0,l.normalizeStyle)({paddingTop:`${r.ruleTop}rpx`})},[(0,l.createVNode)(a,{src:"s/game/rule.png",w:"20rpx",h:"20rpx"})],4)):(0,l.createCommentVNode)("",!0)],4)}var Um=S(Pm,[["render",Hm],["styles",[Bm]]]),Gm={center:{"":{flexDirection:"row",alignItems:"center"}},"view-bet-info":{"":{flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:"128rpx"}},"view-content":{"":{width:"480rpx",height:"72rpx",borderRadius:"12rpx",flexDirection:"row",alignItems:"center",justifyContent:"center"}},"text-number":{"":{fontWeight:"600",fontSize:"32rpx",color:"#FFFFFF"},".view-result ":{fontSize:"28rpx"}},"line-text":{"":{width:"2rpx",height:"28rpx",backgroundColor:"#FFFFFF",borderRadius:"2rpx",marginLeft:"20rpx",marginRight:"20rpx"},".view-result ":{height:"24rpx"}},"view-result":{"":{width:"540rpx",height:"92rpx",backgroundColor:"rgba(255,255,255,0.39)",borderRadius:"16rpx"}},result:{".view-result ":{width:"540rpx",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"absolute",bottom:"8rpx"}},"img-res":{"":{position:"absolute",top:0,alignItems:"center"}},"view-draw":{"":{width:"420rpx",height:"60rpx",flexDirection:"row",justifyContent:"space-between"}}},Wm={emits:["onClickRule","onClickHistory"],props:{gameInfo:{type:Object,default(){return{}}},draw:{type:Boolean,default:!1},isForHer:{type:Boolean,default:!1},isCallConnect:{type:[Boolean,Number],default:!1}},data(){return{sW:getApp().globalData.window.width,status:0,prizes:0,isRotate:!1}},watch:{gameInfo:{handler(e,t){if(!pi(e)&&e.status!=t.status)if(e.status==0||e.status==1)this.status=0,this.prizes=0;else{let i=Ma(e.game_id,e.result);i==-1?(this.status=3,this.prizes=0,this.playLuckMusic(!1)):i==0?(this.status=1,this.prizes=0,this.playLuckMusic(!1)):i>0&&(this.status=2,this.prizes=i,this.playLuckMusic(!0))}},deep:!0}},computed:{resSrc(){return this.status==1?"s/game/luck-lose-f.png":this.status==2?"s/game/luck-win-f.png":this.status==3?"s/game/luck-no-f.png":""},gifSrc(){return this.status==2?"s/game/luck-win.gif":"s/game/luck-no.gif"},gifLeftSrc(){return this.status==2?"s/game/luck-win-left.gif":"s/game/luck-no-left.gif"}},methods:{$str:h,clickCenterImg(){this.draw||this.clickHistory(3)},clickRule(){this.$emit("onClickRule")},clickHistory(e){this.$emit("onClickHistory",e,this.gameInfo.game_id,1)},playLuckMusic(e){if(this.isCallConnect||!this.isForHer&&je().indexOf("/pagesGame/bet-for-her")!=-1)return;di(ze(e?"s/game/v/luck_win.mp3":"s/game/v/luck_no.mp3"))}}};function Vm(e,t,i,o,n,r){let a=y((0,l.resolveDynamicComponent)("l-img"),v),c=y((0,l.resolveDynamicComponent)("coin"),Ce),u=y((0,l.resolveDynamicComponent)("uni-icons"),J);return(0,l.openBlock)(),(0,l.createElementBlock)("view",{class:"view-bet-info",style:(0,l.normalizeStyle)({width:`${n.sW}px`}),renderWhole:!0},[(0,l.createVNode)(a,{onClick:r.clickRule,src:"s/game/rule.png",w:"48rpx",h:"48rpx",style:{"margin-left":"30rpx"}},null,8,["onClick"]),i.draw?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:"view-result"},[(0,l.createElementVNode)("view",{class:"result"},[(0,l.createElementVNode)("u-text",{class:"text-number"},(0,l.toDisplayString)(i.gameInfo.total_people),1),(0,l.createVNode)(a,{src:"s/game/people.png",w:"22rpx",h:"26rpx"}),(0,l.createElementVNode)("view",{class:"line-text"}),(0,l.createVNode)(c,{coin:i.gameInfo.total_bet,color:"#FFFFFF",size:28,fw:600,w:24},null,8,["coin"])])])):n.status==0?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:1,class:"view-content"},[(0,l.createElementVNode)("u-text",{class:"text-number"},(0,l.toDisplayString)(i.gameInfo.total_people),1),(0,l.createVNode)(a,{src:"s/game/people.png",w:"26rpx",h:"30rpx"}),(0,l.createElementVNode)("view",{class:"line-text"}),(0,l.createVNode)(c,{coin:i.gameInfo.total_bet,color:"#FFFFFF",size:32,fw:600,w:28},null,8,["coin"])])):((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:2,onClick:t[0]||(t[0]=p=>r.clickHistory(3)),class:"view-result"},[(0,l.createElementVNode)("view",{class:"result"},[(0,l.createElementVNode)("u-text",{class:"text-number"},(0,l.toDisplayString)(i.gameInfo.winners),1),(0,l.createVNode)(a,{src:"s/game/people.png",w:"22rpx",h:"26rpx"}),(0,l.createElementVNode)("view",{class:"line-text"}),(0,l.createVNode)(c,{coin:i.gameInfo.prizes,color:"#FFFFFF",size:28,fw:600,w:24},null,8,["coin"]),n.status==2?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:"center"},[(0,l.createElementVNode)("view",{class:"line-text"}),(0,l.createElementVNode)("u-text",{class:"text-number",style:{color:"#FFFA1E"}},(0,l.toDisplayString)(r.$str("prize"))+":",1),(0,l.createVNode)(c,{coin:n.prizes,size:28,fw:600,w:24},null,8,["coin"])])):(0,l.createCommentVNode)("",!0),(0,l.createVNode)(u,{type:"right",size:"28rpx",color:"#FFFFFF",style:{"margin-left":"6rpx"}})])])),(0,l.createVNode)(a,{onClick:t[1]||(t[1]=p=>r.clickHistory(2)),src:"s/game/history.png",w:"48rpx",h:"48rpx",style:{"margin-right":"30rpx"}}),n.status!=0||i.draw?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:3,onClick:t[2]||(t[2]=(...p)=>r.clickCenterImg&&r.clickCenterImg(...p)),style:(0,l.normalizeStyle)({width:`${n.sW}px`}),class:"img-res"},[i.draw?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:"view-draw"},[(0,l.createVNode)(a,{src:"s/game/luck-draw-loading.gif",w:"60rpx",h:"60rpx"}),(0,l.createVNode)(a,{src:"s/game/luck-draw.png",w:"220rpx",h:"60rpx"}),(0,l.createVNode)(a,{src:"s/game/luck-draw-loading.gif",w:"60rpx",h:"60rpx"})])):((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:1,class:"view-draw"},[(0,l.createVNode)(a,{src:r.gifLeftSrc,w:"60rpx",h:"60rpx"},null,8,["src"]),(0,l.createVNode)(a,{src:r.resSrc,w:"220rpx",h:"60rpx"},null,8,["src"]),(0,l.createVNode)(a,{src:r.gifSrc,w:"60rpx",h:"60rpx"},null,8,["src"])]))],4)):(0,l.createCommentVNode)("",!0)],4)}var jm=S(Wm,[["render",Vm],["styles",[Gm]]]),zm={"view-bet-action":{"":{height:"100rpx",width:"472rpx",paddingBottom:"20rpx",flexDirection:"row",justifyContent:"center",alignItems:"flex-end"}},"view-bg":{"":{position:"absolute",bottom:0,width:"472rpx",height:"68rpx",backgroundColor:"#270B19",borderRadius:"16rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(255,255,255,0.3)"}},"view-bet":{"":{marginLeft:"8rpx",marginRight:"8rpx",width:"270rpx",height:"80rpx",justifyContent:"center",flexDirection:"row"}},"text-action":{"":{fontSize:"28rpx",fontWeight:"600",lineHeight:"32rpx"}},"view-action":{"":{width:"82rpx",height:"72rpx",alignItems:"center"}},pos:{"":{position:"absolute",top:0,left:0}},"text-bet":{"":{fontSize:"28rpx",fontWeight:"600",color:"#FFFFFF",lineHeight:"64rpx",marginRight:"6rpx"}},"view-bet-coin":{"":{alignItems:"center",flexDirection:"row",height:"64rpx"}},"view-confirm-content":{"":{position:"fixed",left:0,backgroundColor:"rgba(0,0,0,0.4)",justifyContent:"flex-end",alignItems:"center"}},content:{".view-confirm-content ":{backgroundColor:"#FFFFFF",width:"660rpx",paddingTop:"60rpx",paddingRight:"70rpx",paddingBottom:0,paddingLeft:"70rpx",borderRadius:"40rpx",alignItems:"center"}},"text-confirm":{".view-confirm-content ":{width:"520rpx",height:"88rpx",lineHeight:"88rpx",backgroundImage:"linear-gradient(to right, #FF00BD, #FF5954)",borderRadius:"16rpx",fontSize:"28rpx",fontWeight:"500",color:"#FFFFFF",textAlign:"center"}},"view-remind":{".view-confirm-content ":{paddingTop:"20rpx",paddingBottom:"30rpx",flexDirection:"row",alignItems:"center"}},"reminder-text":{".view-confirm-content ":{fontSize:"24rpx",marginLeft:"8rpx",lineHeight:"24rpx"}}},$m={components:{RichContent:Pe},emits:["onBetActionListener","onBetFinish"],props:{gameInfo:{type:Object,default(){return{}}},singleBet:{type:Number,default:10},accountMoney:{type:Number,default:0},betMoney:{type:Number,default:0},betObj:{type:Object,default(){return{}}},roomId:{type:[String,Number],default:0},targetUser:{type:[Object,Boolean],default(){return!1}},isForHer:{type:Boolean,default:!1},gameLotteryDraw:{type:Boolean,default:!1},forHerRate:{type:Array,default(){return[.2,.8]}},isCallConnect:{type:[Boolean,Number],default:!1}},data(){return{sW:getApp().globalData.window.width,sH:getApp().globalData.window.height,popBottom:getApp().globalData.window.safeBottom+uni.upx2px(100),betNumberCount:Object.keys(this.betObj).length,showBetConfirm:!1,betConfirmRich:{text:"",info:[{type:"text",text:""}]},betConfirmWinRich:{text:"",info:[{type:"text",text:""}]},remind:!0,remindHer:!0}},watch:{betObj:{handler(e,t){this.betNumberCount=Object.keys(e).length},deep:!0}},computed:{betStr(){return this.betMoney>this.accountMoney?h("balance.no"):h("bet")},betBgSrc(){return this.betMoney<=0||this.gameLotteryDraw||this.gameInfo.status==3?"s/game/btn-bg-bet-none.png":this.betMoney>this.accountMoney?"s/game/btn-bg-bet-no.png":this.isForHer?"s/game/btn-bg-bet-other.png":"s/game/btn-bg-bet.png"},subBgSrc(){let e=this.betNumberCount*this.singleBet;return this.betNumberCount<=0||this.betMoney<=e?"s/game/btn-bg-bet-sub.png":"s/game/btn-bg-bet-add.png"},subStyle(){let e=this.betNumberCount*this.singleBet;return this.betNumberCount<=0||this.betMoney<=e?{color:"#666666",marginTop:"18rpx"}:{color:"#3B0000",marginTop:"14rpx"}},addBgSrc(){return this.gameLotteryDraw||this.betNumberCount<=0||this.betMoney>this.accountMoney?"s/game/btn-bg-bet-sub.png":"s/game/btn-bg-bet-add.png"},addStyle(){return{color:this.gameLotteryDraw||this.betNumberCount<=0||this.betMoney>this.accountMoney?"#666666":"#3B0000"}},betStyle(){return{fontSize:this.betMoney>this.accountMoney?"24rpx":"28rpx"}},remindSrc(){return(this.isForHer?this.remindHer:this.remind)?"s/msg/no_reminder_s_1.png":"s/msg/no_reminder_n_1.png"}},methods:{$str:h,clickRemind(){this.isForHer?this.remindHer=!this.remindHer:this.remind=!this.remind},clickSub(e){e&&e.stopPropagation(),this.checkGameStatus()&&(this.betMoney<=this.betNumberCount*this.singleBet||this.$emit("onBetActionListener",!1))},clickAdd(e){if(e&&e.stopPropagation(),!!this.checkGameStatus()){if(this.betMoney>this.accountMoney){Ze(Math.abs(this.betMoney-this.accountMoney),0);return}this.$emit("onBetActionListener",!0)}},clickBet(e){if(e&&e.stopPropagation(),!this.checkGameStatus()||Nn())return;if(this.betMoney>this.accountMoney){Ze(Math.abs(this.betMoney-this.accountMoney),0);return}if(R(this.isForHer?"game_bet_confirm_for":"game_bet_confirm")){this.clickConfirm();return}let i=0,o=[];for(let n in this.betObj){let r=this.betObj[n];i+=r.betCoins*r.rate,o.push(r.number)}this.isForHer?(this.betConfirmRich={text:h("bet.confirmOtherTip",{whom:he(this.targetUser.sex)}),info:{bet:{type:"text",text:o.join("\uFF0C"),color:"#FF4477"}}},this.betConfirmWinRich={text:h("bet.confirmOtherWinTip",{who:he(this.targetUser.sex)}),info:{win:{type:"text",text:h("coins.amount",{number:parseInt(i*this.forHerRate[0])}),color:"#FFAA0D"},other_win:{type:"text",text:h("coins.amount",{number:parseInt(i*this.forHerRate[1])}),color:"#FFAA0D"}}}):(this.betConfirmRich={text:h("bet.confirmTip"),info:{bet:{type:"text",text:o.join("\uFF0C"),color:"#FF4477"}}},this.betConfirmWinRich={text:h("bet.confirmWinTip"),info:{win:{type:"text",text:h("coins.amount",{number:i}),color:"#FFAA0D"}}}),this.showBetConfirm=!0},clickPopClose(){this.showBetConfirm=!1},clickConfirm(){this.isForHer?N("game_bet_confirm_for",this.remindHer):N("game_bet_confirm",this.remind);let e=[];for(let i in this.betObj){let o=this.betObj[i];e.push({number:o.number,bet:o.betCoins})}let t={game_id:this.gameInfo.game_id,room_id:this.roomId||0,bets:e,for_uid:this.isForHer?this.targetUser.uid:0};if(this.checkGameStatus()){if(this.targetUser.isLeave){Be(h("tips"),h("bet.forYouNoGameTip",{he:At(this.targetUser.sex),him:he(this.targetUser.sex)}),()=>{this.reqGameBet(t)},"",h("bet"));return}this.reqGameBet(t)}},reqGameBet(e){this.showBetConfirm=!1,this.$emit("onBetFinish",e),this.isCallConnect||di(ze(this.isForHer?"s/game/v/bet_for_her.mp3":"s/game/v/bet_self.mp3"));let t=this.betMoney;Hi(-t),k.request("/chat/game/bet",e,!1,!0).then(i=>{C("error","at pagesGame/coms/game-bet-action.vue:320","\u4E0B\u6CE8\u6210\u529F... "+JSON.stringify(i)),be(i.data.account_money),Pn(i.data.game_info.game_id,i.data.bet_info),uni.$emit("event_game_touch_bet",this.gameInfo),ea()},i=>{Hi(t)})},checkGameStatus(){if(!this.gameLotteryDraw){if(this.betNumberCount<=0){Tt(h("bet.noChooseTip"),"none","bottom");return}return this.gameInfo.status!=0?(ye(h("tips"),h("bet.lotteryDoingTip"),"",h("gotIt")),!1):!0}}}};function Km(e,t,i,o,n,r){let a=y((0,l.resolveDynamicComponent)("l-img"),v),c=y((0,l.resolveDynamicComponent)("rich-content"),Pe),u=y((0,l.resolveDynamicComponent)("coin"),Ce),p=y((0,l.resolveDynamicComponent)("uni-icons"),J);return(0,l.openBlock)(),(0,l.createElementBlock)("view",{class:"view-bet-action",renderWhole:!0},[(0,l.createElementVNode)("view",{class:"view-bg"}),(0,l.createElementVNode)("view",{onClick:t[0]||(t[0]=(...d)=>r.clickSub&&r.clickSub(...d)),class:"view-action"},[(0,l.createVNode)(a,{src:r.subBgSrc,w:"82rpx",h:"72rpx",style:{position:"absolute",top:"0",left:"0"}},null,8,["src"]),(0,l.createElementVNode)("u-text",{class:"text-action",style:(0,l.normalizeStyle)(r.subStyle)},"-",4)]),(0,l.createElementVNode)("view",{onClick:t[1]||(t[1]=(...d)=>r.clickBet&&r.clickBet(...d)),class:"view-bet"},[(0,l.createVNode)(a,{src:r.betBgSrc,w:"270rpx",h:"80rpx",style:{position:"absolute",top:"0",left:"0"}},null,8,["src"]),(0,l.createElementVNode)("u-text",{class:"text-bet",style:(0,l.normalizeStyle)(r.betStyle)},(0,l.toDisplayString)(r.betStr),5),i.betMoney<=i.accountMoney?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:"view-bet-coin"},[(0,l.createElementVNode)("u-text",{class:"text-bet"},(0,l.toDisplayString)(i.betMoney),1),(0,l.createVNode)(a,{src:"s/my/i_coins.png",w:"26rpx",h:"26rpx"})])):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("view",{onClick:t[2]||(t[2]=(...d)=>r.clickAdd&&r.clickAdd(...d)),class:"view-action"},[(0,l.createVNode)(a,{src:r.addBgSrc,w:"82rpx",h:"72rpx",style:{position:"absolute",top:"0",left:"0"}},null,8,["src"]),(0,l.createElementVNode)("u-text",{class:"text-action",style:(0,l.normalizeStyle)([r.addStyle,{"margin-top":"14rpx"}])},"+",4)]),(0,l.createElementVNode)("view",{style:(0,l.normalizeStyle)({width:`${n.sW}px`,height:`${n.sH}px`,top:`${n.showBetConfirm?0:n.sH}px`}),class:"view-confirm-content"},[(0,l.createElementVNode)("view",{class:"content",style:(0,l.normalizeStyle)({marginBottom:`${n.popBottom}px`})},[(0,l.createVNode)(c,{data:n.betConfirmRich,"font-size":"36rpx",color:"#333333",style:{"font-weight":"600",width:"520rpx","align-items":"center","text-align":"center"}},null,8,["data"]),(0,l.createVNode)(c,{data:n.betConfirmWinRich,"font-size":"20rpx",color:"#333333",style:{"margin-top":"8rpx",width:"520rpx","align-items":"center","text-align":"center"}},null,8,["data"]),(0,l.createVNode)(u,{coin:i.betMoney,size:34,w:30,color:"#FFAA0D",fw:600,style:{"margin-top":"24rpx","margin-bottom":"24rpx"}},null,8,["coin"]),(0,l.createElementVNode)("u-text",{onClick:t[3]||(t[3]=(...d)=>r.clickConfirm&&r.clickConfirm(...d)),class:"text-confirm"},(0,l.toDisplayString)(r.$str("confirm")),1),(0,l.createElementVNode)("view",{onClick:t[4]||(t[4]=(...d)=>r.clickRemind&&r.clickRemind(...d)),class:"view-remind"},[(0,l.createVNode)(a,{src:r.remindSrc,h:"24rpx",w:"24rpx"},null,8,["src"]),(0,l.createElementVNode)("u-text",{class:"reminder-text"},(0,l.toDisplayString)(r.$str("reminderNoMore")),1)]),(0,l.createVNode)(p,{onClick:r.clickPopClose,type:"closeempty",size:"36rpx",color:"#333333",style:{position:"absolute",padding:"24rpx 30rpx",top:"0",right:"0"}},null,8,["onClick"])],4)],4)])}var Ym=S($m,[["render",Km],["styles",[zm]]]),qm={center:{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"view-game-plate":{"":{alignItems:"center"}},"view-content":{"":{backgroundImage:"linear-gradient(to bottom, #846CFF, #3E0079)",borderTopWidth:"4rpx",borderTopColor:"#7A26D3",marginTop:"30rpx"}},"view-lottery":{"":{position:"absolute",top:0,width:"230rpx",height:"120rpx",backgroundImage:"linear-gradient(to bottom, #5917CD, #B79FFF)",borderRadius:"32rpx",flexDirection:"row",alignItems:"center",justifyContent:"center"}},bg:{".view-lottery ":{width:"218rpx",height:"108rpx",backgroundColor:"#FFFFFF",borderRadius:"28rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#7755DE",flexDirection:"row",alignItems:"center",justifyContent:"center"}},"view-result":{"":{flexDirection:"row",justifyContent:"space-between"}},result:{".view-result ":{height:"60rpx",paddingLeft:"12rpx",paddingRight:"4rpx",backgroundColor:"rgba(0,0,0,0.1)",borderTopLeftRadius:0,borderTopRightRadius:"12rpx",borderBottomRightRadius:"12rpx",borderBottomLeftRadius:0,flexDirection:"row",alignItems:"center",justifyContent:"center"}},text:{".view-result .result ":{fontSize:"22rpx",fontWeight:"500",color:"#FFFFFF",marginRight:"4rpx"},".view-game-code ":{fontSize:"22rpx",fontWeight:"700",color:"#FFFFFF",fontStyle:"italic",lineHeight:"26rpx",height:"26rpx",marginBottom:"-6rpx"},".view-rule-tip ":{fontSize:"20rpx",color:"#FFFFFF",marginRight:"4rpx",lineHeight:"48rpx"}},"num-bg":{".view-result .result ":{width:"44rpx",height:"44rpx",flexDirection:"row",alignItems:"center",justifyContent:"center"}},time:{".view-result ":{width:"240rpx",height:"60rpx",backgroundColor:"rgba(0,0,0,0.1)",borderTopLeftRadius:"12rpx",borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:"12rpx",flexDirection:"row",alignItems:"center",justifyContent:"center"}},"text-time":{".view-result .time ":{fontSize:"24rpx",fontWeight:"600",color:"#FFFFFF"}},"view-btn-list":{"":{flexDirection:"row",flexWrap:"wrap",paddingLeft:"24rpx"}},"view-btn-bg":{"":{backgroundColor:"#270B19",borderRadius:"16rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(255,255,255,0.3)",position:"absolute"}},"view-bet":{"":{marginBottom:"20rpx",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingRight:"10rpx"}},"text-top-up":{".view-bet ":{fontSize:"24rpx",color:"#FFFA1E",marginLeft:"4rpx"}},"view-btn-toast":{"":{height:"64rpx",position:"absolute"}},"text-toast":{".view-btn-toast ":{height:"56rpx",lineHeight:"56rpx",backgroundColor:"rgba(0,0,0,0.9)",borderRadius:"8rpx",textAlign:"center",color:"#FFFFFF",fontSize:"20rpx",paddingLeft:"10rpx",paddingRight:"10rpx"}},"text-rate":{".view-btn-toast ":{width:"16rpx",height:"16rpx",backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",bottom:0,left:"16rpx",transform:"rotate(-45deg)"}},"view-game-code":{"":{position:"absolute",top:"5rpx",right:"20rpx",borderTopWidth:"4rpx",borderTopColor:"#7A26D3",borderLeftWidth:"4rpx",borderLeftColor:"#7A26D3",borderRightWidth:"4rpx",borderRightColor:"#7A26D3",borderTopLeftRadius:"20rpx",borderTopRightRadius:"20rpx",height:"30rpx",paddingLeft:"20rpx",paddingRight:"20rpx",backgroundColor:"#846BFE",alignItems:"center",justifyContent:"flex-end"}},"view-music":{"":{position:"absolute",top:"5rpx",left:"30rpx",width:"68rpx",height:"48rpx",alignItems:"center"}},"view-bg":{".view-music ":{borderTopWidth:"4rpx",borderTopColor:"#7A26D3",borderLeftWidth:"4rpx",borderLeftColor:"#7A26D3",borderRightWidth:"4rpx",borderRightColor:"#7A26D3",borderTopLeftRadius:"30rpx",borderTopRightRadius:"30rpx",width:"60rpx",height:"30rpx",backgroundColor:"#846BFE"}},"view-rule-tip":{"":{position:"absolute",left:"8rpx",paddingBottom:"8rpx"}},content:{".view-rule-tip ":{flexDirection:"row",paddingLeft:"10rpx",paddingRight:"8rpx",height:"48rpx",backgroundColor:"rgba(0,0,0,0.8)",borderRadius:"8rpx",alignItems:"center"}},jian:{".view-rule-tip ":{width:"16rpx",height:"16rpx",backgroundColor:"rgba(0,0,0,0.8)",position:"absolute",bottom:0,left:"40rpx",transform:"rotate(-45deg)"}}},Et=getApp().globalData.window,Ue=parseInt((Et.width-uni.upx2px(128))/5)-(Et.isWideScreen?10:0),Jm=Ue*6+uni.upx2px(148);Jm<=Et.width&&(Ue=Ue+10);var Ra=parseInt(Ue*.89),Zm=[{number:0,bet:0,rate:10,status:0,betCoins:0,tCoins:0,isBet:0,index:0},{number:1,bet:0,rate:10,status:0,betCoins:0,tCoins:0,isBet:0,index:1},{number:2,bet:0,rate:10,status:0,betCoins:0,tCoins:0,isBet:0,index:2},{number:3,bet:0,rate:10,status:0,betCoins:0,tCoins:0,isBet:0,index:3},{number:4,bet:0,rate:10,status:0,betCoins:0,tCoins:0,isBet:0,index:4},{number:5,bet:0,rate:10,status:0,betCoins:0,tCoins:0,isBet:0,index:5},{number:6,bet:0,rate:10,status:0,betCoins:0,tCoins:0,isBet:0,index:6},{number:7,bet:0,rate:10,status:0,betCoins:0,tCoins:0,isBet:0,index:7},{number:8,bet:0,rate:10,status:0,betCoins:0,tCoins:0,isBet:0,index:8},{number:9,bet:0,rate:10,status:0,betCoins:0,tCoins:0,isBet:0,index:9},{number:"B",bet:0,rate:2,status:0,betCoins:0,tCoins:0,isBet:0,index:10},{number:"S",bet:0,rate:2,status:0,betCoins:0,tCoins:0,isBet:0,index:11},{number:"O",bet:0,rate:2,status:0,betCoins:0,tCoins:0,isBet:0,index:12},{number:"E",bet:0,rate:2,status:0,betCoins:0,tCoins:0,isBet:0,index:13}],Xm=le("dom"),_t=uni.createInnerAudioContext(),at=uni.createInnerAudioContext(),Qm={mixins:[Da],components:{GameBtn:Um,GameBetInfo:jm,LotteryNumber:Ai,GameBetAction:Ym},emits:["onGetPlateHeight","onOpenHistoryPop"],props:{isGameShow:{type:Boolean,default:!1},singleBet:{type:Number,default:10},gameInfo:{type:Object,default(){return{}}},targetUser:{type:[Object,Boolean],default(){return!1}},roomId:{type:[String,Number],default:0},lastResult:{type:Object,default(){return{}}},isForHer:{type:Boolean,default:!1},forHerRate:{type:Array,default(){return[.2,.8]}},isCallConnect:{type:[Boolean,Number],default:!1}},data(){return{sW:Et.width,sH:Et.height,safeB:Et.safeBottom,isWideS:Et.isWideScreen,betMoney:0,btnW:Ue,btnLastLeft:parseInt((Ue+uni.upx2px(20))/2),btnListH:Ue*3+uni.upx2px(56)+uni.upx2px(16),btnListBgH:Ra,btnListBgW1:Ue*5+uni.upx2px(118),btnListBgW2:Ue*4+uni.upx2px(90),btnListBgMargin:Ue-Ra+uni.upx2px(28),btnList:JSON.parse(JSON.stringify(Zm)),betObj:{},betAddTimes:1,gameTimer:!1,gameDoingTimeInt:-100,gameLotteryDraw:!1,gameLotteryShowInt:-100,btnToastTimer:!1,btnToastNumber:!1,btnToastTip:!1,musicBgClose:R("game_music_bg"),showRuleTip:!R("game_rule_tip")}},watch:{isCallConnect:{handler(e,t){e?this.musicBgClose||at.pause():this.musicBgClose||at.play()}}},computed:{gameDoingTimeStr(){return this.gameInfo.status==1||this.gameLotteryDraw?h("drawing"):this.gameInfo.status==0?this.gameDoingTimeInt<=0?h("aboutToStart"):`${this.gameDoingTimeInt}s`:this.gameLotteryShowInt<=0?h("aboutToStart"):`${h("nextRound")}: ${this.gameLotteryShowInt}`},btnToastStyle(){let e=parseInt((Et.width-(Ue*4+uni.upx2px(60)))/2),t;return this.btnToastNumber=="B"&&(t=e),this.btnToastNumber=="S"&&(t=Ue+uni.upx2px(20)+e),this.btnToastNumber=="O"&&(t=Ue*2+uni.upx2px(40)+e),this.btnToastNumber=="E"&&(t=Ue*3+uni.upx2px(60)+e),{bottom:Ue+uni.upx2px(4),left:`${t}px`}},musicSrc(){return this.musicBgClose?"s/game/music-close.png":"s/game/music-open.png"},resultStr(){let e=this.lastResult.result,t=e>=5?"B":"S",i=e%2==0?"E":"O";return`${e}(${t}/${i})`}},methods:{$str:h,clickMusic(e){e&&e.stopPropagation(),at.paused?(at.play(),this.musicBgClose=!1):(at.pause(),this.musicBgClose=!0),N("game_music_bg",this.musicBgClose)},onClickHistory(e,t="",i=""){this.$emit("onOpenHistoryPop",e,t,i)},onClickRule(){this.showRuleTip=!1,this.$emit("onOpenHistoryPop",1),N("game_rule_tip",!0)},clickMoney(){Ze(0,1)},setMusicPlay(e){this.isCallConnect||this.musicBgClose||(e?at.play():(at.pause(),_t.paused||_t.stop()))},getPlateHeight(){Xm.getComponentRect(this.$refs.viewGamePlate,e=>{if(e&&e.size){let t=e.size;this.$emit("onGetPlateHeight",t.height)}})},onBtnToast(e,t){this.btnToastTimer&&clearTimeout(this.btnToastTimer),this.btnToastTimer=setTimeout(()=>{this.btnToastNumber=!1},3e3),this.btnToastNumber=e,this.btnToastTip=`Contains "${t}"`},onBtnListener(e,t){let i=t.number,o=this.btnList[t.index];o&&(e==1||e==3?(o.betCoins=this.betAddTimes*this.singleBet,o.tCoins+=o.betCoins,o.status=e,this.betObj[i]=this.btnList[t.index]):e==0&&(o.betCoins=0,o.tCoins-=this.betAddTimes*this.singleBet,o.status=0,delete this.betObj[i]),this.setBetMoney(),this.refreshBetObjOriginal(),this.saveBetData())},onBetActionListener(e){if(e)this.betAddTimes+=1;else{if(this.betAddTimes==1)return;this.betAddTimes-=1}for(let t in this.betObj){let i=this.betObj[t],o=this.singleBet*this.betAddTimes;i.betCoins=o;let n=this.btnList[i.index],r=n.tCoins;n.betCoins=o,n.tCoins=e?r+this.singleBet:r-this.singleBet}this.setBetMoney(),this.saveBetData()},onBetFinish(e){for(let t in this.betObj){let i=this.betObj[t];this.btnList[i.index].isBet=!0,this.btnList[i.index].status=1}this.betObj={},this.betMoney=0,this.betAddTimes=1,this.saveBetData()},resetBtnList(e,t){this.gameDoingTimeInt=t.draw_time-getApp().getCTime(!0),this.$refs.lotteryNumber.reset();for(let i=0,o=this.btnList.length;i<o;i++){let n=this.btnList[i];n=Object.assign(n,e[i]),n.status=0,n.betCoins=0,n.tCoins=0,n.isBet=0}this.betObj={},this.betAddTimes=1,de(this.saveKey()),this.setBetMoney(),_t.paused||_t.stop()},changeBtnList(e){for(let t=0,i=this.btnList.length;t<i;t++)this.btnList[t]=Object.assign(this.btnList[t],e[t]);this.saveBetData()},changeBtnBet(e){for(let t in e){let i=e[t],o=Ea(t),n=this.btnList[o];n.status=1,n.isBet=!0,n.betCoins=i.coins,n.tCoins=n.tCoins+i.coins}},setBetMoney(){let e=Object.keys(this.betObj).length;this.betMoney=e<=0?0:e*this.betAddTimes*this.singleBet},refreshBetObjOriginal(){this.betObj=JSON.parse(JSON.stringify(this.betObj))},saveKey(){return`bet_data_${this.isForHer&&this.targetUser?this.targetUser.uid:getApp().globalData.uid}`},saveBetData(){if(!this.gameInfo.draw_time)return;let e={draw_time:this.gameInfo.draw_time,btnList:this.btnList,betObj:this.betObj,betAddTimes:this.betAddTimes};N(this.saveKey(),e)},startGameTimer(){this.gameTimer=setInterval(()=>{typeof this.gameInfo.status!="undefined"&&(this.gameInfo.status==0?(this.gameDoingTimeInt==-100&&(this.gameDoingTimeInt=this.gameInfo.draw_time-getApp().getCTime(!0)),this.gameDoingTimeInt-=1,this.gameDoingTimeInt<=0?(this.gameLotteryDraw=!0,_t.paused&&this.playLuckOpen()):this.gameLotteryDraw=!1):this.gameInfo.status==1?(this.gameLotteryDraw=!0,this.playLuckOpen()):(_t.stop(),this.gameLotteryDraw=!1,this.gameLotteryShowInt=this.gameInfo.end_time-getApp().getCTime(!0),this.gameDoingTimeInt=-100))},1e3)},playLuckOpen(){this.isCallConnect||getApp().globalData.appShow&&(!this.isForHer&&je().indexOf("/pagesGame/bet-for-her")!=-1||_t.play())},init(e,t){for(let i=0,o=this.btnList.length;i<o;i++){if(this.btnList[i]=Object.assign(this.btnList[i],e[i]),!t)continue;let n=this.btnList[i],r=t[n.number];r?(n.isBet=!0,n.betCoins=r.coins,n.tCoins>r.coins?n.status=3:(n.status=1,n.tCoins=r.coins)):n.isBet=!1}this.getPlateHeight(),C("error","at pagesGame/coms/game-plate.vue:448","-----> init finish "+JSON.stringify(this.betObj))}},created(){this.isForHer||(at.src=ze("s/game/v/game_bg.mp3"),at.loop=!0,this.isGameShow&&!this.musicBgClose&&at.play()),_t.src=ze("s/game/v/luck_open.wav"),this.startGameTimer();let e=R(this.saveKey());if(!e||!e.draw_time||g(e.btnList)||g(e.betObj))return;if(e.draw_time<=getApp().getCTime(!0)){de(this.saveKey());return}this.btnList=e.btnList,Object.keys(e.betObj).length>0&&(this.betObj=e.betObj,this.betAddTimes=e.betAddTimes||1,this.setBetMoney())},unmounted(){at.destroy(),_t.destroy(),this.gameTimer&&clearInterval(this.gameTimer)}};function ed(e,t,i,o,n,r){let a=y((0,l.resolveDynamicComponent)("uni-icons"),J),c=(0,l.resolveComponent)("game-bet-info"),u=(0,l.resolveComponent)("game-btn"),p=y((0,l.resolveDynamicComponent)("coin"),Ce),d=(0,l.resolveComponent)("game-bet-action"),_=(0,l.resolveComponent)("lottery-number"),w=y((0,l.resolveDynamicComponent)("l-img"),v);return(0,l.openBlock)(),(0,l.createElementBlock)("view",{class:"view-game-plate",ref:"viewGamePlate",style:(0,l.normalizeStyle)({width:`${n.sW}px`}),renderWhole:!0},[(0,l.createElementVNode)("view",{class:"view-content",style:(0,l.normalizeStyle)({width:`${n.sW}px`,paddingBottom:`${n.safeB}px`})},[(0,l.createElementVNode)("view",{class:"view-result",style:(0,l.normalizeStyle)({marginTop:`${n.isWideS?20:30}rpx`})},[(0,l.createElementVNode)("view",{onClick:t[0]||(t[0]=D=>r.onClickHistory(2,"",0)),class:"result"},[(0,l.createElementVNode)("u-text",{class:"text"},(0,l.toDisplayString)(i.lastResult.game_code)+":",1),(0,l.createElementVNode)("u-text",{class:"text"},(0,l.toDisplayString)(r.resultStr),1),(0,l.createVNode)(a,{type:"right",size:"28rpx",color:"#FFFFFF"})]),(0,l.createElementVNode)("view",{class:"time"},[(0,l.createElementVNode)("u-text",{class:"text-time"},(0,l.toDisplayString)(r.gameDoingTimeStr),1)])],4),(0,l.createVNode)(c,{"game-info":i.gameInfo,draw:n.gameLotteryDraw,"is-for-her":i.isForHer,"is-call-connect":i.isCallConnect,onOnClickRule:r.onClickRule,onOnClickHistory:r.onClickHistory},null,8,["game-info","draw","is-for-her","is-call-connect","onOnClickRule","onOnClickHistory"]),(0,l.createElementVNode)("view",{style:(0,l.normalizeStyle)([{width:`${n.sW}px`,height:`${n.btnListH}px`},{"align-items":"center"}])},[(0,l.createElementVNode)("view",{class:"view-btn-bg",style:(0,l.normalizeStyle)({width:`${n.btnListBgW1}px`,height:`${n.btnListBgH}px`,bottom:`${n.btnListBgMargin*2+n.btnListBgH*2}px`})},null,4),(0,l.createElementVNode)("view",{class:"view-btn-bg",style:(0,l.normalizeStyle)({width:`${n.btnListBgW1}px`,height:`${n.btnListBgH}px`,bottom:`${n.btnListBgMargin+n.btnListBgH}px`})},null,4),(0,l.createElementVNode)("view",{class:"view-btn-bg",style:(0,l.normalizeStyle)({width:`${n.btnListBgW2}px`,height:`${n.btnListBgH}px`,bottom:0})},null,4),(0,l.createElementVNode)("view",{class:"view-btn-list"},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.btnList,(D,b)=>((0,l.openBlock)(),(0,l.createBlock)(u,{key:`a${b}`,width:n.btnW,info:D,"game-status":i.gameInfo.status,draw:n.gameLotteryDraw,"is-call-connect":i.isCallConnect,style:(0,l.normalizeStyle)([{marginBottom:`${b<=9?14:0}px`,marginLeft:`${b==10?n.btnLastLeft:0}px`},{"margin-right":"20rpx"}]),onOnBtnListener:r.onBtnListener,onOnBtnToast:r.onBtnToast},null,8,["width","info","game-status","draw","is-call-connect","style","onOnBtnListener","onOnBtnToast"]))),128)),n.btnToastNumber?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:"view-btn-toast",style:(0,l.normalizeStyle)(r.btnToastStyle)},[(0,l.createElementVNode)("u-text",{class:"text-toast"},(0,l.toDisplayString)(n.btnToastTip),1),(0,l.createElementVNode)("view",{class:"text-rate"})],4)):(0,l.createCommentVNode)("",!0)])],4),(0,l.createElementVNode)("view",{class:"view-bet",style:(0,l.normalizeStyle)({marginTop:`${n.isWideS?10:20}rpx`})},[(0,l.createElementVNode)("view",{onClick:t[1]||(t[1]=(...D)=>r.clickMoney&&r.clickMoney(...D)),class:"center",style:{"padding-left":"10rpx"}},[(0,l.createVNode)(p,{coin:e.pubAccount.money,fw:500},null,8,["coin"]),(0,l.createElementVNode)("u-text",{class:"text-top-up"},(0,l.toDisplayString)(r.$str("topUp")),1),(0,l.createVNode)(a,{type:"right",size:"26rpx",color:"#FFFA1E"})]),(0,l.createVNode)(d,{"game-info":i.gameInfo,"account-money":e.pubAccount.money,"bet-money":n.betMoney,"game-lottery-draw":n.gameLotteryDraw,"bet-obj":n.betObj,"single-bet":i.singleBet,"target-user":i.targetUser,"room-id":i.roomId,"is-for-her":i.isForHer,"is-call-connect":i.isCallConnect,onOnBetActionListener:r.onBetActionListener,onOnBetFinish:r.onBetFinish},null,8,["game-info","account-money","bet-money","game-lottery-draw","bet-obj","single-bet","target-user","room-id","is-for-her","is-call-connect","onOnBetActionListener","onOnBetFinish"])],4)],4),(0,l.createElementVNode)("view",{class:"view-lottery"},[(0,l.createElementVNode)("view",{class:"bg"},[(0,l.createVNode)(_,{ref:"lotteryNumber","size-type":2,"game-info":i.gameInfo,draw:n.gameLotteryDraw},null,8,["game-info","draw"])])]),(0,l.createElementVNode)("view",{class:"view-game-code"},[(0,l.createElementVNode)("u-text",{class:"text"},(0,l.toDisplayString)(i.gameInfo.game_code),1)]),!i.isForHer&&!i.isCallConnect?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,onClick:t[2]||(t[2]=(...D)=>r.clickMusic&&r.clickMusic(...D)),class:"view-music"},[(0,l.createElementVNode)("view",{class:"view-bg"}),(0,l.createVNode)(w,{onClick:r.clickMusic,src:r.musicSrc,w:"40rpx",h:"40rpx",style:{position:"absolute",bottom:"4rpx"}},null,8,["onClick","src"])])):(0,l.createCommentVNode)("",!0),n.showRuleTip?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:1,onClick:t[3]||(t[3]=(...D)=>r.onClickRule&&r.onClickRule(...D)),class:"view-rule-tip",style:(0,l.normalizeStyle)({top:`${78+(n.isWideS?20:30)}rpx`})},[(0,l.createElementVNode)("view",{class:"content"},[(0,l.createElementVNode)("u-text",{class:"text"},(0,l.toDisplayString)(r.$str("playHowTo")),1),(0,l.createVNode)(a,{type:"right",size:"24rpx",color:"#FFFFFF"})]),(0,l.createElementVNode)("view",{class:"jian"})],4)):(0,l.createCommentVNode)("",!0)],4)}var Na=S(Qm,[["render",ed],["styles",[qm]]]),td={"history-pop":{"":{backgroundColor:"#414773",borderTopWidth:"2rpx",borderTopStyle:"solid",borderTopColor:"rgba(255,255,255,0.5)",borderRightWidth:"2rpx",borderRightStyle:"solid",borderRightColor:"rgba(255,255,255,0.5)",borderLeftWidth:"2rpx",borderLeftStyle:"solid",borderLeftColor:"rgba(255,255,255,0.5)",borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",marginLeft:-1}}},id={components:{UniPopup:re},props:{height:{type:[Number,String],default:0}},data(){return{popW:getApp().globalData.window.width+2}},methods:{open(){this.$refs.historyPop.open()},close(){this.$refs.historyPop.close()}}};function nd(e,t,i,o,n,r){let a=y((0,l.resolveDynamicComponent)("uni-popup"),re);return(0,l.openBlock)(),(0,l.createBlock)(a,{ref:"historyPop",type:"bottom","safe-area":!1},{default:(0,l.withCtx)(()=>[(0,l.createElementVNode)("view",{class:"history-pop",style:(0,l.normalizeStyle)({height:`${i.height}px`,width:`${n.popW}px`})},[(0,l.renderSlot)(e.$slots,"default",{style:"flex: 1;"})],4)]),_:3},512)}var Ba=S(id,[["render",nd],["styles",[td]]]),rd={"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},center:{"":{flexDirection:"row",alignItems:"center"}},navbar:{"":{paddingTop:0,paddingRight:"24rpx",paddingBottom:0,paddingLeft:"24rpx",marginTop:"20rpx"}},title:{".navbar ":{color:"#FFFFFF",fontSize:"32rpx",textAlign:"center",lineHeight:"44rpx"}},"multiple-wrap":{"":{borderTopLeftRadius:"8rpx",borderTopRightRadius:"8rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,borderWidth:"2rpx",borderStyle:"solid",borderColor:"#FFFFFF",position:"relative"}},"title-item":{".multiple-wrap ":{flex:1,lineHeight:"74rpx",textAlign:"center",color:"#FFFFFF",fontSize:"26rpx"}},"num-item":{".multiple-wrap ":{flex:1,lineHeight:"64rpx",textAlign:"center",color:"#FFFFFF",fontSize:"24rpx"}},"mul-str":{".multiple-wrap ":{color:"#FFFA1E"}},"split-line":{".multiple-wrap ":{backgroundColor:"#FFFFFF",height:"2rpx"}},"ver-line":{".multiple-wrap ":{backgroundColor:"#FFFFFF",width:"2rpx",height:"64rpx"}},"tips-title":{"":{marginTop:"20rpx",fontSize:"28rpx",color:"#FFFFFF",lineHeight:"40rpx"}},"tips-text":{"":{fontSize:"24rpx",color:"#FFFFFF",lineHeight:"34rpx",marginTop:"16rpx"}}},sd={emits:["onClickLeft"],components:{UniIcons:J},props:{height:{type:[Number,String],default:0},rulesList:{type:Array,default:[]},rateList:{type:Array,default:[]}},data(){return{lineLeft:(getApp().globalData.window.width-uni.upx2px(56))/2,scrollViewH:this.height-uni.upx2px(96),safeBottom:getApp().globalData.window.safeBottom}},methods:{$str:h,clickLeft(){this.$emit("onClickLeft",1)}}};function od(e,t,i,o,n,r){let a=y((0,l.resolveDynamicComponent)("uni-icons"),J);return(0,l.openBlock)(),(0,l.createElementBlock)("view",{class:"container",renderWhole:!0},[(0,l.createElementVNode)("view",{class:"navbar center-between"},[(0,l.createVNode)(a,{onClick:r.clickLeft,type:"left",size:"40rpx",color:"#FFFFFF"},null,8,["onClick"]),(0,l.createElementVNode)("u-text",{class:"title"},(0,l.toDisplayString)(r.$str("playHowTo")),1),(0,l.createElementVNode)("view",{style:{width:"40rpx"}})]),(0,l.createElementVNode)("scroll-view",{scrollY:!0,style:(0,l.normalizeStyle)([{padding:"20rpx 26rpx 0 26rpx"},{height:`${n.scrollViewH}px`,paddingBottom:`${n.safeBottom}px`}])},[(0,l.createElementVNode)("view",{class:"multiple-wrap"},[(0,l.createElementVNode)("view",{class:"center"},[(0,l.createElementVNode)("u-text",{class:"title-item"},(0,l.toDisplayString)(r.$str("game.luckyNumber")),1),(0,l.createElementVNode)("view",{class:"ver-line",style:{height:"74rpx"}}),(0,l.createElementVNode)("u-text",{class:"title-item"},(0,l.toDisplayString)(r.$str("bonusOdds")),1)]),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(i.rateList,(c,u)=>((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:"b"+u},[(0,l.createElementVNode)("view",{class:"split-line"}),(0,l.createElementVNode)("view",{class:"center"},[(0,l.createElementVNode)("u-text",{class:"num-item"},(0,l.toDisplayString)(c.title),1),(0,l.createElementVNode)("view",{class:"ver-line"}),(0,l.createElementVNode)("u-text",{class:"num-item mul-str"},(0,l.toDisplayString)(c.desc)+"x",1)])]))),128))]),(0,l.createElementVNode)("u-text",{class:"tips-title"},(0,l.toDisplayString)(r.$str("playMethods"))+":",1),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(i.rulesList,(c,u)=>((0,l.openBlock)(),(0,l.createElementBlock)("u-text",{key:"t"+u,class:"tips-text"},(0,l.toDisplayString)(c),1))),128))],4)])}var Pa=S(sd,[["render",od],["styles",[rd]]]),ad={center:{"":{flexDirection:"row",alignItems:"center"}},"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"center-justify":{"":{flexDirection:"row",justifyContent:"center"}},"log-content":{"":{marginTop:"20rpx"}},"head-cell":{".log-content ":{borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",zIndex:111,backgroundColor:"#414773"}},"list-wrap":{".log-content ":{borderWidth:"2rpx",borderStyle:"solid",borderColor:"#FFFFFF",position:"relative",marginTop:0,marginRight:"26rpx",marginBottom:0,marginLeft:"26rpx"}},"title-item":{".log-content .list-wrap ":{textAlign:"center",color:"#FFFFFF",fontSize:"20rpx"}},"num-item":{".log-content .list-wrap ":{lineHeight:"64rpx",textAlign:"center",color:"#FFFFFF",fontSize:"20rpx",position:"relative"}},price:{".log-content .list-wrap .num-item ":{fontSize:"20rpx",color:"#FFFFFF",marginRight:"4rpx"}},"split-line":{".log-content .list-wrap ":{backgroundColor:"#FFFFFF",height:"2rpx"}},"ver-line":{".log-content .list-wrap ":{backgroundColor:"#FFFFFF",width:"2rpx",height:"74rpx"}}},ld={emits:["onClickPrize"],components:{LImg:v,UniLoadMore:Qe},props:{data:{type:Object,default(){return{}}},height:{type:Number,default:0}},data(){return{apiUrl:this.data.type==1?"/chat/game/list":"/chat/game/bet-list",safeBottom:getApp().globalData.window.safeBottom,page:1,list:[],showEmpty:!1,loadMore:"loading",emptyHeight:this.height-uni.upx2px(160)-getApp().globalData.window.safeBottom-10}},computed:{getItemW(){let e=getApp().globalData.window.width-uni.upx2px(64),t=e*.3,i,o;return this.data.type==1?(i=e*.44/2,o=e*.26):(i=e*.48/3,o=e*.22),[t,i,o]}},methods:{$str:h,clickPrize(e){this.$emit("onClickPrize",e)},onLoadMore(){this.loadMore!="nomore"&&(this.loadMore="loading",this.page++,this.initData(!1,()=>{this.$nextTick(()=>{this.$refs.logList.resetLoadmore()})}))},initData(e,t){e&&(this.page=1),k.request(this.apiUrl,{page:this.page}).then(i=>{this.page==1&&(this.list=[]);let o=i.data.list;for(let n=0,r=o.length;n<r;n++){let a=o[n];a.ctime=new Date().getTime();let c=a.result<5?"S":"B",u=a.result%2==0?"E":"O";a.resultStr=a.result+" ("+c+"/"+u+")",this.list.push(a)}this.loadMore=i.data.has_more?"loadmore":"nomore",this.showEmpty=this.list.length<=0,typeof t=="function"&&t()})}}};function cd(e,t,i,o,n,r){let a=y((0,l.resolveDynamicComponent)("l-img"),v),c=y((0,l.resolveDynamicComponent)("uni-icons"),J),u=y((0,l.resolveDynamicComponent)("uni-load-more"),Qe);return(0,l.openBlock)(),(0,l.createElementBlock)("view",{style:{flex:"1"},renderWhole:!0},[(0,l.createElementVNode)("list",{ref:"logList",class:"log-content",scrollable:!0,showScrollbar:!1,onLoadmore:t[0]||(t[0]=(...p)=>r.onLoadMore&&r.onLoadMore(...p)),loadmoreoffset:20,offsetAccuracy:10},[(0,l.createElementVNode)("header",null,[(0,l.createElementVNode)("view",{style:{background:"#414773"}},[(0,l.createElementVNode)("view",{class:"center list-wrap head-cell"},[(0,l.createElementVNode)("u-text",{class:"title-item",style:(0,l.normalizeStyle)({width:`${r.getItemW[0]}px`})},(0,l.toDisplayString)(r.$str("issue")),5),(0,l.createElementVNode)("view",{class:"ver-line"}),i.data.type!=1?((0,l.openBlock)(),(0,l.createElementBlock)("u-text",{key:0,class:"title-item",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},(0,l.toDisplayString)(r.$str("bet.numRank")),5)):(0,l.createCommentVNode)("",!0),i.data.type!=1?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:1,class:"ver-line"})):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("u-text",{class:"title-item",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},(0,l.toDisplayString)(i.data.type==1?r.$str("winners"):r.$str("bet.my")),5),(0,l.createElementVNode)("view",{class:"ver-line"}),(0,l.createElementVNode)("u-text",{class:"title-item",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},(0,l.toDisplayString)(r.$str("result")),5),(0,l.createElementVNode)("view",{class:"ver-line"}),(0,l.createElementVNode)("u-text",{class:"title-item",style:(0,l.normalizeStyle)({width:`${r.getItemW[2]}px`})},(0,l.toDisplayString)(r.$str("bonus")),5)])])]),(0,l.createElementVNode)("cell",null,[(0,l.createElementVNode)("view",{class:"list-wrap"},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.list,(p,d)=>((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:"a"+p.ctime},[(0,l.createElementVNode)("view",{class:"center"},[(0,l.createElementVNode)("view",{class:"center",style:(0,l.normalizeStyle)([{position:"relative"},{width:`${r.getItemW[0]}px`}])},[i.data.type==2&&p.prizes>0?((0,l.openBlock)(),(0,l.createBlock)(a,{key:0,src:"s/game/fireworks.png",w:"20rpx",h:"20rpx",style:{"margin-left":"16rpx","margin-right":"10rpx"}})):((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:1,style:{width:"46rpx"}})),(0,l.createElementVNode)("u-text",{class:"num-item"},(0,l.toDisplayString)(p.game_code),1)],4),(0,l.createElementVNode)("view",{class:"ver-line"}),i.data.type!=1?((0,l.openBlock)(),(0,l.createElementBlock)("u-text",{key:0,class:"num-item",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},(0,l.toDisplayString)(p.bet),5)):(0,l.createCommentVNode)("",!0),i.data.type!=1?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:1,class:"ver-line"})):(0,l.createCommentVNode)("",!0),(0,l.createElementVNode)("view",{class:"num-item center-align",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},[(0,l.createElementVNode)("u-text",{class:"price"},(0,l.toDisplayString)(i.data.type==1?p.winners:p.bet_coins),1),i.data.type!=1?((0,l.openBlock)(),(0,l.createBlock)(a,{key:0,src:"s/my/i_coins.png",w:"18rpx",h:"18rpx"})):(0,l.createCommentVNode)("",!0)],4),(0,l.createElementVNode)("view",{class:"ver-line"}),(0,l.createElementVNode)("u-text",{class:"num-item",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},(0,l.toDisplayString)(p.resultStr),5),(0,l.createElementVNode)("view",{class:"ver-line"}),(0,l.createElementVNode)("view",{onClick:_=>r.clickPrize(p.game_id),style:(0,l.normalizeStyle)({width:`${r.getItemW[2]}px`}),class:"num-item center-align"},[(0,l.createElementVNode)("u-text",{class:"price"},(0,l.toDisplayString)(p.prizes),1),(0,l.createVNode)(a,{src:"s/my/i_coins.png",w:"18rpx",h:"18rpx"}),(0,l.createVNode)(c,{type:"right",color:"#FFFFFF",size:"30rpx"})],12,["onClick"])]),d!=n.list.length-1?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:"split-line"})):(0,l.createCommentVNode)("",!0)]))),128)),n.showEmpty?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:"center-align",style:(0,l.normalizeStyle)({height:`${n.emptyHeight}px`})},[(0,l.createVNode)(a,{src:"s/game/empty_record.png",w:"182rpx",h:"168rpx"})],4)):(0,l.createCommentVNode)("",!0)])]),(0,l.createElementVNode)("cell",null,[(0,l.createElementVNode)("view",{style:(0,l.normalizeStyle)({height:`${n.safeBottom+10}px`})},null,4)]),n.loadMore!="nomore"?((0,l.openBlock)(),(0,l.createElementBlock)("header",{key:0},[(0,l.createVNode)(u,{status:n.loadMore,color:"#FFFFFF"},null,8,["status"])])):(0,l.createCommentVNode)("",!0)],544)])}var ud=S(ld,[["render",cd],["styles",[ad]]]),pd={center:{"":{flexDirection:"row",alignItems:"center"}},"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"center-justify":{"":{flexDirection:"row",justifyContent:"center"}},navbar:{"":{paddingTop:0,paddingRight:"24rpx",paddingBottom:0,paddingLeft:"24rpx",marginTop:"20rpx"}},title:{".navbar ":{color:"#FFFFFF",fontSize:"32rpx",textAlign:"center",lineHeight:"44rpx",marginTop:"12rpx"}},"active-line":{".navbar ":{height:"4rpx",backgroundColor:"#FF4477",borderRadius:"2rpx",marginTop:"8rpx"}},"active-empty":{".navbar ":{backgroundColor:"rgba(0,0,0,0)"}},"swiper-home":{"":{flex:1}}},hd={emits:["onClickLeft"],components:{GameHistoryLogList:ud,UniLoadMore:Qe,LImg:v,UniIcons:J},props:{height:{type:[Number,String],default:0},showType:{type:[Number,String],default:0}},data(){return{curIndex:this.showType,tabList:[{id:"history",type:1,title:h("history"),ml:0},{id:"my",type:2,title:h("my"),ml:160}],pageList:[]}},methods:{$str:h,clickLeft(){this.$emit("onClickLeft",2)},onClickPrize(e){this.$emit("onClickPrizeDetail",e)},onSwiperChange(e){this.curIndex=e.detail.current;let t=this.pageList[this.curIndex];t.list.length<=0&&t.initData(!0)},changeActive(e){this.curIndex!=e&&(this.curIndex=e)}},created(){this.$nextTick(()=>{for(let e=0,t=this.tabList.length;e<t;e++){let i=this.$refs[`page${e}`];this.pageList.push(i[0])}this.pageList[this.curIndex].initData(!0)})}};function md(e,t,i,o,n,r){let a=y((0,l.resolveDynamicComponent)("uni-icons"),J),c=(0,l.resolveComponent)("game-history-log-list"),u=(0,l.resolveComponent)("swiper-item"),p=(0,l.resolveComponent)("swiper");return(0,l.openBlock)(),(0,l.createElementBlock)("view",{class:"container",style:(0,l.normalizeStyle)({height:`${i.height}px`}),renderWhole:!0},[(0,l.createElementVNode)("view",{class:"navbar center-between"},[(0,l.createVNode)(a,{onClick:r.clickLeft,type:"left",size:"40rpx",color:"#FFFFFF"},null,8,["onClick"]),(0,l.createElementVNode)("view",{class:"center"},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.tabList,(d,_)=>((0,l.openBlock)(),(0,l.createElementBlock)("view",{onClick:w=>r.changeActive(_),style:(0,l.normalizeStyle)({marginLeft:`${d.ml}rpx`})},[(0,l.createElementVNode)("u-text",{class:"title"},(0,l.toDisplayString)(d.title),1),(0,l.createElementVNode)("view",{class:(0,l.normalizeClass)(["active-line",[n.curIndex==_?"":"active-empty"]])},null,2)],12,["onClick"]))),256))]),(0,l.createElementVNode)("view",{style:{width:"40rpx"}})]),(0,l.createVNode)(p,{class:"swiper-home",current:n.curIndex,duration:300,onChange:r.onSwiperChange,style:{flex:"1"}},{default:(0,l.withCtx)(()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.tabList,(d,_)=>((0,l.openBlock)(),(0,l.createBlock)(u,{class:"swiper-item",key:d.id},{default:(0,l.withCtx)(()=>[(0,l.createVNode)(c,{ref_for:!0,ref:`page${_}`,data:d,height:i.height,onOnClickPrize:r.onClickPrize},null,8,["data","height","onOnClickPrize"])]),_:2},1024))),128))]),_:1},8,["current","onChange"])],4)}var Ha=S(hd,[["render",md],["styles",[pd]]]),dd={center:{"":{flexDirection:"row",alignItems:"center"}},"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"center-justify":{"":{flexDirection:"row",justifyContent:"center"}},"column-center":{"":{flexDirection:"column",alignItems:"center",justifyContent:"center"}},navbar:{"":{paddingTop:0,paddingRight:"26rpx",paddingBottom:0,paddingLeft:"26rpx",marginTop:"20rpx"}},title:{".navbar ":{color:"#FFFFFF",fontSize:"32rpx",textAlign:"center",lineHeight:"44rpx",flex:1},".details-content .list-wrap .title-item ":{textAlign:"center",color:"#FFFFFF",fontSize:"26rpx",lineHeight:"36rpx",fontWeight:"600"}},"draw-time":{".navbar ":{color:"#FFFFFF",fontSize:"24rpx",flex:1,textAlign:"right"}},"active-line":{".navbar ":{height:"4rpx",backgroundColor:"#FF4477",borderRadius:"2rpx",marginTop:"8rpx"}},"active-empty":{".navbar ":{backgroundColor:"rgba(0,0,0,0)"}},"details-content":{"":{marginTop:"20rpx",paddingTop:"12rpx",paddingRight:"26rpx",paddingBottom:0,paddingLeft:"26rpx"}},"list-wrap":{".details-content ":{borderTopLeftRadius:"16rpx",borderTopRightRadius:"16rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,borderWidth:"2rpx",borderStyle:"solid",borderColor:"#FFFFFF",position:"relative"}},"right-bet-for":{".details-content .list-wrap ":{paddingTop:"4rpx",paddingRight:"8rpx",paddingBottom:"4rpx",paddingLeft:"16rpx",backgroundColor:"rgba(255,255,255,0.1)",borderTopLeftRadius:"200rpx",borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:"200rpx",position:"absolute",right:0,bottom:"14rpx"}},"bet-text":{".details-content .list-wrap .right-bet-for ":{fontSize:"20rpx",color:"#FFFFFF"}},"bet-name":{".details-content .list-wrap .right-bet-for ":{color:"#67D4FF",lines:1,overflow:"hidden",textOverflow:"ellipsis"}},"user-bet-for":{".details-content .list-wrap ":{height:"24rpx",lineHeight:"24rpx",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"18rpx",color:"#FFFFFF",fontSize:"16rpx",paddingTop:0,paddingRight:"12rpx",paddingBottom:0,paddingLeft:"12rpx"}},"time-line":{".details-content .list-wrap ":{width:"80rpx",height:"2rpx",backgroundColor:"#FFFFFF",opacity:.4}},"time-str":{".details-content .list-wrap ":{marginTop:"2rpx",marginRight:"12rpx",marginBottom:0,marginLeft:"12rpx",fontSize:"24rpx",color:"#FFFFFF",lineHeight:"28rpx"}},"num-str":{".details-content .list-wrap ":{fontSize:"28rpx",fontWeight:"600",color:"#FFFFFF",marginRight:"4rpx"}},"title-item":{".details-content .list-wrap ":{paddingTop:"14rpx",paddingRight:0,paddingBottom:"14rpx",paddingLeft:0,color:"#FFFFFF",fontSize:"26rpx",textAlign:"center",fontWeight:"600"}},"split-line":{".details-content .list-wrap ":{backgroundColor:"#FFFFFF",height:"2rpx"}},"ver-line-bold":{".details-content .list-wrap ":{backgroundColor:"#FFFFFF",width:"4rpx",height:"28rpx",marginTop:0,marginRight:"16rpx",marginBottom:0,marginLeft:"16rpx",borderRadius:"4rpx"}},"num-item":{"":{lineHeight:"64rpx",textAlign:"center",color:"#FFFFFF",fontSize:"24rpx"}},price:{".num-item ":{fontSize:"24rpx",color:"#FFFFFF",marginRight:"4rpx",marginTop:"2rpx"}},"ver-line":{"":{backgroundColor:"#FFFFFF",width:"2rpx",height:"100rpx"},".bottom-income ":{height:"52rpx"}},nickname:{"":{fontSize:"22rpx",color:"#FFFFFF",lines:1,overflow:"hidden",textOverflow:"ellipsis",marginBottom:"6rpx",lineHeight:"26rpx"}},"bet-num":{"":{fontSize:"24rpx",fontWeight:"600",color:"#FFFFFF",marginTop:"4rpx",marginRight:0,marginBottom:"12rpx",marginLeft:0}},"small-title":{"":{fontSize:12,color:"#FFFFFF",lineHeight:"34rpx"}},"right-gradient":{"":{width:"28rpx",height:"28rpx",position:"absolute",right:0,bottom:0,backgroundImage:"linear-gradient(to right, rgba(65, 71, 115, 0), #414773)",zIndex:11}},"bottom-income":{"":{paddingTop:"12rpx",position:"absolute",bottom:0,backgroundColor:"#34385C",borderTopWidth:"4rpx",borderTopStyle:"solid",borderTopColor:"#8E8DA4"}},"lose-str":{".bottom-income ":{fontSize:"24rpx",color:"#FF014C"}}},fd={emits:["onClickLeft"],components:{UniLoadMore:Qe,UBaseInfo:$t,LImg:v,UniIcons:J},props:{height:{type:[Number,String],default:0},gameId:{type:[Number,String],default:0}},data(){return{sw:getApp().globalData.window.width,lineLeft:(getApp().globalData.window.width-uni.upx2px(56))/2,scrollViewH:this.height-uni.upx2px(86),safeBottom:getApp().globalData.window.safeBottom,list:[],page:1,myInfo:getApp().pubUser,loadMore:"loading",gameInfo:"",betInfo:"",showEmpty:!1,betUser:"",emptyHeight:0}},computed:{getItemW(){let e=getApp().globalData.window.width-uni.upx2px(62),t=e*.35,i=e*.65/3,o=t-uni.upx2px(68);return[t,i,o]},getSafeBottom(){return this.betInfo?this.safeBottom+uni.upx2px(100):this.safeBottom}},methods:{$str:h,clickLeft(){this.$emit("onClickLeft",3)},onLoadMore(){this.loadMore!="nomore"&&(this.loadMore="loading",this.page++,this.initData(!1))},initData(e){e&&(this.page=1),k.request("/chat/game/detail",{page:this.page,game_id:this.gameId}).then(t=>{e&&(this.list=[]),this.betUser=t.data.bet_user,this.gameInfo=t.data.game_info,this.gameInfo.resultBS=this.gameInfo.result<5?"S":"B",this.gameInfo.resultOE=this.gameInfo.result%2==0?"E":"O",this.gameInfo.drawTime=mn(this.gameInfo.draw_time,!1,!1,!1),t.data.bet_info&&(this.betInfo=t.data.bet_info);let i=t.data.list;for(let o=0,n=i.length;o<n;o++){let r=i[o];this.betUser&&r.user_info.uid==this.betUser.uid?(r.lineH=134,r.betStr=h("bet.youForOther",{whom:he(r.user_info.sex)})):r.lineH=100,this.list.push(r)}if(this.loadMore=t.data.has_more?"loadmore":"nomore",this.list.length<=0){this.showEmpty=!0;let o=this.scrollViewH-this.safeBottom-uni.upx2px(262)-10;this.betInfo&&(o=o-uni.upx2px(72)),this.emptyHeight=o}})}},created(){this.initData(!0)}};function gd(e,t,i,o,n,r){let a=y((0,l.resolveDynamicComponent)("uni-icons"),J),c=y((0,l.resolveDynamicComponent)("l-img"),v),u=y((0,l.resolveDynamicComponent)("u-base-info"),$t),p=y((0,l.resolveDynamicComponent)("uni-load-more"),Qe);return(0,l.openBlock)(),(0,l.createElementBlock)("view",{class:"container",renderWhole:!0},[(0,l.createElementVNode)("view",{class:"navbar center-between"},[(0,l.createElementVNode)("view",{style:{flex:"1","flex-direction":"row"}},[(0,l.createVNode)(a,{onClick:r.clickLeft,type:"left",size:"40rpx",color:"#FFFFFF"},null,8,["onClick"])]),(0,l.createElementVNode)("u-text",{class:"title"},(0,l.toDisplayString)(r.$str("details")),1),(0,l.createElementVNode)("u-text",{class:"draw-time"},(0,l.toDisplayString)(n.gameInfo.drawTime),1)]),(0,l.createElementVNode)("list",{class:"details-content",style:(0,l.normalizeStyle)({height:`${n.scrollViewH}px`}),scrollable:!0,showScrollbar:!1,onLoadmore:t[0]||(t[0]=(...d)=>r.onLoadMore&&r.onLoadMore(...d)),loadmoreoffset:20,offsetAccuracy:10},[(0,l.createElementVNode)("cell",{class:"list-wrap"},[(0,l.createElementVNode)("view",{class:"column-center",style:{position:"relative"}},[(0,l.createElementVNode)("view",{class:"center",style:{"margin-top":"20rpx"}},[(0,l.createElementVNode)("view",{class:"time-line"}),(0,l.createElementVNode)("u-text",{class:"time-str"},(0,l.toDisplayString)(n.gameInfo.game_code),1),(0,l.createElementVNode)("view",{class:"time-line"})]),(0,l.createElementVNode)("view",{class:"center-align",style:{"margin-top":"4rpx"}},[(0,l.createElementVNode)("view",{class:"center"},[(0,l.createElementVNode)("u-text",{class:"num-str"},(0,l.toDisplayString)(n.gameInfo.total_people),1),(0,l.createVNode)(c,{src:"s/game/people.png",w:"30rpx",h:"30rpx"})]),(0,l.createElementVNode)("view",{class:"ver-line-bold"}),(0,l.createElementVNode)("view",{class:"center"},[(0,l.createElementVNode)("u-text",{class:"num-str"},(0,l.toDisplayString)(n.gameInfo.total_bet),1),(0,l.createVNode)(c,{src:"s/my/i_coins.png",w:"26rpx",h:"26rpx"})])]),(0,l.createElementVNode)("view",{class:"center-align"},[(0,l.createElementVNode)("u-text",{class:"bet-num"},(0,l.toDisplayString)(n.gameInfo.result)+" ("+(0,l.toDisplayString)(n.gameInfo.resultBS)+"/"+(0,l.toDisplayString)(n.gameInfo.resultOE)+")",1)]),n.betUser?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:"right-bet-for center"},[(0,l.createElementVNode)("u-text",{class:"bet-text"},(0,l.toDisplayString)(r.$str("bet.youFor")),1),(0,l.createElementVNode)("u-text",{class:"bet-text bet-name",style:{"max-width":"150rpx"}},(0,l.toDisplayString)(n.betUser.nickname),1)])):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("view",{class:"split-line"}),(0,l.createElementVNode)("view",{class:"center"},[(0,l.createElementVNode)("view",{class:"title-item column-center",style:(0,l.normalizeStyle)({width:`${r.getItemW[0]}px`})},[(0,l.createElementVNode)("u-text",{class:"title"},(0,l.toDisplayString)(r.$str("winners")),1),(0,l.createElementVNode)("u-text",{class:"small-title"},(0,l.toDisplayString)(n.gameInfo.winners),1)],4),(0,l.createElementVNode)("view",{class:"ver-line"}),(0,l.createElementVNode)("u-text",{class:"title-item",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},(0,l.toDisplayString)(r.$str("bet.total")),5),(0,l.createElementVNode)("view",{class:"ver-line"}),(0,l.createElementVNode)("u-text",{class:"title-item",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},"["+(0,l.toDisplayString)(n.gameInfo.result)+"]"+(0,l.toDisplayString)(r.$str("bet")),5),(0,l.createElementVNode)("view",{class:"ver-line"}),(0,l.createElementVNode)("view",{class:"title-item column-center",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},[(0,l.createElementVNode)("u-text",{class:"title"},(0,l.toDisplayString)(r.$str("bonus")),1),(0,l.createElementVNode)("view",{class:"center-align"},[(0,l.createElementVNode)("u-text",{class:"small-title",style:{"margin-right":"4rpx"}},(0,l.toDisplayString)(n.gameInfo.prizes),1),(0,l.createVNode)(c,{src:"s/my/i_coins.png",w:"24rpx",h:"24rpx"})])],4)]),(0,l.createElementVNode)("view",{class:"split-line"}),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.list,(d,_)=>((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:"a"+d.game_id},[(0,l.createElementVNode)("view",{class:"center"},[(0,l.createElementVNode)("view",{class:"center-align",style:(0,l.normalizeStyle)({width:`${r.getItemW[0]}px`})},[(0,l.createVNode)(c,{src:d.user_info.small_avatar,w:"50rpx",h:"50rpx",radius:"25rpx"},null,8,["src"]),(0,l.createElementVNode)("view",{style:{"margin-left":"4rpx"}},[(0,l.createElementVNode)("u-text",{class:"nickname",style:(0,l.normalizeStyle)({"max-width":`${r.getItemW[2]}px`})},(0,l.toDisplayString)(d.user_info.nickname),5),(0,l.createElementVNode)("view",{style:(0,l.normalizeStyle)([{"max-width":`${r.getItemW[2]}px`},{overflow:"hidden"}])},[(0,l.createVNode)(u,{info:d.user_info,"no-name":1},null,8,["info"]),(0,l.createElementVNode)("view",{class:"right-gradient"})],4),d.betStr?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,style:{"flex-direction":"row","margin-top":"10rpx"}},[(0,l.createElementVNode)("u-text",{class:"user-bet-for"},(0,l.toDisplayString)(d.betStr),1)])):(0,l.createCommentVNode)("",!0)])],4),(0,l.createElementVNode)("view",{class:"ver-line",style:(0,l.normalizeStyle)({height:`${d.lineH}rpx`})},null,4),(0,l.createElementVNode)("view",{class:"num-item center-align",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},[(0,l.createElementVNode)("u-text",{class:"small-title",style:{"margin-right":"4rpx"}},(0,l.toDisplayString)(d.total_bet),1),(0,l.createVNode)(c,{src:"s/my/i_coins.png",w:"22rpx",h:"22rpx"})],4),(0,l.createElementVNode)("view",{class:"ver-line",style:(0,l.normalizeStyle)({height:`${d.lineH}rpx`})},null,4),(0,l.createElementVNode)("view",{class:"num-item center-align",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},[(0,l.createElementVNode)("u-text",{class:"small-title",style:{"margin-right":"4rpx"}},(0,l.toDisplayString)(d.win_bet),1),(0,l.createVNode)(c,{src:"s/my/i_coins.png",w:"22rpx",h:"22rpx"})],4),(0,l.createElementVNode)("view",{class:"ver-line",style:(0,l.normalizeStyle)({height:`${d.lineH}rpx`})},null,4),(0,l.createElementVNode)("view",{class:"num-item center-align",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},[(0,l.createElementVNode)("u-text",{class:"price"},(0,l.toDisplayString)(d.prizes),1),(0,l.createVNode)(c,{src:"s/my/i_coins.png",w:"22rpx",h:"22rpx"})],4)]),_!=n.list.length-1?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:"split-line"})):(0,l.createCommentVNode)("",!0)]))),128)),n.showEmpty?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:"center-align",style:(0,l.normalizeStyle)({height:`${n.emptyHeight}px`})},[(0,l.createVNode)(c,{src:"s/game/empty_record.png",w:"182rpx",h:"168rpx"})],4)):(0,l.createCommentVNode)("",!0)]),(0,l.createElementVNode)("cell",null,[(0,l.createElementVNode)("view",{style:(0,l.normalizeStyle)({height:`${r.getSafeBottom}px`})},null,4)]),n.loadMore!="nomore"?((0,l.openBlock)(),(0,l.createElementBlock)("header",{key:0},[(0,l.createVNode)(p,{status:n.loadMore,color:"#FFFFFF"},null,8,["status"])])):(0,l.createCommentVNode)("",!0)],36),n.betInfo?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:(0,l.normalizeClass)(["bottom-income",[n.betInfo.prizes>0?"center":"center-between"]]),style:(0,l.normalizeStyle)({paddingBottom:`${n.safeBottom}px`,width:`${n.sw}px`})},[(0,l.createElementVNode)("view",{class:"center",style:{"margin-left":"28rpx"}},[(0,l.createElementVNode)("view",{class:"center-align",style:(0,l.normalizeStyle)({width:`${r.getItemW[0]}px`})},[(0,l.createVNode)(c,{src:n.myInfo.small_avatar,w:"50rpx",h:"50rpx",radius:"25rpx"},null,8,["src"]),(0,l.createElementVNode)("view",{style:{"margin-left":"4rpx"}},[(0,l.createElementVNode)("u-text",{class:"nickname",style:(0,l.normalizeStyle)({"max-width":`${r.getItemW[2]}px`})},(0,l.toDisplayString)(n.myInfo.nickname),5),(0,l.createElementVNode)("view",{style:(0,l.normalizeStyle)([{"max-width":`${r.getItemW[2]}px`},{overflow:"hidden"}])},[(0,l.createVNode)(u,{info:n.myInfo,"no-name":1},null,8,["info"])],4)]),(0,l.createElementVNode)("view",{class:"right-gradient"})],4),(0,l.createElementVNode)("view",{class:"ver-line"}),(0,l.createElementVNode)("view",{class:"num-item center-align",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},[(0,l.createElementVNode)("u-text",{class:"small-title",style:{"margin-right":"4rpx"}},(0,l.toDisplayString)(n.betInfo.total_bet),1),(0,l.createVNode)(c,{src:"s/my/i_coins.png",w:"22rpx",h:"22rpx"})],4),(0,l.createElementVNode)("view",{class:"ver-line"}),(0,l.createElementVNode)("view",{class:"num-item center-align",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},[(0,l.createElementVNode)("u-text",{class:"small-title",style:{"margin-right":"4rpx"}},(0,l.toDisplayString)(n.betInfo.win_bet),1),(0,l.createVNode)(c,{src:"s/my/i_coins.png",w:"22rpx",h:"22rpx"})],4),(0,l.createElementVNode)("view",{class:"ver-line"}),n.betInfo.prizes>0?((0,l.openBlock)(),(0,l.createElementBlock)("view",{key:0,class:"num-item center-align",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},[(0,l.createElementVNode)("u-text",{class:"price"},(0,l.toDisplayString)(n.betInfo.prizes),1),(0,l.createVNode)(c,{src:"s/my/i_coins.png",w:"22rpx",h:"22rpx"})],4)):((0,l.openBlock)(),(0,l.createElementBlock)("u-text",{key:1,class:"num-item lose-str",style:(0,l.normalizeStyle)({width:`${r.getItemW[1]}px`})},(0,l.toDisplayString)(r.$str("lose")),5))])],6)):(0,l.createCommentVNode)("",!0)])}var Ua=S(fd,[["render",gd],["styles",[dd]]]);var me=q(Z());var _d={"view-this":{"":{paddingTop:"10rpx",paddingRight:"10rpx"}},"view-bg":{"":{position:"absolute",bottom:0,left:0}},"view-content":{"":{alignItems:"center",width:"144rpx",height:"96rpx"}},bg:{".view-content ":{width:"132rpx",height:"48rpx",marginTop:"6rpx",backgroundColor:"#FFFFFF",borderTopLeftRadius:"14rpx",borderTopRightRadius:"14rpx",alignItems:"center",justifyContent:"center"}},text:{".view-content ":{fontSize:"20rpx",color:"#FFFFFF",fontWeight:"600",lineHeight:"42rpx"}},"view-close":{"":{position:"absolute",top:0,right:0}}},yd={components:{LotteryNumber:Ai},emits:["onClose","onClick"],props:{fromType:{type:Number,default:0},gameInfo:{type:Object,default(){return{}}}},data(){return{isShow:!0,gameObj:{},gameTimer:!1,gameDoingTimeInt:-100,gameLotteryDraw:!1}},computed:{tipStr(){return this.gameObj.status==1||this.gameLotteryDraw?h("drawing"):this.gameObj.status==0?this.gameDoingTimeInt<=0?"":h("game.bettingTime",{number:this.gameDoingTimeInt}):h("winner.num",{number:this.gameObj.winners})}},watch:{gameInfo:{handler(e,t){pi(e)||(this.gameObj=e)},immediate:!0,deep:!0}},methods:{clickClose(e){e&&e.stopPropagation(),this.fromType==0&&Hn(),this.clearTimer(),this.isShow=!1,this.$emit("onClose"),uni.$emit("event_game_show_window",!1)},clickThis(e){if(e&&e.stopPropagation(),this.fromType==0){let t=je(),i=t.indexOf("/pages/call/chat-view");i!=-1?Gt(t.length-(i+1)):lo()}else this.$emit("onClick");Qo(this.fromType==0?"home_click":"call_click",!0)},clearTimer(){this.gameTimer&&(clearInterval(this.gameTimer),this.gameTimer=!1)},onMqttGameLotteryResult(e){this.gameObj=e.game_info},onMqttGameReset(e){this.gameObj=e.game_info},timerFunc(){typeof this.gameObj.status!="undefined"&&(this.gameObj.status==0?(this.gameDoingTimeInt==-100&&(this.gameDoingTimeInt=this.gameObj.draw_time-getApp().getCTime(!0)),this.gameDoingTimeInt-=1,this.gameLotteryDraw=this.gameDoingTimeInt<=0):this.gameObj.status==1?this.gameLotteryDraw=!0:(this.gameLotteryDraw=!1,this.gameDoingTimeInt=-100))},startGameTimer(){this.timerFunc(),this.gameTimer=setInterval(()=>{this.timerFunc()},1e3)},initGame(){k.request("/chat/game/index",{from_type:0}).then(e=>{be(e.data.account_money),this.gameObj=JSON.parse(JSON.stringify(e.data.game_info)),this.gameObj.status==0&&(this.gameDoingTimeInt=this.gameObj.draw_time-getApp().getCTime(!0),this.$refs.lotteryNumber.reset())})}},created(){this.gameObj=this.gameInfo,this.startGameTimer(),uni.$on("event_game_lottery_result",this.onMqttGameLotteryResult),uni.$on("event_game_reset",this.onMqttGameReset),uni.$on("event_app_show",this.initGame)},unmounted(){C("log","at pagesGame/coms/lottery-view.vue:151","-----> lottery-view destroyed"),this.clearTimer(),uni.$off("event_game_lottery_result",this.onMqttGameLotteryResult),uni.$off("event_game_reset",this.onMqttGameReset),uni.$off("event_app_show",this.initGame)}};function wd(e,t,i,o,n,r){let a=y((0,me.resolveDynamicComponent)("l-img"),v),c=(0,me.resolveComponent)("lottery-number");return n.isShow?((0,me.openBlock)(),(0,me.createElementBlock)("view",{key:0,onClick:t[1]||(t[1]=(...u)=>r.clickThis&&r.clickThis(...u)),class:"view-this",renderWhole:!0},[(0,me.createVNode)(a,{src:"s/game/lottery-bg.png",w:"144rpx",h:"96rpx",style:{position:"absolute",bottom:"0",left:"0"}}),(0,me.createElementVNode)("view",{class:"view-content"},[(0,me.createElementVNode)("view",{class:"bg"},[(0,me.createVNode)(c,{ref:"lotteryNumber","game-info":n.gameObj,draw:n.gameLotteryDraw},null,8,["game-info","draw"])]),(0,me.createElementVNode)("u-text",{class:"text"},(0,me.toDisplayString)(r.tipStr),1)]),(0,me.createVNode)(a,{src:"s/game/close.png",w:"30rpx",h:"28rpx",style:{position:"absolute",top:"0",right:"0"}}),(0,me.createElementVNode)("view",{onClick:t[0]||(t[0]=(...u)=>r.clickClose&&r.clickClose(...u)),class:"view-close",style:{width:"40rpx",height:"40rpx"}})])):(0,me.createCommentVNode)("",!0)}var Ga=S(yd,[["render",wd],["styles",[_d]]]);var Ti=q(Z()),bd={emits:["onEvent"],props:{src:{type:String,default:""},autoPlay:{type:Boolean,default:!1},loops:{type:Number,default:0},repeatMode:{type:Number,default:1},frame:{type:Number,default:0},progress:{type:Number,default:0},speed:{type:Number,default:1},eventStep:{type:Boolean,default:!1}},data(){return{refView:null}},computed:{params(){return{src:uo(ze(this.src),!1),autoPlay:this.autoPlay,loops:this.loops,repeatMode:this.repeatMode,initFrame:this.frame,progress:this.progress,speed:this.speed,eventStep:this.eventStep}}},methods:{event(e){g(e)||typeof e.detail=="undefined"||this.$emit("onEvent",e.detail)},play(){this.$refs.lottie&&this.$refs.lottie.play()},pause(){this.$refs.lottie&&this.$refs.lottie.pause()},resume(){this.$refs.lottie&&this.$refs.lottie.resume()},stop(){this.$refs.lottie&&this.$refs.lottie.stop()},setFrame(e){this.$refs.lottie&&this.$refs.lottie.setFrame(e)},setProgress(e){this.$refs.lottie&&this.$refs.lottie.setProgress(e)},setSpeed(e){this.$refs.lottie&&this.$refs.lottie.setSpeed(e)},setEventStep(e){this.$refs.lottie&&this.$refs.lottie.setEventStep(e)}},created(){}};function xd(e,t,i,o,n,r){let a=(0,Ti.resolveComponent)("nav-anim-lottie");return(0,Ti.openBlock)(),(0,Ti.createBlock)(a,{ref:"lottie",params:r.params,onEvent:r.event},null,8,["params","onEvent"])}var Wa=S(bd,[["render",xd]]);var kb=q(Kn());var Va="196fb6821dce4f0c80e0ad27ae0a2662",ja="eastus",Xr="Microsoft",Qr="Speech_Recognition",Cd={data(){return{isAudioTranslateExtensionOpen:!1,isAutomaticOpen:!1,isAutomaticTargetOpen:!1,pluginIdentifyStatus:!1,pluginTranslateStatus:!1,automaticTarget:"",myAutomaticSource:[],myAutomaticTargetLanguage:"",languageKeyObj:{},automaticInitData:{audio_transfer:0,is_language_diff:0,automatic_open:0}}},methods:{clickTranslateSwitch(){this.$refs.callAutomaticPop.open()},onAudioTranslationStarted(e,t){return!1},onAudioTranslationStopped(e,t){return!1},onAudioTranslationError(e,t,i,o){return this._checkAudioTranslationEvent(e,t)?($i.request($i.FROM_TYPE.AUDIO_INIT,`error = ${i} message = ${o}`),!0):!1},onAudioTranslationEvent(e,t,i,o){if(!this._checkAudioTranslationEvent(e,t))return!1;switch(i){case"translation_recognized":C("error","at pages/call/chat-view-audio-translation.js:55","---- \u8BED\u97F3 \u7FFB\u8BD1 \u7ED3\u679C"+o);let n=Je(o);if(n){let a=n.text;if(g(a)||g(n.translation))return;let c=n.translation[this.automaticTarget];if(g(c))return;this._handleAudioTranslationResult(a,c)}break;case"translation_recognized_canceled":let r=Je(o);if(!r)return;(r.reason==0||typeof r.error_code!="undefined"&&r.error_code!=0)&&$i.request($i.FROM_TYPE.AUDIO_TO_TEXT,o);break;case"speech_recognized":C("error","at pages/call/chat-view-audio-translation.js:75","---- \u8BED\u97F3 \u8F6C\u5199 \u7ED3\u679C"+o);break}return!0},onAutomaticStatusChange(e){return $(this,null,function*(){if(C("error","at pages/call/chat-view-audio-translation.js:95","---- test onAutomaticStatusChange ",e),e.key=="automatic")e.value&&(e.isChoose&&this.$refs.msgView?this.$refs.msgView.addMsgAutomatic({type:Ut.OPEN_TRANSLATE,language:e.language.name}):setTimeout(()=>{let t=h("automaticMsgHereTip",{he:ht(this.userInfo.sex)});this.$refs.callAutomaticView&&this.$refs.callAutomaticView.setContent(t,h("tips"))},800)),this.requestCallTranslateStat(e.value?1:0,e.language.language),this.isAutomaticOpen=e.value,this.isAutomaticOpen&&this.handlerShowAutomaticMsgTip(),_o(this.isAutomaticOpen),this.myAutomaticTargetLanguage=e.language.language;else if(e.key=="speakLanguage"){let t=[];for(let i=0,o=e.languageList.length;i<o;i++)if(e.languageList[i].voice_translate){let n=e.languageList[i].voice_translate.split(",");t.push(n[1])}this.myAutomaticSource=t,this.isAutomaticTargetOpen&&(yield this.setTranslateSwitch(!1),this.isAutomaticTargetOpen=!0,this.setAutomaticAction())}})},onEventMsgAutomaticAction(e){e==1&&this.$refs.callAutomaticPop.open()},handlerShowAutomaticMsgTip(){_r(R("call_automatic_msg_tip_1"))&&(this.showAutomaticMsgTip=!0,N("call_automatic_msg_tip_1",1),this.$nextTick(()=>{this.startAnimAutomaticMsgTip()}))},receiveTargetAutomaticAction(e){return $(this,null,function*(){if(C("error","at pages/call/chat-view-audio-translation.js:147","\u5BF9\u65B9\u9700\u8981\u81EA\u52A8\u7FFB\u8BD1 ",e),e.status){let t=this.languageKeyObj[e.language];if(t&&t.voice_translate){let i=t.voice_translate.split(",");this.automaticTarget=[i[0]],this.isAutomaticTargetOpen?(yield this.setTranslateSwitch(!1),this.isAutomaticTargetOpen=!0,this.setAutomaticAction()):(this.isAutomaticTargetOpen=!0,this.setAutomaticAction())}}else this.isAutomaticTargetOpen=!1,this.setAutomaticAction()})},requestCallTranslateStat(e,t){k.request("/chat/call/translate-stat",{status:e,language:t,room_id:this.roomInfo.room_id})},destroyAutomatic(){return $(this,null,function*(){try{yield this._pluginStopAutomatic(),this.isAudioTranslateExtensionOpen&&(yield this.enableAudiTranslation(!1))}catch(e){}})},setAutomaticAction(){return $(this,null,function*(){this.isAutomaticTargetOpen?yield this.setTranslateSwitch(!0):yield this.setTranslateSwitch(!1)})},setTranslateSwitch(e){return $(this,null,function*(){this.pluginTranslateStatus!=e&&(e?(yield this._pluginOpenTranslate(this.myAutomaticSource,this.automaticTarget),this.pluginTranslateStatus=!0,C("error","at pages/call/chat-view-audio-translation.js:195","---- \u5F00\u542F \u8BED\u97F3\u7FFB\u8BD1 "+JSON.stringify(this.myAutomaticSource)+" target = "+JSON.stringify(this.automaticTarget))):(yield this._pluginStopTranslate(),this.pluginTranslateStatus=!1,C("error","at pages/call/chat-view-audio-translation.js:199","---- \u5173\u95ED \u8BED\u97F3\u7FFB\u8BD1")))})},setIdentifySwitch(e){return $(this,null,function*(){this.pluginIdentifyStatus!=e&&(e?(yield this._pluginOpenIdentify(this.myAutomaticSource),this.pluginIdentifyStatus=!0,C("error","at pages/call/chat-view-audio-translation.js:207","---- \u5F00\u542F \u8BED\u97F3\u8F6C\u5199 "+JSON.stringify(this.myAutomaticSource))):(yield this._pluginStopIdentify(),this.pluginIdentifyStatus=!1,C("error","at pages/call/chat-view-audio-translation.js:211","---- \u5173\u95ED \u8BED\u97F3\u8F6C\u5199")))})},initAudioTranslate(){C("error","at pages/call/chat-view-audio-translation.js:215","----> \u89C6\u9891\u901A\u8BDD \u8BED\u97F3\u7FFB\u8BD1 \u521D\u59CB\u5316\u6570\u636E data ",this.automaticInitData),this.isAutomaticOpen=this.automaticInitData.automatic_open;let e,t=getApp().pubUser.speak_language;g(t)?e=[hi(!1)]:e=t.split(","),this.myAutomaticTargetLanguage=Cr(),_a().then(i=>{this.isAutomaticTargetOpen=this.userInfo.audio_translate;let o=this.userInfo.audio_language,n={};for(let r=0,a=i.list.length;r<a;r++){let c=i.list[r];if(this.languageKeyObj[c.language]=c,c.language==this.myAutomaticTargetLanguage&&(n=c),c.voice_translate){let u=c.voice_translate.split(",");e.indexOf(c.language)!=-1&&this.myAutomaticSource.push(u[1]),c.language==o&&(this.automaticTarget=[u[0]])}}this.myAutomaticSource.length<=0?this.myAutomaticSource=["en-US"]:this.myAutomaticSource.length>4&&(this.myAutomaticSource=this.myAutomaticSource.slice(0,4)),this.automaticInitData.is_language_diff&&(C("error","at pages/call/chat-view-audio-translation.js:256","\u53CC\u65B9\u6240\u8BF4\u8BED\u8A00\u76D1\u6D4B\u4E0D\u4E00\u81F4"),setTimeout(()=>{this.$refs.msgView.addMsgAutomatic({type:Ut.CHECK_DIFFERENT});let r=h("automaticMsgHereTip",{he:ht(this.userInfo.sex)});this.$refs.callAutomaticView&&this.$refs.callAutomaticView.setContent(r,h("tips")),this.isAutomaticOpen&&this.handlerShowAutomaticMsgTip()},500)),this.$refs.callAutomaticPop.initData(n,this.isAutomaticOpen),this.automaticInitData.audio_transfer&&this.setTranslateSwitch(!0)})},enableAudiTranslation(e){return $(this,null,function*(){this.isAudioTranslateExtensionOpen!=e&&(yield this.engine.enableExtension(Xr,Qr,e),this.isAudioTranslateExtensionOpen=e)})},_pluginOpenTranslate(e,t){return $(this,null,function*(){yield this._setProperty("init_translate_recognition",this._parseTranslation(e,t)),yield this._setProperty("start_continuous_translate_async","{}")})},_pluginOpenIdentify(e){return $(this,null,function*(){yield this._setProperty("init_speech_recognition",this._parseIdentify(e)),yield this._setProperty("start_continuous_recognition_async","{}")})},_pluginStopTranslate(){return $(this,null,function*(){yield this._setProperty("stop_continuous_translate_async","{}")})},_pluginStopIdentify(){return $(this,null,function*(){yield this._setProperty("stop_continuous_recognition_async","{}")})},_pluginStopAutomatic(){return $(this,null,function*(){yield this._pluginStopTranslate(),yield this._pluginStopIdentify()})},_setProperty(e,t){return $(this,null,function*(){yield this.engine.setExtensionProperty(Xr,Qr,e,t)})},_parseTranslation(e,t){return JSON.stringify({subscription:Va,region:ja,source_languages:e,target_languages:t,enable_auto_detect:!0})},_parseIdentify(e){return JSON.stringify({subscription:Va,region:ja,source_languages:e,enable_auto_detect:!0})},_checkAudioTranslationEvent(e,t){return e==Xr&&t==Qr},_handleAudioTranslationResult(e,t){C("error","at pages/call/chat-view-audio-translation.js:320",`\u81EA\u52A8\u7FFB\u8BD1\u8BC6\u522B\u7ED3\u679C sourceText = ${e} translateText = ${t}`);let i={content:JSON.stringify({source_language:this.myAutomaticSource,source_text:e,translate_text:t,translate_language:this.automaticTarget}),to_uid:this.userInfo.uid,room_id:this.roomInfo.room_id,msg_type:Ne.TEXT_AUDIO};k.request("/chat/call/send-msg",i)}},onLoad(){uni.$on("event_msg_automatic_action",this.onEventMsgAutomaticAction)},onUnload(){uni.$off("event_msg_automatic_action",this.onEventMsgAutomaticAction)}},Ad={data(){return{showFocusLoading:!1,permissionStatus:0,permissionHasSetting:!1,initDataObj:!1}},computed:{matchLoadingFromType(){return this.showFocusLoading?2:this.roomType==lt.MATCH?0:this.openType==ci.CONNECT?1:0}},methods:{getBeautyOptions(){let e,t=R("beauty_info");return t?e=Je(t):e={whitening:50,smoothing:50,rosy:50},new Yi({lighteningLevel:e.whitening/100,smoothnessLevel:e.smoothing/100,rednessLevel:e.rosy/100})},answerConnect(){this.isConnecting=!0,this.addLogAnswer(),setTimeout(()=>{this.isConnect||(this.showFocusLoading=!0,this.ringStop(!1))},5e3)},answerChat(){return this.isClickAnswer?it:(this.isClickAnswer=!0,new Promise(e=>{if(this.userInfo.is_auto==1){mt(this.userInfo.call_price)&&this.closeCallChat(this.logEndAutoHasCoins,this.closeTypeTargetHangUp,{});return}if(this.userInfo.call_exp_time&&getApp().getCTime()>this.userInfo.call_exp_time){this.addLog(`\u89E6\u53D1\u65F6\u95F4\u8FC7\u671F \u670D\u52A1\u5668\u65F6\u95F4\uFF1A${getApp().getCTime()} \u8FC7\u671F\u65F6\u95F4\uFF1A${this.userInfo.call_exp_time}`),this.closeCallChat(this.logEndAnswerExpTime,this.closeTypeTargetHangUp,{});return}if(this.userInfo.call_free_min>0){this.answerConnect(),e();return}if(!this.userInfo.check_balance){this.answerConnect(),e();return}mt(this.userInfo.call_price)&&(this.answerConnect(),e())}))},createRoom(){if(!j()){let e=this.callType==pe.VIDEO?this.userInfo.video_call_gold:this.userInfo.voice_call_gold;if(!g(e)&&e>0&&!mt(e)){k.request("/chat/call/empty",{target_uid:this.userInfo.uid,from_type:this.fromType}),this.isCallNoCoins=!0;return}}return new Promise(e=>{let t={coach_uid:this.userInfo.uid,call_type:this.callType,from_type:this.fromType};k.request("/chat/call/create",t,!1,!0,!0).then(i=>{if(!this.isCloseExecute)if(C("error","at pages/call/chat-view-init.mixin.js:102","----> call info "+JSON.stringify(i)),i.ok==1)this.addLogCreate(i.data),e(i.data),this.handleNotAnswerTimer();else if(i.ok==3){let o={user:this.userInfo,tips:i.data.tips,time:i.data.interval};X("/pagesDialog/call-trouble",{},"callTroubleData",o,{onCallTroubleCloseListener:()=>{this.closeCallChat(this.closeFromDef,this.closeTypeDef,{})}})}else i.ok==4?Kr(()=>{this.initActionCall()},()=>{this.closeCallChat(this.logEndAnchorNoCancelRest,this.closeTypeDef,{ok:i.ok})}):this.closeCallChat(this.logEndApiCreateNo,this.closeTypeNetwork,{ok:i.ok})},i=>{C("error","at pages/call/chat-view-init.mixin.js:128","api /call/create fail "+JSON.stringify(i)),this.closeCallChat(this.logEndApiCreateError,this.closeTypeNetwork,{error:i})})})},initActionMatchConnect(e){this.initData(e.roomInfo),this.initEngine()},initActionMatchAccept(e){let t={match_id:this.matchId,coach_uid:this.userInfo.uid,call_type:this.callType,from_type:this.fromType};k.request("/chat/call/create",t,!1,!0,!1).then(i=>{if(!this.isCloseExecute){if(i.ok==1){this.initUser(i.data.user_info),this.initData(i.data),this.initEngine();return}if(i.ok!=1){C("error","at pages/call/chat-view-init.mixin.js:154","---< \u5339\u914D \u540C\u610F api fail ",i);return}C("error","at pages/call/chat-view-init.mixin.js:157","-----< \u5339\u914D \u540C\u610F api success")}},i=>{})},initActionMatch(e){this.initData(e.roomInfo),this.initEngine()},initActionAnswer(e){if(g(e.roomInfo)){this.closeCallChat(this.closeFromDef,this.closeTypeDef,{});return}this.initData(e.roomInfo),this.openType==ci.CONNECT?this.initEngine():this.ringPlay(),C("error","at pages/call/chat-view-init.mixin.js:178","-----> initActionAnswer finish ... ")},initActionCall(){this.createRoom().then(e=>(this.needCheckFace=e.whether_detect_faces,this.initUser(e.user_info),this.initData(e),this.initEngine())).then(()=>{this.isRingMute||this.ringPlay(),C("error","at pages/call/chat-view-init.mixin.js:188","-----> initActionCall finish ...")})},initLoadingView(){this.roomType!=lt.MATCH&&this.actionType==ce.ANSWER&&setTimeout(()=>{this.startAnswerBgAnim(),this.startAnswerIcon(),this.startFreeMinAnim()},1e3)},initVideoInfo(e){if(e.width>=e.height){this.videoShowBlur=!0,this.videoObjectFit="contain";let t=e.width/e.height;this.videoW=this.sW,this.videoH=this.sW/t}else this.videoObjectFit="cover",this.videoW=this.sW,this.videoH=this.sH;this.videoInfo=e,this.videoInfo.showUrl=getApp().globalData.ossPath+e.video_url},initData(e){this.roomInfo=e,this.addLogRoomId(this.roomInfo.room_id),e.user_info&&(this.userInfo=e.user_info),e.heart_interval&&(this.heartInt=e.heart_interval),e.hangup_tips&&(this.hangUpTips=e.hangup_tips)},initUser(e){this.userInfo=e,this.openType==ci.NOTIFY&&e.is_match==1&&(this.targetIsMatch=!0),this.userInfo.call_free_min&&(j()||(this.freeMinDuration=60)),this.automaticInitData={audio_transfer:typeof e.audio_transfer!="undefined"?e.audio_transfer:0,is_language_diff:typeof e.is_language_diff!="undefined"?e.is_language_diff:0,automatic_open:typeof e.automatic_open!="undefined"?e.automatic_open:0}},initAction(e){this.roomType==lt.CALL?this.actionType==ce.ANSWER?this.initActionAnswer(e):this.actionType==ce.CALL&&this.initActionCall():this.roomType==lt.MATCH&&(C("info","at pages/call/chat-view-init.mixin.js:245","----> roomType match userInfo "+JSON.stringify(this.userInfo)),this.actionType==ce.MATCH_ACCEPT?this.initActionMatchAccept(e):this.actionType==ce.MATCH_CONNECT?this.initActionMatchConnect(e):this.initActionMatch(e))},initView(e){if(C("error","at pages/call/chat-view-init.mixin.js:256","----> callViewData "+JSON.stringify(e)),!(typeof e.isGame!="undefined"&&(getApp().globalData.curCallId=ut.GAME,this.initGameData(e),g(e.roomInfo)))){if(getApp().globalData.curCallId=ut.WAITING,this.addLogOnLoad(e),this.openType=e.openType,this.roomType=e.roomType,this.callType=e.callType,this.actionType=e.actionType,this.fromType=e.fromType,this.isPreview=e.isPreview,e.roomInfo&&(this.needCheckFace=e.roomInfo.whether_detect_faces),this.roomType==lt.MATCH&&(this.matchId=e.user.match_id,this.matchType=e.roomInfo.matchType),e.user.is_match==1&&(this.matchId=e.roomInfo.room_id),this.initUser(e.user),e.videoInfo&&this.initVideoInfo(e.videoInfo),this.isLoading=!0,this.actionType==ce.CALL&&(this.isRingMute=dr("call_ring_mute")==1),this.$nextTick(()=>{this.initLoadingView(),this.initGameMatchNotice()}),g(this.userInfo)||g(this.callType)){this.closeCallChat(this.closeFromDef,this.closeTypeDef,{});return}this.initDataObj=e,this.checkPermission("init").then(()=>{this.permissionStatus=1,this.permissionHasSetting=!1,this.initAction(e)})}}},onShow(){this.permissionHasSetting&&this.permissionStatus==2&&(this.permissionHasSetting=!1,this.checkPermission("show").then(()=>{this.permissionStatus=1,this.initAction(this.initDataObj)}))}};function Ka(e){O.isAndroid?Ar(0):(To(),typeof e=="function"&&Co(e))}function Ya(e,t){O.isAndroid?Ar(1):(So(t),e&&Ao())}function Td(e){let i={path:"",repeat:!0,isOut:!!e};getApp().globalData.pluginAudio.startRing(i,o=>{})}function Sd(e){getApp().globalData.pluginAudio.stopRing({isConnectCall:e?1:0})}function za(){getApp().globalData.pluginAudio.checkAudioBluetoothMode({})}var vd={mixins:[Ad,Cd],data(){return{userInfo:{},videoInfo:!1,callType:0,actionType:0,openType:0,fromType:0,roomType:0,isPreview:!1,isConnect:!1,isNavigateBack:!1,remoteUid:0,localUid:10,roomInfo:{},matchId:0,isAuth:j(),engine:void 0,isClose:!1,matchType:1,hangUpTips:"",targetIsMatch:!1,endTopUpData:!1,hasAddEngineListener:!1,hasHandleOpenEndMsg:!1,isClickHangUp:!1,connectLostTimeOut:!1,createLog:!1,upLog:!1,isCallNoCoins:!1,networkStatus:1,networkStatusLocal:1,networkStatusRemote:1,networkStatusRemoteBadShow:!1,networkStatusRemoteBadTiming:!1,isRefuseAnswer:!1,closeCallAgain:!1,isCloseExecute:!1,closeFrom:0,closeType:0,closeCurConnectStatus:!1,closeCurUser:!1,closeCurDuration:0,closeMatchRestart:!1,closeMatchCancel:!1,isHandleFirstFrame:!1,snapshotImagePath:"",girlCheckNoFaceCount:0}},methods:{$str:h,clickVoiceRemote(e){this.engine.muteRemoteAudioStream(this.userInfo.uid,!e)},clickCameraSwitch(){this.engine.switchCamera()},clickMute(e){this.onChangeMoreToolStatus(e)},eventHangup(){this.actionType==ce.CALL?this.callType==pe.VIDEO?(this.notAnswerTipTime<=0&&gi("no_answer"),gi("cancel")):(this.notAnswerTipTime<=0&&_i("no_answer"),_i("cancel")):this.actionType==ce.ANSWER&&kn("call_decline")},clickHangup(e,t,i){if(e&&e.stopPropagation(),g(this.roomInfo)||g(this.roomInfo.room_id)){this.isClickHangUp=!0,this.addLogHangUpSelf(),this.closeCallChat(this.closeFromDef,this.closeTypeDef,{});return}if(t==0&&this.hangUpTips!="")Be(h("tips"),this.hangUpTips,()=>{this.isClickHangUp=!0,this.isRefuseAnswer=this.actionType==ce.ANSWER,this.addLogHangUpSelf(),this.eventHangup(),this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{})},"",h("hangUp"));else{if(t==0&&this.targetIsMatch){this.isClickHangUp=!0,this.isRefuseAnswer=this.actionType==ce.ANSWER,k.request("/chat/match/refuse",{match_id:this.matchId},!0).then(o=>{this.addLogHangUpSelf(),this.closeCallChat(this.closeFromDef,this.closeTypeDef,{})});return}if(t==1){let o;j()&&this.isGameMatch?o=h("call.hangUpByGameTip"):o=h("call.hangUpTip",{chatType:ui(this.callType)}),Be(h("tips"),o,()=>{this.isClickHangUp=!0,this.addLogHangUpSelf(),this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{})},"",h("hangUp"));return}this.isClickHangUp=!0,this.addLogHangUpSelf(),t==0&&(this.isRefuseAnswer=this.actionType==ce.ANSWER,this.eventHangup()),this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{}),C("error","at pages/call/chat-view.mixin.js:157","\u70B9\u51FB\u6302\u65AD ... "+t)}},clickAnswer(e){if(e&&e.stopPropagation(),this.targetIsMatch){this.answerFromNotifyMatch().then(()=>this.initEngine()).then(()=>{C("error","at pages/call/chat-view.mixin.js:166","-----> clickAnswer targetIsMatch finish ..."),kn("call_answer")});return}this.answerChat().then(()=>this.initEngine()).then(()=>{kn("call_answer"),C("error","at pages/call/chat-view.mixin.js:175","-----> clickAnswer finish ...")})},onSnapshotInterface(){let i=`${plus.io.convertLocalFileSystemURL("_doc").replace(`/apps/${plus.runtime.appid}/doc/`,"")}/files/call_${new Date().getTime()}.jpg`;this.engine.takeSnapshot("",this.userInfo.uid,i).then(o=>{setTimeout(()=>{uni.getFileInfo({filePath:i,success:()=>{this.snapshotImagePath=i,this.$refs.callReportUser.handleAndroidReport(i,()=>{this.snapshotImagePath="",kr(i,!0)})},fail:n=>{this.$refs.callReportUser.handleAndroidReport(null)}})},600)},o=>{this.$refs.callReportUser.handleAndroidReport(null)})},onChangeMoreToolStatus(e){C("error","at pages/call/chat-view.mixin.js:204","-----> onChangeMoreToolStatus "+JSON.stringify(e)),e.key=="camera"?this.engine.muteLocalVideoStream(e.value==0):(this.engine.muteLocalAudioStream(e.value==0),this.isMuteVoice=e.value==0)},onTimerListener(e){this.callDuration=e.duration,this.callTotalDuration=e.total,e.total%this.heartInt==0&&this.reqHeart(),this.callTotalDuration==110&&this.handleFaceCheck(),this.callTotalDuration==30&&this.handleShowReportTips()},onPaySuccess(){this.isNoCoinsPaySuccess=!0,this.isClickAnswer=!1,this.isCallNoCoins&&!this.isConnect&&(this.isCallNoCoins=!1,this.initActionCall()),this.coinPayItem=!1,this.$refs.msgView&&this.$refs.msgView.hideNoCoins(),this.$refs.callRechargePop&&this.$refs.callRechargePop.hide()},reqHeart(){k.request("/chat/call/heart",{room_id:this.roomInfo.room_id},!1,!0).then(e=>{},e=>{e&&e.ok==0&&this.closeCallChat(this.logEndApiHeartError,this.closeTypeHeart,{ok:0})})},ringPlay(){this.isConnect||this.isClose||(O.isAndroid&&this.actionType==ce.CALL&&za(),Td(this.actionType==ce.CALL))},ringStop(e){C("error","at pages/call/chat-view.mixin.js:247","------> ring stop");let t=typeof e=="undefined"?this.isConnect:e;Sd(t)},onEventCloseCoinDialog(){this.isConnect?this.$refs.callRechargePop&&this.$refs.callRechargePop.open():this.onNoConnectCloseListener()},handleFirstFrame(e){if(this.isHandleFirstFrame)return;this.isHandleFirstFrame=!0,getApp().globalData.curCallId=this.roomInfo.room_id,this.addLogEngine(`\u6536\u5230\u8FDC\u7A0B\u7B2C\u4E00\u5E27\uFF0C\u7528\u65F6 ${e}ms`),this.roomType==lt.CALL&&(this.ringStop(!0),O.isAndroid||this.engine.enableLocalAudio(!0)),this.addLog(`\u8BF7\u6C42 call/success ${this.roomInfo.room_id} \u5F00\u59CB`);let t={room_id:this.roomInfo.room_id};k.request("/chat/call/success",t,!1,!1).then(i=>{if(this.addLog(`\u8BF7\u6C42 call/success ${this.roomInfo.room_id} ok = ${i.ok}`),i.ok==2){this.closeCallChat(this.logEndApiCallSuccessError,this.closeTypeHeart,{ok:2});return}i.ok==1&&(be(i.data.balance),this.roomType==lt.MATCH?Mr("success"):this.actionType==ce.CALL&&(this.callType==pe.VIDEO?gi("success",!1):_i("success")))}),this.localUid=0,this.isConnect=!0,this.isLoading=!1,this.$nextTick(()=>{this.reqHeart(),this.$refs.actionTimer.startTimer(),this.$refs.msgView&&this.$refs.msgView.show(),this.showViewTop(),this.showViewBottomAction(),this.handleRemindPop(),Wo()&&B("call/clearCallDisturbReceiveMtime"),O.isAndroid&&this.actionType==ce.ANSWER&&setTimeout(()=>{za()},1e3)}),setTimeout(()=>{uni.setKeepScreenOn({keepScreenOn:!0})},3e3),C("error","at pages/call/chat-view.mixin.js:315","------->  isGameShow = "+this.isGameShow),this.callType==pe.VIDEO&&this.engine.setBeautyEffectOptions(!0,this.getBeautyOptions()),this.initAudioTranslate(),Fr()||Ka(i=>{C("error","at pages/call/chat-view.mixin.js:322",`----> \u76D1\u6D4B\u5230 ${i==1?"\u622A\u5C4F":"\u5F55\u5C4F"} ...`),i==1?plus.nativeUI.confirm(h("screenshot.warningTip",{whom:he(this.userInfo.sex)}),o=>{o.index==0?ao():o.index==1&&ie("/pagesPub/my/report",{targetId:this.userInfo.uid})},{title:h("warning"),buttons:[h("customerService"),h("report"),h("gotIt")],verticalAlign:"center"}):(N("screen_record_warming",1),this.closeCallChat(this.closeFromScreenRecord,this.closeTypeDef,{}))})},setVideoStreamType(e){this.engine.setRemoteVideoStreamType(Number(this.userInfo.uid),e?Rn.Low:Rn.High)},enableFaceDetection(e){return $(this,null,function*(){if(this.callType==pe.VIDEO&&this.needCheckFace){if(!O.isAndroid){this.engine.enableFaceDetectionIos(e);return}e&&(yield this.engine.enableLocalVideo(!1),yield this.engine.enableLocalVideo(!0)),yield this.engine.enableFaceDetection(e)}})},addListeners(){this.hasAddEngineListener||(this.engine.addListener("RemoteVideoStateChanged",(e,t,i,o)=>{t==zr.Starting&&this.callType==pe.VIDEO&&(C("error","at pages/call/chat-view.mixin.js:366","\u6536\u5230\u8FDC\u7A0B \u89C6\u9891 \u7B2C\u4E00\u9488 joinChannel \u5230\u6B64\u4E8B\u4EF6\u7684\u7528\u65F6 papapap "+o),this.handleFirstFrame(o),this.setVideoStreamType(!1))}),this.engine.addListener("RemoteAudioStateChanged",(e,t,i,o)=>{t==Gr.Starting&&this.callType==pe.VOICE&&(C("error","at pages/call/chat-view.mixin.js:373","\u6536\u5230\u8FDC\u7A0B \u97F3\u9891 \u7B2C\u4E00\u9488 joinChannel \u5230\u6B64\u4E8B\u4EF6\u7684\u7528\u65F6 "+o),this.handleFirstFrame(o))}),this.engine.addListener("JoinChannelSuccess",(e,t,i)=>{C("error","at pages/call/chat-view.mixin.js:378",`JoinChannelSuccess channel = ${e} uid = ${t}`),this.addLogEngine(`\u52A0\u5165\u9891\u9053\u6210\u529F ${i}ms`)}),this.engine.addListener("UserJoined",(e,t)=>{C("error","at pages/call/chat-view.mixin.js:382","UserJoined uid = "+e+"   "+t),this.remoteUid=e,this.upLog=!0,this.addLogEngine(`\u7528\u6237\u8FDB\u5165\u623F\u95F4${e} ${t}ms`)}),this.engine.addListener("UserOffline",(e,t)=>{C("error","at pages/call/chat-view.mixin.js:388","UserOffline uid = "+e+"    "+t),e==this.userInfo.uid&&(this.addLogHangUpEngine("\u5BF9\u65B9\u79BB\u7EBF"),this.closeCallChat(this.logEndUserOff,this.closeTypeTargetHangUp,{uid:e}))}),this.engine.addListener("Error",e=>{C("log","at pages/call/chat-view.mixin.js:395","----> \u58F0\u7F51 SDK \u62A5\u9519 "+e);try{e!=18&&this.addLogHangUpEngine(`SDK \u62A5\u9519 ${JSON.stringify(e)}`)}catch(t){}}),this.engine.addListener("ConnectionLost",()=>{C("log","at pages/call/chat-view.mixin.js:408","-----> ConnectionLost "),this.connectLostTimeOut=setTimeout(()=>{this.addLogHangUpEngine("SDK \u8FDE\u63A5\u4E22\u5931 lost"),this.closeCallChat(this.logEndConnectLost,this.closeTypeNetwork,{})},15e3)}),this.engine.addListener("ConnectionStateChanged",e=>{C("log","at pages/call/chat-view.mixin.js:415","-----> ConnectionStateChanged "+e),e==3?this.connectLostTimeOut&&clearTimeout(this.connectLostTimeOut):e==5&&(this.addLogHangUpEngine("SDK \u8FDE\u63A5\u4E22\u5931 5"),this.closeCallChat(this.logEndConnectLost,this.closeTypeNetwork,{}))}),this.engine.addListener("NetworkQuality",(e,t,i)=>{if(e==0||e==getApp().globalData.uid){let o=qr(i);o!=this.networkStatusLocal&&this.setVideoStreamType(o!=1),this.networkStatusLocal=o}else this.networkStatusRemote=qr(i);this.networkStatusLocal&&this.networkStatusRemote?this.networkStatus=1:this.networkStatus=0,e!=0&&e!=getApp().globalData.uid&&this.onNetworkChangeRemote()}),this.engine.addListener("FacePositionChanged",(e,t,i)=>{C("error","at pages/call/chat-view.mixin.js:441","-----> \u4EBA\u8138\u68C0\u6D4B\u89E6\u53D1\u56DE\u8C03 ---> "+e+" "+t,i),this.enableFaceDetection(!1),!g(i)?this.fiveFaceCheck?this.showBigRRemind||this.handleFirstMinRemindPop():this.handleFirstMinRemindPop():(this.showRemindPop(2),j()&&(this.girlCheckNoFaceCount<=0&&k.request("/chat/call/face-detection",{room_id:this.roomInfo.room_id}),this.girlCheckNoFaceCount+=1)),this.fiveFaceCheck&&(this.fiveFaceCheck=!1)}),this.engine.addListener("ExtensionStarted",(e,t)=>{this.onAudioTranslationStarted(e,t)}),this.engine.addListener("ExtensionStopped",(e,t)=>{this.onAudioTranslationStopped(e,t)}),this.engine.addListener("ExtensionError",(e,t,i,o)=>{this.onAudioTranslationError(e,t,i,o)}),this.engine.addListener("ExtensionEvent",(e,t,i,o)=>{this.onAudioTranslationEvent(e,t,i,o)}),this.hasAddEngineListener=!0)},initEngine(){return $(this,null,function*(){if(this.isCloseExecute)return;if(this.engine=yield f.createByExtension(this.roomInfo.app_id,["AgoraMicrosoftExtension"]),this.createLog=!this.roomInfo.none_log,this.createLog){let t=Aa(this.roomInfo.room_id);this.engine.setLogFile(t)}let e=new On({bitrate:jr.Standard,dimensions:new En({width:640,height:480}),frameRate:Vr.Fps15});if(yield this.engine.setVideoEncoderConfiguration(e),this.addListeners(),this.callType==pe.VIDEO?(yield this.engine.enableDualStreamMode(!0),this.setVideoStreamType(!0),yield this.engine.enableVideo()):yield this.engine.setDefaultAudioRoutetoSpeakerphone(!0),yield this.engine.setChannelProfile(Wr.Communication),O.isAndroid&&(yield this.engine.leaveChannel()),yield this.enableAudiTranslation(!0),O.isAndroid)try{yield this.engine.setParameters('{"che.audio.force_use_media_volume":false}')}catch(t){}if(O.isAndroid||(yield this.engine.enableLocalAudio(!1)),!this.isConnect&&!this.isClickHangUp)try{let t=yield this.engine.joinChannel(this.roomInfo.token,this.roomInfo.room_id+"",null,Number(getApp().globalData.uid));this.addLogEngine(`\u521D\u59CB\u5316\u6210\u529F joinCode = ${t}`),C("error","at pages/call/chat-view.mixin.js:520","----> \u901A\u8BDD\u52A0\u5165\u623F\u95F4 one "+t)}catch(t){let i=`room_id:${this.roomInfo.room_id}-target_uid:${this.userInfo.uid}-call_type:${this.callType}`;Bo(t,i),yield this.engine.leaveChannel(),yield this.engine.joinChannel(this.roomInfo.token,this.roomInfo.room_id+"",null,Number(getApp().globalData.uid))}})},destroyEngine(){return $(this,null,function*(){yield this.destroyAutomatic(),this.engine&&(yield this.engine.leaveChannel(),yield this.engine.destroy(),this.engine=!1)})},closeCallChat(e,t,i,o){if(C("error","at pages/call/chat-view.mixin.js:537",`\u6267\u884C \u5173\u95ED\u901A\u8BDD ..... ${e} ${t}`),this.isCloseExecute)return;Ya(!0),this.isCloseExecute=!0,setTimeout(()=>{this.isCloseExecute=!1},5e3),this.addLog(`closeChatView fromType = ${e} closeType = ${t}`);let n=this.$refs.actionTimer;if(n&&(this.closeCurDuration=n.totalDuration||0),e!=this.closeFromDef){let r={room_id:this.roomInfo.room_id,duration:this.closeCurDuration};if(e==this.closeFromSelf)r.end_type=j()?4:3;else{let a=e==this.logEndUserOff?this.userInfo:getApp().pubUser;r.end_type=a.is_auth?4:3,r.from_type=e,r.extra=JSON.stringify(i),r.target_uid=this.userInfo.uid}this.addLogClose(e,i),k.request("/chat/call/end",r,!1)}this.isClose=!0,this.ringStop(void 0),this.timer&&clearInterval(this.timer),this.destroyEngine().then(()=>{if(this.addLog("destroyEngine finish"),typeof o=="function"){o();return}if(this.closeFrom=e,this.closeType=t,this.closeCurConnectStatus=this.isConnect,this.closeCurUser=this.userInfo,!this.isNavigateBack){this.isNavigateBack=!0;let r=wr("/pages/call/chat-view");this.addLog(`execute close ${r}`),Gt(r,"slide-out-bottom",300),setTimeout(()=>{this.isNavigateBack=!1},500)}})},unloadCallChat(){if(this.closeFrom==this.closeFromScreenRecord){getApp().loginOut(),ye(h("warning"),h("screenshot.warningTip",{whom:he(this.userInfo.sex)}),"",h("gotIt"));return}if(this.closeMatchRestart){if(j()){k.request("/chat/find/next",{});return}uni.$emit("event_match_success_next");return}if(this.closeMatchCancel){ro(ti.USER);return}if(this.isConnect&&uni.$emit("event_call_close_after_success"),!j()&&this.endTopUpData){if(g(this.closeCurUser)||!this.coinPayItem)return;X("/pagesDialog/call-end-top-up-new",null,"callEndData",{user_info:this.closeCurUser,call_type:this.callType,pay_item:this.coinPayItem,duration:this.closeCurDuration,endType:this.closeFrom,videoInfo:this.videoInfo,roomType:this.roomType});return}if(this.isConnectRefused){let t={user:JSON.stringify(this.userInfo),callType:this.callType};ie("/pagesDialog/call-declined",t);return}if(this.closeCallAgain&&this.showFocusLoading&&!this.isConnect){Ta(this.callType,this.userInfo,this.videoInfo,Ys.ANSWER_ERROR);return}this.isRefuseAnswer&&uni.$emit("event_call_refuse_answer"),this.closeFrom!=this.closeFromSelf&&(this.closeCurConnectStatus&&!this.hasHandleOpenEndMsg?(this.hasHandleOpenEndMsg=!0,X("/pagesDialog/call-dropped",{room_id:this.roomInfo.room_id},"videoVoiceData",{callType:this.callType,duration:this.closeCurDuration,user:this.closeCurUser,endType:this.closeFrom,videoInfo:this.videoInfo,roomType:this.roomType}),this.hasHandleOpenEndMsg=!1):this.showCallEndToast(this.closeType,this.closeCurUser))},checkIsDialogPath(e){let t=["/pages/coin/coin-dialog","/pages/vip/vip-dialog"],i=["/pagesDialog/call-dropped"],o=t.indexOf(e)!=-1,n=e.indexOf("/pagesDialog")!=-1,r=i.indexOf(e)!=-1;return(o||n)&&!r},parseShowEvaluatePath(){let e=so(),t=[];for(let i=0,o=e.length;i<o;i++){let n=e[i];this.checkIsDialogPath(n.path)||t.push(n.fullPath)}return t[t.length-1]},showCallEvaluate(){if(this.callTotalDuration<30)return;let e=this.parseShowEvaluatePath();uni.$emit(`event_${e}_show_call_evaluate`,this.userInfo,this.roomInfo.room_id)}},onShow(){let e=this.$refs.gameView;e&&e.onPageShow()},onHide(){this.$refs.gameView&&this.$refs.gameView.onPageHide()},onLoad(){this.getOpenerEventChannel().on("callViewData",this.initView),uni.$on("event_chat_view_action",this.onChatViewActionListener),uni.$on("event_follow",this.onFollow),uni.$on("event_pay_success_coins",this.onPaySuccess),uni.$on("event_pay_success_vip",this.onPaySuccess),uni.$on("event_dialog_coin_close",this.onEventCloseCoinDialog),uni.$on("event_dialog_banned_close",this.onNoConnectCloseListener),uni.$on("event_no_connect_close_listener",this.onNoConnectCloseListener),uni.$on("event_receive_call_notify",this.onReceiveCallNotifyListener),uni.$on("event_banned_close_chat",this.onEventBannedCloseChat),uni.onKeyboardHeightChange(this.onKeyboardChange),uni.hideKeyboard(),uni.setKeepScreenOn({keepScreenOn:!0})},onUnload(){this.addLogUpload(),this.engine&&this.destroyEngine(),getApp().globalData.curCallId=ut.NONE,uni.$off("event_chat_view_action",this.onChatViewActionListener),uni.$off("event_follow",this.onFollow),uni.$off("event_pay_success_coins",this.onPaySuccess),uni.$off("event_pay_success_vip",this.onPaySuccess),uni.$off("event_dialog_coin_close",this.onEventCloseCoinDialog),uni.$off("event_dialog_banned_close",this.onNoConnectCloseListener),uni.$off("event_no_connect_close_listener",this.onNoConnectCloseListener),uni.$off("event_anchor_get_coin"),uni.$off("event_receive_call_notify",this.onReceiveCallNotifyListener),uni.$off("event_banned_close_chat",this.onEventBannedCloseChat),uni.offKeyboardHeightChange(this.onKeyboardChange),uni.setKeepScreenOn({keepScreenOn:!1}),this.clearRemindTimer(),this.unloadCallChat(),this.showCallEvaluate(),B("appDialog/executeBanWarningDialog"),this.createLog&&this.upLog&&uni.$emit("event_agora_log",{room_id:this.roomInfo.room_id})},onBackPress(e){if(e.from=="backbutton")return!0}},kd={1:"\u5BF9\u65B9\u7528\u6237\u79BB\u5F00",2:"sdk \u62A5\u9519",3:"\u8FDE\u63A5\u4E22\u5931",7:"API \u521B\u5EFA\u5931\u8D25",8:"API \u521B\u5EFA\u62A5\u9519",9:"API \u63A5\u542C\u62A5\u9519",11:"\u5339\u914D\u7B49\u5F85\u8FDE\u63A5\u8D85\u65F6",20:"API match/success \u5931\u8D25",21:"API \u5FC3\u8DF3\u5931\u8D25",22:"\u6E38\u620F\u5339\u914D\u4E3B\u52A8",23:"\u81EA\u52A8\u6253\u62DB\u547C\u6CA1\u6709\u91D1\u5E01",24:"\u63A5\u542C\u65F6\u95F4\u8D85\u8FC7 call_exp_time",25:"api call success ok=2",26:"\u521B\u5EFA\u623F\u95F4\u4E3B\u64AD\u4F11\u606F",27:"\u7528\u6237\u65B9\u68C0\u6D4B\u4E3B\u64AD\u65B9\u65E0\u4EBA\u8138\u5F39\u6846",28:"\u4E3E\u62A5\u5F39\u6846"},Fd={data(){return{logList:[],logEndUserOff:1,logEndSDKError:2,logEndConnectLost:3,logEndApiCreateNo:7,logEndApiCreateError:8,logEndApiAnswer:9,logEndMatchConnectTimeout:11,logEndAnswerConnectTimeout:12,logEndApiMatchSuccessError:20,logEndApiHeartError:21,logEndByGameMatch:22,logEndAutoHasCoins:23,logEndAnswerExpTime:24,logEndApiCallSuccessError:25,logEndAnchorNoCancelRest:26,logEndNoFaceRemindPop:27,logEndReportPop:28,logEndBanned:29,isShowCallEndToast:!1,closeFromDef:0,closeFromScreenRecord:100,closeFromSelf:1e4,closeTypeDef:0,closeTypeHeart:101,closeTypeTargetHangUp:102,closeTypeNetwork:103}},methods:{showCallEndToast(e,t){if(this.isClickHangUp){setTimeout(()=>{this.isClickHangUp=!1},3e3);return}if(this.isShowCallEndToast)return;let i,o=!1;switch(parseInt(e)){case 101:i=h("call.endTipDef"),o=!0;break;case 102:i=h("call.endTipBy",{whom:t.nickname});break;case 103:i=h("call.endTipNetwork"),o=!0;break;case 1:i=h("call.endTipBy",{whom:t.nickname});break;case 3:case 4:i=h("call.endTipBy",{whom:t.nickname});break;case 6:i=h("call.endTipNetwork"),o=!0;break;case 7:ye(h("tips"),h("call.endTipSystem",{chatType:ui(this.callType)}),"",h("gotIt"));return;case 8:this.actionType==ce.ANSWER?i=h("call.endTipBy",{whom:t.nickname}):this.callType==pe.VIDEO?(gi("no_answer"),gi("cancel")):(_i("no_answer"),_i("cancel"));break;default:typeof e=="string"&&(i=e)}C("error","at pages/call/chat-view-log.mixin.js:118","\u6536\u5230\u663E\u793A \u7ED3\u675F toast \u7684\u6307\u4EE4 \u3002\u3002\u3002tipStr = "+i),!g(i)&&(this.isShowCallEndToast=!0,j()&&o?ye(h("tips"),i,"",h("gotIt")):uni.showToast({title:i,duration:5e3,icon:"none",position:"center"}),setTimeout(()=>{this.isShowCallEndToast=!1},3e3))},getLogTimeStr(){let e=new Date;return`${getApp().getCTime()}(${Xs(e,"M/d hh:mm:ss")})`},addLogOnLoad(e){let t=e.openType==0?"app\u5185":"\u901A\u77E5",i;e.openType==1&&e.user.is_match?i="\u5339\u914D":i=e.roomType==1?"\u666E\u901A":"\u5339\u914D",e.roomInfo&&e.roomType==2&&(i+=` \u4ECE${e.roomInfo.matchType==1?"index":"\u5F39\u7A97"}\u5524\u8D77`);let o=e.actionType==1?"\u62E8\u6253":"\u63A5\u542C",n=e.callType==1?"\u89C6\u9891":"\u8BED\u97F3",r=`onLoad \u4ECE${t}\u663E\u793A ${i}\u901A\u8BDD\uFF0C\u65B9\u5F0F\u662F${o}\uFF0C\u7C7B\u578B\u4E3A${n}`;e.user.call_free_min&&(r+="\uFF0C\u6709\u4E00\u5206\u949F\u514D\u8D39"),this.addLog(r)},addLogCreate(e){let t="API \u521B\u5EFA\u6210\u529F";this.addLog(t)},addLogAnswer(){this.addLog("\u70B9\u51FB\u63A5\u542C")},addLogHangUpSelf(e){this.addLog(`${e?"\u5339\u914D\u4E2D\u4E0B\u4E00\u4E2A ":""}\u4E3B\u52A8\u6302\u65AD`)},addLogHangUpReport(){this.addLog("\u65E0\u4EBA\u8138\u4E3E\u62A5\u5F39\u6846\u6302\u65AD")},addLogHangUpMq(e){let t=null;e.a_type==2?t="\u901A\u8BDD\u7ED3\u675F":e.a_type==3?t="\u901A\u8BDD\u88AB\u62D2\u7EDD":e.end_type==2?t="\u5339\u914D\u4E0B\u4E00\u4E2A":e.end_type==5&&(t="\u5339\u914D\u8FDE\u63A5\u8D85\u65F6"),t&&this.addLog(`mq\u6302\u65AD ${t}`)},addLogHangUpEngine(e){this.addLog(e)},addLogEngine(e){this.addLog(e)},addLogClose(e){e==1e4?this.addLog("req /chat/call/end"):this.addLog(`\u56E0\u4E3A ${kd[e]} \u5173\u95ED`)},addLogRoomId(e){this.logList.unshift(`${getApp().globalData.uid}-${j()?"\u4E3B\u64AD":"\u7528\u6237"}`),this.logList.unshift(parseInt(e))},addLog(e){this.logList.push(`${this.getLogTimeStr()}: ${e}`),N("call_log",this.logList)},addLogUpload(){if(!this.roomInfo.room_id||this.logList.length<=0)return;let e={room_id:this.roomInfo.room_id,extra:this.logList.join(" -> ")};k.request("/chat/call/log",e,!1).then(t=>{de("call_log")})}}},yt=getApp().globalData.window,Ld=le("dom"),Id={mixins:[Fd],data(){return{isAndroid:O.isAndroid,sW:yt.width,sH:yt.height,safeB:yt.safeBottom,statusBarH:yt.statusBarHeight,isLoading:!1,videoW:0,videoH:0,videoObjectFit:"",videoIsPlay:!1,videoShowBlur:!1,videoShowCover:!0,showWaitingVideo:!1,avatarSmallUrl:"",avatarBigUrl:"",avatarBigIsShow:!1,giftFromType:we.CALL,giftSheetAsk:!1,heartInt:Ks.HEART_INTERVAL,isMuteVoice:!1,isMuteVideo:!1,keyboardShow:!1,coinPayItem:!1,freeMinDuration:0,cameraStatus:1,micStatus:1,isClickAnswer:!1,notAnswerTipTime:20,isConnectRefused:!1,isConnecting:!1,isCallNotifyAnswer:!1,isEventMatchFail:!1,isNoCoinsPaySuccess:!1,giftList:[],showSurfaceMoveTip:!1,showAutomaticTip:!R("call_automatic_tip_close_1"),showAutomaticMsgTip:!1,showActionMoreTip:!R("call_action_more_tip_1"),viewTopCellTop:yt.statusBarHeight+5,viewTopIsShow:!0,viewTopHideTimeout:!1,viewBottomActionIsShow:!0,viewBottomActionHideTimeout:!1,viewBaseActionIsShow:!0,viewMsgIsShow:!0,viewAutomaticIsShow:!1,isShowActionPop:!1,isShowBeautyPop:!1,callDuration:0,callTotalDuration:0,animAutomaticMsgTipCount:1,inputFocus:!1,isRingMute:!1,balanceCheckDuration:120,tipShowMaxDuration:30,popShowMaxDuration:15,freeTipShowMaxDuration:50,remindTimer:!1,fiveFaceCheck:!1,needCheckFace:!1,showReportTips:!1,reportArrowLeft:0,timerIDList:[],showBigRRemind:!1}},computed:{hangUpStr(){return this.actionType==ce.CALL?h("cancel"):h("call.decline")},getTimerStr(){return Ni(this.timerInt)},callingStr(){let e=ui(this.callType);return this.actionType==ce.CALL?h("call.callingTipCall",{him:he(this.userInfo.sex),chat:e}):this.actionType==ce.ANSWER?h("call.callingTipAnswer",{chat:e}):""},chargeStr(){return this.userInfo.show_price!=1?"":h("call.chargePriceTip",{number:this.userInfo.call_price})},getNotAnswerTip(){return h("call.notAnswerTip",{he:At(this.userInfo.sex),call:ui(this.callType)})},gameViewH(){return this.isGameShow?0:yt.height},networkTip(){if(this.networkStatus==1)return"";let e;if(this.networkStatusLocal==0&&this.networkStatusRemoteBadShow)e=h("your");else if(this.networkStatusLocal==0)e=h("your");else if(this.networkStatusRemoteBadShow)e=qs(this.userInfo.sex);else return"";return h("network.whoNotGood",{whose:e})},surfaceMoveTipBottom(){return yt.safeBottom+2+this.viewAutomaticHeight+this.viewBottomActionHeight+uni.upx2px(300)},viewTopHeight(){let e=84;return j()&&(e+=78),this.viewTopCellTop+uni.upx2px(e)},viewTopStyle(){let e={width:`${this.sW}px`,height:`${this.viewTopHeight}px`};return this.viewTopIsShow?e.backgroundImage="linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0))":e.backgroundImage="linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,0))",e},incomeTopH(){return this.viewTopHeight-uni.upx2px(58)},viewGiftHeight(){let e=12,t=this.isAuth?62:48;return(e+t*2)*2},viewGiftTop(){let e=30;return j()&&(e-=8),this.viewTopHeight+uni.upx2px(e)},viewMsgHeight(){return yt.height-this.viewGiftTop-uni.upx2px(this.viewGiftHeight/2)-this.viewNoCoinsBottom},viewMsgBottom(){return this.viewBottomHeight},viewNoCoinsHeight(){return uni.upx2px(74*2)},viewNoCoinsBottom(){return this.viewBottomHeight+uni.upx2px(8)},viewAutomaticHeight(){return uni.upx2px(74*2)},viewAutomaticLeft(){return this.isShowActionPop?-this.sW:0},viewAutomaticBottom(){return this.viewBottomActionBottom+this.viewBottomActionHeight},viewAutomaticMsgTipIconBottom(){return this.viewBottomHeight-uni.upx2px(24+24)},viewBottomActionHeight(){return uni.upx2px(100)},viewBottomActionBottom(){return yt.safeBottom+2},viewBottomHeight(){return this.viewBottomActionBottom+this.viewAutomaticHeight+this.viewBottomActionHeight},viewActionMoreIconBottom(){return this.viewBottomActionBottom+uni.upx2px(20)},viewActionMoreTipBottom(){return this.viewActionMoreIconBottom+uni.upx2px(60)},viewActionClassStr(){return this.isShowActionPop?"view-action-more-rotate-open":"view-action-more-rotate-close"},automaticActionSrc(){return this.isAutomaticOpen?"s/call/auto_translate_open.png":"s/call/auto_translate_close.png"},automaticActionBottom(){return this.viewAutomaticBottom+uni.upx2px(10)},automaticOpenTip(){return h("notKnowHeSaid",{him:he(this.userInfo.sex)})},automaticOpenTipBottom(){return this.automaticActionBottom+uni.upx2px(70)},showAutomaticTipView(){return!this.isAutomaticOpen&&this.showAutomaticTip&&this.viewBottomActionIsShow&&!this.isShowActionPop&&!this.isShowBeautyPop},showAutomaticView(){return this.viewBottomActionIsShow&&!this.isShowActionPop&&!this.isShowBeautyPop},showBottomActionView(){return this.viewBottomActionIsShow&&!this.isShowActionPop&&!this.isShowBeautyPop},showActionMoreIconView(){return this.isShowActionPop||this.viewBottomActionIsShow&&!this.keyboardShow&&!this.isShowBeautyPop},showActionMoreTipView(){return this.showActionMoreTip&&this.viewBottomActionIsShow&&!this.keyboardShow&&!this.isShowActionPop&&!this.isShowBeautyPop},showBottomBgView(){return this.viewBottomActionIsShow||this.isAutomaticOpen&&this.viewAutomaticIsShow||this.isShowActionPop},viewCallRingRight(){return((this.sW-uni.upx2px(144))/2-uni.upx2px(60))/2+uni.upx2px(12)},callRingSrc(){return this.isRingMute?"s/call/ring_n.png":"s/call/ring_s.png"}},watch:{"userInfo.small_avatar":{handler(e,t){g(e)||(g(this.avatarSmallUrl)?this.avatarSmallUrl=Ui(this.userInfo):g(this.avatarBigUrl)&&(this.avatarBigUrl=Ui(this.userInfo)))},deep:!0,immediate:!0}},methods:{clickCallRing(e){e&&e.stopPropagation(),this.isRingMute?this.ringPlay():this.ringStop(),this.isRingMute=!this.isRingMute,$s("call_ring_mute",this.isRingMute?1:0)},clickViewTop(e){e&&e.stopPropagation(),this.clickChatContent()},clickViewBottomAction(){this.clickChatContent()},clickActionMore(e){e&&e.stopPropagation(),this.$refs.popAction.open()},clickActionMoreTipClose(e){e&&e.stopPropagation(),this.showActionMoreTip&&(this.showActionMoreTip=!1,N("call_action_more_tip_1",1))},clickAutomaticTipClose(e){e&&e.stopPropagation(),this.showAutomaticTip=!1,N("call_automatic_tip_close_1",1)},clickChatContent(){if(this.keyboardShow){uni.hideKeyboard();return}this.showHideViewBaseAction()},clickBeauty(){this.keyboardShow&&uni.hideKeyboard(),this.$nextTick(()=>{this.$refs.callBeautyPop.open()})},clickGift(e){this.keyboardShow&&uni.hideKeyboard(),this.openGiftSheet(e.fromType,!1)},clickGiftAsk(e){this.keyboardShow&&uni.hideKeyboard(),this.openGiftSheet(e.fromType,!0)},clickFollow(e){this.keyboardShow&&uni.hideKeyboard(),!(!e.isFollow||j())&&Sn().then(t=>{for(let o=0;o<t.length;o++)t[o].price<=10&&this.giftList.push(t[o]);let i=this.giftList[Math.floor(Math.random()*this.giftList.length)];this.$refs.msgView.addMsgFollow(i)})},clickMuteCamera(e){if(!yn()){wn(an.ENABLE_CAMERA);return}this.cameraStatus=this.cameraStatus==1?0:1,this.setMuteAvatar(!0,this.cameraStatus==0),k.request("/chat/call/mask-status",{room_id:this.roomInfo.room_id,status:this.cameraStatus}),e&&e.stopPropagation()},clickMuteMic(e){if(!yn()){wn(an.ENABLE_MICROPHONE);return}this.micStatus?Be(h("tips"),h("muteChatLocalAudioTip",{he:At(this.userInfo.sex)}),()=>{this.micStatus=this.micStatus==1?0:1,this.onChangeMoreToolStatus({key:"microphone",value:this.micStatus})},"",h("turnOff")):(this.micStatus=this.micStatus==1?0:1,this.onChangeMoreToolStatus({key:"microphone",value:this.micStatus})),e&&e.stopPropagation()},clickSurfaceMoveTipClose(){this.showSurfaceMoveTip=!1,N("video_chat_surface_move_tip",1)},onClickRemindGotIt(e){if(e==1){if(this.callType!=pe.VIDEO||(this.showBigRRemind=!1,this.callTotalDuration>=50)||this.callTotalDuration+15>=50)return;this.enableFaceDetection(!0)}else e==2&&this.handleFirstMinRemindPop()},onClickRemindReportHangUp(){this.addLogHangUpReport(),this.closeCallChat(this.logEndReportPop,this.closeTypeDef,{})},onClickRemindHangUp(){let e=h("call.hangUpTip",{chatType:ui(this.callType)});Be(h("tips"),e,()=>{this.addLogHangUpReport(),this.closeCallChat(this.logEndNoFaceRemindPop,this.closeTypeDef,{})},"",h("hangUp"))},onClickRemindReport(){let e=this.$refs.callReportUser;e&&e.open()},onInputFocus(e){this.inputFocus=e},onClickCallMsgView(){this.clickChatContent()},onMsgViewShowListener(e){this.viewMsgIsShow=e,this.viewBottomActionIsShow=e},onAutomaticViewShowListener(e){this.viewAutomaticIsShow=e},onActionPopChangeListener(e){this.isShowActionPop=e.show,e.show&&this.clickActionMoreTipClose()},onSurfaceMoveTipListener(e){e?this.showSurfaceMoveTip=!0:this.clickSurfaceMoveTipClose()},onSurfaceChangeListener(){this.$refs.refSurfaceRemote.setSurfaceChange()},onBeautyChange(e){this.engine.setBeautyEffectOptions(!0,new Yi({lighteningLevel:e.whitening/100,smoothnessLevel:e.smoothing/100,rednessLevel:e.rosy/100}))},onBeautyPopChange(e){this.isShowBeautyPop=e.show},onNoConnectCloseListener(e){if(this.isConnect||this.isGameShow)return;let t=je();t.indexOf("/pages/call/chat-view")==t.length-1&&(e&&(e.action=="chat_pri"||e.action=="level")?this.clickHangup(null,0,()=>{Gt(wr("/pages/call/chat-view"),"slide-out-bottom",300),setTimeout(()=>{e.action=="chat_pri"?br(e.user):e.action=="level"&&open("/pagesPub/my/level")},O.isAndroid?300:100)}):this.clickHangup(null,0))},onLoadAvatarBigListener(){this.avatarBigIsShow=!0},onLoadWaitVideoCoverListener(){this.showWaitingVideo=!0},onVideoPlay(){},onVideoTimeUpdate(e){this.videoIsPlay||e.detail.currentTime<.8||(this.videoIsPlay=!0,this.videoShowCover=!1,this.videoShowBlur=this.videoInfo.width>=this.videoInfo.height,C("error","at pages/call/chat-view-action.mixin.js:470","======== onVideoTimeUpdate "+e.detail.currentTime))},onFollow(e,t){e==this.userInfo.uid&&(this.userInfo.is_follow=t)},onSendGift(e,t=1){if(C("error","at pages/call/chat-view-action.mixin.js:477","----> onSendGift "+JSON.stringify(e)),t==2){let i=this.$refs.viewGift;i&&i.showGift(e,!0),xi(e,!0);return}bi(e.count,e,this.userInfo.uid,this.roomInfo.room_id,this.giftFromType,()=>{let i=this.$refs.viewGift;i&&i.showGift(e,!0),xi(e,!0)})},onSendAskGift(e){this.$refs.msgView.addMsgGiftAsk(this.userInfo.sex,e),this.$refs.gameView&&this.$refs.gameView.addMsgAskGift(e),k.request("/chat/call/ask-gift",{room_id:this.roomInfo.room_id,gift_id:e.gift_id})},onSendTextListener(e){if(g(e))return;this.$refs.msgView.addMsgText(e);let t={content:e,to_uid:this.userInfo.uid,room_id:this.roomInfo.room_id,msg_type:Ne.TEXT},i=Sa(e,Ji.MSG_CALL);i.has&&(t.sensitive_type=i.type,t.sensitive_text=i.find),k.request("/chat/call/send-msg",t)},onKeyboardChange(e){this.keyboardShow=e.height>0},startAnimAutomaticMsgTip(){if(this.animAutomaticMsgTipCount>3){this.showAutomaticMsgTip=!1;return}setTimeout(()=>{let e=this.$refs.animAutomaticMsgTip;e.step({translateX:-16,translateY:-16},{duration:400}),e.step({translateX:0,translateY:0},{duration:400}),e.run(()=>{this.animAutomaticMsgTipCount+=1,this.startAnimAutomaticMsgTip()})},500)},clearViewTopHideTimeout(){this.viewTopHideTimeout&&clearTimeout(this.viewTopHideTimeout),this.viewTopHideTimeout=!1},hideViewTop(){this.clearViewTopHideTimeout(),this.viewTopIsShow=!1},showViewTop(){this.viewTopIsShow=!0,this.clearViewTopHideTimeout(),this.viewTopHideTimeout=setTimeout(()=>{this.viewTopIsShow=!1,this.showReportTips&&(this.showReportTips=!1)},5e3)},clearViewBottomActionTimeout(){this.viewBottomActionHideTimeout&&clearTimeout(this.viewBottomActionHideTimeout),this.viewBottomActionHideTimeout=!1},hideViewBottomAction(){this.clearViewBottomActionTimeout(),this.viewBottomActionIsShow=!1},showViewBottomAction(){this.viewBottomActionIsShow=!0,this.clearViewBottomActionTimeout(),this.viewBottomActionHideTimeout=setTimeout(()=>{this.viewBottomActionIsShow=!1},5e3)},showHideViewBaseAction(){let e=this.viewMsgIsShow;if(this.$refs.msgView&&this.$refs.msgView.list.length<=0&&(e=!1),e||this.viewTopIsShow||this.viewBottomActionIsShow){this.$refs.msgView&&this.$refs.msgView.hide(),this.hideViewTop(),this.hideViewBottomAction();let i=this.$refs.callAutomaticView;i&&i.hide()}else!this.viewMsgIsShow&&this.$refs.msgView&&this.$refs.msgView.show(),this.viewTopIsShow||this.showViewTop(),this.viewBottomActionIsShow||this.showViewBottomAction()},onChatViewActionListener(e){if(C("error","at pages/call/chat-view-action.mixin.js:579","----> chatViewAction "+e.a_type+" "+JSON.stringify(e)),!(!e.room_id||e.room_id!=this.roomInfo.room_id))switch(e.a_type){case nt.END:if(this.isCallNotifyAnswer)return;C("error","at pages/call/chat-view-action.mixin.js:584","-----> \u6267\u884C mq \u6302\u65AD "+JSON.stringify(e)),this.addLogHangUpMq(e),e.end_type==Ri.REFUSE?this.actionType==ce.CALL&&(this.isConnectRefused=!0):e.end_type==Ri.BALANCE?e.user_info&&(this.endTopUpData=e):(e.end_type==Ri.TIMEOUT||e.end_type==Ri.CANCEL)&&uni.$emit("event_call_refuse_answer"),this.closeCallChat(this.closeFromDef,e.msg||e.end_type,{});break;case nt.REFUSE:this.addLogHangUpMq(e),this.isConnectRefused=!0,this.closeCallChat(this.closeFromDef,this.closeTypeDef,{});break;case nt.WARNING:k.handleCallback(e.callback);break;case nt.RECEIVE_GIFT:let t=this.$refs.viewGift;t&&t.showGift(e.gift,!1),xi(e.gift,!1),uni.$emit("event_call_income_listener",{isGift:!0,gift:e.gift});break;case nt.BALANCE:C("error","at pages/call/chat-view-action.mixin.js:610","-----> \u6536\u76CA \u3002"+JSON.stringify(e)),uni.$emit("event_call_income_listener",e),be(e.balance);break;case nt.NO_MONEY:if(be(e.balance),!getApp().globalData.appCRE||(C("error","at pages/call/chat-view-action.mixin.js:617","----> \u4F59\u989D\u4E0D\u8DB3 "+JSON.stringify(e)),g(e.pay_item)))return;this.coinPayItem=e.pay_item,this.isNoCoinsPaySuccess=!1;let i=this.$refs.actionTimer.getTimerDuration(),o=0,n=0,r=0,a=0,c=0;if(i[0]==1)if(o=e.total_duration-i[1],i[1]>=this.balanceCheckDuration)n=0,r=o;else{let w=o-this.tipShowMaxDuration;n=w>0?w:0,r=w>0?this.tipShowMaxDuration:o}else if(i[0]==2){o=i[1];let w=o-this.freeTipShowMaxDuration;n=w>0?w:0,r=w>0?this.freeTipShowMaxDuration:o}let u=o-this.popShowMaxDuration;a=u>0?u:0,c=u>0?this.popShowMaxDuration:o;let p=this.userInfo.call_free_min==1,d=setTimeout(()=>{!this.isNoCoinsPaySuccess&&this.$refs.msgView&&this.$refs.msgView.showNoCoins(this.coinPayItem,r,p),clearTimeout(d)},n*1e3),_=setTimeout(()=>{this.isNoCoinsPaySuccess||this.$refs.callRechargePop.show(this.coinPayItem,c,p),clearTimeout(_)},a*1e3);break;case nt.MESSAGE:if(e.msg_type==Ne.TEXT_AUDIO){let w=Je(e.content);this.$refs.callAutomaticView.setContent(w.translate_text)}else this.$refs.msgView.addReceiveMsg(e);break;case nt.TRANSLATE:this.receiveTargetAutomaticAction(e);break;case nt.MASK:this.setMuteAvatar(!1,e.status==0);break;case nt.FACE_DETECTION:e.room_id==this.roomInfo.room_id&&e.target_uid==this.userInfo.uid&&this.showRemindPop(3);break}},onMatchLoadingListener(e,t){if(C("error","at pages/call/chat-view-action.mixin.js:688","test test onMatchLoadingListener type = "+e+"  fromType = "+t),t==2){this.upLog=!0,e==4?(this.addLog("\u63A5\u542C\u8FDE\u63A5\u5931\u8D25\uFF0C\u91CD\u65B0\u62E8\u6253"),this.closeCallAgain=!0,this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{})):e==5&&(this.addLog("\u63A5\u542C\u8FDE\u63A5\u5931\u8D25\uFF0C\u6302\u65AD"),this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{}));return}if(t==0&&!this.isEventMatchFail&&(this.isEventMatchFail=!0,Mr("fail")),e==100){this.upLog=!0,this.addLog("\u663E\u793A\u8FDE\u63A5\u8D85\u65F6");return}if(t==1){this.closeCallChat(this.logEndAnswerConnectTimeout,this.closeTypeNetwork,{});return}e==3?this.closeCallChat(this.logEndMatchConnectTimeout,this.closeTypeNetwork,{}):(e==1||e==2)&&(e==1?(this.closeMatchRestart=!0,this.addLog("\u70B9\u51FB\u91CD\u65B0\u5339\u914D")):(this.closeMatchCancel=!0,this.addLog("\u70B9\u51FB\u53D6\u6D88\u5339\u914D")),this.closeCallChat(this.closeFromDef,this.closeTypeDef,{}))},onReceiveCallNotifyListener(e){if(this.actionType!=1||this.isConnect||this.isConnecting)return;let t=this.$refs.refCallNotify;t&&t.showCall(e)},onCallNotifyAnswerListener(e){this.isClose||this.isConnecting||this.isConnect||this.isCallNotifyAnswer||(this.isCallNotifyAnswer=!0,k.request("/chat/call/answer",{room_id:e.room_id},!1,!0).then(t=>{if(t.ok!=1){this.isCallNotifyAnswer=!1;return}this.closeCallChat(this.closeFromSelf,this.closeTypeDef,{},()=>{setTimeout(()=>{this.isCallNotifyAnswer=!1,e.user_info,delete e.user_info},O.isAndroid?300:100)})},()=>{this.isCallNotifyAnswer=!1}))},onNetworkChangeRemote(){if(this.networkStatusRemote==1){this.networkStatusRemoteBadShow=!1,this.networkStatusRemoteBadTiming&&clearTimeout(this.networkStatusRemoteBadTiming),this.networkStatusRemoteBadTiming=!1;return}this.networkStatusRemote==0&&!this.networkStatusRemoteBadShow&&(this.networkStatusRemoteBadShow=!0)},onEventBannedCloseChat(){this.closeCallChat(this.logEndBanned,this.closeTypeDef,{})},setMuteAvatar(e,t){e&&(this.isMuteVideo=t),this.$refs.refSurfaceRemote&&this.$refs.refSurfaceRemote.setMuteVideoAvatar(e,t),this.$refs.refSurfaceLocal&&this.$refs.refSurfaceLocal.setMuteVideoAvatar(e,t)},openGiftSheet(e,t){this.giftFromType=e,this.giftSheetAsk=t,this.$nextTick(()=>{this.$refs.giftSheet.open()})},checkPermission(e){return new Promise(t=>{Tr(U.MICROPHONE,!0,!1).then(i=>i?this.callType==pe.VIDEO?Tr(U.CAMERA,!0,!1):(t(),it):(this.permissionStatus=2,Ii(U.MICROPHONE,o=>{o&&(this.permissionHasSetting=!0)}),it)).then(i=>{if(!i)return this.permissionStatus=2,Ii(U.CAMERA,o=>{o&&(this.permissionHasSetting=!0)}),it;t()})})},handleNotAnswerTimer(){let e=setInterval(()=>{this.notAnswerTipTime-=1,this.notAnswerTipTime<=0&&clearInterval(e)},1e3)},answerFromNotifyMatch(){return this.isClickAnswer?it:(this.isClickAnswer=!0,new Promise(e=>{let t={match_id:this.matchId};k.request("/chat/match/accept",t,!0,!0,!0).then(i=>{if(i.data.status==0){let o=this.$str("call.hasChosenElse",{who:At(this.userInfo.sex)});return ye(this.$str("connectionFail"),o,()=>{this.closeCallChat(this.closeFromDef,this.closeTypeDef,{})},this.$str("gotIt")),it}this.isConnecting=!0,this.addLogAnswer(),this.roomInfo={app_id:i.data.app_id,room_id:i.data.room_id,token:i.data.token},e()},i=>{g(i)&&(this.isClickAnswer=!1)})}))},startAnswerBgAnim(){let e=this.$refs.animAnswerBg;typeof e=="undefined"||typeof e.step=="undefined"||(e.step({scale:1.3,opacity:0},{duration:1e3}),e.step({scale:1,opacity:1},{duration:1}),e.run(()=>{this.startAnswerBgAnim()}))},startAnswerIcon(){let e=this.$refs.animAnswerImg;typeof e=="undefined"||typeof e.step=="undefined"||(e.step({rotate:-10},{duration:500}),e.step({rotate:10},{duration:500}),e.run(()=>{this.startAnswerIcon()}))},startFreeMinAnim(){if(j()||this.userInfo.call_free_min<=0)return;let e=this.$refs.countTip;typeof e=="object"&&(e.step({rotate:8},{duration:300}),e.step({rotate:-8},{duration:300}),e.step({rotate:3},{duration:300}),e.step({rotate:-3},{duration:300}),e.step({rotate:1},{duration:300}),e.step({rotate:-1},{duration:300}),e.step({rotate:0},{duration:300}),e.run(()=>{let t=setTimeout(()=>{this.startFreeMinAnim(),clearTimeout(t)},1500)}))},checkShowBigRRemind(){if(!j()||!Eo(this.userInfo))return!1;let e=R("call_big_recharge_"+getApp().globalData.uid+"_"+this.userInfo.uid);return g(e)},showRemindPop(e){let t=this.$refs.callRemindPop;t&&(t.isShow||t.open(e,this.userInfo))},handleRemindPop(){if(!j())return;if(this.checkShowBigRRemind()){let i=setTimeout(()=>{clearTimeout(i),this.showBigRRemind=!0,this.showRemindPop(1),this.handleSpliceTimer(i)},3e3);this.timerIDList.push(i)}if(!this.needCheckFace||this.callType!=pe.VIDEO)return;let t=setTimeout(()=>{clearTimeout(t),this.fiveFaceCheck=!0,this.enableFaceDetection(!0),this.handleSpliceTimer(t)},5e3);this.timerIDList.push(t)},handleFaceCheck(){if(this.callType!=pe.VIDEO||!j()||!this.needCheckFace)return;let e=this.$refs.callRemindPop;e&&(e.isShow||this.enableFaceDetection(!0))},handleFirstMinRemindPop(){if(this.callType!=pe.VIDEO||!this.needCheckFace||this.callTotalDuration>60||this.callTotalDuration+15>=50)return;let t=setTimeout(()=>{clearTimeout(t),this.enableFaceDetection(!0),this.handleSpliceTimer(t)},15e3);this.timerIDList.push(t)},handleShowReportTips(){if(j())return;let e=R("call_report_tips_"+getApp().globalData.uid);g(e)&&(this.showViewTop(),this.$nextTick(()=>{let t=setTimeout(()=>{clearTimeout(t),this.handleSpliceTimer(t),Ld.getComponentRect(this.$refs.callReportUser,i=>{i&&i.size&&(this.reportArrowLeft=i.size.left-uni.upx2px(24),this.showReportTips=!0)})},20);this.timerIDList.push(t)}))},handleSpliceTimer(e){let t=this.timerIDList.indexOf(e);t!=-1&&this.timerIDList.splice(t,1)},clearRemindTimer(){if(!(this.timerIDList.length<=0))for(let e=0,t=this.timerIDList.length;e<t;e++)clearTimeout(this.timerIDList[e])}}},Dd={data(){return{isGameShow:!1,isGameMatch:!1,gameOpenType:0}},methods:{clickCallOpen(){return $(this,null,function*(){this.pluginIdentifyStatus=!1,yield this._pluginStopIdentify(),this.pluginTranslateStatus=!1,yield this._pluginStopTranslate(),this.isGameShow=!1})},answerByGameNotify(e){this.addLogOnLoad(e),this.openType=e.openType,this.roomType=e.roomType,this.callType=e.callType,this.actionType=e.actionType,this.fromType=e.fromType,this.isPreview=e.isPreview,this.initUser(e.user),this.checkPermission().then(()=>{this.initData(e.roomInfo),this.answerChat().then(()=>(this.isClickAnswer=!1,this.initEngine())).then(()=>{this.$nextTick(()=>{let t=this.$refs.gameView;t&&t.matchSuccess(this.userInfo)}),C("error","at pages/call/chat-view-game.mixin.js:39","-----> clickAnswer finish ...")})})},initGameMatchNotice(){if(!this.isGameShow)return;C("error","at pages/call/chat-view-game.mixin.js:45","\u540C\u610F\u5339\u914D\u8FDE\u63A5");let e=this.$refs.gameView;e&&e.matchSuccess(this.userInfo)},initGameMatchSuccess(e){this.isGameMatch=!0,C("error","at pages/call/chat-view-game.mixin.js:53","\u5339\u914D\u6210\u529F\u8FDE\u63A5 "+JSON.stringify(e)),this.initView(e),this.$nextTick(()=>{let t=this.$refs.gameView;t&&t.matchSuccess(this.userInfo)})},initGameData(e){this.gameOpenType=1,e.roomInfo&&typeof e.roomInfo.isGameMatch!="undefined"&&(this.isGameMatch=!0,this.gameOpenType=2),this.isGameShow=!0}},onLoad(){uni.$on("event_game_match_success",this.initGameMatchSuccess),uni.$on("event_game_answer_call",this.answerByGameNotify)},onUnload(){uni.$off("event_game_match_success",this.initGameMatchSuccess),uni.$off("event_game_answer_call",this.answerByGameNotify)}},Md={"view-base":{"":{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0,0,0,0.2)",paddingTop:0,paddingRight:"24rpx",paddingBottom:0,paddingLeft:"6rpx",height:"84rpx",borderRadius:"42rpx",borderWidth:1,borderStyle:"solid",borderColor:"rgba(255,255,255,0.3)"}},"view-user":{"":{height:"84rpx",marginLeft:"12rpx",justifyContent:"center"}}},Ed={components:{LImg:v,AvatarImg:It,UBaseInfo:$t},props:{user:{type:Object,default(){return{}}},avatarUrl:{type:String,default:""}},computed:{nicknameStr(){let e=$e(this.user);if(this.user.hide_profile||g(this.user.birthday))return e;let t=hn(this.user.birthday);return g(t)?e:`${e}, ${t}`},uBaseInfoStyle(){let e=this.user.auth_status==9?4:-6;return this.user.level<=0&&this.user.is_auth==0&&(e+=10),{marginTop:`${e}rpx`,marginLeft:this.user.auth_status==9||this.user.sex==2?"0":"-4rpx"}}},methods:{clickThis(e){e.stopPropagation()}}};function Od(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("avatar-img"),It),u=y((0,s.resolveDynamicComponent)("u-base-info"),$t);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"view-base",renderWhole:!0},[i.avatarUrl?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,src:i.avatarUrl,w:"64rpx",h:"64rpx",radius:"32rpx",border:"1px solid #FFFFFF"},null,8,["src"])):((0,s.openBlock)(),(0,s.createBlock)(c,{key:1,user:i.user,w:"64rpx",h:"64rpx",radius:"32rpx",border:"1px solid #FFFFFF","place-type":0},null,8,["user"])),(0,s.createElementVNode)("view",{class:"view-user"},[(0,s.createElementVNode)("u-text",{style:{"font-size":"24rpx",color:"#FFFFFF","font-weight":"bold","margin-top":"4rpx"}},(0,s.toDisplayString)(r.nicknameStr),1),(0,s.createVNode)(u,{info:i.user,"no-name":1,"show-country":!0,"show-age":!1,"name-color":"#FFFFFF",style:(0,s.normalizeStyle)(r.uBaseInfoStyle)},null,8,["info","style"])])])}var Rd=S(Ed,[["render",Od],["styles",[Md]]]),Nd={center:{"":{flexDirection:"row",alignItems:"center"}},"view-income":{"":{paddingTop:"8rpx",paddingRight:"20rpx",paddingBottom:"8rpx",paddingLeft:"20rpx",flexDirection:"row",alignItems:"center"}},text:{".view-income ":{fontSize:"24rpx",color:"#FFFFFF",marginLeft:"4rpx"}},"income-pop":{"":{backgroundColor:"#FFFFFF",width:"520rpx",borderRadius:"16rpx",alignItems:"center"}},"text-title":{".income-pop ":{fontSize:"34rpx",fontWeight:"500",color:"#333333",textAlign:"center",marginTop:"20rpx",marginBottom:"20rpx"}},"view-item":{".income-pop ":{width:"440rpx",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"12rpx"}},"text-reward":{".income-pop ":{fontSize:"24rpx",color:"#333333"}},"view-line":{".income-pop ":{width:"440rpx",height:"2rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(0,0,0,0.1)",backgroundColor:"rgba(0,0,0,0.1)",transform:"scaleY(0.5)",transformOrigin:"50% 100%"}},"view-total":{".income-pop ":{width:"440rpx",height:"84rpx",justifyContent:"flex-end"}},"view-gift":{".income-pop ":{width:"440rpx",maxHeight:"250rpx",backgroundColor:"#F1F3F6",borderRadius:"8rpx",flexDirection:"row",flexWrap:"wrap",marginBottom:"20rpx"}},"gift-item":{".income-pop ":{width:"110rpx",height:"124rpx",alignItems:"center",justifyContent:"center"}}},Bd={components:{Coin:Ce},props:{type:{type:Number,default:0},callDuration:{type:[String,Number],default:0}},data(){return{income:0,list:[],giftList:[],giftCount:0}},computed:{isLanguageArabic(){return getApp().globalData.languageKey=="ar"},durationStr(){return Ni(this.callDuration)}},methods:{$str:h,clickThis(e){e&&e.stopPropagation(),!(this.list.length<=0)&&this.$refs.incomePop.open()},clickClose(){this.$refs.incomePop.close()},onIncomeListener(e){e.isGift?(this.giftCount+=e.gift.number,this.giftList.push(e.gift)):(e.list.pop(),this.list=e.list,this.income=e.total_income)}},created(){uni.$on("event_call_income_listener",this.onIncomeListener)},unmounted(){uni.$off("event_call_income_listener",this.onIncomeListener)}};function Pd(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("coin"),Ce),u=y((0,s.resolveDynamicComponent)("uni-icons"),J),p=y((0,s.resolveDynamicComponent)("uni-popup"),re);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{onClick:t[0]||(t[0]=(...d)=>r.clickThis&&r.clickThis(...d)),class:"view-income",renderWhole:!0},[(0,s.createVNode)(a,{src:"s/call/income_bag.png",w:"24rpx",h:"24rpx"}),(0,s.createElementVNode)("u-text",{class:"text"},(0,s.toDisplayString)(r.$str("income"))+": ",1),(0,s.createVNode)(c,{coin:n.income,color:"#FFFA1E"},null,8,["coin"]),(0,s.createVNode)(u,{type:"right",size:"28rpx",color:"#FFFFFF"}),(0,s.createVNode)(p,{ref:"incomePop",type:"center"},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"income-pop"},[(0,s.createElementVNode)("u-text",{class:"text-title"},(0,s.toDisplayString)(r.$str("income")),1),((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(n.list,(d,_)=>((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:_,class:"view-item"},[(0,s.createElementVNode)("u-text",{class:"text-reward"},(0,s.toDisplayString)(d.title),1),d.type==1?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,class:"text-reward"},(0,s.toDisplayString)(r.durationStr),1)):_==n.list.length-1?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:1,class:"text-reward"},(0,s.toDisplayString)(n.giftCount||""),1)):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(c,{coin:Number(d.coins),color:"#FF953F",w:26,size:28,fw:500},null,8,["coin"])]))),128)),n.giftList.length>0?((0,s.openBlock)(),(0,s.createElementBlock)("scroll-view",{key:0,scrollY:!0,showScrollbar:!1,class:"view-gift"},[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(n.giftList,(d,_)=>((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:`g${_}`,class:"gift-item"},[(0,s.createVNode)(a,{src:d.icon,w:"48rpx",h:"48rpx"},null,8,["src"]),(0,s.createVNode)(c,{coin:d.price*d.number,color:"#FF953F",size:20,w:18},null,8,["coin"]),(0,s.createElementVNode)("u-text",{style:{"font-size":"20rpx",color:"#FF4477","margin-top":"4rpx"}},"x"+(0,s.toDisplayString)(d.number),1)]))),128))])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("view",{class:"view-line"}),(0,s.createElementVNode)("view",{class:"center view-total"},[(0,s.createElementVNode)("u-text",{style:{"font-size":"24rpx",color:"#333333","margin-right":"8rpx"}},(0,s.toDisplayString)(r.$str("msg.revenueCoins"))+":",1),(0,s.createVNode)(c,{coin:Number(n.income),color:"#FF953F",w:32,size:32,fw:500},null,8,["coin"])]),(0,s.createVNode)(u,{onClick:r.clickClose,type:"closeempty",size:"36rpx",color:"#333333",style:{position:"absolute",top:"0",right:"0",padding:"24rpx"}},null,8,["onClick"])])]),_:1},512)])}var qa=S(Bd,[["render",Pd],["styles",[Nd]]]),Hd={"call-msg-text":{"":{alignItems:"center",flexDirection:"row",justifyContent:"flex-start",marginLeft:"20rpx"}}},Ud={props:{},data(){return{}}};function Gd(e,t,i,o,n,r){return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"call-msg-text",renderWhole:!0},[(0,s.renderSlot)(e.$slots,"default",{style:"flex:1"})])}var Vn=S(Ud,[["render",Gd],["styles",[Hd]]]),Wd={"view-base":{"":{width:"490rpx",flexDirection:"row"}},"view-text-line":{"":{opacity:.3,borderWidth:1,borderStyle:"solid",borderColor:"#FFFFFF",height:"4rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%",marginTop:"4rpx",marginBottom:"4rpx"}},"text-translate-content":{"":{fontSize:"24rpx",color:"#FFFFFF"}},"text-translate":{"":{fontSize:"16rpx",color:"rgba(255,255,255,0.8)",marginLeft:"6rpx"}},"view-tran-end":{"":{marginTop:"6rpx",flexDirection:"row",alignItems:"center"}}},Vd={emits:["onTranslateFinish"],components:{CallMsgText:Vn},props:{isSend:{type:Boolean,default:!1},content:{type:String,default:""},mtime:{type:[Number,String],default:0},user:{type:Object,default(){return{}}},sendUid:{type:[Number,String],default:0}},data(){return{TRANSLATE_FROM:li,tranContent:""}},computed:{contentStyle(){return{background:this.isSend?"rgba(225, 255, 195, 0.8)":"rgba(255, 255, 255, 0.8)"}},richObj(){let e=`[%name%]: ${this.content}`,t={name:{text:this.isSend?h("me"):At(this.user.sex),color:"#67D4FF"}};return{text:e,info:t}}},methods:{$str:h,onTranslateFinish(e,t){this.tranContent=e.text,this.$nextTick(()=>{this.$emit("onTranslateFinish")})},onTranslateOpen(e){this.isSend||this.mtime<=0||this.mtime<=e||this.$refs.translateIcon.reqTranslate()},onTranslateClick(){uni.$emit("event_translate_auto_open",this.mtime)},clickTranslateStr(e){e&&e.stopPropagation(),mi()}},created(){uni.$on("event_translate_auto_open",this.onTranslateOpen)},beforeUnmount(){uni.$off("event_translate_auto_open",this.onTranslateOpen)}};function jd(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("rich-content"),Pe),c=y((0,s.resolveDynamicComponent)("l-img"),v),u=y((0,s.resolveDynamicComponent)("translate-icon"),Mt),p=(0,s.resolveComponent)("call-msg-text");return(0,s.openBlock)(),(0,s.createBlock)(p,null,{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"view-base"},[(0,s.createElementVNode)("view",{style:{"padding-bottom":"30rpx"}},[(0,s.createVNode)(a,{data:r.richObj,color:"rgba(255,255,255,0.8)","font-size":"24rpx",style:{"max-width":"435rpx",background:"transparent"}},null,8,["data"]),n.tranContent?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0},[(0,s.createElementVNode)("view",{class:"view-text-line"}),(0,s.createElementVNode)("u-text",{class:"text-translate-content",style:{"max-width":"435rpx"}},(0,s.toDisplayString)(n.tranContent),1),(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(...d)=>r.clickTranslateStr&&r.clickTranslateStr(...d)),class:"view-tran-end"},[(0,s.createVNode)(c,{src:"s/pub/tran_end_grey.png",w:"24rpx",h:"24rpx"}),(0,s.createElementVNode)("u-text",{class:"text-translate"},(0,s.toDisplayString)(r.$str("autoTranslation")),1)])])):(0,s.createCommentVNode)("",!0)]),(0,s.createVNode)(u,{ref:"translateIcon",onOnTranslateFinish:r.onTranslateFinish,onOnTranslateClick:r.onTranslateClick,isAuto:!i.isSend,"from-language":i.user.language,border:!0,showTran:!1,"api-params":{from_type:n.TRANSLATE_FROM.CALL,from_uid:i.sendUid,key:i.mtime},bg:"#C6CDD6",text:i.content,showTranContent:!1,paddingTop:"0"},null,8,["onOnTranslateFinish","onOnTranslateClick","isAuto","from-language","api-params","text"])])]),_:1})}var zd=S(Vd,[["render",jd],["styles",[Wd]]]),$d={"view-base":{"":{width:"490rpx",flexDirection:"row"}},"view-center":{"":{flexDirection:"row",alignItems:"center"}},"text-action":{"":{lineHeight:"34rpx",color:"#67D4FF",fontSize:"20rpx",textDecoration:"underline"}},"view-text-line":{"":{opacity:.3,borderWidth:1,borderStyle:"solid",borderColor:"#FFFFFF",height:"4rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%",marginTop:"4rpx",marginBottom:"4rpx"}},"text-translate-content":{"":{fontSize:"24rpx",color:"#FFFFFF"}},"text-translate":{"":{fontSize:"16rpx",color:"rgba(255,255,255,0.8)",marginLeft:"6rpx"}},"view-tran-end":{"":{marginTop:"6rpx",flexDirection:"row",alignItems:"center"}}},Kd={emits:["onTranslateFinish"],components:{CallMsgText:Vn},props:{content:{type:String,default:""},user:{type:Object,default(){return{}}}},data(){return{TRANSLATE_FROM:li,obj:{},richObj:{},fromLanguage:mo(),tranContent:""}},computed:{msgAvatar(){return fn().logo},transText(){switch(this.obj.type){case Ut.CHECK_DIFFERENT:return h("notKnowHeSaid",{him:he(this.user.sex)});case Ut.OPEN_TRANSLATE:return h("automaticTranslateWordTip",{his:un(this.user.sex),language:this.obj.language})}return""},apiTranslateKey(){return this.obj.type==Ut.OPEN_TRANSLATE?`${this.obj.language}_2`:this.obj.type+200},actionStr(){switch(this.obj.type){case Ut.CHECK_DIFFERENT:return h("tryTranslationOptions")}return""}},methods:{$str:h,onTranslateFinish(e,t){this.tranContent=e.text,this.$nextTick(()=>{this.$emit("onTranslateFinish")})},onTranslateOpen(e){this.isSend||this.mtime<=0||this.mtime<=e||this.$refs.translateIcon.reqTranslate()},onTranslateClick(){uni.$emit("event_translate_auto_open",this.mtime)},clickTranslateStr(e){e&&e.stopPropagation(),mi()},clickAction(e){e&&e.stopPropagation(),uni.$emit("event_msg_automatic_action",1)},parseNodes(){let e=`[%nickname%]: ${this.transText}`,t={nickname:{text:h("customerService"),color:"#67D4FF"}};this.richObj={text:e,info:t}}},created(){this.obj=Je(this.content)||{},this.parseNodes(),uni.$on("event_translate_auto_open",this.onTranslateOpen)},beforeUnmount(){uni.$off("event_translate_auto_open",this.onTranslateOpen)}};function Yd(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("rich-content"),Pe),c=y((0,s.resolveDynamicComponent)("uni-icons"),J),u=y((0,s.resolveDynamicComponent)("l-img"),v),p=y((0,s.resolveDynamicComponent)("translate-icon"),Mt),d=(0,s.resolveComponent)("call-msg-text");return(0,s.openBlock)(),(0,s.createBlock)(d,null,{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"view-base"},[(0,s.createElementVNode)("view",{style:{"padding-bottom":"30rpx"}},[(0,s.createVNode)(a,{data:n.richObj,color:"rgba(255,255,255,0.8)","font-size":"24rpx",style:{"max-width":"435rpx",background:"transparent"}},null,8,["data"]),r.actionStr?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(..._)=>r.clickAction&&r.clickAction(..._)),class:"view-center",style:{"margin-top":"16rpx"}},[(0,s.createElementVNode)("u-text",{class:"text-action"},(0,s.toDisplayString)(r.actionStr),1),(0,s.createVNode)(c,{type:"right",size:"20rpx",color:"#67D4FF",style:{"margin-left":"4rpx"}})])):(0,s.createCommentVNode)("",!0),n.tranContent?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1},[(0,s.createElementVNode)("view",{class:"view-text-line"}),(0,s.createElementVNode)("u-text",{class:"text-translate-content",style:{"max-width":"435rpx"}},(0,s.toDisplayString)(n.tranContent),1),(0,s.createElementVNode)("view",{onClick:t[1]||(t[1]=(..._)=>r.clickTranslateStr&&r.clickTranslateStr(..._)),class:"view-tran-end"},[(0,s.createVNode)(u,{src:"s/pub/tran_end_grey.png",w:"24rpx",h:"24rpx"}),(0,s.createElementVNode)("u-text",{class:"text-translate"},(0,s.toDisplayString)(r.$str("autoTranslation")),1)])])):(0,s.createCommentVNode)("",!0)]),(0,s.createVNode)(p,{ref:"translateIcon",onOnTranslateFinish:r.onTranslateFinish,onOnTranslateClick:r.onTranslateClick,isAuto:!0,"from-language":n.fromLanguage,border:!0,showTran:!1,"api-params":{from_type:n.TRANSLATE_FROM.CALL,key:r.apiTranslateKey},bg:"#C6CDD6",text:r.transText,showTranContent:!1,paddingTop:"0"},null,8,["onOnTranslateFinish","onOnTranslateClick","from-language","api-params","text"])])]),_:1})}var qd=S(Kd,[["render",Yd],["styles",[$d]]]),Jd={"view-base":{"":{width:"490rpx",flexDirection:"row"}},"view-text-line":{"":{opacity:.3,borderWidth:1,borderStyle:"solid",borderColor:"#FFFFFF",height:"4rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%",marginTop:"4rpx",marginBottom:"4rpx"}},"text-translate-content":{"":{fontSize:"24rpx",color:"#FFFFFF"}},"text-translate":{"":{fontSize:"16rpx",color:"rgba(255,255,255,0.8)",marginLeft:"6rpx"}},"view-tran-end":{"":{marginTop:"6rpx",flexDirection:"row",alignItems:"center"}}},Zd={emits:["onTranslateFinish"],components:{CallMsgText:Vn},props:{isSend:{type:Boolean,default:!1},content:{type:Object,default(){return{}}},mtime:{type:[Number,String],default:0},user:{type:Object,default(){return{}}},sendUid:{type:[Number,String],default:0}},data(){return{TRANSLATE_FROM:li,richObj:{},tranContent:""}},computed:{transText(){return g(this.content.content)?this.content.text?La(this.content):"":this.content.content}},methods:{$str:h,onTranslateFinish(e,t){this.tranContent=e.text,this.$nextTick(()=>{this.$emit("onTranslateFinish")})},onTranslateOpen(e){this.isSend||this.mtime<=0||this.mtime<=e||this.$refs.translateIcon.reqTranslate()},onTranslateClick(){uni.$emit("event_translate_auto_open",this.mtime)},clickTranslateStr(e){e&&e.stopPropagation(),mi()},parseNodes(){let e,t;this.content.text?(e=`[%nickname%]: ${this.content.text}`,t=this.content.info):this.content.content&&(e=`[%nickname%]: ${this.content.content}`,t={}),t.nickname={text:h("customerService"),color:"#67D4FF"},this.richObj={text:e,info:t}}},created(){this.parseNodes(),uni.$on("event_translate_auto_open",this.onTranslateOpen)},beforeUnmount(){uni.$off("event_translate_auto_open",this.onTranslateOpen)}};function Xd(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("rich-content"),Pe),c=y((0,s.resolveDynamicComponent)("l-img"),v),u=y((0,s.resolveDynamicComponent)("translate-icon"),Mt),p=(0,s.resolveComponent)("call-msg-text");return(0,s.openBlock)(),(0,s.createBlock)(p,null,{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"view-base"},[(0,s.createElementVNode)("view",{style:{"padding-bottom":"30rpx"}},[(0,s.createVNode)(a,{data:n.richObj,color:"rgba(255,255,255,0.8)","font-size":"24rpx",style:{"max-width":"435rpx",background:"transparent"}},null,8,["data"]),n.tranContent?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0},[(0,s.createElementVNode)("view",{class:"view-text-line"}),(0,s.createElementVNode)("u-text",{class:"text-translate-content",style:{"max-width":"435rpx"}},(0,s.toDisplayString)(n.tranContent),1),(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(...d)=>r.clickTranslateStr&&r.clickTranslateStr(...d)),class:"view-tran-end"},[(0,s.createVNode)(c,{src:"s/pub/tran_end_grey.png",w:"24rpx",h:"24rpx"}),(0,s.createElementVNode)("u-text",{class:"text-translate"},(0,s.toDisplayString)(r.$str("autoTranslation")),1)])])):(0,s.createCommentVNode)("",!0)]),(0,s.createVNode)(u,{ref:"translateIcon",onOnTranslateFinish:r.onTranslateFinish,onOnTranslateClick:r.onTranslateClick,isAuto:!i.isSend,"from-language":i.user.language,border:!0,showTran:!1,"api-params":{from_type:n.TRANSLATE_FROM.CALL,from_uid:i.sendUid,key:i.mtime},bg:"#C6CDD6",text:r.transText,showTranContent:!1,paddingTop:"0"},null,8,["onOnTranslateFinish","onOnTranslateClick","isAuto","from-language","api-params","text"])])]),_:1})}var Qd=S(Zd,[["render",Xd],["styles",[Jd]]]),ef={"view-base":{"":{width:"590rpx",backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"16rpx",alignItems:"center"}},"text-title":{"":{fontWeight:"600",fontSize:"34rpx",color:"#FFFFFF"}},text:{"":{fontSize:"28rpx",color:"#FFFFFF"}},"text-content":{"":{fontSize:"30rpx",marginTop:"30rpx",width:"444rpx"}},"text-btn":{"":{width:"470rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(255,255,255,0.7)",borderRadius:"16rpx",lineHeight:"88rpx",textAlign:"center",marginTop:"48rpx"}},"text-ignore":{"":{width:"470rpx",lineHeight:"104rpx",color:"rgba(255,255,255,0.8)",textAlign:"center"}}},tf={components:{Coin:Ce,LImg:v,UniPopup:re},emits:["onClickSend","onClickIgnore"],data(){return{timerPop:!1,ignoreTime:5,isEmitIgnore:!1}},computed:{ignoreStr(){let e=this.ignoreTime<=0?"":`(${this.ignoreTime}s)`;return`${h("ignore")} ${e}`}},methods:{$str:h,clickPop(e){e.stopPropagation()},clickSend(e){e&&e.stopPropagation(),this.isEmitIgnore=!0,this.close(),this.gift.count=1,this.$emit("onClickSend",this.gift)},clickIgnore(e){e&&e.stopPropagation(),this.close(),this.emitIgnore()},emitIgnore(){this.isEmitIgnore||(this.isEmitIgnore=!0,this.$emit("onClickIgnore",this.gift))},close(){this.timerPop=!1,this.$refs.popThis.close()},handleTimer(){this.timerPop=!0,this.ignoreTime=5,setTimeout(()=>{this.ignoreTime=4,setTimeout(()=>{this.ignoreTime=3,setTimeout(()=>{this.ignoreTime=2,setTimeout(()=>{this.ignoreTime=1,setTimeout(()=>{this.ignoreTime=0,this.close(),this.emitIgnore()},1e3)},1e3)},1e3)},1e3)},1e3)},open(e){this.timerPop||(this.isEmitIgnore=!1,this.gift=e,this.$refs.popThis.open(),this.handleTimer())}}};function nf(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("coin"),Ce),u=y((0,s.resolveDynamicComponent)("uni-popup"),re);return(0,s.openBlock)(),(0,s.createBlock)(u,{ref:"popThis","is-mask-click":!1,"mask-click":!1,mode:"center"},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{onClick:t[2]||(t[2]=(...p)=>r.clickPop&&r.clickPop(...p)),class:"view-base"},[(0,s.createVNode)(a,{src:e.gift.icon,w:"144rpx",h:"144rpx",style:{"margin-top":"20rpx"}},null,8,["src"]),(0,s.createElementVNode)("u-text",{class:"text-title"},(0,s.toDisplayString)(e.gift.title),1),(0,s.createVNode)(c,{coin:e.gift.price,color:"#FF953F"},null,8,["coin"]),(0,s.createElementVNode)("u-text",{class:"text text-content"},(0,s.toDisplayString)(r.$str("msg.giftAskText")),1),(0,s.createElementVNode)("u-text",{onClick:t[0]||(t[0]=(...p)=>r.clickSend&&r.clickSend(...p)),class:"text text-btn"},(0,s.toDisplayString)(r.$str("send")),1),(0,s.createElementVNode)("u-text",{onClick:t[1]||(t[1]=(...p)=>r.clickIgnore&&r.clickIgnore(...p)),class:"text text-ignore"},(0,s.toDisplayString)(r.ignoreStr),1)])]),_:1},512)}var rf=S(tf,[["render",nf],["styles",[ef]]]),ue={payIos:1,payAndroid:2,active(e,t,i,o,n){let r=es(o,e,n);i==1?Vt("pay_active",t,r):Vt("vip_active",t,r)},success(e,t,i,o,n){let r=es(o,e,n);i==1?Vt("pay_success",t,r):Vt("vip_success",t,r),ma(t);let a={currency:"USD",transaction_id:o,affiliation:e==ue.payAndroid?"google":"apple"};Dr("purchase",t,a)},fail(e,t,i,o,n,r){let a=es(o,e,n);a.code=r,i==1?Vt("pay_fail",t,a):Vt("vip_fail",t,a)},cancel(e,t){}};function es(e,t,i){return{goods_id:e,pay_type:t,from_type:i}}var Ot;O.isAndroid?Ot=le("PayModule"):Ot=le("IAPModule");var Yt={FROM_INDEX:1e3,FROM_DIALOG_BUY:10,FROM_MATCH_INDEX:11,FROM_MATCH_FILTER_SEX:12,FROM_CALL_NO_COINS:13,checkAndroidPay(){O.isAndroid&&(af(),Ot.executeQueryPur({},e=>{let t;try{t=JSON.parse(e.data)}catch(i){return}Ja(t,"",1,"",()=>{})}))},initMonitor(){O.isAndroid||Ot.sendAllPurchase({uid:getApp().globalData.uid},e=>{switch(e.type){case 200:Yt.verifyApply(e.data.productid,e.data.product_type,e.data.receiptdata,e.data.orderid,e.data.transaction_id);break;case 201:k.request("/other/iap-log",{content:e.data.log});break}})},verifyApply(e,t,i,o,n,r,a){let c={sku:e,product_type:t,receipt_data:i,tran_no:o};g(n)||(c.transaction_id=n),k.request("/pay/verify/apple",c,!0,!0).then(u=>{Ot.finishOrder({order_id:c.tran_no}),u.ok==1?(rt("pubUser",u.data.user_info),be(u.data.account_info.money),typeof r=="function"&&r(u.data),u.data.is_sandbox!=1&&ue.success(ue.payIos,u.data.money,u.data.product_type,u.data.goods_id,u.data.from_type),Wn(t,u.data)):a()},()=>{a()})},evokePayV1(e,t,i,o,n,r,a){Yt.evokePay(e,t,i,o,a,n,r)},evokePay(e,t,i,o,n,r,a){if(O.ENV=="dev"){let p=O.isAndroid?ue.payAndroid:ue.payIos;ue.active(p,10,i,e,o),i==1?k.request("/pay/coin/recharge",{goods_id:e},!0,!0).then(d=>{be(d.data.balance),typeof n=="function"&&n(d),Wn(i,d.data),ue.success(p,10,i,e,o)},()=>{}):k.request("/pay/vip/confirm",{goods_id:e},!0,!0).then(d=>{rt("pubUser.is_vip",1),be(d.data.balance),typeof n=="function"&&n(),Wn(i,d.data),ue.success(p,21,i,e,o)},()=>{});return}if(O.isAndroid){sf(e,t,i,o,n,r,a);return}let c="0",u={goods_id:e,product_type:i,from_type:o};u.order_source=typeof r=="undefined"?0:r,u.click_type=typeof a=="undefined"?0:a,uni.showLoading({title:h("paymentEvoking")+"...",mask:!0}),k.request("/pay/order/apple",u,!1,!0).then(p=>{if(p.data&&p.data.pay_item&&(c=p.data.pay_item.money),typeof Ot.startPurchase=="undefined"){Kt(ue.payIos,df,c,e,i,o);return}ue.active(ue.payIos,c,i,e,o);let d={uid:getApp().globalData.uid,orderid:p.data.tran_no,productid:t,product_type:i.toString()};Ot.startPurchase(d,function(_){_.status==O.PAY_TYPE_SUCCESS?Yt.verifyApply(t,i,_.data.receiptdata,p.data.tran_no,_.data.transaction_id,function(){typeof n=="function"&&n()},function(){Kt(ue.payIos,hf,c,e,i,o)}):(_.data&&_.data.errorCode&&_.data.errorCode>0,k.request("/pay/order/apple-cancel",{tran_no:p.data.tran_no,errorCode:_.data&&_.data.errorCode||0,status:_.status})),uni.hideLoading()},function(_){Kt(ue.payIos,mf,c,e,i,o),zi.request(zi.FROM_TYPE.WAKE_UP,_)})},()=>{Kt(ue.payIos,pf,c,e,i,o)})}};function sf(e,t,i,o,n,r,a){let c={goods_id:e,sku:t,product_type:i,from_type:Number(o)};c.order_source=typeof r=="undefined"?0:r,c.click_type=typeof a=="undefined"?0:a;let u,p=0;uni.showLoading({mask:!0}),k.request("/pay/order/google",c,!1,!0).then(d=>{C("error","at common/pay.js:177","-----> /pay/order/google ",d),u=d.data.tran_no,d.data.pay_item&&(p=Number(d.data.pay_item.money||0));let _={sku:t,sku_some:"sku_lnc",product_type:i,tran_no:u};ue.active(ue.payAndroid,p,i,e,o),Ot.executePay(_,w=>{if(C("error","at common/pay.js:189","PayModule ",w),w.success){let D=JSON.parse(w.data);Ja(D,u,i,()=>{typeof n=="function"&&n()},function(){Kt(ue.payAndroid,cf,p,e,i,o)})}else{uni.hideLoading();let D,b;typeof w.appCode!="undefined"?(D=w.appCode,b=w.googleCode):(D=w.data,b=-999),D==0||(D==-12&&b==3?Be(h("tips"),h("pay.googleAccountErrorTip"),()=>{po("ACTION_SYNC_SETTINGS")},null,h("toChange"),!0,h("gotIt")):Kt(ue.payAndroid,uf,p,e,i,o)),k.request("/pay/order/google-cancel",{tran_no:u,errorCode:D,googleCode:b})}typeof w.supportV5!="undefined"&&w.supportV5===0&&!getApp().globalData.catchGooglePayNoSupportV5&&(getApp().globalData.catchGooglePayNoSupportV5=!0,zi.request(zi.FROM_TYPE.NO_SUPPORT_V5,"google play not support v5"))})},d=>{Kt(ue.payAndroid,lf,p,e,i,o)})}function Ja(e,t,i,o,n){let r={package_name:e.packageName,purchase_token:e.purchaseToken,tran_no:g(e.obfuscatedAccountId)?t:e.obfuscatedAccountId,order_id:e.orderId};k.request("/pay/verify/google",r,!1,!0).then(a=>{uni.hideLoading(),a.ok==1?(rt("pubUser",a.data.user_info),be(a.data.account_info.money),typeof o=="function"&&o(a.data),Wn(a.data.product_type,a.data),Za(r),a.data.is_sandbox!=1&&ue.success(ue.payAndroid,a.data.money,a.data.product_type,a.data.goods_id,a.data.from_type)):n()},a=>{n(),of(r)})}function of(e){let t=R("verify_google"),i=!1,o;if(t){o=JSON.parse(t);for(let n=0,r=o.length;n<r;n++)if(o[n].tran_no==e.tran_no){i=!0;break}}else o=[];i||(o.push(e),N("verify_google",JSON.stringify(o)))}function Za(e){R("verify_google",!1,t=>{if(!t)return;let i=JSON.parse(t),o=-1;for(let n=0,r=i.length;n<r;n++)if(i[n].tran_no==e.tran_no){o=n;break}o!=-1&&(i.splice(o,1),N("verify_google",JSON.stringify(i)))})}function af(){let e=R("verify_google");if(e)try{let t=JSON.parse(e);if(t==null||t==""){de("verify_google");return}for(let i=0,o=t.length;i<o;i++){let n=t[i];n.flag=1,k.request("/pay/verify/google",n).then(r=>{Za(n)})}}catch(t){de("verify_google")}}function Wn(e,t){e==1?(uni.$emit("event_pay_success_coins"),Tt(h("purchaseSuccessful"))):uni.$emit("event_pay_success_vip"),Do(),Mo(),uni.$emit("event_close_share_enter"),uni.$emit("event_change_complete_profile",{from_type:2}),t.wheel_free_chance&&uni.$emit("event_wheel_free_chance",t.wheel_free_chance),getApp().iconCacheGift(2,"recharge")}var lf=101,cf=102,uf=103,pf=201,hf=202,mf=203,df=203;function Kt(e,t,i,o,n,r){uni.hideLoading(),ue.fail(e,i,n,o,r,t)}var ff={"c-red":{"":{color:"#FF4477"}},"recharge-item":{"":{backgroundColor:"rgba(0,0,0,0.4)",borderTopLeftRadius:0,borderTopRightRadius:"8rpx",borderBottomRightRadius:"8rpx",borderBottomLeftRadius:0,width:"490rpx"}},"text-view":{"":{paddingTop:"16rpx",paddingRight:"20rpx",paddingBottom:"16rpx",paddingLeft:"20rpx"}},"text-desc":{"":{marginTop:"8rpx",fontSize:"20rpx",color:"rgba(255,255,255,0.8)"}},"split-line":{"":{height:"2rpx",backgroundColor:"rgba(255,255,255,0.1)"}},"content-view":{"":{paddingTop:"24rpx",paddingRight:"20rpx",paddingBottom:"16rpx",paddingLeft:"20rpx",marginLeft:"-4rpx"}},"italic-line":{"":{fontStyle:"italic",width:"2rpx",height:"24rpx",transform:"rotate(15deg)"}},"line-1":{"":{backgroundColor:"rgba(255,255,255,0.14)"}},"line-2":{"":{backgroundColor:"rgba(255,255,255,0.28)"}},"line-3":{"":{backgroundColor:"rgba(255,255,255,0.49)"}},"center-view":{"":{marginTop:"4rpx",marginRight:"20rpx",marginBottom:0,marginLeft:"20rpx"}},text:{".center-view ":{fontSize:"24rpx",fontWeight:"bold",fontStyle:"italic",lineHeight:"28rpx"}},"white-text":{".center-view ":{color:"#FFFFFF",position:"absolute",top:"-2rpx",left:"-2rpx"}},"black-text":{".center-view ":{color:"#333333"}},"money-view":{"":{marginTop:0,marginRight:"20rpx",marginBottom:"20rpx",marginLeft:"20rpx",flexDirection:"row",alignItems:"center",justifyContent:"space-between",height:"60rpx"}},"money-title":{"":{fontWeight:"bold",color:"#FFFA1E",lineHeight:"52rpx",fontStyle:"italic"}},"money-small-title":{"":{fontSize:"24rpx",lineHeight:"28rpx",fontStyle:"italic",fontWeight:"bold",color:"#FFFA1E"}},"money-amount":{"":{fontWeight:"bold",color:"#FFFFFF",lineHeight:"52rpx",marginLeft:"4rpx"}},"money-original":{"":{marginTop:"-6rpx",fontSize:"16rpx",textDecoration:"line-through"}},"recharge-btn":{"":{marginTop:0,marginRight:"20rpx",marginBottom:0,marginLeft:"20rpx",height:"48rpx",borderRadius:"8rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#FFFFFF"}},"recharge-text":{"":{textAlign:"center",color:"#FFFFFF",fontSize:"20rpx"}},"text-options":{"":{fontSize:"24rpx",color:"#67D4FF"}}},gf={components:{RichContent:Pe,UniIcons:J,LImg:v},data(){return{time:0,duration:0,payItem:{},showView:!1,timer:!1,richContent:"",isFreeCall:!1}},computed:{moneySize(){return this.payItem.product_type!=1?"44rpx":Number(this.payItem.diamond)>=1e4?"40rpx":"44rpx"},moneyIcon(){return this.payItem.product_type==1?this.payItem.coin_icon:"s/pub/money_vip.png"},productType(){return this.payItem.product_type},monthStr(){let e=gr(Number(this.payItem.month));return this.payItem.month+" "+e+" VIP"},addCoinsStr(){return"+ "+pn(Number(this.payItem.give_coins))},discountNum(){return this.productType==1?this.payItem.sale_desc.substring(0,2):this.payItem.sale_desc.substring(5,7)},originalStr(){return this.productType==1?this.payItem.original_desc:this.payItem.original}},methods:{$str:h,clickMoreOptions(){let e=this.isFreeCall?pt.CALL_FREE:pt.CALL_FEE;Ze(0,1,e,Ei.NO_BALANCE_MSG_WINDOW),k.request("/pay/coin/more-stat",{})},clickGetCoins(){let e=this.isFreeCall?pt.CALL_FREE:pt.CALL_FEE;Yt.evokePayV1(this.payItem.id,this.payItem.sku,this.payItem.product_type,Yt.FROM_CALL_NO_COINS,e,Ei.NO_BALANCE_MSG_WINDOW)},startTimer(){this.timer&&clearInterval(this.timer),this.timer=setInterval(()=>{this.time<=1&&(this.hide(),clearInterval(this.timer)),this.time-=1,this.setRichContent()},1e3)},setRichContent(){this.richContent={text:this.$str("call.declinedAfter"),info:{second:{text:this.time+"s",color:"#FFFA1E"}}}},show(e,t,i){this.payItem=e,this.time=t,this.isFreeCall=i,this.setRichContent(),this.startTimer(),this.$nextTick(()=>{this.showView=!0})},hide(){this.time=0,this.richContent="",this.payItem={},this.showView=!1,this.timer&&clearInterval(this.timer)}}};function _f(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("rich-content"),Pe),c=y((0,s.resolveDynamicComponent)("l-img"),v),u=y((0,s.resolveDynamicComponent)("uni-icons"),J);return n.showView?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"recharge-item",renderWhole:!0},[(0,s.createElementVNode)("view",{class:"text-view"},[n.richContent?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,data:n.richContent,color:"#FFFFFF",style:{"font-size":"24rpx","background-color":"transparent"}},null,8,["data"])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("u-text",{class:"text-desc"},(0,s.toDisplayString)(r.$str("call.followingSpecialDiscount")),1)]),(0,s.createElementVNode)("view",{class:"split-line"}),(0,s.createElementVNode)("view",{class:"content-view center-align"},[(0,s.createElementVNode)("view",{class:"center"},[(0,s.createElementVNode)("view",{class:"italic-line line-1"}),(0,s.createElementVNode)("view",{class:"italic-line line-2",style:{"margin-left":"16rpx"}}),(0,s.createElementVNode)("view",{class:"italic-line line-3",style:{"margin-left":"16rpx"}})]),(0,s.createElementVNode)("view",{class:"center center-view"},[(0,s.createElementVNode)("u-text",{style:{"font-size":"24rpx"}},"\u{1F911}"),(0,s.createElementVNode)("view",{style:{position:"relative","margin-left":"6rpx"}},[(0,s.createElementVNode)("u-text",{class:"text black-text"},(0,s.toDisplayString)(r.$str("call.oneTimeOffer")),1),(0,s.createElementVNode)("u-text",{class:"text white-text"},(0,s.toDisplayString)(r.$str("call.oneTimeOffer")),1)])]),(0,s.createElementVNode)("view",{class:"center"},[(0,s.createElementVNode)("view",{class:"italic-line line-3"}),(0,s.createElementVNode)("view",{class:"italic-line line-2",style:{"margin-left":"16rpx"}}),(0,s.createElementVNode)("view",{class:"italic-line line-1",style:{"margin-left":"16rpx"}})])]),(0,s.createElementVNode)("view",{class:"money-view"},[(0,s.createElementVNode)("view",{class:"center"},[(0,s.createVNode)(c,{src:r.moneyIcon,w:"56rpx",h:"50rpx",style:{"max-height":"6rpx"}},null,8,["src"]),r.productType==1?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,class:"money-title",style:(0,s.normalizeStyle)({fontSize:`${r.moneySize}`})},(0,s.toDisplayString)(n.payItem.diamond),5)):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1},[(0,s.createElementVNode)("u-text",{class:"money-small-title"},(0,s.toDisplayString)(r.monthStr),1),(0,s.createElementVNode)("u-text",{class:"money-small-title"},(0,s.toDisplayString)(r.addCoinsStr),1)]))]),(0,s.createElementVNode)("u-text",{style:{"font-size":"20rpx"}},"\u{1F449}"),(0,s.createElementVNode)("view",{class:"center"},[n.payItem.sale_desc?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,style:{position:"relative"}},[(0,s.createElementVNode)("view",{class:"center"},[(0,s.createElementVNode)("u-text",{class:"c-red",style:{"font-size":"28rpx","font-weight":"bold"}},(0,s.toDisplayString)(r.discountNum),1),(0,s.createElementVNode)("view",null,[(0,s.createElementVNode)("u-text",{class:"c-red",style:{"font-size":"20rpx"}},"%"),(0,s.createElementVNode)("u-text",{class:"c-red",style:{"font-size":"12rpx","margin-top":"-6rpx"}},"OFF")])]),(0,s.createElementVNode)("u-text",{class:"money-original c-red"},(0,s.toDisplayString)(r.originalStr),1)])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("u-text",{class:"money-amount",style:(0,s.normalizeStyle)({fontSize:`${r.moneySize}`})},(0,s.toDisplayString)(n.payItem.money_desc),5)])]),(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(...p)=>r.clickGetCoins&&r.clickGetCoins(...p)),class:"recharge-btn center-align"},[(0,s.createElementVNode)("u-text",{class:"recharge-text"},(0,s.toDisplayString)(r.$str("call.getCoinsAndContinue")),1)]),(0,s.createElementVNode)("view",{onClick:t[1]||(t[1]=(...p)=>r.clickMoreOptions&&r.clickMoreOptions(...p)),class:"center-align",style:{padding:"20rpx 0",margin:"8rpx 0"}},[(0,s.createElementVNode)("u-text",{class:"text-options"},(0,s.toDisplayString)(r.$str("morePurchaseOptions")),1),(0,s.createVNode)(u,{type:"right",size:"24rpx",color:"#67D4FF"})])])):(0,s.createCommentVNode)("",!0)}var yf=S(gf,[["render",_f],["styles",[ff]]]),wf={"list-msg":{"":{width:"510rpx",flex:1}},center:{"":{alignItems:"center",flexDirection:"row"}},"level-end":{"":{alignItems:"center",flexDirection:"row",justifyContent:"flex-end"}},"view-gift":{"":{marginBottom:"30rpx",width:"438rpx",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(255,255,255,0.3)",borderRadius:"16rpx"}},"view-line":{".view-gift ":{opacity:.3,borderWidth:1,borderStyle:"solid",borderColor:"#FFFFFF",height:"2rpx",transform:"scaleY(0.5)",transformOrigin:"50% 100%"}},"text-tip":{".view-gift ":{fontSize:"24rpx",color:"#FFFFFF"}},"text-gift-ask":{".view-gift ":{flex:1}},"text-gift-name":{".view-gift ":{fontSize:"28rpx",fontWeight:"500",color:"#FFFFFF"}},"btn-send":{".view-gift ":{height:"44rpx",backgroundImage:"linear-gradient(to right, #FF00BD, #FF5954)",borderRadius:2,paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx",fontSize:"20rpx",color:"#FFFFFF",marginLeft:"8rpx",lineHeight:"44rpx",marginTop:"10rpx",marginBottom:"10rpx"}}},bf=le("dom"),Un=getApp().globalData.window,xf={emits:["onSendAskGift","onShowChange","onClickCallMsgView"],components:{CallRechargeItem:yf,CallGiftAskPop:rf,CallMsgTip:Qd,SendAskGiftPop:Jr,CallMsgText:Vn,CallMsgContent:zd,CallMsgAutomatic:qd,LImg:v,Coin:Ce},props:{uid:{type:[String,Number],default:0},height:{type:String,default:""},roomId:{type:[String,Number],default:0},user:{type:Object,default(){return{}}},bottomActionShow:{type:Boolean,default:!1},inputFocus:{type:Boolean,default:!1}},data(){return{CALL_MSG:Ne,sW:Un.width,sH:Un.height,maxWidth:Un.width/2+40,list:[],askGiftIdx:-1,askGift:{},giftW:Un.width*.55,showThis:!1,hideTimeout:!1,isKeyboardShow:!1}},computed:{showStyle(){return{left:this.showThis?"0":`-${this.sW}px`}}},watch:{showThis:{handler(e,t){this.$emit("onShowChange",e)},immediate:!0},bottomActionShow:{handler(e,t){this.inputFocus||(this.showThis=e)},immediate:!0},inputFocus:{handler(e,t){e?(this.clearHideTimeout(),this.showThis=e):this.handleHideTimeout()},immediate:!0}},methods:{$str:h,clickRechargeItem(e){e&&e.stopPropagation()},onTranslateFinish(){this.$nextTick(()=>{this.scrollBottom()})},clickMsgList(e){e&&e.stopPropagation(),uni.$emit("event_hide_call_msg_input"),!this.isKeyboardShow&&(this.showThis?this.showThis=!1:this.show(),this.$emit("onClickCallMsgView"))},clickGiftSend(e,t,i){if(e&&e.stopPropagation(),this.askGift=t,this.askGiftIdx=i,!R("send_ask_gift_status")){this.onSendGift(1);return}let n={content:t};n.content.count=1,n.content.from_ask=1,this.$refs.sendAskGiftPop.open(n)},onSendGift(e=0){this.askGift.from_ask=e,bi(1,this.askGift,this.uid,this.roomId,we.CALL,()=>{this.list.splice(this.askGiftIdx,1),this.$nextTick(()=>{this.askGift.number=1,this.$emit("onSendAskGift",this.askGift,2)})})},clickGiftAskSend(e){bi(1,e,this.uid,this.roomId,we.CALL,()=>{this.$emit("onSendAskGift",e,2)})},clickGiftAskIgnore(e){let t=this.parseData(Ne.GIFT_ASK_ACTION,new Date().getTime()*1e3,this.uid);t.gift=e,this.pushItem(t)},onKeyboardChange(e){this.isKeyboardShow=e.height>0,this.scrollBottom()},show(){this.showThis=!0,this.handleHideTimeout()},hide(){this.clearHideTimeout(),this.showThis=!1},clearHideTimeout(){this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=!1},handleHideTimeout(){this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.showThis=!1},5e3)},scrollBottom(){let e=setTimeout(()=>{if(this.list.length<=0)return;let t=this.list[this.list.length-1].mtime;typeof t!="undefined"&&typeof this.$refs[`cell${t}`]!="undefined"&&(bf.scrollToElement(this.$refs[`cell${t}`][0],{animated:!0}),clearTimeout(e))},300)},parseData(e,t,i){let o=i==getApp().globalData.uid;return{type:e,mtime:t,send_uid:i,isSend:o}},pushItem(e){this.list.push(e),this.$nextTick(()=>{this.scrollBottom()}),this.show()},addReceiveMsg(e){e.msg_type==Ne.TEXT?this.addMsgTextReceive(e):e.msg_type==Ne.GIFT_ASK_ACTION?this.addMsgGiftAskAction(e):e.msg_type==Ne.SYS&&this.addMsgSys(e)},addMsgTextReceive(e){let t=this.parseData(Ne.TEXT,e.mtime,this.uid);t.text=e.content,this.pushItem(t)},addMsgGiftAskAction(e){let t=JSON.parse(e.content).gift;t&&this.$refs.popGiftAsk.open(t)},addMsgSys(e){let t=this.parseData(Ne.SYS,e.mtime,O.SYSTEM_ID);t.text=e.text,t.info=e.info,t.content=e.content,this.pushItem(t)},addMsgText(e){let t=this.parseData(Ne.TEXT,new Date().getTime()*1e3,getApp().globalData.uid);t.text=e,this.pushItem(t)},addMsgGiftAsk(e,t){let i=this.parseData(Ne.GIFT_ASK,new Date().getTime()*1e3,getApp().globalData.uid);i.text=h("msg.giftAskedOtherFor",{whom:he(e)}),i.gift=t,this.pushItem(i)},addMsgFollow(e){let t=this.parseData(Ne.FOLLOW,new Date().getTime()*1e3,getApp().globalData.uid);t.gift=e,this.pushItem(t)},addMsgAutomatic(e){let t=this.parseData(Ne.AUTOMATIC,new Date().getTime()*1e3,getApp().globalData.uid);t.text=JSON.stringify(e),this.pushItem(t)},clickFollowGift(e,t,i){e&&e.stopPropagation(),bi(1,i,this.uid,this.roomId,we.CALL,()=>{this.list.splice(t,1),this.$nextTick(()=>{i.number=1,this.$emit("onSendAskGift",i,2)})})},showNoCoins(e,t,i){let o=this.$refs.noCoins;o&&o.show(e,t,i)},hideNoCoins(){let e=this.$refs.noCoins;e&&e.hide()}},created(){uni.onKeyboardHeightChange(this.onKeyboardChange)},beforeUnmount(){uni.offKeyboardHeightChange(this.onKeyboardChange)}};function Cf(e,t,i,o,n,r){let a=(0,s.resolveComponent)("call-msg-content"),c=(0,s.resolveComponent)("call-msg-tip"),u=y((0,s.resolveDynamicComponent)("l-img"),v),p=y((0,s.resolveDynamicComponent)("coin"),Ce),d=(0,s.resolveComponent)("call-msg-text"),_=(0,s.resolveComponent)("call-msg-automatic"),w=(0,s.resolveComponent)("call-recharge-item"),D=(0,s.resolveComponent)("send-ask-gift-pop"),b=(0,s.resolveComponent)("call-gift-ask-pop");return(0,s.openBlock)(),(0,s.createElementBlock)("view",{onClick:t[2]||(t[2]=(...F)=>r.clickMsgList&&r.clickMsgList(...F)),style:(0,s.normalizeStyle)({maxHeight:i.height,height:i.height}),renderWhole:!0},[(0,s.createElementVNode)("list",{onClick:t[0]||(t[0]=(...F)=>r.clickMsgList&&r.clickMsgList(...F)),ref:"msgList",showScrollbar:!1,class:"list-msg",style:(0,s.normalizeStyle)([r.showStyle])},[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(n.list,(F,T)=>((0,s.openBlock)(),(0,s.createElementBlock)("cell",{key:`k${F.mtime}`,ref_for:!0,ref:`cell${F.mtime}`},[F.type==n.CALL_MSG.TEXT?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,"is-send":F.isSend,content:F.text,mtime:F.mtime,user:i.user,"send-uid":F.send_uid,onOnTranslateFinish:r.onTranslateFinish},null,8,["is-send","content","mtime","user","send-uid","onOnTranslateFinish"])):F.type==n.CALL_MSG.SYS?((0,s.openBlock)(),(0,s.createBlock)(c,{key:1,content:F,user:i.user,"is-send":F.isSend,"send-uid":F.send_uid,mtime:F.mtime,onOnTranslateFinish:r.onTranslateFinish},null,8,["content","user","is-send","send-uid","mtime","onOnTranslateFinish"])):F.type==n.CALL_MSG.GIFT_ASK_ACTION?((0,s.openBlock)(),(0,s.createBlock)(d,{key:2},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"view-gift"},[(0,s.createElementVNode)("view",{class:"center",style:{"margin-top":"8rpx"}},[(0,s.createElementVNode)("u-text",{class:"text-tip text-gift-ask"},(0,s.toDisplayString)(r.$str("msg.giftAskText")),1),(0,s.createVNode)(u,{src:F.gift.icon,w:"80rpx",h:"80rpx"},null,8,["src"])]),(0,s.createElementVNode)("view",{class:"view-line"}),(0,s.createElementVNode)("view",{class:"level-end"},[(0,s.createVNode)(p,{coin:F.gift.price,fw:500,color:"#FF953F"},null,8,["coin"]),(0,s.createElementVNode)("u-text",{onClick:G=>r.clickGiftSend(G,F.gift,T),class:"btn-send"},(0,s.toDisplayString)(r.$str("send")),9,["onClick"])])])]),_:2},1024)):F.type==n.CALL_MSG.GIFT_ASK?((0,s.openBlock)(),(0,s.createBlock)(d,{key:3},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"view-gift"},[(0,s.createElementVNode)("view",{class:"center",style:{"margin-top":"6rpx"}},[(0,s.createElementVNode)("view",{style:{flex:"1"}},[(0,s.createElementVNode)("u-text",{class:"text-tip",style:{"text-align":"right"}},(0,s.toDisplayString)(F.text),1),(0,s.createElementVNode)("view",{class:"level-end",style:{"margin-top":"10rpx"}},[(0,s.createElementVNode)("u-text",{class:"text-gift-name",style:{"margin-right":"8rpx"}}),(0,s.createVNode)(p,{coin:F.gift.price,fw:500,color:"#FF953F"},null,8,["coin"])])]),(0,s.createVNode)(u,{src:F.gift.icon,w:"80rpx",h:"80rpx",style:{"margin-left":"20rpx"}},null,8,["src"])]),(0,s.createElementVNode)("view",{class:"view-line"}),(0,s.createElementVNode)("u-text",{class:"text-tip",style:{"margin-top":"12rpx","margin-bottom":"12rpx"}},(0,s.toDisplayString)(r.$str("msg.giftAskText")),1)])]),_:2},1024)):F.type==n.CALL_MSG.FOLLOW?((0,s.openBlock)(),(0,s.createBlock)(d,{key:4},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"view-gift"},[(0,s.createElementVNode)("u-text",{class:"text-tip",style:{"margin-top":"8rpx"}},(0,s.toDisplayString)(r.$str("call.followSendGiftTip")),1),(0,s.createElementVNode)("view",{class:"view-line",style:{"margin-top":"4rpx"}}),(0,s.createElementVNode)("view",{class:"level-end",style:{"margin-top":"8rpx","margin-bottom":"4rpx"}},[(0,s.createVNode)(u,{src:F.gift.icon,w:"60rpx",h:"60rpx"},null,8,["src"]),(0,s.createElementVNode)("view",{style:{"margin-left":"8rpx","margin-right":"8rpx"}},[(0,s.createElementVNode)("u-text",{class:"text-tip",style:{"font-weight":"500"}},(0,s.toDisplayString)(F.gift.title),1),(0,s.createVNode)(p,{coin:F.gift.price,color:"#FF953F"},null,8,["coin"])]),(0,s.createElementVNode)("u-text",{onClick:G=>r.clickFollowGift(G,T,F.gift),class:"btn-send"},(0,s.toDisplayString)(r.$str("send")),9,["onClick"])])])]),_:2},1024)):F.type==n.CALL_MSG.AUTOMATIC?((0,s.openBlock)(),(0,s.createBlock)(_,{key:5,content:F.text,user:i.user,onOnTranslateFinish:r.onTranslateFinish,style:{"margin-bottom":"20rpx"}},null,8,["content","user","onOnTranslateFinish"])):(0,s.createCommentVNode)("",!0)]))),128))],4),(0,s.createVNode)(w,{ref:"noCoins",onClick:r.clickRechargeItem,style:{"margin-top":"20rpx"}},null,8,["onClick"]),(0,s.createVNode)(D,{ref:"sendAskGiftPop",onOnSendGift:t[1]||(t[1]=F=>r.onSendGift(1))},null,512),(0,s.createVNode)(b,{ref:"popGiftAsk",onOnClickSend:r.clickGiftAskSend,onOnClickIgnore:r.clickGiftAskIgnore},null,8,["onOnClickSend","onOnClickIgnore"])],4)}var Af=S(xf,[["render",Cf],["styles",[wf]]]),Tf={"view-logo":{"":{position:"absolute",flexDirection:"row",justifyContent:"center"}},center:{"":{alignItems:"center",justifyContent:"center"}},text:{"":{fontSize:"32rpx",color:"#FFFFFF",fontWeight:"600"}},"view-btn":{"":{position:"absolute"}},"text-btn":{".view-btn ":{width:"600rpx",height:"96rpx",lineHeight:"96rpx",color:"#FFFFFF",textAlign:"center",borderRadius:"16rpx"}},"text-btn-act":{".view-btn ":{backgroundImage:"linear-gradient(to right, #FF00BD, #FF5954)",marginBottom:"8rpx"}}},Sf={components:{LImg:v,AvatarImg:It},emits:["onMatchLoadingListener"],props:{user:{type:Object,default(){return{}}},fromType:{type:Number,default:0}},data(){return{appNameSrc:xo(),statusBarH:getApp().globalData.window.statusBarHeight,imgT:176*getApp().globalData.window.scaleH,wW:getApp().globalData.window.width,wH:getApp().globalData.window.height,myUser:getApp().pubUser,textT:80*getApp().globalData.window.scaleH,btnBottom:(90+getApp().globalData.window.safeBottom)*getApp().globalData.window.scaleH,isNetworkUnstable:!1,connectTimer:!1,connectInt:0,hideMatch:getApp().globalData.hideMatchEnter}},computed:{tipStr(){return this.fromType==2?h("network.unstableOtherParty"):this.isNetworkUnstable?h("network.unstableHe",{whose:un(this.user.sex)}):h("connecting")},callAgainStr(){return h("call.himAgain",{whom:he(this.user.sex)})},cancelStr(){return this.fromType==0?h("cancel"):h("cancel")}},methods:{$str:h,clickCall(){this.$emit("onMatchLoadingListener",4,this.fromType)},clickHangUp(){this.$emit("onMatchLoadingListener",5,this.fromType)},clickMatchCancel(){this.$emit("onMatchLoadingListener",2,this.fromType)},clickRematch(){this.$emit("onMatchLoadingListener",1,this.fromType)},startAnim(){let e=this.$refs.like;typeof e=="undefined"||typeof e.step=="undefined"||(e.step({opacity:0,scale:1.25},{duration:2e3}),e.step({opacity:1,scale:1},{duration:1}),e.run(()=>{this.startAnim()}))},clearTimer(){this.connectTimer&&(this.connectTimer=!1,clearInterval(this.connectTimer))},initTimer(){this.clearTimer(),this.connectTimer=setInterval(()=>{this.connectTimer&&(this.connectInt++,this.connectInt>10&&!this.isNetworkUnstable?(this.isNetworkUnstable=!0,this.$emit("onMatchLoadingListener",100,this.fromType)):this.connectInt>40&&(this.clearTimer(),this.$emit("onMatchLoadingListener",3,this.fromType)))},1e3)}},created(){setTimeout(()=>{this.startAnim()},500),this.fromType!=2&&this.initTimer()},beforeUnmount(){this.clearTimer()}};function vf(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("avatar-img"),It),u=y((0,s.resolveDynamicComponent)("uni-transition"),st);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"center",style:(0,s.normalizeStyle)([{width:`${n.wW}px`,height:`${n.wH}px`},{"flex-direction":"column"}]),renderWhole:!0},[(0,s.createVNode)(a,{src:"s/match/bg_connect.png",w:`${n.wW}px`,h:`${n.wW*.4}px`,style:{position:"absolute",left:"0",top:"0"}},null,8,["w","h"]),(0,s.createElementVNode)("view",{class:"view-logo",style:(0,s.normalizeStyle)({width:`${n.wW}px`,top:`${n.statusBarH+12}px`})},[(0,s.createVNode)(a,{src:n.appNameSrc,w:"310rpx",h:"56rpx"},null,8,["src"])],4),i.fromType==0?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,src:"s/match/a_match.png",w:"540rpx",h:"80rpx",style:(0,s.normalizeStyle)([{top:`${n.imgT}px`},{position:"absolute"}])},null,8,["style"])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("view",{class:"center",style:{width:"750rpx","flex-direction":"row"}},[(0,s.createVNode)(c,{user:i.user,w:"200rpx",h:"200rpx",radius:"100rpx",border:"1px solid #FFFFFF","place-w":"168rpx",style:{left:"185rpx"}},null,8,["user"]),(0,s.createVNode)(c,{user:n.myUser,w:"200rpx",h:"200rpx",radius:"100rpx",border:"1px solid #FFFFFF","place-w":"168rpx",style:{right:"185rpx"}},null,8,["user"]),(0,s.createVNode)(a,{src:"s/match/heart_love.gif",w:"240rpx",h:"240rpx",style:{position:"absolute",bottom:"0"}}),(0,s.createVNode)(u,{ref:"like",show:!0,style:{position:"absolute",left:"0",top:"0"}},{default:(0,s.withCtx)(()=>[(0,s.createVNode)(a,{src:"s/match/like_bg2.png",w:"750rpx",h:"202rpx"})]),_:1},512)]),(0,s.createElementVNode)("u-text",{style:(0,s.normalizeStyle)({marginTop:`${n.textT}px`}),class:"text"},(0,s.toDisplayString)(r.tipStr),5),n.isNetworkUnstable?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,style:(0,s.normalizeStyle)({bottom:`${n.btnBottom}px`}),class:"view-btn"},[!n.hideMatch&&i.fromType==0?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,onClick:t[0]||(t[0]=(...p)=>r.clickRematch&&r.clickRematch(...p)),class:"text-btn text-btn-act"},(0,s.toDisplayString)(r.$str("rematch")),1)):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("u-text",{onClick:t[1]||(t[1]=(...p)=>r.clickMatchCancel&&r.clickMatchCancel(...p)),class:"text-btn"},(0,s.toDisplayString)(r.cancelStr),1)],4)):i.fromType==2?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:2,style:(0,s.normalizeStyle)({bottom:`${n.btnBottom}px`}),class:"view-btn"},[(0,s.createElementVNode)("u-text",{onClick:t[2]||(t[2]=(...p)=>r.clickCall&&r.clickCall(...p)),class:"text-btn text-btn-act"},(0,s.toDisplayString)(r.callAgainStr),1),(0,s.createElementVNode)("u-text",{onClick:t[3]||(t[3]=(...p)=>r.clickHangUp&&r.clickHangUp(...p)),class:"text-btn"},(0,s.toDisplayString)(r.$str("hangUp")),1)],4)):(0,s.createCommentVNode)("",!0)],4)}var kf=S(Sf,[["render",vf],["styles",[Tf]]]),Ff={"view-timer":{"":{height:"84rpx",flexDirection:"row",alignItems:"center"}},text:{".view-timer ":{textAlign:"right",fontSize:"28rpx",color:"#FFFFFF",marginRight:"20rpx"}},"line-ver":{".view-timer ":{width:"2rpx",height:"24rpx",backgroundColor:"rgba(255,255,255,0.5)",textShadow:"0 1px 0 rgba(0, 0, 0, 0.5)",marginRight:"4rpx"}},"text-def":{".view-timer ":{fontSize:"28rpx",color:"#FFFFFF"}}},Lf={emits:["clickHangUp","onTimerListener"],props:{roomType:{type:Number,default:1},freeMinDuration:{type:Number,default:0}},data(){return{timer:!1,timerInt:0,freeMinTimerInt:this.freeMinDuration,totalDuration:0}},computed:{getTimerStr(){let e=0;return this.freeMinTimerInt>0?e=this.freeMinTimerInt:e=this.timerInt,Ni(e)}},methods:{$str:h,clickHangUp(e){e.stopPropagation(),this.$emit("clickHangUp",e,1)},startTimer(){this.timer||(this.timer=setInterval(()=>{this.totalDuration+=1,this.freeMinTimerInt>0?this.freeMinTimerInt-=1:this.timerInt+=1,this.$emit("onTimerListener",{total:this.totalDuration,duration:this.timerInt})},1e3))},getTimerDuration(){return this.timerInt>0?[1,this.timerInt]:this.freeMinTimerInt>0?[2,this.freeMinTimerInt%60]:[1,0]}},beforeUnmount(){this.timer&&clearInterval(this.timer)}};function If(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"view-timer",renderWhole:!0},[(0,s.createElementVNode)("u-text",{class:"text"},(0,s.toDisplayString)(r.getTimerStr),1),(0,s.createElementVNode)("view",{class:"line-ver"}),(0,s.createVNode)(a,{onClick:r.clickHangUp,src:"s/call/hang_up_w.png",w:"80rpx",h:"56rpx",style:{"margin-right":"4rpx"}},null,8,["onClick"])])}var Df=S(Lf,[["render",If],["styles",[Ff]]]),Mf={abs:{"":{position:"absolute"}},pos:{"":{position:"absolute",top:0,left:0}},"bg-avatar":{"":{backgroundColor:"rgba(0,0,0,0.5)"}}},Ef={components:{LImg:v,AvatarImg:It,RtcSurfaceView:$r},props:{callType:{type:Number,default:1},fRemoteUid:{type:[String,Number],default:0},fLocalUid:{type:[String,Number],default:10},userInfo:{type:Object,default(){return{}}}},data(){return{sW:getApp().globalData.window.width,sH:getApp().globalData.window.height,remoteW:0,remoteH:0,remoteUid:0,localUid:10,muteRemoteVideoAvatar:"",muteLocalVideoAvatar:""}},watch:{fRemoteUid:{handler(e,t){this.remoteUid=e},immediate:!0},fLocalUid:{handler(e,t){this.localUid=e},immediate:!0}},computed:{remoteWHStyle(){return{width:`${this.remoteW}px`,height:`${this.remoteH}px`}},blurBgSrc(){return O.isAndroid?Pi("s/pub/blur_bg_1.png"):"1"},blurViewType(){return O.isAndroid?1:2}},methods:{setSurfaceChange(){if(this.callType==1)if(this.localUid==0){this.localUid=this.remoteUid,this.remoteUid=0;let e=this.muteLocalVideoAvatar,t=this.muteRemoteVideoAvatar;this.muteLocalVideoAvatar=t,this.muteRemoteVideoAvatar=e}else{this.remoteUid=this.localUid,this.localUid=0;let e=this.muteRemoteVideoAvatar,t=this.muteLocalVideoAvatar;this.muteLocalVideoAvatar=e,this.muteRemoteVideoAvatar=t}},setMuteVideoAvatar(e,t){e?this.localUid==0?this.muteLocalVideoAvatar=t?this.blurBgSrc:"":this.muteRemoteVideoAvatar=t?this.blurBgSrc:"":this.localUid==0?this.muteRemoteVideoAvatar=t?this.blurBgSrc:"":this.muteLocalVideoAvatar=t?this.blurBgSrc:""},setWH(){this.remoteW=this.sW,this.remoteH=this.sH}},created(){this.setWH()}};function Of(e,t,i,o,n,r){let a=(0,s.resolveComponent)("rtc-surface-view"),c=y((0,s.resolveDynamicComponent)("avatar-img"),It);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"abs",style:(0,s.normalizeStyle)([r.remoteWHStyle,{top:"0"}]),renderWhole:!0},[i.callType==1?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"pos",style:(0,s.normalizeStyle)([r.remoteWHStyle])},[(0,s.createVNode)(a,{class:"pos",style:(0,s.normalizeStyle)([r.remoteWHStyle]),uid:n.remoteUid},null,8,["style","uid"]),n.muteRemoteVideoAvatar&&r.blurViewType==1?((0,s.openBlock)(),(0,s.createElementBlock)("u-image",{key:0,src:n.muteRemoteVideoAvatar,mode:"aspectFill",style:(0,s.normalizeStyle)([r.remoteWHStyle,{position:"absolute",left:"0",right:"0"}])},null,12,["src"])):n.muteRemoteVideoAvatar&&r.blurViewType==2?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,class:"pos",style:(0,s.normalizeStyle)(r.remoteWHStyle),blurEffect:"light"},null,4)):(0,s.createCommentVNode)("",!0)],4)):((0,s.openBlock)(),(0,s.createBlock)(c,{key:1,user:i.userInfo,w:`${n.remoteW}px`,h:`${n.remoteH}px`,"place-type":0,class:"pos",setKey:"avatar"},null,8,["user","w","h"]))],4)}var Rf=S(Ef,[["render",Of],["styles",[Mf]]]),Nf={abs:{"":{position:"absolute"}},pos:{"":{position:"absolute",top:0,left:0}},"bg-avatar":{"":{backgroundColor:"rgba(0,0,0,0.5)"}}},Bf={components:{LImg:v,AvatarImg:It,RtcSurfaceView:$r},emits:["clickCameraSwitch","onSurfaceChange","onSurfaceMoveTipListener"],props:{callType:{type:Number,default:1},fRemoteUid:{type:[String,Number],default:0},fLocalUid:{type:[String,Number],default:10},userInfo:{type:Object,default(){return{}}}},data(){return{sW:getApp().globalData.window.width,sH:getApp().globalData.window.height,localW:uni.upx2px(200),localH:uni.upx2px(300),localX:0,localY:0,remoteUid:0,localUid:10,muteRemoteVideoAvatar:"",muteLocalVideoAvatar:"",zOrderTop:!O.isAndroid,showSurface:!1,viewMoving:!1,viewMovingTimer:!1,viewMoveDisabled:!0,showMoveTip:!1}},watch:{fRemoteUid:{handler(e,t){this.remoteUid=e},immediate:!0},fLocalUid:{handler(e,t){this.localUid=e},immediate:!0}},computed:{localWHStyle(){return{width:`${this.localW}px`,height:`${this.localH}px`}},blurBgSrc(){return O.isAndroid?Pi("s/pub/blur_bg_1.png"):"1"},blurViewType(){return O.isAndroid?1:2}},methods:{onChange(e){this.showMoveTip&&(this.showMoveTip=!1,this.$emit("onSurfaceMoveTipListener",this.showMoveTip)),O.isAndroid&&(this.viewMoving||(this.viewMoving=!0))},onTouchStart(e){e&&e.stopPropagation(),this.viewMoveDisabled=!0},onTouchMove(e){e&&e.stopPropagation(),this.viewMoveDisabled=!1},onTouchEnd(e){e&&e.stopPropagation(),this.viewMoveDisabled=!0,O.isAndroid&&(this.viewMovingTimer&&clearTimeout(this.viewMovingTimer),this.viewMovingTimer=setTimeout(()=>{this.viewMoving=!1},800))},clickCamera(e){e&&e.stopPropagation(),this.$emit("clickCameraSwitch")},clickChangeSurface(e){if(this.callType==1&&!(O.isAndroid&&this.viewMoving)){if(e&&e.stopPropagation(),this.refreshZOrderTop(),this.localUid==0){this.localUid=this.remoteUid,this.remoteUid=0;let t=this.muteLocalVideoAvatar,i=this.muteRemoteVideoAvatar;this.muteLocalVideoAvatar=i,this.muteRemoteVideoAvatar=t}else{this.remoteUid=this.localUid,this.localUid=0;let t=this.muteRemoteVideoAvatar,i=this.muteLocalVideoAvatar;this.muteLocalVideoAvatar=t,this.muteRemoteVideoAvatar=i}this.$emit("onSurfaceChange")}},setMuteVideoAvatar(e,t){this.refreshZOrderTop(),e?this.localUid==0?this.muteLocalVideoAvatar=t?this.blurBgSrc:"":this.muteRemoteVideoAvatar=t?this.blurBgSrc:"":this.localUid==0?this.muteRemoteVideoAvatar=t?this.blurBgSrc:"":this.muteLocalVideoAvatar=t?this.blurBgSrc:""},refreshZOrderTop(){O.isAndroid&&(this.zOrderTop=!0,setTimeout(()=>{this.zOrderTop=!1},300))}},created(){this.callType==pe.VIDEO&&(this.localX=this.sW-this.localW-uni.upx2px(20),this.localY=this.sH-getApp().globalData.window.safeBottom-2-this.localH-uni.upx2px(100+74*2),setTimeout(()=>{this.showSurface=!0,this.showMoveTip=!R("video_chat_surface_move_tip"),this.showMoveTip&&this.$emit("onSurfaceMoveTipListener",this.showMoveTip)},O.isAndroid?500:300))}};function Pf(e,t,i,o,n,r){let a=(0,s.resolveComponent)("rtc-surface-view"),c=y((0,s.resolveDynamicComponent)("l-img"),v),u=(0,s.resolveComponent)("movable-view");return i.callType==1?((0,s.openBlock)(),(0,s.createBlock)(u,{key:0,onClick:r.clickChangeSurface,onTouchend:r.onTouchEnd,onChange:r.onChange,onTouchstart:r.onTouchStart,onTouchmove:r.onTouchMove,disabled:n.viewMoveDisabled,direction:"all",x:n.localX,y:n.localY,"out-of-bounds":!1,style:(0,s.normalizeStyle)([[r.localWHStyle],{"align-items":"center"}]),"render-whole":!0},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)(r.localWHStyle),class:"pos"},null,4),i.callType==1&&n.showSurface?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,class:"pos",style:(0,s.normalizeStyle)([r.localWHStyle]),uid:n.localUid,"z-order-media-overlay":n.zOrderTop,"z-order-on-top":n.zOrderTop},null,8,["style","uid","z-order-media-overlay","z-order-on-top"])):(0,s.createCommentVNode)("",!0),n.muteLocalVideoAvatar&&r.blurViewType==1?((0,s.openBlock)(),(0,s.createElementBlock)("u-image",{key:1,src:n.muteLocalVideoAvatar,mode:"aspectFill",style:(0,s.normalizeStyle)([r.localWHStyle,{position:"absolute",left:"0",right:"0"}])},null,12,["src"])):n.muteLocalVideoAvatar&&r.blurViewType==2?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:2,class:"pos",style:(0,s.normalizeStyle)(r.localWHStyle),blurEffect:"light"},null,4)):(0,s.createCommentVNode)("",!0),i.callType==1&&n.showSurface?((0,s.openBlock)(),(0,s.createBlock)(c,{key:3,onClick:r.clickCamera,src:"s/call/camera_switch_2.png",w:"48rpx",h:"48rpx",style:{position:"absolute",bottom:"8rpx"}},null,8,["onClick"])):(0,s.createCommentVNode)("",!0)]),_:1},8,["onClick","onTouchend","onChange","onTouchstart","onTouchmove","disabled","x","y","style"])):(0,s.createCommentVNode)("",!0)}var Hf=S(Bf,[["render",Pf],["styles",[Nf]]]),Uf={"view-action":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"view-btn":{"":{width:"200rpx",marginTop:"8rpx",paddingTop:"10rpx",alignItems:"center"}},bg:{".view-btn ":{width:"200rpx",height:"56rpx",backgroundColor:"rgba(39,11,25,0.6)",borderRadius:"20rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(255,255,255,0.3)"}},content:{".view-btn ":{width:"184rpx",position:"absolute",top:0}},text:{".view-btn ":{position:"absolute",top:0,lineHeight:"50rpx",textAlign:"center",width:"184rpx",fontSize:"24rpx",fontWeight:"500",color:"#FFFFFF"}},"view-ask":{"":{backgroundImage:"linear-gradient(to bottom right, #FF00BD, #FF5954)",borderRadius:"24rpx",width:"48rpx",height:"48rpx",alignItems:"center",justifyContent:"center"}}},Gf={components:{CallIncome:qa},emits:["clickCallOpen","clickGift","clickGiftAsk"],props:{user:{type:Object,default(){return{}}},roomId:{type:[String,Number],default:0},income:{type:Object,default(){return{total:99}}}},data(){return{isAuth:j()}},computed:{betForStr(){return h("betFor",{whom:he(this.user.sex)})}},methods:{$str:h,clickCallOpen(e){e.stopPropagation(),this.$emit("clickCallOpen")},clickGift(e){e.stopPropagation(),this.$emit("clickGift")},clickGiftAsk(e){e.stopPropagation(),this.$emit("clickGiftAsk")},clickBetHer(e){e.stopPropagation(),X("/pagesGame/bet-for-her",{},"betForHerData",{user:this.user,roomId:this.roomId})}}};function Wf(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=(0,s.resolveComponent)("call-income");return(0,s.openBlock)(),(0,s.createElementBlock)("view",{style:{width:"200rpx"},renderWhole:!0},[n.isAuth?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0},[(0,s.createElementVNode)("view",{class:"view-action"},[(0,s.createVNode)(a,{onClick:r.clickCallOpen,src:"s/game/call-open.png",w:"48rpx",h:"48rpx"},null,8,["onClick"]),(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(...u)=>r.clickGiftAsk&&r.clickGiftAsk(...u)),class:"view-ask"},[(0,s.createVNode)(a,{onClick:r.clickGiftAsk,src:"s/call/ask-gift-white.png",w:"26rpx",h:"20rpx"},null,8,["onClick"])])]),(0,s.createElementVNode)("view",{style:{"margin-top":"20rpx",width:"200rpx",height:"48rpx"}},[(0,s.createVNode)(c,{type:1,show:!0})])])):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1},[(0,s.createElementVNode)("view",{class:"view-action"},[(0,s.createVNode)(a,{onClick:r.clickCallOpen,src:"s/game/call-open.png",w:"48rpx",h:"48rpx"},null,8,["onClick"]),(0,s.createVNode)(a,{onClick:r.clickGift,src:"s/call/i_gift.png",w:"80rpx",h:"80rpx"},null,8,["onClick"])]),(0,s.createElementVNode)("view",{onClick:t[1]||(t[1]=(...u)=>r.clickBetHer&&r.clickBetHer(...u)),class:"view-btn"},[(0,s.createElementVNode)("view",{class:"bg"}),(0,s.createElementVNode)("view",{class:"content"},[(0,s.createVNode)(a,{onClick:r.clickBetHer,src:"s/game/btn-bg-bet-her.png",w:"184rpx",h:"60rpx"},null,8,["onClick"]),(0,s.createElementVNode)("u-text",{class:"text"},(0,s.toDisplayString)(r.betForStr),1)])])]))])}var Vf=S(Gf,[["render",Wf],["styles",[Uf]]]),jf={"view-gift":{"":{height:"120rpx",width:"440rpx",flexDirection:"row",alignItems:"center"}},"view-content":{"":{width:"340rpx",height:"80rpx",backgroundColor:"rgba(37,38,88,0.9)",borderRadius:"16rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#98E0FF",alignItems:"center",flexDirection:"row",marginTop:"30rpx"}},avatar:{".view-content ":{marginLeft:"8rpx",marginRight:"16rpx"}},"text-send":{".view-content ":{fontSize:"20rpx",fontWeight:"500",color:"#FFFFFF"}},"text-nickname":{".view-content ":{fontSize:"28rpx",fontWeight:"600",color:"#FFFFFF",width:"120rpx",textOverflow:"ellipsis",lines:1}},"text-count":{"":{fontSize:"44rpx",fontWeight:"600",color:"#5DC1EC",marginLeft:"12rpx",marginTop:"30rpx"}},"img-gift":{"":{position:"absolute",bottom:0,left:"220rpx"}}},zf={props:{gift:{type:Object,default(){return{}}},user:{type:Object,default(){return{}}},toUser:{type:Object,default(){return{}}}},data(){return{}},computed:{otherStr(){return this.toUser.uid==getApp().globalData.uid?h("you"):this.toUser.nickname}},methods:{$str:h}};function $f(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"view-gift",renderWhole:!0},[(0,s.createElementVNode)("view",{class:"view-content"},[(0,s.createVNode)(a,{src:i.user.small_avatar,w:"64rpx",h:"64rpx",radius:"32rpx",class:"avatar"},null,8,["src"]),(0,s.createElementVNode)("view",null,[(0,s.createElementVNode)("u-text",{class:"text-send"},(0,s.toDisplayString)(r.$str("sendTo")),1),(0,s.createElementVNode)("u-text",{class:"text-nickname"},(0,s.toDisplayString)(r.otherStr),1)])]),(0,s.createElementVNode)("u-text",{class:"text-count"},"x"+(0,s.toDisplayString)(i.gift.number),1),(0,s.createVNode)(a,{src:i.gift.icon,w:"120rpx",h:"120rpx",class:"img-gift"},null,8,["src"])])}var Kf=S(zf,[["render",$f],["styles",[jf]]]),Yf={},qf={components:{GameGiftItem:Kf},props:{},data(){return{list:[{show:!1,gift:{},user:{},toUser:{}},{show:!1,gift:{},user:{},toUser:{}},{show:!1,gift:{},user:{},toUser:{}}],saveList:[]}},methods:{change(e,t){if(e.detail)this.hide(t);else{let i=this.saveList[0];i&&(this.show(t,i),this.saveList.splice(0,1))}},hide(e){setTimeout(()=>{this.list[e].show=!1,this.list[e].gift={},this.list[e].user={},this.list[e].toUser={}},3e3)},show(e,t){this.list[e].gift=t.gift_info,this.list[e].user=t.user_info,this.list[e].toUser=t.to_user_info,this.list[e].show=!0},showGiftFun(e){for(let t=0,i=this.list.length;t<i;t++)if(!this.list[t].show){this.show(t,e);return}this.saveList.push(e)}},created(){uni.$on("event_game_gift",this.showGiftFun)},unmounted(){uni.$off("event_game_gift",this.showGiftFun)}};function Jf(e,t,i,o,n,r){let a=(0,s.resolveComponent)("game-gift-item"),c=y((0,s.resolveDynamicComponent)("uni-transition"),st);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{renderWhole:!0},[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(n.list,(u,p)=>((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:p,class:"view-t"},[(0,s.createVNode)(c,{show:u.show,"mode-class":["slide-left","fade"],duration:500,onChange:d=>r.change(d,p)},{default:(0,s.withCtx)(()=>[(0,s.createVNode)(a,{gift:u.gift,user:u.user,"to-user":u.toUser},null,8,["gift","user","to-user"])]),_:2},1032,["show","onChange"])]))),128))])}var Xa=S(qf,[["render",Jf],["styles",[Yf]]]),Zf={"center-end":{"":{flexDirection:"row",alignItems:"center",justifyContent:"flex-end"}},center:{"":{flexDirection:"row",alignItems:"center"}},"gift-item":{"":{backgroundColor:"rgba(88,37,70,0.9)",borderRadius:"16rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(255,152,210,0.5)",paddingTop:"14rpx",paddingRight:"20rpx",paddingBottom:"14rpx",paddingLeft:"20rpx"}},"send-text":{".gift-item ":{fontSize:"24rpx",color:"#FFFFFF",lineHeight:"30rpx",lines:1,textOverflow:"ellipsis",overflow:"hidden"}},"price-text":{".gift-item ":{fontSize:"20rpx",fontWeight:"600",color:"#FFAA0D",lineHeight:"28rpx",marginRight:"4rpx"}},"gift-name":{".gift-item ":{marginLeft:"8rpx",fontSize:"24rpx",fontWeight:"600",color:"#FFFFFF",lineHeight:"30rpx"}},line:{".gift-item ":{marginTop:"8rpx",height:2,opacity:.1,backgroundColor:"#FFFFFF",transform:"scaleY(0.5)",transformOrigin:"50% 100%"}},"thanks-tip":{".gift-item ":{fontSize:"16rpx",color:"#FF4477",lineHeight:"20rpx",marginTop:"8rpx",marginBottom:"-8rpx"}}},Xf={components:{LImg:v},props:{data:{type:Object,default(){return{}}}},data(){return{totalCoins:0,thanksTip:"",leftName:"",sendStr:"",rightName:""}},methods:{$str:h,clickName(e){let t=e==1?this.data.userInfo:this.data.toUserInfo;ie("/pages/main/user-home",{uid:t.uid})},parse(){let e=getApp().globalData.uid,t=this.data.userInfo,i=this.data.toUserInfo;if(this.totalCoins=this.data.giftInfo.number*this.data.giftInfo.price,t.uid!=e&&i.uid!=e){this.leftName=t.nickname,this.sendStr=h("sendsLower"),this.rightName=i.nickname;return}t.uid==e&&i.uid!=e?(this.leftName=h("you"),this.sendStr=h("sendLower"),this.rightName=i.nickname):t.uid!=e&&i.uid==e&&(this.leftName=t.nickname,this.sendStr=h("sendsLower"),this.rightName=h("youLower"),this.thanksTip=this.$str("msg.giftThanksTip",{whom:he(this.data.userInfo.sex)}))}},created(){this.parse()}};function Qf(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"center",renderWhole:!0},[(0,s.createElementVNode)("view",{class:"gift-item"},[(0,s.createElementVNode)("view",{class:"center"},[(0,s.createElementVNode)("view",{style:{"margin-right":"8rpx"}},[(0,s.createElementVNode)("view",{class:"center"},[(0,s.createElementVNode)("u-text",{onClick:t[0]||(t[0]=c=>r.clickName(1)),class:"send-text",style:{"text-align":"right","max-width":"100rpx"}},(0,s.toDisplayString)(n.leftName),1),(0,s.createElementVNode)("u-text",{class:"send-text"},(0,s.toDisplayString)(n.sendStr),1),(0,s.createElementVNode)("u-text",{onClick:t[1]||(t[1]=c=>r.clickName(2)),class:"send-text",style:{"max-width":"100rpx"}},(0,s.toDisplayString)(n.rightName),1),(0,s.createElementVNode)("u-text",{class:"send-text",style:{color:"#FF4477"}},(0,s.toDisplayString)(i.data.giftInfo.number),1)]),(0,s.createElementVNode)("view",{class:"center-end",style:{"margin-top":"12rpx"}},[(0,s.createElementVNode)("u-text",{class:"price-text"},(0,s.toDisplayString)(n.totalCoins),1),(0,s.createVNode)(a,{src:"s/my/i_coins.png",w:"20rpx",h:"20rpx"}),(0,s.createElementVNode)("u-text",{class:"gift-name"},(0,s.toDisplayString)(i.data.giftInfo.title),1)])]),(0,s.createVNode)(a,{src:i.data.giftInfo.icon,w:"68rpx",h:"68rpx"},null,8,["src"])]),n.thanksTip?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"line"})):(0,s.createCommentVNode)("",!0),n.thanksTip?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:1,class:"thanks-tip"},(0,s.toDisplayString)(n.thanksTip),1)):(0,s.createCommentVNode)("",!0)])])}var eg=S(Xf,[["render",Qf],["styles",[Zf]]]),tg={"game-msg-text":{"":{alignItems:"center",flexDirection:"row",justifyContent:"flex-start",borderRadius:"8rpx"}}},ig={props:{},data(){return{}}};function ng(e,t,i,o,n,r){return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"game-msg-text",renderWhole:!0},[(0,s.renderSlot)(e.$slots,"default",{style:"flex: 1;"})])}var Qa=S(ig,[["render",ng],["styles",[tg]]]),rg={"view-content":{"":{backgroundColor:"rgba(0,0,0,0.2)",paddingTop:"6rpx",paddingRight:"24rpx",paddingBottom:"6rpx",paddingLeft:"16rpx",borderRadius:"8rpx",position:"relative"}},"view-text-line":{".view-content ":{height:"2rpx",backgroundColor:"rgba(255,255,255,0.12)",transform:"scaleY(0.5)",transformOrigin:"50% 100%",marginTop:"6rpx",marginRight:0,marginBottom:"12rpx",marginLeft:0}},text:{".view-content ":{color:"#FFFFFF",fontSize:"24rpx",lineHeight:"34rpx"}},"view-tran-end":{".view-content ":{flexDirection:"row",justifyContent:"flex-end",alignItems:"center",marginBottom:"4rpx"}},"text-tran":{".view-content .view-tran-end ":{fontSize:"18rpx",color:"#999999"}}},sg={components:{TranslateIcon:Mt,GameMsgText:Qa},props:{content:{type:String,default:""},mtime:{type:[String,Number],default:0}},data(){return{TRANSLATE_FROM:li,tranContent:"",contentW:getApp().globalData.window.width-uni.upx2px(48)}},methods:{onTranslateFinish(e,t){this.tranContent=e.text}}};function og(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("translate-icon"),Mt),u=(0,s.resolveComponent)("game-msg-text");return(0,s.openBlock)(),(0,s.createBlock)(u,null,{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)([{"max-width":`${n.contentW}px`},{"padding-right":"26rpx"}])},[(0,s.createElementVNode)("view",{class:"view-content"},[(0,s.createElementVNode)("u-text",{class:"text",style:(0,s.normalizeStyle)({"max-width":`${n.contentW}px`})},(0,s.toDisplayString)(i.content),5),n.tranContent?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0},[(0,s.createElementVNode)("view",{class:"view-text-line"}),(0,s.createElementVNode)("u-text",{class:"text",style:(0,s.normalizeStyle)({"max-width":`${n.contentW}px`})},(0,s.toDisplayString)(n.tranContent),5),(0,s.createElementVNode)("view",{class:"view-tran-end"},[(0,s.createVNode)(a,{src:"s/pub/tran_end_grey.png",w:"24rpx",h:"24rpx"}),(0,s.createElementVNode)("u-text",{class:"text-tran"},"Translation")])])):(0,s.createCommentVNode)("",!0)]),(0,s.createVNode)(c,{onOnTranslateFinish:r.onTranslateFinish,border:!0,showTran:!1,"api-params":{from_type:n.TRANSLATE_FROM.GAME_MSG,key:i.mtime},showTranContent:!1,text:i.content,style:{position:"absolute",bottom:"0",right:"0"}},null,8,["onOnTranslateFinish","api-params","text"])],4)]),_:1})}var ag=S(sg,[["render",og],["styles",[rg]]]),lg={center:{"":{flexDirection:"row",alignItems:"center"}},"ask-gift-item":{"":{backgroundColor:"rgba(88,37,70,0.9)",borderRadius:"16rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(255,152,210,0.5)",paddingTop:"6rpx",paddingRight:"20rpx",paddingBottom:"6rpx",paddingLeft:"20rpx"}},"ask-text":{".ask-gift-item ":{fontSize:"20rpx",fontWeight:"600",color:"#FFFFFF",lineHeight:"28rpx",marginRight:"6rpx",width:"228rpx"}},line:{".ask-gift-item ":{marginTop:"8rpx",height:2,opacity:.1,backgroundColor:"#FFFFFF",transform:"scaleY(0.5)",transformOrigin:"50% 100%"}},"center-end":{".ask-gift-item ":{flexDirection:"row",alignItems:"center",justifyContent:"flex-end"}},"send-btn":{".ask-gift-item ":{backgroundImage:"linear-gradient(to right, #FF00BD, #FF5954)",borderRadius:"4rpx",color:"#FFFFFF",fontSize:"16rpx",paddingTop:"8rpx",paddingRight:"8rpx",paddingBottom:"8rpx",paddingLeft:"8rpx",marginLeft:"12rpx"}}},cg={emits:["onClickSend"],components:{LImg:v},props:{data:{type:Object,default(){return{}}},index:{type:Number,default:0},user:{type:Object,default(){return{}}}},data(){return{sendStr:"",textW:getApp().globalData.window.width-37-uni.upx2px(404)}},methods:{$str:h,clickSend(){this.$emit("onClickSend")}},created(){this.data.isSend||(this.sendStr=fr(this.user.sex))}};function ug(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("coin"),Ce);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{style:{"flex-direction":"row"},renderWhole:!0},[(0,s.createElementVNode)("view",{class:"ask-gift-item"},[(0,s.createElementVNode)("view",{class:"center"},[(0,s.createElementVNode)("u-text",{class:"ask-text"},(0,s.toDisplayString)(r.$str("msg.giftAskText")),1),(0,s.createVNode)(a,{src:i.data.icon,w:"68rpx",h:"68rpx"},null,8,["src"])]),i.data.isSend?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"line"})),i.data.isSend?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,class:"center-end",style:{margin:"12rpx 0 6rpx 0"}},[(0,s.createVNode)(c,{coin:i.data.price,size:24,color:"#FFDC0D",fw:600},null,8,["coin"]),(0,s.createElementVNode)("u-text",{onClick:t[0]||(t[0]=(...u)=>r.clickSend&&r.clickSend(...u)),class:"send-btn"},(0,s.toDisplayString)(n.sendStr),1)]))])])}var pg=S(cg,[["render",ug],["styles",[lg]]]),hg={"view-content":{"":{backgroundColor:"rgba(0,0,0,0.2)",paddingTop:"6rpx",paddingRight:"24rpx",paddingBottom:"6rpx",paddingLeft:"16rpx",borderRadius:"8rpx",position:"relative"}},"view-text-line":{".view-content ":{height:"2rpx",backgroundColor:"rgba(255,255,255,0.12)",transform:"scaleY(0.5)",transformOrigin:"50% 100%",marginTop:"6rpx",marginRight:0,marginBottom:"12rpx",marginLeft:0}},text:{".view-content ":{color:"#FFFFFF",fontSize:"24rpx",lineHeight:"34rpx"}},"view-tran-end":{".view-content ":{flexDirection:"row",justifyContent:"flex-end",alignItems:"center",marginBottom:"4rpx"}},"text-tran":{".view-content .view-tran-end ":{fontSize:"18rpx",color:"#999999"}},"user-base-info":{".view-content ":{position:"absolute"}}},mg={emits:["onClickRich"],components:{TranslateIcon:Mt,RichContent:Pe,UBaseInfo:$t,GameMsgText:Qa},props:{data:{type:Object,default(){return{}}}},data(){return{TRANSLATE_FROM:li,contentW:getApp().globalData.window.width-uni.upx2px(48),richText:"",tranContent:""}},computed:{style(){return{border:`${this.data.font_type==2?"2rpx solid rgba(255, 250, 30, 0.5)":"none"}`,"max-width":`${this.contentW}px`,paddingRight:this.data.type==8?"26rpx":0}},textColor(){return this.data.font_type==2?"#FFFA1E":"rgba(255, 255, 255, 0.7)"}},methods:{$str:h,clickContent(){this.$emit("onClickRich")},onTranslateFinish(e,t){this.tranContent=e.text},parse(){this.richText={text:this.data.text,info:this.data.info},this.data.click&&(this.richText.click=[this.data.click])}},created(){this.parse()}};function dg(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("rich-content"),Pe),c=y((0,s.resolveDynamicComponent)("l-img"),v),u=y((0,s.resolveDynamicComponent)("translate-icon"),Mt),p=(0,s.resolveComponent)("game-msg-text");return(0,s.openBlock)(),(0,s.createBlock)(p,null,{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)([{"border-radius":"8rpx"},r.style])},[(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(...d)=>r.clickContent&&r.clickContent(...d)),class:"view-content"},[n.richText?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,data:n.richText,color:r.textColor,"font-size":"12px",style:{"background-color":"transparent","line-height":"36rpx","text-align":"left"}},null,8,["data","color"])):(0,s.createCommentVNode)("",!0),n.tranContent?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1},[(0,s.createElementVNode)("view",{class:"view-text-line"}),(0,s.createElementVNode)("u-text",{class:"text",style:(0,s.normalizeStyle)({"max-width":`${n.contentW}px`})},(0,s.toDisplayString)(n.tranContent),5),(0,s.createElementVNode)("view",{class:"view-tran-end"},[(0,s.createVNode)(c,{src:"s/pub/tran_end_grey.png",w:"24rpx",h:"24rpx"}),(0,s.createElementVNode)("u-text",{class:"text-tran"},(0,s.toDisplayString)(r.$str("translation")),1)])])):(0,s.createCommentVNode)("",!0)]),i.data.type==8?((0,s.openBlock)(),(0,s.createBlock)(u,{key:0,onOnTranslateFinish:r.onTranslateFinish,border:!0,showTran:!1,"api-params":{from_type:n.TRANSLATE_FROM.GAME_MSG,key:i.data.mtime},showTranContent:!1,text:i.data.input_content,style:{position:"absolute",bottom:"0",right:"0"}},null,8,["onOnTranslateFinish","api-params","text"])):(0,s.createCommentVNode)("",!0)],4)]),_:1})}var fg=S(mg,[["render",dg],["styles",[hg]]]),ge={ENTER_GAME:1,NORMAL_BET:2,BET_FOR_OTHER:3,WIN_HIGH_PRIZE:4,WIN_PRIZE:5,DRAWN_PRIZE:6,BORED_TIP:7,TEXT:8,ACCEPT_INVITE:9,GIFT_ASK:1e3,GIFT_ASK_USER:1001,GIFT:1002},gg={center:{"":{flexDirection:"row",alignItems:"center"}},"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},container:{"":{position:"relative"}},"msg-list":{".container ":{flex:1,transform:"rotate(180deg)",paddingTop:0,paddingRight:"24rpx",paddingBottom:0,paddingLeft:"24rpx"}},"msg-item":{".container ":{marginBottom:"12rpx"}},"input-wrap":{".container ":{marginTop:"8rpx",paddingTop:"16rpx",paddingRight:0,paddingBottom:"16rpx",paddingLeft:0,backgroundColor:"#340F41",borderRadius:"8rpx",marginLeft:"24rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"rgba(255,255,255,0.4)",position:"relative"}},input:{".container .input-wrap ":{flex:1,color:"#FFFFFF",fontSize:"24rpx",marginTop:0,marginRight:"74rpx",marginBottom:0,marginLeft:"66rpx"}},"right-send":{".container .input-wrap ":{paddingTop:"10rpx",paddingRight:"10rpx",paddingBottom:"10rpx",paddingLeft:"10rpx",position:"absolute",right:"10rpx",bottom:1}},"ask-gift":{".container ":{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx",backgroundColor:"#FFFFFF",borderRadius:"16rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#FF4477",marginLeft:"24rpx"}},"ask-text":{".container .ask-gift ":{fontSize:"24rpx",color:"#333333",lineHeight:"34rpx",marginTop:0,marginRight:"8rpx",marginBottom:0,marginLeft:"8rpx"}},"split-line":{".container .ask-gift ":{height:"2rpx",opacity:.07,backgroundColor:"#000000",transform:"scaleY(0.5)",transformOrigin:"50% 100%",marginTop:"10rpx",marginRight:0,marginBottom:"20rpx",marginLeft:0}},"later-text":{".container .ask-gift ":{fontSize:"24rpx",color:"#666666",lineHeight:"34rpx"}},"price-text":{".container .ask-gift ":{fontSize:"24rpx",fontWeight:"600",color:"#FFAA0D",lineHeight:"34rpx",marginTop:"2rpx"}},"give-btn":{".container .ask-gift ":{marginLeft:"8rpx",height:"44rpx",backgroundImage:"linear-gradient(to right, #FF00BD, #FF5954)",borderRadius:4,color:"#FFFFFF",textAlign:"center",lineHeight:"44rpx",fontSize:"20rpx",paddingTop:0,paddingRight:"10rpx",paddingBottom:0,paddingLeft:"10rpx"}}},_g=le("dom"),Gn=getApp().globalData.window,yg={emits:["onClickRich"],components:{UniLoadMore:Qe,GameMsgGift:eg,GameGift:Xa,GameMsgAskGift:pg,LImg:v,GameMsgWithRich:fg,GameMsgContent:ag,SendAskGiftPop:Jr},props:{user:{type:Object,default(){return{}}},roomId:{type:[String,Number],default:0},gameId:{type:[String,Number],default:0}},data(){return{list:[],sW:Gn.width,sH:Gn.height,myUid:getApp().globalData.uid,inputWrapW:Gn.width-uni.upx2px(48),inputText:"",askGiftInfo:"",askTextW:Gn.width-37-uni.upx2px(404),keyboardH:0,textMtime:0,textHeight:14,askGiftShow:!1,askGiftList:[],hideTimer:"",msgGiftInfo:"",giftMsgIndex:-1,askGiftTimeObj:{},placeholderStyle:O.isAndroid?"color: rgba(255, 255, 255, 0.3);":"",msgHasMore:!0,page:0}},computed:{getAskGiftSexStr(){return fr(this.user.sex)}},methods:{$str:h,clickMsgList(){this.keyboardH<=0||uni.hideKeyboard()},clickLater(){this.hideTimer&&clearTimeout(this.hideTimer),this.startAskGiftAnim()},clickSendGift(e,t,i=0){e&&e.stopPropagation(),t==2&&(this.giftMsgIndex=i);let o=R("send_ask_gift_status"),n=t==1?this.askGiftInfo:this.list[i];if(o){this.onSendGift(n,t);return}n.count=1;let r={content:n};this.$refs.gameAskGiftPop.open(r)},clickSend(e){if(e.stopPropagation(),g(this.inputText)||Nn())return;let t={user_info:getApp().pubUser,content:this.inputText},i=JSON.stringify(t),o={msg_type:ge.TEXT,msg_content:i},n=this.parseMsg(o);this.pushMsg(n);let r={game_id:this.gameId,msg_type:ge.TEXT,msg_content:{content:this.inputText}};k.request("/chat/game/msg-send",r),this.inputText=""},parseData(e,t,i){let o=i==this.myUid;return{type:e,mtime:t,send_uid:i,isSend:o}},parseEnterGame(e,t){let i=t.user_info;e.text=h("game.msg.enter"),e.info={name:{text:$e(i),color:"#67D4FF"}},e.click={action:100,url:"/pages/main/user-home?uid="+i.uid}},parseNormalBet(e,t){let i=t.user_info;e.text=h("game.msg.betNormal"),e.info={name:{text:$e(i),color:"#67D4FF"},number:{text:t.number,color:"#FF4477"},coin:{text:t.coins,color:"#FF4477"}},e.click={action:100,url:"/pages/main/user-home?uid="+i.uid}},parseBetForOther(e,t){let i=t.user_info,o=t.for_user_info;if(i.uid==this.myUid)e.text=h("game.msg.betForOtherBySelf"),e.info={number:{text:t.number,color:"#FF4477"},name:{text:$e(o),color:"#67D4FF"},coin:{text:t.coins,color:"#FF4477"},win:{text:i.rate,color:"#FF4477"}},e.click={action:100,url:"/pages/main/user-home?uid="+o.uid};else if(o.uid==this.myUid){let n=ht(i.sex);e.text=h("game.msg.betForYou"),e.info={name:{text:$e(i),color:"#67D4FF"},number:{text:t.number,color:"#FF4477"},coin:{text:t.coins,color:"#FF4477"},you_win:{text:o.rate,color:"#FF4477"},he:{text:n,color:"rgba(255, 255, 255, 0.7)"},he_win:{text:i.rate,color:"#FF4477"}},e.click={action:100,url:"/pages/main/user-home?uid="+i.uid}}else i.uid!=this.myUid&&o.uid!=this.myUid&&(e.text=h("game.msg.betForOther"),e.info={name:{text:$e(i),color:"#67D4FF"},number:{text:t.number,color:"#FF4477"},toName:{text:$e(o),color:"#67D4FF"},coin:{text:t.coins,color:"#FF4477"}},e.click={action:100,url:"/pages/main/user-home?uid="+i.uid})},parseWinHighPrize(e,t){e.text=h("game.msg.betWin");let i=t.user_info;e.info={name:{text:$e(i),color:"#67D4FF"},win:{text:t.prizes,color:"#FFFA1E"}},e.click={action:100,url:"/pages/main/user-home?uid="+t.user_info.uid}},parseWinPrize(e,t){let i=t.user_info,o=t.for_user_info;i.uid==this.myUid?(e.text=h("game.msg.betWinToOther"),e.info={number:{text:t.number,color:"#FFFA1E"},name:{text:$e(i),color:"#67D4FF"},coin:{text:i.coins,color:"#FFFA1E"},he:{text:ht(o.sex),color:"#FFFA1E"},he_coin:{text:o.coins,color:"#FFFA1E"}},e.click={action:100,url:"/pages/main/user-home?uid="+o.uid}):o.uid==this.myUid&&(e.text=h("game.msg.betWinToMe"),e.info={number:{text:t.number,color:"#FFFA1E"},name:{text:$e(i),color:"#67D4FF"},coin:{text:o.coins,color:"#FFFA1E"},he:{text:ht(i.sex),color:"#FFFA1E"},he_coin:{text:i.coins,color:"#FFFA1E"}},e.click={action:100,url:"/pages/main/user-home?uid="+i.uid})},parseAfterDrawnPrize(e,t){e.text=h("game.msg.drawnPrize"),e.info={win_number:{text:t.people,color:"#FFFA1E"},has:{text:Js(t.people),color:"#FFFA1E"},coin:{text:t.prizes,color:"#FFFA1E"},view:{text:h("viewDetails")+" >",color:"#67D4FF"}}},parseText(e,t){e.text=h("game.msg.text"),e.input_content=t.content;let i=t.user_info;e.info={name:{text:$e(i),color:"#67D4FF"},content:{text:t.content,color:"#FFFFFF"}},e.click={action:100,url:"/pages/main/user-home?uid="+t.user_info.uid}},parseAcceptInvite(e,t){e.text=h("game.msg.acceptInvite");let i=t.rate*100+"%",o=t.rate*100;e.info={call_price:{text:t.call_price,color:"#FFFA1E"},rate:{text:i,color:"#FFFA1E"},bet:{text:100,color:"#FFFA1E"},bet_win:{text:o,color:"#FFFA1E"}}},addMsgText(e){let t=this.parseData(e.msg_type,e.mtime||new Date().getTime()*1e3,this.myUid),i={};return e.msg_content&&(i=JSON.parse(e.msg_content)),j()?t.tips=h("game.msg.anchorInvitePrizesTip",{number:i.price}):t.tips=h("game.msg.matchGirlTip"),t},addMsgUnknown(e){let t=this.parseData(e.msg_type,e.mtime||new Date().getTime()*1e3,this.myUid);return e.tips?(t.tips=e.tips,t):(e.text&&(t.text=e.text),e.info&&(t.info=e.info),e.click&&(t.click=[e.click]),t)},addMsgWithRich(e){let t=JSON.parse(e.msg_content),i=this.parseData(e.msg_type,e.mtime||new Date().getTime()*1e3,this.myUid);return i.type==ge.ENTER_GAME?this.parseEnterGame(i,t):i.type==ge.NORMAL_BET?this.parseNormalBet(i,t):i.type==ge.BET_FOR_OTHER?this.parseBetForOther(i,t):i.type==ge.WIN_HIGH_PRIZE?this.parseWinHighPrize(i,t):i.type==ge.WIN_PRIZE?this.parseWinPrize(i,t):i.type==ge.DRAWN_PRIZE?this.parseAfterDrawnPrize(i,t):i.type==ge.TEXT?this.parseText(i,t):i.type==ge.ACCEPT_INVITE&&this.parseAcceptInvite(i,t),t.font_type&&(i.font_type=t.font_type),t.game_id&&(i.game_id=t.game_id),i},addMsgGift(e,t){let i=this.parseData(ge.GIFT,e.mtime||new Date().getTime()*1e3,this.myUid);if(i.giftInfo=e.gift_info,i.userInfo=e.user_info,i.toUserInfo=e.to_user_info,t)return i;this.pushMsg(i)},addMsgAskGift(e,t=!0,i=0){let o=this.parseData(ge.GIFT_ASK,e.mtime||new Date().getTime()*1e3,this.myUid);if(o=Object.assign(o,e),o.isSend=t,o.add_time=e.add_time,this.askGiftTimeObj[o.add_time]=this.list.length,i)return o;this.pushMsg(o)},parseMsg(e){if(g(e))return;let t=Number(e.msg_type),i="";return t==ge.BORED_TIP?i=this.addMsgText(e):t>0&&t<10?i=this.addMsgWithRich(e):t==ge.GIFT_ASK?i=this.receiveAskGift(e,1):t==ge.GIFT?i=this.addMsgGift(e,1):i=this.addMsgUnknown(e),i},receiveAskGift(e,t){let i=JSON.parse(e.content).gift;i.to_uid=this.user.uid,i.add_time=new Date().getTime()*1e3,this.askGiftList.length<=0&&(this.askGiftInfo=i,this.askGiftShow=!0),this.askGiftList.push(i);let o=this.addMsgAskGift(i,!1,1);if(t)return o;this.pushMsg(o)},hideAskGift(){this.hideTimer=setTimeout(()=>{this.startAskGiftAnim()},5e3)},startAskGiftAnim(){if(this.askGiftList.length<=0)return;this.askGiftList.splice(0,1),this.askGiftShow=!1;let e=setTimeout(()=>{if(this.askGiftList.length<=0)clearTimeout(this.hideTimer),clearTimeout(e);else{this.askGiftInfo=this.askGiftList[0];let t=setTimeout(()=>{this.askGiftShow=!0,clearTimeout(t)},200)}},500)},delAskGiftMsg(e,t){let i=-1;e==1?i=this.list.length-this.askGiftTimeObj[t.add_time]-1:this.giftMsgIndex!=-1&&(i=this.giftMsgIndex),i!=-1&&(this.list.splice(i,1),e==1&&delete this.askGiftTimeObj[t.add_time])},onAskGiftPopCancel(){this.giftMsgIndex!=-1&&(this.giftMsgIndex=-1)},onAskGiftChange(e){e.detail&&this.hideAskGift()},onClickRich(e){if(e.type==ge.DRAWN_PRIZE){let t={msgType:ge.DRAWN_PRIZE,gameId:e.game_id};this.$emit("onClickRich",t)}},onSendGift(e,t=2){bi(1,e,e.to_uid,this.roomId,we.GAME,()=>{e.number=1,xi(e,!0),this.delAskGiftMsg(t,e),this.hideTimer&&clearTimeout(this.hideTimer),t==2?e.add_time==this.askGiftInfo.add_time&&this.startAskGiftAnim():this.startAskGiftAnim()})},onKeyboardChange(e){e.height<=0?this.keyboardH=0:this.keyboardH=e.height},onLineHeight(e){this.textHeight=e.detail.height},onLoadMore(){this.msgHasMore&&this.loadMessage()},scrollBottom(){_g.scrollToElement(this.$refs.cellBottom,{animated:!0})},pushMsg(e){this.list.unshift(e),this.$nextTick(()=>{this.scrollBottom()})},loadMessage(e){this.page++,k.request("/chat/game/msg-list",{page:this.page},!1,!0).then(t=>{let i=t.data.list,o=[];for(let n=0,r=i.length;n<r;n++){let a=i[n],c=this.parseMsg(a);o.push(c)}this.list=[...this.list,...o],this.msgHasMore=t.data.has_more,typeof e!="undefined"&&e()},()=>{typeof e!="undefined"&&e()})}},beforeUnmount(){uni.offKeyboardHeightChange(this.onKeyboardChange)},unmounted(){uni.$off("event_game_view_action"),uni.$off("event_game_gift_msg")},created(){this.loadMessage(()=>{uni.$on("event_game_view_action",e=>{if(e.msg_type==ge.TEXT&&e.send_uid==getApp().globalData.uid)return;let t=this.parseMsg(e);this.pushMsg(t)})}),uni.$on("event_game_gift_msg",this.addMsgGift)}};function wg(e,t,i,o,n,r){let a=(0,s.resolveComponent)("game-msg-content"),c=(0,s.resolveComponent)("game-msg-ask-gift"),u=(0,s.resolveComponent)("game-msg-gift"),p=(0,s.resolveComponent)("game-msg-with-rich"),d=y((0,s.resolveDynamicComponent)("uni-load-more"),Qe),_=y((0,s.resolveDynamicComponent)("l-img"),v),w=(0,s.resolveComponent)("game-gift"),D=y((0,s.resolveDynamicComponent)("coin"),Ce),b=y((0,s.resolveDynamicComponent)("uni-transition"),st),F=(0,s.resolveComponent)("send-ask-gift-pop");return(0,s.openBlock)(),(0,s.createElementBlock)("view",{onClick:t[6]||(t[6]=(...T)=>r.clickMsgList&&r.clickMsgList(...T)),class:"container",renderWhole:!0},[(0,s.createElementVNode)("list",{showScrollbar:!1,ref:"msgList",class:"msg-list",loadmoreoffset:20,offsetAccuracy:10,onLoadmore:t[0]||(t[0]=(...T)=>r.onLoadMore&&r.onLoadMore(...T))},[(0,s.createElementVNode)("cell",{ref:"cellBottom"},null,512),((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(n.list,(T,G)=>((0,s.openBlock)(),(0,s.createElementBlock)("cell",{key:`m${T.mtime}`,ref_for:!0,ref:`msgCell${T.mtime}`,style:{transform:"rotate(180deg)"}},[T.type==7||T.tips?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,content:T.tips,mtime:T.mtime,style:{"margin-bottom":"12rpx"}},null,8,["content","mtime"])):T.type==1e3?((0,s.openBlock)(),(0,s.createBlock)(c,{key:1,onOnClickSend:ee=>r.clickSendGift(ee,2,G),data:T,user:i.user,style:{"margin-bottom":"12rpx"}},null,8,["onOnClickSend","data","user"])):T.type==1002?((0,s.openBlock)(),(0,s.createBlock)(u,{key:2,data:T,style:{"margin-bottom":"12rpx"}},null,8,["data"])):((0,s.openBlock)(),(0,s.createBlock)(p,{key:3,data:T,onOnClickRich:ee=>r.onClickRich(T),style:{"margin-bottom":"12rpx"}},null,8,["data","onOnClickRich"]))]))),128)),n.msgHasMore?((0,s.openBlock)(),(0,s.createElementBlock)("cell",{key:0},[(0,s.createVNode)(d,{style:{height:"30px"},"show-text":!1,status:"loading",iconSize:14,color:"#FFFFFF"})])):(0,s.createCommentVNode)("",!0)],544),(0,s.createElementVNode)("view",{class:"input-wrap",style:(0,s.normalizeStyle)({width:`${n.inputWrapW}px`})},[(0,s.createVNode)(_,{src:"s/game/msg_w.png",w:"28rpx",h:"28rpx",style:{position:"absolute",bottom:"16rpx",left:"20rpx"}}),(0,s.createElementVNode)("u-textarea",{modelValue:n.inputText,onInput:t[1]||(t[1]=T=>n.inputText=T.detail.value),class:"input",maxlength:"-1",onLinechange:t[2]||(t[2]=(...T)=>r.onLineHeight&&r.onLineHeight(...T)),style:(0,s.normalizeStyle)({height:`${n.textHeight}px`}),placeholder:r.$str("textChat"),placeholderStyle:n.placeholderStyle},null,44,["modelValue","placeholder","placeholderStyle"]),(0,s.createElementVNode)("view",{onClick:t[3]||(t[3]=(...T)=>r.clickSend&&r.clickSend(...T)),class:"right-send"},[(0,s.createVNode)(_,{src:"s/msg/send_red.png",w:"36rpx",h:"36rpx",style:(0,s.normalizeStyle)({opacity:n.inputText?1:.7})},null,8,["style"])])],4),(0,s.createVNode)(w,{ref:"gameGift",style:{position:"absolute",bottom:"90rpx",left:"24rpx"}},null,512),(0,s.createVNode)(b,{onChange:r.onAskGiftChange,show:n.askGiftShow,"mode-class":["slide-left","fade"],duration:500,style:{position:"absolute",bottom:"120rpx","z-index":"111"}},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"ask-gift"},[(0,s.createElementVNode)("view",{class:"center"},[(0,s.createVNode)(_,{src:i.user.small_avatar,w:"64rpx",h:"64rpx",radius:"32rpx"},null,8,["src"]),(0,s.createElementVNode)("u-text",{class:"ask-text",style:(0,s.normalizeStyle)({width:`${n.askTextW}px`})},(0,s.toDisplayString)(r.$str("msg.giftAskText")),5),(0,s.createVNode)(_,{src:n.askGiftInfo.icon,w:"80rpx",h:"80rpx"},null,8,["src"])]),(0,s.createElementVNode)("view",{class:"split-line"}),(0,s.createElementVNode)("view",{class:"center-between"},[(0,s.createElementVNode)("u-text",{onClick:t[4]||(t[4]=(...T)=>r.clickLater&&r.clickLater(...T)),class:"later-text"},(0,s.toDisplayString)(r.$str("later")),1),(0,s.createElementVNode)("view",{class:"center"},[(0,s.createVNode)(D,{coin:n.askGiftInfo.price,color:"#FFAA0D",fw:"600"},null,8,["coin"]),(0,s.createElementVNode)("u-text",{onClick:t[5]||(t[5]=T=>r.clickSendGift(T,1)),class:"give-btn"},(0,s.toDisplayString)(r.getAskGiftSexStr),1)])])])]),_:1},8,["onChange","show"]),(0,s.createVNode)(F,{ref:"gameAskGiftPop",onOnClickCancel:r.onAskGiftPopCancel,onOnSendGift:r.onSendGift},null,8,["onOnClickCancel","onOnSendGift"])])}var bg=S(yg,[["render",wg],["styles",[gg]]]),xg={"column-center":{"":{flexDirection:"column",alignItems:"center"}},"game-bet":{"":{backgroundColor:"#FFFFFF",borderTopLeftRadius:"24rpx",borderTopRightRadius:"24rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,paddingTop:"40rpx",paddingRight:"48rpx",paddingBottom:0,paddingLeft:"48rpx"}},"got-it-btn":{".game-bet ":{marginTop:"36rpx",height:"96rpx",backgroundImage:"linear-gradient(to right, #FF00BD, #FF5954)",borderRadius:"16rpx",flexDirection:"row",alignItems:"center",justifyContent:"center"}},"got-text":{".game-bet .got-it-btn ":{color:"#FFFFFF",fontSize:"28rpx"}},"thank-tip":{".game-bet ":{textAlign:"center",color:"#666666",fontSize:"24rpx",marginBottom:"20rpx",marginTop:"20rpx"}}},Cg={props:{},data(){return{richText:"",safeBottom:getApp().globalData.window.safeBottom,btnOpacity:.7,timerSecond:3,btnW:getApp().globalData.window.width-uni.upx2px(96),number:"",rewardRate:0,otherRate:0,timer:!1,betCoins:0,user:{}}},computed:{sexStr(){return he(this.user.sex)}},methods:{$str:h,clickGotIt(){this.btnOpacity!=.7&&(this.clearTimer(),this.$refs.betPop.close())},clearTimer(){this.timer&&clearInterval(this.timer)},parse(){let e=this.rewardRate*100+"%",t=this.otherRate*100+"%";this.richText={text:h("game.msg.betForYou"),info:{name:{text:this.user.nickname,color:"#0091FF"},number:{text:this.number,color:"#FF4477"},coin:{text:this.betCoins,color:"#FF4477"},you_win:{text:e,color:"#FF4477"},he:{text:ht(this.user.sex),color:"#333333"},he_win:{text:t,color:"#FF4477"}}}},open(e){this.user=e.user_info,this.number=e.bets.join(", "),this.rewardRate=e.bet_from_rate,this.otherRate=e.bet_for_rate,this.betCoins=e.coins,this.btnOpacity=.7,this.parse(),this.clearTimer(),this.$refs.betPop.open(),this.timerSecond<3&&(this.timerSecond=3),this.timer=setInterval(()=>{this.timerSecond-=1,this.timerSecond<=0&&(this.btnOpacity=1,this.clearTimer())},1e3)}}};function Ag(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("rich-content"),Pe),u=y((0,s.resolveDynamicComponent)("uni-popup"),re);return(0,s.openBlock)(),(0,s.createBlock)(u,{ref:"betPop",type:"bottom","safe-area":!1,"is-mask-click":!1,"mask-click":!1},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"game-bet column-center",style:(0,s.normalizeStyle)({paddingBottom:`${n.safeBottom}px`})},[(0,s.createVNode)(a,{src:n.user.small_avatar,w:"180rpx",h:"180rpx",radius:"90rpx"},null,8,["src"]),(0,s.createVNode)(c,{data:n.richText,fontSize:"28rpx",style:{"background-color":"transparent","margin-top":"24rpx","line-height":"40rpx",padding:"0 40rpx"}},null,8,["data"]),(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(...p)=>r.clickGotIt&&r.clickGotIt(...p)),class:"got-it-btn",style:(0,s.normalizeStyle)({opacity:`${n.btnOpacity}`,width:`${n.btnW}px`})},[(0,s.createElementVNode)("u-text",{class:"got-text"},(0,s.toDisplayString)(r.$str("gotIt")),1),n.timerSecond>0?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,class:"got-text"},"\uFF08"+(0,s.toDisplayString)(n.timerSecond)+"s\uFF09",1)):(0,s.createCommentVNode)("",!0)],4),(0,s.createElementVNode)("u-text",{class:"thank-tip"},(0,s.toDisplayString)(r.$str("bet.rememberThank",{whom:r.sexStr})),1)],4)]),_:1},512)}var Tg=S(Cg,[["render",Ag],["styles",[xg]]]),Sg={"view-title":{"":{height:"88rpx",alignItems:"center",justifyContent:"center"}},"text-title":{".view-title ":{fontSize:"34rpx",fontWeight:"600",color:"#FFFFFF"}},"view-match":{"":{marginTop:"20rpx"}}},vg={components:{GameMsg:bg,LotteryView:Ga,LotteryNumber:Ai,GameCallAction:Vf,GamePlate:Na,GameBetPop:Tg,GameHistory:Ba,GameHistoryRules:Pa,GameHistoryLogs:Ha,GameHistoryDetails:Ua,GameGift:Xa},emits:["clickCallOpen","clickGift","clickGiftAsk"],props:{isGameShow:{type:Boolean,default:!1},isCallConnect:{type:[Boolean,Number],default:!1},roomId:{type:[String,Number],default:0},openType:{type:Number,default:0},targetUser:{type:[Boolean,Object],default(){return!1}}},data(){return{sW:getApp().globalData.window.width,sH:getApp().globalData.window.height,barH:getApp().globalData.window.statusBarHeight,actionTop:uni.upx2px(320),matchStatus:1,singleBet:10,gameInfo:{},lastResult:{},plateHeight:0,rulesList:[],rateList:[],detailGameId:"",inviteInfo:{},historyShowType:1,isHasIndex:!1}},watch:{isGameShow:{handler(e,t){e&&!this.isHasIndex&&this.initView(!0)}}},computed:{},methods:{$str:h,clickBack(e){e&&e.stopPropagation(),this.isCallConnect?this.clickCallOpen():Gt()},clickCallOpen(){getApp().globalData.hasBetNumber&&uni.$emit("event_game_touch_bet",this.gameInfo),this.$emit("clickCallOpen")},clickGift(){this.$emit("clickGift",{fromType:we.GAME})},clickGiftAsk(){this.$emit("clickGiftAsk",{fromType:we.GAME})},initFirstFrame(){},callUserLeave(){uni.$emit("event_game_call_user_leave")},matchSuccess(e){},matchReset(){},receiveAskGift(e){this.$refs.gameMsg.receiveAskGift(e)},addMsgAskGift(e){this.$refs.gameMsg.addMsgAskGift(e)},onClickRich(e){e.msgType==ge.DRAWN_PRIZE&&this.onOpenHistoryPop(3,e.gameId)},onClickPrizeDetail(e){this.detailGameId=e,this.$refs.gameDetailsPop.open()},onClickHistoryLeft(e){e==1?this.$refs.gameRulesPop.close():e==2?this.$refs.gameLogsPop.close():e==3&&this.$refs.gameDetailsPop.close()},onOpenHistoryPop(e,t="",i=""){e==1?this.$refs.gameRulesPop.open():e==2?(this.historyShowType=i,this.$refs.gameLogsPop.open()):e==3&&(this.detailGameId=t,this.$nextTick(()=>{this.$refs.gameDetailsPop.open()}))},onGetPlateHeight(e){this.plateHeight||(this.plateHeight=e)},onMqttGameLotteryResult(e){if(!e.game_info||e.game_info.game_id!=this.gameInfo.game_id)return;let t=e.game_info.list;this.setGameInfo(e.game_info);let i=e.game_info.result;t[i].status=2,i>=5?t[10].status=2:t[11].status=2,i%2==0?t[13].status=2:t[12].status=2,this.$refs.gamePlate.changeBtnList(t)},onMqttGameReset(e){let t=e.game_info.list;this.setGameInfo(e.game_info),this.$refs.gamePlate.resetBtnList(t,e.game_info),e.last_result_info&&(this.lastResult=e.last_result_info)},onMqttGameBetListener(e){if(e.game_info.game_id!=this.gameInfo.game_id)return;let t=e.game_info.list;this.setGameInfo(e.game_info),this.$refs.gamePlate.changeBtnList(t)},onGameBetForHerListener(e){e.game_id==this.gameInfo.game_id&&(this.isCallConnect||di(ze("s/game/v/bet_for_her.mp3")),Pn(e.game_id,e.bet_info),this.$refs.gamePlate.changeBtnBet(e.bet_info),this.$refs.gameBetPop.open(e))},setGameInfo(e){let t=JSON.parse(JSON.stringify(e));delete t.list,this.gameInfo=t,this.gameInfo=JSON.parse(JSON.stringify(t))},initView(e){let t={from_type:e?1:0};this.roomId&&(t.room_id=this.roomId),k.request("/chat/game/index",t).then(i=>{this.isHasIndex=!0,C("error","at pagesGame/coms/game-view.vue:242","/chat/game/index "+JSON.stringify(i)),getApp().globalData.hasBetNumber=!g(i.data.bet_info),this.singleBet=i.data.single_bet,be(i.data.account_money),this.lastResult=i.data.last_result_info;let o=i.data.rule;o&&(this.rateList=o.rate,this.rulesList=o.playing_method);let n=i.data.invite_info;if(n&&(this.inviteInfo=n),e){let r=i.data.game_info.list;this.setGameInfo(i.data.game_info),this.$nextTick(()=>{this.$refs.gamePlate.init(r,i.data.bet_info)})}else this.gameInfo.game_id!=i.data.game_info.game_id?i.data.game_info.status==0?this.onMqttGameReset(i.data):i.data.game_info.status==1?this.setGameInfo(i.data.game_info):(this.gameInfo.game_id=i.data.game_info.game_id,this.onMqttGameLotteryResult(i.data)):i.data.game_info.status==0?this.setGameInfo(i.data.game_info):i.data.game_info.status==1?this.setGameInfo(i.data.game_info):this.onMqttGameLotteryResult(i.data)})},onPageShow(){this.$refs.gamePlate.setMusicPlay(!0)},onPageHide(){setTimeout(()=>{let e=je();if(e[e.length-1]!="/pages/call/chat-view"){for(let t=0,i=e.length;t<i;t++)if(e[t].indexOf("pagesDialog")!=-1)return;this.$refs.gamePlate.setMusicPlay(!1)}},500)},gameViewAppHide(){this.$refs.gamePlate.setMusicPlay(!1)}},created(){this.isGameShow&&this.initView(!0),uni.$on("event_game_lottery_result",this.onMqttGameLotteryResult),uni.$on("event_game_reset",this.onMqttGameReset),uni.$on("event_game_bet_listener",this.onMqttGameBetListener),uni.$on("event_game_bet_for_her",this.onGameBetForHerListener),uni.$on("event_app_show",this.initView),uni.$on("event_app_hide",this.gameViewAppHide)},unmounted(){getApp().globalData.hasBetNumber&&uni.$emit("event_game_show_window",this.gameInfo),this.isHasIndex&&!getApp().globalData.isGameWindowShow&&!getApp().globalData.hasBetNumber&&Hn(),uni.$off("event_game_lottery_result",this.onMqttGameLotteryResult),uni.$off("event_game_reset",this.onMqttGameReset),uni.$off("event_game_bet_listener",this.onMqttGameBetListener),uni.$off("event_game_bet_for_her",this.onGameBetForHerListener),uni.$off("event_app_show",this.initView),uni.$off("event_app_hide",this.gameViewAppHide)}};function kg(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("uni-icons"),J),u=(0,s.resolveComponent)("game-msg"),p=(0,s.resolveComponent)("game-plate"),d=(0,s.resolveComponent)("game-bet-pop"),_=(0,s.resolveComponent)("game-history-rules"),w=(0,s.resolveComponent)("game-history"),D=(0,s.resolveComponent)("game-history-logs"),b=(0,s.resolveComponent)("game-history-details");return(0,s.openBlock)(),(0,s.createElementBlock)("view",{style:(0,s.normalizeStyle)({width:`${n.sW}px`,height:`${n.sH}px`}),renderWhole:!0},[(0,s.createVNode)(a,{src:"s/game/bg.png",w:`${n.sW}px`,h:`${n.sH}px`,style:{position:"absolute",top:"0",left:"0"}},null,8,["w","h"]),(0,s.createElementVNode)("view",{class:"view-title",style:(0,s.normalizeStyle)({width:`${n.sW}px`,marginTop:`${n.barH}px`})},[(0,s.createVNode)(c,{onClick:r.clickBack,type:"back",size:"44rpx",color:"#FFFFFF",style:{padding:"16rpx",position:"absolute",left:"0"}},null,8,["onClick"]),(0,s.createElementVNode)("u-text",{class:"text-title"},(0,s.toDisplayString)(r.$str("game.center")),1)],4),(0,s.createElementVNode)("view",{style:{flex:"1","flex-direction":"row"}},[(0,s.createVNode)(u,{ref:"gameMsg",onOnClickRich:r.onClickRich,user:i.targetUser,"room-id":i.roomId,"game-id":n.gameInfo.game_id,style:{flex:"1","margin-bottom":"30rpx"}},null,8,["onOnClickRich","user","room-id","game-id"])]),(0,s.createVNode)(p,{ref:"gamePlate","single-bet":n.singleBet,"game-info":n.gameInfo,"room-id":i.roomId,"is-game-show":i.isGameShow,"target-user":i.targetUser,"last-result":n.lastResult,"is-for-her":!1,"is-call-connect":i.isCallConnect,onOnGetPlateHeight:r.onGetPlateHeight,onOnOpenHistoryPop:r.onOpenHistoryPop},null,8,["single-bet","game-info","room-id","is-game-show","target-user","last-result","is-call-connect","onOnGetPlateHeight","onOnOpenHistoryPop"]),(0,s.createVNode)(d,{ref:"gameBetPop"},null,512),(0,s.createVNode)(w,{ref:"gameRulesPop",height:n.plateHeight},{default:(0,s.withCtx)(()=>[(0,s.createVNode)(_,{onOnClickLeft:r.onClickHistoryLeft,height:n.plateHeight,rulesList:n.rulesList,rateList:n.rateList},null,8,["onOnClickLeft","height","rulesList","rateList"])]),_:1},8,["height"]),(0,s.createVNode)(w,{ref:"gameLogsPop",height:n.plateHeight},{default:(0,s.withCtx)(()=>[(0,s.createVNode)(D,{onOnClickLeft:r.onClickHistoryLeft,onOnClickPrizeDetail:r.onClickPrizeDetail,"show-type":n.historyShowType,height:n.plateHeight},null,8,["onOnClickLeft","onOnClickPrizeDetail","show-type","height"])]),_:1},8,["height"]),(0,s.createVNode)(w,{ref:"gameDetailsPop",height:n.plateHeight},{default:(0,s.withCtx)(()=>[(0,s.createVNode)(b,{onOnClickLeft:r.onClickHistoryLeft,height:n.plateHeight,gameId:n.detailGameId},null,8,["onOnClickLeft","height","gameId"])]),_:1},8,["height"])],4)}var Fg=S(vg,[["render",kg],["styles",[Sg]]]),Lg={"text-report":{"":{fontSize:"16rpx",color:"#FFFFFF",fontWeight:"500"}},"view-report-top":{"":{flex:1,alignItems:"center",flexDirection:"column-reverse"}},"view-report-bottom":{"":{borderTopRightRadius:"24rpx",borderTopLeftRadius:"24rpx",backgroundColor:"#FFFFFF",paddingLeft:"40rpx",paddingRight:"40rpx"}},"text-report-title":{"":{fontSize:"32rpx",color:"#333333",fontWeight:"500",marginTop:"40rpx",marginBottom:"20rpx"}},"view-report-type":{"":{marginTop:"40rpx",flexDirection:"row",flexWrap:"wrap"}},item:{".view-report-type ":{textAlign:"center",borderRadius:"8rpx",width:"320rpx",lineHeight:"76rpx",color:"#333333",fontSize:"28rpx",marginBottom:"20rpx"}},default:{".view-report-type ":{backgroundColor:"#F1F3F6",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#F1F3F6"}},active:{".view-report-type ":{borderWidth:"2rpx",borderStyle:"solid",borderColor:"#FF4477",backgroundColor:"rgba(255,68,119,0.04)"}},"view-report-type-none":{"":{marginTop:"40rpx",alignItems:"center",height:"480rpx"}},"btn-report":{"":{height:"96rpx",backgroundImage:"linear-gradient(to right, #FF00BD, #FF5954)",borderRadius:"12rpx",fontSize:"28rpx",color:"#FFFFFF",lineHeight:"96rpx",textAlign:"center",marginTop:"20rpx",marginBottom:"50rpx"}},"btn-group":{"":{marginTop:"20rpx",marginBottom:"50rpx"}},"op-btn":{".btn-group ":{height:"96rpx",borderRadius:"12rpx",fontSize:"28rpx",color:"#333333",lineHeight:"96rpx",textAlign:"center",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#333333",flex:1}},"text-report-tips":{"":{fontSize:"20rpx",color:"#666666"}}},Ig={components:{LImg:v},emits:["onSnapshot","onClickRemindReportHangUp"],props:{user:{type:Object,default(){return{}}},fromType:{type:Number,default:1},viewTopHeight:{type:Number,default:0},roomId:{type:[Number,String],default:0}},data(){return{sW:getApp().globalData.window.width,sH:getApp().globalData.window.height,safeB:getApp().globalData.window.safeBottom,reportReward:100,reportTypeList:[],reportIdArr:[],screenSrc:"",openType:1}},computed:{screenPicHeight(){return this.sH-this.viewTopHeight-uni.upx2px(920)-20},reportTitleStr(){return h("report.typeTip",{him:he(this.user.sex)})}},methods:{$str:h,reqReport(e,t){let i={target_id:this.user.uid,from_type:1,type:this.reportIdArr.join(","),room_id:this.roomId};e&&(i.photos=e),k.request("/report/submit",i).then(()=>{typeof t=="function"&&t(),Tt(h("report.successTip"))}),this.clickClose()},onPopChange(e){e.show?this.reportTypeList.length<=0&&ya().then(t=>{this.reportTypeList=t}):(this.screenSrc="",this.reportIdArr=[])},clickReportIcon(e){e.stopPropagation(),this.openType=1,this.clickThis()},clickReportHangUp(){this.reportIdArr.length<=0||this.clickReport(()=>{this.$emit("onClickRemindReportHangUp")})},clickReport(e){this.reportIdArr.length<=0||(this.screenSrc?(uni.showLoading({mask:!0}),Yr(this.screenSrc,lr.REPORT,O.PHOTO,!1).then(t=>{let i=[{url:t.path,width:this.sW,height:this.sH}];uni.hideLoading(),this.reqReport(i,()=>{typeof e=="function"&&e()})},t=>{typeof e=="function"&&e(),uni.hideLoading()})):this.reqReport(null,()=>{typeof e=="function"&&e()}))},clickItem(e){let t=Number(e),i=this.reportIdArr.indexOf(t);i==-1?this.reportIdArr.push(t):this.reportIdArr.splice(i,1)},clickClose(){this.$refs.popReport.close()},clickThis(){if(this.fromType==1)ie("/pagesPub/my/report",{targetId:this.user.uid});else{if(O.isAndroid){uni.showLoading({mask:!0}),this.$emit("onSnapshot");return}if(uni.showLoading(),!Fr()){Ya(!1,e=>{let t=setTimeout(()=>{clearTimeout(t),dn("video_chat").then(i=>{uni.hideLoading(),Ka(),this.screenSrc=i,this.$refs.popReport.open()})},100)});return}dn("video_chat").then(e=>{this.screenSrc=e,uni.hideLoading(),this.$refs.popReport.open()})}},handleAndroidReport(e,t){if(!e){uni.hideLoading(),this.$refs.popReport.open();return}setTimeout(()=>{dn("video_chat").then(i=>{this.screenSrc=i,uni.hideLoading(),this.$refs.popReport.open(),typeof t=="function"&&t()})},1e3)},open(){this.openType=2,this.clickThis()}}};function Dg(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("uni-popup"),re);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{style:{"align-items":"center"},renderWhole:!0},[(0,s.createVNode)(a,{onClick:r.clickReportIcon,src:"s/pub/careful_white.png",w:"48rpx",h:"50rpx"},null,8,["onClick"]),(0,s.createElementVNode)("u-text",{onClick:t[0]||(t[0]=(...u)=>r.clickReportIcon&&r.clickReportIcon(...u)),class:"text-report"},(0,s.toDisplayString)(r.$str("report")),1),(0,s.createVNode)(c,{ref:"popReport",type:"bottom","safe-area":!1,"mask-bg-color":"rgba(0,0,0,0)",onChange:r.onPopChange},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)({height:`${n.sH}px`,width:`${n.sW}px`})},[(0,s.createElementVNode)("view",{onClick:t[1]||(t[1]=(...u)=>r.clickClose&&r.clickClose(...u)),class:"view-report-top",style:(0,s.normalizeStyle)({width:`${n.sW}px`})},[n.screenSrc?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,src:n.screenSrc,w:`${r.screenPicHeight*.4583}px`,h:`${r.screenPicHeight}px`,border:"2px solid #FFFFFF",style:{"margin-bottom":"40rpx"}},null,8,["src","w","h"])):(0,s.createCommentVNode)("",!0)],4),(0,s.createElementVNode)("view",{class:"view-report-bottom",style:(0,s.normalizeStyle)({width:`${n.sW}px`,paddingBottom:`${n.safeB}px`})},[(0,s.createElementVNode)("u-text",{class:"text-report-title"},(0,s.toDisplayString)(r.reportTitleStr),1),(0,s.createElementVNode)("u-text",{class:"text-report-tips"},(0,s.toDisplayString)(r.$str("call.reportRewardTips")),1),n.reportTypeList.length>0?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"view-report-type"},[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(n.reportTypeList,(u,p)=>((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:p,onClick:d=>r.clickItem(u.id),class:(0,s.normalizeClass)(["item",[n.reportIdArr.indexOf(Number(u.id))!=-1?"active":"default"]]),style:(0,s.normalizeStyle)({marginRight:(p+1)%2==0?"0":"20rpx"})},(0,s.toDisplayString)(u.title),15,["onClick"]))),128))])):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,class:"view-report-type-none"})),n.openType==1?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:2,onClick:t[2]||(t[2]=(...u)=>r.clickReport&&r.clickReport(...u)),class:"btn-report",style:(0,s.normalizeStyle)({opacity:n.reportIdArr.length>0?"1":"0.4"})},(0,s.toDisplayString)(r.$str("report")),5)):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:3,class:"center btn-group",style:(0,s.normalizeStyle)({opacity:n.reportIdArr.length>0?"1":"0.4"})},[(0,s.createElementVNode)("u-text",{onClick:t[3]||(t[3]=(...u)=>r.clickReportHangUp&&r.clickReportHangUp(...u)),class:"op-btn"},(0,s.toDisplayString)(r.$str("call.reportAndHangUp")),1),(0,s.createElementVNode)("u-text",{onClick:t[4]||(t[4]=(...u)=>r.clickReport&&r.clickReport(...u)),class:"op-btn",style:{"margin-left":"20rpx"}},(0,s.toDisplayString)(r.$str("report")),1)],4))],4)],4)]),_:1},8,["onChange"])])}var Mg=S(Ig,[["render",Dg],["styles",[Lg]]]),Eg={"view-base":{"":{position:"absolute",height:"100rpx"}},"view-action":{"":{height:"100rpx",flexDirection:"row",alignItems:"center"}},"view-text-chat":{"":{marginLeft:"20rpx",flex:1,borderWidth:1,borderStyle:"solid",borderColor:"rgba(255,255,255,0.3)",height:"68rpx",borderRadius:"34rpx",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"text-message":{".view-text-chat ":{flex:1,lineHeight:"68rpx",color:"rgba(255,255,255,0.8)",marginLeft:"20rpx",fontSize:"24rpx"}},"view-input":{"":{backgroundColor:"#FFFFFF",flexDirection:"row",alignItems:"center",height:"100rpx"}},input:{".view-input ":{flex:1,marginLeft:"30rpx",backgroundColor:"#F1F3F6",borderRadius:"38rpx",paddingLeft:"26rpx",paddingRight:"26rpx",color:"#333333",height:"76rpx"}},"view-send":{".view-input ":{paddingTop:"20rpx",paddingRight:"24rpx",paddingBottom:"20rpx",paddingLeft:"24rpx"}}},Og={components:{Lottie:Wa,LImg:v},emits:["onInputFocus","clickGift","clickGiftAsk","clickFollow","onSendText","clickThis"],props:{user:{type:Object,default(){return{}}},isAuth:{type:Number,default:0},callType:{type:Number,default:1},roomId:{type:[String,Number],default:0},isShow:{type:[Boolean,Number],default:!0}},data(){return{sW:getApp().globalData.window.width,bottom:getApp().globalData.window.safeBottom+2,showInput:!1,text:"",cursorSpacing:uni.upx2px(12),giftAnimTimer:!1}},computed:{viewShowStyle(){return{marginLeft:`${this.isShow?0:`-${this.sW}`}px`}},likeSrc(){return this.user.is_follow?"s/call/like_s_1.png":"s/call/like_n_1.png"}},methods:{$str:h,onKeyboardChange(e){e.height<=0&&(this.showInput=!1,this.$emit("onInputFocus",!1))},hideInput(e){e&&e.stopPropagation(),this.showInput=!1,this.$nextTick(()=>{this.$refs.input.blur(),this.$emit("onInputFocus",!1)})},clickThis(e){e&&e.stopPropagation(),this.$emit("clickThis")},clickMsg(e){e&&e.stopPropagation(),this.showInput=!0,this.$nextTick(()=>{this.$refs.input.focus(),this.$emit("onInputFocus",!0)})},clickGift(e){e&&e.stopPropagation(),this.$emit("clickGift",{fromType:we.CALL})},clickGiftAsk(e){e&&e.stopPropagation(),this.$emit("clickGiftAsk",{fromType:we.CALL})},clickLike(e){e&&e.stopPropagation(),Io(this.user.uid,this.user.is_follow,this.roomId),this.$emit("clickFollow",{isFollow:this.user.is_follow})},clickSend(e){if(e&&e.stopPropagation(),this.text.trim()==""){ye(h("tips"),h("msg.msgNullTip"),"",h("gotIt"));return}this.$emit("onSendText",this.text),this.text=""}},created(){this.isAuth||setTimeout(()=>{this.$refs.lottieGift&&this.$refs.lottieGift.play(),this.giftAnimTimer=setInterval(()=>{this.$refs.lottieGift&&this.$refs.lottieGift.play()},23e3)},5e3),uni.onKeyboardHeightChange(this.onKeyboardChange),uni.$on("event_hide_call_msg_input",this.hideInput)},beforeUnmount(){this.giftAnimTimer&&clearInterval(this.giftAnimTimer),uni.offKeyboardHeightChange(this.onKeyboardChange),uni.$off("event_hide_call_msg_input",this.hideInput)}};function Rg(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=(0,s.resolveComponent)("lottie");return(0,s.openBlock)(),(0,s.createElementBlock)("view",{onClick:t[4]||(t[4]=(...u)=>r.clickThis&&r.clickThis(...u)),class:"view-base",style:(0,s.normalizeStyle)({width:`${n.sW}px`,bottom:`${n.bottom}px`}),renderWhole:!0},[n.showInput?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"view-action",style:(0,s.normalizeStyle)([{width:`${n.sW}px`},r.viewShowStyle])},[(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(...u)=>r.clickMsg&&r.clickMsg(...u)),class:"view-text-chat"},[(0,s.createElementVNode)("u-text",{class:"text-message"},(0,s.toDisplayString)(r.$str("textChat")),1)]),i.isAuth?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,onClick:r.clickGiftAsk,src:"s/call/ask_gift_white_1.png",w:"60rpx",h:"60rpx",style:{"margin-left":"40rpx","margin-right":"40rpx"}},null,8,["onClick"])):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,onClick:t[1]||(t[1]=(...u)=>r.clickGift&&r.clickGift(...u)),style:{width:"100rpx",height:"100rpx","margin-left":"20rpx","margin-right":"20rpx"}},[(0,s.createVNode)(a,{src:"s/call/gift_bg_guang.png",w:"100rpx",h:"100rpx"}),(0,s.createVNode)(c,{ref:"lottieGift",src:"s/call/gift_anim.json",style:{position:"absolute",top:"0",left:"0",width:"100rpx",height:"100rpx"}},null,512)])),(0,s.createVNode)(a,{onClick:r.clickLike,src:r.likeSrc,w:"60rpx",h:"60rpx",style:{"margin-right":"40rpx"}},null,8,["onClick","src"]),(0,s.createElementVNode)("view",{style:{width:"60rpx",height:"60rpx","margin-right":"20rpx"}})],4)),n.showInput?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,class:"view-input",style:(0,s.normalizeStyle)({width:`${n.sW}px`})},[(0,s.createElementVNode)("u-input",{modelValue:n.text,onInput:t[2]||(t[2]=u=>n.text=u.detail.value),ref:"input",cursorSpacing:n.cursorSpacing,maxlength:-1,autoBlur:!1,adjustPosition:!0,focus:!0,cursor:n.text.length,class:"input",style:(0,s.normalizeStyle)({marginRight:n.text?"0":"30rpx"})},null,44,["modelValue","cursorSpacing","cursor"]),n.text?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,onClick:t[3]||(t[3]=(...u)=>r.clickSend&&r.clickSend(...u)),class:"view-send"},[(0,s.createVNode)(a,{src:"s/msg/send_red.png",w:"56rpx",h:"56rpx"})])):(0,s.createCommentVNode)("",!0)],4)):(0,s.createCommentVNode)("",!0)],4)}var Ng=S(Og,[["render",Rg],["styles",[Eg]]]),Bg={"center-between":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},center:{"":{flexDirection:"row",alignItems:"center"}},"pop-content":{"":{backgroundColor:"#FFFFFF",borderTopLeftRadius:"40rpx",borderTopRightRadius:"40rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx"}},"text-title":{"":{marginTop:"40rpx",color:"#333333",fontSize:"34rpx",fontWeight:"500",marginBottom:"40rpx"}},"view-item":{"":{backgroundColor:"#F1F3F6",borderRadius:"8rpx",marginBottom:"24rpx"}},"view-item-switch":{"":{paddingTop:0,paddingRight:"16rpx",paddingBottom:0,paddingLeft:"16rpx",height:"88rpx"}},"text-content":{"":{color:"#333333",fontSize:"24rpx"}},"text-tip":{"":{color:"#666666",fontSize:"20rpx"}},"view-switch":{"":{width:"100rpx",height:"88rpx",position:"absolute",left:"16rpx"}}},Pg={components:{UniIcons:J},emits:["onStatusChange"],props:{},data(){return{languageChoose:!1,safeBottomH:getApp().globalData.window.safeBottom,isAutomaticOpen:!1,languageSpeak:""}},computed:{richText(){let e="";return this.languageChoose&&(e=this.languageChoose.name),{text:h("translateTextForMe"),info:{language:{text:e,color:"#0091FF"}},click:[{action:101}]}},isLanguageArabic(){return getApp().globalData.languageKey=="ar"},iconPos(){return this.isLanguageArabic?{left:"0"}:{right:"0"}}},methods:{$str:h,clickClose(){this.close()},clickSpeakLanguage(){X("/pagesDialog/language-choose",{fromType:1},"languageData",{},{onChooseListener:e=>{this.languageSpeak!=getApp().globalData.speakLanguageStr&&(this.languageSpeak=getApp().globalData.speakLanguageStr,this.$emit("onStatusChange",{key:"speakLanguage",languageList:e}))}})},clickChooseLanguage(e){e&&e.stopPropagation(),X("/pagesDialog/language-choose",{fromType:2},"languageData",{code:this.languageChoose.language},{onChooseListener:t=>{if(!t)return;let i=t[0];if(!i)return;let o=this.languageChoose.language!=i.language;this.languageChoose=i,go(i.language),o&&this.$emit("onStatusChange",{key:"automatic",value:this.isAutomaticOpen,language:this.languageChoose,isChoose:!0})}})},onSwitchChangeAutomatic(e){this.isAutomaticOpen=e.detail.value,this.$emit("onStatusChange",{key:"automatic",value:this.isAutomaticOpen,language:this.languageChoose})},close(){this.$refs.popView.close()},open(){this.languageChoose&&this.$refs.popView.open()},initData(e,t,i){this.isAutomaticOpen=t,this.languageChoose=e,this.languageSpeak=getApp().globalData.speakLanguageStr}},created(){}};function Hg(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("uni-icons"),J),c=(0,s.resolveComponent)("switch"),u=y((0,s.resolveDynamicComponent)("rich-content"),Pe),p=y((0,s.resolveDynamicComponent)("uni-popup"),re);return(0,s.openBlock)(),(0,s.createBlock)(p,{ref:"popView","safe-area":!1,type:"bottom"},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"pop-content"},[(0,s.createElementVNode)("u-text",{class:"text-title"},(0,s.toDisplayString)(r.$str("automatic.audioToText")),1),(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(...d)=>r.clickSpeakLanguage&&r.clickSpeakLanguage(...d)),class:"view-item",style:{padding:"20rpx 16rpx 20rpx 24rpx"}},[(0,s.createElementVNode)("view",{class:"center-between"},[(0,s.createElementVNode)("u-text",{class:"text-content"},(0,s.toDisplayString)(r.$str("iSpeak")),1),(0,s.createElementVNode)("view",{class:"center"},[(0,s.createElementVNode)("u-text",{class:"text-content"},(0,s.toDisplayString)(n.languageSpeak),1),(0,s.createVNode)(a,{type:"right",color:"#666666",size:"28rpx"})])]),(0,s.createElementVNode)("u-text",{class:"text-tip",style:{"margin-top":"10rpx"}},(0,s.toDisplayString)(r.$str("upLanguageSelect",{num:"3"})),1)]),(0,s.createElementVNode)("view",{class:"center view-item view-item-switch"},[(0,s.createVNode)(c,{onChange:r.onSwitchChangeAutomatic,type:"switch",color:"#65C368",checked:n.isAutomaticOpen,style:{transform:"scale(0.7)","margin-right":"-4px"}},null,8,["onChange","checked"]),(0,s.createVNode)(u,{onClick:r.clickChooseLanguage,data:r.richText,fontSize:"24rpx",color:"#333333",style:{"background-color":"transparent","line-height":"34rpx",flex:"1","margin-left":"16rpx"}},null,8,["onClick","data"]),(0,s.createVNode)(a,{onClick:r.clickChooseLanguage,type:"right",color:"#666666",size:"28rpx"},null,8,["onClick"])]),(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)({width:"10px",height:`${n.safeBottomH+15}px`})},null,4),(0,s.createVNode)(a,{onClick:r.clickClose,type:"closeempty",size:"32rpx",color:"#333333",style:(0,s.normalizeStyle)([{position:"absolute",top:"0",padding:"24rpx"},r.iconPos])},null,8,["onClick","style"])])]),_:1},512)}var Ug=S(Pg,[["render",Hg],["styles",[Bg]]]),Gg={"view-base":{"":{alignItems:"center"}},"text-label":{"":{position:"absolute",top:0,left:0,fontSize:"14rpx",color:"#FFFFFF",width:"120rpx",lines:1,textAlign:"center"}},"list-msg":{"":{width:"534rpx",marginTop:"8rpx"}},"view-tip":{"":{position:"absolute",top:0,alignItems:"center"}},"view-content":{".view-tip ":{height:"48rpx",backgroundColor:"rgba(0,0,0,0.41)",borderRadius:"8rpx",flexDirection:"row",alignItems:"center",paddingLeft:"16rpx"}},"text-content":{".view-tip ":{fontSize:"20rpx",color:"#FFFFFF"}}},$a=le("dom"),Wg={components:{LImg:v},emits:["onShowChange"],props:{height:{type:String,default:""},user:{type:Object,default(){return{}}}},data(){return{sW:getApp().globalData.window.width,list:[],showThis:!0,showTimeout:!1,showHereTip:!1,showHereTipStorage:!R("automatic_msg_here_tip"),showListBottom:!1,showFromNewMsg:!1,showFromClick:!1,scrollListBottom:!1}},watch:{showThis:{handler(e,t){e?this.showFromNewMsg?(this.showListBottom=!1,this.showFromNewMsg=!1):this.showFromClick&&(this.showListBottom=!0,this.showFromClick=!1,this.scrollBottom()):(this.showListBottom=!0,this.scrollBottom()),this.$emit("onShowChange",e)},immediate:!0}},computed:{showStyle(){return{left:this.showThis?"0":`-${this.sW}px`}},msgHereTipStr(){return h("automatic.msgHereTip",{he:ht(this.user.sex)})}},methods:{$str:h,scrollBottom(){this.$nextTick(()=>{let e=this.$refs.listBottom;e&&(this.scrollListBottom=!0,$a.scrollToElement(e,{animated:!1}))})},clickThis(e){e&&e.stopPropagation(),this.showThis?(this.showThis=!1,this.hide()):(this.showThis=!0,this.showFromNewMsg=!1,this.showFromClick=!0,this.setShowTimeout())},onListScroll(e){io(()=>{if(!e.isDragging&&this.scrollListBottom){this.scrollListBottom=!this.scrollListBottom;return}this.showThis=!0,this.setShowTimeout()},3e3,"automaticShowTimeout")},clickAutomaticMsgHereTipClose(e){e&&e.stopPropagation(),this.showHereTip=!1,N("automatic_msg_here_tip",1)},setShowTimeout(){this.showTimeout&&clearTimeout(this.showTimeout),this.showTimeout=setTimeout(()=>{this.showThis=!1},3500)},setContent(e,t){this.showTimeout&&clearTimeout(this.showTimeout),this.showThis=!0,this.showFromNewMsg=!0,this.showListBottom=!1,this.list.push({ctime:new Date().getTime(),nodes:this.parseContent(e,t)}),!t&&this.showHereTipStorage&&this.list.length==2&&(this.showHereTip=!0),this.list.length>3&&(this.list=this.list.slice(this.list.length-3)),this.$nextTick(()=>{setTimeout(()=>{if(this.list.length<=0)return;let i=this.list[this.list.length-1].ctime;typeof i!="undefined"&&typeof this.$refs[`aCell${i}`]!="undefined"&&$a.scrollToElement(this.$refs[`aCell${i}`][0],{animated:!0})},300)}),this.setShowTimeout()},parseContent(e,t){return[{name:"div",children:[{type:"text",text:t||At(this.user.sex),attrs:{style:"color: #67D4FF;"}},{type:"text",text:`&nbsp;${t?"":h("saidLower")}: ${e}`}]}]},hide(){this.showTimeout&&clearTimeout(this.showTimeout),this.showThis=!1}},created(){}};function Vg(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=(0,s.resolveComponent)("rich-text"),u=y((0,s.resolveDynamicComponent)("uni-icons"),J);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{onClick:t[2]||(t[2]=(...p)=>r.clickThis&&r.clickThis(...p)),class:"view-base",style:(0,s.normalizeStyle)([{width:`${n.sW}px`,height:i.height}]),renderWhole:!0},[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)([{width:"120rpx",height:"24rpx","margin-top":"24rpx"},r.showStyle])},[n.list.length>0?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,src:"s/call/speech_label_bg.png",w:"120rpx",h:"24rpx"})):(0,s.createCommentVNode)("",!0),n.list.length>0?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:1,class:"text-label"},(0,s.toDisplayString)(r.$str("automatic.speechText")),1)):(0,s.createCommentVNode)("",!0)],4),(0,s.createElementVNode)("list",{onClick:t[0]||(t[0]=(...p)=>r.clickThis&&r.clickThis(...p)),class:"list-msg",showScrollbar:!1,onScroll:t[1]||(t[1]=(...p)=>r.onListScroll&&r.onListScroll(...p)),style:(0,s.normalizeStyle)(r.showStyle)},[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(n.list,(p,d)=>((0,s.openBlock)(),(0,s.createElementBlock)("cell",{key:`k${p.ctime}`,ref_for:!0,ref:`aCell${p.ctime}`},[(0,s.createElementVNode)("view",{style:{"min-height":"72rpx","justify-content":"center"}},[(0,s.createVNode)(c,{nodes:p.nodes,style:(0,s.normalizeStyle)([{marginBottom:d==0?"0":"16rpx"},{"font-size":"24rpx",color:"#FFFFFF",background:"transparent","text-align":"center"}])},null,8,["nodes","style"])])]))),128)),n.showListBottom&&n.list.length>0?((0,s.openBlock)(),(0,s.createElementBlock)("cell",{key:0,ref:"listBottom"},[(0,s.createElementVNode)("view",{style:{width:"10px",height:"100rpx"}})],512)):(0,s.createCommentVNode)("",!0)],36),n.showHereTip&&n.showThis&&n.list.length>0?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"view-tip"},[(0,s.createElementVNode)("view",{class:"view-content"},[(0,s.createElementVNode)("u-text",{class:"text-content"},(0,s.toDisplayString)(r.msgHereTipStr),1),(0,s.createVNode)(u,{onClick:r.clickAutomaticMsgHereTipClose,type:"clear",size:"32rpx",color:"#FFFFFF",style:{padding:"8rpx"}},null,8,["onClick"])]),(0,s.createVNode)(a,{src:"s/call/jiao_black_1.png",w:"24rpx",h:"10rpx",style:{transform:"rotate(180deg)"}})])):(0,s.createCommentVNode)("",!0)],4)}var jg=S(Wg,[["render",Vg],["styles",[Gg]]]),zg={"view-base":{"":{flexDirection:"column"}},center:{"":{flexDirection:"row",alignItems:"center"}},"view-gift":{"":{marginBottom:"12rpx"}},item:{".view-gift ":{backgroundImage:"linear-gradient(to right, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.2))",borderTopRightRadius:"8rpx",borderBottomRightRadius:"8rpx"}},"view-gift-send":{"":{height:"96rpx"}},content:{".view-gift-send ":{paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx"}},text:{".view-gift-send ":{width:"188rpx",color:"#FFFFFF"}},"view-gift-receive":{"":{height:"124rpx",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx"}},"text-nickname":{".view-gift-receive ":{fontSize:"20rpx",color:"#FFFFFF"}},"view-line":{".view-gift-receive ":{height:"2rpx",transform:"scaleY(0.5)",backgroundColor:"rgba(255,255,255,0.1)"}},"text-thanks":{".view-gift-receive ":{marginTop:"8rpx",fontSize:"16rpx",color:"#67D4FF",textAlign:"right"}},"text-gift":{"":{color:"#FFFFFF",fontSize:"24rpx",fontWeight:"bold"}},"text-ellipsis":{"":{lines:1,overflow:"hidden",textOverflow:"ellipsis"}},"text-number":{"":{marginLeft:"18rpx",color:"#FFFA1E",fontSize:"34rpx",textShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",fontWeight:"bold"}}},$g={components:{Coin:Ce,UniTransition:st,LImg:v},props:{height:{type:String,default:""},user:{type:Object,default(){return{}}}},data(){return{list:[{show:!1,gift:{}},{show:!1,gift:{}}],saveList:[]}},methods:{$str:h,onChange(e,t){if(e.detail)this.hide(t);else{let i=this.saveList[0];i&&(this.show(t,i.gift,i.isSend),this.saveList.splice(0,1))}},clickGiftPlay(e,t){e&&e.stopPropagation(),xi(t.gift,!0)},hide(e){setTimeout(()=>{this.list[e].show=!1},5e3)},show(e,t,i){let o;i?o=`${h("sendTo")} ${this.user.nickname}`:o=h("msg.giftThanksTip",{whom:he(this.user.sex)}),this.list[e].title=o,this.list[e].isSend=i,this.list[e].gift=t,this.list[e].show=!0},showGift(e,t){for(let i=0,o=this.list.length;i<o;i++)if(!this.list[i].show){this.show(i,e,t);return}this.saveList.push({gift:e,isSend:t})}}};function Kg(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("coin"),Ce),u=y((0,s.resolveDynamicComponent)("uni-transition"),st);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"view-base",style:(0,s.normalizeStyle)({height:i.height}),renderWhole:!0},[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(n.list,(p,d)=>((0,s.openBlock)(),(0,s.createBlock)(u,{key:d,show:p.show,"mode-class":["slide-left","fade"],duration:500,onChange:_=>r.onChange(_,d)},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"center view-gift"},[p.isSend?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"center item view-gift-send"},[(0,s.createElementVNode)("view",{class:"content"},[(0,s.createElementVNode)("u-text",{class:"text text-ellipsis",style:{"font-size":"20rpx"}},(0,s.toDisplayString)(p.title),1),(0,s.createElementVNode)("u-text",{class:"text text-gift text-ellipsis",style:{"margin-top":"12rpx"}},(0,s.toDisplayString)(p.gift.title),1)]),(0,s.createElementVNode)("view",{onClick:_=>r.clickGiftPlay(_,p)},[(0,s.createVNode)(a,{src:p.gift.icon,w:"96rpx",h:"96rpx"},null,8,["src"]),(0,s.createVNode)(a,{src:"s/call/gift_play.png",w:"24rpx",h:"24rpx",style:{position:"absolute",bottom:"4rpx",left:"4rpx"}})],8,["onClick"])])):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,class:"item view-gift-receive"},[(0,s.createElementVNode)("view",{class:"center",style:{height:"86rpx"}},[(0,s.createElementVNode)("view",{style:{"margin-top":"10rpx","margin-bottom":"6rpx"}},[(0,s.createElementVNode)("view",{class:"center"},[(0,s.createElementVNode)("u-text",{class:"text-ellipsis text-nickname",style:{"max-width":"120rpx"}},(0,s.toDisplayString)(i.user.nickname),1),(0,s.createElementVNode)("u-text",{class:"text-nickname",style:{"margin-left":"4rpx"}},(0,s.toDisplayString)(r.$str("sendYouLower")),1)]),(0,s.createElementVNode)("view",{class:"center",style:{"margin-top":"10rpx"}},[(0,s.createElementVNode)("u-text",{class:"text-ellipsis text-gift",style:{"max-width":"120rpx"}},(0,s.toDisplayString)(p.gift.title),1),(0,s.createVNode)(c,{coin:p.gift.price*(p.gift.count||p.gift.number),style:{"margin-left":"8rpx"}},null,8,["coin"])])]),(0,s.createElementVNode)("view",{onClick:_=>r.clickGiftPlay(_,p),style:{"margin-left":"12rpx"}},[(0,s.createVNode)(a,{src:p.gift.icon,w:"70rpx",h:"70rpx"},null,8,["src"]),(0,s.createVNode)(a,{src:"s/call/gift_play.png",w:"20rpx",h:"20rpx",style:{position:"absolute",bottom:"4rpx",left:"0"}})],8,["onClick"])]),(0,s.createElementVNode)("view",{class:"view-line"}),(0,s.createElementVNode)("u-text",{class:"text-thanks"},(0,s.toDisplayString)(p.title),1)])),(0,s.createElementVNode)("u-text",{class:"text-number"},"x"+(0,s.toDisplayString)(p.gift.count||p.gift.number),1)])]),_:2},1032,["show","onChange"]))),128))],4)}var Yg=S($g,[["render",Kg],["styles",[zg]]]),qg={"view-content":{"":{flexDirection:"row",alignItems:"center",justifyContent:"space-around",marginTop:"6rpx"}},item:{".view-content ":{alignItems:"center"}},text:{".view-content ":{fontSize:"24rpx",color:"#FFFFFF"}}},Jg={components:{Coin:Ce,LImg:v,UniPopup:re},emits:["clickBeauty","clickVideoMute","clickVoiceMute","clickVoiceRemote","onChange"],props:{height:{type:String,default:""},user:{type:Object,default(){return{}}},isAuth:{type:[Number,Boolean],default:!0},callType:{type:Number,default:1},cameraStatus:{type:[Number,Boolean],default:1},micStatus:{type:[Number,Boolean],default:1},moreBottom:{type:String,default:""}},data(){return{sW:getApp().globalData.window.width,voiceRemoteStatus:!0}},computed:{videoStatusSrc(){return this.cameraStatus?"s/call/video_stream_s_1.png":"s/call/video_stream_n_1.png"},voiceStatusSrc(){return this.micStatus?"s/call/voice_stream_s_1.png":"s/call/voice_stream_n_1.png"},voiceRemoteStatusSrc(){return this.voiceRemoteStatus?"s/call/voice_remote_s.png":"s/call/voice_remote_n.png"}},methods:{$str:h,onChange(e){this.$emit("onChange",e)},clickMore(e){e&&e.stopPropagation(),this.close()},clickBeauty(e){e&&e.stopPropagation(),this.close(),this.$emit("clickBeauty")},clickVideo(e){e&&e.stopPropagation(),this.$emit("clickVideoMute")},clickVoice(e){e&&e.stopPropagation(),this.$emit("clickVoiceMute")},clickVoiceRemote(e){if(e&&e.stopPropagation(),!yn()){wn(an.ENABLE_REMOTE_AUDIO);return}this.voiceRemoteStatus?Be(h("tips"),h("muteChatRemoteAudioTip",{his:un(this.user.sex)}),()=>{this.voiceRemoteStatus=!this.voiceRemoteStatus,this.$emit("clickVoiceRemote",this.voiceRemoteStatus)},"",h("sure")):(this.voiceRemoteStatus=!this.voiceRemoteStatus,this.$emit("clickVoiceRemote",this.voiceRemoteStatus))},close(){this.$refs.popThis.close()},open(){this.$refs.popThis.open()}}};function Zg(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("uni-popup"),re);return(0,s.openBlock)(),(0,s.createBlock)(c,{ref:"popThis",type:"bottom","safe-area":!1,"mask-bg-color":"rgba(0,0,0,0)",onChange:r.onChange},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)({height:i.height,width:`${n.sW}px`})},[(0,s.createElementVNode)("view",{class:"view-content"},[i.callType==1?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,onClick:t[0]||(t[0]=(...u)=>r.clickBeauty&&r.clickBeauty(...u)),class:"item"},[(0,s.createVNode)(a,{onClick:r.clickBeauty,src:"s/call/beauty_action_1.png",w:"80rpx",h:"80rpx"},null,8,["onClick"]),(0,s.createElementVNode)("u-text",{class:"text"},(0,s.toDisplayString)(r.$str("beauty")),1)])):(0,s.createCommentVNode)("",!0),!i.isAuth&&i.callType==1?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,onClick:t[1]||(t[1]=(...u)=>r.clickVideo&&r.clickVideo(...u)),class:"item"},[(0,s.createVNode)(a,{onClick:r.clickVideo,src:r.videoStatusSrc,w:"80rpx",h:"80rpx"},null,8,["onClick","src"]),(0,s.createElementVNode)("u-text",{class:"text"},(0,s.toDisplayString)(r.$str("blur")),1)])):(0,s.createCommentVNode)("",!0),i.isAuth?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:2,onClick:t[2]||(t[2]=(...u)=>r.clickVoice&&r.clickVoice(...u)),class:"item"},[(0,s.createVNode)(a,{onClick:r.clickVoice,src:r.voiceStatusSrc,w:"80rpx",h:"80rpx"},null,8,["onClick","src"]),(0,s.createElementVNode)("u-text",{class:"text"},(0,s.toDisplayString)(r.$str("microphone")),1)])),(0,s.createElementVNode)("view",{onClick:t[3]||(t[3]=(...u)=>r.clickVoiceRemote&&r.clickVoiceRemote(...u)),class:"item"},[(0,s.createVNode)(a,{onClick:r.clickVoiceRemote,src:r.voiceRemoteStatusSrc,w:"80rpx",h:"80rpx"},null,8,["onClick","src"]),(0,s.createElementVNode)("u-text",{class:"text"},(0,s.toDisplayString)(r.$str("voice")),1)])]),(0,s.createElementVNode)("view",{onClick:t[4]||(t[4]=(...u)=>r.clickMore&&r.clickMore(...u)),style:(0,s.normalizeStyle)([{width:"60rpx",height:"60rpx",right:"20rpx",position:"absolute"},{bottom:i.moreBottom}])},null,4)],4)]),_:1},8,["onChange"])}var Xg=S(Jg,[["render",Zg],["styles",[qg]]]),Qg={props:{payItem:{type:Object,default(){return{}}},discountSize:{type:String,default:"40rpx"},offSize:{type:String,default:"14rpx"},offTop:{type:String,default:"-12rpx"},originalSize:{type:String,default:"24rpx"},originalColor:{type:String,default:"#999999"},type:{type:Number,default:1}},data(){return{}},computed:{discountNum(){return this.type==1?this.payItem.sale_desc.substring(0,2):this.payItem.sale_desc.substring(5,7)},originalStr(){return this.type==1?this.payItem.original_desc:this.payItem.original}},methods:{}};function e_(e,t,i,o,n,r){return(0,s.openBlock)(),(0,s.createElementBlock)("view",{renderWhole:!0},[(0,s.createElementVNode)("view",{class:"center-end c-pink"},[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)([{fontSize:i.discountSize},{"font-weight":"bold"}])},[(0,s.createElementVNode)("u-text",null,(0,s.toDisplayString)(r.discountNum),1)],4),(0,s.createElementVNode)("view",{style:{"font-size":"16rpx"}},[(0,s.createElementVNode)("view",null,[(0,s.createElementVNode)("u-text",null,"%")]),(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)([{fontSize:i.offSize},{"margin-top":"-4rpx"}])},[(0,s.createElementVNode)("u-text",null,"OFF")],4)])]),(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)([{marginTop:i.offTop},{position:"relative"}])},[(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)({fontSize:i.originalSize,color:i.originalColor})},[(0,s.createElementVNode)("u-text",null,(0,s.toDisplayString)(r.originalStr),1)],4),(0,s.createElementVNode)("view",{class:"pos-center-ver",style:{width:"100%",background:"#FF0000",height:"2rpx"}})],4)])}var t_=S(Qg,[["render",e_]]),i_={"view-item":{"":{height:"136rpx",backgroundColor:"#F1F3F6",borderRadius:"4rpx",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},"pay-title":{"":{fontSize:"32rpx",fontWeight:"bold",fontStyle:"italic",color:"#FF953F"}},"pay-diamond-title":{"":{color:"#FF953F",fontWeight:"bold",marginLeft:"8rpx",fontStyle:"italic"}},"real-money":{"":{fontWeight:"bold",fontSize:"48rpx",marginLeft:"10rpx",marginRight:"24rpx"}},"c-red":{"":{color:"#FF4477"}},"money-original":{"":{marginTop:"-6rpx",fontSize:"16rpx",textDecoration:"line-through"}}},n_={components:{CoinsDiscountView:t_,LImg:v},props:{payItem:{type:Object,default(){return{}}}},computed:{moneySize(){return this.payItem.product_type!=1?"":Number(this.payItem.diamond)>=1e4?"52rpx":"56rpx"},moneyIcon(){return this.payItem.product_type==1?this.payItem.coin_icon:"s/pub/money_vip.png"},monthStr(){let e=gr(Number(this.payItem.month));return this.payItem.month+" "+e+" VIP"},addCoinsStr(){return"+ "+pn(Number(this.payItem.give_coins))},productType(){return this.payItem.product_type},discountNum(){return this.productType==1?this.payItem.sale_desc.substring(0,2):this.payItem.sale_desc.substring(5,7)},originalStr(){return this.productType==1?this.payItem.original_desc:this.payItem.original}}};function r_(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v);return(0,s.openBlock)(),(0,s.createElementBlock)("view",{class:"view-item",renderWhole:!0},[(0,s.createElementVNode)("view",{class:"center",style:{"padding-left":"20rpx"}},[(0,s.createVNode)(a,{src:r.moneyIcon,w:"136rpx",h:"136rpx"},null,8,["src"]),i.payItem.product_type==2?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0},[(0,s.createElementVNode)("u-text",{class:"pay-title"},(0,s.toDisplayString)(r.monthStr),1),(0,s.createElementVNode)("u-text",{class:"pay-title"},(0,s.toDisplayString)(r.addCoinsStr),1)])):((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:1,class:"pay-diamond-title",style:(0,s.normalizeStyle)({fontSize:r.moneySize})},(0,s.toDisplayString)(i.payItem.diamond),5))]),(0,s.createElementVNode)("u-text",{class:"f-20"},"\u{1F449}"),(0,s.createElementVNode)("view",{class:"center"},[i.payItem.sale_desc?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,style:{position:"relative"}},[(0,s.createElementVNode)("view",{class:"center"},[(0,s.createElementVNode)("u-text",{class:"c-red",style:{"font-size":"34rpx","font-weight":"bold"}},(0,s.toDisplayString)(r.discountNum),1),(0,s.createElementVNode)("view",null,[(0,s.createElementVNode)("u-text",{class:"c-red",style:{"font-size":"20rpx"}},"%"),(0,s.createElementVNode)("u-text",{class:"c-red",style:{"font-size":"12rpx","margin-top":"-6rpx"}},"OFF")])]),(0,s.createElementVNode)("u-text",{class:"money-original c-red"},(0,s.toDisplayString)(r.originalStr),1)])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("u-text",{class:"real-money"},(0,s.toDisplayString)(i.payItem.money_desc),1)])])}var s_=S(n_,[["render",r_],["styles",[i_]]]),o_={"view-recharge":{"":{backgroundColor:"#FFFFFF",borderTopLeftRadius:"24rpx",borderTopRightRadius:"24rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,position:"relative"}},"view-top-recharge":{"":{paddingTop:"20rpx",paddingRight:"20rpx",paddingBottom:"20rpx",paddingLeft:"20rpx"}},"text-desc":{".view-top-recharge ":{fontSize:"24rpx",color:"#666666",lineHeight:"32rpx",marginTop:"8rpx"}},"split-line":{"":{height:"2rpx",backgroundColor:"#F1F3F6"}},"recharge-item":{"":{marginTop:"34rpx",marginRight:"26rpx",marginBottom:0,marginLeft:"26rpx"}},"recharge-btn":{"":{height:"76rpx",lineHeight:"76rpx",textAlign:"center",borderRadius:"12rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#FF4477",marginTop:"28rpx",marginRight:"30rpx",marginBottom:0,marginLeft:"30rpx",color:"#FF4477"}},"recharge-text":{".recharge-btn ":{textAlign:"center",color:"#FF4477",fontSize:"32rpx"}},"more-purchase-text":{"":{color:"#0091FF",fontSize:"24rpx",lineHeight:"28rpx",height:"28rpx"}}},a_={components:{RichContent:Pe,UniIcons:J,RechargeItemNvue:s_,LImg:v,UniPopup:re},data(){return{time:0,payItem:"",safeBottom:getApp().globalData.window.safeBottom,timer:!1,richContent:"",isFreeCall:!1}},methods:{$str:h,clickClose(){this.hide()},clickMoreOptions(){this.close();let e=this.isFreeCall?pt.CALL_FREE:pt.CALL_FEE;Ze(0,1,e,Ei.NO_BALANCE_POP),k.request("/pay/coin/more-stat",{})},clickGetCoins(){this.clickClose();let e=this.isFreeCall?pt.CALL_FREE:pt.CALL_FEE;Yt.evokePayV1(this.payItem.id,this.payItem.sku,this.payItem.product_type,Yt.FROM_CALL_NO_COINS,e,Ei.NO_BALANCE_POP)},startTimer(){this.timer&&clearInterval(this.timer),this.timer=setInterval(()=>{this.time<=1&&(this.hide(),clearInterval(this.timer)),this.time-=1,this.setRichContent()},1e3)},setRichContent(){this.richContent={text:this.$str("call.declinedAfter"),info:{second:{text:this.time+"s",color:"#FF0E00"}}}},close(){this.$refs.rechargePop.close()},open(){g(this.payItem)||this.time<=0||this.$refs.rechargePop.open()},hide(){this.close(),this.richContent="";let e=setTimeout(()=>{this.payItem="",this.time=0,clearTimeout(e)},300)},show(e,t,i){this.payItem=e,this.time=t,this.isFreeCall=i,this.setRichContent(),this.startTimer(),this.$nextTick(()=>{this.open()})}}};function l_(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("rich-content"),Pe),c=y((0,s.resolveDynamicComponent)("l-img"),v),u=(0,s.resolveComponent)("recharge-item-nvue"),p=y((0,s.resolveDynamicComponent)("uni-icons"),J),d=y((0,s.resolveDynamicComponent)("uni-popup"),re);return(0,s.openBlock)(),(0,s.createBlock)(d,{ref:"rechargePop",type:"bottom","safe-area":!1,"is-mask-click":!1,"mask-click":!1},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"view-recharge",style:(0,s.normalizeStyle)({paddingBottom:`${n.safeBottom}px`})},[(0,s.createElementVNode)("view",{class:"view-top-recharge"},[n.richContent?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,data:n.richContent,color:"#FF0E00",style:{"font-size":"32rpx"}},null,8,["data"])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("u-text",{class:"text-desc m-t-4"},(0,s.toDisplayString)(r.$str("call.followingSpecialDiscount")),1)]),(0,s.createElementVNode)("view",{class:"split-line"}),(0,s.createElementVNode)("view",{class:"center-align",style:{"margin-top":"20rpx"}},[(0,s.createVNode)(c,{src:"s/pub/one_time_offer.png",w:"566rpx",h:"52rpx"})]),n.payItem?((0,s.openBlock)(),(0,s.createBlock)(u,{key:0,"pay-item":n.payItem,style:{margin:"34rpx 26rpx 0 26rpx"}},null,8,["pay-item"])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(..._)=>r.clickGetCoins&&r.clickGetCoins(..._)),class:"recharge-btn center-align"},[(0,s.createElementVNode)("u-text",{class:"recharge-text"},(0,s.toDisplayString)(r.$str("call.getCoinsAndContinue")),1)]),(0,s.createElementVNode)("view",{onClick:t[1]||(t[1]=(..._)=>r.clickMoreOptions&&r.clickMoreOptions(..._)),class:"center-align",style:{"margin-top":"12rpx",padding:"20rpx 0"}},[(0,s.createElementVNode)("u-text",{class:"more-purchase-text"},(0,s.toDisplayString)(r.$str("morePurchaseOptions")),1),(0,s.createVNode)(p,{type:"right",size:"20rpx",color:"#0091FF",class:"m-t-2"})]),(0,s.createVNode)(p,{onClick:r.clickClose,type:"closeempty",size:"36rpx",color:"#000000",style:{position:"absolute",padding:"20rpx",top:"0",right:"0","z-index":"12"}},null,8,["onClick"])],4)]),_:1},512)}var c_=S(a_,[["render",l_],["styles",[o_]]]),u_={"call-remind-pop":{"":{backgroundColor:"#FFFFFF",borderTopLeftRadius:"24rpx",borderTopRightRadius:"24rpx",borderBottomRightRadius:0,borderBottomLeftRadius:0,paddingTop:"24rpx",paddingRight:"20rpx",paddingLeft:"20rpx",position:"relative"}},title:{".call-remind-pop ":{fontWeight:"600",fontSize:"34rpx",textAlign:"center"}},"sub-title":{".call-remind-pop ":{marginTop:"28rpx",lineHeight:"42rpx",color:"#FF3B30",fontSize:"28rpx"}},"tips-normal":{".call-remind-pop ":{marginTop:"28rpx",lineHeight:"36rpx",color:"#666666",fontSize:"24rpx"}},"got-btn":{".call-remind-pop ":{marginTop:"40rpx",height:"88rpx",borderRadius:"12rpx",borderWidth:"2rpx",borderStyle:"solid",borderColor:"#333333"}},"btn-text":{".call-remind-pop ":{fontSize:"28rpx"}},"close-icon":{".call-remind-pop ":{position:"absolute",width:"64rpx",height:"64rpx",right:"10rpx",top:"10rpx"}}},p_={emits:["onClickRemindGotIt","onClickRemindHangUp","onClickRemindReport"],components:{UniIcons:J,UniPopup:re},data(){return{fromType:"",subTitle:"",tips:"",btnOpacity:.4,btnText:"",closeTime:5,titleColor:"",timer:!1,user:{},isShow:!1,paddingBottom:getApp().globalData.window.safeBottom+8,closeTimer:!1}},methods:{$str:h,clickClose(){this.$refs.callRemindPop.close()},clickGotIt(){this.btnOpacity!=.4&&(this.clickClose(),this.$emit("onClickRemindGotIt",this.fromType))},clickHangUp(){this.$emit("onClickRemindHangUp")},clickReport(){this.clickClose(),this.closeTimer=setTimeout(()=>{clearTimeout(this.closeTimer),this.$emit("onClickRemindReport")},300)},onChange(e){e.show||(this.isShow=!1,this.btnOpacity=.4,this.clearTimer())},clearTimer(){this.timer&&clearTimeout(this.timer),this.closeTimer&&clearTimeout(this.closeTimer)},startTimer(){this.btnText=h("gotIt")+" "+this.closeTime+"s",this.timer=setInterval(()=>{if(this.closeTime<=1){clearInterval(this.timer),this.btnOpacity=1,this.btnText=h("gotIt");return}this.closeTime-=1,this.btnText=h("gotIt")+" "+this.closeTime+"s"},1e3)},parseData(){if(this.fromType==1){let e=he(this.user.sex);this.subTitle=h("call.bossRechargeTips",{him:e}),this.tips=h("call.punishedTips"),this.titleColor="#FF3B30",this.closeTime=5,this.btnOpacity=.4}else if(this.fromType==2)this.subTitle=h("call.noFaceGirlTips"),this.tips=h("call.noFacePunishedTips"),this.titleColor="#FF3B30",this.closeTime=5,this.btnOpacity=.4;else{let e=ht(this.user.sex),t=he(this.user.sex);this.subTitle=h("call.noFaceUserTips"),this.tips=h("call.noFaceUserReportTips",{she:e,her:t}),this.titleColor="#333333"}},open(e,t){this.clearTimer(),this.fromType=e,this.user=t,this.parseData(),this.$nextTick(()=>{this.isShow=!0,this.$refs.callRemindPop.open(),(this.fromType==1||this.fromType==2)&&this.startTimer(),this.fromType==1&&N("call_big_recharge_"+getApp().globalData.uid+"_"+this.user.uid,"1")})}},unmounted(){this.isShow=!1,this.clearTimer()}};function h_(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("uni-icons"),J),c=y((0,s.resolveDynamicComponent)("uni-popup"),re);return(0,s.openBlock)(),(0,s.createBlock)(c,{ref:"callRemindPop",type:"bottom","safe-area":!1,"mask-click":!1,onChange:r.onChange},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("view",{class:"call-remind-pop",style:(0,s.normalizeStyle)({paddingBottom:`${n.paddingBottom}px`})},[(0,s.createElementVNode)("u-text",{class:"title"},(0,s.toDisplayString)(r.$str("tips")),1),n.subTitle?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,class:"sub-title",style:(0,s.normalizeStyle)({color:n.titleColor})},(0,s.toDisplayString)(n.subTitle),5)):(0,s.createCommentVNode)("",!0),n.tips?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:1,class:"tips-normal"},(0,s.toDisplayString)(n.tips),1)):(0,s.createCommentVNode)("",!0),n.fromType==3?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:2,class:"center"},[(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(...u)=>r.clickHangUp&&r.clickHangUp(...u)),class:"got-btn center-align",style:{flex:"1"}},[(0,s.createElementVNode)("u-text",{class:"btn-text"},(0,s.toDisplayString)(r.$str("hangUp")),1)]),(0,s.createElementVNode)("view",{onClick:t[1]||(t[1]=(...u)=>r.clickReport&&r.clickReport(...u)),class:"got-btn center-align",style:{flex:"1","margin-left":"20rpx"}},[(0,s.createElementVNode)("u-text",{class:"btn-text"},(0,s.toDisplayString)(r.$str("report")),1)])])):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:3,onClick:t[2]||(t[2]=(...u)=>r.clickGotIt&&r.clickGotIt(...u)),class:"m-t-20 got-btn center-align",style:(0,s.normalizeStyle)({opacity:n.btnOpacity})},[(0,s.createElementVNode)("u-text",{class:"btn-text"},(0,s.toDisplayString)(n.btnText),1)],4)),n.fromType==3?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:4,onClick:t[3]||(t[3]=(...u)=>r.clickClose&&r.clickClose(...u)),class:"close-icon center-align"},[(0,s.createVNode)(a,{type:"closeempty",size:"36rpx"})])):(0,s.createCommentVNode)("",!0)],4)]),_:1},8,["onChange"])}var m_=S(p_,[["render",h_],["styles",[u_]]]),d_={"report-tips":{"":{position:"fixed",left:18}},"tips-container":{"":{paddingTop:"16rpx",position:"relative"}},"tips-content":{"":{paddingTop:"20rpx",paddingRight:0,paddingBottom:"20rpx",paddingLeft:"20rpx",backgroundColor:"rgba(0,0,0,0.4)",borderRadius:"12rpx"}},"tips-text":{".tips-content ":{color:"#FFFFFF",fontSize:"24rpx",flex:1,lineHeight:"36rpx"}},"close-icon":{".tips-content ":{width:"56rpx",height:"56rpx"}}},f_={components:{LImg:v,UniIcons:J},props:{arrowLeft:{type:[String,Number],default:100}},data(){return{showView:!1,tipsW:getApp().globalData.window.width-36,top:getApp().globalData.window.statusBarHeight+uni.upx2px(84)+5}},methods:{$str:h,clickClose(e){e&&e.stopPropagation(),this.showView=!1}},created(){this.showView=!0,N("call_report_tips_"+getApp().globalData.uid,"1")}};function g_(e,t,i,o,n,r){let a=y((0,s.resolveDynamicComponent)("l-img"),v),c=y((0,s.resolveDynamicComponent)("uni-icons"),J);return n.showView?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"report-tips",style:(0,s.normalizeStyle)({width:`${n.tipsW}px`,top:`${n.top}px`}),renderWhole:!0},[(0,s.createElementVNode)("view",{class:"tips-container"},[(0,s.createVNode)(a,{src:"s/call/call_report_arrow.png",w:"30rpx",h:"16rpx",style:(0,s.normalizeStyle)([{left:`${i.arrowLeft}px`},{position:"absolute",top:"0"}])},null,8,["style"]),(0,s.createElementVNode)("view",{class:"tips-content center"},[(0,s.createElementVNode)("u-text",{class:"tips-text"},(0,s.toDisplayString)(r.$str("call.reportTips")),1),(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(...u)=>r.clickClose&&r.clickClose(...u)),class:"close-icon center-align"},[(0,s.createVNode)(c,{type:"closeempty",size:"24rpx",color:"#FFFFFF"})])])])],4)):(0,s.createCommentVNode)("",!0)}var __=S(f_,[["render",g_],["styles",[d_]]]),y_={center:{"":{flexDirection:"row",alignItems:"center"}},"center-align":{"":{flexDirection:"row",alignItems:"center",justifyContent:"center"}},"center-content":{"":{alignItems:"center",justifyContent:"center"}},"chat-view":{"":{backgroundColor:"#000000"}},pos:{"":{position:"absolute",top:0,left:0}},"view-chat":{"":{flex:1}},"view-income":{".view-chat ":{position:"absolute",left:0}},"view-msg":{".view-chat ":{position:"absolute",left:0}},"view-no-coins":{".view-chat ":{position:"absolute",left:0}},"view-automatic":{".view-chat ":{position:"absolute"}},"chat-view-loading":{"":{flex:1}},"view-video-content":{".chat-view-loading ":{flex:1,alignItems:"center",justifyContent:"center"}},"video-view":{".chat-view-loading .view-video-content ":{backgroundColor:"rgba(0,0,0,0)"}},"view-avatar-content":{".chat-view-loading ":{flex:1,alignItems:"center",justifyContent:"center"}},bg:{".chat-view-loading .view-avatar-content ":{backgroundColor:"#000000",opacity:.5}},"view-call-top":{".chat-view-loading ":{position:"absolute",paddingTop:0,paddingRight:"20rpx",paddingBottom:0,paddingLeft:"20rpx"}},"text-tip":{".chat-view-loading ":{marginLeft:16,backgroundColor:"rgba(0,0,0,0.2)",borderRadius:"8rpx",paddingTop:"12rpx",paddingRight:"12rpx",paddingBottom:"12rpx",paddingLeft:"12rpx",textAlign:"left",fontSize:"24rpx",color:"#FFFFFF"},".view-automatic-tip ":{fontSize:"20rpx",color:"#FFFFFF",paddingLeft:"20rpx"}},"not-answer-tip":{".chat-view-loading ":{backgroundColor:"rgba(255,68,119,0.9)",borderRadius:"8rpx",paddingTop:"16rpx",paddingRight:"16rpx",paddingBottom:"16rpx",paddingLeft:"16rpx",color:"#FFFFFF",fontSize:"20rpx",lineHeight:"28rpx",textAlign:"center",marginBottom:"20rpx",marginLeft:16}},"view-action":{".chat-view-loading ":{flexDirection:"row",justifyContent:"space-around",alignItems:"flex-end",marginBottom:"40rpx"}},"text-connecting":{".chat-view-loading .view-action ":{fontSize:"28rpx",fontWeight:"600",color:"#FFFFFF",lineHeight:"144rpx",textAlign:"center"}},item:{".chat-view-loading .view-action ":{alignItems:"center"}},text:{".chat-view-loading .view-action ":{fontSize:"24rpx",marginTop:"8rpx",color:"#FFFFFF"}},"view-call-ring":{".chat-view-loading .view-action ":{position:"absolute",alignItems:"center",top:"40rpx"}},"ring-bg":{".chat-view-loading .view-action .view-call-ring ":{flexDirection:"row",alignItems:"center",justifyContent:"center",width:"60rpx",height:"60rpx",borderRadius:"30rpx",backgroundColor:"rgba(0,0,0,0.2)"}},"text-network":{"":{backgroundColor:"rgba(0,0,0,0.3)",borderRadius:4,paddingTop:"20rpx",paddingRight:"30rpx",paddingBottom:"20rpx",paddingLeft:"30rpx",color:"rgba(255,255,255,0.9)",fontSize:"20rpx"}},"free-count":{"":{flexDirection:"column",alignItems:"center",paddingBottom:"4rpx",marginTop:"20rpx"}},"text-content":{".free-count ":{backgroundColor:"#17BB07",borderRadius:"8rpx",paddingTop:"4rpx",paddingRight:"16rpx",paddingBottom:"4rpx",paddingLeft:"16rpx",fontSize:"24rpx",color:"#FFFFFF"}},angle:{".free-count ":{width:"24rpx",height:"24rpx",borderRadius:"6rpx",backgroundColor:"#FFDC0D",transform:"rotate(45deg)"}},"view-surface-move-tip":{"":{position:"absolute",right:"20rpx",justifyContent:"flex-end",alignItems:"flex-end"}},"surface-move-tip":{".view-surface-move-tip ":{borderRadius:"8rpx",backgroundColor:"rgba(0,0,0,0.4)",paddingLeft:"16rpx"}},"view-action-more-tip":{"":{position:"absolute",right:"20rpx",justifyContent:"flex-end",alignItems:"flex-end"}},"action-more-tip":{".view-action-more-tip ":{borderRadius:"8rpx",backgroundColor:"rgba(0,0,0,0.4)",paddingLeft:"16rpx"}},"view-left-bg":{"":{position:"absolute",left:0,width:"510rpx",backgroundImage:"linear-gradient(to right, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0))"}},"view-top":{"":{position:"absolute",left:0}},"view-bottom-bg":{"":{position:"absolute",left:0,bottom:0,backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0))"}},"view-automatic-tip":{"":{position:"absolute",right:"20rpx",justifyContent:"flex-end",alignItems:"flex-end"}},"view-tip":{".view-automatic-tip ":{height:"48rpx",backgroundColor:"rgba(0,0,0,0.41)",flexDirection:"row",alignItems:"center",borderRadius:"8rpx"}},"view-action-more-rotate-open":{"":{transitionDuration:500,transform:"rotate(45deg)"}},"view-action-more-rotate-close":{"":{transitionDuration:500,transform:"rotate(0deg)"}},"@TRANSITION":{"view-action-more-rotate-open":{duration:500},"view-action-more-rotate-close":{duration:500}}},w_={components:{CallReportTips:__,CallRemindPop:m_,CallRechargePop:c_,CallUserInfo:Rd,CallIncome:qa,CallMsg:Af,CallMatchLoading:kf,CallActionView:Ng,CallSurfaceRemote:Rf,CallSurfaceLocal:Hf,CallBeautyPop:Ca,CallActionTimer:Df,CallBtnAnswer:Ia,GameView:Fg,CallReport:Mg,CallAutomaticPop:Ug,CallAutomaticView:jg,CallViewGift:Yg,CallActionPop:Xg},mixins:[vd,Id,Dd]};function b_(e,t,i,o,n,r){let a=(0,s.resolveComponent)("game-view"),c=(0,s.resolveComponent)("call-surface-remote"),u=(0,s.resolveComponent)("call-user-info"),p=(0,s.resolveComponent)("call-report"),d=(0,s.resolveComponent)("call-action-timer"),_=(0,s.resolveComponent)("call-msg"),w=(0,s.resolveComponent)("call-view-gift"),D=(0,s.resolveComponent)("call-automatic-view"),b=y((0,s.resolveDynamicComponent)("l-img"),v),F=y((0,s.resolveDynamicComponent)("uni-transition"),st),T=y((0,s.resolveDynamicComponent)("uni-icons"),J),G=(0,s.resolveComponent)("call-action-view"),ee=(0,s.resolveComponent)("call-income"),te=(0,s.resolveComponent)("call-surface-local"),M=y((0,s.resolveDynamicComponent)("gift-sheet"),pa),Y=(0,s.resolveComponent)("call-action-pop"),Ge=(0,s.resolveComponent)("movable-area"),ct=(0,s.resolveComponent)("call-btn-answer"),Ie=(0,s.resolveComponent)("call-match-loading"),We=(0,s.resolveComponent)("call-beauty-pop"),Ye=(0,s.resolveComponent)("call-automatic-pop"),qt=(0,s.resolveComponent)("call-recharge-pop"),Jt=(0,s.resolveComponent)("call-remind-pop"),Zt=(0,s.resolveComponent)("call-report-tips");return(0,s.openBlock)(),(0,s.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,s.createElementVNode)("view",{class:"chat-view",style:(0,s.normalizeStyle)({width:`${e.sW}px`,height:`${e.sH}px`})},[e.isGameShow?((0,s.openBlock)(),(0,s.createBlock)(a,{key:0,ref:"gameView",isCallConnect:e.isConnect,roomId:e.roomInfo.room_id,openType:e.gameOpenType,targetUser:e.userInfo,isGameShow:e.isGameShow,onClickCallOpen:e.clickCallOpen,onClickGift:e.clickGift,onClickGiftAsk:e.clickGiftAsk,class:"pos",style:(0,s.normalizeStyle)({width:`${e.sW}px`,height:`${e.sH}px`,top:`${e.gameViewH}px`})},null,8,["isCallConnect","roomId","openType","targetUser","isGameShow","onClickCallOpen","onClickGift","onClickGiftAsk","style"])):(0,s.createCommentVNode)("",!0),e.isConnect?((0,s.openBlock)(),(0,s.createBlock)(c,{key:1,ref:"refSurfaceRemote",callType:e.callType,fRemoteUid:e.remoteUid,fLocalUid:e.localUid,userInfo:e.userInfo,class:"pos"},null,8,["callType","fRemoteUid","fLocalUid","userInfo"])):(0,s.createCommentVNode)("",!0),e.snapshotImagePath?((0,s.openBlock)(),(0,s.createElementBlock)("u-image",{key:2,src:e.snapshotImagePath,mode:"aspectFill",style:(0,s.normalizeStyle)({width:`${e.sW}px`,height:`${e.sH}px`}),class:"pos"},null,12,["src"])):(0,s.createCommentVNode)("",!0),e.isConnect?((0,s.openBlock)(),(0,s.createBlock)(Ge,{key:3,onClick:e.clickChatContent,class:"view-chat",style:(0,s.normalizeStyle)([{flex:"1",background:"transparent"},{width:`${e.sW}px`,height:`${e.sH}px`}])},{default:(0,s.withCtx)(()=>[e.viewMsgIsShow?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"view-left-bg",style:(0,s.normalizeStyle)({height:`${e.sH}px`})},null,4)):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("view",{onClick:t[0]||(t[0]=(...De)=>e.clickViewTop&&e.clickViewTop(...De)),class:"view-top",style:(0,s.normalizeStyle)(e.viewTopStyle)},[(0,s.createElementVNode)("view",{class:"center",style:(0,s.normalizeStyle)([{position:"absolute"},{top:`${e.viewTopCellTop}px`,left:e.viewTopIsShow?"20rpx":`-${e.sW}px`}])},[(0,s.createVNode)(u,{user:e.userInfo},null,8,["user"]),(0,s.createVNode)(p,{ref:"callReportUser",user:e.userInfo,"from-type":2,viewTopHeight:e.viewTopHeight,roomId:e.roomInfo.room_id,onOnSnapshot:e.onSnapshotInterface,onOnClickRemindReportHangUp:e.onClickRemindReportHangUp,style:{"margin-left":"20rpx"}},null,8,["user","viewTopHeight","roomId","onOnSnapshot","onOnClickRemindReportHangUp"])],4),(0,s.createVNode)(d,{ref:"actionTimer",roomType:e.roomType,freeMinDuration:e.freeMinDuration,onClickHangUp:e.clickHangup,onOnTimerListener:e.onTimerListener,style:(0,s.normalizeStyle)([{position:"absolute"},{top:`${e.viewTopCellTop}px`,right:`${e.viewTopIsShow?0:e.sW}px`}])},null,8,["roomType","freeMinDuration","onClickHangUp","onOnTimerListener","style"])],4),(0,s.createVNode)(_,{ref:"msgView",height:`${e.viewMsgHeight}px`,"bottom-action-show":e.showBottomActionView,user:e.userInfo,uid:e.userInfo.uid,"room-id":e.roomInfo.room_id,"input-focus":e.inputFocus,onOnSendAskGift:e.onSendGift,style:(0,s.normalizeStyle)({bottom:`${e.viewMsgBottom}px`}),onOnShowChange:e.onMsgViewShowListener,class:"view-msg",onOnClickCallMsgView:e.onClickCallMsgView},null,8,["height","bottom-action-show","user","uid","room-id","input-focus","onOnSendAskGift","style","onOnShowChange","onOnClickCallMsgView"]),(0,s.createVNode)(w,{ref:"viewGift",height:`${e.viewGiftHeight}rpx`,user:e.userInfo,style:(0,s.normalizeStyle)([{position:"absolute"},{left:0,top:`${e.viewGiftTop}px`}])},null,8,["height","user","style"]),e.showBottomBgView?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,class:"view-bottom-bg",style:(0,s.normalizeStyle)({height:`${e.viewBottomHeight}px`,width:`${e.sW}px`})},null,4)):(0,s.createCommentVNode)("",!0),e.isAutomaticOpen?((0,s.openBlock)(),(0,s.createBlock)(D,{key:2,ref:"callAutomaticView",height:`${e.viewAutomaticHeight}px`,user:e.userInfo,style:(0,s.normalizeStyle)({bottom:`${e.viewAutomaticBottom}px`,left:`${e.viewAutomaticLeft}px`}),onOnShowChange:e.onAutomaticViewShowListener,class:"view-automatic"},null,8,["height","user","style","onOnShowChange"])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(F,{ref:"animAutomaticMsgTip",show:e.showAutomaticMsgTip,style:(0,s.normalizeStyle)([{bottom:`${e.viewAutomaticMsgTipIconBottom}px`},{position:"absolute",left:"212rpx"}])},{default:(0,s.withCtx)(()=>[(0,s.createVNode)(b,{src:"s/call/automatic_msg_tip.png",w:"72rpx",h:"72rpx"})]),_:1},8,["show","style"]),e.showAutomaticView?((0,s.openBlock)(),(0,s.createBlock)(b,{key:3,onClick:e.clickTranslateSwitch,src:e.automaticActionSrc,w:"80rpx",h:"80rpx",style:(0,s.normalizeStyle)([{position:"absolute",right:"20rpx"},{bottom:`${e.automaticActionBottom}px`}])},null,8,["onClick","src","style"])):(0,s.createCommentVNode)("",!0),e.showAutomaticTipView?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:4,class:"view-automatic-tip",style:(0,s.normalizeStyle)({bottom:`${e.automaticOpenTipBottom}px`})},[(0,s.createElementVNode)("view",{class:"view-tip"},[(0,s.createElementVNode)("u-text",{class:"text-tip"},(0,s.toDisplayString)(e.automaticOpenTip),1),(0,s.createVNode)(T,{onClick:e.clickAutomaticTipClose,type:"clear",size:"32rpx",color:"#FFFFFF",style:{padding:"8rpx"}},null,8,["onClick"])]),(0,s.createVNode)(b,{src:"s/call/jiao_black_1.png",w:"24rpx",h:"10rpx",style:{"margin-right":"20rpx",transform:"rotate(180deg)"}})],4)):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(G,{isShow:e.showBottomActionView,isAuth:e.isAuth,user:e.userInfo,callType:e.callType,roomId:e.roomInfo.room_id,onClickGift:e.clickGift,onClickGiftAsk:e.clickGiftAsk,onClickFollow:e.clickFollow,onOnSendText:e.onSendTextListener,onClickThis:e.clickViewBottomAction,onOnInputFocus:e.onInputFocus},null,8,["isShow","isAuth","user","callType","roomId","onClickGift","onClickGiftAsk","onClickFollow","onOnSendText","onClickThis","onOnInputFocus"]),e.isAuth?((0,s.openBlock)(),(0,s.createBlock)(ee,{key:5,callDuration:e.callDuration,class:"view-income",style:(0,s.normalizeStyle)({top:`${e.incomeTopH}px`})},null,8,["callDuration","style"])):(0,s.createCommentVNode)("",!0),e.showSurfaceMoveTip?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:6,class:"view-surface-move-tip",style:(0,s.normalizeStyle)({bottom:`${e.surfaceMoveTipBottom}px`})},[(0,s.createElementVNode)("view",{class:"center surface-move-tip"},[(0,s.createElementVNode)("u-text",{style:{"font-size":"20rpx",color:"#FFFFFF"}},(0,s.toDisplayString)(e.$str("holdMoveThis")),1),(0,s.createVNode)(T,{onClick:e.clickSurfaceMoveTipClose,type:"clear",size:"32rpx",color:"#FFFFFF",style:{padding:"10rpx"}},null,8,["onClick"])]),(0,s.createVNode)(b,{src:"s/call/jiao_black_1.png",w:"24rpx",h:"10rpx",style:{transform:"rotate(180deg)","margin-right":"88rpx"}})],4)):(0,s.createCommentVNode)("",!0),e.showActionMoreIconView?((0,s.openBlock)(),(0,s.createBlock)(b,{key:7,onClick:e.clickActionMore,src:"s/call/action_more.png",w:"60rpx",h:"60rpx",style:(0,s.normalizeStyle)([{bottom:`${e.viewActionMoreIconBottom}px`},{position:"absolute",right:"20rpx"}]),class:(0,s.normalizeClass)(e.viewActionClassStr)},null,8,["onClick","style","class"])):(0,s.createCommentVNode)("",!0),e.showActionMoreTipView?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:8,class:"view-action-more-tip",style:(0,s.normalizeStyle)({bottom:`${e.viewActionMoreTipBottom}px`})},[(0,s.createElementVNode)("view",{class:"center action-more-tip"},[(0,s.createElementVNode)("u-text",{style:{"font-size":"20rpx",color:"#FFFFFF"}},(0,s.toDisplayString)(e.$str("moreFeaturesHere")),1),(0,s.createVNode)(T,{onClick:e.clickActionMoreTipClose,type:"clear",size:"32rpx",color:"#FFFFFF",style:{padding:"10rpx"}},null,8,["onClick"])]),(0,s.createVNode)(b,{src:"s/call/jiao_black_1.png",w:"24rpx",h:"10rpx",style:{transform:"rotate(180deg)","margin-right":"18rpx"}})],4)):(0,s.createCommentVNode)("",!0),e.isConnect?((0,s.openBlock)(),(0,s.createBlock)(te,{key:9,ref:"refSurfaceLocal",callType:e.callType,fRemoteUid:e.remoteUid,fLocalUid:e.localUid,userInfo:e.userInfo,onClickCameraSwitch:e.clickCameraSwitch,onOnSurfaceChange:e.onSurfaceChangeListener,onOnSurfaceMoveTipListener:e.onSurfaceMoveTipListener},null,8,["callType","fRemoteUid","fLocalUid","userInfo","onClickCameraSwitch","onOnSurfaceChange","onOnSurfaceMoveTipListener"])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(M,{ref:"giftSheet","from-type":e.giftFromType,isAsk:e.giftSheetAsk,onOnSendGift:e.onSendGift,onOnSendAskGift:e.onSendAskGift},null,8,["from-type","isAsk","onOnSendGift","onOnSendAskGift"]),(0,s.createVNode)(Y,{ref:"popAction",height:`${e.viewBottomHeight}px`,isAuth:e.isAuth,callType:e.callType,user:e.userInfo,cameraStatus:e.cameraStatus,micStatus:e.micStatus,moreBottom:`${e.viewActionMoreIconBottom}px`,onClickBeauty:e.clickBeauty,onClickVideoMute:e.clickMuteCamera,onClickVoiceMute:e.clickMuteMic,onClickVoiceRemote:e.clickVoiceRemote,onOnChange:e.onActionPopChangeListener},null,8,["height","isAuth","callType","user","cameraStatus","micStatus","moreBottom","onClickBeauty","onClickVideoMute","onClickVoiceMute","onClickVoiceRemote","onOnChange"])]),_:1},8,["onClick","style"])):e.isLoading&&e.roomType==1&&e.openType!=2&&!e.showFocusLoading?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:4,class:"chat-view-loading"},[e.videoInfo?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"view-video-content"},[!e.isAndroid&&e.videoShowBlur?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:0,class:"pos"},[(0,s.createVNode)(b,{src:e.videoInfo.cover_url,w:`${e.sW}px`,h:`${e.sH}px`,placeType:1,placeFontSize:!1},null,8,["src","w","h"]),(0,s.createElementVNode)("view",{blurEffect:"light",style:(0,s.normalizeStyle)({width:`${e.sW}px`,height:`${e.sH}px`}),class:"pos"},null,4)])):(0,s.createCommentVNode)("",!0),e.showWaitingVideo?((0,s.openBlock)(),(0,s.createElementBlock)("u-video",{key:1,class:"video-view",style:(0,s.normalizeStyle)({width:`${e.videoW}px`,height:`${e.videoH}px`}),src:e.videoInfo.showUrl,autoplay:!0,loop:!0,controls:!1,showLoading:!1,muted:!0,objectFit:e.videoObjectFit,enableProgressGesture:!1,onPlay:t[1]||(t[1]=(...De)=>e.onVideoPlay&&e.onVideoPlay(...De)),onTimeupdate:t[2]||(t[2]=(...De)=>e.onVideoTimeUpdate&&e.onVideoTimeUpdate(...De))},null,44,["src","objectFit"])):(0,s.createCommentVNode)("",!0),e.videoShowCover?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:2,class:"pos center-content",style:(0,s.normalizeStyle)({width:`${e.sW}px`,height:`${e.sH}px`})},[(0,s.createVNode)(b,{src:e.videoInfo.cover_url,w:`${e.videoW}px`,h:`${e.videoH}px`,onOnLoad:e.onLoadWaitVideoCoverListener},null,8,["src","w","h","onOnLoad"])],4)):(0,s.createCommentVNode)("",!0)])):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,class:"view-avatar-content"},[e.avatarBigUrl?((0,s.openBlock)(),(0,s.createBlock)(b,{key:0,src:e.avatarBigUrl,w:`${e.sW}px`,h:`${e.sH}px`,placeFontSize:!1,onOnLoad:e.onLoadAvatarBigListener},null,8,["src","w","h","onOnLoad"])):(0,s.createCommentVNode)("",!0),e.avatarBigIsShow?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createBlock)(b,{key:1,src:e.avatarSmallUrl,w:`${e.sW}px`,h:`${e.sH}px`,placeFontSize:!1,class:"pos"},null,8,["src","w","h"])),(0,s.createElementVNode)("view",{class:"bg pos",style:(0,s.normalizeStyle)({width:`${e.sW}px`,height:`${e.sH}px`})},null,4)])),(0,s.createElementVNode)("view",{class:"view-call-top",style:(0,s.normalizeStyle)({top:`${e.statusBarH+5}px`,width:`${e.sW}px`})},[(0,s.createElementVNode)("view",{style:{"flex-direction":"row","justify-content":"space-between"}},[(0,s.createVNode)(u,{user:e.userInfo,avatarUrl:e.avatarSmallUrl},null,8,["user","avatarUrl"]),(0,s.createVNode)(p,{user:e.userInfo},null,8,["user"])]),(0,s.createElementVNode)("u-text",{style:{"font-size":"28rpx",color:"#FFFFFF","margin-top":"20rpx"}},(0,s.toDisplayString)(e.callingStr),1),e.chargeStr?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,style:{"font-size":"24rpx",color:"rgba(255,255,255,0.7)","margin-top":"24rpx"}},(0,s.toDisplayString)(e.chargeStr),1)):(0,s.createCommentVNode)("",!0)],4),(0,s.createElementVNode)("view",{style:(0,s.normalizeStyle)([{"flex-direction":"column-reverse",position:"absolute"},{bottom:`${e.safeB}px`}])},[(0,s.createElementVNode)("view",{class:"view-action",style:(0,s.normalizeStyle)({width:`${e.sW}px`})},[e.isConnecting?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,class:"text-connecting",style:(0,s.normalizeStyle)({width:`${e.sW}px`})},(0,s.toDisplayString)(e.$str("connecting")),5)):(0,s.createCommentVNode)("",!0),e.isConnecting?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:1,onClick:t[4]||(t[4]=De=>e.clickHangup(De,0)),class:"item"},[(0,s.createVNode)(b,{onClick:t[3]||(t[3]=De=>e.clickHangup(De,0)),src:"s/call/hang_up_1.png",w:"144rpx",h:"144rpx"}),(0,s.createElementVNode)("u-text",{class:"text"},(0,s.toDisplayString)(e.hangUpStr),1)])),!e.isConnecting&&e.actionType==1?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:2,onClick:t[5]||(t[5]=(...De)=>e.clickCallRing&&e.clickCallRing(...De)),style:(0,s.normalizeStyle)({right:`${e.viewCallRingRight}px`}),class:"view-call-ring"},[(0,s.createElementVNode)("view",{class:"ring-bg"},[(0,s.createVNode)(b,{onClick:e.clickCallRing,src:e.callRingSrc,w:"40rpx",h:"40rpx"},null,8,["onClick","src"])]),(0,s.createElementVNode)("u-text",{class:"text"},(0,s.toDisplayString)(e.$str("ring")),1)],4)):(0,s.createCommentVNode)("",!0),!e.isConnecting&&e.actionType==2?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:3,class:"item"},[!e.isAuth&&e.userInfo.call_free_min?((0,s.openBlock)(),(0,s.createBlock)(F,{key:0,ref:"countTip",show:!0,class:"free-count"},{default:(0,s.withCtx)(()=>[(0,s.createElementVNode)("u-text",{class:"text-content"},(0,s.toDisplayString)(e.$str("call.freeTime")),1),(0,s.createVNode)(b,{src:"s/call/free_angle.png",w:"36rpx",h:"20rpx",style:{"margin-top":"-4rpx","margin-left":"80rpx"}})]),_:1},512)):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(ct,{callType:e.callType,onClick:e.clickAnswer},null,8,["callType","onClick"]),(0,s.createElementVNode)("u-text",{class:"text"},(0,s.toDisplayString)(e.$str("answer")),1)])):(0,s.createCommentVNode)("",!0)],4),(0,s.createElementVNode)("u-text",{class:"text-tip",style:(0,s.normalizeStyle)({width:`${e.sW-32}px`})},(0,s.toDisplayString)(e.$str("call.duringWarning")),5),e.notAnswerTipTime<=0?((0,s.openBlock)(),(0,s.createElementBlock)("u-text",{key:0,class:"not-answer-tip",style:(0,s.normalizeStyle)({width:`${e.sW-32}px`})},(0,s.toDisplayString)(e.getNotAnswerTip),5)):(0,s.createCommentVNode)("",!0)],4)])):e.isLoading&&(e.roomType==2||e.openType==2||e.showFocusLoading)?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:5,class:"chat-view-loading"},[(0,s.createVNode)(Ie,{user:e.userInfo,"from-type":e.matchLoadingFromType,onOnMatchLoadingListener:e.onMatchLoadingListener},null,8,["user","from-type","onOnMatchLoadingListener"])])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(We,{ref:"callBeautyPop",onOnBeautyChange:e.onBeautyChange,onOnChange:e.onBeautyPopChange},null,8,["onOnBeautyChange","onOnChange"]),(0,s.createVNode)(Ye,{ref:"callAutomaticPop",onOnStatusChange:e.onAutomaticStatusChange},null,8,["onOnStatusChange"]),e.isConnect&&e.networkTip?((0,s.openBlock)(),(0,s.createElementBlock)("view",{key:6,style:(0,s.normalizeStyle)([{"align-items":"center",position:"absolute"},{width:`${e.sW}px`,bottom:`${e.safeB+130}px`}])},[(0,s.createElementVNode)("u-text",{class:"text-network"},(0,s.toDisplayString)(e.networkTip),1)],4)):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(qt,{ref:"callRechargePop"},null,512),(0,s.createVNode)(Jt,{ref:"callRemindPop",onOnClickRemindGotIt:e.onClickRemindGotIt,onOnClickRemindHangUp:e.onClickRemindHangUp,onOnClickRemindReport:e.onClickRemindReport},null,8,["onOnClickRemindGotIt","onOnClickRemindHangUp","onOnClickRemindReport"]),e.showReportTips?((0,s.openBlock)(),(0,s.createBlock)(Zt,{key:7,ref:"callReportTips","arrow-left":e.reportArrowLeft},null,8,["arrow-left"])):(0,s.createCommentVNode)("",!0)],4)])}var jn=S(w_,[["render",b_],["styles",[y_]]]);var ts=plus.webview.currentWebview();if(ts){let e=parseInt(ts.id),t="pages/call/chat-view",i={};try{i=JSON.parse(ts.__query__)}catch(n){}jn.mpType="page";let o=Vue.createPageApp(jn,{$store:getApp({allowDefault:!0}).$store,__pageId:e,__pagePath:t,__pageQuery:i});o.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...jn.styles||[]])),o.mount("#root")}})();
/*!
  * @intlify/shared v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/message-resolver v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/runtime v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/message-compiler v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * @intlify/core-base v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */
/*!
  * vue-i18n v9.1.9
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
